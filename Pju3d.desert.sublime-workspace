{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"c",
				"critical"
			],
			[
				"cr",
				"critical"
			],
			[
				"ret",
				"return"
			],
			[
				"fo",
				"foreach\tForEach"
			],
			[
				"m_sk",
				"m_SkillManager"
			]
		]
	},
	"buffers":
	[
		{
			"contents": "Package Control Messages\n========================\n\n\nLSP\n---\n\n  => 1.29.0\n  \n  ⚠️⚠️⚠️\n  To ensure that everything works properly after LSP package is updated,\n  it's strongly recommended to restart Sublime Text once it finishes updating all packages.\n  ⚠️⚠️⚠️\n  \n  # New features\n  \n  - add commands for opening \"find references\" in bottom or quick panel (#2409) (Rafał Chłodnicki)\n  - Add format on paste (#2397) (Предраг Николић)\n  \n  # Fixes and Improvements\n  \n  - Fix usage of sublime.score_selector (#2427) (Benjamin Schaaf)\n  - Fix find_open_file incompatibility with older ST versions (Janos Wortmann)\n  \n  # Refactoring\n  \n  - Remove hover provider count view setting (Janos Wortmann)\n  - Remove unnecessary argument from lsp_symbol_rename command (Janos Wortmann)\n  \n  # Documentation\n  \n  - docs: add info about typst-lsp commands (#2424) (Ilia)\n  - docs: add systemverilog/verible language server setup guide (#2416) (Johnny Martínez)\n  - docs: rewrite self-help instructions (#2405) (Rafał Chłodnicki)\n  - docs: rewritten \"common problems\" section (#2406) (Rafał Chłodnicki)\n  - A few enhancements for the docs website (#2402) (jwortmann)\n  - chore: deploy docs preview on docs changes (#2403) (Rafał Chłodnicki)\n",
			"settings":
			{
				"buffer_size": 1225,
				"line_ending": "Windows",
				"name": "Package Control Messages",
				"read_only": true,
				"scratch": true
			},
			"undo_stack":
			[
				[
					1,
					1,
					"package_control_message",
					{
						"message": "\n\nLSP\n---\n\n  => 1.29.0\n  \n  ⚠️⚠️⚠️\n  To ensure that everything works properly after LSP package is updated,\n  it's strongly recommended to restart Sublime Text once it finishes updating all packages.\n  ⚠️⚠️⚠️\n  \n  # New features\n  \n  - add commands for opening \"find references\" in bottom or quick panel (#2409) (Rafał Chłodnicki)\n  - Add format on paste (#2397) (Предраг Николић)\n  \n  # Fixes and Improvements\n  \n  - Fix usage of sublime.score_selector (#2427) (Benjamin Schaaf)\n  - Fix find_open_file incompatibility with older ST versions (Janos Wortmann)\n  \n  # Refactoring\n  \n  - Remove hover provider count view setting (Janos Wortmann)\n  - Remove unnecessary argument from lsp_symbol_rename command (Janos Wortmann)\n  \n  # Documentation\n  \n  - docs: add info about typst-lsp commands (#2424) (Ilia)\n  - docs: add systemverilog/verible language server setup guide (#2416) (Johnny Martínez)\n  - docs: rewrite self-help instructions (#2405) (Rafał Chłodnicki)\n  - docs: rewritten \"common problems\" section (#2406) (Rafał Chłodnicki)\n  - A few enhancements for the docs website (#2402) (jwortmann)\n  - chore: deploy docs preview on docs changes (#2403) (Rafał Chłodnicki)\n"
					},
					"AQAAAAAAAAAAAAAAyQQAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"contents": "\t--- ✄ -----------------------@@created(24-02-04 11:47)\n\t✔\tsublime开发环境 @done (24-02-04 11:20)\n\t✔\t搞清楚SceneLinkedSMB和AttackState作用 : 简单说是给动作绑定音效的，可以在初始调用一次GetComponet<T>而不用每次动作播放前都调用，SceneLinkedSMB是通过某个TMonoBehaviour绑定动作状态 @done (24-02-04 11:45)\n\t✔\tclass dev: effect @critical @done (24-02-04 22:28)\n\t✔\t调整主Hud(暂时干掉建造模式的显示) @done (24-02-04 16:42)\n\t✔\t背包界面：道具使用按钮 @done (24-02-04 22:27)\n\n\t--- ✄ -----------------------@@created(24-02-05 15:25)\n\t✔\t优化背包界面(工具栏、道具tooltips) @done (24-02-05 15:24)\n\t✘\tcalss dev: ToolItem @cancelled (24-02-05 15:25)\n\t✔\t技能管理及CD @done (24-02-05 21:00)\n\t✔\t技能CD显示 @done (24-02-16 15:57)\n\t✔\t怪物掉落 @critical @done (24-02-16 15:57)\n\t✔\t远程攻击(子弹效果) @done (24-02-16 15:57)\n\t✔\t技能效果逻辑完善 @done (24-02-16 15:58)\n\t--- ✄ ---------------------@today(24-02-20 11:00)\n\t✔\t设计：NPC交互 @done (24-02-16 15:57)\n\t✔\t攻击状态移动的bug @critical @done (24-02-20 12:17)\n\t✔\titemdemand提交bug @done (24-02-20 14:15)\n\t✔\t自动拾取道具 @critical @done (24-02-20 14:36)\n\t✔\t自动装备 @critical @done (24-02-20 18:14)\n\t--- ✄ -----------------------@created(24-02-22 14:20)\n\t✔\t基地建造模式 @critical @done (24-02-23 10:37)\n\t--- ✄ -----------------------@created(24-02-23 10:37)\n\t✔\t游戏目标系统 @critical @done (24-02-24 11:27)\n\t✔\tHit音效代码优化 @done (24-02-24 12:18)\n\t--- ✄ -----------------------@created(24-02-27 11:27)\n\t✔\t目标类型：建造 @done (24-02-27 17:59)\n\t✔\t目标类型：打怪 @done (24-02-27 17:59)\n\t---- ✄ -----------------------@created(24-02-29 11:49)\n\t✔\t换装bug @done (24-02-29 11:49)\n\t✘\t可交互道具需求 @cancelled (24-02-29 11:50)\n\t✔\t角色等级/升级/经验获得 @done (24-02-29 11:50)\n\t✔\t剧情事件添加条件判断 @done (24-03-01 10:06)\n\t---- ✄ -----------------------@created(24-03-01 10:07)\n\n\t---- ✄ -----------------------@created(24-03-12 11:05)\n\t✔\tcraft过程表现 @done (24-03-12 15:49)\n\t---- ✄ -----------------------@created(24-03-13 10:58)\n\t✘\tTimerSlider @cancelled (24-03-13 17:28)\n\t✔\toptimized code: IInteractable @done (24-03-13 20:5\n\t✔\titemdemand 完善 @done (24-03-13 23:47)\n\t---- ✄ -----------------------@created(24-03-14 14:36)\n\t✔\tworldhud -> uihud @critical @done (24-03-14 14:36)\n\t✔\tUIInteractWindow @critical @done (24-03-14 18:04)\n\t---- ✄ -----------------------@created(24-03-16 11:57)\n\n\t✘\tUIBuildWindow && build system @critical @cancelled (24-03-16 11:58)\n\t✔\tpit交互 @critical @done (24-03-21 15:46)\n\t✔ device:围栏 @done (24-03-21 15:47)\n\t✔\t新建筑：箭塔 @done (24-03-21 15:46)\n\n\t---- ✄ -----------------------@created(24-03-21 19:30)\n\t✔\tAIData @done (24-03-21 19:29)\n\t✔\tSpawnData @done (24-03-21 19:30)\n\t---- ✄ -----------------------@created(24-03-23 15:55)\n\t✔\tLevelSystem @critical @done (24-03-23 15:56)\n\t✔\t优化: storyEvent -> 读取Data @done (24-03-23 21:48)\n\t✔\t优化： levelSysterm @done (24-03-23 21:48)\n\t---- ✄ -----------------------@created(24-03-26 10:58)\n\t✔\t基础商店 @done (24-03-26 10:59)\n\t✔\t关卡开场剧情 @done (24-03-26 10:59)\n\t✔\t关卡选择界面 @done (24-03-26 20:53)\n\t✔\tslg战斗摄像机控制 @done (24-03-27 11:08)\n\t---- ✄ -----------------------@created(24-03-27 11:08)\n\t☐\tUI完善及逻辑整理 @critical \n\t\t✔\t小队界面位置确定 @done (24-03-27 15:43)\n\t\t✔\t聊天信息界面位置确定 @done (24-03-27 15:44)\n\t\t✔\twinMain -> winRpg @done (24-03-27 15:44)\n\t\t✔\titemToolTips界面位置调整 @done (24-03-27 15:44)\n\t\t☐\trpg、build共用内容单独抽离为一个window\n\t\t☐\t城建界面布局确定\n\t\t☐\trpg-> build切换\n\t\t☐\tslg界面布局确定\n\t\t☐\ttd界面布局确定\n\n\t☐\tTroopSystem 基础框架 @critical\n\t\t✔\tLordSystem 调整 @done (24-03-27 17:11)\n\t\t☐\tTroopWindow\n\n\n  ☐\tCharacterData @critical\n\t☐\t新手关蜘蛛掉落:生命元素\n\t☐\t新手关GameGoal\n\t☐\t采集物：石头\n\t☐\tstoryEvent: 面板类型 @critical\n\t☐\tai优化：朝向问题\n\n\n\t☐ device:钉板\n\t☐ device:陷阱\n\t☐\t前期流程：craft教学\n\t☐\tdemo关卡：tdLevel @critical\n\t☐\tNPC委托 @critical\n\n\n\t✘\tNPC旅店老板: 玩家阵营\\固定位置\\对话添加修理围栏目标(强制) @cancelled (24-03-13 11:00)\n\t☐\t宝箱：a. 野外刷新，需要钥匙   b.基地需要资源  c. 打图挖宝\n\t☐\t随机装备系统 @critical\n\t☐\t目标类型：防守 @critical\n\t☐\t基础资源：money、生命之源 @critical\n\n\t☐\tslg战斗 @critical\n\t☐\t建筑交资源表现优化(交互区域、资源动画、音效)\n\t✘\t技能施放bug @cancelled (24-03-13 11:03)\n\n\n\t☐\t道具快捷使用栏位\n\t☐\t道具获取动画表现\n\t☐\t角色个性化标签：性格、星座、喜好道具\n\t☐\tnew effect: 增加友好度\n\n\n\t☐\t优化受击表现（伤害数字、miss、调用)\n\n\n\t✔\t设计：NPC委托 @done (24-02-29 11:51)\n\t✘ storylistener 与 teller的底层通用性 @cancelled (24-02-20 18:19)\n\t✘\t设计:坑交互 @cancelled (24-02-22 12:47)\n\t☐\t设计：种树\n\t☐\t设计:捉怪",
			"file": "todoList.tasks",
			"file_size": 5329,
			"file_write_time": 133560042661324285,
			"settings":
			{
				"buffer_size": 3930,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					210,
					1,
					"left_delete",
					null,
					"AQAAANAGAAAAAAAA0AYAAAAAAAABAAAAZA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA0QYAAAAAAADRBgAAAAAAAAAAAAAAAPC/"
				],
				[
					211,
					1,
					"insert",
					{
						"characters": "Slider"
					},
					"BgAAANAGAAAAAAAA0QYAAAAAAAAAAAAA0QYAAAAAAADSBgAAAAAAAAAAAADSBgAAAAAAANMGAAAAAAAAAAAAANMGAAAAAAAA1AYAAAAAAAAAAAAA1AYAAAAAAADVBgAAAAAAAAAAAADVBgAAAAAAANYGAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA0AYAAAAAAADQBgAAAAAAAAAAAAAAAPC/"
				],
				[
					212,
					6,
					"left_delete",
					null,
					"BgAAANUGAAAAAAAA1QYAAAAAAAABAAAActQGAAAAAAAA1AYAAAAAAAABAAAAZdMGAAAAAAAA0wYAAAAAAAABAAAAZNIGAAAAAAAA0gYAAAAAAAABAAAAadEGAAAAAAAA0QYAAAAAAAABAAAAbNAGAAAAAAAA0AYAAAAAAAABAAAAUw",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA1gYAAAAAAADWBgAAAAAAAAAAAAAAAPC/"
				],
				[
					213,
					1,
					"insert",
					{
						"characters": "TimerSl"
					},
					"BwAAANAGAAAAAAAA0QYAAAAAAAAAAAAA0QYAAAAAAADSBgAAAAAAAAAAAADSBgAAAAAAANMGAAAAAAAAAAAAANMGAAAAAAAA1AYAAAAAAAAAAAAA1AYAAAAAAADVBgAAAAAAAAAAAADVBgAAAAAAANYGAAAAAAAAAAAAANYGAAAAAAAA1wYAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA0AYAAAAAAADQBgAAAAAAAAAAAAAAAPC/"
				],
				[
					214,
					1,
					"insert",
					{
						"characters": "ider"
					},
					"BAAAANcGAAAAAAAA2AYAAAAAAAAAAAAA2AYAAAAAAADZBgAAAAAAAAAAAADZBgAAAAAAANoGAAAAAAAAAAAAANoGAAAAAAAA2wYAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA1wYAAAAAAADXBgAAAAAAAAAAAAAAAPC/"
				],
				[
					218,
					1,
					"plain_tasks_cancel",
					null,
					"AgAAANsGAAAAAAAA9wYAAAAAAAAAAAAAzQYAAAAAAADbBgAAAAAAABAAAAAJ4piQCVRpbWVyU2xpZGVy",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAzwYAAAAAAADPBgAAAAAAAAAAAAAAAPC/"
				],
				[
					221,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAPcGAAAAAAAA+AYAAAAAAAAAAAAA+AYAAAAAAAD5BgAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA9wYAAAAAAAD3BgAAAAAAAAAAAAAAAPC/"
				],
				[
					222,
					1,
					"plain_tasks_new",
					null,
					"AQAAAPgGAAAAAAAA+wYAAAAAAAABAAAACQ",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA+QYAAAAAAAD5BgAAAAAAAAAAAAAAAPC/"
				],
				[
					223,
					1,
					"insert",
					{
						"characters": "optimi"
					},
					"BgAAAPsGAAAAAAAA/AYAAAAAAAAAAAAA/AYAAAAAAAD9BgAAAAAAAAAAAAD9BgAAAAAAAP4GAAAAAAAAAAAAAP4GAAAAAAAA/wYAAAAAAAAAAAAA/wYAAAAAAAAABwAAAAAAAAAAAAAABwAAAAAAAAEHAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA+wYAAAAAAAD7BgAAAAAAAAAAAAAAAPC/"
				],
				[
					224,
					1,
					"insert",
					{
						"characters": "zed"
					},
					"AwAAAAEHAAAAAAAAAgcAAAAAAAAAAAAAAgcAAAAAAAADBwAAAAAAAAAAAAADBwAAAAAAAAQHAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAQcAAAAAAAABBwAAAAAAAAAAAAAAAPC/"
				],
				[
					225,
					1,
					"insert",
					{
						"characters": " code:"
					},
					"BgAAAAQHAAAAAAAABQcAAAAAAAAAAAAABQcAAAAAAAAGBwAAAAAAAAAAAAAGBwAAAAAAAAcHAAAAAAAAAAAAAAcHAAAAAAAACAcAAAAAAAAAAAAACAcAAAAAAAAJBwAAAAAAAAAAAAAJBwAAAAAAAAoHAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAABAcAAAAAAAAEBwAAAAAAAAAAAAAAAPC/"
				],
				[
					226,
					1,
					"insert",
					{
						"characters": " inter"
					},
					"BgAAAAoHAAAAAAAACwcAAAAAAAAAAAAACwcAAAAAAAAMBwAAAAAAAAAAAAAMBwAAAAAAAA0HAAAAAAAAAAAAAA0HAAAAAAAADgcAAAAAAAAAAAAADgcAAAAAAAAPBwAAAAAAAAAAAAAPBwAAAAAAABAHAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAACgcAAAAAAAAKBwAAAAAAAAAAAAAAAPC/"
				],
				[
					227,
					1,
					"insert",
					{
						"characters": "act"
					},
					"AwAAABAHAAAAAAAAEQcAAAAAAAAAAAAAEQcAAAAAAAASBwAAAAAAAAAAAAASBwAAAAAAABMHAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAEAcAAAAAAAAQBwAAAAAAAAAAAAAAAPC/"
				],
				[
					228,
					8,
					"left_delete",
					null,
					"CAAAABIHAAAAAAAAEgcAAAAAAAABAAAAdBEHAAAAAAAAEQcAAAAAAAABAAAAYxAHAAAAAAAAEAcAAAAAAAABAAAAYQ8HAAAAAAAADwcAAAAAAAABAAAAcg4HAAAAAAAADgcAAAAAAAABAAAAZQ0HAAAAAAAADQcAAAAAAAABAAAAdAwHAAAAAAAADAcAAAAAAAABAAAAbgsHAAAAAAAACwcAAAAAAAABAAAAaQ",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAEwcAAAAAAAATBwAAAAAAAAAAAAAAAPC/"
				],
				[
					229,
					1,
					"insert",
					{
						"characters": "IIntera"
					},
					"BwAAAAsHAAAAAAAADAcAAAAAAAAAAAAADAcAAAAAAAANBwAAAAAAAAAAAAANBwAAAAAAAA4HAAAAAAAAAAAAAA4HAAAAAAAADwcAAAAAAAAAAAAADwcAAAAAAAAQBwAAAAAAAAAAAAAQBwAAAAAAABEHAAAAAAAAAAAAABEHAAAAAAAAEgcAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAACwcAAAAAAAALBwAAAAAAAAAAAAAAAPC/"
				],
				[
					230,
					1,
					"insert",
					{
						"characters": "ctable"
					},
					"BgAAABIHAAAAAAAAEwcAAAAAAAAAAAAAEwcAAAAAAAAUBwAAAAAAAAAAAAAUBwAAAAAAABUHAAAAAAAAAAAAABUHAAAAAAAAFgcAAAAAAAAAAAAAFgcAAAAAAAAXBwAAAAAAAAAAAAAXBwAAAAAAABgHAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAEgcAAAAAAAASBwAAAAAAAAAAAAAAAPC/"
				],
				[
					236,
					1,
					"plain_tasks_complete",
					null,
					"AgAAABgHAAAAAAAALwcAAAAAAAAAAAAA+AYAAAAAAAAYBwAAAAAAACIAAAAJ4piQCW9wdGltaXplZCBjb2RlOiBJSW50ZXJhY3RhYmxl",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA+QYAAAAAAAD5BgAAAAAAAAAAAAAAAPC/"
				],
				[
					255,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAF8HAAAAAAAAdgcAAAAAAAAAAAAATwcAAAAAAABfBwAAAAAAABYAAAAJ4piQCWl0ZW1kZW1hbmQg5a6M5ZaE",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAUAcAAAAAAABQBwAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAE4HAAAAAAAAZQcAAAAAAAAAAAAAMAcAAAAAAABOBwAAAAAAACAAAAAJ4piQCXdvcmxkaHVkIC0+IHVpaHVkIEBjcml0aWNhbA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADEHAAAAAAAAMQcAAAAAAAAAAAAAAADwvw"
				],
				[
					7,
					1,
					"cut",
					null,
					"AQAAADAHAAAAAAAAMAcAAAAAAAA3AAAACeKclAl3b3JsZGh1ZCAtPiB1aWh1ZCBAY3JpdGljYWwgQGRvbmUgKDI0LTAzLTE0IDE0OjM2KQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGUHAAAAAAAAMAcAAAAAAAAAAAAAAADwvw"
				],
				[
					8,
					2,
					"left_delete",
					null,
					"AgAAAC8HAAAAAAAALwcAAAAAAAABAAAACi4HAAAAAAAALgcAAAAAAAABAAAAKQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADAHAAAAAAAAMAcAAAAAAAAAAAAAAADwvw"
				],
				[
					9,
					1,
					"right_delete",
					null,
					"AQAAAC4HAAAAAAAALgcAAAAAAAABAAAACg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAC4HAAAAAAAALgcAAAAAAAAAAAAAAADwvw"
				],
				[
					10,
					1,
					"left_delete",
					null,
					"AQAAAC0HAAAAAAAALQcAAAAAAAABAAAANg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAC4HAAAAAAAALgcAAAAAAAAAAAAAAADwvw"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAC0HAAAAAAAALgcAAAAAAAAAAAAALgcAAAAAAAAvBwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAC0HAAAAAAAALQcAAAAAAAAAAAAAAADwvw"
				],
				[
					12,
					1,
					"right_delete",
					null,
					"AQAAAC8HAAAAAAAALwcAAAAAAAABAAAACQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAC8HAAAAAAAALwcAAAAAAAAAAAAAAADwvw"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": "\n\n\n\n"
					},
					"CwAAAFUHAAAAAAAAVgcAAAAAAAAAAAAAVgcAAAAAAABXBwAAAAAAAAAAAABXBwAAAAAAAFgHAAAAAAAAAAAAAFgHAAAAAAAAWQcAAAAAAAAAAAAAVgcAAAAAAABWBwAAAAAAAAEAAAAJWAcAAAAAAABZBwAAAAAAAAAAAABZBwAAAAAAAFoHAAAAAAAAAAAAAFcHAAAAAAAAVwcAAAAAAAABAAAACVkHAAAAAAAAWgcAAAAAAAAAAAAAWgcAAAAAAABbBwAAAAAAAAAAAABYBwAAAAAAAFgHAAAAAAAAAQAAAAk",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFUHAAAAAAAAVQcAAAAAAAAAAAAAAADwvw"
				],
				[
					16,
					1,
					"paste",
					null,
					"AQAAAFoHAAAAAAAAjwcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFoHAAAAAAAAWgcAAAAAAAAAAAAAAADwvw"
				],
				[
					19,
					1,
					"left_delete",
					null,
					"AQAAAFoHAAAAAAAAWgcAAAAAAAABAAAACQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFsHAAAAAAAAWwcAAAAAAAAAAAAAAADwvw"
				],
				[
					24,
					1,
					"reindent",
					null,
					"AQAAAFYHAAAAAAAAVwcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFYHAAAAAAAAVgcAAAAAAAAAAAAAAADwvw"
				],
				[
					25,
					1,
					"",
					null,
					"AQAAAFcHAAAAAAAAWAcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFcHAAAAAAAAVwcAAAAAAAAAAAAAAADwvw"
				],
				[
					26,
					1,
					"",
					null,
					"AQAAAFgHAAAAAAAAWQcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFgHAAAAAAAAWAcAAAAAAAAAAAAAAADwvw"
				],
				[
					27,
					1,
					"",
					null,
					"AQAAAFkHAAAAAAAAWgcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFkHAAAAAAAAWQcAAAAAAAAAAAAAAADwvw"
				],
				[
					28,
					1,
					"expand_snippet",
					null,
					"AgAAAFgHAAAAAAAAWAcAAAAAAAACAAAALS1YBwAAAAAAAHUHAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFoHAAAAAAAAWgcAAAAAAAAAAAAAAADwvw"
				],
				[
					30,
					1,
					"insert",
					{
						"characters": "c"
					},
					"AQAAAHUHAAAAAAAAdgcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHUHAAAAAAAAdQcAAAAAAAAAAAAAAADwvw"
				],
				[
					31,
					1,
					"left_delete",
					null,
					"AQAAAHUHAAAAAAAAdQcAAAAAAAABAAAAYw",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHYHAAAAAAAAdgcAAAAAAAAAAAAAAADwvw"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "@creq"
					},
					"BQAAAHUHAAAAAAAAdgcAAAAAAAAAAAAAdgcAAAAAAAB3BwAAAAAAAAAAAAB3BwAAAAAAAHgHAAAAAAAAAAAAAHgHAAAAAAAAeQcAAAAAAAAAAAAAeQcAAAAAAAB6BwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHUHAAAAAAAAdQcAAAAAAAAAAAAAAADwvw"
				],
				[
					33,
					1,
					"left_delete",
					null,
					"AQAAAHkHAAAAAAAAeQcAAAAAAAABAAAAcQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHoHAAAAAAAAegcAAAAAAAAAAAAAAADwvw"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": "ate"
					},
					"AwAAAHkHAAAAAAAAegcAAAAAAAAAAAAAegcAAAAAAAB7BwAAAAAAAAAAAAB7BwAAAAAAAHwHAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHkHAAAAAAAAeQcAAAAAAAAAAAAAAADwvw"
				],
				[
					35,
					1,
					"insert_completion",
					{
						"completion": "created",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "created"
					},
					"AgAAAHYHAAAAAAAAdgcAAAAAAAAGAAAAY3JlYXRldgcAAAAAAAB9BwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHwHAAAAAAAAfAcAAAAAAAAAAAAAAADwvw"
				],
				[
					36,
					1,
					"plain_task_insert_date",
					null,
					"AQAAAH0HAAAAAAAAjQcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAH0HAAAAAAAAfQcAAAAAAAAAAAAAAADwvw"
				],
				[
					41,
					3,
					"left_delete",
					null,
					"AwAAAJAHAAAAAAAAkAcAAAAAAAABAAAACY8HAAAAAAAAjwcAAAAAAAABAAAACo4HAAAAAAAAjgcAAAAAAAABAAAACg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJEHAAAAAAAAkQcAAAAAAAAAAAAAAADwvw"
				],
				[
					42,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAI4HAAAAAAAAjwcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAI4HAAAAAAAAjgcAAAAAAAAAAAAAAADwvw"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAMMHAAAAAAAAxAcAAAAAAAAAAAAAxAcAAAAAAADFBwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMMHAAAAAAAAwwcAAAAAAAAAAAAAAADwvw"
				],
				[
					46,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BgAAAMUHAAAAAAAAxgcAAAAAAAAAAAAAxgcAAAAAAADHBwAAAAAAAAAAAADEBwAAAAAAAMQHAAAAAAAAAQAAAAnGBwAAAAAAAMcHAAAAAAAAAAAAAMcHAAAAAAAAyAcAAAAAAAAAAAAAxQcAAAAAAADFBwAAAAAAAAEAAAAJ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMUHAAAAAAAAxQcAAAAAAAAAAAAAAADwvw"
				],
				[
					49,
					1,
					"plain_tasks_new",
					null,
					"AQAAAMQHAAAAAAAAxwcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMQHAAAAAAAAxAcAAAAAAAAAAAAAAADwvw"
				],
				[
					50,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AgAAAMcHAAAAAAAAyAcAAAAAAAAAAAAAygcAAAAAAADKBwAAAAAAAAEAAAAJ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMcHAAAAAAAAxwcAAAAAAAAAAAAAAADwvw"
				],
				[
					51,
					1,
					"left_delete",
					null,
					"AQAAAMcHAAAAAAAAxwcAAAAAAAABAAAAZA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMgHAAAAAAAAyAcAAAAAAAAAAAAAAADwvw"
				],
				[
					52,
					1,
					"insert",
					{
						"characters": "UIIntera"
					},
					"CAAAAMcHAAAAAAAAyAcAAAAAAAAAAAAAyAcAAAAAAADJBwAAAAAAAAAAAADJBwAAAAAAAMoHAAAAAAAAAAAAAMoHAAAAAAAAywcAAAAAAAAAAAAAywcAAAAAAADMBwAAAAAAAAAAAADMBwAAAAAAAM0HAAAAAAAAAAAAAM0HAAAAAAAAzgcAAAAAAAAAAAAAzgcAAAAAAADPBwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMcHAAAAAAAAxwcAAAAAAAAAAAAAAADwvw"
				],
				[
					53,
					1,
					"insert",
					{
						"characters": "ctWindow"
					},
					"CAAAAM8HAAAAAAAA0AcAAAAAAAAAAAAA0AcAAAAAAADRBwAAAAAAAAAAAADRBwAAAAAAANIHAAAAAAAAAAAAANIHAAAAAAAA0wcAAAAAAAAAAAAA0wcAAAAAAADUBwAAAAAAAAAAAADUBwAAAAAAANUHAAAAAAAAAAAAANUHAAAAAAAA1gcAAAAAAAAAAAAA1gcAAAAAAADXBwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAM8HAAAAAAAAzwcAAAAAAAAAAAAAAADwvw"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": " @cr"
					},
					"BAAAANcHAAAAAAAA2AcAAAAAAAAAAAAA2AcAAAAAAADZBwAAAAAAAAAAAADZBwAAAAAAANoHAAAAAAAAAAAAANoHAAAAAAAA2wcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANcHAAAAAAAA1wcAAAAAAAAAAAAAAADwvw"
				],
				[
					61,
					1,
					"insert",
					{
						"characters": "itical"
					},
					"BgAAANsHAAAAAAAA3AcAAAAAAAAAAAAA3AcAAAAAAADdBwAAAAAAAAAAAADdBwAAAAAAAN4HAAAAAAAAAAAAAN4HAAAAAAAA3wcAAAAAAAAAAAAA3wcAAAAAAADgBwAAAAAAAAAAAADgBwAAAAAAAOEHAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANsHAAAAAAAA2wcAAAAAAAAAAAAAAADwvw"
				],
				[
					68,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAOEHAAAAAAAA4gcAAAAAAAAAAAAA4gcAAAAAAADjBwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOEHAAAAAAAA4QcAAAAAAAAAAAAAAADwvw"
				],
				[
					69,
					1,
					"plain_tasks_new",
					null,
					"AQAAAOIHAAAAAAAA5QcAAAAAAAABAAAACQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOMHAAAAAAAA4wcAAAAAAAAAAAAAAADwvw"
				],
				[
					70,
					1,
					"insert",
					{
						"characters": "UIBuild"
					},
					"BwAAAOUHAAAAAAAA5gcAAAAAAAAAAAAA5gcAAAAAAADnBwAAAAAAAAAAAADnBwAAAAAAAOgHAAAAAAAAAAAAAOgHAAAAAAAA6QcAAAAAAAAAAAAA6QcAAAAAAADqBwAAAAAAAAAAAADqBwAAAAAAAOsHAAAAAAAAAAAAAOsHAAAAAAAA7AcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOUHAAAAAAAA5QcAAAAAAAAAAAAAAADwvw"
				],
				[
					71,
					1,
					"insert",
					{
						"characters": "Window"
					},
					"BgAAAOwHAAAAAAAA7QcAAAAAAAAAAAAA7QcAAAAAAADuBwAAAAAAAAAAAADuBwAAAAAAAO8HAAAAAAAAAAAAAO8HAAAAAAAA8AcAAAAAAAAAAAAA8AcAAAAAAADxBwAAAAAAAAAAAADxBwAAAAAAAPIHAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOwHAAAAAAAA7AcAAAAAAAAAAAAAAADwvw"
				],
				[
					72,
					1,
					"insert",
					{
						"characters": " &&"
					},
					"AwAAAPIHAAAAAAAA8wcAAAAAAAAAAAAA8wcAAAAAAAD0BwAAAAAAAAAAAAD0BwAAAAAAAPUHAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPIHAAAAAAAA8gcAAAAAAAAAAAAAAADwvw"
				],
				[
					73,
					1,
					"insert",
					{
						"characters": " build"
					},
					"BgAAAPUHAAAAAAAA9gcAAAAAAAAAAAAA9gcAAAAAAAD3BwAAAAAAAAAAAAD3BwAAAAAAAPgHAAAAAAAAAAAAAPgHAAAAAAAA+QcAAAAAAAAAAAAA+QcAAAAAAAD6BwAAAAAAAAAAAAD6BwAAAAAAAPsHAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPUHAAAAAAAA9QcAAAAAAAAAAAAAAADwvw"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": " syt"
					},
					"BAAAAPsHAAAAAAAA/AcAAAAAAAAAAAAA/AcAAAAAAAD9BwAAAAAAAAAAAAD9BwAAAAAAAP4HAAAAAAAAAAAAAP4HAAAAAAAA/wcAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPsHAAAAAAAA+wcAAAAAAAAAAAAAAADwvw"
				],
				[
					75,
					3,
					"left_delete",
					null,
					"AwAAAP4HAAAAAAAA/gcAAAAAAAABAAAAdP0HAAAAAAAA/QcAAAAAAAABAAAAefwHAAAAAAAA/AcAAAAAAAABAAAAcw",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP8HAAAAAAAA/wcAAAAAAAAAAAAAAADwvw"
				],
				[
					76,
					1,
					"insert",
					{
						"characters": "system"
					},
					"BgAAAPwHAAAAAAAA/QcAAAAAAAAAAAAA/QcAAAAAAAD+BwAAAAAAAAAAAAD+BwAAAAAAAP8HAAAAAAAAAAAAAP8HAAAAAAAAAAgAAAAAAAAAAAAAAAgAAAAAAAABCAAAAAAAAAAAAAABCAAAAAAAAAIIAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPwHAAAAAAAA/AcAAAAAAAAAAAAAAADwvw"
				],
				[
					77,
					1,
					"insert",
					{
						"characters": " @cr"
					},
					"BAAAAAIIAAAAAAAAAwgAAAAAAAAAAAAAAwgAAAAAAAAECAAAAAAAAAAAAAAECAAAAAAAAAUIAAAAAAAAAAAAAAUIAAAAAAAABggAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAIIAAAAAAAAAggAAAAAAAAAAAAAAADwvw"
				],
				[
					78,
					1,
					"insert",
					{
						"characters": "it"
					},
					"AgAAAAYIAAAAAAAABwgAAAAAAAAAAAAABwgAAAAAAAAICAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAYIAAAAAAAABggAAAAAAAAAAAAAAADwvw"
				],
				[
					79,
					1,
					"insert_completion",
					{
						"completion": "critical",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "critical"
					},
					"AgAAAAQIAAAAAAAABAgAAAAAAAAEAAAAY3JpdAQIAAAAAAAADAgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAgIAAAAAAAACAgAAAAAAAAAAAAAAADwvw"
				],
				[
					80,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAAwIAAAAAAAADQgAAAAAAAAAAAAADQgAAAAAAAAOCAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAwIAAAAAAAADAgAAAAAAAAAAAAAAADwvw"
				],
				[
					83,
					3,
					"left_delete",
					null,
					"BAAAAA8IAAAAAAAADwgAAAAAAAABAAAACg0IAAAAAAAADQgAAAAAAAABAAAACQ0IAAAAAAAADQgAAAAAAAABAAAACgwIAAAAAAAADAgAAAAAAAABAAAACg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABAIAAAAAAAAEAgAAAAAAAAAAAAAAADwvw"
				],
				[
					86,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAAB8IAAAAAAAAIAgAAAAAAAAAAAAAIAgAAAAAAAAhCAAAAAAAAAAAAAAhCAAAAAAAACIIAAAAAAAAAAAAACIIAAAAAAAAIwgAAAAAAAAAAAAAIAgAAAAAAAAgCAAAAAAAAAEAAAAJ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAB8IAAAAAAAAHwgAAAAAAAAAAAAAAADwvw"
				],
				[
					89,
					2,
					"left_delete",
					null,
					"AwAAABQIAAAAAAAAFAgAAAAAAAADAAAA6YCgIAgAAAAAAAAgCAAAAAAAAAEAAAAJEwgAAAAAAAATCAAAAAAAAAMAAADlu7o",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABUIAAAAAAAAFQgAAAAAAAAAAAAAAADwvw"
				],
				[
					90,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAABMIAAAAAAAAFAgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABMIAAAAAAAAEwgAAAAAAAAAAAAAAADwvw"
				],
				[
					91,
					1,
					"left_delete",
					null,
					"AQAAABMIAAAAAAAAEwgAAAAAAAABAAAAZA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABQIAAAAAAAAFAgAAAAAAAAAAAAAAADwvw"
				],
				[
					93,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAABMIAAAAAAAAFAgAAAAAAAAAAAAAEwgAAAAAAAAVCAAAAAAAAAEAAAAg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABMIAAAAAAAAEwgAAAAAAAAAAAAAAADwvw"
				],
				[
					100,
					1,
					"cut",
					null,
					"AQAAAJkJAAAAAAAAmQkAAAAAAAAvAAAACeKYkAnmlrDlu7rnrZHvvJrpkonmnb8KCeKYkAnmlrDlu7rnrZHvvJrpmbfpmLE",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKwJAAAAAAAAmQkAAAAAAAAAAAAAAADwvw"
				],
				[
					105,
					1,
					"paste",
					null,
					"AQAAACEIAAAAAAAANAgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACEIAAAAAAAAIQgAAAAAAAAAAAAAAADwvw"
				],
				[
					111,
					1,
					"cut",
					null,
					"AQAAALoJAAAAAAAAugkAAAAAAAAWAAAA4piQCeaWsOW7uuetke+8mueureWhlA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMIJAAAAAAAAugkAAAAAAAAAAAAAAADwvw"
				],
				[
					114,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAADQIAAAAAAAANQgAAAAAAAAAAAAANQgAAAAAAAA2CAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADQIAAAAAAAANAgAAAAAAAAAAAAAAADwvw"
				],
				[
					115,
					1,
					"paste",
					null,
					"AQAAADYIAAAAAAAAPggAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADYIAAAAAAAANggAAAAAAAAAAAAAAADwvw"
				],
				[
					121,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAOEHAAAAAAAA+AcAAAAAAAAAAAAAxAcAAAAAAADhBwAAAAAAAB8AAAAJ4piQCVVJSW50ZXJhY3RXaW5kb3cgQGNyaXRpY2Fs",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMYHAAAAAAAAxgcAAAAAAAAAAAAAAADwvw"
				],
				[
					5,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAPgHAAAAAAAA+QcAAAAAAAAAAAAA+QcAAAAAAAD6BwAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD4BwAAAAAAAPgHAAAAAAAAAAAAAAAA8L8"
				],
				[
					6,
					1,
					"",
					null,
					"AQAAAPoHAAAAAAAA+wcAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD6BwAAAAAAAPoHAAAAAAAAAAAAAAAA8L8"
				],
				[
					7,
					1,
					"",
					null,
					"AQAAAPsHAAAAAAAA/AcAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD7BwAAAAAAAPsHAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					1,
					"",
					null,
					"AQAAAPwHAAAAAAAA/QcAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD8BwAAAAAAAPwHAAAAAAAAAAAAAAAA8L8"
				],
				[
					9,
					1,
					"expand_snippet",
					null,
					"AgAAAPsHAAAAAAAA+wcAAAAAAAACAAAALS37BwAAAAAAABgIAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAD9BwAAAAAAAP0HAAAAAAAAAAAAAAAA8L8"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "@cret"
					},
					"BQAAABgIAAAAAAAAGQgAAAAAAAAAAAAAGQgAAAAAAAAaCAAAAAAAAAAAAAAaCAAAAAAAABsIAAAAAAAAAAAAABsIAAAAAAAAHAgAAAAAAAAAAAAAHAgAAAAAAAAdCAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAYCAAAAAAAABgIAAAAAAAAAAAAAAAA8L8"
				],
				[
					12,
					1,
					"left_delete",
					null,
					"AQAAABwIAAAAAAAAHAgAAAAAAAABAAAAdA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAdCAAAAAAAAB0IAAAAAAAAAAAAAAAA8L8"
				],
				[
					13,
					1,
					"insert",
					{
						"characters": "ated"
					},
					"BAAAABwIAAAAAAAAHQgAAAAAAAAAAAAAHQgAAAAAAAAeCAAAAAAAAAAAAAAeCAAAAAAAAB8IAAAAAAAAAAAAAB8IAAAAAAAAIAgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAcCAAAAAAAABwIAAAAAAAAAAAAAAAA8L8"
				],
				[
					14,
					1,
					"plain_task_insert_date",
					null,
					"AQAAACAIAAAAAAAAMAgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAgCAAAAAAAACAIAAAAAAAAAAAAAAAA8L8"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAADAIAAAAAAAAMQgAAAAAAAAAAAAAMQgAAAAAAAAyCAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAwCAAAAAAAADAIAAAAAAAAAAAAAAAA8L8"
				],
				[
					16,
					1,
					"plain_tasks_cancel",
					null,
					"AgAAAF0IAAAAAAAAeQgAAAAAAAAAAAAAMwgAAAAAAABdCAAAAAAAACwAAAAJ4piQCVVJQnVpbGRXaW5kb3cgJiYgYnVpbGQgc3lzdGVtIEBjcml0aWNhbA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA0CAAAAAAAADQIAAAAAAAAAAAAAAAA8L8"
				],
				[
					25,
					2,
					"left_delete",
					null,
					"AwAAAJMIAAAAAAAAkwgAAAAAAAADAAAA562RMQgAAAAAAAAxCAAAAAAAAAEAAAAJkQgAAAAAAACRCAAAAAAAAAMAAADlu7o",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACUCAAAAAAAAJQIAAAAAAAAAAAAAAAA8L8"
				],
				[
					26,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAJEIAAAAAAAAkggAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACRCAAAAAAAAJEIAAAAAAAAAAAAAAAA8L8"
				],
				[
					27,
					2,
					"left_delete",
					null,
					"AgAAAJEIAAAAAAAAkQgAAAAAAAABAAAAZJAIAAAAAAAAkAgAAAAAAAADAAAA5paw",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACSCAAAAAAAAJIIAAAAAAAAAAAAAAAA8L8"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": "device"
					},
					"BgAAAJAIAAAAAAAAkQgAAAAAAAAAAAAAkQgAAAAAAACSCAAAAAAAAAAAAACSCAAAAAAAAJMIAAAAAAAAAAAAAJMIAAAAAAAAlAgAAAAAAAAAAAAAlAgAAAAAAACVCAAAAAAAAAAAAACVCAAAAAAAAJYIAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACQCAAAAAAAAJAIAAAAAAAAAAAAAAAA8L8"
				],
				[
					31,
					4,
					"left_delete",
					null,
					"BAAAAJ8IAAAAAAAAnwgAAAAAAAADAAAA562RnggAAAAAAACeCAAAAAAAAAMAAADlu7qdCAAAAAAAAJ0IAAAAAAAAAwAAAOaWsJwIAAAAAAAAnAgAAAAAAAABAAAACQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACgCAAAAAAAAKAIAAAAAAAAAAAAAAAAVkA"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAJwIAAAAAAAAnQgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACcCAAAAAAAAJwIAAAAAAAAAAAAAAAA8L8"
				],
				[
					33,
					1,
					"left_delete",
					null,
					"AQAAAJwIAAAAAAAAnAgAAAAAAAABAAAAZA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACdCAAAAAAAAJ0IAAAAAAAAAAAAAAAA8L8"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": " device"
					},
					"BwAAAJwIAAAAAAAAnQgAAAAAAAAAAAAAnQgAAAAAAACeCAAAAAAAAAAAAACeCAAAAAAAAJ8IAAAAAAAAAAAAAJ8IAAAAAAAAoAgAAAAAAAAAAAAAoAgAAAAAAAChCAAAAAAAAAAAAAChCAAAAAAAAKIIAAAAAAAAAAAAAKIIAAAAAAAAowgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACcCAAAAAAAAJwIAAAAAAAAAAAAAAAA8L8"
				],
				[
					36,
					1,
					"left_delete",
					null,
					"AQAAAJwIAAAAAAAAnAgAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACdCAAAAAAAAJ0IAAAAAAAAAAAAAAAA8L8"
				],
				[
					37,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJwIAAAAAAAAnQgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACcCAAAAAAAAJwIAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJAIAAAAAAAAkQgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACQCAAAAAAAAJAIAAAAAAAAAAAAAAAAREA"
				],
				[
					40,
					1,
					"left_delete",
					null,
					"AQAAAJAIAAAAAAAAkAgAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACRCAAAAAAAAJEIAAAAAAAAAAAAAAAA8L8"
				],
				[
					44,
					1,
					"right_delete",
					null,
					"AQAAAJwIAAAAAAAAnAgAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACcCAAAAAAAAJwIAAAAAAAAAAAAAAAA8L8"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJwIAAAAAAAAnQgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACcCAAAAAAAAJwIAAAAAAAAAAAAAAAA8L8"
				],
				[
					47,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAJAIAAAAAAAAkQgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACQCAAAAAAAAJAIAAAAAAAAAAAAAAAAREA"
				],
				[
					49,
					1,
					"right_delete",
					null,
					"AQAAAI8IAAAAAAAAjwgAAAAAAAABAAAACQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACPCAAAAAAAAI8IAAAAAAAAAAAAAAAA8L8"
				],
				[
					57,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAKYIAAAAAAAApwgAAAAAAAAAAAAApwgAAAAAAACoCAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACmCAAAAAAAAKYIAAAAAAAAAAAAAAAA8L8"
				],
				[
					58,
					1,
					"plain_tasks_new",
					null,
					"AQAAAKcIAAAAAAAAqggAAAAAAAABAAAACQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACoCAAAAAAAAKgIAAAAAAAAAAAAAAAA8L8"
				],
				[
					59,
					1,
					"insert",
					{
						"characters": " de"
					},
					"AwAAAKoIAAAAAAAAqwgAAAAAAAAAAAAAqwgAAAAAAACsCAAAAAAAAAAAAACsCAAAAAAAAK0IAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACqCAAAAAAAAKoIAAAAAAAAAAAAAAAA8L8"
				],
				[
					60,
					4,
					"left_delete",
					null,
					"BAAAAKwIAAAAAAAArAgAAAAAAAABAAAAZasIAAAAAAAAqwgAAAAAAAABAAAAZKoIAAAAAAAAqggAAAAAAAABAAAAIKkIAAAAAAAAqQgAAAAAAAABAAAACQ",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACtCAAAAAAAAK0IAAAAAAAAAAAAAAAA8L8"
				],
				[
					61,
					1,
					"insert",
					{
						"characters": " device"
					},
					"BwAAAKkIAAAAAAAAqggAAAAAAAAAAAAAqggAAAAAAACrCAAAAAAAAAAAAACrCAAAAAAAAKwIAAAAAAAAAAAAAKwIAAAAAAAArQgAAAAAAAAAAAAArQgAAAAAAACuCAAAAAAAAAAAAACuCAAAAAAAAK8IAAAAAAAAAAAAAK8IAAAAAAAAsAgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACpCAAAAAAAAKkIAAAAAAAAAAAAAAAA8L8"
				],
				[
					62,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAALAIAAAAAAAAsQgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwCAAAAAAAALAIAAAAAAAAAAAAAAAA8L8"
				],
				[
					64,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAALAIAAAAAAAAsQgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwCAAAAAAAALAIAAAAAAAAAAAAAAAA8L8"
				],
				[
					65,
					1,
					"right_delete",
					null,
					"AQAAALEIAAAAAAAAsQgAAAAAAAABAAAAOg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACxCAAAAAAAALEIAAAAAAAAAAAAAAAA8L8"
				],
				[
					67,
					1,
					"right_delete",
					null,
					"AQAAALAIAAAAAAAAsAgAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwCAAAAAAAALAIAAAAAAAAAAAAAAAA8L8"
				],
				[
					68,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAALAIAAAAAAAAsQgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwCAAAAAAAALAIAAAAAAAAAAAAAAAA8L8"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAALAIAAAAAAAAsQgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwCAAAAAAAALAIAAAAAAAAAAAAAABAV0A"
				],
				[
					81,
					2,
					"left_delete",
					null,
					"AgAAALEIAAAAAAAAsQgAAAAAAAABAAAAOrAIAAAAAAAAsAgAAAAAAAABAAAAIA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACyCAAAAAAAALIIAAAAAAAAAAAAAAAA8L8"
				],
				[
					82,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAALAIAAAAAAAAsQgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwCAAAAAAAALAIAAAAAAAAAAAAAAAA8L8"
				],
				[
					83,
					1,
					"insert",
					{
						"characters": " df"
					},
					"AwAAALEIAAAAAAAAsggAAAAAAAAAAAAAsggAAAAAAACzCAAAAAAAAAAAAACzCAAAAAAAALQIAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACxCAAAAAAAALEIAAAAAAAAAAAAAAAA8L8"
				],
				[
					84,
					2,
					"left_delete",
					null,
					"AgAAALMIAAAAAAAAswgAAAAAAAABAAAAZrIIAAAAAAAAsggAAAAAAAABAAAAZA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC0CAAAAAAAALQIAAAAAAAAAAAAAAAA8L8"
				],
				[
					85,
					1,
					"insert",
					{
						"characters": "ddd"
					},
					"AwAAALIIAAAAAAAAswgAAAAAAAAAAAAAswgAAAAAAAC0CAAAAAAAAAAAAAC0CAAAAAAAALUIAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACyCAAAAAAAALIIAAAAAAAAAAAAAAAA8L8"
				],
				[
					86,
					1,
					"insert",
					{
						"characters": "df"
					},
					"AgAAALUIAAAAAAAAtggAAAAAAAAAAAAAtggAAAAAAAC3CAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC1CAAAAAAAALUIAAAAAAAAAAAAAAAA8L8"
				],
				[
					87,
					7,
					"left_delete",
					null,
					"BwAAALYIAAAAAAAAtggAAAAAAAABAAAAZrUIAAAAAAAAtQgAAAAAAAABAAAAZLQIAAAAAAAAtAgAAAAAAAABAAAAZLMIAAAAAAAAswgAAAAAAAABAAAAZLIIAAAAAAAAsggAAAAAAAABAAAAZLEIAAAAAAAAsQgAAAAAAAABAAAAILAIAAAAAAAAsAgAAAAAAAABAAAAOg",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAC3CAAAAAAAALcIAAAAAAAAAAAAAAAA8L8"
				],
				[
					89,
					1,
					"right_delete",
					null,
					"AQAAAJYIAAAAAAAAlggAAAAAAAADAAAA77ya",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACWCAAAAAAAAJYIAAAAAAAAAAAAAABAV0A"
				],
				[
					91,
					1,
					"right_delete",
					null,
					"AQAAAKIIAAAAAAAAoggAAAAAAAADAAAA77ya",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACiCAAAAAAAAKIIAAAAAAAAAAAAAABAV0A"
				],
				[
					94,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAAJYIAAAAAAAAlwgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACWCAAAAAAAAJYIAAAAAAAAAAAAAABAV0A"
				],
				[
					97,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAAKMIAAAAAAAApAgAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACjCAAAAAAAAKMIAAAAAAAAAAAAAAAA8L8"
				],
				[
					99,
					1,
					"insert",
					{
						"characters": ":d"
					},
					"AgAAALAIAAAAAAAAsQgAAAAAAAAAAAAAsQgAAAAAAACyCAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACwCAAAAAAAALAIAAAAAAAAAAAAAACAWUA"
				],
				[
					100,
					1,
					"left_delete",
					null,
					"AQAAALEIAAAAAAAAsQgAAAAAAAABAAAAZA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACyCAAAAAAAALIIAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAIsIAAAAAAAAoggAAAAAAAAAAAAAeQgAAAAAAACLCAAAAAAAABgAAAAJ4piQCXBpdOS6pOS6kiBAY3JpdGljYWw",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAewgAAAAAAAB7CAAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"plain_tasks_complete",
					null,
					"AgAAANIIAAAAAAAA6QgAAAAAAAAAAAAAyQgAAAAAAADSCAAAAAAAABcAAAAJ4piQCeaWsOW7uuetke+8mueureWhlA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAyggAAAAAAADKCAAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAMgIAAAAAAAAyQgAAAAAAAAAAAAAyAgAAAAAAADKCAAAAAAAAAEAAAAg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAyAgAAAAAAADICAAAAAAAAAAAAAAAAPC/"
				],
				[
					31,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAMoIAAAAAAAA4QgAAAAAAAAAAAAAvggAAAAAAADKCAAAAAAAABIAAAAJ4piQIGRldmljZTrlm7TmoI8",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAwAgAAAAAAADACAAAAAAAAAAAAAAAAPC/"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAAIJAAAAAAAAAwkAAAAAAAAAAAAAAwkAAAAAAAAECQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAgkAAAAAAAACCQAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"cut",
					null,
					"AQAAAKMIAAAAAAAAowgAAAAAAAAmAAAACgnimJAgZGV2aWNlOumSieadvwoJ4piQIGRldmljZTrpmbfpmLE",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAvQgAAAAAAACjCAAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"left_delete",
					null,
					"AgAAAKIIAAAAAAAAoggAAAAAAAABAAAACugIAAAAAAAA6AgAAAAAAAABAAAACQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAowgAAAAAAACjCAAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAOgIAAAAAAAA6QgAAAAAAAAAAAAA6QgAAAAAAADqCAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA6AgAAAAAAADoCAAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"paste",
					null,
					"AQAAAOoIAAAAAAAABAkAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA6ggAAAAAAADqCAAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAOgIAAAAAAAA6QgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA6AgAAAAAAADoCAAAAAAAAAAAAAAAAPC/"
				],
				[
					46,
					1,
					"plain_tasks_new",
					null,
					"AQAAAOkIAAAAAAAA7AgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA6QgAAAAAAADpCAAAAAAAAAAAAAAAAPC/"
				],
				[
					48,
					1,
					"insert",
					{
						"characters": "NPC"
					},
					"AwAAAOwIAAAAAAAA7QgAAAAAAAAAAAAA7QgAAAAAAADuCAAAAAAAAAAAAADuCAAAAAAAAO8IAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA7AgAAAAAAADsCAAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAO8IAAAAAAAA8AgAAAAAAAAAAAAA7wgAAAAAAADxCAAAAAAAAAEAAAAg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA7wgAAAAAAADvCAAAAAAAAAAAAAAAAPC/"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": " @cri"
					},
					"BQAAAPEIAAAAAAAA8ggAAAAAAAAAAAAA8ggAAAAAAADzCAAAAAAAAAAAAADzCAAAAAAAAPQIAAAAAAAAAAAAAPQIAAAAAAAA9QgAAAAAAAAAAAAA9QgAAAAAAAD2CAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA8QgAAAAAAADxCAAAAAAAAAAAAAAAAPC/"
				],
				[
					52,
					1,
					"insert_completion",
					{
						"completion": "critical",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "critical"
					},
					"AgAAAPMIAAAAAAAA8wgAAAAAAAADAAAAY3Jp8wgAAAAAAAD7CAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA9ggAAAAAAAD2CAAAAAAAAAAAAAAAAPC/"
				],
				[
					61,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAPsIAAAAAAAA/AgAAAAAAAAAAAAA/AgAAAAAAAD9CAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA+wgAAAAAAAD7CAAAAAAAAAAAAAAAAPC/"
				],
				[
					62,
					1,
					"plain_tasks_new",
					null,
					"AQAAAPwIAAAAAAAA/wgAAAAAAAABAAAACQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA/QgAAAAAAAD9CAAAAAAAAAAAAAAAAPC/"
				],
				[
					63,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAP8IAAAAAAAAAAkAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA/wgAAAAAAAD/CAAAAAAAAAAAAAAAAPC/"
				],
				[
					64,
					1,
					"left_delete",
					null,
					"AQAAAP8IAAAAAAAA/wgAAAAAAAABAAAAZA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAkAAAAAAAAACQAAAAAAAAAAAAAAAPC/"
				],
				[
					65,
					1,
					"insert",
					{
						"characters": "AIData"
					},
					"BgAAAP8IAAAAAAAAAAkAAAAAAAAAAAAAAAkAAAAAAAABCQAAAAAAAAAAAAABCQAAAAAAAAIJAAAAAAAAAAAAAAIJAAAAAAAAAwkAAAAAAAAAAAAAAwkAAAAAAAAECQAAAAAAAAAAAAAECQAAAAAAAAUJAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA/wgAAAAAAAD/CAAAAAAAAAAAAAAAAPC/"
				],
				[
					66,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAAUJAAAAAAAAHAkAAAAAAAAAAAAA/AgAAAAAAAAFCQAAAAAAAAsAAAAJ4piQCUFJRGF0YQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAABQkAAAAAAAAFCQAAAAAAAAAAAAAAAPC/"
				],
				[
					69,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAABwJAAAAAAAAHQkAAAAAAAAAAAAAHQkAAAAAAAAeCQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAHAkAAAAAAAAcCQAAAAAAAAAAAAAAAPC/"
				],
				[
					70,
					1,
					"plain_tasks_new",
					null,
					"AQAAAB0JAAAAAAAAIAkAAAAAAAABAAAACQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAHgkAAAAAAAAeCQAAAAAAAAAAAAAAAPC/"
				],
				[
					71,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAACAJAAAAAAAAIQkAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAIAkAAAAAAAAgCQAAAAAAAAAAAAAAAPC/"
				],
				[
					72,
					1,
					"left_delete",
					null,
					"AQAAACAJAAAAAAAAIAkAAAAAAAABAAAAZA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAIQkAAAAAAAAhCQAAAAAAAAAAAAAAAPC/"
				],
				[
					73,
					1,
					"insert",
					{
						"characters": "Spane"
					},
					"BQAAACAJAAAAAAAAIQkAAAAAAAAAAAAAIQkAAAAAAAAiCQAAAAAAAAAAAAAiCQAAAAAAACMJAAAAAAAAAAAAACMJAAAAAAAAJAkAAAAAAAAAAAAAJAkAAAAAAAAlCQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAIAkAAAAAAAAgCQAAAAAAAAAAAAAAAPC/"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": "r"
					},
					"AQAAACUJAAAAAAAAJgkAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAJQkAAAAAAAAlCQAAAAAAAAAAAAAAAPC/"
				],
				[
					75,
					1,
					"left_delete",
					null,
					"AQAAACUJAAAAAAAAJQkAAAAAAAABAAAAcg",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAJgkAAAAAAAAmCQAAAAAAAAAAAAAAAPC/"
				],
				[
					80,
					3,
					"left_delete",
					null,
					"AwAAACQJAAAAAAAAJAkAAAAAAAABAAAAZSMJAAAAAAAAIwkAAAAAAAABAAAAbiIJAAAAAAAAIgkAAAAAAAABAAAAYQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAJQkAAAAAAAAlCQAAAAAAAAAAAAAAAPC/"
				],
				[
					81,
					1,
					"insert",
					{
						"characters": "awnD"
					},
					"BAAAACIJAAAAAAAAIwkAAAAAAAAAAAAAIwkAAAAAAAAkCQAAAAAAAAAAAAAkCQAAAAAAACUJAAAAAAAAAAAAACUJAAAAAAAAJgkAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAIgkAAAAAAAAiCQAAAAAAAAAAAAAAAPC/"
				],
				[
					82,
					1,
					"insert",
					{
						"characters": "ata"
					},
					"AwAAACYJAAAAAAAAJwkAAAAAAAAAAAAAJwkAAAAAAAAoCQAAAAAAAAAAAAAoCQAAAAAAACkJAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAJgkAAAAAAAAmCQAAAAAAAAAAAAAAAPC/"
				],
				[
					83,
					1,
					"plain_tasks_complete",
					null,
					"AgAAACkJAAAAAAAAQAkAAAAAAAAAAAAAHQkAAAAAAAApCQAAAAAAAA4AAAAJ4piQCVNwYXduRGF0YQ",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAKQkAAAAAAAApCQAAAAAAAAAAAAAAAPC/"
				],
				[
					86,
					1,
					"insert",
					{
						"characters": "\n---"
					},
					"BAAAAOgIAAAAAAAA6QgAAAAAAAAAAAAA6QgAAAAAAADqCAAAAAAAAAAAAADqCAAAAAAAAOsIAAAAAAAAAAAAAOsIAAAAAAAA7AgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA6AgAAAAAAADoCAAAAAAAAAAAAAAAAPC/"
				],
				[
					87,
					1,
					"expand_snippet",
					null,
					"AgAAAOoIAAAAAAAA6ggAAAAAAAACAAAALS3qCAAAAAAAAAcJAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA7AgAAAAAAADsCAAAAAAAAAAAAAAAAPC/"
				],
				[
					90,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAOkIAAAAAAAA6ggAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA6QgAAAAAAADpCAAAAAAAAAAAAAAAAPC/"
				],
				[
					95,
					1,
					"insert",
					{
						"characters": "@create"
					},
					"BwAAAAgJAAAAAAAACQkAAAAAAAAAAAAACQkAAAAAAAAKCQAAAAAAAAAAAAAKCQAAAAAAAAsJAAAAAAAAAAAAAAsJAAAAAAAADAkAAAAAAAAAAAAADAkAAAAAAAANCQAAAAAAAAAAAAANCQAAAAAAAA4JAAAAAAAAAAAAAA4JAAAAAAAADwkAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAACAkAAAAAAAAICQAAAAAAAAAAAAAAAPC/"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAA8JAAAAAAAAEAkAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAADwkAAAAAAAAPCQAAAAAAAAAAAAAAAPC/"
				],
				[
					97,
					1,
					"plain_task_insert_date",
					null,
					"AQAAABAJAAAAAAAAIAkAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAEAkAAAAAAAAQCQAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAHgJAAAAAAAAeQkAAAAAAAAAAAAAeQkAAAAAAAB6CQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHgJAAAAAAAAeAkAAAAAAAAAAAAAAADwvw"
				],
				[
					3,
					1,
					"",
					null,
					"AQAAAHoJAAAAAAAAewkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHoJAAAAAAAAegkAAAAAAAAAAAAAAADwvw"
				],
				[
					4,
					1,
					"",
					null,
					"AQAAAHsJAAAAAAAAfAkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHsJAAAAAAAAewkAAAAAAAAAAAAAAADwvw"
				],
				[
					5,
					1,
					"",
					null,
					"AQAAAHwJAAAAAAAAfQkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHwJAAAAAAAAfAkAAAAAAAAAAAAAAADwvw"
				],
				[
					6,
					1,
					"expand_snippet",
					null,
					"AgAAAHsJAAAAAAAAewkAAAAAAAACAAAALS17CQAAAAAAAJgJAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAH0JAAAAAAAAfQkAAAAAAAAAAAAAAADwvw"
				],
				[
					8,
					1,
					"insert",
					{
						"characters": "@cre"
					},
					"BAAAAJgJAAAAAAAAmQkAAAAAAAAAAAAAmQkAAAAAAACaCQAAAAAAAAAAAACaCQAAAAAAAJsJAAAAAAAAAAAAAJsJAAAAAAAAnAkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJgJAAAAAAAAmAkAAAAAAAAAAAAAAADwvw"
				],
				[
					9,
					1,
					"insert_completion",
					{
						"completion": "created",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "created"
					},
					"AgAAAJkJAAAAAAAAmQkAAAAAAAADAAAAY3JlmQkAAAAAAACgCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJwJAAAAAAAAnAkAAAAAAAAAAAAAAADwvw"
				],
				[
					10,
					1,
					"plain_task_insert_date",
					null,
					"AQAAAKAJAAAAAAAAsAkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKAJAAAAAAAAoAkAAAAAAAAAAAAAAADwvw"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAALAJAAAAAAAAsQkAAAAAAAAAAAAAsQkAAAAAAACyCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALAJAAAAAAAAsAkAAAAAAAAAAAAAAADwvw"
				],
				[
					12,
					1,
					"plain_tasks_new",
					null,
					"AQAAALEJAAAAAAAAtAkAAAAAAAABAAAACQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALIJAAAAAAAAsgkAAAAAAAAAAAAAAADwvw"
				],
				[
					13,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAALQJAAAAAAAAtQkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALQJAAAAAAAAtAkAAAAAAAAAAAAAAADwvw"
				],
				[
					14,
					1,
					"left_delete",
					null,
					"AQAAALQJAAAAAAAAtAkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALUJAAAAAAAAtQkAAAAAAAAAAAAAAADwvw"
				],
				[
					15,
					1,
					"insert",
					{
						"characters": "LevelSy"
					},
					"BwAAALQJAAAAAAAAtQkAAAAAAAAAAAAAtQkAAAAAAAC2CQAAAAAAAAAAAAC2CQAAAAAAALcJAAAAAAAAAAAAALcJAAAAAAAAuAkAAAAAAAAAAAAAuAkAAAAAAAC5CQAAAAAAAAAAAAC5CQAAAAAAALoJAAAAAAAAAAAAALoJAAAAAAAAuwkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALQJAAAAAAAAtAkAAAAAAAAAAAAAAADwvw"
				],
				[
					16,
					1,
					"insert",
					{
						"characters": "t"
					},
					"AQAAALsJAAAAAAAAvAkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALsJAAAAAAAAuwkAAAAAAAAAAAAAAADwvw"
				],
				[
					17,
					3,
					"left_delete",
					null,
					"AwAAALsJAAAAAAAAuwkAAAAAAAABAAAAdLoJAAAAAAAAugkAAAAAAAABAAAAebkJAAAAAAAAuQkAAAAAAAABAAAAUw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALwJAAAAAAAAvAkAAAAAAAAAAAAAAADwvw"
				],
				[
					18,
					1,
					"insert",
					{
						"characters": "System"
					},
					"BgAAALkJAAAAAAAAugkAAAAAAAAAAAAAugkAAAAAAAC7CQAAAAAAAAAAAAC7CQAAAAAAALwJAAAAAAAAAAAAALwJAAAAAAAAvQkAAAAAAAAAAAAAvQkAAAAAAAC+CQAAAAAAAAAAAAC+CQAAAAAAAL8JAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALkJAAAAAAAAuQkAAAAAAAAAAAAAAADwvw"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": " @cr"
					},
					"BAAAAL8JAAAAAAAAwAkAAAAAAAAAAAAAwAkAAAAAAADBCQAAAAAAAAAAAADBCQAAAAAAAMIJAAAAAAAAAAAAAMIJAAAAAAAAwwkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAL8JAAAAAAAAvwkAAAAAAAAAAAAAAADwvw"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": "itical"
					},
					"BgAAAMMJAAAAAAAAxAkAAAAAAAAAAAAAxAkAAAAAAADFCQAAAAAAAAAAAADFCQAAAAAAAMYJAAAAAAAAAAAAAMYJAAAAAAAAxwkAAAAAAAAAAAAAxwkAAAAAAADICQAAAAAAAAAAAADICQAAAAAAAMkJAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMMJAAAAAAAAwwkAAAAAAAAAAAAAAADwvw"
				],
				[
					21,
					1,
					"insert",
					{
						"characters": "\t"
					},
					"AQAAAMkJAAAAAAAAygkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMkJAAAAAAAAyQkAAAAAAAAAAAAAAADwvw"
				],
				[
					22,
					1,
					"left_delete",
					null,
					"AQAAAMkJAAAAAAAAyQkAAAAAAAABAAAACQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMoJAAAAAAAAygkAAAAAAAAAAAAAAADwvw"
				],
				[
					23,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAMkJAAAAAAAAygkAAAAAAAAAAAAAygkAAAAAAADLCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMkJAAAAAAAAyQkAAAAAAAAAAAAAAADwvw"
				],
				[
					24,
					1,
					"plain_tasks_new",
					null,
					"AQAAAMoJAAAAAAAAzQkAAAAAAAABAAAACQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMsJAAAAAAAAywkAAAAAAAAAAAAAAADwvw"
				],
				[
					25,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAMkJAAAAAAAA4AkAAAAAAAAAAAAAsQkAAAAAAADJCQAAAAAAABoAAAAJ4piQCUxldmVsU3lzdGVtIEBjcml0aWNhbA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALIJAAAAAAAAsgkAAAAAAAAAAAAAAADwvw"
				],
				[
					30,
					1,
					"cut",
					null,
					"AQAAACIJAAAAAAAAIgkAAAAAAAAXAAAA4piQCU5QQ+WnlOaJmCBAY3JpdGljYWw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADMJAAAAAAAAIgkAAAAAAAAAAAAAAADwvw"
				],
				[
					31,
					2,
					"left_delete",
					null,
					"AgAAACEJAAAAAAAAIQkAAAAAAAABAAAACSAJAAAAAAAAIAkAAAAAAAABAAAACg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACIJAAAAAAAAIgkAAAAAAAAAAAAAAADwvw"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAANEJAAAAAAAA0gkAAAAAAAAAAAAA0gkAAAAAAADTCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANEJAAAAAAAA0QkAAAAAAAAAAAAAAADwvw"
				],
				[
					35,
					1,
					"paste",
					null,
					"AQAAANMJAAAAAAAA5AkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANMJAAAAAAAA0wkAAAAAAAAAAAAAAADwvw"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAANEJAAAAAAAA0gkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANEJAAAAAAAA0QkAAAAAAAAAAAAAAADwvw"
				],
				[
					39,
					1,
					"left_delete",
					null,
					"AQAAANEJAAAAAAAA0QkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANIJAAAAAAAA0gkAAAAAAAAAAAAAAADwvw"
				],
				[
					40,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAANEJAAAAAAAA0gkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANEJAAAAAAAA0QkAAAAAAAAAAAAAAADwvw"
				],
				[
					41,
					1,
					"left_delete",
					null,
					"AQAAANEJAAAAAAAA0QkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANIJAAAAAAAA0gkAAAAAAAAAAAAAAADwvw"
				],
				[
					44,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAANEJAAAAAAAA0gkAAAAAAAAAAAAA0QkAAAAAAADUCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANEJAAAAAAAA0QkAAAAAAAAAAAAAAADwvw"
				],
				[
					46,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAANQJAAAAAAAA1QkAAAAAAAAAAAAA1AkAAAAAAADWCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANQJAAAAAAAA1AkAAAAAAAAAAAAAAADwvw"
				],
				[
					48,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAANYJAAAAAAAA1wkAAAAAAAAAAAAA1gkAAAAAAADYCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANYJAAAAAAAA1gkAAAAAAAAAAAAAAADwvw"
				],
				[
					49,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAANgJAAAAAAAA2QkAAAAAAAAAAAAA2QkAAAAAAADaCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANgJAAAAAAAA2AkAAAAAAAAAAAAAAADwvw"
				],
				[
					50,
					1,
					"plain_tasks_new",
					null,
					"AQAAANkJAAAAAAAA3AkAAAAAAAABAAAACQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANoJAAAAAAAA2gkAAAAAAAAAAAAAAADwvw"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAANwJAAAAAAAA3QkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANwJAAAAAAAA3AkAAAAAAAAAAAAAAADwvw"
				],
				[
					52,
					1,
					"left_delete",
					null,
					"AQAAANwJAAAAAAAA3AkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAN0JAAAAAAAA3QkAAAAAAAAAAAAAAADwvw"
				],
				[
					53,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAANwJAAAAAAAA3QkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANwJAAAAAAAA3AkAAAAAAAAAAAAAAADwvw"
				],
				[
					54,
					1,
					"left_delete",
					null,
					"AQAAANwJAAAAAAAA3AkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAN0JAAAAAAAA3QkAAAAAAAAAAAAAAADwvw"
				],
				[
					56,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAANwJAAAAAAAA3QkAAAAAAAAAAAAA3AkAAAAAAADdCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANwJAAAAAAAA3AkAAAAAAAAAAAAAAADwvw"
				],
				[
					58,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAN0JAAAAAAAA3gkAAAAAAAAAAAAA3QkAAAAAAADeCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAN0JAAAAAAAA3QkAAAAAAAAAAAAAAADwvw"
				],
				[
					59,
					2,
					"left_delete",
					null,
					"AgAAAN0JAAAAAAAA3QkAAAAAAAADAAAA6aaW3AkAAAAAAADcCQAAAAAAAAMAAADmlrA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAN4JAAAAAAAA3gkAAAAAAAAAAAAAAADwvw"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": "mai"
					},
					"AwAAANwJAAAAAAAA3QkAAAAAAAAAAAAA3QkAAAAAAADeCQAAAAAAAAAAAADeCQAAAAAAAN8JAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANwJAAAAAAAA3AkAAAAAAAAAAAAAAADwvw"
				],
				[
					61,
					3,
					"left_delete",
					null,
					"AwAAAN4JAAAAAAAA3gkAAAAAAAABAAAAad0JAAAAAAAA3QkAAAAAAAABAAAAYdwJAAAAAAAA3AkAAAAAAAABAAAAbQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAN8JAAAAAAAA3wkAAAAAAAAAAAAAAADwvw"
				],
				[
					62,
					1,
					"insert",
					{
						"characters": "Goal"
					},
					"BAAAANwJAAAAAAAA3QkAAAAAAAAAAAAA3QkAAAAAAADeCQAAAAAAAAAAAADeCQAAAAAAAN8JAAAAAAAAAAAAAN8JAAAAAAAA4AkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANwJAAAAAAAA3AkAAAAAAAAAAAAAAADwvw"
				],
				[
					63,
					4,
					"left_delete",
					null,
					"BAAAAN8JAAAAAAAA3wkAAAAAAAABAAAAbN4JAAAAAAAA3gkAAAAAAAABAAAAYd0JAAAAAAAA3QkAAAAAAAABAAAAb9wJAAAAAAAA3AkAAAAAAAABAAAARw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOAJAAAAAAAA4AkAAAAAAAAAAAAAAADwvw"
				],
				[
					65,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAANwJAAAAAAAA3QkAAAAAAAAAAAAA3AkAAAAAAADfCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANwJAAAAAAAA3AkAAAAAAAAAAAAAAADwvw"
				],
				[
					66,
					1,
					"insert",
					{
						"characters": "GameGoa"
					},
					"BwAAAN8JAAAAAAAA4AkAAAAAAAAAAAAA4AkAAAAAAADhCQAAAAAAAAAAAADhCQAAAAAAAOIJAAAAAAAAAAAAAOIJAAAAAAAA4wkAAAAAAAAAAAAA4wkAAAAAAADkCQAAAAAAAAAAAADkCQAAAAAAAOUJAAAAAAAAAAAAAOUJAAAAAAAA5gkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAN8JAAAAAAAA3wkAAAAAAAAAAAAAAADwvw"
				],
				[
					67,
					1,
					"insert",
					{
						"characters": "l"
					},
					"AQAAAOYJAAAAAAAA5wkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOYJAAAAAAAA5gkAAAAAAAAAAAAAAADwvw"
				],
				[
					69,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAOcJAAAAAAAA6AkAAAAAAAAAAAAA5wkAAAAAAADpCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOcJAAAAAAAA5wkAAAAAAAAAAAAAAADwvw"
				],
				[
					70,
					2,
					"left_delete",
					null,
					"AgAAAOgJAAAAAAAA6AkAAAAAAAADAAAA6K6h5wkAAAAAAADnCQAAAAAAAAMAAADorr4",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOkJAAAAAAAA6QkAAAAAAAAAAAAAAADwvw"
				],
				[
					72,
					1,
					"insert",
					{
						"characters": "0"
					},
					"AQAAAN8JAAAAAAAA4AkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAN8JAAAAAAAA3wkAAAAAAAAAAAAAAADwvw"
				],
				[
					73,
					1,
					"left_delete",
					null,
					"AQAAAN8JAAAAAAAA3wkAAAAAAAABAAAAMA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOAJAAAAAAAA4AkAAAAAAAAAAAAAAADwvw"
				],
				[
					77,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAPoJAAAAAAAA+wkAAAAAAAAAAAAA+wkAAAAAAAD8CQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPoJAAAAAAAA+gkAAAAAAAAAAAAAAADwvw"
				],
				[
					78,
					1,
					"plain_tasks_new",
					null,
					"AQAAAPsJAAAAAAAA/gkAAAAAAAABAAAACQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPwJAAAAAAAA/AkAAAAAAAAAAAAAAADwvw"
				],
				[
					79,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAP4JAAAAAAAA/wkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP4JAAAAAAAA/gkAAAAAAAAAAAAAAADwvw"
				],
				[
					80,
					1,
					"left_delete",
					null,
					"AQAAAP4JAAAAAAAA/gkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP8JAAAAAAAA/wkAAAAAAAAAAAAAAADwvw"
				],
				[
					81,
					1,
					"insert",
					{
						"characters": "item"
					},
					"BAAAAP4JAAAAAAAA/wkAAAAAAAAAAAAA/wkAAAAAAAAACgAAAAAAAAAAAAAACgAAAAAAAAEKAAAAAAAAAAAAAAEKAAAAAAAAAgoAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP4JAAAAAAAA/gkAAAAAAAAAAAAAAADwvw"
				],
				[
					82,
					4,
					"left_delete",
					null,
					"BAAAAAEKAAAAAAAAAQoAAAAAAAABAAAAbQAKAAAAAAAAAAoAAAAAAAABAAAAZf8JAAAAAAAA/wkAAAAAAAABAAAAdP4JAAAAAAAA/gkAAAAAAAABAAAAaQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAIKAAAAAAAAAgoAAAAAAAAAAAAAAADwvw"
				],
				[
					84,
					1,
					"insert",
					{
						"characters": "ai"
					},
					"AgAAAP4JAAAAAAAA/wkAAAAAAAAAAAAA/wkAAAAAAAAACgAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP4JAAAAAAAA/gkAAAAAAAAAAAAAAADwvw"
				],
				[
					86,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAAAKAAAAAAAAAQoAAAAAAAAAAAAAAAoAAAAAAAACCgAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAKAAAAAAAAAAoAAAAAAAAAAAAAAADwvw"
				],
				[
					87,
					1,
					"",
					null,
					"AQAAAAIKAAAAAAAAAwoAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAIKAAAAAAAAAgoAAAAAAAAAAAAAAADwvw"
				],
				[
					89,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAAMKAAAAAAAABAoAAAAAAAAAAAAAAwoAAAAAAAAFCgAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAMKAAAAAAAAAwoAAAAAAAAAAAAAAADwvw"
				],
				[
					91,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAAUKAAAAAAAABgoAAAAAAAAAAAAABQoAAAAAAAAHCgAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAUKAAAAAAAABQoAAAAAAAAAAAAAAADwvw"
				],
				[
					98,
					1,
					"cut",
					null,
					"AQAAAOkJAAAAAAAA6QkAAAAAAAAXAAAA4piQCU5QQ+WnlOaJmCBAY3JpdGljYWw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPoJAAAAAAAA6QkAAAAAAAAAAAAAAADwvw"
				],
				[
					101,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAD4KAAAAAAAAPwoAAAAAAAAAAAAAPwoAAAAAAABACgAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAD4KAAAAAAAAPgoAAAAAAAAAAAAAAADwvw"
				],
				[
					102,
					1,
					"paste",
					null,
					"AQAAAEAKAAAAAAAAUQoAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAEAKAAAAAAAAQAoAAAAAAAAAAAAAAADwvw"
				],
				[
					105,
					1,
					"plain_tasks_new",
					null,
					"AQAAAOgJAAAAAAAA6wkAAAAAAAABAAAACQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOkJAAAAAAAA6QkAAAAAAAAAAAAAAADwvw"
				],
				[
					106,
					1,
					"insert",
					{
						"characters": "df"
					},
					"AgAAAOsJAAAAAAAA7AkAAAAAAAAAAAAA7AkAAAAAAADtCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOsJAAAAAAAA6wkAAAAAAAAAAAAAAADwvw"
				],
				[
					107,
					2,
					"left_delete",
					null,
					"AgAAAOwJAAAAAAAA7AkAAAAAAAABAAAAZusJAAAAAAAA6wkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO0JAAAAAAAA7QkAAAAAAAAAAAAAAADwvw"
				],
				[
					108,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAOsJAAAAAAAA7AkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOsJAAAAAAAA6wkAAAAAAAAAAAAAAADwvw"
				],
				[
					109,
					1,
					"left_delete",
					null,
					"AQAAAOsJAAAAAAAA6wkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOwJAAAAAAAA7AkAAAAAAAAAAAAAAADwvw"
				],
				[
					111,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAOsJAAAAAAAA7AkAAAAAAAAAAAAA6wkAAAAAAADtCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOsJAAAAAAAA6wkAAAAAAAAAAAAAAADwvw"
				],
				[
					112,
					2,
					"left_delete",
					null,
					"AgAAAOwJAAAAAAAA7AkAAAAAAAADAAAA5aS06wkAAAAAAADrCQAAAAAAAAMAAADnn7M",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO0JAAAAAAAA7QkAAAAAAAAAAAAAAADwvw"
				],
				[
					114,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAOsJAAAAAAAA7AkAAAAAAAAAAAAA6wkAAAAAAADtCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOsJAAAAAAAA6wkAAAAAAAAAAAAAAADwvw"
				],
				[
					116,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAO0JAAAAAAAA7gkAAAAAAAAAAAAA7QkAAAAAAADuCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO0JAAAAAAAA7QkAAAAAAAAAAAAAAADwvw"
				],
				[
					117,
					1,
					"",
					null,
					"AQAAAO4JAAAAAAAA7wkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO4JAAAAAAAA7gkAAAAAAAAAAAAAAADwvw"
				],
				[
					119,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAO8JAAAAAAAA8AkAAAAAAAAAAAAA7wkAAAAAAADxCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO8JAAAAAAAA7wkAAAAAAAAAAAAAAADwvw"
				],
				[
					120,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAPEJAAAAAAAA8gkAAAAAAAAAAAAA8gkAAAAAAADzCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPEJAAAAAAAA8QkAAAAAAAAAAAAAAADwvw"
				],
				[
					121,
					1,
					"plain_tasks_new",
					null,
					"AQAAAPIJAAAAAAAA9QkAAAAAAAABAAAACQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPMJAAAAAAAA8wkAAAAAAAAAAAAAAADwvw"
				],
				[
					122,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAPUJAAAAAAAA9gkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPUJAAAAAAAA9QkAAAAAAAAAAAAAAADwvw"
				],
				[
					123,
					1,
					"left_delete",
					null,
					"AQAAAPUJAAAAAAAA9QkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPYJAAAAAAAA9gkAAAAAAAAAAAAAAADwvw"
				],
				[
					126,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAANgJAAAAAAAA2QkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANgJAAAAAAAA2AkAAAAAAAAAAAAAAADwvw"
				],
				[
					128,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAANkJAAAAAAAA2gkAAAAAAAAAAAAA2QkAAAAAAADbCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANkJAAAAAAAA2QkAAAAAAAAAAAAAAADwvw"
				],
				[
					130,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAANsJAAAAAAAA3AkAAAAAAAAAAAAA2wkAAAAAAADdCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANsJAAAAAAAA2wkAAAAAAAAAAAAAAADwvw"
				],
				[
					133,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAPoJAAAAAAAA+wkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPoJAAAAAAAA+gkAAAAAAAAAAAAAAIBrQA"
				],
				[
					134,
					1,
					"left_delete",
					null,
					"AQAAAPoJAAAAAAAA+gkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPsJAAAAAAAA+wkAAAAAAAAAAAAAAADwvw"
				],
				[
					135,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAPoJAAAAAAAA+wkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPoJAAAAAAAA+gkAAAAAAAAAAAAAAADwvw"
				],
				[
					136,
					1,
					"left_delete",
					null,
					"AQAAAPoJAAAAAAAA+gkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPsJAAAAAAAA+wkAAAAAAAAAAAAAAADwvw"
				],
				[
					137,
					1,
					"insert",
					{
						"characters": "storyEvent"
					},
					"CgAAAPoJAAAAAAAA+wkAAAAAAAAAAAAA+wkAAAAAAAD8CQAAAAAAAAAAAAD8CQAAAAAAAP0JAAAAAAAAAAAAAP0JAAAAAAAA/gkAAAAAAAAAAAAA/gkAAAAAAAD/CQAAAAAAAAAAAAD/CQAAAAAAAAAKAAAAAAAAAAAAAAAKAAAAAAAAAQoAAAAAAAAAAAAAAQoAAAAAAAACCgAAAAAAAAAAAAACCgAAAAAAAAMKAAAAAAAAAAAAAAMKAAAAAAAABAoAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPoJAAAAAAAA+gkAAAAAAAAAAAAAAADwvw"
				],
				[
					138,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAAAQKAAAAAAAABQoAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAQKAAAAAAAABAoAAAAAAAAAAAAAAADwvw"
				],
				[
					139,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAUKAAAAAAAABgoAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAUKAAAAAAAABQoAAAAAAAAAAAAAAADwvw"
				],
				[
					143,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAAYKAAAAAAAABwoAAAAAAAAAAAAABgoAAAAAAAAICgAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAYKAAAAAAAABgoAAAAAAAAAAAAAAADwvw"
				],
				[
					144,
					2,
					"left_delete",
					null,
					"AgAAAAcKAAAAAAAABwoAAAAAAAADAAAA5Y+XBgoAAAAAAAAGCgAAAAAAAAMAAADmjqU",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAgKAAAAAAAACAoAAAAAAAAAAAAAAADwvw"
				],
				[
					146,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAAYKAAAAAAAABwoAAAAAAAAAAAAABgoAAAAAAAAICgAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAYKAAAAAAAABgoAAAAAAAAAAAAAAADwvw"
				],
				[
					148,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAAgKAAAAAAAACQoAAAAAAAAAAAAACAoAAAAAAAAKCgAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAgKAAAAAAAACAoAAAAAAAAAAAAAAADwvw"
				],
				[
					149,
					1,
					"insert",
					{
						"characters": " @crit"
					},
					"BgAAAAoKAAAAAAAACwoAAAAAAAAAAAAACwoAAAAAAAAMCgAAAAAAAAAAAAAMCgAAAAAAAA0KAAAAAAAAAAAAAA0KAAAAAAAADgoAAAAAAAAAAAAADgoAAAAAAAAPCgAAAAAAAAAAAAAPCgAAAAAAABAKAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAoKAAAAAAAACgoAAAAAAAAAAAAAAADwvw"
				],
				[
					150,
					1,
					"insert_completion",
					{
						"completion": "critical",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "critical"
					},
					"AgAAAAwKAAAAAAAADAoAAAAAAAAEAAAAY3JpdAwKAAAAAAAAFAoAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABAKAAAAAAAAEAoAAAAAAAAAAAAAAADwvw"
				],
				[
					156,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAM0JAAAAAAAAzgkAAAAAAAAAAAAAzgkAAAAAAADPCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAM0JAAAAAAAAzQkAAAAAAAAAAAAAAADwvw"
				],
				[
					157,
					1,
					"plain_tasks_new",
					null,
					"AQAAAM4JAAAAAAAA0QkAAAAAAAABAAAACQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAM8JAAAAAAAAzwkAAAAAAAAAAAAAAADwvw"
				],
				[
					158,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAANEJAAAAAAAA0gkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANEJAAAAAAAA0QkAAAAAAAAAAAAAAADwvw"
				],
				[
					159,
					1,
					"left_delete",
					null,
					"AQAAANEJAAAAAAAA0QkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANIJAAAAAAAA0gkAAAAAAAAAAAAAAADwvw"
				],
				[
					161,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAANEJAAAAAAAA0gkAAAAAAAAAAAAA0QkAAAAAAADTCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANEJAAAAAAAA0QkAAAAAAAAAAAAAAADwvw"
				],
				[
					162,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAANMJAAAAAAAA1AkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANMJAAAAAAAA0wkAAAAAAAAAAAAAAADwvw"
				],
				[
					163,
					1,
					"insert",
					{
						"characters": " d"
					},
					"AgAAANQJAAAAAAAA1QkAAAAAAAAAAAAA1QkAAAAAAADWCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANQJAAAAAAAA1AkAAAAAAAAAAAAAAADwvw"
				],
				[
					164,
					1,
					"left_delete",
					null,
					"AQAAANUJAAAAAAAA1QkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANYJAAAAAAAA1gkAAAAAAAAAAAAAAADwvw"
				],
				[
					165,
					1,
					"insert",
					{
						"characters": "story"
					},
					"BQAAANUJAAAAAAAA1gkAAAAAAAAAAAAA1gkAAAAAAADXCQAAAAAAAAAAAADXCQAAAAAAANgJAAAAAAAAAAAAANgJAAAAAAAA2QkAAAAAAAAAAAAA2QkAAAAAAADaCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANUJAAAAAAAA1QkAAAAAAAAAAAAAAADwvw"
				],
				[
					166,
					1,
					"insert",
					{
						"characters": "Event"
					},
					"BQAAANoJAAAAAAAA2wkAAAAAAAAAAAAA2wkAAAAAAADcCQAAAAAAAAAAAADcCQAAAAAAAN0JAAAAAAAAAAAAAN0JAAAAAAAA3gkAAAAAAAAAAAAA3gkAAAAAAADfCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANoJAAAAAAAA2gkAAAAAAAAAAAAAAADwvw"
				],
				[
					167,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAN8JAAAAAAAA4AkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAN8JAAAAAAAA3wkAAAAAAAAAAAAAAADwvw"
				],
				[
					168,
					1,
					"insert",
					{
						"characters": "->"
					},
					"AgAAAOAJAAAAAAAA4QkAAAAAAAAAAAAA4QkAAAAAAADiCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOAJAAAAAAAA4AkAAAAAAAAAAAAAAADwvw"
				],
				[
					169,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOIJAAAAAAAA4wkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOIJAAAAAAAA4gkAAAAAAAAAAAAAAADwvw"
				],
				[
					171,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAOMJAAAAAAAA5AkAAAAAAAAAAAAA4wkAAAAAAADlCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOMJAAAAAAAA4wkAAAAAAAAAAAAAAADwvw"
				],
				[
					172,
					1,
					"insert",
					{
						"characters": "Data"
					},
					"BAAAAOUJAAAAAAAA5gkAAAAAAAAAAAAA5gkAAAAAAADnCQAAAAAAAAAAAADnCQAAAAAAAOgJAAAAAAAAAAAAAOgJAAAAAAAA6QkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOUJAAAAAAAA5QkAAAAAAAAAAAAAAADwvw"
				],
				[
					173,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAOkJAAAAAAAA6gkAAAAAAAAAAAAA6gkAAAAAAADrCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOkJAAAAAAAA6QkAAAAAAAAAAAAAAADwvw"
				],
				[
					174,
					1,
					"plain_tasks_new",
					null,
					"AQAAAOoJAAAAAAAA7QkAAAAAAAABAAAACQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOsJAAAAAAAA6wkAAAAAAAAAAAAAAADwvw"
				],
				[
					175,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAO0JAAAAAAAA7gkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO0JAAAAAAAA7QkAAAAAAAAAAAAAAADwvw"
				],
				[
					176,
					1,
					"left_delete",
					null,
					"AQAAAO0JAAAAAAAA7QkAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO4JAAAAAAAA7gkAAAAAAAAAAAAAAADwvw"
				],
				[
					178,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAO0JAAAAAAAA7gkAAAAAAAAAAAAA7QkAAAAAAADvCQAAAAAAAAEAAAAg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO0JAAAAAAAA7QkAAAAAAAAAAAAAAADwvw"
				],
				[
					179,
					1,
					"",
					null,
					"AQAAAO8JAAAAAAAA8AkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAO8JAAAAAAAA7wkAAAAAAAAAAAAAAADwvw"
				],
				[
					180,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPAJAAAAAAAA8QkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPAJAAAAAAAA8AkAAAAAAAAAAAAAAADwvw"
				],
				[
					181,
					1,
					"left_delete",
					null,
					"AQAAAPAJAAAAAAAA8AkAAAAAAAABAAAAIA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPEJAAAAAAAA8QkAAAAAAAAAAAAAAADwvw"
				],
				[
					182,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAPAJAAAAAAAA8QkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPAJAAAAAAAA8AkAAAAAAAAAAAAAAADwvw"
				],
				[
					183,
					1,
					"insert",
					{
						"characters": "sp"
					},
					"AgAAAPEJAAAAAAAA8gkAAAAAAAAAAAAA8gkAAAAAAADzCQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPEJAAAAAAAA8QkAAAAAAAAAAAAAAADwvw"
				],
				[
					184,
					3,
					"left_delete",
					null,
					"AwAAAPIJAAAAAAAA8gkAAAAAAAABAAAAcPEJAAAAAAAA8QkAAAAAAAABAAAAc/AJAAAAAAAA8AkAAAAAAAABAAAAIA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPMJAAAAAAAA8wkAAAAAAAAAAAAAAADwvw"
				],
				[
					185,
					1,
					"insert",
					{
						"characters": " Lev"
					},
					"BAAAAPAJAAAAAAAA8QkAAAAAAAAAAAAA8QkAAAAAAADyCQAAAAAAAAAAAADyCQAAAAAAAPMJAAAAAAAAAAAAAPMJAAAAAAAA9AkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPAJAAAAAAAA8AkAAAAAAAAAAAAAAADwvw"
				],
				[
					186,
					3,
					"left_delete",
					null,
					"AwAAAPMJAAAAAAAA8wkAAAAAAAABAAAAdvIJAAAAAAAA8gkAAAAAAAABAAAAZfEJAAAAAAAA8QkAAAAAAAABAAAATA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPQJAAAAAAAA9AkAAAAAAAAAAAAAAADwvw"
				],
				[
					187,
					1,
					"insert",
					{
						"characters": "levelS"
					},
					"BgAAAPEJAAAAAAAA8gkAAAAAAAAAAAAA8gkAAAAAAADzCQAAAAAAAAAAAADzCQAAAAAAAPQJAAAAAAAAAAAAAPQJAAAAAAAA9QkAAAAAAAAAAAAA9QkAAAAAAAD2CQAAAAAAAAAAAAD2CQAAAAAAAPcJAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPEJAAAAAAAA8QkAAAAAAAAAAAAAAADwvw"
				],
				[
					188,
					1,
					"insert",
					{
						"characters": "y"
					},
					"AQAAAPcJAAAAAAAA+AkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPcJAAAAAAAA9wkAAAAAAAAAAAAAAADwvw"
				],
				[
					189,
					1,
					"insert",
					{
						"characters": "ste"
					},
					"AwAAAPgJAAAAAAAA+QkAAAAAAAAAAAAA+QkAAAAAAAD6CQAAAAAAAAAAAAD6CQAAAAAAAPsJAAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPgJAAAAAAAA+AkAAAAAAAAAAAAAAADwvw"
				],
				[
					190,
					1,
					"insert",
					{
						"characters": "m"
					},
					"AQAAAPsJAAAAAAAA/AkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPsJAAAAAAAA+wkAAAAAAAAAAAAAAADwvw"
				],
				[
					191,
					1,
					"left_delete",
					null,
					"AQAAAPsJAAAAAAAA+wkAAAAAAAABAAAAbQ",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPwJAAAAAAAA/AkAAAAAAAAAAAAAAADwvw"
				],
				[
					192,
					1,
					"insert",
					{
						"characters": "rm"
					},
					"AgAAAPsJAAAAAAAA/AkAAAAAAAAAAAAA/AkAAAAAAAD9CQAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPsJAAAAAAAA+wkAAAAAAAAAAAAAAADwvw"
				],
				[
					193,
					1,
					"insert",
					{
						"characters": " ->d"
					},
					"BAAAAP0JAAAAAAAA/gkAAAAAAAAAAAAA/gkAAAAAAAD/CQAAAAAAAAAAAAD/CQAAAAAAAAAKAAAAAAAAAAAAAAAKAAAAAAAAAQoAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP0JAAAAAAAA/QkAAAAAAAAAAAAAAADwvw"
				],
				[
					194,
					1,
					"left_delete",
					null,
					"AQAAAAAKAAAAAAAAAAoAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAEKAAAAAAAAAQoAAAAAAAAAAAAAAADwvw"
				],
				[
					195,
					1,
					"insert",
					{
						"characters": " d"
					},
					"AgAAAAAKAAAAAAAAAQoAAAAAAAAAAAAAAQoAAAAAAAACCgAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAKAAAAAAAAAAoAAAAAAAAAAAAAAADwvw"
				],
				[
					196,
					1,
					"left_delete",
					null,
					"AQAAAAEKAAAAAAAAAQoAAAAAAAABAAAAZA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAIKAAAAAAAAAgoAAAAAAAAAAAAAAADwvw"
				],
				[
					197,
					4,
					"left_delete",
					null,
					"BAAAAAAKAAAAAAAAAAoAAAAAAAABAAAAIP8JAAAAAAAA/wkAAAAAAAABAAAAPv4JAAAAAAAA/gkAAAAAAAABAAAALf0JAAAAAAAA/QkAAAAAAAABAAAAIA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAEKAAAAAAAAAQoAAAAAAAAAAAAAAADwvw"
				],
				[
					198,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAOkJAAAAAAAAAAoAAAAAAAAAAAAAzgkAAAAAAADpCQAAAAAAACUAAAAJ4piQCeS8mOWMljogc3RvcnlFdmVudCAtPiDor7vlj5ZEYXRh",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAM8JAAAAAAAAzwkAAAAAAAAAAAAAAADwvw"
				],
				[
					199,
					1,
					"plain_tasks_complete",
					null,
					"AgAAABQKAAAAAAAAKwoAAAAAAAAAAAAAAQoAAAAAAAAUCgAAAAAAABsAAAAJ4piQCeS8mOWMlu+8miBsZXZlbFN5c3Rlcm0",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAIKAAAAAAAAAgoAAAAAAAAAAAAAAADwvw"
				],
				[
					202,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAACsKAAAAAAAALAoAAAAAAAAAAAAALAoAAAAAAAAtCgAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACsKAAAAAAAAKwoAAAAAAAAAAAAAAADwvw"
				],
				[
					3,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAACsKAAAAAAAALAoAAAAAAAAAAAAALAoAAAAAAAAtCgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAArCgAAAAAAACsKAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"",
					null,
					"AQAAAC0KAAAAAAAALwoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAtCgAAAAAAAC0KAAAAAAAAAAAAAAAA8L8"
				],
				[
					6,
					1,
					"",
					null,
					"AQAAAC8KAAAAAAAAMQoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAvCgAAAAAAAC8KAAAAAAAAAAAAAAAA8L8"
				],
				[
					7,
					1,
					"",
					null,
					"AQAAADEKAAAAAAAAMwoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAxCgAAAAAAADEKAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					1,
					"",
					null,
					"AQAAADMKAAAAAAAANAoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAzCgAAAAAAADMKAAAAAAAAAAAAAAAA8L8"
				],
				[
					9,
					1,
					"",
					null,
					"AQAAADQKAAAAAAAANQoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA0CgAAAAAAADQKAAAAAAAAAAAAAAAA8L8"
				],
				[
					10,
					1,
					"",
					null,
					"AQAAADUKAAAAAAAANgoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA1CgAAAAAAADUKAAAAAAAAAAAAAAAA8L8"
				],
				[
					20,
					1,
					"",
					null,
					"AQAAAC0KAAAAAAAALgoAAAAAAAAVAAAA4oCU4oCU4oCU4oCU4oCU4oCULS0t",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA2CgAAAAAAAC0KAAAAAAAAAAAAAAAA8L8"
				],
				[
					21,
					1,
					"",
					null,
					"AQAAAC4KAAAAAAAALwoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAuCgAAAAAAAC4KAAAAAAAAAAAAAAAA8L8"
				],
				[
					22,
					1,
					"",
					null,
					"AQAAAC8KAAAAAAAAMAoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAvCgAAAAAAAC8KAAAAAAAAAAAAAAAA8L8"
				],
				[
					23,
					1,
					"expand_snippet",
					null,
					"AgAAAC4KAAAAAAAALgoAAAAAAAACAAAALS0uCgAAAAAAAEsKAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAwCgAAAAAAADAKAAAAAAAAAAAAAAAA8L8"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": "@created"
					},
					"CAAAAEsKAAAAAAAATAoAAAAAAAAAAAAATAoAAAAAAABNCgAAAAAAAAAAAABNCgAAAAAAAE4KAAAAAAAAAAAAAE4KAAAAAAAATwoAAAAAAAAAAAAATwoAAAAAAABQCgAAAAAAAAAAAABQCgAAAAAAAFEKAAAAAAAAAAAAAFEKAAAAAAAAUgoAAAAAAAAAAAAAUgoAAAAAAABTCgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABLCgAAAAAAAEsKAAAAAAAAAAAAAAAA8L8"
				],
				[
					26,
					1,
					"plain_task_insert_date",
					null,
					"AQAAAFMKAAAAAAAAYwoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABTCgAAAAAAAFMKAAAAAAAAAAAAAAAA8L8"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAGMKAAAAAAAAZAoAAAAAAAAAAAAAZAoAAAAAAABlCgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABjCgAAAAAAAGMKAAAAAAAAAAAAAAAA8L8"
				],
				[
					30,
					1,
					"cut",
					null,
					"AQAAAGQMAAAAAAAAZAwAAAAAAAATAAAA4piQCU5QQ+WVhuWTgeS6pOaYkw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABtDAAAAAAAAGQMAAAAAAAAAAAAAAAA8L8"
				],
				[
					33,
					1,
					"paste",
					null,
					"AQAAAGUKAAAAAAAAbgoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABlCgAAAAAAAGUKAAAAAAAAAAAAAAAA8L8"
				],
				[
					36,
					3,
					"left_delete",
					null,
					"AwAAAGkKAAAAAAAAaQoAAAAAAAABAAAAQ2gKAAAAAAAAaAoAAAAAAAABAAAAUGcKAAAAAAAAZwoAAAAAAAABAAAATg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABqCgAAAAAAAGoKAAAAAAAAAAAAAAAA8L8"
				],
				[
					39,
					2,
					"right_delete",
					null,
					"AgAAAGkKAAAAAAAAaQoAAAAAAAADAAAA5LqkaQoAAAAAAABpCgAAAAAAAAMAAADmmJM",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABpCgAAAAAAAGkKAAAAAAAAAAAAAAAA8L8"
				],
				[
					40,
					1,
					"left_delete",
					null,
					"AQAAAGgKAAAAAAAAaAoAAAAAAAADAAAA5ZOB",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABpCgAAAAAAAGkKAAAAAAAAAAAAAAAA8L8"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAGgKAAAAAAAAaQoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABoCgAAAAAAAGgKAAAAAAAAAAAAAAAA8L8"
				],
				[
					42,
					1,
					"left_delete",
					null,
					"AQAAAGgKAAAAAAAAaAoAAAAAAAABAAAAZA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABpCgAAAAAAAGkKAAAAAAAAAAAAAAAA8L8"
				],
				[
					44,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAGgKAAAAAAAAaQoAAAAAAAAAAAAAaAoAAAAAAABpCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABoCgAAAAAAAGgKAAAAAAAAAAAAAAAA8L8"
				],
				[
					45,
					1,
					"left_delete",
					null,
					"AQAAAGgKAAAAAAAAaAoAAAAAAAADAAAA54K5",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABpCgAAAAAAAGkKAAAAAAAAAAAAAAAA8L8"
				],
				[
					47,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAGgKAAAAAAAAaQoAAAAAAAAAAAAAaAoAAAAAAABpCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABoCgAAAAAAAGgKAAAAAAAAAAAAAAAA8L8"
				],
				[
					50,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAGcKAAAAAAAAaAoAAAAAAAAAAAAAZwoAAAAAAABpCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABnCgAAAAAAAGcKAAAAAAAAAAAAAAAA8L8"
				],
				[
					51,
					2,
					"left_delete",
					null,
					"AgAAAGgKAAAAAAAAaAoAAAAAAAADAAAA5Y2VZwoAAAAAAABnCgAAAAAAAAMAAADnroA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABpCgAAAAAAAGkKAAAAAAAAAAAAAAAA8L8"
				],
				[
					52,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAGcKAAAAAAAAaAoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABnCgAAAAAAAGcKAAAAAAAAAAAAAAAA8L8"
				],
				[
					55,
					1,
					"left_delete",
					null,
					"AQAAAGcKAAAAAAAAZwoAAAAAAAABAAAAZA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABoCgAAAAAAAGgKAAAAAAAAAAAAAAAA8L8"
				],
				[
					58,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAGkKAAAAAAAAagoAAAAAAAAAAAAAaQoAAAAAAABrCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABpCgAAAAAAAGkKAAAAAAAAAAAAAAAA8L8"
				],
				[
					59,
					2,
					"left_delete",
					null,
					"AgAAAGoKAAAAAAAAagoAAAAAAAADAAAA56GAaQoAAAAAAABpCgAAAAAAAAMAAADln7o",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABrCgAAAAAAAGsKAAAAAAAAAAAAAAAA8L8"
				],
				[
					62,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAGcKAAAAAAAAaAoAAAAAAAAAAAAAZwoAAAAAAABpCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABnCgAAAAAAAGcKAAAAAAAAAAAAAAAA8L8"
				],
				[
					64,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAGsKAAAAAAAAggoAAAAAAAAAAAAAZAoAAAAAAABrCgAAAAAAABEAAAAJ4piQCeWfuuehgOWVhuW6lw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABlCgAAAAAAAGUKAAAAAAAAAAAAAAAA8L8"
				],
				[
					69,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAIIKAAAAAAAAgwoAAAAAAAAAAAAAgwoAAAAAAACECgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACCCgAAAAAAAIIKAAAAAAAAAAAAAAAA8L8"
				],
				[
					70,
					1,
					"plain_tasks_new",
					null,
					"AQAAAIMKAAAAAAAAhgoAAAAAAAABAAAACQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACECgAAAAAAAIQKAAAAAAAAAAAAAAAA8L8"
				],
				[
					71,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAIYKAAAAAAAAhwoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACGCgAAAAAAAIYKAAAAAAAAAAAAAAAA8L8"
				],
				[
					72,
					1,
					"left_delete",
					null,
					"AQAAAIYKAAAAAAAAhgoAAAAAAAABAAAAZA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACHCgAAAAAAAIcKAAAAAAAAAAAAAAAA8L8"
				],
				[
					74,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAIYKAAAAAAAAhwoAAAAAAAAAAAAAhgoAAAAAAACICgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACGCgAAAAAAAIYKAAAAAAAAAAAAAAAA8L8"
				],
				[
					76,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAIgKAAAAAAAAiQoAAAAAAAAAAAAAiAoAAAAAAACKCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACICgAAAAAAAIgKAAAAAAAAAAAAAAAA8L8"
				],
				[
					78,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAIoKAAAAAAAAiwoAAAAAAAAAAAAAigoAAAAAAACMCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACKCgAAAAAAAIoKAAAAAAAAAAAAAAAA8L8"
				],
				[
					79,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAIwKAAAAAAAAowoAAAAAAAAAAAAAgwoAAAAAAACMCgAAAAAAABcAAAAJ4piQCeWFs+WNoeW8gOWcuuWJp+aDhQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACECgAAAAAAAIQKAAAAAAAAAAAAAAAA8L8"
				],
				[
					82,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAKMKAAAAAAAApAoAAAAAAAAAAAAApAoAAAAAAAClCgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACjCgAAAAAAAKMKAAAAAAAAAAAAAAAA8L8"
				],
				[
					85,
					5,
					"left_delete",
					null,
					"BgAAAKYMAAAAAAAApgwAAAAAAAABAAAACaQKAAAAAAAApAoAAAAAAAABAAAACaQMAAAAAAAApAwAAAAAAAABAAAACqMMAAAAAAAAowwAAAAAAAABAAAACqIMAAAAAAAAogwAAAAAAAABAAAACaEMAAAAAAAAoQwAAAAAAAABAAAACg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACnDAAAAAAAAKcMAAAAAAAAAAAAAAAA8L8"
				],
				[
					95,
					1,
					"plain_tasks_new",
					null,
					"AQAAAKQKAAAAAAAApwoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACkCgAAAAAAAKQKAAAAAAAAAAAAAAAA8L8"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAKcKAAAAAAAAqAoAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACnCgAAAAAAAKcKAAAAAAAAAAAAAAAA8L8"
				],
				[
					97,
					1,
					"left_delete",
					null,
					"AQAAAKcKAAAAAAAApwoAAAAAAAABAAAAZA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACoCgAAAAAAAKgKAAAAAAAAAAAAAAAA8L8"
				],
				[
					99,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAKcKAAAAAAAAqAoAAAAAAAAAAAAApwoAAAAAAACpCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACnCgAAAAAAAKcKAAAAAAAAAAAAAAAA8L8"
				],
				[
					101,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAKkKAAAAAAAAqgoAAAAAAAAAAAAAqQoAAAAAAACrCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACpCgAAAAAAAKkKAAAAAAAAAAAAAAAA8L8"
				],
				[
					103,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAKsKAAAAAAAArAoAAAAAAAAAAAAAqwoAAAAAAACtCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACrCgAAAAAAAKsKAAAAAAAAAAAAAAAA8L8"
				],
				[
					104,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAK0KAAAAAAAAxAoAAAAAAAAAAAAApAoAAAAAAACtCgAAAAAAABcAAAAJ4piQCeWFs+WNoemAieaLqeeVjOmdog",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAACmCgAAAAAAAKYKAAAAAAAAAAAAAAAA8L8"
				],
				[
					107,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAMQKAAAAAAAAxQoAAAAAAAAAAAAAxQoAAAAAAADGCgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADECgAAAAAAAMQKAAAAAAAAAAAAAAAA8L8"
				],
				[
					108,
					1,
					"plain_tasks_new",
					null,
					"AQAAAMUKAAAAAAAAyAoAAAAAAAABAAAACQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADGCgAAAAAAAMYKAAAAAAAAAAAAAAAA8L8"
				],
				[
					110,
					1,
					"insert",
					{
						"characters": "slg"
					},
					"AwAAAMgKAAAAAAAAyQoAAAAAAAAAAAAAyQoAAAAAAADKCgAAAAAAAAAAAADKCgAAAAAAAMsKAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADICgAAAAAAAMgKAAAAAAAAAAAAAAAA8L8"
				],
				[
					112,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAMsKAAAAAAAAzAoAAAAAAAAAAAAAywoAAAAAAADNCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADLCgAAAAAAAMsKAAAAAAAAAAAAAAAA8L8"
				],
				[
					114,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAM0KAAAAAAAAzgoAAAAAAAAAAAAAzQoAAAAAAADQCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADNCgAAAAAAAM0KAAAAAAAAAAAAAAAA8L8"
				],
				[
					116,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAANAKAAAAAAAA0QoAAAAAAAAAAAAA0AoAAAAAAADSCgAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADQCgAAAAAAANAKAAAAAAAAAAAAAAAA8L8"
				],
				[
					118,
					1,
					"plain_tasks_complete",
					null,
					"AgAAANIKAAAAAAAA6QoAAAAAAAAAAAAAxQoAAAAAAADSCgAAAAAAAB0AAAAJ4piQCXNsZ+aImOaWl+aRhOWDj+acuuaOp+WItg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADGCgAAAAAAAMYKAAAAAAAAAAAAAAAA8L8"
				],
				[
					121,
					1,
					"insert",
					{
						"characters": "\n-"
					},
					"AwAAAOkKAAAAAAAA6goAAAAAAAAAAAAA6goAAAAAAADrCgAAAAAAAAAAAADrCgAAAAAAAOwKAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADpCgAAAAAAAOkKAAAAAAAAAAAAAAAA8L8"
				],
				[
					122,
					1,
					"insert",
					{
						"characters": "--"
					},
					"AgAAAOwKAAAAAAAA7QoAAAAAAAAAAAAA7QoAAAAAAADuCgAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADsCgAAAAAAAOwKAAAAAAAAAAAAAAAA8L8"
				],
				[
					123,
					1,
					"expand_snippet",
					null,
					"AgAAAOwKAAAAAAAA7AoAAAAAAAACAAAALS3sCgAAAAAAAAkLAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADuCgAAAAAAAO4KAAAAAAAAAAAAAAAA8L8"
				],
				[
					124,
					1,
					"insert",
					{
						"characters": "@crea"
					},
					"BQAAAAkLAAAAAAAACgsAAAAAAAAAAAAACgsAAAAAAAALCwAAAAAAAAAAAAALCwAAAAAAAAwLAAAAAAAAAAAAAAwLAAAAAAAADQsAAAAAAAAAAAAADQsAAAAAAAAOCwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAJCwAAAAAAAAkLAAAAAAAAAAAAAAAA8L8"
				],
				[
					125,
					1,
					"insert_completion",
					{
						"completion": "created",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "created"
					},
					"AgAAAAoLAAAAAAAACgsAAAAAAAAEAAAAY3JlYQoLAAAAAAAAEQsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAOCwAAAAAAAA4LAAAAAAAAAAAAAAAA8L8"
				],
				[
					126,
					1,
					"plain_task_insert_date",
					null,
					"AQAAABELAAAAAAAAIQsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAARCwAAAAAAABELAAAAAAAAAAAAAAAA8L8"
				],
				[
					128,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAACMLAAAAAAAAJAsAAAAAAAAAAAAAJAsAAAAAAAAlCwAAAAAAAAAAAAAlCwAAAAAAACYLAAAAAAAAAAAAACYLAAAAAAAAJwsAAAAAAAAAAAAAJAsAAAAAAAAkCwAAAAAAAAEAAAAJ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAjCwAAAAAAACMLAAAAAAAAAAAAAABQf0A"
				],
				[
					131,
					1,
					"plain_tasks_new",
					null,
					"AQAAACILAAAAAAAAJQsAAAAAAAABAAAACQ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAjCwAAAAAAACMLAAAAAAAAAAAAAAAA8L8"
				],
				[
					132,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AgAAACULAAAAAAAAJgsAAAAAAAAAAAAAKAsAAAAAAAAoCwAAAAAAAAEAAAAJ",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAlCwAAAAAAACULAAAAAAAAAAAAAAAA8L8"
				],
				[
					133,
					1,
					"left_delete",
					null,
					"AQAAACULAAAAAAAAJQsAAAAAAAABAAAAZA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAmCwAAAAAAACYLAAAAAAAAAAAAAAAA8L8"
				],
				[
					134,
					1,
					"insert",
					{
						"characters": "UI"
					},
					"AgAAACULAAAAAAAAJgsAAAAAAAAAAAAAJgsAAAAAAAAnCwAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAlCwAAAAAAACULAAAAAAAAAAAAAAAA8L8"
				],
				[
					136,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAACcLAAAAAAAAKAsAAAAAAAAAAAAAJwsAAAAAAAApCwAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAnCwAAAAAAACcLAAAAAAAAAAAAAAAA8L8"
				],
				[
					138,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAACkLAAAAAAAAKgsAAAAAAAAAAAAAKQsAAAAAAAArCwAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAApCwAAAAAAACkLAAAAAAAAAAAAAAAA8L8"
				],
				[
					139,
					4,
					"left_delete",
					null,
					"BAAAACoLAAAAAAAAKgsAAAAAAAADAAAA55CGKQsAAAAAAAApCwAAAAAAAAMAAADmlbQoCwAAAAAAACgLAAAAAAAAAwAAAOi+kScLAAAAAAAAJwsAAAAAAAADAAAA6YC7",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAArCwAAAAAAACsLAAAAAAAAAAAAAAAA8L8"
				],
				[
					141,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAACcLAAAAAAAAKAsAAAAAAAAAAAAAJwsAAAAAAAApCwAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAnCwAAAAAAACcLAAAAAAAAAAAAAAAA8L8"
				],
				[
					143,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAACkLAAAAAAAAKgsAAAAAAAAAAAAAKQsAAAAAAAAqCwAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAApCwAAAAAAACkLAAAAAAAAAAAAAAAA8L8"
				],
				[
					145,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAACoLAAAAAAAAKwsAAAAAAAAAAAAAKgsAAAAAAAAsCwAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAqCwAAAAAAACoLAAAAAAAAAAAAAAAA8L8"
				],
				[
					147,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAACwLAAAAAAAALQsAAAAAAAAAAAAALAsAAAAAAAAuCwAAAAAAAAEAAAAg",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAsCwAAAAAAACwLAAAAAAAAAAAAAAAA8L8"
				],
				[
					148,
					1,
					"insert",
					{
						"characters": " @crit"
					},
					"BgAAAC4LAAAAAAAALwsAAAAAAAAAAAAALwsAAAAAAAAwCwAAAAAAAAAAAAAwCwAAAAAAADELAAAAAAAAAAAAADELAAAAAAAAMgsAAAAAAAAAAAAAMgsAAAAAAAAzCwAAAAAAAAAAAAAzCwAAAAAAADQLAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAuCwAAAAAAAC4LAAAAAAAAAAAAAAAA8L8"
				],
				[
					149,
					1,
					"insert_completion",
					{
						"completion": "critical",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "critical"
					},
					"AgAAADALAAAAAAAAMAsAAAAAAAAEAAAAY3JpdDALAAAAAAAAOAsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA0CwAAAAAAADQLAAAAAAAAAAAAAAAA8L8"
				],
				[
					165,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAADgLAAAAAAAAOQsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA4CwAAAAAAADgLAAAAAAAAAAAAAAAA8L8"
				],
				[
					166,
					1,
					"insert",
					{
						"characters": "\n\t"
					},
					"AwAAADkLAAAAAAAAOgsAAAAAAAAAAAAAOgsAAAAAAAA7CwAAAAAAAAAAAAA7CwAAAAAAADwLAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA5CwAAAAAAADkLAAAAAAAAAAAAAAAA8L8"
				],
				[
					167,
					1,
					"plain_tasks_new",
					null,
					"AQAAADoLAAAAAAAAPgsAAAAAAAACAAAACQk",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA8CwAAAAAAADwLAAAAAAAAAAAAAAAA8L8"
				],
				[
					168,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAD4LAAAAAAAAPwsAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA+CwAAAAAAAD4LAAAAAAAAAAAAAAAA8L8"
				],
				[
					169,
					1,
					"left_delete",
					null,
					"AQAAAD4LAAAAAAAAPgsAAAAAAAABAAAAZA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAA/CwAAAAAAAD8LAAAAAAAAAAAAAAAA8L8"
				],
				[
					6,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAD4LAAAAAAAAPwsAAAAAAAAAAAAAPgsAAAAAAABACwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAPgsAAAAAAAA+CwAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAEALAAAAAAAAQQsAAAAAAAAAAAAAQAsAAAAAAABCCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAQAsAAAAAAABACwAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					2,
					"left_delete",
					null,
					"AgAAAEELAAAAAAAAQQsAAAAAAAADAAAA6Z2iQAsAAAAAAABACwAAAAAAAAMAAADnlYw",
					"AQAAAAAAAAABAAAAQgsAAAAAAABCCwAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAEALAAAAAAAAQQsAAAAAAAAAAAAAQAsAAAAAAABCCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAQAsAAAAAAABACwAAAAAAAAAAAAAAAPC/"
				],
				[
					13,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAEILAAAAAAAAQwsAAAAAAAAAAAAAQgsAAAAAAABECwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAQgsAAAAAAABCCwAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAEQLAAAAAAAARQsAAAAAAAAAAAAARAsAAAAAAABGCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAARAsAAAAAAABECwAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAEYLAAAAAAAAXQsAAAAAAAAAAAAAOgsAAAAAAABGCwAAAAAAAB4AAAAJCeKYkAnlsI/pmJ/nlYzpnaLkvY3nva7noa7lrpo",
					"AQAAAAAAAAABAAAAPAsAAAAAAAA8CwAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"insert",
					{
						"characters": "\nd"
					},
					"AwAAAF0LAAAAAAAAXgsAAAAAAAAAAAAAXgsAAAAAAABgCwAAAAAAAAAAAABgCwAAAAAAAGELAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXQsAAAAAAABdCwAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					1,
					"left_delete",
					null,
					"AQAAAGALAAAAAAAAYAsAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAYQsAAAAAAABhCwAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					1,
					"plain_tasks_new",
					null,
					"AQAAAF4LAAAAAAAAYgsAAAAAAAACAAAACQk",
					"AQAAAAAAAAABAAAAYAsAAAAAAABgCwAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAGILAAAAAAAAYwsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYgsAAAAAAABiCwAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					1,
					"left_delete",
					null,
					"AQAAAGILAAAAAAAAYgsAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAYwsAAAAAAABjCwAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAGILAAAAAAAAYwsAAAAAAAAAAAAAYgsAAAAAAABkCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAYgsAAAAAAABiCwAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAGQLAAAAAAAAZQsAAAAAAAAAAAAAZAsAAAAAAABmCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAZAsAAAAAAABkCwAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAGYLAAAAAAAAZwsAAAAAAAAAAAAAZgsAAAAAAABoCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAZgsAAAAAAABmCwAAAAAAAAAAAAAAAPC/"
				],
				[
					31,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAGgLAAAAAAAAaQsAAAAAAAAAAAAAaAsAAAAAAABqCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAaAsAAAAAAABoCwAAAAAAAAAAAAAAAPC/"
				],
				[
					34,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAGoLAAAAAAAAawsAAAAAAAAAAAAAagsAAAAAAABsCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAagsAAAAAAABqCwAAAAAAAAAAAAAAAPC/"
				],
				[
					35,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAGwLAAAAAAAAgwsAAAAAAAAAAAAAXgsAAAAAAABsCwAAAAAAACQAAAAJCeKYkAnogYrlpKnkv6Hmga/nlYzpnaLkvY3nva7noa7lrpo",
					"AQAAAAAAAAABAAAAbAsAAAAAAABsCwAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAIMLAAAAAAAAhAsAAAAAAAAAAAAAhAsAAAAAAACGCwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgwsAAAAAAACDCwAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": "winMain"
					},
					"BwAAAIYLAAAAAAAAhwsAAAAAAAAAAAAAhwsAAAAAAACICwAAAAAAAAAAAACICwAAAAAAAIkLAAAAAAAAAAAAAIkLAAAAAAAAigsAAAAAAAAAAAAAigsAAAAAAACLCwAAAAAAAAAAAACLCwAAAAAAAIwLAAAAAAAAAAAAAIwLAAAAAAAAjQsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhgsAAAAAAACGCwAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					1,
					"insert",
					{
						"characters": " ->"
					},
					"AwAAAI0LAAAAAAAAjgsAAAAAAAAAAAAAjgsAAAAAAACPCwAAAAAAAAAAAACPCwAAAAAAAJALAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjQsAAAAAAACNCwAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": " winRpg"
					},
					"BwAAAJALAAAAAAAAkQsAAAAAAAAAAAAAkQsAAAAAAACSCwAAAAAAAAAAAACSCwAAAAAAAJMLAAAAAAAAAAAAAJMLAAAAAAAAlAsAAAAAAAAAAAAAlAsAAAAAAACVCwAAAAAAAAAAAACVCwAAAAAAAJYLAAAAAAAAAAAAAJYLAAAAAAAAlwsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkAsAAAAAAACQCwAAAAAAAAAAAAAAAPC/"
				],
				[
					44,
					1,
					"plain_tasks_new",
					null,
					"AQAAAIQLAAAAAAAAmQsAAAAAAAATAAAACQl3aW5NYWluIC0+IHdpblJwZw",
					"AQAAAAAAAAABAAAAhgsAAAAAAACGCwAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAJkLAAAAAAAAsAsAAAAAAAAAAAAAhAsAAAAAAACZCwAAAAAAABcAAAAJCeKYkAl3aW5NYWluIC0+IHdpblJwZw",
					"AQAAAAAAAAABAAAAmQsAAAAAAACZCwAAAAAAAAAAAAAAAPC/"
				],
				[
					48,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAALALAAAAAAAAsQsAAAAAAAAAAAAAsQsAAAAAAACzCwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsAsAAAAAAACwCwAAAAAAAAAAAAAAAPC/"
				],
				[
					49,
					1,
					"plain_tasks_new",
					null,
					"AQAAALELAAAAAAAAtQsAAAAAAAACAAAACQk",
					"AQAAAAAAAAABAAAAswsAAAAAAACzCwAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"insert",
					{
						"characters": "itemT"
					},
					"BQAAALULAAAAAAAAtgsAAAAAAAAAAAAAtgsAAAAAAAC3CwAAAAAAAAAAAAC3CwAAAAAAALgLAAAAAAAAAAAAALgLAAAAAAAAuQsAAAAAAAAAAAAAuQsAAAAAAAC6CwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtQsAAAAAAAC1CwAAAAAAAAAAAAAAAPC/"
				],
				[
					51,
					1,
					"insert",
					{
						"characters": "oll"
					},
					"AwAAALoLAAAAAAAAuwsAAAAAAAAAAAAAuwsAAAAAAAC8CwAAAAAAAAAAAAC8CwAAAAAAAL0LAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAugsAAAAAAAC6CwAAAAAAAAAAAAAAAPC/"
				],
				[
					52,
					2,
					"left_delete",
					null,
					"AgAAALwLAAAAAAAAvAsAAAAAAAABAAAAbLsLAAAAAAAAuwsAAAAAAAABAAAAbA",
					"AQAAAAAAAAABAAAAvQsAAAAAAAC9CwAAAAAAAAAAAAAAAPC/"
				],
				[
					53,
					1,
					"insert",
					{
						"characters": "olTips"
					},
					"BgAAALsLAAAAAAAAvAsAAAAAAAAAAAAAvAsAAAAAAAC9CwAAAAAAAAAAAAC9CwAAAAAAAL4LAAAAAAAAAAAAAL4LAAAAAAAAvwsAAAAAAAAAAAAAvwsAAAAAAADACwAAAAAAAAAAAADACwAAAAAAAMELAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuwsAAAAAAAC7CwAAAAAAAAAAAAAAAPC/"
				],
				[
					55,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAMELAAAAAAAAwgsAAAAAAAAAAAAAwQsAAAAAAADDCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAwQsAAAAAAADBCwAAAAAAAAAAAAAAAPC/"
				],
				[
					58,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAMMLAAAAAAAAxAsAAAAAAAAAAAAAwwsAAAAAAADFCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAwwsAAAAAAADDCwAAAAAAAAAAAAAAAPC/"
				],
				[
					60,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAMULAAAAAAAAxgsAAAAAAAAAAAAAxQsAAAAAAADHCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAxQsAAAAAAADFCwAAAAAAAAAAAAAAAPC/"
				],
				[
					61,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAMcLAAAAAAAA3gsAAAAAAAAAAAAAsQsAAAAAAADHCwAAAAAAACQAAAAJCeKYkAlpdGVtVG9vbFRpcHPnlYzpnaLkvY3nva7osIPmlbQ",
					"AQAAAAAAAAABAAAAxwsAAAAAAADHCwAAAAAAAAAAAAAAAPC/"
				],
				[
					63,
					1,
					"reindent",
					null,
					"AQAAAN8LAAAAAAAA4QsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3wsAAAAAAADfCwAAAAAAAAAAAAAAAHFA"
				],
				[
					64,
					1,
					"plain_tasks_new",
					null,
					"AQAAAN8LAAAAAAAA4wsAAAAAAAACAAAACQk",
					"AQAAAAAAAAABAAAA4QsAAAAAAADhCwAAAAAAAAAAAAAAAPC/"
				],
				[
					65,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAOMLAAAAAAAA5AsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4wsAAAAAAADjCwAAAAAAAAAAAAAAAPC/"
				],
				[
					66,
					1,
					"left_delete",
					null,
					"AQAAAOMLAAAAAAAA4wsAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAA5AsAAAAAAADkCwAAAAAAAAAAAAAAAPC/"
				],
				[
					67,
					1,
					"insert",
					{
						"characters": "rpg"
					},
					"AwAAAOMLAAAAAAAA5AsAAAAAAAAAAAAA5AsAAAAAAADlCwAAAAAAAAAAAADlCwAAAAAAAOYLAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4wsAAAAAAADjCwAAAAAAAAAAAAAAAPC/"
				],
				[
					69,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAOYLAAAAAAAA5wsAAAAAAAAAAAAA5gsAAAAAAADnCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAA5gsAAAAAAADmCwAAAAAAAAAAAAAAAPC/"
				],
				[
					70,
					1,
					"insert",
					{
						"characters": "slg"
					},
					"AwAAAOcLAAAAAAAA6AsAAAAAAAAAAAAA6AsAAAAAAADpCwAAAAAAAAAAAADpCwAAAAAAAOoLAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5wsAAAAAAADnCwAAAAAAAAAAAAAAAPC/"
				],
				[
					71,
					3,
					"left_delete",
					null,
					"AwAAAOkLAAAAAAAA6QsAAAAAAAABAAAAZ+gLAAAAAAAA6AsAAAAAAAABAAAAbOcLAAAAAAAA5wsAAAAAAAABAAAAcw",
					"AQAAAAAAAAABAAAA6gsAAAAAAADqCwAAAAAAAAAAAAAAAPC/"
				],
				[
					72,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAOcLAAAAAAAA6AsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5wsAAAAAAADnCwAAAAAAAAAAAAAAAPC/"
				],
				[
					73,
					1,
					"left_delete",
					null,
					"AQAAAOcLAAAAAAAA5wsAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAA6AsAAAAAAADoCwAAAAAAAAAAAAAAAPC/"
				],
				[
					74,
					1,
					"insert",
					{
						"characters": "build"
					},
					"BQAAAOcLAAAAAAAA6AsAAAAAAAAAAAAA6AsAAAAAAADpCwAAAAAAAAAAAADpCwAAAAAAAOoLAAAAAAAAAAAAAOoLAAAAAAAA6wsAAAAAAAAAAAAA6wsAAAAAAADsCwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5wsAAAAAAADnCwAAAAAAAAAAAAAAAPC/"
				],
				[
					77,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAOwLAAAAAAAA7QsAAAAAAAAAAAAA7AsAAAAAAADuCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAA7AsAAAAAAADsCwAAAAAAAAAAAAAAAPC/"
				],
				[
					79,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAO4LAAAAAAAA7wsAAAAAAAAAAAAA7gsAAAAAAADwCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAA7gsAAAAAAADuCwAAAAAAAAAAAAAAAPC/"
				],
				[
					80,
					2,
					"left_delete",
					null,
					"AgAAAO8LAAAAAAAA7wsAAAAAAAADAAAA5oGv7gsAAAAAAADuCwAAAAAAAAMAAADkv6E",
					"AQAAAAAAAAABAAAA8AsAAAAAAADwCwAAAAAAAAAAAAAAAPC/"
				],
				[
					82,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAO4LAAAAAAAA7wsAAAAAAAAAAAAA7gsAAAAAAADwCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAA7gsAAAAAAADuCwAAAAAAAAAAAAAAAPC/"
				],
				[
					84,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAPALAAAAAAAA8QsAAAAAAAAAAAAA8AsAAAAAAADyCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAA8AsAAAAAAADwCwAAAAAAAAAAAAAAAPC/"
				],
				[
					86,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAPILAAAAAAAA8wsAAAAAAAAAAAAA8gsAAAAAAADzCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAA8gsAAAAAAADyCwAAAAAAAAAAAAAAAPC/"
				],
				[
					87,
					3,
					"left_delete",
					null,
					"AwAAAPILAAAAAAAA8gsAAAAAAAADAAAA5Ye68QsAAAAAAADxCwAAAAAAAAMAAADnprvwCwAAAAAAAPALAAAAAAAAAwAAAOaKvQ",
					"AQAAAAAAAAABAAAA8wsAAAAAAADzCwAAAAAAAAAAAAAAAPC/"
				],
				[
					89,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAPALAAAAAAAA8QsAAAAAAAAAAAAA8AsAAAAAAADyCwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAA8AsAAAAAAADwCwAAAAAAAAAAAAAAAPC/"
				],
				[
					91,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAPILAAAAAAAA8wsAAAAAAAAAAAAA8gsAAAAAAAD0CwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAA8gsAAAAAAADyCwAAAAAAAAAAAAAAAPC/"
				],
				[
					93,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAPQLAAAAAAAA9QsAAAAAAAAAAAAA9AsAAAAAAAD1CwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAA9AsAAAAAAAD0CwAAAAAAAAAAAAAAAPC/"
				],
				[
					95,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAPULAAAAAAAA9gsAAAAAAAAAAAAA9QsAAAAAAAD3CwAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAA9QsAAAAAAAD1CwAAAAAAAAAAAAAAAPC/"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": "window"
					},
					"BgAAAPcLAAAAAAAA+AsAAAAAAAAAAAAA+AsAAAAAAAD5CwAAAAAAAAAAAAD5CwAAAAAAAPoLAAAAAAAAAAAAAPoLAAAAAAAA+wsAAAAAAAAAAAAA+wsAAAAAAAD8CwAAAAAAAAAAAAD8CwAAAAAAAP0LAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9wsAAAAAAAD3CwAAAAAAAAAAAAAAAPC/"
				],
				[
					97,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAP0LAAAAAAAA/gsAAAAAAAAAAAAA/gsAAAAAAAAADAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA/QsAAAAAAAD9CwAAAAAAAAAAAAAAAPC/"
				],
				[
					98,
					1,
					"plain_tasks_new",
					null,
					"AQAAAP4LAAAAAAAAAgwAAAAAAAACAAAACQk",
					"AQAAAAAAAAABAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAPC/"
				],
				[
					99,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAAIMAAAAAAAAAwwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAgwAAAAAAAACDAAAAAAAAAAAAAAAAPC/"
				],
				[
					100,
					1,
					"left_delete",
					null,
					"AQAAAAIMAAAAAAAAAgwAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAAwwAAAAAAAADDAAAAAAAAAAAAAAAAPC/"
				],
				[
					102,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAAIMAAAAAAAAAwwAAAAAAAAAAAAAAgwAAAAAAAADDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAAgwAAAAAAAACDAAAAAAAAAAAAAAAAPC/"
				],
				[
					103,
					1,
					"left_delete",
					null,
					"AQAAAAIMAAAAAAAAAgwAAAAAAAADAAAA6Zif",
					"AQAAAAAAAAABAAAAAwwAAAAAAAADDAAAAAAAAAAAAAAAAPC/"
				],
				[
					106,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAAIMAAAAAAAAAwwAAAAAAAAAAAAAAgwAAAAAAAAEDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAAgwAAAAAAAACDAAAAAAAAAAAAAAAAPC/"
				],
				[
					108,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAAQMAAAAAAAABQwAAAAAAAAAAAAABAwAAAAAAAAGDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAABAwAAAAAAAAEDAAAAAAAAAAAAAAAAPC/"
				],
				[
					110,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAAYMAAAAAAAABwwAAAAAAAAAAAAABgwAAAAAAAAIDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAABgwAAAAAAAAGDAAAAAAAAAAAAAAAAPC/"
				],
				[
					112,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAAgMAAAAAAAACQwAAAAAAAAAAAAACAwAAAAAAAAKDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAACAwAAAAAAAAIDAAAAAAAAAAAAAAAAPC/"
				],
				[
					113,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAAoMAAAAAAAACwwAAAAAAAAAAAAACwwAAAAAAAANDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACgwAAAAAAAAKDAAAAAAAAAAAAAAAAPC/"
				],
				[
					114,
					1,
					"plain_tasks_new",
					null,
					"AQAAAAsMAAAAAAAADwwAAAAAAAACAAAACQk",
					"AQAAAAAAAAABAAAADQwAAAAAAAANDAAAAAAAAAAAAAAAAPC/"
				],
				[
					115,
					1,
					"insert",
					{
						"characters": "rpg"
					},
					"AwAAAA8MAAAAAAAAEAwAAAAAAAAAAAAAEAwAAAAAAAARDAAAAAAAAAAAAAARDAAAAAAAABIMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADwwAAAAAAAAPDAAAAAAAAAAAAAAAAPC/"
				],
				[
					116,
					1,
					"insert",
					{
						"characters": "->"
					},
					"AgAAABIMAAAAAAAAEwwAAAAAAAAAAAAAEwwAAAAAAAAUDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEgwAAAAAAAASDAAAAAAAAAAAAAAAAPC/"
				],
				[
					117,
					1,
					"insert",
					{
						"characters": " build"
					},
					"BgAAABQMAAAAAAAAFQwAAAAAAAAAAAAAFQwAAAAAAAAWDAAAAAAAAAAAAAAWDAAAAAAAABcMAAAAAAAAAAAAABcMAAAAAAAAGAwAAAAAAAAAAAAAGAwAAAAAAAAZDAAAAAAAAAAAAAAZDAAAAAAAABoMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFAwAAAAAAAAUDAAAAAAAAAAAAAAAAPC/"
				],
				[
					119,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAABoMAAAAAAAAGwwAAAAAAAAAAAAAGgwAAAAAAAAcDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAGgwAAAAAAAAaDAAAAAAAAAAAAAAAAPC/"
				],
				[
					120,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAABwMAAAAAAAAHQwAAAAAAAAAAAAAHQwAAAAAAAAfDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHAwAAAAAAAAcDAAAAAAAAAAAAAAAAPC/"
				],
				[
					121,
					1,
					"plain_tasks_new",
					null,
					"AQAAAB0MAAAAAAAAIQwAAAAAAAACAAAACQk",
					"AQAAAAAAAAABAAAAHwwAAAAAAAAfDAAAAAAAAAAAAAAAAPC/"
				],
				[
					122,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAACEMAAAAAAAAIgwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIQwAAAAAAAAhDAAAAAAAAAAAAAAAAPC/"
				],
				[
					123,
					1,
					"left_delete",
					null,
					"AQAAACEMAAAAAAAAIQwAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAIgwAAAAAAAAiDAAAAAAAAAAAAAAAAPC/"
				],
				[
					124,
					1,
					"insert",
					{
						"characters": "slg"
					},
					"AwAAACEMAAAAAAAAIgwAAAAAAAAAAAAAIgwAAAAAAAAjDAAAAAAAAAAAAAAjDAAAAAAAACQMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIQwAAAAAAAAhDAAAAAAAAAAAAAAAAPC/"
				],
				[
					126,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAACQMAAAAAAAAJQwAAAAAAAAAAAAAJAwAAAAAAAAmDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAJAwAAAAAAAAkDAAAAAAAAAAAAAAAAPC/"
				],
				[
					129,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAACYMAAAAAAAAJwwAAAAAAAAAAAAAJgwAAAAAAAAoDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAJgwAAAAAAAAmDAAAAAAAAAAAAAAAAPC/"
				],
				[
					132,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAACgMAAAAAAAAKQwAAAAAAAAAAAAAKAwAAAAAAAAqDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAKAwAAAAAAAAoDAAAAAAAAAAAAAAAAPC/"
				],
				[
					133,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAACoMAAAAAAAAKwwAAAAAAAAAAAAAKwwAAAAAAAAtDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAKgwAAAAAAAAqDAAAAAAAAAAAAAAAAPC/"
				],
				[
					134,
					1,
					"plain_tasks_new",
					null,
					"AQAAACsMAAAAAAAALwwAAAAAAAACAAAACQk",
					"AQAAAAAAAAABAAAALQwAAAAAAAAtDAAAAAAAAAAAAAAAAPC/"
				],
				[
					135,
					1,
					"insert",
					{
						"characters": "td"
					},
					"AgAAAC8MAAAAAAAAMAwAAAAAAAAAAAAAMAwAAAAAAAAxDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALwwAAAAAAAAvDAAAAAAAAAAAAAAAAPC/"
				],
				[
					137,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAADEMAAAAAAAAMgwAAAAAAAAAAAAAMQwAAAAAAAAzDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAMQwAAAAAAAAxDAAAAAAAAAAAAAAAAPC/"
				],
				[
					139,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAADMMAAAAAAAANAwAAAAAAAAAAAAAMwwAAAAAAAA1DAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAMwwAAAAAAAAzDAAAAAAAAAAAAAAAAPC/"
				],
				[
					141,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAADUMAAAAAAAANgwAAAAAAAAAAAAANQwAAAAAAAA3DAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAANQwAAAAAAAA1DAAAAAAAAAAAAAAAAPC/"
				],
				[
					142,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"BQAAADcMAAAAAAAAOAwAAAAAAAAAAAAAOAwAAAAAAAA6DAAAAAAAAAAAAAA6DAAAAAAAADsMAAAAAAAAAAAAADsMAAAAAAAAPQwAAAAAAAAAAAAAOAwAAAAAAAA4DAAAAAAAAAIAAAAJCQ",
					"AQAAAAAAAAABAAAANwwAAAAAAAA3DAAAAAAAAAAAAAAAAPC/"
				],
				[
					143,
					1,
					"left_delete",
					null,
					"AQAAADoMAAAAAAAAOgwAAAAAAAABAAAACQ",
					"AQAAAAAAAAABAAAAOwwAAAAAAAA7DAAAAAAAAAAAAAAAAPC/"
				],
				[
					144,
					1,
					"plain_tasks_new",
					null,
					"AQAAADkMAAAAAAAAPAwAAAAAAAABAAAACQ",
					"AQAAAAAAAAABAAAAOgwAAAAAAAA6DAAAAAAAAAAAAAAAAPC/"
				],
				[
					145,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAADwMAAAAAAAAPQwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAwAAAAAAAA8DAAAAAAAAAAAAAAAAPC/"
				],
				[
					146,
					1,
					"left_delete",
					null,
					"AQAAADwMAAAAAAAAPAwAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAPQwAAAAAAAA9DAAAAAAAAAAAAAAAAPC/"
				],
				[
					147,
					1,
					"insert",
					{
						"characters": "Team"
					},
					"BAAAADwMAAAAAAAAPQwAAAAAAAAAAAAAPQwAAAAAAAA+DAAAAAAAAAAAAAA+DAAAAAAAAD8MAAAAAAAAAAAAAD8MAAAAAAAAQAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAwAAAAAAAA8DAAAAAAAAAAAAAAAAPC/"
				],
				[
					148,
					1,
					"insert",
					{
						"characters": "System"
					},
					"BgAAAEAMAAAAAAAAQQwAAAAAAAAAAAAAQQwAAAAAAABCDAAAAAAAAAAAAABCDAAAAAAAAEMMAAAAAAAAAAAAAEMMAAAAAAAARAwAAAAAAAAAAAAARAwAAAAAAABFDAAAAAAAAAAAAABFDAAAAAAAAEYMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQAwAAAAAAABADAAAAAAAAAAAAAAAAPC/"
				],
				[
					149,
					10,
					"left_delete",
					null,
					"CgAAAEUMAAAAAAAARQwAAAAAAAABAAAAbUQMAAAAAAAARAwAAAAAAAABAAAAZUMMAAAAAAAAQwwAAAAAAAABAAAAdEIMAAAAAAAAQgwAAAAAAAABAAAAc0EMAAAAAAAAQQwAAAAAAAABAAAAeUAMAAAAAAAAQAwAAAAAAAABAAAAUz8MAAAAAAAAPwwAAAAAAAABAAAAbT4MAAAAAAAAPgwAAAAAAAABAAAAYT0MAAAAAAAAPQwAAAAAAAABAAAAZTwMAAAAAAAAPAwAAAAAAAABAAAAVA",
					"AQAAAAAAAAABAAAARgwAAAAAAABGDAAAAAAAAAAAAAAAAPC/"
				],
				[
					150,
					1,
					"insert",
					{
						"characters": "T"
					},
					"AQAAADwMAAAAAAAAPQwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPAwAAAAAAAA8DAAAAAAAAAAAAAAAAPC/"
				],
				[
					151,
					1,
					"insert",
					{
						"characters": "roop"
					},
					"BAAAAD0MAAAAAAAAPgwAAAAAAAAAAAAAPgwAAAAAAAA/DAAAAAAAAAAAAAA/DAAAAAAAAEAMAAAAAAAAAAAAAEAMAAAAAAAAQQwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPQwAAAAAAAA9DAAAAAAAAAAAAAAAAPC/"
				],
				[
					152,
					1,
					"insert",
					{
						"characters": "System"
					},
					"BgAAAEEMAAAAAAAAQgwAAAAAAAAAAAAAQgwAAAAAAABDDAAAAAAAAAAAAABDDAAAAAAAAEQMAAAAAAAAAAAAAEQMAAAAAAAARQwAAAAAAAAAAAAARQwAAAAAAABGDAAAAAAAAAAAAABGDAAAAAAAAEcMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAQQwAAAAAAABBDAAAAAAAAAAAAAAAAPC/"
				],
				[
					153,
					1,
					"insert",
					{
						"characters": " d"
					},
					"AgAAAEcMAAAAAAAASAwAAAAAAAAAAAAASAwAAAAAAABJDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARwwAAAAAAABHDAAAAAAAAAAAAAAAAPC/"
				],
				[
					154,
					1,
					"left_delete",
					null,
					"AQAAAEgMAAAAAAAASAwAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAASQwAAAAAAABJDAAAAAAAAAAAAAAAAPC/"
				],
				[
					156,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAEgMAAAAAAAASQwAAAAAAAAAAAAASAwAAAAAAABKDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAASAwAAAAAAABIDAAAAAAAAAAAAAAAAPC/"
				],
				[
					158,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAEoMAAAAAAAASwwAAAAAAAAAAAAASgwAAAAAAABMDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAASgwAAAAAAABKDAAAAAAAAAAAAAAAAPC/"
				],
				[
					159,
					1,
					"insert",
					{
						"characters": " @cri"
					},
					"BQAAAEwMAAAAAAAATQwAAAAAAAAAAAAATQwAAAAAAABODAAAAAAAAAAAAABODAAAAAAAAE8MAAAAAAAAAAAAAE8MAAAAAAAAUAwAAAAAAAAAAAAAUAwAAAAAAABRDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATAwAAAAAAABMDAAAAAAAAAAAAAAAAPC/"
				],
				[
					160,
					1,
					"insert_completion",
					{
						"completion": "critical",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "critical"
					},
					"AgAAAE4MAAAAAAAATgwAAAAAAAADAAAAY3JpTgwAAAAAAABWDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUQwAAAAAAABRDAAAAAAAAAAAAAAAAPC/"
				],
				[
					167,
					1,
					"insert",
					{
						"characters": "\n\t"
					},
					"AwAAAFYMAAAAAAAAVwwAAAAAAAAAAAAAVwwAAAAAAABYDAAAAAAAAAAAAABYDAAAAAAAAFkMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVgwAAAAAAABWDAAAAAAAAAAAAAAAAPC/"
				],
				[
					168,
					1,
					"plain_tasks_new",
					null,
					"AQAAAFcMAAAAAAAAWwwAAAAAAAACAAAACQk",
					"AQAAAAAAAAABAAAAWQwAAAAAAABZDAAAAAAAAAAAAAAAAPC/"
				],
				[
					169,
					1,
					"insert",
					{
						"characters": "TRoo"
					},
					"BAAAAFsMAAAAAAAAXAwAAAAAAAAAAAAAXAwAAAAAAABdDAAAAAAAAAAAAABdDAAAAAAAAF4MAAAAAAAAAAAAAF4MAAAAAAAAXwwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWwwAAAAAAABbDAAAAAAAAAAAAAAAAPC/"
				],
				[
					170,
					3,
					"left_delete",
					null,
					"AwAAAF4MAAAAAAAAXgwAAAAAAAABAAAAb10MAAAAAAAAXQwAAAAAAAABAAAAb1wMAAAAAAAAXAwAAAAAAAABAAAAUg",
					"AQAAAAAAAAABAAAAXwwAAAAAAABfDAAAAAAAAAAAAAAAAPC/"
				],
				[
					171,
					1,
					"insert",
					{
						"characters": "roop"
					},
					"BAAAAFwMAAAAAAAAXQwAAAAAAAAAAAAAXQwAAAAAAABeDAAAAAAAAAAAAABeDAAAAAAAAF8MAAAAAAAAAAAAAF8MAAAAAAAAYAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXAwAAAAAAABcDAAAAAAAAAAAAAAAAPC/"
				],
				[
					172,
					1,
					"insert",
					{
						"characters": "Window"
					},
					"BgAAAGAMAAAAAAAAYQwAAAAAAAAAAAAAYQwAAAAAAABiDAAAAAAAAAAAAABiDAAAAAAAAGMMAAAAAAAAAAAAAGMMAAAAAAAAZAwAAAAAAAAAAAAAZAwAAAAAAABlDAAAAAAAAAAAAABlDAAAAAAAAGYMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYAwAAAAAAABgDAAAAAAAAAAAAAAAAPC/"
				],
				[
					181,
					1,
					"insert",
					{
						"characters": "\n\t"
					},
					"AwAAAFYMAAAAAAAAVwwAAAAAAAAAAAAAVwwAAAAAAABYDAAAAAAAAAAAAABYDAAAAAAAAFkMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVgwAAAAAAABWDAAAAAAAAAAAAAAAAPC/"
				],
				[
					182,
					1,
					"plain_tasks_new",
					null,
					"AQAAAFcMAAAAAAAAWwwAAAAAAAACAAAACQk",
					"AQAAAAAAAAABAAAAWQwAAAAAAABZDAAAAAAAAAAAAAAAAPC/"
				],
				[
					183,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAFsMAAAAAAAAXAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWwwAAAAAAABbDAAAAAAAAAAAAAAAAPC/"
				],
				[
					184,
					1,
					"left_delete",
					null,
					"AQAAAFsMAAAAAAAAWwwAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAXAwAAAAAAABcDAAAAAAAAAAAAAAAAPC/"
				],
				[
					185,
					1,
					"insert",
					{
						"characters": "Lor"
					},
					"AwAAAFsMAAAAAAAAXAwAAAAAAAAAAAAAXAwAAAAAAABdDAAAAAAAAAAAAABdDAAAAAAAAF4MAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWwwAAAAAAABbDAAAAAAAAAAAAAAAAPC/"
				],
				[
					186,
					1,
					"insert",
					{
						"characters": "dSyte"
					},
					"BQAAAF4MAAAAAAAAXwwAAAAAAAAAAAAAXwwAAAAAAABgDAAAAAAAAAAAAABgDAAAAAAAAGEMAAAAAAAAAAAAAGEMAAAAAAAAYgwAAAAAAAAAAAAAYgwAAAAAAABjDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXgwAAAAAAABeDAAAAAAAAAAAAAAAAPC/"
				],
				[
					187,
					4,
					"left_delete",
					null,
					"BAAAAGIMAAAAAAAAYgwAAAAAAAABAAAAZWEMAAAAAAAAYQwAAAAAAAABAAAAdGAMAAAAAAAAYAwAAAAAAAABAAAAeV8MAAAAAAAAXwwAAAAAAAABAAAAUw",
					"AQAAAAAAAAABAAAAYwwAAAAAAABjDAAAAAAAAAAAAAAAAPC/"
				],
				[
					188,
					1,
					"insert",
					{
						"characters": "System"
					},
					"BgAAAF8MAAAAAAAAYAwAAAAAAAAAAAAAYAwAAAAAAABhDAAAAAAAAAAAAABhDAAAAAAAAGIMAAAAAAAAAAAAAGIMAAAAAAAAYwwAAAAAAAAAAAAAYwwAAAAAAABkDAAAAAAAAAAAAABkDAAAAAAAAGUMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXwwAAAAAAABfDAAAAAAAAAAAAAAAAPC/"
				],
				[
					189,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGUMAAAAAAAAZgwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZQwAAAAAAABlDAAAAAAAAAAAAAAAAPC/"
				],
				[
					193,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAGYMAAAAAAAAZwwAAAAAAAAAAAAAZgwAAAAAAABoDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAZgwAAAAAAABmDAAAAAAAAAAAAAAAAPC/"
				],
				[
					201,
					1,
					"insert",
					{
						"characters": "\n\n"
					},
					"AgAAAHkMAAAAAAAAegwAAAAAAAAAAAAAegwAAAAAAAB7DAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeQwAAAAAAAB5DAAAAAAAAAAAAAAAwGJA"
				],
				[
					202,
					1,
					"insert",
					{
						"characters": "  "
					},
					"AgAAAHsMAAAAAAAAfAwAAAAAAAAAAAAAfAwAAAAAAAB9DAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAewwAAAAAAAB7DAAAAAAAAAAAAAAAAPC/"
				],
				[
					203,
					1,
					"plain_tasks_new",
					null,
					"AQAAAHsMAAAAAAAAfwwAAAAAAAACAAAAICA",
					"AQAAAAAAAAABAAAAfQwAAAAAAAB9DAAAAAAAAAAAAAAAAPC/"
				],
				[
					204,
					1,
					"insert",
					{
						"characters": "ue"
					},
					"AgAAAH8MAAAAAAAAgAwAAAAAAAAAAAAAgAwAAAAAAACBDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfwwAAAAAAAB/DAAAAAAAAAAAAAAAAPC/"
				],
				[
					205,
					2,
					"left_delete",
					null,
					"AgAAAIAMAAAAAAAAgAwAAAAAAAABAAAAZX8MAAAAAAAAfwwAAAAAAAABAAAAdQ",
					"AQAAAAAAAAABAAAAgQwAAAAAAACBDAAAAAAAAAAAAAAAAPC/"
				],
				[
					207,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAH8MAAAAAAAAgAwAAAAAAAAAAAAAfwwAAAAAAACBDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAfwwAAAAAAAB/DAAAAAAAAAAAAAAAAPC/"
				],
				[
					209,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAIEMAAAAAAAAggwAAAAAAAAAAAAAgQwAAAAAAACDDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAgQwAAAAAAACBDAAAAAAAAAAAAAAAAPC/"
				],
				[
					211,
					1,
					"sequence",
					{
						"commands":
						[
						]
					},
					"AgAAAIMMAAAAAAAAhAwAAAAAAAAAAAAAgwwAAAAAAACFDAAAAAAAAAEAAAAg",
					"AQAAAAAAAAABAAAAgwwAAAAAAACDDAAAAAAAAAAAAAAAAPC/"
				],
				[
					212,
					1,
					"",
					null,
					"AQAAAIUMAAAAAAAAhgwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhQwAAAAAAACFDAAAAAAAAAAAAAAAAPC/"
				],
				[
					213,
					1,
					"insert",
					{
						"characters": "Ca"
					},
					"AgAAAIYMAAAAAAAAhwwAAAAAAAAAAAAAhwwAAAAAAACIDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhgwAAAAAAACGDAAAAAAAAAAAAAAAAPC/"
				],
				[
					214,
					7,
					"left_delete",
					null,
					"BwAAAIcMAAAAAAAAhwwAAAAAAAABAAAAYYYMAAAAAAAAhgwAAAAAAAABAAAAQ4UMAAAAAAAAhQwAAAAAAAADAAAA77yahAwAAAAAAACEDAAAAAAAAAMAAADlloSDDAAAAAAAAIMMAAAAAAAAAwAAAOWujIIMAAAAAAAAggwAAAAAAAADAAAA57ufgQwAAAAAAACBDAAAAAAAAAMAAADns7s",
					"AQAAAAAAAAABAAAAiAwAAAAAAACIDAAAAAAAAAAAAAAAAPC/"
				],
				[
					215,
					2,
					"left_delete",
					null,
					"AgAAAIAMAAAAAAAAgAwAAAAAAAADAAAA6ImyfwwAAAAAAAB/DAAAAAAAAAMAAADop5I",
					"AQAAAAAAAAABAAAAgQwAAAAAAACBDAAAAAAAAAAAAAAAAPC/"
				],
				[
					216,
					1,
					"insert",
					{
						"characters": "CharacterD"
					},
					"CgAAAH8MAAAAAAAAgAwAAAAAAAAAAAAAgAwAAAAAAACBDAAAAAAAAAAAAACBDAAAAAAAAIIMAAAAAAAAAAAAAIIMAAAAAAAAgwwAAAAAAAAAAAAAgwwAAAAAAACEDAAAAAAAAAAAAACEDAAAAAAAAIUMAAAAAAAAAAAAAIUMAAAAAAAAhgwAAAAAAAAAAAAAhgwAAAAAAACHDAAAAAAAAAAAAACHDAAAAAAAAIgMAAAAAAAAAAAAAIgMAAAAAAAAiQwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfwwAAAAAAAB/DAAAAAAAAAAAAAAAAPC/"
				],
				[
					217,
					1,
					"insert",
					{
						"characters": "ata"
					},
					"AwAAAIkMAAAAAAAAigwAAAAAAAAAAAAAigwAAAAAAACLDAAAAAAAAAAAAACLDAAAAAAAAIwMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAiQwAAAAAAACJDAAAAAAAAAAAAAAAAPC/"
				],
				[
					220,
					1,
					"insert",
					{
						"characters": " @cre"
					},
					"BQAAAIwMAAAAAAAAjQwAAAAAAAAAAAAAjQwAAAAAAACODAAAAAAAAAAAAACODAAAAAAAAI8MAAAAAAAAAAAAAI8MAAAAAAAAkAwAAAAAAAAAAAAAkAwAAAAAAACRDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjAwAAAAAAACMDAAAAAAAAAAAAAAAAPC/"
				],
				[
					221,
					4,
					"left_delete",
					null,
					"BAAAAJAMAAAAAAAAkAwAAAAAAAABAAAAZY8MAAAAAAAAjwwAAAAAAAABAAAAco4MAAAAAAAAjgwAAAAAAAABAAAAY40MAAAAAAAAjQwAAAAAAAABAAAAQA",
					"AQAAAAAAAAABAAAAkQwAAAAAAACRDAAAAAAAAAAAAAAAAPC/"
				],
				[
					222,
					1,
					"insert",
					{
						"characters": "@crite"
					},
					"BgAAAI0MAAAAAAAAjgwAAAAAAAAAAAAAjgwAAAAAAACPDAAAAAAAAAAAAACPDAAAAAAAAJAMAAAAAAAAAAAAAJAMAAAAAAAAkQwAAAAAAAAAAAAAkQwAAAAAAACSDAAAAAAAAAAAAACSDAAAAAAAAJMMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjQwAAAAAAACNDAAAAAAAAAAAAAAAAPC/"
				],
				[
					223,
					6,
					"left_delete",
					null,
					"BgAAAJIMAAAAAAAAkgwAAAAAAAABAAAAZZEMAAAAAAAAkQwAAAAAAAABAAAAdJAMAAAAAAAAkAwAAAAAAAABAAAAaY8MAAAAAAAAjwwAAAAAAAABAAAAco4MAAAAAAAAjgwAAAAAAAABAAAAY40MAAAAAAAAjQwAAAAAAAABAAAAQA",
					"AQAAAAAAAAABAAAAkwwAAAAAAACTDAAAAAAAAAAAAAAAAPC/"
				],
				[
					224,
					1,
					"insert",
					{
						"characters": "@cri"
					},
					"BAAAAI0MAAAAAAAAjgwAAAAAAAAAAAAAjgwAAAAAAACPDAAAAAAAAAAAAACPDAAAAAAAAJAMAAAAAAAAAAAAAJAMAAAAAAAAkQwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjQwAAAAAAACNDAAAAAAAAAAAAAAAAPC/"
				],
				[
					225,
					1,
					"insert_completion",
					{
						"completion": "critical",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "critical"
					},
					"AgAAAI4MAAAAAAAAjgwAAAAAAAADAAAAY3JpjgwAAAAAAACWDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkQwAAAAAAACRDAAAAAAAAAAAAAAAAPC/"
				],
				[
					229,
					1,
					"plain_tasks_complete",
					null,
					"AgAAAGgMAAAAAAAAfwwAAAAAAAAAAAAAVwwAAAAAAABoDAAAAAAAABcAAAAJCeKYkAlMb3JkU3lzdGVtIOiwg+aVtA",
					"AQAAAAAAAAABAAAAWQwAAAAAAABZDAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "Assets/Standard Assets/Scripts/BuildingAI.cs",
			"settings":
			{
				"buffer_size": 311,
				"line_ending": "Windows"
			}
		},
		{
			"contents": "using System.Collections;\nusing System.Collections.Generic;\nusing CreatorKitCode;\nusing UnityEngine;\n\n\n",
			"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/ApplyBurnWeaponEffect.cs",
			"file_size": 582,
			"file_write_time": 133517587343619943,
			"settings":
			{
				"buffer_size": 103,
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					6,
					1,
					"insert",
					{
						"characters": "Damage"
					},
					"BwAAAD4BAAAAAAAAPwEAAAAAAAAAAAAAPwEAAAAAAAA/AQAAAAAAAAYAAABFZmZlY3Q/AQAAAAAAAEABAAAAAAAAAAAAAEABAAAAAAAAQQEAAAAAAAAAAAAAQQEAAAAAAABCAQAAAAAAAAAAAABCAQAAAAAAAEMBAAAAAAAAAAAAAEMBAAAAAAAARAEAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAD4BAAAAAAAARAEAAAAAAAAAAAAAAADwvw"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": "Effect"
					},
					"BgAAAEQBAAAAAAAARQEAAAAAAAAAAAAARQEAAAAAAABGAQAAAAAAAAAAAABGAQAAAAAAAEcBAAAAAAAAAAAAAEcBAAAAAAAASAEAAAAAAAAAAAAASAEAAAAAAABJAQAAAAAAAAAAAABJAQAAAAAAAEoBAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAEQBAAAAAAAARAEAAAAAAAAAAAAAAADwvw"
				],
				[
					11,
					6,
					"left_delete",
					null,
					"BgAAAEMBAAAAAAAAQwEAAAAAAAABAAAAZUIBAAAAAAAAQgEAAAAAAAABAAAAZ0EBAAAAAAAAQQEAAAAAAAABAAAAYUABAAAAAAAAQAEAAAAAAAABAAAAbT8BAAAAAAAAPwEAAAAAAAABAAAAYT4BAAAAAAAAPgEAAAAAAAABAAAARA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAEQBAAAAAAAARAEAAAAAAAAAAAAAAADwvw"
				],
				[
					22,
					2,
					"right_delete",
					null,
					"AgAAANoBAAAAAAAA2gEAAAAAAAAiAAAAU3RhdFN5c3RlbS5EYW1hZ2VUeXBlLkZpcmUsIERhbWFnZdoBAAAAAAAA2gEAAAAAAAABAAAALA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANoBAAAAAAAA/AEAAAAAAAAAAAAAAADwvw"
				],
				[
					23,
					1,
					"left_delete",
					null,
					"AQAAANkBAAAAAAAA2QEAAAAAAAABAAAAIA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANoBAAAAAAAA2gEAAAAAAAAAAAAAAADwvw"
				],
				[
					41,
					1,
					"insert",
					{
						"characters": "this,"
					},
					"BQAAANoBAAAAAAAA2wEAAAAAAAAAAAAA2wEAAAAAAADcAQAAAAAAAAAAAADcAQAAAAAAAN0BAAAAAAAAAAAAAN0BAAAAAAAA3gEAAAAAAAAAAAAA3gEAAAAAAADfAQAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANoBAAAAAAAA2gEAAAAAAAAAAAAAAADwvw"
				],
				[
					47,
					1,
					"cut",
					null,
					"AQAAAGYAAAAAAAAAZgAAAAAAAADHAQAAcHVibGljIGNsYXNzIEFwcGx5QnVybldlYXBvbkVmZmVjdCA6IEVmZmVjdERhdGEKewogICAgcHVibGljIGZsb2F0IFBlcmNlbnRhZ2VDaGFuY2U7CiAgICBwdWJsaWMgaW50IERhbWFnZTsKICAgIHB1YmxpYyBmbG9hdCBUaW1lOwogICAgCiAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBPbkF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCwgQ2hhcmFjdGVyRGF0YSB1c2VyLCByZWYgRWZmZWN0IGF0dGFja0VmZmVjdCkKICAgIHsKICAgICAgICBpZiAoUmFuZG9tLnZhbHVlIDwgKFBlcmNlbnRhZ2VDaGFuY2UgLyAxMDAuMGYpKQogICAgICAgIHsKICAgICAgICAgICAgRWxlbWVudGFsRWZmZWN0IGVmZmVjdCA9IG5ldyBFbGVtZW50YWxFZmZlY3QoVGltZSwgdGhpcywxLjBmKTsKCiAgICAgICAgICAgIHRhcmdldC5TdGF0cy5BZGRFbGVtZW50YWxFZmZlY3QoZWZmZWN0KTsKICAgICAgICB9CiAgICB9Cn0",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAC0CAAAAAAAAZgAAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "Assets/Standard Assets/Scripts/EffectData.cs",
			"settings":
			{
				"buffer_size": 8282,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADpFQAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBDcmVhdG9yS2l0Q29kZUludGVybmFsOwp1c2luZyBNeUJveDsKdXNpbmcgVW5pdHlFZGl0b3IuUGFja2FnZU1hbmFnZXI7CgpbQ3JlYXRlQXNzZXRNZW51KGZpbGVOYW1lID0gIkVmZmVjdERhdGEiLCBtZW51TmFtZSA9ICJEYXRhL0VmZmVjdERhdGEiLCBvcmRlciA9IDEpXQpwdWJsaWMgY2xhc3MgRWZmZWN0RGF0YSA6IFNjcmlwdGFibGVPYmplY3QKewoJcHVibGljIGVudW0gRWZmZWN0VHlwZQoJewoJCURBTUFHRSwKCQlFUVVJUCwKCQlIUENIQU5HRSwKCQlTUEVFRFVQLAoJCURJRywKCQlTVU1NT04KCX0KCXB1YmxpYyBFZmZlY3RUeXBlIFR5cGU7CglwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uOwoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5EQU1BR0UpXQoJcHVibGljIFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSBkYW1hZ2VUeXBlOwoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5EQU1BR0UpXQoJcHVibGljIGludCBkYW1hZ2VNb3VudDsKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuRVFVSVApXQoJcHVibGljIFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyIFN0YXRNb2RpZmllcjsKCXB1YmxpYyBpbnQgRWZmZWN0QW1vdW50OwoJcHVibGljIFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUgRWZmZWN0TW9kZTsKCglwdWJsaWMgdmlydHVhbCBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJewoJCXN3aXRjaCAoVHlwZSkKCQl7CgkJCWNhc2UgRWZmZWN0VHlwZS5FUVVJUDoKCQkJCXN0cmluZyBkZXNjID0gRGVzY3JpcHRpb24gKyAiXG4iOwoKCQkJCXN0cmluZyB1bml0ID0gU3RhdE1vZGlmaWVyLk1vZGlmaWVyTW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLlBlcmNlbnRhZ2UgPyAiJSIgOiAiIjsKCgkJCQlpZiAoU3RhdE1vZGlmaWVyLlN0YXRzLnN0cmVuZ3RoICE9IDApCgkJCQkJZGVzYyArPSAkIlN0ciA6IHtTdGF0TW9kaWZpZXIuU3RhdHMuc3RyZW5ndGg6KzA7LSN9e3VuaXR9XG4iOyAvL2Zvcm1hdCBzcGVjaWZpZXIgdG8gZm9yY2UgdGhlICsgc2lnbiB0byBhcHBlYXIKCQkJCWlmIChTdGF0TW9kaWZpZXIuU3RhdHMuYWdpbGl0eSAhPSAwKQoJCQkJCWRlc2MgKz0gJCJBZ2kgOiB7U3RhdE1vZGlmaWVyLlN0YXRzLmFnaWxpdHk6KzA7LSN9e3VuaXR9XG4iOwoJCQkJaWYgKFN0YXRNb2RpZmllci5TdGF0cy5kZWZlbnNlICE9IDApCgkJCQkJZGVzYyArPSAkIkRlZiA6IHtTdGF0TW9kaWZpZXIuU3RhdHMuZGVmZW5zZTorMDstI317dW5pdH1cbiI7CgkJCQlpZiAoU3RhdE1vZGlmaWVyLlN0YXRzLmhlYWx0aCAhPSAwKQoJCQkJCWRlc2MgKz0gJCJIUCA6IHtTdGF0TW9kaWZpZXIuU3RhdHMuaGVhbHRoOiswOy0jfXt1bml0fVxuIjsKCgkJCQlyZXR1cm4gZGVzYzsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBEZXNjcmlwdGlvbjsKCQl9Cgl9CgoJcHVibGljIGJvb2wgVGFrZShDaGFyYWN0ZXJEYXRhIHVzZXIsIHN0cmluZ1tdIHBhcmFtID0gbnVsbCwgR2FtZU9iamVjdCB0YXJnZXQgPSBudWxsKQoJewoJCXN3aXRjaCAoVHlwZSkKCQl7CgkJCWNhc2UgRWZmZWN0VHlwZS5EQU1BR0U6CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJY2FzZSBFZmZlY3RUeXBlLkhQQ0hBTkdFOgoJCQkJQ2hhcmFjdGVyRGF0YSBjaGFuZ2VyID0gdGFyZ2V0ID8gdGFyZ2V0LkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpIDogdXNlcjsKCQkJCWlmIChjaGFuZ2VyID09IG51bGwpIHJldHVybiBmYWxzZTsKCQkJCWludCBhZGRNb3VudDsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzBdLCBvdXQgYWRkTW91bnQpKQoJCQkJCXJldHVybiBDaGFuZ2VIZWFsdGgoY2hhbmdlciwgRWZmZWN0QW1vdW50ICsgYWRkTW91bnQpOwoJCQkJZWxzZSByZXR1cm4gQ2hhbmdlSGVhbHRoKGNoYW5nZXIsIEVmZmVjdEFtb3VudCk7CgkJCWNhc2UgRWZmZWN0VHlwZS5ESUc6CgkJCQlpZiAodGFyZ2V0ICE9IG51bGwpCgkJCQl7CgkJCQkJaW50IGRlZXAgPSAxOwoJCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzBdLCBvdXQgZGVlcCkpCgkJCQkJewoJCQkJCQlHYW1lTWFuYWdlci5JbnN0YW5jZS5UZXJyYWluVG9vbC5Mb3dlclRlcnJhaW4odGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiwgZGVlcCAqIDAuMDAwMjVmLCA1LCAxMCk7CgkJCQkJCXJldHVybiB0cnVlOwoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiBmYWxzZTsKCQkJY2FzZSBFZmZlY3RUeXBlLlNVTU1PTjoKCQkJCVZlY3RvcjMgcG9zID0gKHRhcmdldCAhPSBudWxsKSA/IHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gOiB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbjsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDApCgkJCQl7CgkJCQkJR2FtZU9iamVjdCBwYk9iaiA9IFJlc291cmNlcy5Mb2FkKHBhcmFtWzBdKSBhcyBHYW1lT2JqZWN0OwoJCQkJCWlmIChwYk9iaiAhPSBudWxsKSB7IEluc3RhbnRpYXRlKHBiT2JqLCBwb3MsIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSk7IHJldHVybiB0cnVlOyB9CgkJCQkJZWxzZSByZXR1cm4gZmFsc2U7CgkJCQl9CgkJCQlyZXR1cm4gZmFsc2U7CgkJCWRlZmF1bHQ6CgkJCQlEZWJ1Zy5Mb2dFcnJvcigiVGFrZSBhIGlsbGVnYWwgRWZmZWN0OiIgKyB0aGlzKTsKCQkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CgoJcHVibGljIHZvaWQgRXF1aXAoQ2hhcmFjdGVyRGF0YSB1c2VyKQoJewoJCWlmIChUeXBlICE9IEVmZmVjdFR5cGUuRVFVSVApIHJldHVybjsKCQlpZiAoU3RhdE1vZGlmaWVyICE9IG51bGwpIHVzZXIuU3RhdHMuQWRkTW9kaWZpZXIoU3RhdE1vZGlmaWVyKTsKCX0KCglwdWJsaWMgdm9pZCBVbkVxdWlwKENoYXJhY3RlckRhdGEgdXNlcikKCXsKCQlpZiAoVHlwZSAhPSBFZmZlY3RUeXBlLkVRVUlQKSByZXR1cm47CgkJaWYgKFN0YXRNb2RpZmllciAhPSBudWxsKSB1c2VyLlN0YXRzLlJlbW92ZU1vZGlmaWVyKFN0YXRNb2RpZmllcik7Cgl9CgoJYm9vbCBDaGFuZ2VIZWFsdGgoQ2hhcmFjdGVyRGF0YSB1c2VyLCBpbnQgdmFsdWUpCgl7CgkJaWYgKEVmZmVjdE1vZGUgPT0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5BYnNvbHV0ZSkKCQl7CgkJCXVzZXIuU3RhdHMuQ2hhbmdlSGVhbHRoKHZhbHVlKTsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCWVsc2UgaWYgKEVmZmVjdE1vZGUgPT0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5QZXJjZW50YWdlKQoJCXsKCQkJaWYgKHVzZXIuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSB1c2VyLlN0YXRzLnN0YXRzLmhlYWx0aCkKCQkJCXJldHVybiB0cnVlOwoJCQl1c2VyLlN0YXRzLkNoYW5nZUhlYWx0aChNYXRoZi5GbG9vclRvSW50KHZhbHVlIC8gMTAwLjBmICogdXNlci5TdGF0cy5zdGF0cy5oZWFsdGgpKTsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCglwdWJsaWMgY2xhc3MgVmFtcGlyaWNXZWFwb25FZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGludCBQZXJjZW50YWdlSGVhbHRoU3RvbGVuOwoKCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCQl7CgkJCXJldHVybiAkIkNvbnZlcnQge1BlcmNlbnRhZ2VIZWFsdGhTdG9sZW59JSBvZiBwaHlzaWNhbCBkYW1hZ2UgaW50byBIZWFsdGgiOwoJCX0KCgkJcHVibGljIHZvaWQgT25Qb3N0QXR0YWNrKENoYXJhY3RlckRhdGEgdGFyZ2V0LCBDaGFyYWN0ZXJEYXRhIHVzZXIsIERhbWFnZSBkYW1hZ2UpCgkJewoJCQlpbnQgYW1vdW50ID0gTWF0aGYuRmxvb3JUb0ludChkYW1hZ2UuR2V0RGFtYWdlKFN0YXRTeXN0ZW0uRGFtYWdlVHlwZS5QaHlzaWNhbCkgKiAoUGVyY2VudGFnZUhlYWx0aFN0b2xlbiAvIDEwMC4wZikpOwoJCQl1c2VyLlN0YXRzLkNoYW5nZUhlYWx0aChhbW91bnQpOwoJCX0KCX0KCgkvLyBwdWJsaWMgY2xhc3MgQWRkSGVhbHRoVXNhZ2VFZmZlY3QgOiBFZmZlY3REYXRhCgkvLyB7CgkvLyAJLy9bRm9ybWVybHlTZXJpYWxpemVkQXMoIkhlYWx0aFB1cmNlbnRhZ2VBbW91bnQiKV0KCS8vIAlwdWJsaWMgaW50IEhlYWx0aFBlcmNlbnRhZ2VBbW91bnQgPSAyMDsKCgkvLyAJcHVibGljIGJvb2wgT25Vc2UoQ2hhcmFjdGVyRGF0YSB1c2VyKQoJLy8gCXsKCS8vIAkJaWYgKHVzZXIuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSB1c2VyLlN0YXRzLnN0YXRzLmhlYWx0aCkKCS8vIAkJCXJldHVybiBmYWxzZTsKCgkvLyAJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkhlYWxpbmcsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkvLyAJCXVzZXIuU3RhdHMuQ2hhbmdlSGVhbHRoKE1hdGhmLkZsb29yVG9JbnQoSGVhbHRoUGVyY2VudGFnZUFtb3VudCAvIDEwMC4wZiAqIHVzZXIuU3RhdHMuc3RhdHMuaGVhbHRoKSk7CgoJLy8gCQlyZXR1cm4gdHJ1ZTsKCS8vIAl9CgkvLyB9CgoJcHVibGljIGNsYXNzIEluY3JlYXNlU3RyZW5ndGhFZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGZsb2F0IER1cmF0aW9uID0gMTAuMGY7CgkJcHVibGljIGludCBTdHJlbmd0aENoYW5nZSA9IDU7CgkJcHVibGljIFNwcml0ZSBFZmZlY3RTcHJpdGU7CgoJCXB1YmxpYyBib29sIE9uVXNlKENoYXJhY3RlckRhdGEgdXNlcikKCQl7CgkJCVN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyIG1vZGlmaWVyID0gbmV3IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyKCk7CgkJCW1vZGlmaWVyLk1vZGlmaWVyTW9kZSA9IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUuQWJzb2x1dGU7CgkJCW1vZGlmaWVyLlN0YXRzLnN0cmVuZ3RoID0gU3RyZW5ndGhDaGFuZ2U7CgoJCQlWRlhNYW5hZ2VyLlBsYXlWRlgoVkZYVHlwZS5TdHJvbmdlciwgdXNlci50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJdXNlci5TdGF0cy5BZGRUaW1lZE1vZGlmaWVyKG1vZGlmaWVyLCBEdXJhdGlvbiwgIlN0cmVuZ3RoQWRkIiwgRWZmZWN0U3ByaXRlKTsKCgkJCXJldHVybiB0cnVlOwoJCX0KCX0KCglwdWJsaWMgY2xhc3MgQXBwbHlCdXJuV2VhcG9uRWZmZWN0IDogRWZmZWN0RGF0YQoJewoJCXB1YmxpYyBmbG9hdCBQZXJjZW50YWdlQ2hhbmNlOwoJCXB1YmxpYyBpbnQgRGFtYWdlOwoJCXB1YmxpYyBmbG9hdCBUaW1lOwoKCQlwdWJsaWMgdm9pZCBPbkF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCwgQ2hhcmFjdGVyRGF0YSB1c2VyLCByZWYgRGFtYWdlIGRhbWFnZSkKCQl7CgkJCWlmIChVbml0eUVuZ2luZS5SYW5kb20udmFsdWUgPCAoUGVyY2VudGFnZUNoYW5jZSAvIDEwMC4wZikpCgkJCXsKCQkJCUVsZW1lbnRhbEVmZmVjdCBlZmZlY3QgPSBuZXcgRWxlbWVudGFsRWZmZWN0KFRpbWUsIHRoaXMsIDEuMGYpOwoKCQkJCXRhcmdldC5TdGF0cy5BZGRFbGVtZW50YWxFZmZlY3QoZWZmZWN0KTsKCQkJfQoJCX0KCX0KfQoAAAAAAAAAAPYVAAAAAAAAAAAAAA",
					"DQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					2,
					"left_delete",
					null,
					"AgAAALcAAAAAAAAAtwAAAAAAAAAhAAAAdXNpbmcgVW5pdHlFZGl0b3IuUGFja2FnZU1hbmFnZXI7tgAAAAAAAAC2AAAAAAAAAAEAAAAK",
					"DQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA2AAAAAAAAAC3AAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAD8FAAAdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIE15Qm94OwoKW0NyZWF0ZUFzc2V0TWVudShmaWxlTmFtZSA9ICJFZmZlY3REYXRhIiwgbWVudU5hbWUgPSAiRGF0YS9FZmZlY3REYXRhIiwgb3JkZXIgPSAxKV0KcHVibGljIGNsYXNzIEVmZmVjdERhdGEgOiBTY3JpcHRhYmxlT2JqZWN0CnsKCXB1YmxpYyBlbnVtIEVmZmVjdFR5cGUKCXsKCQlEQU1BR0UsCgkJSFBDSEFOR0UsCgkJU1BFRURVUCwKCQlESUcsCgkJU1VNTU9OLAoJCURST1BCT1gKCX0KCXB1YmxpYyBFZmZlY3RUeXBlIFR5cGU7CglwdWJsaWMgVkZYVHlwZSBUYWtlVkZYID0gVkZYVHlwZS5OT05FOwoJcHVibGljIHN0cmluZyBEZXNjcmlwdGlvbjsKCglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoVHlwZSksIGZhbHNlLCBFZmZlY3RUeXBlLkhQQ0hBTkdFKV0KCXB1YmxpYyBpbnQgRWZmZWN0QW1vdW50OwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuSFBDSEFOR0UpXQoJcHVibGljIFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUgRWZmZWN0TW9kZTsKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuRFJPUEJPWCldCglwdWJsaWMgRHJvcEJveCBkcm9wQm94OwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuREFNQUdFKV0KCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCgoJcHVibGljIHZpcnR1YWwgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCXsKCQlyZXR1cm4gRGVzY3JpcHRpb247Cgl9CgoJcHVibGljIGJvb2wgVGFrZShHYW1lT2JqZWN0IHVzZXIsIHN0cmluZ1tdIHBhcmFtID0gbnVsbCwgR2FtZU9iamVjdCB0YXJnZXQgPSBudWxsKQoJewoJCWJvb2wgc3VjY2VzcyA9IGZhbHNlOwoJCXN3aXRjaCAoVHlwZSkKCQl7CgkJCWNhc2UgRWZmZWN0VHlwZS5EQU1BR0U6CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkhQQ0hBTkdFOgoJCQkJQ2hhcmFjdGVyRGF0YSBjaGFuZ2VyID0gdGFyZ2V0ID8gdGFyZ2V0LkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpIDogdXNlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKTsKCQkJCWlmIChjaGFuZ2VyID09IG51bGwpIGJyZWFrOwoJCQkJaW50IGFkZE1vdW50OwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCAmJiBpbnQuVHJ5UGFyc2UocGFyYW1bMF0sIG91dCBhZGRNb3VudCkpCgkJCQkJc3VjY2VzcyA9IENoYW5nZUhlYWx0aChjaGFuZ2VyLCBFZmZlY3RBbW91bnQgKyBhZGRNb3VudCk7CgkJCQllbHNlIHN1Y2Nlc3MgPSBDaGFuZ2VIZWFsdGgoY2hhbmdlciwgRWZmZWN0QW1vdW50KTsKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRElHOgoJCQkJaWYgKHRhcmdldCAhPSBudWxsKQoJCQkJewoJCQkJCWludCBkZWVwID0gMTsKCQkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGRlZXApKQoJCQkJCXsKCQkJCQkJR2FtZU1hbmFnZXIuSW5zdGFuY2UuVGVycmFpblRvb2wuTG93ZXJUZXJyYWluKHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24sIGRlZXAgKiAwLjAwMDI1ZiwgNSwgMTApOwoJCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLlNVTU1PTjoKCQkJCVZlY3RvcjMgcG9zID0gKHRhcmdldCAhPSBudWxsKSA/IHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gOiB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbjsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDApCgkJCQl7CgkJCQkJR2FtZU9iamVjdCBwYk9iaiA9IFJlc291cmNlcy5Mb2FkKHBhcmFtWzBdKSBhcyBHYW1lT2JqZWN0OwoJCQkJCWlmIChwYk9iaiAhPSBudWxsKSB7IEluc3RhbnRpYXRlKHBiT2JqLCBwb3MsIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSk7IHN1Y2Nlc3MgPSB0cnVlOyB9CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkRST1BCT1g6CgkJCQlmb3JlYWNoICh2YXIgZHJvcCBpbiBkcm9wQm94LkdldERyb3BJdGVtKCkpCgkJCQl7CgkJCQkJRHJvcEl0ZW0odXNlci50cmFuc2Zvcm0ucG9zaXRpb24sIGRyb3AuaXRlbSwgZHJvcC5pdGVtTnVtKTsKCQkJCQlEZWJ1Zy5Mb2coImRyb3AgaXRlbSA6ICIgKyBkcm9wLml0ZW0gKyAiIG51bT0gIiArIGRyb3AuaXRlbU51bSk7CgkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQl9CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCURlYnVnLkxvZ0Vycm9yKCJUYWtlIGEgaWxsZWdhbCBFZmZlY3Q6IiArIHRoaXMpOwoJCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJaWYgKFRha2VWRlggIT0gVkZYVHlwZS5OT05FICYmIHN1Y2Nlc3MpIFZGWE1hbmFnZXIuUGxheVZGWChUYWtlVkZYLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJcmV0dXJuIHN1Y2Nlc3M7Cgl9CgoJYm9vbCBDaGFuZ2VIZWFsdGgoQ2hhcmFjdGVyRGF0YSB1c2VyLCBpbnQgdmFsdWUpCgl7CgkJaWYgKEVmZmVjdE1vZGUgPT0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5BYnNvbHV0ZSkKCQl7CgkJCXVzZXIuU3RhdHMuQ2hhbmdlSGVhbHRoKHZhbHVlKTsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCWVsc2UgaWYgKEVmZmVjdE1vZGUgPT0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5QZXJjZW50YWdlKQoJCXsKCQkJaWYgKHVzZXIuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSB1c2VyLlN0YXRzLnN0YXRzLmhlYWx0aCAmJiB2YWx1ZSA+IDApCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJdXNlci5TdGF0cy5DaGFuZ2VIZWFsdGgoTWF0aGYuRmxvb3JUb0ludCh2YWx1ZSAvIDEwMC4wZiAqIHVzZXIuU3RhdHMuc3RhdHMuaGVhbHRoKSk7CgkJCXJldHVybiB0cnVlOwoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgoJdm9pZCBEcm9wSXRlbShWZWN0b3IzIHBvcywgSXRlbSBpdGVtLCBpbnQgbnVtKQoJewoJCUdhbWVPYmplY3QgbG9vdE9iaiA9IFJlc291cmNlcy5Mb2FkKCJMb290IikgYXMgR2FtZU9iamVjdDsKCQlWZWN0b3IzIGRpcmVjdGlvbiA9IFF1YXRlcm5pb24uRXVsZXIoMCwgUmFuZG9tLlJhbmdlKDAsIDM2MCksIDApICogVmVjdG9yMy5yaWdodDsKCQlWZWN0b3IzIHNwYXduUG9zaXRpb24gPSBwb3MgKyBkaXJlY3Rpb24gKiBSYW5kb20uUmFuZ2UoMCwgMik7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBudW07IGkrKykKCQl7CgkJCUxvb3QgbG9vdCA9IEluc3RhbnRpYXRlKGxvb3RPYmosIHNwYXduUG9zaXRpb24sIFF1YXRlcm5pb24uRXVsZXIoMCwgMCwgMCkpLkdldENvbXBvbmVudDxMb290PigpOwoJCQlsb290Lkl0ZW0gPSBpdGVtOwoJCX0KCX0KCglwdWJsaWMgY2xhc3MgVmFtcGlyaWNXZWFwb25FZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGludCBQZXJjZW50YWdlSGVhbHRoU3RvbGVuOwoKCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCQl7CgkJCXJldHVybiAkIkNvbnZlcnQge1BlcmNlbnRhZ2VIZWFsdGhTdG9sZW59JSBvZiBwaHlzaWNhbCBkYW1hZ2UgaW50byBIZWFsdGgiOwoJCX0KCgkJcHVibGljIHZvaWQgT25Qb3N0QXR0YWNrKENoYXJhY3RlckRhdGEgdGFyZ2V0LCBDaGFyYWN0ZXJEYXRhIHVzZXIsIERhbWFnZSBkYW1hZ2UpCgkJewoJCQlpbnQgYW1vdW50ID0gTWF0aGYuRmxvb3JUb0ludChkYW1hZ2UuR2V0RGFtYWdlKFN0YXRTeXN0ZW0uRGFtYWdlVHlwZS5QaHlzaWNhbCkgKiAoUGVyY2VudGFnZUhlYWx0aFN0b2xlbiAvIDEwMC4wZikpOwoJCQl1c2VyLlN0YXRzLkNoYW5nZUhlYWx0aChhbW91bnQpOwoJCX0KCX0KCgkvLyBwdWJsaWMgY2xhc3MgQWRkSGVhbHRoVXNhZ2VFZmZlY3QgOiBFZmZlY3REYXRhCgkvLyB7CgkvLyAJLy9bRm9ybWVybHlTZXJpYWxpemVkQXMoIkhlYWx0aFB1cmNlbnRhZ2VBbW91bnQiKV0KCS8vIAlwdWJsaWMgaW50IEhlYWx0aFBlcmNlbnRhZ2VBbW91bnQgPSAyMDsKCgkvLyAJcHVibGljIGJvb2wgT25Vc2UoQ2hhcmFjdGVyRGF0YSB1c2VyKQoJLy8gCXsKCS8vIAkJaWYgKHVzZXIuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSB1c2VyLlN0YXRzLnN0YXRzLmhlYWx0aCkKCS8vIAkJCXJldHVybiBmYWxzZTsKCgkvLyAJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkhlYWxpbmcsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkvLyAJCXVzZXIuU3RhdHMuQ2hhbmdlSGVhbHRoKE1hdGhmLkZsb29yVG9JbnQoSGVhbHRoUGVyY2VudGFnZUFtb3VudCAvIDEwMC4wZiAqIHVzZXIuU3RhdHMuc3RhdHMuaGVhbHRoKSk7CgoJLy8gCQlyZXR1cm4gdHJ1ZTsKCS8vIAl9CgkvLyB9CgoJcHVibGljIGNsYXNzIEluY3JlYXNlU3RyZW5ndGhFZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGZsb2F0IER1cmF0aW9uID0gMTAuMGY7CgkJcHVibGljIGludCBTdHJlbmd0aENoYW5nZSA9IDU7CgkJcHVibGljIFNwcml0ZSBFZmZlY3RTcHJpdGU7CgoJCXB1YmxpYyBib29sIE9uVXNlKENoYXJhY3RlckRhdGEgdXNlcikKCQl7CgkJCVN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyIG1vZGlmaWVyID0gbmV3IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyKCk7CgkJCW1vZGlmaWVyLk1vZGlmaWVyTW9kZSA9IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUuQWJzb2x1dGU7CgkJCW1vZGlmaWVyLlN0YXRzLnN0cmVuZ3RoID0gU3RyZW5ndGhDaGFuZ2U7CgoJCQlWRlhNYW5hZ2VyLlBsYXlWRlgoVkZYVHlwZS5TdHJvbmdlciwgdXNlci50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJdXNlci5TdGF0cy5BZGRUaW1lZE1vZGlmaWVyKG1vZGlmaWVyLCBEdXJhdGlvbiwgIlN0cmVuZ3RoQWRkIiwgRWZmZWN0U3ByaXRlKTsKCgkJCXJldHVybiB0cnVlOwoJCX0KCX0KCglwdWJsaWMgY2xhc3MgQXBwbHlCdXJuV2VhcG9uRWZmZWN0IDogRWZmZWN0RGF0YQoJewoJCXB1YmxpYyBmbG9hdCBQZXJjZW50YWdlQ2hhbmNlOwoJCXB1YmxpYyBpbnQgRGFtYWdlOwoJCXB1YmxpYyBmbG9hdCBUaW1lOwoKCQlwdWJsaWMgdm9pZCBPbkF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCwgQ2hhcmFjdGVyRGF0YSB1c2VyLCByZWYgRGFtYWdlIGRhbWFnZSkKCQl7CgkJCWlmIChVbml0eUVuZ2luZS5SYW5kb20udmFsdWUgPCAoUGVyY2VudGFnZUNoYW5jZSAvIDEwMC4wZikpCgkJCXsKCQkJCUVsZW1lbnRhbEVmZmVjdCBlZmZlY3QgPSBuZXcgRWxlbWVudGFsRWZmZWN0KFRpbWUsIHRoaXMsIDEuMGYpOwoKCQkJCXRhcmdldC5TdGF0cy5BZGRFbGVtZW50YWxFZmZlY3QoZWZmZWN0KTsKCQkJfQoJCX0KCX0KfQoAAAAAAAAAAP4UAAAAAAAAAAAAAAAAAAAAAAAA/hQAAAAAAAAAAAAA",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD+FAAAdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIE15Qm94OwoKW0NyZWF0ZUFzc2V0TWVudShmaWxlTmFtZSA9ICJFZmZlY3REYXRhIiwgbWVudU5hbWUgPSAiRGF0YS9FZmZlY3REYXRhIiwgb3JkZXIgPSAxKV0KcHVibGljIGNsYXNzIEVmZmVjdERhdGEgOiBTY3JpcHRhYmxlT2JqZWN0CnsKCXB1YmxpYyBlbnVtIEVmZmVjdFR5cGUKCXsKCQlEQU1BR0UsCgkJSFBDSEFOR0UsCgkJU1BFRURVUCwKCQlESUcsCgkJU1VNTU9OLAoJCURST1BCT1gKCX0KCXB1YmxpYyBFZmZlY3RUeXBlIFR5cGU7CglwdWJsaWMgVkZYVHlwZSBUYWtlVkZYID0gVkZYVHlwZS5OT05FOwoJcHVibGljIHN0cmluZyBEZXNjcmlwdGlvbjsKCglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoVHlwZSksIGZhbHNlLCBFZmZlY3RUeXBlLkhQQ0hBTkdFKV0KCXB1YmxpYyBpbnQgRWZmZWN0QW1vdW50OwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuSFBDSEFOR0UpXQoJcHVibGljIFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUgRWZmZWN0TW9kZTsKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuRFJPUEJPWCldCglwdWJsaWMgRHJvcEJveCBkcm9wQm94OwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuREFNQUdFKV0KCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCgoJcHVibGljIHZpcnR1YWwgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCXsKCQlyZXR1cm4gRGVzY3JpcHRpb247Cgl9CgoJcHVibGljIGJvb2wgVGFrZShHYW1lT2JqZWN0IHVzZXIsIHN0cmluZ1tdIHBhcmFtID0gbnVsbCwgR2FtZU9iamVjdCB0YXJnZXQgPSBudWxsKQoJewoJCWJvb2wgc3VjY2VzcyA9IGZhbHNlOwoJCXN3aXRjaCAoVHlwZSkKCQl7CgkJCWNhc2UgRWZmZWN0VHlwZS5EQU1BR0U6CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkhQQ0hBTkdFOgoJCQkJQ2hhcmFjdGVyRGF0YSBjaGFuZ2VyID0gdGFyZ2V0ID8gdGFyZ2V0LkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpIDogdXNlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKTsKCQkJCWlmIChjaGFuZ2VyID09IG51bGwpIGJyZWFrOwoJCQkJaW50IGFkZE1vdW50OwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCAmJiBpbnQuVHJ5UGFyc2UocGFyYW1bMF0sIG91dCBhZGRNb3VudCkpCgkJCQkJc3VjY2VzcyA9IENoYW5nZUhlYWx0aChjaGFuZ2VyLCBFZmZlY3RBbW91bnQgKyBhZGRNb3VudCk7CgkJCQllbHNlIHN1Y2Nlc3MgPSBDaGFuZ2VIZWFsdGgoY2hhbmdlciwgRWZmZWN0QW1vdW50KTsKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRElHOgoJCQkJaWYgKHRhcmdldCAhPSBudWxsKQoJCQkJewoJCQkJCWludCBkZWVwID0gMTsKCQkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGRlZXApKQoJCQkJCXsKCQkJCQkJR2FtZU1hbmFnZXIuSW5zdGFuY2UuVGVycmFpblRvb2wuTG93ZXJUZXJyYWluKHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24sIGRlZXAgKiAwLjAwMDI1ZiwgNSwgMTApOwoJCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLlNVTU1PTjoKCQkJCVZlY3RvcjMgcG9zID0gKHRhcmdldCAhPSBudWxsKSA/IHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gOiB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbjsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDApCgkJCQl7CgkJCQkJR2FtZU9iamVjdCBwYk9iaiA9IFJlc291cmNlcy5Mb2FkKHBhcmFtWzBdKSBhcyBHYW1lT2JqZWN0OwoJCQkJCWlmIChwYk9iaiAhPSBudWxsKSB7IEluc3RhbnRpYXRlKHBiT2JqLCBwb3MsIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSk7IHN1Y2Nlc3MgPSB0cnVlOyB9CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkRST1BCT1g6CgkJCQlmb3JlYWNoICh2YXIgZHJvcCBpbiBkcm9wQm94LkdldERyb3BJdGVtKCkpCgkJCQl7CgkJCQkJRHJvcEl0ZW0odXNlci50cmFuc2Zvcm0ucG9zaXRpb24sIGRyb3AuaXRlbSwgZHJvcC5pdGVtTnVtKTsKCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRHJvcCIsICQie2Ryb3AuaXRlbS5JdGVtTmFtZX14e2Ryb3AuaXRlbU51bX0iKTsKCQkJCX0KCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJRGVidWcuTG9nRXJyb3IoIlRha2UgYSBpbGxlZ2FsIEVmZmVjdDoiICsgdGhpcyk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlpZiAoVGFrZVZGWCAhPSBWRlhUeXBlLk5PTkUgJiYgc3VjY2VzcykgVkZYTWFuYWdlci5QbGF5VkZYKFRha2VWRlgsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCQlyZXR1cm4gc3VjY2VzczsKCX0KCglib29sIENoYW5nZUhlYWx0aChDaGFyYWN0ZXJEYXRhIHVzZXIsIGludCB2YWx1ZSkKCXsKCQlpZiAoRWZmZWN0TW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLkFic29sdXRlKQoJCXsKCQkJdXNlci5TdGF0cy5DaGFuZ2VIZWFsdGgodmFsdWUpOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJZWxzZSBpZiAoRWZmZWN0TW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLlBlcmNlbnRhZ2UpCgkJewoJCQlpZiAodXNlci5TdGF0cy5DdXJyZW50SGVhbHRoID09IHVzZXIuU3RhdHMuc3RhdHMuaGVhbHRoICYmIHZhbHVlID4gMCkKCQkJCXJldHVybiB0cnVlOwoJCQl1c2VyLlN0YXRzLkNoYW5nZUhlYWx0aChNYXRoZi5GbG9vclRvSW50KHZhbHVlIC8gMTAwLjBmICogdXNlci5TdGF0cy5zdGF0cy5oZWFsdGgpKTsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCgl2b2lkIERyb3BJdGVtKFZlY3RvcjMgcG9zLCBJdGVtIGl0ZW0sIGludCBudW0pCgl7CgkJR2FtZU9iamVjdCBsb290T2JqID0gUmVzb3VyY2VzLkxvYWQoIkxvb3QiKSBhcyBHYW1lT2JqZWN0OwoJCVZlY3RvcjMgZGlyZWN0aW9uID0gUXVhdGVybmlvbi5FdWxlcigwLCBSYW5kb20uUmFuZ2UoMCwgMzYwKSwgMCkgKiBWZWN0b3IzLnJpZ2h0OwoJCVZlY3RvcjMgc3Bhd25Qb3NpdGlvbiA9IHBvcyArIGRpcmVjdGlvbiAqIFJhbmRvbS5SYW5nZSgwLCAyKTsKCQlmb3IgKGludCBpID0gMDsgaSA8IG51bTsgaSsrKQoJCXsKCQkJTG9vdCBsb290ID0gSW5zdGFudGlhdGUobG9vdE9iaiwgc3Bhd25Qb3NpdGlvbiwgUXVhdGVybmlvbi5FdWxlcigwLCAwLCAwKSkuR2V0Q29tcG9uZW50PExvb3Q+KCk7CgkJCWxvb3QuSXRlbSA9IGl0ZW07CgkJfQoJfQoKCXB1YmxpYyBjbGFzcyBWYW1waXJpY1dlYXBvbkVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgaW50IFBlcmNlbnRhZ2VIZWFsdGhTdG9sZW47CgoJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJCXsKCQkJcmV0dXJuICQiQ29udmVydCB7UGVyY2VudGFnZUhlYWx0aFN0b2xlbn0lIG9mIHBoeXNpY2FsIGRhbWFnZSBpbnRvIEhlYWx0aCI7CgkJfQoKCQlwdWJsaWMgdm9pZCBPblBvc3RBdHRhY2soQ2hhcmFjdGVyRGF0YSB0YXJnZXQsIENoYXJhY3RlckRhdGEgdXNlciwgRGFtYWdlIGRhbWFnZSkKCQl7CgkJCWludCBhbW91bnQgPSBNYXRoZi5GbG9vclRvSW50KGRhbWFnZS5HZXREYW1hZ2UoU3RhdFN5c3RlbS5EYW1hZ2VUeXBlLlBoeXNpY2FsKSAqIChQZXJjZW50YWdlSGVhbHRoU3RvbGVuIC8gMTAwLjBmKSk7CgkJCXVzZXIuU3RhdHMuQ2hhbmdlSGVhbHRoKGFtb3VudCk7CgkJfQoJfQoKCS8vIHB1YmxpYyBjbGFzcyBBZGRIZWFsdGhVc2FnZUVmZmVjdCA6IEVmZmVjdERhdGEKCS8vIHsKCS8vIAkvL1tGb3JtZXJseVNlcmlhbGl6ZWRBcygiSGVhbHRoUHVyY2VudGFnZUFtb3VudCIpXQoJLy8gCXB1YmxpYyBpbnQgSGVhbHRoUGVyY2VudGFnZUFtb3VudCA9IDIwOwoKCS8vIAlwdWJsaWMgYm9vbCBPblVzZShDaGFyYWN0ZXJEYXRhIHVzZXIpCgkvLyAJewoJLy8gCQlpZiAodXNlci5TdGF0cy5DdXJyZW50SGVhbHRoID09IHVzZXIuU3RhdHMuc3RhdHMuaGVhbHRoKQoJLy8gCQkJcmV0dXJuIGZhbHNlOwoKCS8vIAkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuSGVhbGluZywgdXNlci50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCS8vIAkJdXNlci5TdGF0cy5DaGFuZ2VIZWFsdGgoTWF0aGYuRmxvb3JUb0ludChIZWFsdGhQZXJjZW50YWdlQW1vdW50IC8gMTAwLjBmICogdXNlci5TdGF0cy5zdGF0cy5oZWFsdGgpKTsKCgkvLyAJCXJldHVybiB0cnVlOwoJLy8gCX0KCS8vIH0KCglwdWJsaWMgY2xhc3MgSW5jcmVhc2VTdHJlbmd0aEVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgZmxvYXQgRHVyYXRpb24gPSAxMC4wZjsKCQlwdWJsaWMgaW50IFN0cmVuZ3RoQ2hhbmdlID0gNTsKCQlwdWJsaWMgU3ByaXRlIEVmZmVjdFNwcml0ZTsKCgkJcHVibGljIGJvb2wgT25Vc2UoQ2hhcmFjdGVyRGF0YSB1c2VyKQoJCXsKCQkJU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIgbW9kaWZpZXIgPSBuZXcgU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIoKTsKCQkJbW9kaWZpZXIuTW9kaWZpZXJNb2RlID0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5BYnNvbHV0ZTsKCQkJbW9kaWZpZXIuU3RhdHMuc3RyZW5ndGggPSBTdHJlbmd0aENoYW5nZTsKCgkJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLlN0cm9uZ2VyLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJCQl1c2VyLlN0YXRzLkFkZFRpbWVkTW9kaWZpZXIobW9kaWZpZXIsIER1cmF0aW9uLCAiU3RyZW5ndGhBZGQiLCBFZmZlY3RTcHJpdGUpOwoKCQkJcmV0dXJuIHRydWU7CgkJfQoJfQoKCXB1YmxpYyBjbGFzcyBBcHBseUJ1cm5XZWFwb25FZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGZsb2F0IFBlcmNlbnRhZ2VDaGFuY2U7CgkJcHVibGljIGludCBEYW1hZ2U7CgkJcHVibGljIGZsb2F0IFRpbWU7CgoJCXB1YmxpYyB2b2lkIE9uQXR0YWNrKENoYXJhY3RlckRhdGEgdGFyZ2V0LCBDaGFyYWN0ZXJEYXRhIHVzZXIsIHJlZiBEYW1hZ2UgZGFtYWdlKQoJCXsKCQkJaWYgKFVuaXR5RW5naW5lLlJhbmRvbS52YWx1ZSA8IChQZXJjZW50YWdlQ2hhbmNlIC8gMTAwLjBmKSkKCQkJewoJCQkJRWxlbWVudGFsRWZmZWN0IGVmZmVjdCA9IG5ldyBFbGVtZW50YWxFZmZlY3QoVGltZSwgdGhpcywgMS4wZik7CgoJCQkJdGFyZ2V0LlN0YXRzLkFkZEVsZW1lbnRhbEVmZmVjdChlZmZlY3QpOwoJCQl9CgkJfQoJfQp9CgAAAAAAAAAAhRUAAAAAAAAAAAAA",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACFFQAAdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIE15Qm94OwoKW0NyZWF0ZUFzc2V0TWVudShmaWxlTmFtZSA9ICJFZmZlY3REYXRhIiwgbWVudU5hbWUgPSAiRGF0YS9FZmZlY3REYXRhIiwgb3JkZXIgPSAxKV0KcHVibGljIGNsYXNzIEVmZmVjdERhdGEgOiBTY3JpcHRhYmxlT2JqZWN0CnsKCXB1YmxpYyBlbnVtIEVmZmVjdFR5cGUKCXsKCQlEQU1BR0UsCgkJSFBDSEFOR0UsCgkJU1BFRURVUCwKCQlESUcsCgkJU1VNTU9OLAoJCURST1BCT1gsCgkJQURER09BTAoJfQoJcHVibGljIEVmZmVjdFR5cGUgVHlwZTsKCXB1YmxpYyBWRlhUeXBlIFRha2VWRlggPSBWRlhUeXBlLk5PTkU7CglwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uOwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuSFBDSEFOR0UpXQoJcHVibGljIGludCBFZmZlY3RBbW91bnQ7CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5IUENIQU5HRSldCglwdWJsaWMgU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZSBFZmZlY3RNb2RlOwoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5EUk9QQk9YKV0KCXB1YmxpYyBEcm9wQm94IGRyb3BCb3g7CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5EQU1BR0UpXQoJcHVibGljIFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSBkYW1hZ2VUeXBlOwoKCglwdWJsaWMgdmlydHVhbCBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJewoJCXJldHVybiBEZXNjcmlwdGlvbjsKCX0KCglwdWJsaWMgYm9vbCBUYWtlKEdhbWVPYmplY3QgdXNlciwgc3RyaW5nW10gcGFyYW0gPSBudWxsLCBHYW1lT2JqZWN0IHRhcmdldCA9IG51bGwpCgl7CgkJYm9vbCBzdWNjZXNzID0gZmFsc2U7CgkJc3dpdGNoIChUeXBlKQoJCXsKCQkJY2FzZSBFZmZlY3RUeXBlLkRBTUFHRToKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuSFBDSEFOR0U6CgkJCQlDaGFyYWN0ZXJEYXRhIGNoYW5nZXIgPSB0YXJnZXQgPyB0YXJnZXQuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCkgOiB1c2VyLkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCQkJaWYgKGNoYW5nZXIgPT0gbnVsbCkgYnJlYWs7CgkJCQlpbnQgYWRkTW91bnQ7CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGFkZE1vdW50KSkKCQkJCQlzdWNjZXNzID0gQ2hhbmdlSGVhbHRoKGNoYW5nZXIsIEVmZmVjdEFtb3VudCArIGFkZE1vdW50KTsKCQkJCWVsc2Ugc3VjY2VzcyA9IENoYW5nZUhlYWx0aChjaGFuZ2VyLCBFZmZlY3RBbW91bnQpOwoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5ESUc6CgkJCQlpZiAodGFyZ2V0ICE9IG51bGwpCgkJCQl7CgkJCQkJaW50IGRlZXAgPSAxOwoJCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzBdLCBvdXQgZGVlcCkpCgkJCQkJewoJCQkJCQlHYW1lTWFuYWdlci5JbnN0YW5jZS5UZXJyYWluVG9vbC5Mb3dlclRlcnJhaW4odGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiwgZGVlcCAqIDAuMDAwMjVmLCA1LCAxMCk7CgkJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJCX0KCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuU1VNTU9OOgoJCQkJVmVjdG9yMyBwb3MgPSAodGFyZ2V0ICE9IG51bGwpID8gdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiA6IHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCkKCQkJCXsKCQkJCQlHYW1lT2JqZWN0IHBiT2JqID0gUmVzb3VyY2VzLkxvYWQocGFyYW1bMF0pIGFzIEdhbWVPYmplY3Q7CgkJCQkJaWYgKHBiT2JqICE9IG51bGwpIHsgSW5zdGFudGlhdGUocGJPYmosIHBvcywgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKTsgc3VjY2VzcyA9IHRydWU7IH0KCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRFJPUEJPWDoKCQkJCWZvcmVhY2ggKHZhciBkcm9wIGluIGRyb3BCb3guR2V0RHJvcEl0ZW0oKSkKCQkJCXsKCQkJCQlEcm9wSXRlbSh1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbiwgZHJvcC5pdGVtLCBkcm9wLml0ZW1OdW0pOwoJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJCUhlbHBlcnMuTG9nKHRoaXMsICJEcm9wIiwgJCJ7ZHJvcC5pdGVtLkl0ZW1OYW1lfXh7ZHJvcC5pdGVtTnVtfSIpOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5BRERHT0FMOgoKCQkJCS8vR2FtZU1hbmFnZXIuR2FtZUdvYWwuQWRkR29hbCh1c2VyLkdldENvbXBvbmVudDxTdGF0aXN0aWNzSGFuZGxlPigpLCBuZXdHb2FsKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJRGVidWcuTG9nRXJyb3IoIlRha2UgYSBpbGxlZ2FsIEVmZmVjdDoiICsgdGhpcyk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlpZiAoVGFrZVZGWCAhPSBWRlhUeXBlLk5PTkUgJiYgc3VjY2VzcykgVkZYTWFuYWdlci5QbGF5VkZYKFRha2VWRlgsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCQlyZXR1cm4gc3VjY2VzczsKCX0KCglib29sIENoYW5nZUhlYWx0aChDaGFyYWN0ZXJEYXRhIHVzZXIsIGludCB2YWx1ZSkKCXsKCQlpZiAoRWZmZWN0TW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLkFic29sdXRlKQoJCXsKCQkJdXNlci5TdGF0cy5DaGFuZ2VIZWFsdGgodmFsdWUpOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJZWxzZSBpZiAoRWZmZWN0TW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLlBlcmNlbnRhZ2UpCgkJewoJCQlpZiAodXNlci5TdGF0cy5DdXJyZW50SGVhbHRoID09IHVzZXIuU3RhdHMuc3RhdHMuaGVhbHRoICYmIHZhbHVlID4gMCkKCQkJCXJldHVybiB0cnVlOwoJCQl1c2VyLlN0YXRzLkNoYW5nZUhlYWx0aChNYXRoZi5GbG9vclRvSW50KHZhbHVlIC8gMTAwLjBmICogdXNlci5TdGF0cy5zdGF0cy5oZWFsdGgpKTsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCgl2b2lkIERyb3BJdGVtKFZlY3RvcjMgcG9zLCBJdGVtIGl0ZW0sIGludCBudW0pCgl7CgkJR2FtZU9iamVjdCBsb290T2JqID0gUmVzb3VyY2VzLkxvYWQoIkxvb3QiKSBhcyBHYW1lT2JqZWN0OwoJCVZlY3RvcjMgZGlyZWN0aW9uID0gUXVhdGVybmlvbi5FdWxlcigwLCBSYW5kb20uUmFuZ2UoMCwgMzYwKSwgMCkgKiBWZWN0b3IzLnJpZ2h0OwoJCVZlY3RvcjMgc3Bhd25Qb3NpdGlvbiA9IHBvcyArIGRpcmVjdGlvbiAqIFJhbmRvbS5SYW5nZSgwLCAyKTsKCQlmb3IgKGludCBpID0gMDsgaSA8IG51bTsgaSsrKQoJCXsKCQkJTG9vdCBsb290ID0gSW5zdGFudGlhdGUobG9vdE9iaiwgc3Bhd25Qb3NpdGlvbiwgUXVhdGVybmlvbi5FdWxlcigwLCAwLCAwKSkuR2V0Q29tcG9uZW50PExvb3Q+KCk7CgkJCWxvb3QuSXRlbSA9IGl0ZW07CgkJfQoJfQoKCXB1YmxpYyBjbGFzcyBWYW1waXJpY1dlYXBvbkVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgaW50IFBlcmNlbnRhZ2VIZWFsdGhTdG9sZW47CgoJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJCXsKCQkJcmV0dXJuICQiQ29udmVydCB7UGVyY2VudGFnZUhlYWx0aFN0b2xlbn0lIG9mIHBoeXNpY2FsIGRhbWFnZSBpbnRvIEhlYWx0aCI7CgkJfQoKCQlwdWJsaWMgdm9pZCBPblBvc3RBdHRhY2soQ2hhcmFjdGVyRGF0YSB0YXJnZXQsIENoYXJhY3RlckRhdGEgdXNlciwgRGFtYWdlIGRhbWFnZSkKCQl7CgkJCWludCBhbW91bnQgPSBNYXRoZi5GbG9vclRvSW50KGRhbWFnZS5HZXREYW1hZ2UoU3RhdFN5c3RlbS5EYW1hZ2VUeXBlLlBoeXNpY2FsKSAqIChQZXJjZW50YWdlSGVhbHRoU3RvbGVuIC8gMTAwLjBmKSk7CgkJCXVzZXIuU3RhdHMuQ2hhbmdlSGVhbHRoKGFtb3VudCk7CgkJfQoJfQoKCS8vIHB1YmxpYyBjbGFzcyBBZGRIZWFsdGhVc2FnZUVmZmVjdCA6IEVmZmVjdERhdGEKCS8vIHsKCS8vIAkvL1tGb3JtZXJseVNlcmlhbGl6ZWRBcygiSGVhbHRoUHVyY2VudGFnZUFtb3VudCIpXQoJLy8gCXB1YmxpYyBpbnQgSGVhbHRoUGVyY2VudGFnZUFtb3VudCA9IDIwOwoKCS8vIAlwdWJsaWMgYm9vbCBPblVzZShDaGFyYWN0ZXJEYXRhIHVzZXIpCgkvLyAJewoJLy8gCQlpZiAodXNlci5TdGF0cy5DdXJyZW50SGVhbHRoID09IHVzZXIuU3RhdHMuc3RhdHMuaGVhbHRoKQoJLy8gCQkJcmV0dXJuIGZhbHNlOwoKCS8vIAkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuSGVhbGluZywgdXNlci50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCS8vIAkJdXNlci5TdGF0cy5DaGFuZ2VIZWFsdGgoTWF0aGYuRmxvb3JUb0ludChIZWFsdGhQZXJjZW50YWdlQW1vdW50IC8gMTAwLjBmICogdXNlci5TdGF0cy5zdGF0cy5oZWFsdGgpKTsKCgkvLyAJCXJldHVybiB0cnVlOwoJLy8gCX0KCS8vIH0KCglwdWJsaWMgY2xhc3MgSW5jcmVhc2VTdHJlbmd0aEVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgZmxvYXQgRHVyYXRpb24gPSAxMC4wZjsKCQlwdWJsaWMgaW50IFN0cmVuZ3RoQ2hhbmdlID0gNTsKCQlwdWJsaWMgU3ByaXRlIEVmZmVjdFNwcml0ZTsKCgkJcHVibGljIGJvb2wgT25Vc2UoQ2hhcmFjdGVyRGF0YSB1c2VyKQoJCXsKCQkJU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIgbW9kaWZpZXIgPSBuZXcgU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIoKTsKCQkJbW9kaWZpZXIuTW9kaWZpZXJNb2RlID0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5BYnNvbHV0ZTsKCQkJbW9kaWZpZXIuU3RhdHMuc3RyZW5ndGggPSBTdHJlbmd0aENoYW5nZTsKCgkJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLlN0cm9uZ2VyLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJCQl1c2VyLlN0YXRzLkFkZFRpbWVkTW9kaWZpZXIobW9kaWZpZXIsIER1cmF0aW9uLCAiU3RyZW5ndGhBZGQiLCBFZmZlY3RTcHJpdGUpOwoKCQkJcmV0dXJuIHRydWU7CgkJfQoJfQoKCXB1YmxpYyBjbGFzcyBBcHBseUJ1cm5XZWFwb25FZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGZsb2F0IFBlcmNlbnRhZ2VDaGFuY2U7CgkJcHVibGljIGludCBEYW1hZ2U7CgkJcHVibGljIGZsb2F0IFRpbWU7CgoJCXB1YmxpYyB2b2lkIE9uQXR0YWNrKENoYXJhY3RlckRhdGEgdGFyZ2V0LCBDaGFyYWN0ZXJEYXRhIHVzZXIsIHJlZiBEYW1hZ2UgZGFtYWdlKQoJCXsKCQkJaWYgKFVuaXR5RW5naW5lLlJhbmRvbS52YWx1ZSA8IChQZXJjZW50YWdlQ2hhbmNlIC8gMTAwLjBmKSkKCQkJewoJCQkJRWxlbWVudGFsRWZmZWN0IGVmZmVjdCA9IG5ldyBFbGVtZW50YWxFZmZlY3QoVGltZSwgdGhpcywgMS4wZik7CgoJCQkJdGFyZ2V0LlN0YXRzLkFkZEVsZW1lbnRhbEVmZmVjdChlZmZlY3QpOwoJCQl9CgkJfQoJfQp9CgAAAAAAAAAAxhUAAAAAAAAAAAAA",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					3,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAADGFQAAdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIE15Qm94OwoKW0NyZWF0ZUFzc2V0TWVudShmaWxlTmFtZSA9ICJFZmZlY3REYXRhIiwgbWVudU5hbWUgPSAiRGF0YS9FZmZlY3REYXRhIiwgb3JkZXIgPSAxKV0KcHVibGljIGNsYXNzIEVmZmVjdERhdGEgOiBTY3JpcHRhYmxlT2JqZWN0CnsKCXB1YmxpYyBlbnVtIEVmZmVjdFR5cGUKCXsKCQlEQU1BR0UsCgkJSFBDSEFOR0UsCgkJU1BFRURVUCwKCQlESUcsCgkJU1VNTU9OLAoJCURST1BCT1gsCgkJQURER09BTAoJfQoJcHVibGljIEVmZmVjdFR5cGUgVHlwZTsKCXB1YmxpYyBWRlhUeXBlIFRha2VWRlggPSBWRlhUeXBlLk5PTkU7CglwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uOwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuSFBDSEFOR0UpXQoJcHVibGljIGludCBFZmZlY3RBbW91bnQ7CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5IUENIQU5HRSldCglwdWJsaWMgU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZSBFZmZlY3RNb2RlOwoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5EUk9QQk9YKV0KCXB1YmxpYyBEcm9wQm94IGRyb3BCb3g7CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5EQU1BR0UpXQoJcHVibGljIFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSBkYW1hZ2VUeXBlOwoKCglwdWJsaWMgdmlydHVhbCBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJewoJCXJldHVybiBEZXNjcmlwdGlvbjsKCX0KCglwdWJsaWMgYm9vbCBUYWtlKEdhbWVPYmplY3QgdXNlciwgc3RyaW5nW10gcGFyYW0gPSBudWxsLCBHYW1lT2JqZWN0IHRhcmdldCA9IG51bGwpCgl7CgkJYm9vbCBzdWNjZXNzID0gZmFsc2U7CgkJc3dpdGNoIChUeXBlKQoJCXsKCQkJY2FzZSBFZmZlY3RUeXBlLkRBTUFHRToKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuSFBDSEFOR0U6CgkJCQlDaGFyYWN0ZXJEYXRhIGNoYW5nZXIgPSB0YXJnZXQgPyB0YXJnZXQuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCkgOiB1c2VyLkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCQkJaWYgKGNoYW5nZXIgPT0gbnVsbCkgYnJlYWs7CgkJCQlpbnQgYWRkTW91bnQ7CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGFkZE1vdW50KSkKCQkJCQlzdWNjZXNzID0gQ2hhbmdlSGVhbHRoKGNoYW5nZXIsIEVmZmVjdEFtb3VudCArIGFkZE1vdW50KTsKCQkJCWVsc2Ugc3VjY2VzcyA9IENoYW5nZUhlYWx0aChjaGFuZ2VyLCBFZmZlY3RBbW91bnQpOwoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5ESUc6CgkJCQlpZiAodGFyZ2V0ICE9IG51bGwpCgkJCQl7CgkJCQkJaW50IGRlZXAgPSAxOwoJCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzBdLCBvdXQgZGVlcCkpCgkJCQkJewoJCQkJCQlHYW1lTWFuYWdlci5JbnN0YW5jZS5UZXJyYWluVG9vbC5Mb3dlclRlcnJhaW4odGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiwgZGVlcCAqIDAuMDAwMjVmLCA1LCAxMCk7CgkJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJCX0KCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuU1VNTU9OOgoJCQkJVmVjdG9yMyBwb3MgPSAodGFyZ2V0ICE9IG51bGwpID8gdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiA6IHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCkKCQkJCXsKCQkJCQlHYW1lT2JqZWN0IHBiT2JqID0gUmVzb3VyY2VzLkxvYWQocGFyYW1bMF0pIGFzIEdhbWVPYmplY3Q7CgkJCQkJaWYgKHBiT2JqICE9IG51bGwpIHsgSW5zdGFudGlhdGUocGJPYmosIHBvcywgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKTsgc3VjY2VzcyA9IHRydWU7IH0KCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRFJPUEJPWDoKCQkJCWZvcmVhY2ggKHZhciBkcm9wIGluIGRyb3BCb3guR2V0RHJvcEl0ZW0oKSkKCQkJCXsKCQkJCQlEcm9wSXRlbSh1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbiwgZHJvcC5pdGVtLCBkcm9wLml0ZW1OdW0pOwoJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJCUhlbHBlcnMuTG9nKHRoaXMsICJEcm9wIiwgJCJ7ZHJvcC5pdGVtLkl0ZW1OYW1lfXh7ZHJvcC5pdGVtTnVtfSIpOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5BRERHT0FMOgoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCkKCQkJCQlHYW1lTWFuYWdlci5HYW1lR29hbC5BZGRHb2FsKHVzZXIuR2V0Q29tcG9uZW50PFN0YXRpc3RpY3NIYW5kbGU+KCksIEdvYWxEYXRhLkdldERhdGFCeUtleShwYXJhbVswXSkpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlEZWJ1Zy5Mb2dFcnJvcigiVGFrZSBhIGlsbGVnYWwgRWZmZWN0OiIgKyB0aGlzKTsKCQkJCXJldHVybiBmYWxzZTsKCQl9CgoJCWlmIChUYWtlVkZYICE9IFZGWFR5cGUuTk9ORSAmJiBzdWNjZXNzKSBWRlhNYW5hZ2VyLlBsYXlWRlgoVGFrZVZGWCwgdXNlci50cmFuc2Zvcm0ucG9zaXRpb24pOwoJCXJldHVybiBzdWNjZXNzOwoJfQoKCWJvb2wgQ2hhbmdlSGVhbHRoKENoYXJhY3RlckRhdGEgdXNlciwgaW50IHZhbHVlKQoJewoJCWlmIChFZmZlY3RNb2RlID09IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUuQWJzb2x1dGUpCgkJewoJCQl1c2VyLlN0YXRzLkNoYW5nZUhlYWx0aCh2YWx1ZSk7CgkJCXJldHVybiB0cnVlOwoJCX0KCQllbHNlIGlmIChFZmZlY3RNb2RlID09IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUuUGVyY2VudGFnZSkKCQl7CgkJCWlmICh1c2VyLlN0YXRzLkN1cnJlbnRIZWFsdGggPT0gdXNlci5TdGF0cy5zdGF0cy5oZWFsdGggJiYgdmFsdWUgPiAwKQoJCQkJcmV0dXJuIHRydWU7CgkJCXVzZXIuU3RhdHMuQ2hhbmdlSGVhbHRoKE1hdGhmLkZsb29yVG9JbnQodmFsdWUgLyAxMDAuMGYgKiB1c2VyLlN0YXRzLnN0YXRzLmhlYWx0aCkpOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJcmV0dXJuIGZhbHNlOwoJfQoKCXZvaWQgRHJvcEl0ZW0oVmVjdG9yMyBwb3MsIEl0ZW0gaXRlbSwgaW50IG51bSkKCXsKCQlHYW1lT2JqZWN0IGxvb3RPYmogPSBSZXNvdXJjZXMuTG9hZCgiTG9vdCIpIGFzIEdhbWVPYmplY3Q7CgkJVmVjdG9yMyBkaXJlY3Rpb24gPSBRdWF0ZXJuaW9uLkV1bGVyKDAsIFJhbmRvbS5SYW5nZSgwLCAzNjApLCAwKSAqIFZlY3RvcjMucmlnaHQ7CgkJVmVjdG9yMyBzcGF3blBvc2l0aW9uID0gcG9zICsgZGlyZWN0aW9uICogUmFuZG9tLlJhbmdlKDAsIDIpOwoJCWZvciAoaW50IGkgPSAwOyBpIDwgbnVtOyBpKyspCgkJewoJCQlMb290IGxvb3QgPSBJbnN0YW50aWF0ZShsb290T2JqLCBzcGF3blBvc2l0aW9uLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDAsIDApKS5HZXRDb21wb25lbnQ8TG9vdD4oKTsKCQkJbG9vdC5JdGVtID0gaXRlbTsKCQl9Cgl9CgoJcHVibGljIGNsYXNzIFZhbXBpcmljV2VhcG9uRWZmZWN0IDogRWZmZWN0RGF0YQoJewoJCXB1YmxpYyBpbnQgUGVyY2VudGFnZUhlYWx0aFN0b2xlbjsKCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlyZXR1cm4gJCJDb252ZXJ0IHtQZXJjZW50YWdlSGVhbHRoU3RvbGVufSUgb2YgcGh5c2ljYWwgZGFtYWdlIGludG8gSGVhbHRoIjsKCQl9CgoJCXB1YmxpYyB2b2lkIE9uUG9zdEF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCwgQ2hhcmFjdGVyRGF0YSB1c2VyLCBEYW1hZ2UgZGFtYWdlKQoJCXsKCQkJaW50IGFtb3VudCA9IE1hdGhmLkZsb29yVG9JbnQoZGFtYWdlLkdldERhbWFnZShTdGF0U3lzdGVtLkRhbWFnZVR5cGUuUGh5c2ljYWwpICogKFBlcmNlbnRhZ2VIZWFsdGhTdG9sZW4gLyAxMDAuMGYpKTsKCQkJdXNlci5TdGF0cy5DaGFuZ2VIZWFsdGgoYW1vdW50KTsKCQl9Cgl9CgoJLy8gcHVibGljIGNsYXNzIEFkZEhlYWx0aFVzYWdlRWZmZWN0IDogRWZmZWN0RGF0YQoJLy8gewoJLy8gCS8vW0Zvcm1lcmx5U2VyaWFsaXplZEFzKCJIZWFsdGhQdXJjZW50YWdlQW1vdW50IildCgkvLyAJcHVibGljIGludCBIZWFsdGhQZXJjZW50YWdlQW1vdW50ID0gMjA7CgoJLy8gCXB1YmxpYyBib29sIE9uVXNlKENoYXJhY3RlckRhdGEgdXNlcikKCS8vIAl7CgkvLyAJCWlmICh1c2VyLlN0YXRzLkN1cnJlbnRIZWFsdGggPT0gdXNlci5TdGF0cy5zdGF0cy5oZWFsdGgpCgkvLyAJCQlyZXR1cm4gZmFsc2U7CgoJLy8gCQlWRlhNYW5hZ2VyLlBsYXlWRlgoVkZYVHlwZS5IZWFsaW5nLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJLy8gCQl1c2VyLlN0YXRzLkNoYW5nZUhlYWx0aChNYXRoZi5GbG9vclRvSW50KEhlYWx0aFBlcmNlbnRhZ2VBbW91bnQgLyAxMDAuMGYgKiB1c2VyLlN0YXRzLnN0YXRzLmhlYWx0aCkpOwoKCS8vIAkJcmV0dXJuIHRydWU7CgkvLyAJfQoJLy8gfQoKCXB1YmxpYyBjbGFzcyBJbmNyZWFzZVN0cmVuZ3RoRWZmZWN0IDogRWZmZWN0RGF0YQoJewoJCXB1YmxpYyBmbG9hdCBEdXJhdGlvbiA9IDEwLjBmOwoJCXB1YmxpYyBpbnQgU3RyZW5ndGhDaGFuZ2UgPSA1OwoJCXB1YmxpYyBTcHJpdGUgRWZmZWN0U3ByaXRlOwoKCQlwdWJsaWMgYm9vbCBPblVzZShDaGFyYWN0ZXJEYXRhIHVzZXIpCgkJewoJCQlTdGF0U3lzdGVtLlN0YXRNb2RpZmllciBtb2RpZmllciA9IG5ldyBTdGF0U3lzdGVtLlN0YXRNb2RpZmllcigpOwoJCQltb2RpZmllci5Nb2RpZmllck1vZGUgPSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLkFic29sdXRlOwoJCQltb2RpZmllci5TdGF0cy5zdHJlbmd0aCA9IFN0cmVuZ3RoQ2hhbmdlOwoKCQkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuU3Ryb25nZXIsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJCXVzZXIuU3RhdHMuQWRkVGltZWRNb2RpZmllcihtb2RpZmllciwgRHVyYXRpb24sICJTdHJlbmd0aEFkZCIsIEVmZmVjdFNwcml0ZSk7CgoJCQlyZXR1cm4gdHJ1ZTsKCQl9Cgl9CgoJcHVibGljIGNsYXNzIEFwcGx5QnVybldlYXBvbkVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgZmxvYXQgUGVyY2VudGFnZUNoYW5jZTsKCQlwdWJsaWMgaW50IERhbWFnZTsKCQlwdWJsaWMgZmxvYXQgVGltZTsKCgkJcHVibGljIHZvaWQgT25BdHRhY2soQ2hhcmFjdGVyRGF0YSB0YXJnZXQsIENoYXJhY3RlckRhdGEgdXNlciwgcmVmIERhbWFnZSBkYW1hZ2UpCgkJewoJCQlpZiAoVW5pdHlFbmdpbmUuUmFuZG9tLnZhbHVlIDwgKFBlcmNlbnRhZ2VDaGFuY2UgLyAxMDAuMGYpKQoJCQl7CgkJCQlFbGVtZW50YWxFZmZlY3QgZWZmZWN0ID0gbmV3IEVsZW1lbnRhbEVmZmVjdChUaW1lLCB0aGlzLCAxLjBmKTsKCgkJCQl0YXJnZXQuU3RhdHMuQWRkRWxlbWVudGFsRWZmZWN0KGVmZmVjdCk7CgkJCX0KCQl9Cgl9Cn0KAAAAAAAAAACfFQAAAAAAAAAAAAAAAAAAAAAAAJkaAAAAAAAAAAAAAAAAAAAAAAAAmRoAAAAAAAAAAAAA",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACZGgAAdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBNeUJveDsKCltDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiRWZmZWN0RGF0YSIsIG1lbnVOYW1lID0gIkRhdGEvRWZmZWN0RGF0YSIsIG9yZGVyID0gMSldCnB1YmxpYyBjbGFzcyBFZmZlY3REYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBFZmZlY3RUeXBlCgl7CgkJREFNQUdFLAoJCUhQQ0hBTkdFLAoJCVNQRUVEVVAsCgkJRElHLAoJCVNVTU1PTiwKCQlEUk9QQk9YLAoJCUFEREdPQUwsCgkJTE9SRE1PTkVZLAoJCUxPUkRFWFAKCX0KCXB1YmxpYyBFZmZlY3RUeXBlIFR5cGU7CglwdWJsaWMgVkZYVHlwZSBUYWtlVkZYID0gVkZYVHlwZS5OT05FOwoJcHVibGljIHN0cmluZyBEZXNjcmlwdGlvbjsKCglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoVHlwZSksIGZhbHNlLCBFZmZlY3RUeXBlLkhQQ0hBTkdFKV0KCXB1YmxpYyBpbnQgRWZmZWN0QW1vdW50OwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuSFBDSEFOR0UpXQoJcHVibGljIFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUgRWZmZWN0TW9kZTsKCglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoVHlwZSksIGZhbHNlLCBFZmZlY3RUeXBlLkRBTUFHRSldCglwdWJsaWMgU3RhdFN5c3RlbS5EYW1hZ2VUeXBlIGRhbWFnZVR5cGU7CgoKCXB1YmxpYyB2aXJ0dWFsIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgl7CgkJcmV0dXJuIERlc2NyaXB0aW9uOwoJfQoKCXB1YmxpYyBib29sIFRha2VFZmZlY3QoR2FtZU9iamVjdCB1c2VyLCBHYW1lT2JqZWN0IHRhcmdldCwgc3RyaW5nW10gcGFyYW0gPSBudWxsKQoJewoJCWJvb2wgc3VjY2VzcyA9IGZhbHNlOwoJCXN3aXRjaCAoVHlwZSkKCQl7CgkJCWNhc2UgRWZmZWN0VHlwZS5EQU1BR0U6CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkhQQ0hBTkdFOgoJCQkJaW50IGFkZE1vdW50ID0gMDsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzBdLCBvdXQgYWRkTW91bnQpKQoJCQkJCXN1Y2Nlc3MgPSBDaGFuZ2VIZWFsdGgodXNlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSwgdGFyZ2V0LkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpLCBFZmZlY3RBbW91bnQgKyBhZGRNb3VudCk7CgkJCQllbHNlIHN1Y2Nlc3MgPSBDaGFuZ2VIZWFsdGgodXNlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSwgdGFyZ2V0LkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpLCBFZmZlY3RBbW91bnQpOwoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5ESUc6CgkJCQlpZiAodGFyZ2V0ICE9IG51bGwpCgkJCQl7CgkJCQkJaW50IGRlZXAgPSAxOwoJCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzBdLCBvdXQgZGVlcCkpCgkJCQkJewoJCQkJCQlHYW1lTWFuYWdlci5JbnN0YW5jZS5UZXJyYWluVG9vbC5Mb3dlclRlcnJhaW4odGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiwgZGVlcCAqIDAuMDAwMjVmLCA1LCAxMCk7CgkJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJCX0KCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuU1VNTU9OOgoJCQkJVHJhbnNmb3JtIHRyYW5zID0gKHRhcmdldCAhPSBudWxsKSA/IHRhcmdldC50cmFuc2Zvcm0gOiB1c2VyLnRyYW5zZm9ybTsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDApCgkJCQl7CgkJCQkJR2FtZU9iamVjdCBwYk9iaiA9IFJlc291cmNlcy5Mb2FkKHBhcmFtWzBdKSBhcyBHYW1lT2JqZWN0OwoJCQkJCWlmIChwYk9iaiAhPSBudWxsKSB7IEluc3RhbnRpYXRlKHBiT2JqLCB0cmFucy5wb3NpdGlvbiwgdHJhbnMucm90YXRpb24pOyBzdWNjZXNzID0gdHJ1ZTsgfQoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5EUk9QQk9YOgoJCQkJRHJvcEJveCBkcm9wQm94ID0gRHJvcEJveC5HZXREcm9wQm94QnlLZXkocGFyYW1bMF0pOwoJCQkJaWYgKGRyb3BCb3ggIT0gbnVsbCkKCQkJCXsKCQkJCQlpbnQgY291bnQgPSAxOwoJCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzFdLCBvdXQgY291bnQpKQoJCQkJCXsKCQkJCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKQoJCQkJCQl7CgkJCQkJCQlmb3JlYWNoICh2YXIgZHJvcCBpbiBkcm9wQm94LkdldERyb3BJdGVtKCkpCgkJCQkJCQl7CgkJCQkJCQkJRHJvcEl0ZW0odXNlci50cmFuc2Zvcm0ucG9zaXRpb24sIGRyb3AuaXRlbSwgZHJvcC5pdGVtTnVtKTsKCQkJCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRHJvcCIsICQie2Ryb3AuaXRlbS5JdGVtTmFtZX14e2Ryb3AuaXRlbU51bX0iKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuQURER09BTDoKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDApCgkJCQl7CgkJCQkJR2FtZU1hbmFnZXIuR2FtZUdvYWwuQWRkR29hbChHb2FsRGF0YS5HZXREYXRhQnlLZXkocGFyYW1bMF0pKTsKCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuTE9SRE1PTkVZOgoJCQkJaW50IG1vbmV5ID0gMDsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzBdLCBvdXQgbW9uZXkpKQoJCQkJewoJCQkJCUdhbWVNYW5hZ2VyLkxvcmQuQWRkTW9uZXkobW9uZXkpOwoJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5MT1JERVhQOgoJCQkJaW50IGV4cCA9IDA7CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGV4cCkpCgkJCQl7CgkJCQkJR2FtZU1hbmFnZXIuTG9yZC5BZGRFeHAoZXhwKTsKCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCX0KCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJRGVidWcuTG9nRXJyb3IoIlRha2UgYSBpbGxlZ2FsIEVmZmVjdDoiICsgdGhpcyk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlpZiAoVGFrZVZGWCAhPSBWRlhUeXBlLk5PTkUgJiYgc3VjY2VzcykgVkZYTWFuYWdlci5QbGF5VkZYKFRha2VWRlgsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCQlyZXR1cm4gc3VjY2VzczsKCX0KCglib29sIENoYW5nZUhlYWx0aChDaGFyYWN0ZXJEYXRhIGF0dGFja2VyLCBDaGFyYWN0ZXJEYXRhIHRhcmdldCwgaW50IHZhbHVlKQoJewoJCWlmIChFZmZlY3RNb2RlID09IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUuQWJzb2x1dGUpCgkJewoJCQl0YXJnZXQuU3RhdHMuQ2hhbmdlSGVhbHRoKHZhbHVlLCBhdHRhY2tlcik7CgkJCXJldHVybiB0cnVlOwoJCX0KCQllbHNlIGlmIChFZmZlY3RNb2RlID09IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUuUGVyY2VudGFnZSkKCQl7CgkJCWlmICh0YXJnZXQuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSB0YXJnZXQuU3RhdHMuc3RhdHMuaGVhbHRoICYmIHZhbHVlID4gMCkKCQkJCXJldHVybiB0cnVlOwoJCQl0YXJnZXQuU3RhdHMuQ2hhbmdlSGVhbHRoKE1hdGhmLkZsb29yVG9JbnQodmFsdWUgLyAxMDAuMGYgKiB0YXJnZXQuU3RhdHMuc3RhdHMuaGVhbHRoKSwgYXR0YWNrZXIpOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJcmV0dXJuIGZhbHNlOwoJfQoKCXZvaWQgRHJvcEl0ZW0oVmVjdG9yMyBwb3MsIEl0ZW0gaXRlbSwgaW50IG51bSkKCXsKCQlHYW1lT2JqZWN0IGxvb3RPYmogPSBSZXNvdXJjZXMuTG9hZCgiTG9vdCIpIGFzIEdhbWVPYmplY3Q7CgkJVmVjdG9yMyBkaXJlY3Rpb24gPSBRdWF0ZXJuaW9uLkV1bGVyKDAsIFJhbmRvbS5SYW5nZSgwLCAzNjApLCAwKSAqIFZlY3RvcjMucmlnaHQ7CgkJVmVjdG9yMyBzcGF3blBvc2l0aW9uID0gcG9zICsgZGlyZWN0aW9uICogUmFuZG9tLlJhbmdlKDAsIDIpOwoJCWZvciAoaW50IGkgPSAwOyBpIDwgbnVtOyBpKyspCgkJewoJCQlMb290IGxvb3QgPSBJbnN0YW50aWF0ZShsb290T2JqLCBzcGF3blBvc2l0aW9uLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDAsIDApKS5HZXRDb21wb25lbnQ8TG9vdD4oKTsKCQkJbG9vdC5JdGVtID0gaXRlbTsKCQl9Cgl9CgoJcHVibGljIHN0YXRpYyB2b2lkIFRha2VFZmZlY3RzKExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gZWZmZWN0R3JvdXAsIEdhbWVPYmplY3QgdXNlciwgTGlzdDxHYW1lT2JqZWN0PiB0YXJnZXRzKQoJewoJCWZvcmVhY2ggKHZhciBlZmZlY3QgaW4gZWZmZWN0R3JvdXApCgkJewoJCQlmb3JlYWNoICh2YXIgdGFyZ2V0IGluIHRhcmdldHMpCgkJCXsKCQkJCWVmZmVjdC5LZXkuVGFrZUVmZmVjdCh1c2VyLCB0YXJnZXQsIGVmZmVjdC5WYWx1ZSk7CgkJCX0KCQl9Cgl9CgoJcHVibGljIHN0YXRpYyB2b2lkIFRha2VFZmZlY3RzKExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gZWZmZWN0R3JvdXAsIEdhbWVPYmplY3QgdXNlciwgR2FtZU9iamVjdCB0YXJnZXQpCgl7CgkJZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBlZmZlY3RHcm91cCkKCQl7CgkJCWVmZmVjdC5LZXkuVGFrZUVmZmVjdCh1c2VyLCB0YXJnZXQsIGVmZmVjdC5WYWx1ZSk7CgkJfQoJfQoKCXB1YmxpYyBjbGFzcyBWYW1waXJpY1dlYXBvbkVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgaW50IFBlcmNlbnRhZ2VIZWFsdGhTdG9sZW47CgoJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJCXsKCQkJcmV0dXJuICQiQ29udmVydCB7UGVyY2VudGFnZUhlYWx0aFN0b2xlbn0lIG9mIHBoeXNpY2FsIGRhbWFnZSBpbnRvIEhlYWx0aCI7CgkJfQoKCQlwdWJsaWMgdm9pZCBPblBvc3RBdHRhY2soQ2hhcmFjdGVyRGF0YSB0YXJnZXQsIENoYXJhY3RlckRhdGEgYXR0YWNrZXIsIERhbWFnZSBkYW1hZ2UpCgkJewoJCQlpbnQgYW1vdW50ID0gTWF0aGYuRmxvb3JUb0ludChkYW1hZ2UuR2V0RGFtYWdlKFN0YXRTeXN0ZW0uRGFtYWdlVHlwZS5QaHlzaWNhbCkgKiAoUGVyY2VudGFnZUhlYWx0aFN0b2xlbiAvIDEwMC4wZikpOwoJCQl0YXJnZXQuU3RhdHMuQ2hhbmdlSGVhbHRoKGFtb3VudCwgYXR0YWNrZXIpOwoJCX0KCX0KCgkvLyBwdWJsaWMgY2xhc3MgQWRkSGVhbHRoVXNhZ2VFZmZlY3QgOiBFZmZlY3REYXRhCgkvLyB7CgkvLyAJLy9bRm9ybWVybHlTZXJpYWxpemVkQXMoIkhlYWx0aFB1cmNlbnRhZ2VBbW91bnQiKV0KCS8vIAlwdWJsaWMgaW50IEhlYWx0aFBlcmNlbnRhZ2VBbW91bnQgPSAyMDsKCgkvLyAJcHVibGljIGJvb2wgT25Vc2UoQ2hhcmFjdGVyRGF0YSB1c2VyKQoJLy8gCXsKCS8vIAkJaWYgKHVzZXIuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSB1c2VyLlN0YXRzLnN0YXRzLmhlYWx0aCkKCS8vIAkJCXJldHVybiBmYWxzZTsKCgkvLyAJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkhlYWxpbmcsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkvLyAJCXVzZXIuU3RhdHMuQ2hhbmdlSGVhbHRoKE1hdGhmLkZsb29yVG9JbnQoSGVhbHRoUGVyY2VudGFnZUFtb3VudCAvIDEwMC4wZiAqIHVzZXIuU3RhdHMuc3RhdHMuaGVhbHRoKSk7CgoJLy8gCQlyZXR1cm4gdHJ1ZTsKCS8vIAl9CgkvLyB9CgoJcHVibGljIGNsYXNzIEluY3JlYXNlU3RyZW5ndGhFZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGZsb2F0IER1cmF0aW9uID0gMTAuMGY7CgkJcHVibGljIGludCBTdHJlbmd0aENoYW5nZSA9IDU7CgkJcHVibGljIFNwcml0ZSBFZmZlY3RTcHJpdGU7CgoJCXB1YmxpYyBib29sIE9uVXNlKENoYXJhY3RlckRhdGEgdXNlcikKCQl7CgkJCVN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyIG1vZGlmaWVyID0gbmV3IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyKCk7CgkJCW1vZGlmaWVyLk1vZGlmaWVyTW9kZSA9IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUuQWJzb2x1dGU7CgkJCW1vZGlmaWVyLlN0YXRzLnN0cmVuZ3RoID0gU3RyZW5ndGhDaGFuZ2U7CgoJCQlWRlhNYW5hZ2VyLlBsYXlWRlgoVkZYVHlwZS5TdHJvbmdlciwgdXNlci50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJdXNlci5TdGF0cy5BZGRUaW1lZE1vZGlmaWVyKG1vZGlmaWVyLCBEdXJhdGlvbiwgIlN0cmVuZ3RoQWRkIiwgRWZmZWN0U3ByaXRlKTsKCgkJCXJldHVybiB0cnVlOwoJCX0KCX0KCglwdWJsaWMgY2xhc3MgQXBwbHlCdXJuV2VhcG9uRWZmZWN0IDogRWZmZWN0RGF0YQoJewoJCXB1YmxpYyBmbG9hdCBQZXJjZW50YWdlQ2hhbmNlOwoJCXB1YmxpYyBpbnQgRGFtYWdlOwoJCXB1YmxpYyBmbG9hdCBUaW1lOwoKCQlwdWJsaWMgdm9pZCBPbkF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCwgQ2hhcmFjdGVyRGF0YSB1c2VyLCByZWYgRGFtYWdlIGRhbWFnZSkKCQl7CgkJCWlmIChVbml0eUVuZ2luZS5SYW5kb20udmFsdWUgPCAoUGVyY2VudGFnZUNoYW5jZSAvIDEwMC4wZikpCgkJCXsKCQkJCUVsZW1lbnRhbEVmZmVjdCBlZmZlY3QgPSBuZXcgRWxlbWVudGFsRWZmZWN0KFRpbWUsIHRoaXMsIDEuMGYpOwoKCQkJCXRhcmdldC5TdGF0cy5BZGRFbGVtZW50YWxFZmZlY3QoZWZmZWN0KTsKCQkJfQoJCX0KCX0KfQoAAAAAAAAAAJAbAAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					2,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAACQGwAAdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBNeUJveDsKCltDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiRWZmZWN0RGF0YSIsIG1lbnVOYW1lID0gIkRhdGEvRWZmZWN0RGF0YSIsIG9yZGVyID0gMSldCnB1YmxpYyBjbGFzcyBFZmZlY3REYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBFZmZlY3RUeXBlCgl7CgkJREFNQUdFLAoJCUhQQ0hBTkdFLAoJCVNQRUVEVVAsCgkJRElHLAoJCVNVTU1PTiwKCQlEUk9QQk9YLAoJCUFEREdPQUwsCgkJTE9SRE1PTkVZLAoJCUxPUkRFWFAsCgkJREVTVFJPWVNFTEYsCgl9CglwdWJsaWMgRWZmZWN0VHlwZSBUeXBlOwoJcHVibGljIFZGWFR5cGUgVGFrZVZGWCA9IFZGWFR5cGUuTk9ORTsKCXB1YmxpYyBzdHJpbmcgRGVzY3JpcHRpb247CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5IUENIQU5HRSldCglwdWJsaWMgaW50IEVmZmVjdEFtb3VudDsKCglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoVHlwZSksIGZhbHNlLCBFZmZlY3RUeXBlLkhQQ0hBTkdFKV0KCXB1YmxpYyBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlIEVmZmVjdE1vZGU7CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5EQU1BR0UpXQoJcHVibGljIFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSBkYW1hZ2VUeXBlOwoKCglwdWJsaWMgdmlydHVhbCBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJewoJCXJldHVybiBEZXNjcmlwdGlvbjsKCX0KCglwdWJsaWMgYm9vbCBUYWtlRWZmZWN0KEdhbWVPYmplY3QgdXNlciwgR2FtZU9iamVjdCB0YXJnZXQsIHN0cmluZ1tdIHBhcmFtID0gbnVsbCkKCXsKCQlib29sIHN1Y2Nlc3MgPSBmYWxzZTsKCQlzd2l0Y2ggKFR5cGUpCgkJewoJCQljYXNlIEVmZmVjdFR5cGUuREFNQUdFOgoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5IUENIQU5HRToKCQkJCWludCBhZGRNb3VudCA9IDA7CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGFkZE1vdW50KSkKCQkJCQlzdWNjZXNzID0gQ2hhbmdlSGVhbHRoKHVzZXIuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCksIHRhcmdldC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSwgRWZmZWN0QW1vdW50ICsgYWRkTW91bnQpOwoJCQkJZWxzZSBzdWNjZXNzID0gQ2hhbmdlSGVhbHRoKHVzZXIuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCksIHRhcmdldC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSwgRWZmZWN0QW1vdW50KTsKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRElHOgoJCQkJaWYgKHRhcmdldCAhPSBudWxsKQoJCQkJewoJCQkJCWludCBkZWVwID0gMTsKCQkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGRlZXApKQoJCQkJCXsKCQkJCQkJR2FtZU1hbmFnZXIuSW5zdGFuY2UuVGVycmFpblRvb2wuTG93ZXJUZXJyYWluKHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24sIGRlZXAgKiAwLjAwMDI1ZiwgNSwgMTApOwoJCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLlNVTU1PTjoKCQkJCVRyYW5zZm9ybSB0cmFucyA9ICh0YXJnZXQgIT0gbnVsbCkgPyB0YXJnZXQudHJhbnNmb3JtIDogdXNlci50cmFuc2Zvcm07CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwKQoJCQkJewoJCQkJCUdhbWVPYmplY3QgcGJPYmogPSBSZXNvdXJjZXMuTG9hZChwYXJhbVswXSkgYXMgR2FtZU9iamVjdDsKCQkJCQlpZiAocGJPYmogIT0gbnVsbCkgeyBJbnN0YW50aWF0ZShwYk9iaiwgdHJhbnMucG9zaXRpb24sIHRyYW5zLnJvdGF0aW9uKTsgc3VjY2VzcyA9IHRydWU7IH0KCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRFJPUEJPWDoKCQkJCWlmIChwYXJhbSA9PSBudWxsIHx8IHBhcmFtLkxlbmd0aCA9PSAwKQoJCQkJewoJCQkJCURlYnVnLkxvZ0Vycm9yKCJEcm9wQm94RWZmZWN0IHRha2UgbWlzc2luZyBlbm91Z2ggcGFyYW1ldGVycyEgIiArICJ1c2VyPSAiICsgdXNlcik7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJewoJCQkJCURyb3BCb3ggZHJvcEJveCA9IERyb3BCb3guR2V0RHJvcEJveEJ5S2V5KHBhcmFtWzBdKTsKCQkJCQlpZiAoZHJvcEJveCAhPSBudWxsKQoJCQkJCXsKCQkJCQkJaW50IGNvdW50ID0gMTsKCQkJCQkJaWYgKHBhcmFtLkxlbmd0aCA+IDEpIGludC5UcnlQYXJzZShwYXJhbVsxXSwgb3V0IGNvdW50KTsKCQkJCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKQoJCQkJCQl7CgkJCQkJCQlmb3JlYWNoICh2YXIgZHJvcCBpbiBkcm9wQm94LkdldERyb3BJdGVtKCkpCgkJCQkJCQl7CgkJCQkJCQkJRHJvcEl0ZW0odXNlci50cmFuc2Zvcm0ucG9zaXRpb24sIGRyb3AuaXRlbSwgZHJvcC5pdGVtTnVtKTsKCQkJCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRHJvcCIsICQie2Ryb3AuaXRlbS5JdGVtTmFtZX14e2Ryb3AuaXRlbU51bX0iKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuQURER09BTDoKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDApCgkJCQl7CgkJCQkJR2FtZU1hbmFnZXIuR2FtZUdvYWwuQWRkR29hbChHb2FsRGF0YS5HZXREYXRhQnlLZXkocGFyYW1bMF0pKTsKCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuTE9SRE1PTkVZOgoJCQkJaW50IG1vbmV5ID0gMDsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzBdLCBvdXQgbW9uZXkpKQoJCQkJewoJCQkJCUdhbWVNYW5hZ2VyLkxvcmQuQWRkTW9uZXkobW9uZXkpOwoJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5MT1JERVhQOgoJCQkJaW50IGV4cCA9IDA7CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGV4cCkpCgkJCQl7CgkJCQkJR2FtZU1hbmFnZXIuTG9yZC5BZGRFeHAoZXhwKTsKCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuREVTVFJPWVNFTEY6CgkJCQlEZXN0cm95KHVzZXIpOwoJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCURlYnVnLkxvZ0Vycm9yKCJUYWtlIGEgaWxsZWdhbCBFZmZlY3Q6IiArIHRoaXMpOwoJCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJaWYgKFRha2VWRlggIT0gVkZYVHlwZS5OT05FICYmIHN1Y2Nlc3MpIFZGWE1hbmFnZXIuUGxheVZGWChUYWtlVkZYLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJcmV0dXJuIHN1Y2Nlc3M7Cgl9CgoJYm9vbCBDaGFuZ2VIZWFsdGgoQ2hhcmFjdGVyRGF0YSBhdHRhY2tlciwgQ2hhcmFjdGVyRGF0YSB0YXJnZXQsIGludCB2YWx1ZSkKCXsKCQlpZiAoRWZmZWN0TW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLkFic29sdXRlKQoJCXsKCQkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aCh2YWx1ZSwgYXR0YWNrZXIpOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJZWxzZSBpZiAoRWZmZWN0TW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLlBlcmNlbnRhZ2UpCgkJewoJCQlpZiAodGFyZ2V0LlN0YXRzLkN1cnJlbnRIZWFsdGggPT0gdGFyZ2V0LlN0YXRzLnN0YXRzLmhlYWx0aCAmJiB2YWx1ZSA+IDApCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aChNYXRoZi5GbG9vclRvSW50KHZhbHVlIC8gMTAwLjBmICogdGFyZ2V0LlN0YXRzLnN0YXRzLmhlYWx0aCksIGF0dGFja2VyKTsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCgl2b2lkIERyb3BJdGVtKFZlY3RvcjMgcG9zLCBJdGVtIGl0ZW0sIGludCBudW0pCgl7CgkJR2FtZU9iamVjdCBsb290T2JqID0gUmVzb3VyY2VzLkxvYWQoIkxvb3QiKSBhcyBHYW1lT2JqZWN0OwoJCVZlY3RvcjMgZGlyZWN0aW9uID0gUXVhdGVybmlvbi5FdWxlcigwLCBSYW5kb20uUmFuZ2UoMCwgMzYwKSwgMCkgKiBWZWN0b3IzLnJpZ2h0OwoJCVZlY3RvcjMgc3Bhd25Qb3NpdGlvbiA9IHBvcyArIGRpcmVjdGlvbiAqIFJhbmRvbS5SYW5nZSgwLCAyKTsKCQlmb3IgKGludCBpID0gMDsgaSA8IG51bTsgaSsrKQoJCXsKCQkJTG9vdCBsb290ID0gSW5zdGFudGlhdGUobG9vdE9iaiwgc3Bhd25Qb3NpdGlvbiwgUXVhdGVybmlvbi5FdWxlcigwLCAwLCAwKSkuR2V0Q29tcG9uZW50PExvb3Q+KCk7CgkJCWxvb3QuSXRlbSA9IGl0ZW07CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBUYWtlRWZmZWN0cyhMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+IGVmZmVjdEdyb3VwLCBHYW1lT2JqZWN0IHVzZXIsIExpc3Q8R2FtZU9iamVjdD4gdGFyZ2V0cykKCXsKCQlmb3JlYWNoICh2YXIgZWZmZWN0IGluIGVmZmVjdEdyb3VwKQoJCXsKCQkJZm9yZWFjaCAodmFyIHRhcmdldCBpbiB0YXJnZXRzKQoJCQl7CgkJCQllZmZlY3QuS2V5LlRha2VFZmZlY3QodXNlciwgdGFyZ2V0LCBlZmZlY3QuVmFsdWUpOwoJCQl9CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBUYWtlRWZmZWN0cyhMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+IGVmZmVjdEdyb3VwLCBHYW1lT2JqZWN0IHVzZXIsIEdhbWVPYmplY3QgdGFyZ2V0KQoJewoJCWZvcmVhY2ggKHZhciBlZmZlY3QgaW4gZWZmZWN0R3JvdXApCgkJewoJCQllZmZlY3QuS2V5LlRha2VFZmZlY3QodXNlciwgdGFyZ2V0LCBlZmZlY3QuVmFsdWUpOwoJCX0KCX0KCglwdWJsaWMgY2xhc3MgVmFtcGlyaWNXZWFwb25FZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGludCBQZXJjZW50YWdlSGVhbHRoU3RvbGVuOwoKCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCQl7CgkJCXJldHVybiAkIkNvbnZlcnQge1BlcmNlbnRhZ2VIZWFsdGhTdG9sZW59JSBvZiBwaHlzaWNhbCBkYW1hZ2UgaW50byBIZWFsdGgiOwoJCX0KCgkJcHVibGljIHZvaWQgT25Qb3N0QXR0YWNrKENoYXJhY3RlckRhdGEgdGFyZ2V0LCBDaGFyYWN0ZXJEYXRhIGF0dGFja2VyLCBEYW1hZ2UgZGFtYWdlKQoJCXsKCQkJaW50IGFtb3VudCA9IE1hdGhmLkZsb29yVG9JbnQoZGFtYWdlLkdldERhbWFnZShTdGF0U3lzdGVtLkRhbWFnZVR5cGUuUGh5c2ljYWwpICogKFBlcmNlbnRhZ2VIZWFsdGhTdG9sZW4gLyAxMDAuMGYpKTsKCQkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aChhbW91bnQsIGF0dGFja2VyKTsKCQl9Cgl9CgoJLy8gcHVibGljIGNsYXNzIEFkZEhlYWx0aFVzYWdlRWZmZWN0IDogRWZmZWN0RGF0YQoJLy8gewoJLy8gCS8vW0Zvcm1lcmx5U2VyaWFsaXplZEFzKCJIZWFsdGhQdXJjZW50YWdlQW1vdW50IildCgkvLyAJcHVibGljIGludCBIZWFsdGhQZXJjZW50YWdlQW1vdW50ID0gMjA7CgoJLy8gCXB1YmxpYyBib29sIE9uVXNlKENoYXJhY3RlckRhdGEgdXNlcikKCS8vIAl7CgkvLyAJCWlmICh1c2VyLlN0YXRzLkN1cnJlbnRIZWFsdGggPT0gdXNlci5TdGF0cy5zdGF0cy5oZWFsdGgpCgkvLyAJCQlyZXR1cm4gZmFsc2U7CgoJLy8gCQlWRlhNYW5hZ2VyLlBsYXlWRlgoVkZYVHlwZS5IZWFsaW5nLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJLy8gCQl1c2VyLlN0YXRzLkNoYW5nZUhlYWx0aChNYXRoZi5GbG9vclRvSW50KEhlYWx0aFBlcmNlbnRhZ2VBbW91bnQgLyAxMDAuMGYgKiB1c2VyLlN0YXRzLnN0YXRzLmhlYWx0aCkpOwoKCS8vIAkJcmV0dXJuIHRydWU7CgkvLyAJfQoJLy8gfQoKCXB1YmxpYyBjbGFzcyBJbmNyZWFzZVN0cmVuZ3RoRWZmZWN0IDogRWZmZWN0RGF0YQoJewoJCXB1YmxpYyBmbG9hdCBEdXJhdGlvbiA9IDEwLjBmOwoJCXB1YmxpYyBpbnQgU3RyZW5ndGhDaGFuZ2UgPSA1OwoJCXB1YmxpYyBTcHJpdGUgRWZmZWN0U3ByaXRlOwoKCQlwdWJsaWMgYm9vbCBPblVzZShDaGFyYWN0ZXJEYXRhIHVzZXIpCgkJewoJCQlTdGF0U3lzdGVtLlN0YXRNb2RpZmllciBtb2RpZmllciA9IG5ldyBTdGF0U3lzdGVtLlN0YXRNb2RpZmllcigpOwoJCQltb2RpZmllci5Nb2RpZmllck1vZGUgPSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLkFic29sdXRlOwoJCQltb2RpZmllci5TdGF0cy5zdHJlbmd0aCA9IFN0cmVuZ3RoQ2hhbmdlOwoKCQkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuU3Ryb25nZXIsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJCXVzZXIuU3RhdHMuQWRkVGltZWRNb2RpZmllcihtb2RpZmllciwgRHVyYXRpb24sICJTdHJlbmd0aEFkZCIsIEVmZmVjdFNwcml0ZSk7CgoJCQlyZXR1cm4gdHJ1ZTsKCQl9Cgl9CgoJcHVibGljIGNsYXNzIEFwcGx5QnVybldlYXBvbkVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgZmxvYXQgUGVyY2VudGFnZUNoYW5jZTsKCQlwdWJsaWMgaW50IERhbWFnZTsKCQlwdWJsaWMgZmxvYXQgVGltZTsKCgkJcHVibGljIHZvaWQgT25BdHRhY2soQ2hhcmFjdGVyRGF0YSB0YXJnZXQsIENoYXJhY3RlckRhdGEgdXNlciwgcmVmIERhbWFnZSBkYW1hZ2UpCgkJewoJCQlpZiAoVW5pdHlFbmdpbmUuUmFuZG9tLnZhbHVlIDwgKFBlcmNlbnRhZ2VDaGFuY2UgLyAxMDAuMGYpKQoJCQl7CgkJCQlFbGVtZW50YWxFZmZlY3QgZWZmZWN0ID0gbmV3IEVsZW1lbnRhbEVmZmVjdChUaW1lLCB0aGlzLCAxLjBmKTsKCgkJCQl0YXJnZXQuU3RhdHMuQWRkRWxlbWVudGFsRWZmZWN0KGVmZmVjdCk7CgkJCX0KCQl9Cgl9Cn0KAAAAAAAAAAAxHAAAAAAAAAAAAAAAAAAAAAAAAGAeAAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAABgHgAAdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBNeUJveDsKCltDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiRWZmZWN0RGF0YSIsIG1lbnVOYW1lID0gIkRhdGEvRWZmZWN0RGF0YSIsIG9yZGVyID0gMSldCnB1YmxpYyBjbGFzcyBFZmZlY3REYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBFZmZlY3RUeXBlCgl7CgkJREFNQUdFLAoJCUhQQ0hBTkdFLAoJCVNQRUVEVVAsCgkJRElHLAoJCVNVTU1PTiwKCQlEUk9QQk9YLAoJCUFEREdPQUwsCgkJTE9SRE1PTkVZLAoJCUxPUkRFWFAsCgkJTE9SREVXQVJURVIsCgkJREVTVFJPWVNFTEYsCgl9CglwdWJsaWMgRWZmZWN0VHlwZSBUeXBlOwoJcHVibGljIFZGWFR5cGUgVGFrZVZGWCA9IFZGWFR5cGUuTk9ORTsKCXB1YmxpYyBzdHJpbmcgRGVzY3JpcHRpb247CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5IUENIQU5HRSldCglwdWJsaWMgaW50IEVmZmVjdEFtb3VudDsKCglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoVHlwZSksIGZhbHNlLCBFZmZlY3RUeXBlLkhQQ0hBTkdFKV0KCXB1YmxpYyBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlIEVmZmVjdE1vZGU7CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5EQU1BR0UpXQoJcHVibGljIFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSBkYW1hZ2VUeXBlOwoKCglwdWJsaWMgdmlydHVhbCBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJewoJCXJldHVybiBEZXNjcmlwdGlvbjsKCX0KCglwdWJsaWMgYm9vbCBUYWtlRWZmZWN0KEdhbWVPYmplY3QgdXNlciwgR2FtZU9iamVjdCB0YXJnZXQsIHN0cmluZ1tdIHBhcmFtID0gbnVsbCkKCXsKCQlib29sIHN1Y2Nlc3MgPSBmYWxzZTsKCQlzd2l0Y2ggKFR5cGUpCgkJewoJCQljYXNlIEVmZmVjdFR5cGUuREFNQUdFOgoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5IUENIQU5HRToKCQkJCWludCBhZGRNb3VudCA9IDA7CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGFkZE1vdW50KSkKCQkJCQlzdWNjZXNzID0gQ2hhbmdlSGVhbHRoKHVzZXIuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCksIHRhcmdldC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSwgRWZmZWN0QW1vdW50ICsgYWRkTW91bnQpOwoJCQkJZWxzZSBzdWNjZXNzID0gQ2hhbmdlSGVhbHRoKHVzZXIuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCksIHRhcmdldC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSwgRWZmZWN0QW1vdW50KTsKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRElHOgoJCQkJaWYgKHRhcmdldCAhPSBudWxsKQoJCQkJewoJCQkJCWludCBkZWVwID0gMTsKCQkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGRlZXApKQoJCQkJCXsKCQkJCQkJR2FtZU1hbmFnZXIuSW5zdGFuY2UuVGVycmFpblRvb2wuTG93ZXJUZXJyYWluKHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24sIGRlZXAgKiAwLjAwMDI1ZiwgNSwgMTApOwoJCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLlNVTU1PTjoKCQkJCVRyYW5zZm9ybSB0cmFucyA9ICh0YXJnZXQgIT0gbnVsbCkgPyB0YXJnZXQudHJhbnNmb3JtIDogdXNlci50cmFuc2Zvcm07CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAxICYmIHBhcmFtWzFdID09ICJzZWxmIikgdHJhbnMgPSB1c2VyLnRyYW5zZm9ybTsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDApCgkJCQl7CgkJCQkJR2FtZU9iamVjdCBwYk9iaiA9IFJlc291cmNlcy5Mb2FkKHBhcmFtWzBdKSBhcyBHYW1lT2JqZWN0OwoJCQkJCWlmIChwYk9iaiAhPSBudWxsKSB7IEluc3RhbnRpYXRlKHBiT2JqLCB0cmFucy5wb3NpdGlvbiwgdHJhbnMucm90YXRpb24pOyBzdWNjZXNzID0gdHJ1ZTsgfQoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5EUk9QQk9YOgoJCQkJaWYgKHBhcmFtID09IG51bGwgfHwgcGFyYW0uTGVuZ3RoID09IDApCgkJCQl7CgkJCQkJRGVidWcuTG9nRXJyb3IoIkRyb3BCb3hFZmZlY3QgdGFrZSBtaXNzaW5nIGVub3VnaCBwYXJhbWV0ZXJzISAiICsgInVzZXI9ICIgKyB1c2VyKTsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCQl7CgkJCQkJRHJvcEJveCBkcm9wQm94ID0gRHJvcEJveC5HZXREcm9wQm94QnlLZXkocGFyYW1bMF0pOwoJCQkJCWlmIChkcm9wQm94ICE9IG51bGwpCgkJCQkJewoJCQkJCQlpbnQgY291bnQgPSAxOwoJCQkJCQlpZiAocGFyYW0uTGVuZ3RoID4gMSkgaW50LlRyeVBhcnNlKHBhcmFtWzFdLCBvdXQgY291bnQpOwoJCQkJCQlmb3IgKGludCBpID0gMDsgaSA8IGNvdW50OyBpKyspCgkJCQkJCXsKCQkJCQkJCWZvcmVhY2ggKHZhciBkcm9wIGluIGRyb3BCb3guR2V0RHJvcEl0ZW0oKSkKCQkJCQkJCXsKCQkJCQkJCQlEcm9wSXRlbSh1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbiwgZHJvcC5pdGVtLCBkcm9wLml0ZW1OdW0pOwoJCQkJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJCQkJCUhlbHBlcnMuTG9nKHRoaXMsICJEcm9wIiwgJCJ7ZHJvcC5pdGVtLkl0ZW1OYW1lfXh7ZHJvcC5pdGVtTnVtfSIpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCURlYnVnLkxvZ0Vycm9yKCJHZXQgYnkgYSBub2V4aXN0IGRyb3Bib3gga2V5ID0gIiArIHBhcmFtWzBdKTsKCQkJCQl9CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkFEREdPQUw6CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwKQoJCQkJewoJCQkJCUdhbWVNYW5hZ2VyLkdhbWVHb2FsLkFkZEdvYWwoR29hbERhdGEuR2V0RGF0YUJ5S2V5KHBhcmFtWzBdKSk7CgkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkxPUkRNT05FWToKCQkJCWludCBtb25leSA9IDA7CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IG1vbmV5KSkKCQkJCXsKCQkJCQlHYW1lTWFuYWdlci5Mb3JkLkFkZE1vbmV5KG1vbmV5KTsKCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuTE9SREVYUDoKCQkJCWludCBleHAgPSAwOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCAmJiBpbnQuVHJ5UGFyc2UocGFyYW1bMF0sIG91dCBleHApKQoJCQkJewoJCQkJCUdhbWVNYW5hZ2VyLkxvcmQuQWRkRXhwKGV4cCk7CgkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkRFU1RST1lTRUxGOgoJCQkJR2FtZU1hbmFnZXIuU3RhcnRXYWl0QWN0aW9uKDAuMWYsICgpID0+IERlc3Ryb3kodXNlcikpOwoJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCURlYnVnLkxvZ0Vycm9yKCJUYWtlIGEgaWxsZWdhbCBFZmZlY3Q6IiArIHRoaXMpOwoJCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJaWYgKFRha2VWRlggIT0gVkZYVHlwZS5OT05FICYmIHN1Y2Nlc3MpIFZGWE1hbmFnZXIuUGxheVZGWChUYWtlVkZYLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJdmFyIGNoYXJhY3RlciA9IHVzZXIuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCk7CgkJaWYgKHN1Y2Nlc3MgJiYgY2hhcmFjdGVyKSBjaGFyYWN0ZXIuRWZmZWN0QWN0aW9uPy5JbnZva2UodGhpcyk7CgkJcmV0dXJuIHN1Y2Nlc3M7Cgl9CgoJYm9vbCBDaGFuZ2VIZWFsdGgoQ2hhcmFjdGVyRGF0YSBhdHRhY2tlciwgQ2hhcmFjdGVyRGF0YSB0YXJnZXQsIGludCB2YWx1ZSkKCXsKCQlpZiAoRWZmZWN0TW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLkFic29sdXRlKQoJCXsKCQkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aCh2YWx1ZSwgYXR0YWNrZXIpOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJZWxzZSBpZiAoRWZmZWN0TW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLlBlcmNlbnRhZ2UpCgkJewoJCQlpZiAodGFyZ2V0LlN0YXRzLkN1cnJlbnRIZWFsdGggPT0gdGFyZ2V0LlN0YXRzLnN0YXRzLmhlYWx0aCAmJiB2YWx1ZSA+IDApCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aChNYXRoZi5GbG9vclRvSW50KHZhbHVlIC8gMTAwLjBmICogdGFyZ2V0LlN0YXRzLnN0YXRzLmhlYWx0aCksIGF0dGFja2VyKTsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCgl2b2lkIERyb3BJdGVtKFZlY3RvcjMgcG9zLCBJdGVtIGl0ZW0sIGludCBudW0pCgl7CgkJR2FtZU9iamVjdCBsb290T2JqID0gUmVzb3VyY2VzLkxvYWQoIkxvb3QiKSBhcyBHYW1lT2JqZWN0OwoJCVZlY3RvcjMgZGlyZWN0aW9uID0gUXVhdGVybmlvbi5FdWxlcigwLCBSYW5kb20uUmFuZ2UoMCwgMzYwKSwgMCkgKiBWZWN0b3IzLnJpZ2h0OwoJCVZlY3RvcjMgc3Bhd25Qb3NpdGlvbiA9IHBvcyArIGRpcmVjdGlvbiAqIFJhbmRvbS5SYW5nZSgxLCAzKTsKCQlmb3IgKGludCBpID0gMDsgaSA8IG51bTsgaSsrKQoJCXsKCQkJTG9vdCBsb290ID0gSW5zdGFudGlhdGUobG9vdE9iaiwgc3Bhd25Qb3NpdGlvbiwgUXVhdGVybmlvbi5FdWxlcigwLCAwLCAwKSkuR2V0Q29tcG9uZW50PExvb3Q+KCk7CgkJCWxvb3QuSXRlbSA9IGl0ZW07CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBUYWtlRWZmZWN0cyhMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+IGVmZmVjdEdyb3VwLCBHYW1lT2JqZWN0IHVzZXIsIExpc3Q8R2FtZU9iamVjdD4gdGFyZ2V0cykKCXsKCQlmb3JlYWNoICh2YXIgZWZmZWN0IGluIGVmZmVjdEdyb3VwKQoJCXsKCQkJZm9yZWFjaCAodmFyIHRhcmdldCBpbiB0YXJnZXRzKQoJCQl7CgkJCQllZmZlY3QuS2V5LlRha2VFZmZlY3QodXNlciwgdGFyZ2V0LCBlZmZlY3QuVmFsdWUpOwoJCQl9CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBUYWtlRWZmZWN0cyhMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+IGVmZmVjdEdyb3VwLCBHYW1lT2JqZWN0IHVzZXIsIEdhbWVPYmplY3QgdGFyZ2V0KQoJewoJCWZvcmVhY2ggKHZhciBlZmZlY3QgaW4gZWZmZWN0R3JvdXApCgkJewoJCQllZmZlY3QuS2V5LlRha2VFZmZlY3QodXNlciwgdGFyZ2V0LCBlZmZlY3QuVmFsdWUpOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIEVmZmVjdERhdGEgR2V0RWZmZWN0RGF0YUJ5S2V5KHN0cmluZyBrZXkpCgl7CgkJcmV0dXJuIEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxFZmZlY3REYXRhPihHYW1lTWFuYWdlci5Db25maWcuRWZmZWN0LCBrZXkpOwoJfQoJcHVibGljIHN0YXRpYyBMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+IEdldEVmZmVjdEdyb3VwQnlLZXkoc3RyaW5nIGtleSkKCXsKCQlyZXR1cm4gS2V5VmFsdWVEYXRhLkdldFZhbHVlPExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4+KEdhbWVNYW5hZ2VyLkNvbmZpZy5FZmZlY3RHcm91cCwga2V5KTsKCX0KCglwdWJsaWMgY2xhc3MgVmFtcGlyaWNXZWFwb25FZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGludCBQZXJjZW50YWdlSGVhbHRoU3RvbGVuOwoKCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCQl7CgkJCXJldHVybiAkIkNvbnZlcnQge1BlcmNlbnRhZ2VIZWFsdGhTdG9sZW59JSBvZiBwaHlzaWNhbCBkYW1hZ2UgaW50byBIZWFsdGgiOwoJCX0KCgkJcHVibGljIHZvaWQgT25Qb3N0QXR0YWNrKENoYXJhY3RlckRhdGEgdGFyZ2V0LCBDaGFyYWN0ZXJEYXRhIGF0dGFja2VyLCBEYW1hZ2UgZGFtYWdlKQoJCXsKCQkJaW50IGFtb3VudCA9IE1hdGhmLkZsb29yVG9JbnQoZGFtYWdlLkdldERhbWFnZShTdGF0U3lzdGVtLkRhbWFnZVR5cGUuUGh5c2ljYWwpICogKFBlcmNlbnRhZ2VIZWFsdGhTdG9sZW4gLyAxMDAuMGYpKTsKCQkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aChhbW91bnQsIGF0dGFja2VyKTsKCQl9Cgl9CgoJLy8gcHVibGljIGNsYXNzIEFkZEhlYWx0aFVzYWdlRWZmZWN0IDogRWZmZWN0RGF0YQoJLy8gewoJLy8gCS8vW0Zvcm1lcmx5U2VyaWFsaXplZEFzKCJIZWFsdGhQdXJjZW50YWdlQW1vdW50IildCgkvLyAJcHVibGljIGludCBIZWFsdGhQZXJjZW50YWdlQW1vdW50ID0gMjA7CgoJLy8gCXB1YmxpYyBib29sIE9uVXNlKENoYXJhY3RlckRhdGEgdXNlcikKCS8vIAl7CgkvLyAJCWlmICh1c2VyLlN0YXRzLkN1cnJlbnRIZWFsdGggPT0gdXNlci5TdGF0cy5zdGF0cy5oZWFsdGgpCgkvLyAJCQlyZXR1cm4gZmFsc2U7CgoJLy8gCQlWRlhNYW5hZ2VyLlBsYXlWRlgoVkZYVHlwZS5IZWFsaW5nLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJLy8gCQl1c2VyLlN0YXRzLkNoYW5nZUhlYWx0aChNYXRoZi5GbG9vclRvSW50KEhlYWx0aFBlcmNlbnRhZ2VBbW91bnQgLyAxMDAuMGYgKiB1c2VyLlN0YXRzLnN0YXRzLmhlYWx0aCkpOwoKCS8vIAkJcmV0dXJuIHRydWU7CgkvLyAJfQoJLy8gfQoKCXB1YmxpYyBjbGFzcyBJbmNyZWFzZVN0cmVuZ3RoRWZmZWN0IDogRWZmZWN0RGF0YQoJewoJCXB1YmxpYyBmbG9hdCBEdXJhdGlvbiA9IDEwLjBmOwoJCXB1YmxpYyBpbnQgU3RyZW5ndGhDaGFuZ2UgPSA1OwoJCXB1YmxpYyBTcHJpdGUgRWZmZWN0U3ByaXRlOwoKCQlwdWJsaWMgYm9vbCBPblVzZShDaGFyYWN0ZXJEYXRhIHVzZXIpCgkJewoJCQlTdGF0U3lzdGVtLlN0YXRNb2RpZmllciBtb2RpZmllciA9IG5ldyBTdGF0U3lzdGVtLlN0YXRNb2RpZmllcigpOwoJCQltb2RpZmllci5Nb2RpZmllck1vZGUgPSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLkFic29sdXRlOwoJCQltb2RpZmllci5TdGF0cy5zdHJlbmd0aCA9IFN0cmVuZ3RoQ2hhbmdlOwoKCQkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuU3Ryb25nZXIsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJCXVzZXIuU3RhdHMuQWRkVGltZWRNb2RpZmllcihtb2RpZmllciwgRHVyYXRpb24sICJTdHJlbmd0aEFkZCIsIEVmZmVjdFNwcml0ZSk7CgoJCQlyZXR1cm4gdHJ1ZTsKCQl9Cgl9CgoJcHVibGljIGNsYXNzIEFwcGx5QnVybldlYXBvbkVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgZmxvYXQgUGVyY2VudGFnZUNoYW5jZTsKCQlwdWJsaWMgaW50IERhbWFnZTsKCQlwdWJsaWMgZmxvYXQgVGltZTsKCgkJcHVibGljIHZvaWQgT25BdHRhY2soQ2hhcmFjdGVyRGF0YSB0YXJnZXQsIENoYXJhY3RlckRhdGEgdXNlciwgcmVmIERhbWFnZSBkYW1hZ2UpCgkJewoJCQlpZiAoVW5pdHlFbmdpbmUuUmFuZG9tLnZhbHVlIDwgKFBlcmNlbnRhZ2VDaGFuY2UgLyAxMDAuMGYpKQoJCQl7CgkJCQlFbGVtZW50YWxFZmZlY3QgZWZmZWN0ID0gbmV3IEVsZW1lbnRhbEVmZmVjdChUaW1lLCB0aGlzLCAxLjBmKTsKCgkJCQl0YXJnZXQuU3RhdHMuQWRkRWxlbWVudGFsRWZmZWN0KGVmZmVjdCk7CgkJCX0KCQl9Cgl9Cn0KAAAAAAAAAABeHgAAAAAAAAAAAAAAAAAAAAAAAF4eAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAABeHgAAdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBNeUJveDsKCltDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiRWZmZWN0RGF0YSIsIG1lbnVOYW1lID0gIkRhdGEvRWZmZWN0RGF0YSIsIG9yZGVyID0gMSldCnB1YmxpYyBjbGFzcyBFZmZlY3REYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBFZmZlY3RUeXBlCgl7CgkJREFNQUdFLAoJCUhQQ0hBTkdFLAoJCVNQRUVEVVAsCgkJRElHLAoJCVNVTU1PTiwKCQlEUk9QQk9YLAoJCUFEREdPQUwsCgkJTE9SRE1PTkVZLAoJCUxPUkRFWFAsCgkJTE9SREVXQVJURVIsCgkJREVTVFJPWVNFTEYsCgl9CglwdWJsaWMgRWZmZWN0VHlwZSBUeXBlOwoJcHVibGljIFZGWFR5cGUgVGFrZVZGWCA9IFZGWFR5cGUuTk9ORTsKCXB1YmxpYyBzdHJpbmcgRGVzY3JpcHRpb247CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5IUENIQU5HRSldCglwdWJsaWMgaW50IEVmZmVjdEFtb3VudDsKCglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoVHlwZSksIGZhbHNlLCBFZmZlY3RUeXBlLkhQQ0hBTkdFKV0KCXB1YmxpYyBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlIEVmZmVjdE1vZGU7CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5EQU1BR0UpXQoJcHVibGljIFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSBkYW1hZ2VUeXBlOwoKCglwdWJsaWMgdmlydHVhbCBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJewoJCXJldHVybiBEZXNjcmlwdGlvbjsKCX0KCglwdWJsaWMgYm9vbCBUYWtlRWZmZWN0KEdhbWVPYmplY3QgdXNlciwgR2FtZU9iamVjdCB0YXJnZXQsIHN0cmluZ1tdIHBhcmFtID0gbnVsbCkKCXsKCQlib29sIHN1Y2Nlc3MgPSBmYWxzZTsKCQlzd2l0Y2ggKFR5cGUpCgkJewoJCQljYXNlIEVmZmVjdFR5cGUuREFNQUdFOgoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5IUENIQU5HRToKCQkJCWludCBhZGRNb3VudCA9IDA7CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGFkZE1vdW50KSkKCQkJCQlzdWNjZXNzID0gQ2hhbmdlSGVhbHRoKHVzZXIuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCksIHRhcmdldC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSwgRWZmZWN0QW1vdW50ICsgYWRkTW91bnQpOwoJCQkJZWxzZSBzdWNjZXNzID0gQ2hhbmdlSGVhbHRoKHVzZXIuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCksIHRhcmdldC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSwgRWZmZWN0QW1vdW50KTsKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRElHOgoJCQkJaWYgKHRhcmdldCAhPSBudWxsKQoJCQkJewoJCQkJCWludCBkZWVwID0gMTsKCQkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGRlZXApKQoJCQkJCXsKCQkJCQkJR2FtZU1hbmFnZXIuSW5zdGFuY2UuVGVycmFpblRvb2wuTG93ZXJUZXJyYWluKHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24sIGRlZXAgKiAwLjAwMDVmLCA1LCA1KTsKCQkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQkJfQoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5TVU1NT046CgkJCQlUcmFuc2Zvcm0gdHJhbnMgPSAodGFyZ2V0ICE9IG51bGwpID8gdGFyZ2V0LnRyYW5zZm9ybSA6IHVzZXIudHJhbnNmb3JtOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMSAmJiBwYXJhbVsxXSA9PSAic2VsZiIpIHRyYW5zID0gdXNlci50cmFuc2Zvcm07CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwKQoJCQkJewoJCQkJCUdhbWVPYmplY3QgcGJPYmogPSBSZXNvdXJjZXMuTG9hZChwYXJhbVswXSkgYXMgR2FtZU9iamVjdDsKCQkJCQlpZiAocGJPYmogIT0gbnVsbCkgeyBJbnN0YW50aWF0ZShwYk9iaiwgdHJhbnMucG9zaXRpb24sIHRyYW5zLnJvdGF0aW9uKTsgc3VjY2VzcyA9IHRydWU7IH0KCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRFJPUEJPWDoKCQkJCWlmIChwYXJhbSA9PSBudWxsIHx8IHBhcmFtLkxlbmd0aCA9PSAwKQoJCQkJewoJCQkJCURlYnVnLkxvZ0Vycm9yKCJEcm9wQm94RWZmZWN0IHRha2UgbWlzc2luZyBlbm91Z2ggcGFyYW1ldGVycyEgIiArICJ1c2VyPSAiICsgdXNlcik7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJewoJCQkJCURyb3BCb3ggZHJvcEJveCA9IERyb3BCb3guR2V0RHJvcEJveEJ5S2V5KHBhcmFtWzBdKTsKCQkJCQlpZiAoZHJvcEJveCAhPSBudWxsKQoJCQkJCXsKCQkJCQkJaW50IGNvdW50ID0gMTsKCQkJCQkJaWYgKHBhcmFtLkxlbmd0aCA+IDEpIGludC5UcnlQYXJzZShwYXJhbVsxXSwgb3V0IGNvdW50KTsKCQkJCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKQoJCQkJCQl7CgkJCQkJCQlmb3JlYWNoICh2YXIgZHJvcCBpbiBkcm9wQm94LkdldERyb3BJdGVtKCkpCgkJCQkJCQl7CgkJCQkJCQkJRHJvcEl0ZW0odXNlci50cmFuc2Zvcm0ucG9zaXRpb24sIGRyb3AuaXRlbSwgZHJvcC5pdGVtTnVtKTsKCQkJCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRHJvcCIsICQie2Ryb3AuaXRlbS5JdGVtTmFtZX14e2Ryb3AuaXRlbU51bX0iKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQlEZWJ1Zy5Mb2dFcnJvcigiR2V0IGJ5IGEgbm9leGlzdCBkcm9wYm94IGtleSA9ICIgKyBwYXJhbVswXSk7CgkJCQkJfQoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5BRERHT0FMOgoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCkKCQkJCXsKCQkJCQlHYW1lTWFuYWdlci5HYW1lR29hbC5BZGRHb2FsKEdvYWxEYXRhLkdldERhdGFCeUtleShwYXJhbVswXSkpOwoJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5MT1JETU9ORVk6CgkJCQlpbnQgbW9uZXkgPSAwOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCAmJiBpbnQuVHJ5UGFyc2UocGFyYW1bMF0sIG91dCBtb25leSkpCgkJCQl7CgkJCQkJR2FtZU1hbmFnZXIuTG9yZC5BZGRNb25leShtb25leSk7CgkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkxPUkRFWFA6CgkJCQlpbnQgZXhwID0gMDsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzBdLCBvdXQgZXhwKSkKCQkJCXsKCQkJCQlHYW1lTWFuYWdlci5Mb3JkLkFkZEV4cChleHApOwoJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5ERVNUUk9ZU0VMRjoKCQkJCUdhbWVNYW5hZ2VyLlN0YXJ0V2FpdEFjdGlvbigwLjFmLCAoKSA9PiBEZXN0cm95KHVzZXIpKTsKCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlEZWJ1Zy5Mb2dFcnJvcigiVGFrZSBhIGlsbGVnYWwgRWZmZWN0OiIgKyB0aGlzKTsKCQkJCXJldHVybiBmYWxzZTsKCQl9CgoJCWlmIChUYWtlVkZYICE9IFZGWFR5cGUuTk9ORSAmJiBzdWNjZXNzKSBWRlhNYW5hZ2VyLlBsYXlWRlgoVGFrZVZGWCwgdXNlci50cmFuc2Zvcm0ucG9zaXRpb24pOwoJCXZhciBjaGFyYWN0ZXIgPSB1c2VyLkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCWlmIChzdWNjZXNzICYmIGNoYXJhY3RlcikgY2hhcmFjdGVyLkVmZmVjdEFjdGlvbj8uSW52b2tlKHRoaXMpOwoJCXJldHVybiBzdWNjZXNzOwoJfQoKCWJvb2wgQ2hhbmdlSGVhbHRoKENoYXJhY3RlckRhdGEgYXR0YWNrZXIsIENoYXJhY3RlckRhdGEgdGFyZ2V0LCBpbnQgdmFsdWUpCgl7CgkJaWYgKEVmZmVjdE1vZGUgPT0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5BYnNvbHV0ZSkKCQl7CgkJCXRhcmdldC5TdGF0cy5DaGFuZ2VIZWFsdGgodmFsdWUsIGF0dGFja2VyKTsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCWVsc2UgaWYgKEVmZmVjdE1vZGUgPT0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5QZXJjZW50YWdlKQoJCXsKCQkJaWYgKHRhcmdldC5TdGF0cy5DdXJyZW50SGVhbHRoID09IHRhcmdldC5TdGF0cy5zdGF0cy5oZWFsdGggJiYgdmFsdWUgPiAwKQoJCQkJcmV0dXJuIHRydWU7CgkJCXRhcmdldC5TdGF0cy5DaGFuZ2VIZWFsdGgoTWF0aGYuRmxvb3JUb0ludCh2YWx1ZSAvIDEwMC4wZiAqIHRhcmdldC5TdGF0cy5zdGF0cy5oZWFsdGgpLCBhdHRhY2tlcik7CgkJCXJldHVybiB0cnVlOwoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgoJdm9pZCBEcm9wSXRlbShWZWN0b3IzIHBvcywgSXRlbSBpdGVtLCBpbnQgbnVtKQoJewoJCUdhbWVPYmplY3QgbG9vdE9iaiA9IFJlc291cmNlcy5Mb2FkKCJMb290IikgYXMgR2FtZU9iamVjdDsKCQlWZWN0b3IzIGRpcmVjdGlvbiA9IFF1YXRlcm5pb24uRXVsZXIoMCwgUmFuZG9tLlJhbmdlKDAsIDM2MCksIDApICogVmVjdG9yMy5yaWdodDsKCQlWZWN0b3IzIHNwYXduUG9zaXRpb24gPSBwb3MgKyBkaXJlY3Rpb24gKiBSYW5kb20uUmFuZ2UoMSwgMyk7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBudW07IGkrKykKCQl7CgkJCUxvb3QgbG9vdCA9IEluc3RhbnRpYXRlKGxvb3RPYmosIHNwYXduUG9zaXRpb24sIFF1YXRlcm5pb24uRXVsZXIoMCwgMCwgMCkpLkdldENvbXBvbmVudDxMb290PigpOwoJCQlsb290Lkl0ZW0gPSBpdGVtOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgVGFrZUVmZmVjdHMoTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+PiBlZmZlY3RHcm91cCwgR2FtZU9iamVjdCB1c2VyLCBMaXN0PEdhbWVPYmplY3Q+IHRhcmdldHMpCgl7CgkJZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBlZmZlY3RHcm91cCkKCQl7CgkJCWZvcmVhY2ggKHZhciB0YXJnZXQgaW4gdGFyZ2V0cykKCQkJewoJCQkJZWZmZWN0LktleS5UYWtlRWZmZWN0KHVzZXIsIHRhcmdldCwgZWZmZWN0LlZhbHVlKTsKCQkJfQoJCX0KCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgVGFrZUVmZmVjdHMoTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+PiBlZmZlY3RHcm91cCwgR2FtZU9iamVjdCB1c2VyLCBHYW1lT2JqZWN0IHRhcmdldCkKCXsKCQlmb3JlYWNoICh2YXIgZWZmZWN0IGluIGVmZmVjdEdyb3VwKQoJCXsKCQkJZWZmZWN0LktleS5UYWtlRWZmZWN0KHVzZXIsIHRhcmdldCwgZWZmZWN0LlZhbHVlKTsKCQl9Cgl9CgoJcHVibGljIHN0YXRpYyBFZmZlY3REYXRhIEdldEVmZmVjdERhdGFCeUtleShzdHJpbmcga2V5KQoJewoJCXJldHVybiBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8RWZmZWN0RGF0YT4oR2FtZU1hbmFnZXIuQ29uZmlnLkVmZmVjdCwga2V5KTsKCX0KCXB1YmxpYyBzdGF0aWMgTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+PiBHZXRFZmZlY3RHcm91cEJ5S2V5KHN0cmluZyBrZXkpCgl7CgkJcmV0dXJuIEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+PihHYW1lTWFuYWdlci5Db25maWcuRWZmZWN0R3JvdXAsIGtleSk7Cgl9CgoJcHVibGljIGNsYXNzIFZhbXBpcmljV2VhcG9uRWZmZWN0IDogRWZmZWN0RGF0YQoJewoJCXB1YmxpYyBpbnQgUGVyY2VudGFnZUhlYWx0aFN0b2xlbjsKCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlyZXR1cm4gJCJDb252ZXJ0IHtQZXJjZW50YWdlSGVhbHRoU3RvbGVufSUgb2YgcGh5c2ljYWwgZGFtYWdlIGludG8gSGVhbHRoIjsKCQl9CgoJCXB1YmxpYyB2b2lkIE9uUG9zdEF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCwgQ2hhcmFjdGVyRGF0YSBhdHRhY2tlciwgRGFtYWdlIGRhbWFnZSkKCQl7CgkJCWludCBhbW91bnQgPSBNYXRoZi5GbG9vclRvSW50KGRhbWFnZS5HZXREYW1hZ2UoU3RhdFN5c3RlbS5EYW1hZ2VUeXBlLlBoeXNpY2FsKSAqIChQZXJjZW50YWdlSGVhbHRoU3RvbGVuIC8gMTAwLjBmKSk7CgkJCXRhcmdldC5TdGF0cy5DaGFuZ2VIZWFsdGgoYW1vdW50LCBhdHRhY2tlcik7CgkJfQoJfQoKCS8vIHB1YmxpYyBjbGFzcyBBZGRIZWFsdGhVc2FnZUVmZmVjdCA6IEVmZmVjdERhdGEKCS8vIHsKCS8vIAkvL1tGb3JtZXJseVNlcmlhbGl6ZWRBcygiSGVhbHRoUHVyY2VudGFnZUFtb3VudCIpXQoJLy8gCXB1YmxpYyBpbnQgSGVhbHRoUGVyY2VudGFnZUFtb3VudCA9IDIwOwoKCS8vIAlwdWJsaWMgYm9vbCBPblVzZShDaGFyYWN0ZXJEYXRhIHVzZXIpCgkvLyAJewoJLy8gCQlpZiAodXNlci5TdGF0cy5DdXJyZW50SGVhbHRoID09IHVzZXIuU3RhdHMuc3RhdHMuaGVhbHRoKQoJLy8gCQkJcmV0dXJuIGZhbHNlOwoKCS8vIAkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuSGVhbGluZywgdXNlci50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCS8vIAkJdXNlci5TdGF0cy5DaGFuZ2VIZWFsdGgoTWF0aGYuRmxvb3JUb0ludChIZWFsdGhQZXJjZW50YWdlQW1vdW50IC8gMTAwLjBmICogdXNlci5TdGF0cy5zdGF0cy5oZWFsdGgpKTsKCgkvLyAJCXJldHVybiB0cnVlOwoJLy8gCX0KCS8vIH0KCglwdWJsaWMgY2xhc3MgSW5jcmVhc2VTdHJlbmd0aEVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgZmxvYXQgRHVyYXRpb24gPSAxMC4wZjsKCQlwdWJsaWMgaW50IFN0cmVuZ3RoQ2hhbmdlID0gNTsKCQlwdWJsaWMgU3ByaXRlIEVmZmVjdFNwcml0ZTsKCgkJcHVibGljIGJvb2wgT25Vc2UoQ2hhcmFjdGVyRGF0YSB1c2VyKQoJCXsKCQkJU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIgbW9kaWZpZXIgPSBuZXcgU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIoKTsKCQkJbW9kaWZpZXIuTW9kaWZpZXJNb2RlID0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5BYnNvbHV0ZTsKCQkJbW9kaWZpZXIuU3RhdHMuc3RyZW5ndGggPSBTdHJlbmd0aENoYW5nZTsKCgkJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLlN0cm9uZ2VyLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJCQl1c2VyLlN0YXRzLkFkZFRpbWVkTW9kaWZpZXIobW9kaWZpZXIsIER1cmF0aW9uLCAiU3RyZW5ndGhBZGQiLCBFZmZlY3RTcHJpdGUpOwoKCQkJcmV0dXJuIHRydWU7CgkJfQoJfQoKCXB1YmxpYyBjbGFzcyBBcHBseUJ1cm5XZWFwb25FZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGZsb2F0IFBlcmNlbnRhZ2VDaGFuY2U7CgkJcHVibGljIGludCBEYW1hZ2U7CgkJcHVibGljIGZsb2F0IFRpbWU7CgoJCXB1YmxpYyB2b2lkIE9uQXR0YWNrKENoYXJhY3RlckRhdGEgdGFyZ2V0LCBDaGFyYWN0ZXJEYXRhIHVzZXIsIHJlZiBEYW1hZ2UgZGFtYWdlKQoJCXsKCQkJaWYgKFVuaXR5RW5naW5lLlJhbmRvbS52YWx1ZSA8IChQZXJjZW50YWdlQ2hhbmNlIC8gMTAwLjBmKSkKCQkJewoJCQkJRWxlbWVudGFsRWZmZWN0IGVmZmVjdCA9IG5ldyBFbGVtZW50YWxFZmZlY3QoVGltZSwgdGhpcywgMS4wZik7CgoJCQkJdGFyZ2V0LlN0YXRzLkFkZEVsZW1lbnRhbEVmZmVjdChlZmZlY3QpOwoJCQl9CgkJfQoJfQp9CgAAAAAAAAAAKh4AAAAAAAAAAAAAAAAAAAAAAAAqHgAAAAAAAAAAAAAAAAAAAAAAAPoeAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD6HgAAdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBNeUJveDsKCltDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiRWZmZWN0RGF0YSIsIG1lbnVOYW1lID0gIkRhdGEvRWZmZWN0RGF0YSIsIG9yZGVyID0gMSldCnB1YmxpYyBjbGFzcyBFZmZlY3REYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBFZmZlY3RUeXBlCgl7CgkJREFNQUdFLAoJCUhQQ0hBTkdFLAoJCVNQRUVEVVAsCgkJRElHLAoJCVNVTU1PTiwKCQlEUk9QQk9YLAoJCUFEREdPQUwsCgkJTE9SRE1PTkVZLAoJCUxPUkRFWFAsCgkJTE9SREVXQVJURVIsCgkJREVTVFJPWVNFTEYsCgkJT1BFTldJTkRPVwoJfQoJcHVibGljIEVmZmVjdFR5cGUgVHlwZTsKCXB1YmxpYyBWRlhUeXBlIFRha2VWRlggPSBWRlhUeXBlLk5PTkU7CglwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uOwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuSFBDSEFOR0UpXQoJcHVibGljIGludCBFZmZlY3RBbW91bnQ7CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5IUENIQU5HRSldCglwdWJsaWMgU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZSBFZmZlY3RNb2RlOwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuREFNQUdFKV0KCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCgoJcHVibGljIHZpcnR1YWwgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCXsKCQlyZXR1cm4gRGVzY3JpcHRpb247Cgl9CgoJcHVibGljIGJvb2wgVGFrZUVmZmVjdChHYW1lT2JqZWN0IHVzZXIsIEdhbWVPYmplY3QgdGFyZ2V0LCBzdHJpbmdbXSBwYXJhbSA9IG51bGwpCgl7CgkJYm9vbCBzdWNjZXNzID0gZmFsc2U7CgkJc3dpdGNoIChUeXBlKQoJCXsKCQkJY2FzZSBFZmZlY3RUeXBlLkRBTUFHRToKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuSFBDSEFOR0U6CgkJCQlpbnQgYWRkTW91bnQgPSAwOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCAmJiBpbnQuVHJ5UGFyc2UocGFyYW1bMF0sIG91dCBhZGRNb3VudCkpCgkJCQkJc3VjY2VzcyA9IENoYW5nZUhlYWx0aCh1c2VyLkdldENvbXBvbmVudDxDaGFyYWN0ZXI+KCksIHRhcmdldC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpLCBFZmZlY3RBbW91bnQgKyBhZGRNb3VudCk7CgkJCQllbHNlIHN1Y2Nlc3MgPSBDaGFuZ2VIZWFsdGgodXNlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpLCB0YXJnZXQuR2V0Q29tcG9uZW50PENoYXJhY3Rlcj4oKSwgRWZmZWN0QW1vdW50KTsKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRElHOgoJCQkJaWYgKHRhcmdldCAhPSBudWxsKQoJCQkJewoJCQkJCWludCBkZWVwID0gMTsKCQkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGRlZXApKQoJCQkJCXsKCQkJCQkJR2FtZU1hbmFnZXIuSW5zdGFuY2UuVGVycmFpblRvb2wuTG93ZXJUZXJyYWluKHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24sIGRlZXAgKiAwLjAwMDVmLCA1LCA1KTsKCQkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQkJfQoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5TVU1NT046CgkJCQlUcmFuc2Zvcm0gdHJhbnMgPSAodGFyZ2V0ICE9IG51bGwpID8gdGFyZ2V0LnRyYW5zZm9ybSA6IHVzZXIudHJhbnNmb3JtOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMSAmJiBwYXJhbVsxXSA9PSAic2VsZiIpIHRyYW5zID0gdXNlci50cmFuc2Zvcm07CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwKQoJCQkJewoJCQkJCUdhbWVPYmplY3QgcGJPYmogPSBSZXNvdXJjZXMuTG9hZChwYXJhbVswXSkgYXMgR2FtZU9iamVjdDsKCQkJCQlpZiAocGJPYmogIT0gbnVsbCkgeyBJbnN0YW50aWF0ZShwYk9iaiwgdHJhbnMucG9zaXRpb24sIHRyYW5zLnJvdGF0aW9uKTsgc3VjY2VzcyA9IHRydWU7IH0KCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRFJPUEJPWDoKCQkJCWlmIChwYXJhbSA9PSBudWxsIHx8IHBhcmFtLkxlbmd0aCA9PSAwKQoJCQkJewoJCQkJCURlYnVnLkxvZ0Vycm9yKCJEcm9wQm94RWZmZWN0IHRha2UgbWlzc2luZyBlbm91Z2ggcGFyYW1ldGVycyEgIiArICJ1c2VyPSAiICsgdXNlcik7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJewoJCQkJCURyb3BCb3ggZHJvcEJveCA9IERyb3BCb3guR2V0RHJvcEJveEJ5S2V5KHBhcmFtWzBdKTsKCQkJCQlpZiAoZHJvcEJveCAhPSBudWxsKQoJCQkJCXsKCQkJCQkJaW50IGNvdW50ID0gMTsKCQkJCQkJaWYgKHBhcmFtLkxlbmd0aCA+IDEpIGludC5UcnlQYXJzZShwYXJhbVsxXSwgb3V0IGNvdW50KTsKCQkJCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKQoJCQkJCQl7CgkJCQkJCQlmb3JlYWNoICh2YXIgZHJvcCBpbiBkcm9wQm94LkdldERyb3BJdGVtKCkpCgkJCQkJCQl7CgkJCQkJCQkJRHJvcEl0ZW0odXNlci50cmFuc2Zvcm0ucG9zaXRpb24sIGRyb3AuaXRlbSwgZHJvcC5pdGVtTnVtKTsKCQkJCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRHJvcCIsICQie2Ryb3AuaXRlbS5JdGVtTmFtZX14e2Ryb3AuaXRlbU51bX0iKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQlEZWJ1Zy5Mb2dFcnJvcigiR2V0IGJ5IGEgbm9leGlzdCBkcm9wYm94IGtleSA9ICIgKyBwYXJhbVswXSk7CgkJCQkJfQoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5BRERHT0FMOgoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCkKCQkJCXsKCQkJCQlHYW1lTWFuYWdlci5HYW1lR29hbC5BZGRHb2FsKEdvYWxEYXRhLkdldERhdGFCeUtleShwYXJhbVswXSkpOwoJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5MT1JETU9ORVk6CgkJCQlpbnQgbW9uZXkgPSAwOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCAmJiBpbnQuVHJ5UGFyc2UocGFyYW1bMF0sIG91dCBtb25leSkpCgkJCQl7CgkJCQkJR2FtZU1hbmFnZXIuTG9yZC5BZGRNb25leShtb25leSk7CgkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkxPUkRFWFA6CgkJCQlpbnQgZXhwID0gMDsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzBdLCBvdXQgZXhwKSkKCQkJCXsKCQkJCQlHYW1lTWFuYWdlci5Mb3JkLkFkZEV4cChleHApOwoJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5ERVNUUk9ZU0VMRjoKCQkJCUdhbWVNYW5hZ2VyLlN0YXJ0V2FpdEFjdGlvbigwLjFmLCAoKSA9PiBEZXN0cm95KHVzZXIpKTsKCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5PUEVOV0lORE9XOgoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCkKCQkJCXsKCQkJCQl2YXIgd2luID0gR2FtZU1hbmFnZXIuR2FtZVVJLk9wZW5XaW5kb3cocGFyYW1bMF0pOwoJCQkJCXN1Y2Nlc3MgPSB3aW4gIT0gbnVsbDsKCQkJCX0KCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJRGVidWcuTG9nRXJyb3IoIlRha2UgYSBpbGxlZ2FsIEVmZmVjdDoiICsgdGhpcyk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlpZiAoVGFrZVZGWCAhPSBWRlhUeXBlLk5PTkUgJiYgc3VjY2VzcykgVkZYTWFuYWdlci5QbGF5VkZYKFRha2VWRlgsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCQl2YXIgY2hhcmFjdGVyID0gdXNlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpOwoJCWlmIChzdWNjZXNzICYmIGNoYXJhY3RlcikgY2hhcmFjdGVyLkVmZmVjdEFjdGlvbj8uSW52b2tlKHRoaXMpOwoJCXJldHVybiBzdWNjZXNzOwoJfQoKCWJvb2wgQ2hhbmdlSGVhbHRoKENoYXJhY3RlciBhdHRhY2tlciwgQ2hhcmFjdGVyIHRhcmdldCwgaW50IHZhbHVlKQoJewoJCWlmIChFZmZlY3RNb2RlID09IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUuQWJzb2x1dGUpCgkJewoJCQl0YXJnZXQuU3RhdHMuQ2hhbmdlSGVhbHRoKHZhbHVlLCBhdHRhY2tlcik7CgkJCXJldHVybiB0cnVlOwoJCX0KCQllbHNlIGlmIChFZmZlY3RNb2RlID09IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUuUGVyY2VudGFnZSkKCQl7CgkJCWlmICh0YXJnZXQuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSB0YXJnZXQuU3RhdHMuc3RhdHMuaGVhbHRoICYmIHZhbHVlID4gMCkKCQkJCXJldHVybiB0cnVlOwoJCQl0YXJnZXQuU3RhdHMuQ2hhbmdlSGVhbHRoKE1hdGhmLkZsb29yVG9JbnQodmFsdWUgLyAxMDAuMGYgKiB0YXJnZXQuU3RhdHMuc3RhdHMuaGVhbHRoKSwgYXR0YWNrZXIpOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJcmV0dXJuIGZhbHNlOwoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBEcm9wSXRlbShWZWN0b3IzIHBvcywgSXRlbSBpdGVtLCBpbnQgbnVtKQoJewoJCUdhbWVPYmplY3QgbG9vdE9iaiA9IFJlc291cmNlcy5Mb2FkKCJMb290IikgYXMgR2FtZU9iamVjdDsKCQlWZWN0b3IzIGRpcmVjdGlvbiA9IFF1YXRlcm5pb24uRXVsZXIoMCwgUmFuZG9tLlJhbmdlKDAsIDM2MCksIDApICogVmVjdG9yMy5yaWdodDsKCQlWZWN0b3IzIHNwYXduUG9zaXRpb24gPSBwb3MgKyBkaXJlY3Rpb24gKiBSYW5kb20uUmFuZ2UoMSwgMyk7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBudW07IGkrKykKCQl7CgkJCUxvb3QgbG9vdCA9IEluc3RhbnRpYXRlKGxvb3RPYmosIHNwYXduUG9zaXRpb24sIFF1YXRlcm5pb24uRXVsZXIoMCwgMCwgMCkpLkdldENvbXBvbmVudDxMb290PigpOwoJCQlsb290Lkl0ZW0gPSBpdGVtOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgVGFrZUVmZmVjdHMoTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+PiBlZmZlY3RHcm91cCwgR2FtZU9iamVjdCB1c2VyLCBMaXN0PEdhbWVPYmplY3Q+IHRhcmdldHMpCgl7CgkJZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBlZmZlY3RHcm91cCkKCQl7CgkJCWZvcmVhY2ggKHZhciB0YXJnZXQgaW4gdGFyZ2V0cykKCQkJewoJCQkJZWZmZWN0LktleS5UYWtlRWZmZWN0KHVzZXIsIHRhcmdldCwgZWZmZWN0LlZhbHVlKTsKCQkJfQoJCX0KCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgVGFrZUVmZmVjdHMoTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+PiBlZmZlY3RHcm91cCwgR2FtZU9iamVjdCB1c2VyLCBHYW1lT2JqZWN0IHRhcmdldCkKCXsKCQlmb3JlYWNoICh2YXIgZWZmZWN0IGluIGVmZmVjdEdyb3VwKQoJCXsKCQkJZWZmZWN0LktleS5UYWtlRWZmZWN0KHVzZXIsIHRhcmdldCwgZWZmZWN0LlZhbHVlKTsKCQl9Cgl9CgoJcHVibGljIHN0YXRpYyBFZmZlY3REYXRhIEdldEVmZmVjdERhdGFCeUtleShzdHJpbmcga2V5KQoJewoJCXJldHVybiBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8RWZmZWN0RGF0YT4oR2FtZU1hbmFnZXIuQ29uZmlnLkVmZmVjdCwga2V5KTsKCX0KCXB1YmxpYyBzdGF0aWMgTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+PiBHZXRFZmZlY3RHcm91cEJ5S2V5KHN0cmluZyBrZXkpCgl7CgkJcmV0dXJuIEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+PihHYW1lTWFuYWdlci5Db25maWcuRWZmZWN0R3JvdXAsIGtleSk7Cgl9CgoJcHVibGljIGNsYXNzIFZhbXBpcmljV2VhcG9uRWZmZWN0IDogRWZmZWN0RGF0YQoJewoJCXB1YmxpYyBpbnQgUGVyY2VudGFnZUhlYWx0aFN0b2xlbjsKCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlyZXR1cm4gJCJDb252ZXJ0IHtQZXJjZW50YWdlSGVhbHRoU3RvbGVufSUgb2YgcGh5c2ljYWwgZGFtYWdlIGludG8gSGVhbHRoIjsKCQl9CgoJCXB1YmxpYyB2b2lkIE9uUG9zdEF0dGFjayhDaGFyYWN0ZXIgdGFyZ2V0LCBDaGFyYWN0ZXIgYXR0YWNrZXIsIERhbWFnZSBkYW1hZ2UpCgkJewoJCQlpbnQgYW1vdW50ID0gTWF0aGYuRmxvb3JUb0ludChkYW1hZ2UuR2V0RGFtYWdlKFN0YXRTeXN0ZW0uRGFtYWdlVHlwZS5QaHlzaWNhbCkgKiAoUGVyY2VudGFnZUhlYWx0aFN0b2xlbiAvIDEwMC4wZikpOwoJCQl0YXJnZXQuU3RhdHMuQ2hhbmdlSGVhbHRoKGFtb3VudCwgYXR0YWNrZXIpOwoJCX0KCX0KCgkvLyBwdWJsaWMgY2xhc3MgQWRkSGVhbHRoVXNhZ2VFZmZlY3QgOiBFZmZlY3REYXRhCgkvLyB7CgkvLyAJLy9bRm9ybWVybHlTZXJpYWxpemVkQXMoIkhlYWx0aFB1cmNlbnRhZ2VBbW91bnQiKV0KCS8vIAlwdWJsaWMgaW50IEhlYWx0aFBlcmNlbnRhZ2VBbW91bnQgPSAyMDsKCgkvLyAJcHVibGljIGJvb2wgT25Vc2UoQ2hhcmFjdGVyIHVzZXIpCgkvLyAJewoJLy8gCQlpZiAodXNlci5TdGF0cy5DdXJyZW50SGVhbHRoID09IHVzZXIuU3RhdHMuc3RhdHMuaGVhbHRoKQoJLy8gCQkJcmV0dXJuIGZhbHNlOwoKCS8vIAkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuSGVhbGluZywgdXNlci50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCS8vIAkJdXNlci5TdGF0cy5DaGFuZ2VIZWFsdGgoTWF0aGYuRmxvb3JUb0ludChIZWFsdGhQZXJjZW50YWdlQW1vdW50IC8gMTAwLjBmICogdXNlci5TdGF0cy5zdGF0cy5oZWFsdGgpKTsKCgkvLyAJCXJldHVybiB0cnVlOwoJLy8gCX0KCS8vIH0KCglwdWJsaWMgY2xhc3MgSW5jcmVhc2VTdHJlbmd0aEVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgZmxvYXQgRHVyYXRpb24gPSAxMC4wZjsKCQlwdWJsaWMgaW50IFN0cmVuZ3RoQ2hhbmdlID0gNTsKCQlwdWJsaWMgU3ByaXRlIEVmZmVjdFNwcml0ZTsKCgkJcHVibGljIGJvb2wgT25Vc2UoQ2hhcmFjdGVyIHVzZXIpCgkJewoJCQlTdGF0U3lzdGVtLlN0YXRNb2RpZmllciBtb2RpZmllciA9IG5ldyBTdGF0U3lzdGVtLlN0YXRNb2RpZmllcigpOwoJCQltb2RpZmllci5Nb2RpZmllck1vZGUgPSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLkFic29sdXRlOwoJCQltb2RpZmllci5TdGF0cy5zdHJlbmd0aCA9IFN0cmVuZ3RoQ2hhbmdlOwoKCQkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuU3Ryb25nZXIsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJCXVzZXIuU3RhdHMuQWRkVGltZWRNb2RpZmllcihtb2RpZmllciwgRHVyYXRpb24sICJTdHJlbmd0aEFkZCIsIEVmZmVjdFNwcml0ZSk7CgoJCQlyZXR1cm4gdHJ1ZTsKCQl9Cgl9CgoJcHVibGljIGNsYXNzIEFwcGx5QnVybldlYXBvbkVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgZmxvYXQgUGVyY2VudGFnZUNoYW5jZTsKCQlwdWJsaWMgaW50IERhbWFnZTsKCQlwdWJsaWMgZmxvYXQgVGltZTsKCgkJcHVibGljIHZvaWQgT25BdHRhY2soQ2hhcmFjdGVyIHRhcmdldCwgQ2hhcmFjdGVyIHVzZXIsIHJlZiBEYW1hZ2UgZGFtYWdlKQoJCXsKCQkJaWYgKFVuaXR5RW5naW5lLlJhbmRvbS52YWx1ZSA8IChQZXJjZW50YWdlQ2hhbmNlIC8gMTAwLjBmKSkKCQkJewoJCQkJRWxlbWVudGFsRWZmZWN0IGVmZmVjdCA9IG5ldyBFbGVtZW50YWxFZmZlY3QoVGltZSwgdGhpcywgMS4wZik7CgoJCQkJdGFyZ2V0LlN0YXRzLkFkZEVsZW1lbnRhbEVmZmVjdChlZmZlY3QpOwoJCQl9CgkJfQoJfQp9CgAAAAAAAAAAeB8AAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"revert",
					null,
					"BQAAAAAAAAAAAAAAAAAAAAAAAAB4HwAAdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBNeUJveDsKCltDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiRWZmZWN0RGF0YSIsIG1lbnVOYW1lID0gIkRhdGEvRWZmZWN0RGF0YSIsIG9yZGVyID0gMSldCnB1YmxpYyBjbGFzcyBFZmZlY3REYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBFZmZlY3RUeXBlCgl7CgkJREFNQUdFLAoJCUhQQ0hBTkdFLAoJCVNQRUVEVVAsCgkJRElHLAoJCVNVTU1PTiwKCQlEUk9QQk9YLAoJCUFEREdPQUwsCgkJTE9SRE1PTkVZLAoJCUxPUkRFWFAsCgkJTE9SREVXQVJURVIsCgkJREVTVFJPWVNFTEYsCgkJT1BFTldJTkRPVwoJfQoJcHVibGljIEVmZmVjdFR5cGUgVHlwZTsKCXB1YmxpYyBWRlhUeXBlIFRha2VWRlggPSBWRlhUeXBlLk5PTkU7CglwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uOwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuSFBDSEFOR0UpXQoJcHVibGljIGludCBFZmZlY3RBbW91bnQ7CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5IUENIQU5HRSldCglwdWJsaWMgU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZSBFZmZlY3RNb2RlOwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuREFNQUdFKV0KCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCgoJcHVibGljIHZpcnR1YWwgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCXsKCQlyZXR1cm4gRGVzY3JpcHRpb247Cgl9CgoJcHVibGljIGJvb2wgVGFrZUVmZmVjdChHYW1lT2JqZWN0IHVzZXIsIEdhbWVPYmplY3QgdGFyZ2V0LCBzdHJpbmdbXSBwYXJhbSA9IG51bGwpCgl7CgkJYm9vbCBzdWNjZXNzID0gZmFsc2U7CgkJc3dpdGNoIChUeXBlKQoJCXsKCQkJY2FzZSBFZmZlY3RUeXBlLkRBTUFHRToKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuSFBDSEFOR0U6CgkJCQlpbnQgYWRkTW91bnQgPSAwOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCAmJiBpbnQuVHJ5UGFyc2UocGFyYW1bMF0sIG91dCBhZGRNb3VudCkpCgkJCQkJc3VjY2VzcyA9IENoYW5nZUhlYWx0aCh1c2VyLkdldENvbXBvbmVudDxDaGFyYWN0ZXI+KCksIHRhcmdldC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpLCBFZmZlY3RBbW91bnQgKyBhZGRNb3VudCk7CgkJCQllbHNlIHN1Y2Nlc3MgPSBDaGFuZ2VIZWFsdGgodXNlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpLCB0YXJnZXQuR2V0Q29tcG9uZW50PENoYXJhY3Rlcj4oKSwgRWZmZWN0QW1vdW50KTsKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRElHOgoJCQkJaWYgKHRhcmdldCAhPSBudWxsKQoJCQkJewoJCQkJCWludCBkZWVwID0gMTsKCQkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGRlZXApKQoJCQkJCXsKCQkJCQkJR2FtZU1hbmFnZXIuSW5zdGFuY2UuVGVycmFpblRvb2wuTG93ZXJUZXJyYWluKHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24sIGRlZXAgKiAwLjAwMDVmLCA1LCA1KTsKCQkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQkJfQoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5TVU1NT046CgkJCQlUcmFuc2Zvcm0gdHJhbnMgPSAodGFyZ2V0ICE9IG51bGwpID8gdGFyZ2V0LnRyYW5zZm9ybSA6IHVzZXIudHJhbnNmb3JtOwoJCQkJR2FtZU9iamVjdCBwYk9iaiA9IG51bGw7CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwKSBwYk9iaiA9IEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxHYW1lT2JqZWN0PihHYW1lTWFuYWdlci5Db25maWcuUHJlZmFiQ29uZmlnLCBwYXJhbVswXSk7CgkJCQlpZiAocGJPYmogPSBudWxsKSBwYk9iaiA9IFJlc291cmNlcy5Mb2FkKHBhcmFtWzBdKSBhcyBHYW1lT2JqZWN0OwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMSAmJiBwYXJhbVsxXSA9PSAic2VsZiIpIHRyYW5zID0gdXNlci50cmFuc2Zvcm07CgkJCQlpZiAocGJPYmogIT0gbnVsbCkKCQkJCXsKCQkJCQlJbnN0YW50aWF0ZShwYk9iaiwgdHJhbnMucG9zaXRpb24sIHRyYW5zLnJvdGF0aW9uKTsKCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRFJPUEJPWDoKCQkJCWlmIChwYXJhbSA9PSBudWxsIHx8IHBhcmFtLkxlbmd0aCA9PSAwKQoJCQkJewoJCQkJCURlYnVnLkxvZ0Vycm9yKCJEcm9wQm94RWZmZWN0IHRha2UgbWlzc2luZyBlbm91Z2ggcGFyYW1ldGVycyEgIiArICJ1c2VyPSAiICsgdXNlcik7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJewoJCQkJCURyb3BCb3ggZHJvcEJveCA9IERyb3BCb3guR2V0RHJvcEJveEJ5S2V5KHBhcmFtWzBdKTsKCQkJCQlpZiAoZHJvcEJveCAhPSBudWxsKQoJCQkJCXsKCQkJCQkJaW50IGNvdW50ID0gMTsKCQkJCQkJaWYgKHBhcmFtLkxlbmd0aCA+IDEpIGludC5UcnlQYXJzZShwYXJhbVsxXSwgb3V0IGNvdW50KTsKCQkJCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKQoJCQkJCQl7CgkJCQkJCQlmb3JlYWNoICh2YXIgZHJvcCBpbiBkcm9wQm94LkdldERyb3BJdGVtKCkpCgkJCQkJCQl7CgkJCQkJCQkJRHJvcEl0ZW0odXNlci50cmFuc2Zvcm0ucG9zaXRpb24sIGRyb3AuaXRlbSwgZHJvcC5pdGVtTnVtKTsKCQkJCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRHJvcCIsICQie2Ryb3AuaXRlbS5JdGVtTmFtZX14e2Ryb3AuaXRlbU51bX0iKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQlEZWJ1Zy5Mb2dFcnJvcigiR2V0IGJ5IGEgbm9leGlzdCBkcm9wYm94IGtleSA9ICIgKyBwYXJhbVswXSk7CgkJCQkJfQoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5BRERHT0FMOgoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCkKCQkJCXsKCQkJCQlHYW1lTWFuYWdlci5HYW1lR29hbC5BZGRHb2FsKEdvYWxEYXRhLkdldERhdGFCeUtleShwYXJhbVswXSkpOwoJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5MT1JETU9ORVk6CgkJCQlpbnQgbW9uZXkgPSAwOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCAmJiBpbnQuVHJ5UGFyc2UocGFyYW1bMF0sIG91dCBtb25leSkpCgkJCQl7CgkJCQkJR2FtZU1hbmFnZXIuTG9yZC5BZGRNb25leShtb25leSk7CgkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkxPUkRFWFA6CgkJCQlpbnQgZXhwID0gMDsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzBdLCBvdXQgZXhwKSkKCQkJCXsKCQkJCQlHYW1lTWFuYWdlci5Mb3JkLkFkZEV4cChleHApOwoJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5ERVNUUk9ZU0VMRjoKCQkJCUdhbWVNYW5hZ2VyLlN0YXJ0V2FpdEFjdGlvbigwLjFmLCAoKSA9PiBEZXN0cm95KHVzZXIpKTsKCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5PUEVOV0lORE9XOgoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCkKCQkJCXsKCQkJCQl2YXIgd2luID0gR2FtZU1hbmFnZXIuR2FtZVVJLk9wZW5XaW5kb3cocGFyYW1bMF0pOwoJCQkJCXN1Y2Nlc3MgPSB3aW4gIT0gbnVsbDsKCQkJCX0KCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJRGVidWcuTG9nRXJyb3IoIlRha2UgYSBpbGxlZ2FsIEVmZmVjdDoiICsgdGhpcyk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlpZiAoVGFrZVZGWCAhPSBWRlhUeXBlLk5PTkUgJiYgc3VjY2VzcykgVkZYTWFuYWdlci5QbGF5VkZYKFRha2VWRlgsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCQl2YXIgY2hhcmFjdGVyID0gdXNlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpOwoJCWlmIChzdWNjZXNzICYmIGNoYXJhY3RlcikgY2hhcmFjdGVyLkVmZmVjdEFjdGlvbj8uSW52b2tlKHRoaXMpOwoJCXJldHVybiBzdWNjZXNzOwoJfQoKCWJvb2wgQ2hhbmdlSGVhbHRoKENoYXJhY3RlciBhdHRhY2tlciwgQ2hhcmFjdGVyIHRhcmdldCwgaW50IHZhbHVlKQoJewoJCWlmIChFZmZlY3RNb2RlID09IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUuQWJzb2x1dGUpCgkJewoJCQl0YXJnZXQuU3RhdHMuQ2hhbmdlSGVhbHRoKHZhbHVlLCBhdHRhY2tlcik7CgkJCXJldHVybiB0cnVlOwoJCX0KCQllbHNlIGlmIChFZmZlY3RNb2RlID09IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUuUGVyY2VudGFnZSkKCQl7CgkJCWlmICh0YXJnZXQuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSB0YXJnZXQuU3RhdHMuc3RhdHMuaGVhbHRoICYmIHZhbHVlID4gMCkKCQkJCXJldHVybiB0cnVlOwoJCQl0YXJnZXQuU3RhdHMuQ2hhbmdlSGVhbHRoKE1hdGhmLkZsb29yVG9JbnQodmFsdWUgLyAxMDAuMGYgKiB0YXJnZXQuU3RhdHMuc3RhdHMuaGVhbHRoKSwgYXR0YWNrZXIpOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJcmV0dXJuIGZhbHNlOwoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBEcm9wSXRlbShWZWN0b3IzIHBvcywgSXRlbSBpdGVtLCBpbnQgbnVtKQoJewoJCUdhbWVPYmplY3QgbG9vdE9iaiA9IFJlc291cmNlcy5Mb2FkKCJMb290IikgYXMgR2FtZU9iamVjdDsKCQlWZWN0b3IzIGRpcmVjdGlvbiA9IFF1YXRlcm5pb24uRXVsZXIoMCwgUmFuZG9tLlJhbmdlKDAsIDM2MCksIDApICogVmVjdG9yMy5yaWdodDsKCQlWZWN0b3IzIHNwYXduUG9zaXRpb24gPSBwb3MgKyBkaXJlY3Rpb24gKiBSYW5kb20uUmFuZ2UoMSwgMyk7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBudW07IGkrKykKCQl7CgkJCUxvb3QgbG9vdCA9IEluc3RhbnRpYXRlKGxvb3RPYmosIHNwYXduUG9zaXRpb24sIFF1YXRlcm5pb24uRXVsZXIoMCwgMCwgMCkpLkdldENvbXBvbmVudDxMb290PigpOwoJCQlsb290Lkl0ZW0gPSBpdGVtOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgVGFrZUVmZmVjdHMoTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+PiBlZmZlY3RHcm91cCwgR2FtZU9iamVjdCB1c2VyLCBMaXN0PEdhbWVPYmplY3Q+IHRhcmdldHMpCgl7CgkJZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBlZmZlY3RHcm91cCkKCQl7CgkJCWZvcmVhY2ggKHZhciB0YXJnZXQgaW4gdGFyZ2V0cykKCQkJewoJCQkJZWZmZWN0LktleS5UYWtlRWZmZWN0KHVzZXIsIHRhcmdldCwgZWZmZWN0LlZhbHVlKTsKCQkJfQoJCX0KCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgVGFrZUVmZmVjdHMoTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+PiBlZmZlY3RHcm91cCwgR2FtZU9iamVjdCB1c2VyLCBHYW1lT2JqZWN0IHRhcmdldCkKCXsKCQlmb3JlYWNoICh2YXIgZWZmZWN0IGluIGVmZmVjdEdyb3VwKQoJCXsKCQkJZWZmZWN0LktleS5UYWtlRWZmZWN0KHVzZXIsIHRhcmdldCwgZWZmZWN0LlZhbHVlKTsKCQl9Cgl9CgoJcHVibGljIHN0YXRpYyBFZmZlY3REYXRhIEdldEVmZmVjdERhdGFCeUtleShzdHJpbmcga2V5KQoJewoJCXJldHVybiBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8RWZmZWN0RGF0YT4oR2FtZU1hbmFnZXIuQ29uZmlnLkVmZmVjdCwga2V5KTsKCX0KCXB1YmxpYyBzdGF0aWMgTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+PiBHZXRFZmZlY3RHcm91cEJ5S2V5KHN0cmluZyBrZXkpCgl7CgkJcmV0dXJuIEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+PihHYW1lTWFuYWdlci5Db25maWcuRWZmZWN0R3JvdXAsIGtleSk7Cgl9CgoJcHVibGljIGNsYXNzIFZhbXBpcmljV2VhcG9uRWZmZWN0IDogRWZmZWN0RGF0YQoJewoJCXB1YmxpYyBpbnQgUGVyY2VudGFnZUhlYWx0aFN0b2xlbjsKCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlyZXR1cm4gJCJDb252ZXJ0IHtQZXJjZW50YWdlSGVhbHRoU3RvbGVufSUgb2YgcGh5c2ljYWwgZGFtYWdlIGludG8gSGVhbHRoIjsKCQl9CgoJCXB1YmxpYyB2b2lkIE9uUG9zdEF0dGFjayhDaGFyYWN0ZXIgdGFyZ2V0LCBDaGFyYWN0ZXIgYXR0YWNrZXIsIERhbWFnZSBkYW1hZ2UpCgkJewoJCQlpbnQgYW1vdW50ID0gTWF0aGYuRmxvb3JUb0ludChkYW1hZ2UuR2V0RGFtYWdlKFN0YXRTeXN0ZW0uRGFtYWdlVHlwZS5QaHlzaWNhbCkgKiAoUGVyY2VudGFnZUhlYWx0aFN0b2xlbiAvIDEwMC4wZikpOwoJCQl0YXJnZXQuU3RhdHMuQ2hhbmdlSGVhbHRoKGFtb3VudCwgYXR0YWNrZXIpOwoJCX0KCX0KCgkvLyBwdWJsaWMgY2xhc3MgQWRkSGVhbHRoVXNhZ2VFZmZlY3QgOiBFZmZlY3REYXRhCgkvLyB7CgkvLyAJLy9bRm9ybWVybHlTZXJpYWxpemVkQXMoIkhlYWx0aFB1cmNlbnRhZ2VBbW91bnQiKV0KCS8vIAlwdWJsaWMgaW50IEhlYWx0aFBlcmNlbnRhZ2VBbW91bnQgPSAyMDsKCgkvLyAJcHVibGljIGJvb2wgT25Vc2UoQ2hhcmFjdGVyIHVzZXIpCgkvLyAJewoJLy8gCQlpZiAodXNlci5TdGF0cy5DdXJyZW50SGVhbHRoID09IHVzZXIuU3RhdHMuc3RhdHMuaGVhbHRoKQoJLy8gCQkJcmV0dXJuIGZhbHNlOwoKCS8vIAkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuSGVhbGluZywgdXNlci50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCS8vIAkJdXNlci5TdGF0cy5DaGFuZ2VIZWFsdGgoTWF0aGYuRmxvb3JUb0ludChIZWFsdGhQZXJjZW50YWdlQW1vdW50IC8gMTAwLjBmICogdXNlci5TdGF0cy5zdGF0cy5oZWFsdGgpKTsKCgkvLyAJCXJldHVybiB0cnVlOwoJLy8gCX0KCS8vIH0KCglwdWJsaWMgY2xhc3MgSW5jcmVhc2VTdHJlbmd0aEVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgZmxvYXQgRHVyYXRpb24gPSAxMC4wZjsKCQlwdWJsaWMgaW50IFN0cmVuZ3RoQ2hhbmdlID0gNTsKCQlwdWJsaWMgU3ByaXRlIEVmZmVjdFNwcml0ZTsKCgkJcHVibGljIGJvb2wgT25Vc2UoQ2hhcmFjdGVyIHVzZXIpCgkJewoJCQlTdGF0U3lzdGVtLlN0YXRNb2RpZmllciBtb2RpZmllciA9IG5ldyBTdGF0U3lzdGVtLlN0YXRNb2RpZmllcigpOwoJCQltb2RpZmllci5Nb2RpZmllck1vZGUgPSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLkFic29sdXRlOwoJCQltb2RpZmllci5TdGF0cy5zdHJlbmd0aCA9IFN0cmVuZ3RoQ2hhbmdlOwoKCQkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuU3Ryb25nZXIsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJCXVzZXIuU3RhdHMuQWRkVGltZWRNb2RpZmllcihtb2RpZmllciwgRHVyYXRpb24sICJTdHJlbmd0aEFkZCIsIEVmZmVjdFNwcml0ZSk7CgoJCQlyZXR1cm4gdHJ1ZTsKCQl9Cgl9CgoJcHVibGljIGNsYXNzIEFwcGx5QnVybldlYXBvbkVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgZmxvYXQgUGVyY2VudGFnZUNoYW5jZTsKCQlwdWJsaWMgaW50IERhbWFnZTsKCQlwdWJsaWMgZmxvYXQgVGltZTsKCgkJcHVibGljIHZvaWQgT25BdHRhY2soQ2hhcmFjdGVyIHRhcmdldCwgQ2hhcmFjdGVyIHVzZXIsIHJlZiBEYW1hZ2UgZGFtYWdlKQoJCXsKCQkJaWYgKFVuaXR5RW5naW5lLlJhbmRvbS52YWx1ZSA8IChQZXJjZW50YWdlQ2hhbmNlIC8gMTAwLjBmKSkKCQkJewoJCQkJRWxlbWVudGFsRWZmZWN0IGVmZmVjdCA9IG5ldyBFbGVtZW50YWxFZmZlY3QoVGltZSwgdGhpcywgMS4wZik7CgoJCQkJdGFyZ2V0LlN0YXRzLkFkZEVsZW1lbnRhbEVmZmVjdChlZmZlY3QpOwoJCQl9CgkJfQoJfQp9CgAAAAAAAAAAcx8AAAAAAAAAAAAAAAAAAAAAAABzHwAAAAAAAAAAAAAAAAAAAAAAABohAAAAAAAAAAAAAAAAAAAAAAAAGiEAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAaIQAAdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBNeUJveDsKCltDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiRWZmZWN0RGF0YSIsIG1lbnVOYW1lID0gIkRhdGEvRWZmZWN0RGF0YSIsIG9yZGVyID0gMSldCnB1YmxpYyBjbGFzcyBFZmZlY3REYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBFZmZlY3RUeXBlCgl7CgkJREFNQUdFLAoJCUhQQ0hBTkdFLAoJCVNQRUVEVVAsCgkJRElHLAoJCVNVTU1PTiwKCQlEUk9QQk9YLAoJCUFEREdPQUwsCgkJTE9SRE1PTkVZLAoJCUxPUkRFWFAsCgkJTE9SREVXQVJURVIsCgkJREVTVFJPWVNFTEYsCgkJT1BFTldJTkRPVywKCQlNT1ZFQkFDSwoJfQoJcHVibGljIEVmZmVjdFR5cGUgVHlwZTsKCXB1YmxpYyBWRlhUeXBlIFRha2VWRlggPSBWRlhUeXBlLk5PTkU7CglwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uOwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuSFBDSEFOR0UpXQoJcHVibGljIGludCBFZmZlY3RBbW91bnQ7CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5IUENIQU5HRSldCglwdWJsaWMgU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZSBFZmZlY3RNb2RlOwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuREFNQUdFKV0KCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCgoJcHVibGljIHZpcnR1YWwgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCXsKCQlyZXR1cm4gRGVzY3JpcHRpb247Cgl9CgoJcHVibGljIGJvb2wgVGFrZUVmZmVjdChHYW1lT2JqZWN0IHVzZXIsIEdhbWVPYmplY3QgdGFyZ2V0LCBzdHJpbmdbXSBwYXJhbSA9IG51bGwpCgl7CgkJYm9vbCBzdWNjZXNzID0gZmFsc2U7CgkJc3dpdGNoIChUeXBlKQoJCXsKCQkJY2FzZSBFZmZlY3RUeXBlLkRBTUFHRToKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuSFBDSEFOR0U6CgkJCQlpbnQgYWRkTW91bnQgPSAwOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCAmJiBpbnQuVHJ5UGFyc2UocGFyYW1bMF0sIG91dCBhZGRNb3VudCkpCgkJCQkJc3VjY2VzcyA9IENoYW5nZUhlYWx0aCh1c2VyLkdldENvbXBvbmVudDxDaGFyYWN0ZXI+KCksIHRhcmdldC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpLCBFZmZlY3RBbW91bnQgKyBhZGRNb3VudCk7CgkJCQllbHNlIHN1Y2Nlc3MgPSBDaGFuZ2VIZWFsdGgodXNlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpLCB0YXJnZXQuR2V0Q29tcG9uZW50PENoYXJhY3Rlcj4oKSwgRWZmZWN0QW1vdW50KTsKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRElHOgoJCQkJaWYgKHRhcmdldCAhPSBudWxsKQoJCQkJewoJCQkJCWludCBkZWVwID0gMTsKCQkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGRlZXApKQoJCQkJCXsKCQkJCQkJR2FtZU1hbmFnZXIuSW5zdGFuY2UuVGVycmFpblRvb2wuTG93ZXJUZXJyYWluKHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24sIGRlZXAgKiAwLjAwMDVmLCA1LCA1KTsKCQkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQkJfQoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5TVU1NT046CgkJCQlUcmFuc2Zvcm0gdHJhbnMgPSAodGFyZ2V0ICE9IG51bGwpID8gdGFyZ2V0LnRyYW5zZm9ybSA6IHVzZXIudHJhbnNmb3JtOwoJCQkJc3RyaW5nIHByZWZhYlBhdGggPSAiIjsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDApIHByZWZhYlBhdGggPSBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8c3RyaW5nPihHYW1lTWFuYWdlci5Db25maWcuUHJlZmFiQ29uZmlnLCBwYXJhbVswXSk7CgkJCQlHYW1lT2JqZWN0IHBiT2JqID0gUmVzb3VyY2VzLkxvYWQocHJlZmFiUGF0aCkgYXMgR2FtZU9iamVjdDsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDEgJiYgcGFyYW1bMV0gPT0gInNlbGYiKSB0cmFucyA9IHVzZXIudHJhbnNmb3JtOwoJCQkJaWYgKHBiT2JqICE9IG51bGwpCgkJCQl7CgkJCQkJSW5zdGFudGlhdGUocGJPYmosIHRyYW5zLnBvc2l0aW9uLCB0cmFucy5yb3RhdGlvbik7CgkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkRST1BCT1g6CgkJCQlpZiAocGFyYW0gPT0gbnVsbCB8fCBwYXJhbS5MZW5ndGggPT0gMCkKCQkJCXsKCQkJCQlEZWJ1Zy5Mb2dFcnJvcigiRHJvcEJveEVmZmVjdCB0YWtlIG1pc3NpbmcgZW5vdWdoIHBhcmFtZXRlcnMhICIgKyAidXNlcj0gIiArIHVzZXIpOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJCXsKCQkJCQlEcm9wQm94IGRyb3BCb3ggPSBEcm9wQm94LkdldERyb3BCb3hCeUtleShwYXJhbVswXSk7CgkJCQkJaWYgKGRyb3BCb3ggIT0gbnVsbCkKCQkJCQl7CgkJCQkJCWludCBjb3VudCA9IDE7CgkJCQkJCWlmIChwYXJhbS5MZW5ndGggPiAxKSBpbnQuVHJ5UGFyc2UocGFyYW1bMV0sIG91dCBjb3VudCk7CgkJCQkJCWZvciAoaW50IGkgPSAwOyBpIDwgY291bnQ7IGkrKykKCQkJCQkJewoJCQkJCQkJZm9yZWFjaCAodmFyIGRyb3AgaW4gZHJvcEJveC5HZXREcm9wSXRlbSgpKQoJCQkJCQkJewoJCQkJCQkJCURyb3BJdGVtKHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uLCBkcm9wLml0ZW0sIGRyb3AuaXRlbU51bSk7CgkJCQkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQkJCQkJSGVscGVycy5Mb2codGhpcywgIkRyb3AiLCAkIntkcm9wLml0ZW0uSXRlbU5hbWV9eHtkcm9wLml0ZW1OdW19Iik7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJRGVidWcuTG9nRXJyb3IoIkdldCBieSBhIG5vZXhpc3QgZHJvcGJveCBrZXkgPSAiICsgcGFyYW1bMF0pOwoJCQkJCX0KCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuQURER09BTDoKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDApCgkJCQl7CgkJCQkJR2FtZU1hbmFnZXIuR2FtZUdvYWwuQWRkR29hbChHb2FsRGF0YS5HZXREYXRhQnlLZXkocGFyYW1bMF0pKTsKCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuTE9SRE1PTkVZOgoJCQkJaW50IG1vbmV5ID0gMDsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDAgJiYgaW50LlRyeVBhcnNlKHBhcmFtWzBdLCBvdXQgbW9uZXkpKQoJCQkJewoJCQkJCUdhbWVNYW5hZ2VyLkxvcmQuQWRkTW9uZXkobW9uZXkpOwoJCQkJCXN1Y2Nlc3MgPSB0cnVlOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5MT1JERVhQOgoJCQkJaW50IGV4cCA9IDA7CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGV4cCkpCgkJCQl7CgkJCQkJR2FtZU1hbmFnZXIuTG9yZC5BZGRFeHAoZXhwKTsKCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuREVTVFJPWVNFTEY6CgkJCQlHYW1lTWFuYWdlci5TdGFydFdhaXRBY3Rpb24oMC4xZiwgKCkgPT4gRGVzdHJveSh1c2VyKSk7CgkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuT1BFTldJTkRPVzoKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDApCgkJCQl7CgkJCQkJdmFyIHdpbiA9IEdhbWVNYW5hZ2VyLkdhbWVVSS5PcGVuV2luZG93KHBhcmFtWzBdKTsKCQkJCQlzdWNjZXNzID0gd2luICE9IG51bGw7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLk1PVkVCQUNLOgoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMSkKCQkJCXsKCQkJCQl2YXIgbW92ZXIgPSBwYXJhbVswXSA9PSAic2VsZiIgPyB1c2VyLkdldENvbXBvbmVudDxDaGFyYWN0ZXI+KCkgOiB0YXJnZXQuR2V0Q29tcG9uZW50PENoYXJhY3Rlcj4oKTsKCQkJCQlmbG9hdCBkaXMgPSAwOwoJCQkJCWlmIChtb3ZlciAmJiBmbG9hdC5UcnlQYXJzZShwYXJhbVsxXSwgb3V0IGRpcykpCgkJCQkJewoJCQkJCQkvL0dhbWVNYW5hZ2VyLlN0YXJ0TmV4dEZyYW1lQWN0aW9uKCgpID0+IG1vdmVyLkJhc2VBSS5CYWNrKGRpcykpOwoJCQkJCQltb3Zlci5CYXNlQUkuQmFjayhkaXMpOwoJCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCURlYnVnLkxvZ0Vycm9yKCJUYWtlIGEgaWxsZWdhbCBFZmZlY3Q6IiArIHRoaXMpOwoJCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJaWYgKFRha2VWRlggIT0gVkZYVHlwZS5OT05FICYmIHN1Y2Nlc3MpIFZGWE1hbmFnZXIuUGxheVZGWChUYWtlVkZYLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJdmFyIGNoYXJhY3RlciA9IHVzZXIuR2V0Q29tcG9uZW50PENoYXJhY3Rlcj4oKTsKCQlpZiAoc3VjY2VzcyAmJiBjaGFyYWN0ZXIpIGNoYXJhY3Rlci5FZmZlY3RBY3Rpb24/Lkludm9rZSh0aGlzKTsKCQlyZXR1cm4gc3VjY2VzczsKCX0KCglib29sIENoYW5nZUhlYWx0aChDaGFyYWN0ZXIgYXR0YWNrZXIsIENoYXJhY3RlciB0YXJnZXQsIGludCB2YWx1ZSkKCXsKCQlpZiAoRWZmZWN0TW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLkFic29sdXRlKQoJCXsKCQkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aCh2YWx1ZSwgYXR0YWNrZXIpOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJZWxzZSBpZiAoRWZmZWN0TW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLlBlcmNlbnRhZ2UpCgkJewoJCQlpZiAodGFyZ2V0LlN0YXRzLkN1cnJlbnRIZWFsdGggPT0gdGFyZ2V0LlN0YXRzLnN0YXRzLmhlYWx0aCAmJiB2YWx1ZSA+IDApCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aChNYXRoZi5GbG9vclRvSW50KHZhbHVlIC8gMTAwLjBmICogdGFyZ2V0LlN0YXRzLnN0YXRzLmhlYWx0aCksIGF0dGFja2VyKTsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgRHJvcEl0ZW0oVmVjdG9yMyBwb3MsIEl0ZW0gaXRlbSwgaW50IG51bSkKCXsKCQlHYW1lT2JqZWN0IGxvb3RPYmogPSBSZXNvdXJjZXMuTG9hZCgiTG9vdCIpIGFzIEdhbWVPYmplY3Q7CgkJVmVjdG9yMyBkaXJlY3Rpb24gPSBRdWF0ZXJuaW9uLkV1bGVyKDAsIFJhbmRvbS5SYW5nZSgwLCAzNjApLCAwKSAqIFZlY3RvcjMucmlnaHQ7CgkJVmVjdG9yMyBzcGF3blBvc2l0aW9uID0gcG9zICsgZGlyZWN0aW9uICogUmFuZG9tLlJhbmdlKDEsIDMpOwoJCWZvciAoaW50IGkgPSAwOyBpIDwgbnVtOyBpKyspCgkJewoJCQlMb290IGxvb3QgPSBJbnN0YW50aWF0ZShsb290T2JqLCBzcGF3blBvc2l0aW9uLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDAsIDApKS5HZXRDb21wb25lbnQ8TG9vdD4oKTsKCQkJbG9vdC5JdGVtID0gaXRlbTsKCQl9Cgl9CgoJcHVibGljIHN0YXRpYyB2b2lkIFRha2VFZmZlY3RzKExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gZWZmZWN0R3JvdXAsIEdhbWVPYmplY3QgdXNlciwgTGlzdDxHYW1lT2JqZWN0PiB0YXJnZXRzKQoJewoJCWZvcmVhY2ggKHZhciBlZmZlY3QgaW4gZWZmZWN0R3JvdXApCgkJewoJCQlmb3JlYWNoICh2YXIgdGFyZ2V0IGluIHRhcmdldHMpCgkJCXsKCQkJCWVmZmVjdC5LZXkuVGFrZUVmZmVjdCh1c2VyLCB0YXJnZXQsIGVmZmVjdC5WYWx1ZSk7CgkJCX0KCQl9Cgl9CgoJcHVibGljIHN0YXRpYyB2b2lkIFRha2VFZmZlY3RzKExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gZWZmZWN0R3JvdXAsIEdhbWVPYmplY3QgdXNlciwgR2FtZU9iamVjdCB0YXJnZXQpCgl7CgkJZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBlZmZlY3RHcm91cCkKCQl7CgkJCWVmZmVjdC5LZXkuVGFrZUVmZmVjdCh1c2VyLCB0YXJnZXQsIGVmZmVjdC5WYWx1ZSk7CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgRWZmZWN0RGF0YSBHZXRFZmZlY3REYXRhQnlLZXkoc3RyaW5nIGtleSkKCXsKCQlyZXR1cm4gS2V5VmFsdWVEYXRhLkdldFZhbHVlPEVmZmVjdERhdGE+KEdhbWVNYW5hZ2VyLkNvbmZpZy5FZmZlY3QsIGtleSk7Cgl9CglwdWJsaWMgc3RhdGljIExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gR2V0RWZmZWN0R3JvdXBCeUtleShzdHJpbmcga2V5KQoJewoJCXJldHVybiBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8TGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+Pj4oR2FtZU1hbmFnZXIuQ29uZmlnLkVmZmVjdEdyb3VwLCBrZXkpOwoJfQoKCXB1YmxpYyBjbGFzcyBWYW1waXJpY1dlYXBvbkVmZmVjdCA6IEVmZmVjdERhdGEKCXsKCQlwdWJsaWMgaW50IFBlcmNlbnRhZ2VIZWFsdGhTdG9sZW47CgoJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJCXsKCQkJcmV0dXJuICQiQ29udmVydCB7UGVyY2VudGFnZUhlYWx0aFN0b2xlbn0lIG9mIHBoeXNpY2FsIGRhbWFnZSBpbnRvIEhlYWx0aCI7CgkJfQoKCQlwdWJsaWMgdm9pZCBPblBvc3RBdHRhY2soQ2hhcmFjdGVyIHRhcmdldCwgQ2hhcmFjdGVyIGF0dGFja2VyLCBEYW1hZ2UgZGFtYWdlKQoJCXsKCQkJaW50IGFtb3VudCA9IE1hdGhmLkZsb29yVG9JbnQoZGFtYWdlLkdldERhbWFnZShTdGF0U3lzdGVtLkRhbWFnZVR5cGUuUGh5c2ljYWwpICogKFBlcmNlbnRhZ2VIZWFsdGhTdG9sZW4gLyAxMDAuMGYpKTsKCQkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aChhbW91bnQsIGF0dGFja2VyKTsKCQl9Cgl9CgoJLy8gcHVibGljIGNsYXNzIEFkZEhlYWx0aFVzYWdlRWZmZWN0IDogRWZmZWN0RGF0YQoJLy8gewoJLy8gCS8vW0Zvcm1lcmx5U2VyaWFsaXplZEFzKCJIZWFsdGhQdXJjZW50YWdlQW1vdW50IildCgkvLyAJcHVibGljIGludCBIZWFsdGhQZXJjZW50YWdlQW1vdW50ID0gMjA7CgoJLy8gCXB1YmxpYyBib29sIE9uVXNlKENoYXJhY3RlciB1c2VyKQoJLy8gCXsKCS8vIAkJaWYgKHVzZXIuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSB1c2VyLlN0YXRzLnN0YXRzLmhlYWx0aCkKCS8vIAkJCXJldHVybiBmYWxzZTsKCgkvLyAJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkhlYWxpbmcsIHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkvLyAJCXVzZXIuU3RhdHMuQ2hhbmdlSGVhbHRoKE1hdGhmLkZsb29yVG9JbnQoSGVhbHRoUGVyY2VudGFnZUFtb3VudCAvIDEwMC4wZiAqIHVzZXIuU3RhdHMuc3RhdHMuaGVhbHRoKSk7CgoJLy8gCQlyZXR1cm4gdHJ1ZTsKCS8vIAl9CgkvLyB9CgoJcHVibGljIGNsYXNzIEluY3JlYXNlU3RyZW5ndGhFZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGZsb2F0IER1cmF0aW9uID0gMTAuMGY7CgkJcHVibGljIGludCBTdHJlbmd0aENoYW5nZSA9IDU7CgkJcHVibGljIFNwcml0ZSBFZmZlY3RTcHJpdGU7CgoJCXB1YmxpYyBib29sIE9uVXNlKENoYXJhY3RlciB1c2VyKQoJCXsKCQkJU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIgbW9kaWZpZXIgPSBuZXcgU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIoKTsKCQkJbW9kaWZpZXIuTW9kaWZpZXJNb2RlID0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5BYnNvbHV0ZTsKCQkJbW9kaWZpZXIuU3RhdHMuc3RyZW5ndGggPSBTdHJlbmd0aENoYW5nZTsKCgkJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLlN0cm9uZ2VyLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJCQl1c2VyLlN0YXRzLkFkZFRpbWVkTW9kaWZpZXIobW9kaWZpZXIsIER1cmF0aW9uLCAiU3RyZW5ndGhBZGQiLCBFZmZlY3RTcHJpdGUpOwoKCQkJcmV0dXJuIHRydWU7CgkJfQoJfQoKCXB1YmxpYyBjbGFzcyBBcHBseUJ1cm5XZWFwb25FZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGZsb2F0IFBlcmNlbnRhZ2VDaGFuY2U7CgkJcHVibGljIGludCBEYW1hZ2U7CgkJcHVibGljIGZsb2F0IFRpbWU7CgoJCXB1YmxpYyB2b2lkIE9uQXR0YWNrKENoYXJhY3RlciB0YXJnZXQsIENoYXJhY3RlciB1c2VyLCByZWYgRGFtYWdlIGRhbWFnZSkKCQl7CgkJCWlmIChVbml0eUVuZ2luZS5SYW5kb20udmFsdWUgPCAoUGVyY2VudGFnZUNoYW5jZSAvIDEwMC4wZikpCgkJCXsKCQkJCUVsZW1lbnRhbEVmZmVjdCBlZmZlY3QgPSBuZXcgRWxlbWVudGFsRWZmZWN0KFRpbWUsIHRoaXMsIDEuMGYpOwoKCQkJCXRhcmdldC5TdGF0cy5BZGRFbGVtZW50YWxFZmZlY3QoZWZmZWN0KTsKCQkJfQoJCX0KCX0KfQoAAAAAAAAAAEYgAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABGIAAAdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBNeUJveDsKCltDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiRWZmZWN0RGF0YSIsIG1lbnVOYW1lID0gIkRhdGEvRWZmZWN0RGF0YSIsIG9yZGVyID0gMSldCnB1YmxpYyBjbGFzcyBFZmZlY3REYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBFZmZlY3RUeXBlCgl7CgkJREFNQUdFLAoJCUhQQ0hBTkdFLAoJCVNQRUVEVVAsCgkJRElHLAoJCVNVTU1PTiwKCQlEUk9QQk9YLAoJCUFEREdPQUwsCgkJTE9SRE1PTkVZLAoJCUxPUkRFWFAsCgkJTE9SREVXQVJURVIsCgkJREVTVFJPWVNFTEYsCgkJT1BFTldJTkRPVywKCQlNT1ZFQkFDSwoJfQoJcHVibGljIEVmZmVjdFR5cGUgVHlwZTsKCXB1YmxpYyBWRlhUeXBlIFRha2VWRlggPSBWRlhUeXBlLk5PTkU7CglwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uOwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuSFBDSEFOR0UpXQoJcHVibGljIGludCBFZmZlY3RBbW91bnQ7CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKFR5cGUpLCBmYWxzZSwgRWZmZWN0VHlwZS5IUENIQU5HRSldCglwdWJsaWMgU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZSBFZmZlY3RNb2RlOwoKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihUeXBlKSwgZmFsc2UsIEVmZmVjdFR5cGUuREFNQUdFKV0KCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCgoJcHVibGljIHZpcnR1YWwgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCXsKCQlyZXR1cm4gRGVzY3JpcHRpb247Cgl9CgoJcHVibGljIGJvb2wgVGFrZUVmZmVjdChHYW1lT2JqZWN0IHVzZXIsIEdhbWVPYmplY3QgdGFyZ2V0LCBzdHJpbmdbXSBwYXJhbSA9IG51bGwpCgl7CgkJYm9vbCBzdWNjZXNzID0gZmFsc2U7CgkJc3dpdGNoIChUeXBlKQoJCXsKCQkJY2FzZSBFZmZlY3RUeXBlLkRBTUFHRToKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuSFBDSEFOR0U6CgkJCQlpbnQgYWRkTW91bnQgPSAwOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCAmJiBpbnQuVHJ5UGFyc2UocGFyYW1bMF0sIG91dCBhZGRNb3VudCkpCgkJCQkJc3VjY2VzcyA9IENoYW5nZUhlYWx0aCh1c2VyLkdldENvbXBvbmVudDxDaGFyYWN0ZXI+KCksIHRhcmdldC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpLCBFZmZlY3RBbW91bnQgKyBhZGRNb3VudCk7CgkJCQllbHNlIHN1Y2Nlc3MgPSBDaGFuZ2VIZWFsdGgodXNlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpLCB0YXJnZXQuR2V0Q29tcG9uZW50PENoYXJhY3Rlcj4oKSwgRWZmZWN0QW1vdW50KTsKCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuRElHOgoJCQkJaWYgKHRhcmdldCAhPSBudWxsKQoJCQkJewoJCQkJCWludCBkZWVwID0gMTsKCQkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwICYmIGludC5UcnlQYXJzZShwYXJhbVswXSwgb3V0IGRlZXApKQoJCQkJCXsKCQkJCQkJR2FtZU1hbmFnZXIuSW5zdGFuY2UuVGVycmFpblRvb2wuTG93ZXJUZXJyYWluKHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24sIGRlZXAgKiAwLjAwMDVmLCA1LCA1KTsKCQkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQkJfQoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5TVU1NT046CgkJCQlUcmFuc2Zvcm0gdHJhbnMgPSAodGFyZ2V0ICE9IG51bGwpID8gdGFyZ2V0LnRyYW5zZm9ybSA6IHVzZXIudHJhbnNmb3JtOwoJCQkJc3RyaW5nIHByZWZhYlBhdGggPSAiIjsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDApIHByZWZhYlBhdGggPSBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8c3RyaW5nPihHYW1lTWFuYWdlci5Db25maWcuUHJlZmFiQ29uZmlnLCBwYXJhbVswXSk7CgkJCQlHYW1lT2JqZWN0IHBiT2JqID0gUmVzb3VyY2VzLkxvYWQocHJlZmFiUGF0aCkgYXMgR2FtZU9iamVjdDsKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDEgJiYgcGFyYW1bMV0gPT0gInNlbGYiKSB0cmFucyA9IHVzZXIudHJhbnNmb3JtOwoJCQkJaWYgKHBiT2JqICE9IG51bGwpCgkJCQl7CgkJCQkJSW5zdGFudGlhdGUocGJPYmosIHRyYW5zLnBvc2l0aW9uLCB0cmFucy5yb3RhdGlvbik7CgkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkRST1BCT1g6CgkJCQlpZiAocGFyYW0gPT0gbnVsbCB8fCBwYXJhbS5MZW5ndGggPT0gMCkKCQkJCXsKCQkJCQlEZWJ1Zy5Mb2dFcnJvcigiRHJvcEJveEVmZmVjdCB0YWtlIG1pc3NpbmcgZW5vdWdoIHBhcmFtZXRlcnMhICIgKyAidXNlcj0gIiArIHVzZXIpOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJCXsKCQkJCQlEcm9wQm94IGRyb3BCb3ggPSBEcm9wQm94LkdldERyb3BCb3hCeUtleShwYXJhbVswXSk7CgkJCQkJaWYgKGRyb3BCb3ggIT0gbnVsbCkKCQkJCQl7CgkJCQkJCWludCBjb3VudCA9IDE7CgkJCQkJCWlmIChwYXJhbS5MZW5ndGggPiAxKSBpbnQuVHJ5UGFyc2UocGFyYW1bMV0sIG91dCBjb3VudCk7CgkJCQkJCWZvciAoaW50IGkgPSAwOyBpIDwgY291bnQ7IGkrKykKCQkJCQkJewoJCQkJCQkJZm9yZWFjaCAodmFyIGRyb3AgaW4gZHJvcEJveC5HZXREcm9wSXRlbSgpKQoJCQkJCQkJewoJCQkJCQkJCURyb3BJdGVtKHVzZXIudHJhbnNmb3JtLnBvc2l0aW9uLCBkcm9wLml0ZW0sIGRyb3AuaXRlbU51bSk7CgkJCQkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQkJCQkJSGVscGVycy5Mb2codGhpcywgIkRyb3AiLCAkIntkcm9wLml0ZW0uSXRlbU5hbWV9eHtkcm9wLml0ZW1OdW19Iik7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJRGVidWcuTG9nRXJyb3IoIkdldCBieSBhIG5vZXhpc3QgZHJvcGJveCBrZXkgPSAiICsgcGFyYW1bMF0pOwoJCQkJCX0KCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuQURER09BTDoKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDApCgkJCQl7CgkJCQkJR2FtZU1hbmFnZXIuR2FtZUdvYWwuQWRkR29hbChHb2FsRGF0YS5HZXREYXRhQnlLZXkocGFyYW1bMF0pKTsKCQkJCQlzdWNjZXNzID0gdHJ1ZTsKCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlIEVmZmVjdFR5cGUuTE9SREVYUDoKCQkJCWludCBleHAgPSAwOwoJCQkJaWYgKHBhcmFtICE9IG51bGwgJiYgcGFyYW0uTGVuZ3RoID4gMCAmJiBpbnQuVHJ5UGFyc2UocGFyYW1bMF0sIG91dCBleHApKQoJCQkJewoJCQkJCUdhbWVNYW5hZ2VyLkxvcmQuQWRkRXhwKGV4cCk7CgkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLkRFU1RST1lTRUxGOgoJCQkJR2FtZU1hbmFnZXIuU3RhcnRXYWl0QWN0aW9uKDAuMWYsICgpID0+IERlc3Ryb3kodXNlcikpOwoJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQlicmVhazsKCQkJY2FzZSBFZmZlY3RUeXBlLk9QRU5XSU5ET1c6CgkJCQlpZiAocGFyYW0gIT0gbnVsbCAmJiBwYXJhbS5MZW5ndGggPiAwKQoJCQkJewoJCQkJCXZhciB3aW4gPSBHYW1lTWFuYWdlci5HYW1lVUkuT3BlbldpbmRvdyhwYXJhbVswXSk7CgkJCQkJc3VjY2VzcyA9IHdpbiAhPSBudWxsOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgRWZmZWN0VHlwZS5NT1ZFQkFDSzoKCQkJCWlmIChwYXJhbSAhPSBudWxsICYmIHBhcmFtLkxlbmd0aCA+IDEpCgkJCQl7CgkJCQkJdmFyIG1vdmVyID0gcGFyYW1bMF0gPT0gInNlbGYiID8gdXNlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpIDogdGFyZ2V0LkdldENvbXBvbmVudDxDaGFyYWN0ZXI+KCk7CgkJCQkJZmxvYXQgZGlzID0gMDsKCQkJCQlpZiAobW92ZXIgJiYgZmxvYXQuVHJ5UGFyc2UocGFyYW1bMV0sIG91dCBkaXMpKQoJCQkJCXsKCQkJCQkJLy9HYW1lTWFuYWdlci5TdGFydE5leHRGcmFtZUFjdGlvbigoKSA9PiBtb3Zlci5CYXNlQUkuQmFjayhkaXMpKTsKCQkJCQkJbW92ZXIuQmFzZUFJLkJhY2soZGlzKTsKCQkJCQkJc3VjY2VzcyA9IHRydWU7CgkJCQkJfQoJCQkJfQoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlEZWJ1Zy5Mb2dFcnJvcigiVGFrZSBhIGlsbGVnYWwgRWZmZWN0OiIgKyB0aGlzKTsKCQkJCXJldHVybiBmYWxzZTsKCQl9CgoJCWlmIChUYWtlVkZYICE9IFZGWFR5cGUuTk9ORSAmJiBzdWNjZXNzKSBWRlhNYW5hZ2VyLlBsYXlWRlgoVGFrZVZGWCwgdXNlci50cmFuc2Zvcm0ucG9zaXRpb24pOwoJCXZhciBjaGFyYWN0ZXIgPSB1c2VyLkdldENvbXBvbmVudDxDaGFyYWN0ZXI+KCk7CgkJaWYgKHN1Y2Nlc3MgJiYgY2hhcmFjdGVyKSBjaGFyYWN0ZXIuRWZmZWN0QWN0aW9uPy5JbnZva2UodGhpcyk7CgkJcmV0dXJuIHN1Y2Nlc3M7Cgl9CgoJYm9vbCBDaGFuZ2VIZWFsdGgoQ2hhcmFjdGVyIGF0dGFja2VyLCBDaGFyYWN0ZXIgdGFyZ2V0LCBpbnQgdmFsdWUpCgl7CgkJaWYgKEVmZmVjdE1vZGUgPT0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5BYnNvbHV0ZSkKCQl7CgkJCXRhcmdldC5TdGF0cy5DaGFuZ2VIZWFsdGgodmFsdWUsIGF0dGFja2VyKTsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCWVsc2UgaWYgKEVmZmVjdE1vZGUgPT0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5QZXJjZW50YWdlKQoJCXsKCQkJaWYgKHRhcmdldC5TdGF0cy5DdXJyZW50SGVhbHRoID09IHRhcmdldC5TdGF0cy5zdGF0cy5oZWFsdGggJiYgdmFsdWUgPiAwKQoJCQkJcmV0dXJuIHRydWU7CgkJCXRhcmdldC5TdGF0cy5DaGFuZ2VIZWFsdGgoTWF0aGYuRmxvb3JUb0ludCh2YWx1ZSAvIDEwMC4wZiAqIHRhcmdldC5TdGF0cy5zdGF0cy5oZWFsdGgpLCBhdHRhY2tlcik7CgkJCXJldHVybiB0cnVlOwoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIHN0YXRpYyB2b2lkIERyb3BJdGVtKFZlY3RvcjMgcG9zLCBJdGVtIGl0ZW0sIGludCBudW0pCgl7CgkJR2FtZU9iamVjdCBsb290T2JqID0gUmVzb3VyY2VzLkxvYWQoIkxvb3QiKSBhcyBHYW1lT2JqZWN0OwoJCVZlY3RvcjMgZGlyZWN0aW9uID0gUXVhdGVybmlvbi5FdWxlcigwLCBSYW5kb20uUmFuZ2UoMCwgMzYwKSwgMCkgKiBWZWN0b3IzLnJpZ2h0OwoJCVZlY3RvcjMgc3Bhd25Qb3NpdGlvbiA9IHBvcyArIGRpcmVjdGlvbiAqIFJhbmRvbS5SYW5nZSgxLCAzKTsKCQlmb3IgKGludCBpID0gMDsgaSA8IG51bTsgaSsrKQoJCXsKCQkJTG9vdCBsb290ID0gSW5zdGFudGlhdGUobG9vdE9iaiwgc3Bhd25Qb3NpdGlvbiwgUXVhdGVybmlvbi5FdWxlcigwLCAwLCAwKSkuR2V0Q29tcG9uZW50PExvb3Q+KCk7CgkJCWxvb3QuSXRlbSA9IGl0ZW07CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBUYWtlRWZmZWN0cyhMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+IGVmZmVjdEdyb3VwLCBHYW1lT2JqZWN0IHVzZXIsIExpc3Q8R2FtZU9iamVjdD4gdGFyZ2V0cykKCXsKCQlmb3JlYWNoICh2YXIgZWZmZWN0IGluIGVmZmVjdEdyb3VwKQoJCXsKCQkJZm9yZWFjaCAodmFyIHRhcmdldCBpbiB0YXJnZXRzKQoJCQl7CgkJCQllZmZlY3QuS2V5LlRha2VFZmZlY3QodXNlciwgdGFyZ2V0LCBlZmZlY3QuVmFsdWUpOwoJCQl9CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBUYWtlRWZmZWN0cyhMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+IGVmZmVjdEdyb3VwLCBHYW1lT2JqZWN0IHVzZXIsIEdhbWVPYmplY3QgdGFyZ2V0KQoJewoJCWZvcmVhY2ggKHZhciBlZmZlY3QgaW4gZWZmZWN0R3JvdXApCgkJewoJCQllZmZlY3QuS2V5LlRha2VFZmZlY3QodXNlciwgdGFyZ2V0LCBlZmZlY3QuVmFsdWUpOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIEVmZmVjdERhdGEgR2V0RWZmZWN0RGF0YUJ5S2V5KHN0cmluZyBrZXkpCgl7CgkJcmV0dXJuIEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxFZmZlY3REYXRhPihHYW1lTWFuYWdlci5Db25maWcuRWZmZWN0LCBrZXkpOwoJfQoJcHVibGljIHN0YXRpYyBMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+IEdldEVmZmVjdEdyb3VwQnlLZXkoc3RyaW5nIGtleSkKCXsKCQlyZXR1cm4gS2V5VmFsdWVEYXRhLkdldFZhbHVlPExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4+KEdhbWVNYW5hZ2VyLkNvbmZpZy5FZmZlY3RHcm91cCwga2V5KTsKCX0KCglwdWJsaWMgY2xhc3MgVmFtcGlyaWNXZWFwb25FZmZlY3QgOiBFZmZlY3REYXRhCgl7CgkJcHVibGljIGludCBQZXJjZW50YWdlSGVhbHRoU3RvbGVuOwoKCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCQl7CgkJCXJldHVybiAkIkNvbnZlcnQge1BlcmNlbnRhZ2VIZWFsdGhTdG9sZW59JSBvZiBwaHlzaWNhbCBkYW1hZ2UgaW50byBIZWFsdGgiOwoJCX0KCgkJcHVibGljIHZvaWQgT25Qb3N0QXR0YWNrKENoYXJhY3RlciB0YXJnZXQsIENoYXJhY3RlciBhdHRhY2tlciwgRGFtYWdlIGRhbWFnZSkKCQl7CgkJCWludCBhbW91bnQgPSBNYXRoZi5GbG9vclRvSW50KGRhbWFnZS5HZXREYW1hZ2UoU3RhdFN5c3RlbS5EYW1hZ2VUeXBlLlBoeXNpY2FsKSAqIChQZXJjZW50YWdlSGVhbHRoU3RvbGVuIC8gMTAwLjBmKSk7CgkJCXRhcmdldC5TdGF0cy5DaGFuZ2VIZWFsdGgoYW1vdW50LCBhdHRhY2tlcik7CgkJfQoJfQoKCS8vIHB1YmxpYyBjbGFzcyBBZGRIZWFsdGhVc2FnZUVmZmVjdCA6IEVmZmVjdERhdGEKCS8vIHsKCS8vIAkvL1tGb3JtZXJseVNlcmlhbGl6ZWRBcygiSGVhbHRoUHVyY2VudGFnZUFtb3VudCIpXQoJLy8gCXB1YmxpYyBpbnQgSGVhbHRoUGVyY2VudGFnZUFtb3VudCA9IDIwOwoKCS8vIAlwdWJsaWMgYm9vbCBPblVzZShDaGFyYWN0ZXIgdXNlcikKCS8vIAl7CgkvLyAJCWlmICh1c2VyLlN0YXRzLkN1cnJlbnRIZWFsdGggPT0gdXNlci5TdGF0cy5zdGF0cy5oZWFsdGgpCgkvLyAJCQlyZXR1cm4gZmFsc2U7CgoJLy8gCQlWRlhNYW5hZ2VyLlBsYXlWRlgoVkZYVHlwZS5IZWFsaW5nLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJLy8gCQl1c2VyLlN0YXRzLkNoYW5nZUhlYWx0aChNYXRoZi5GbG9vclRvSW50KEhlYWx0aFBlcmNlbnRhZ2VBbW91bnQgLyAxMDAuMGYgKiB1c2VyLlN0YXRzLnN0YXRzLmhlYWx0aCkpOwoKCS8vIAkJcmV0dXJuIHRydWU7CgkvLyAJfQoJLy8gfQoKCXB1YmxpYyBjbGFzcyBJbmNyZWFzZVN0cmVuZ3RoRWZmZWN0IDogRWZmZWN0RGF0YQoJewoJCXB1YmxpYyBmbG9hdCBEdXJhdGlvbiA9IDEwLjBmOwoJCXB1YmxpYyBpbnQgU3RyZW5ndGhDaGFuZ2UgPSA1OwoJCXB1YmxpYyBTcHJpdGUgRWZmZWN0U3ByaXRlOwoKCQlwdWJsaWMgYm9vbCBPblVzZShDaGFyYWN0ZXIgdXNlcikKCQl7CgkJCVN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyIG1vZGlmaWVyID0gbmV3IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyKCk7CgkJCW1vZGlmaWVyLk1vZGlmaWVyTW9kZSA9IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyLk1vZGUuQWJzb2x1dGU7CgkJCW1vZGlmaWVyLlN0YXRzLnN0cmVuZ3RoID0gU3RyZW5ndGhDaGFuZ2U7CgoJCQlWRlhNYW5hZ2VyLlBsYXlWRlgoVkZYVHlwZS5TdHJvbmdlciwgdXNlci50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJdXNlci5TdGF0cy5BZGRUaW1lZE1vZGlmaWVyKG1vZGlmaWVyLCBEdXJhdGlvbiwgIlN0cmVuZ3RoQWRkIiwgRWZmZWN0U3ByaXRlKTsKCgkJCXJldHVybiB0cnVlOwoJCX0KCX0KCglwdWJsaWMgY2xhc3MgQXBwbHlCdXJuV2VhcG9uRWZmZWN0IDogRWZmZWN0RGF0YQoJewoJCXB1YmxpYyBmbG9hdCBQZXJjZW50YWdlQ2hhbmNlOwoJCXB1YmxpYyBpbnQgRGFtYWdlOwoJCXB1YmxpYyBmbG9hdCBUaW1lOwoKCQlwdWJsaWMgdm9pZCBPbkF0dGFjayhDaGFyYWN0ZXIgdGFyZ2V0LCBDaGFyYWN0ZXIgdXNlciwgcmVmIERhbWFnZSBkYW1hZ2UpCgkJewoJCQlpZiAoVW5pdHlFbmdpbmUuUmFuZG9tLnZhbHVlIDwgKFBlcmNlbnRhZ2VDaGFuY2UgLyAxMDAuMGYpKQoJCQl7CgkJCQlFbGVtZW50YWxFZmZlY3QgZWZmZWN0ID0gbmV3IEVsZW1lbnRhbEVmZmVjdChUaW1lLCB0aGlzLCAxLjBmKTsKCgkJCQl0YXJnZXQuU3RhdHMuQWRkRWxlbWVudGFsRWZmZWN0KGVmZmVjdCk7CgkJCX0KCQl9Cgl9Cn0KAAAAAAAAAABaIAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "Assets/Standard Assets/Scripts/ItemDemander.cs",
			"settings":
			{
				"buffer_size": 4813,
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACCDAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBERy5Ud2VlbmluZzsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBUaW1lckJlaGF2aW91cgp7CglwdWJsaWMgc3RyaW5nIGRlbWFuZGVySWQ7CglbU2VyaWFsaXplRmllbGRdCglJbnRlcmFjdE9uVHJpZ2dlciBkZXRlY3RvcjsKCVtTZXJpYWxpemVGaWVsZF0KCVVJSXRlbURlbWFuZCB1aV9kZW1hbmQ7CglbU2VyaWFsaXplRmllbGRdCglMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxJdGVtLCBpbnQ+PiBEZW1hbmREYXRhOwoJW1NlcmlhbGl6ZUZpZWxkXQoJTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+PiBFbmRFZmZlY3Q7CglJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZCBtX0RlbWFuZDsKCUNoYXJhY3RlckRhdGEgbV9jaGFyYWN0ZXI7Cgl2b2lkIFN0YXJ0KCkKCXsKCQltX0RlbWFuZCA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZChLZXlWYWx1ZURhdGEuVG9EaWMoRGVtYW5kRGF0YSkpOwoJCXVpX2RlbWFuZC5TaG93KG1fRGVtYW5kKTsKCgkJLy9kZXRlY3Rvcj8uT25FbnRlci5BZGRMaXN0ZW5lcihPbkludGVyRW50ZXIpOwoJCS8vZGV0ZWN0b3I/Lk9uRXhpdC5BZGRMaXN0ZW5lcihPbkludGVyRXhpdCk7CgkJLy9kZXRlY3Rvcj8uT25TdGF5LkFkZExpc3RlbmVyKE9uSW50ZXJTdGF5KTsKCX0KCglwdWJsaWMgdm9pZCBPbkludGVyYWN0RXZlbnQoR2FtZU9iamVjdCBhY3Rvciwgc3RyaW5nIGV2ZW50TmFtZSkKCXsKCQlpZiAobV9jaGFyYWN0ZXIgPT0gbnVsbCkgbV9jaGFyYWN0ZXIgPSBhY3Rvci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKTsKCQlpZiAoZXZlbnROYW1lID09ICJFbnRlciIgJiYgbV9jaGFyYWN0ZXIgIT0gbnVsbCkKCQl7CgkJCXVpX2RlbWFuZC5JbnRlcigpOwoJCQltX2NoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUV2ZW50ICs9IE9uSXRlbUV2ZW50OwoJCX0KCQlpZiAoZXZlbnROYW1lID09ICJSZWFkeSIgJiYgbV9jaGFyYWN0ZXIgIT0gbnVsbCkKCQl7CgkJCWlmIChtX2NoYXJhY3Rlci5CYXNlQUkuaXNJZGxlICYmICFtX0RlbWFuZC5Db21wbGV0ZWQpCgkJCXsKCQkJCXZhciBzdWJtaXRhYmxlID0gbV9EZW1hbmQuU3VibWl0dGFibGUobV9jaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJCWlmIChzdWJtaXRhYmxlLkNvdW50ID4gMCkKCQkJCXsKCQkJCQltX0RlbWFuZC5GdWxmaWxsKG1fY2hhcmFjdGVyLkludmVudG9yeSk7CgkJCQl9CgkJCQllbHNlIHVpX2RlbWFuZC5GYWlsKCk7CgkJCX0KCQl9CgkJaWYgKGV2ZW50TmFtZSA9PSAiRXhpdCIgJiYgbV9jaGFyYWN0ZXIgIT0gbnVsbCkKCQl7CgkJCW1fY2hhcmFjdGVyLkludmVudG9yeS5JdGVtRXZlbnQgLT0gT25JdGVtRXZlbnQ7CgkJCW1fY2hhcmFjdGVyID0gbnVsbDsKCQl9Cgl9CgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TdGFydCgpCgl7CgkJdWlfZGVtYW5kLmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQkvL2lmIChtX2NoYXJhY3RlcikgbV9jaGFyYWN0ZXIuQ2hhbmdlU3RhdGUoQ2hhcmFjdGVyQ29udHJvbC5TdGF0ZS5XT1JLSU5HLCB0cnVlKTsKCX0KCglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkVuZCgpCgl7CgkJZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBFbmRFZmZlY3QpCgkJewoJCQllZmZlY3QuS2V5LlRha2VFZmZlY3QoZ2FtZU9iamVjdCwgZ2FtZU9iamVjdCwgZWZmZWN0LlZhbHVlKTsKCQl9CgkJbV9jaGFyYWN0ZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5Db3VudChFdmVudFNlbmRlci5FdmVudFR5cGUuRGVtYW5kQ29tcGxldGUsIGRlbWFuZGVySWQpOwoJfQoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25UaW1lcigpCgl7CgkJSGVscGVycy5Mb2codGhpcywgIk9uVGltZXIiKTsKCQkvLyBHYW1lT2JqZWN0IGNyZWF0ZU9iaiA9IFJlc291cmNlcy5Mb2FkKGNyZWF0UHJlZmFiKSBhcyBHYW1lT2JqZWN0OwoJCS8vIGlmIChjcmVhdGVPYmopCgkJLy8gewoJCS8vIAlHYW1lT2JqZWN0IG9iaiA9IEluc3RhbnRpYXRlKGNyZWF0ZU9iaiwgdHJhbnMucG9zaXRpb24sIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSkgYXMgR2FtZU9iamVjdDsKCQkvLyAJLy9HYW1lT2JqZWN0IG9iaiA9IEluc3RhbnRpYXRlKHByZWZhYiwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gfQoJfQoKCXZvaWQgT25JdGVtRXZlbnQoSXRlbSBpdGVtLCBzdHJpbmcgYWN0aW9uTmFtZSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAoYWN0aW9uTmFtZSA9PSAiRnVsZmlsbCIpCgkJewoJCQlSZXNDb2xsZWN0b3IgY29sbGVjdG9yID0gbV9jaGFyYWN0ZXIuR2V0Q29tcG9uZW50PFJlc0NvbGxlY3Rvcj4oKTsKCQkJaWYgKGNvbGxlY3RvcikKCQkJewoJCQkJLy9jb2xsZWN0b3IuRGlzcGxheShpdGVtLCBpdGVtQ291bnQsIFVwZGF0ZURlbWFuZCk7CgkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRnVsZmlsbCIsICQie2l0ZW0uSXRlbU5hbWV9eHtpdGVtQ291bnR9Iik7CgkJCQlTdGFydENvcm91dGluZShVcGRhdGVEZW1hbmQoaXRlbSwgaXRlbUNvdW50KSk7CgkJCX0KCQl9Cgl9CgoJSUVudW1lcmF0b3IgVXBkYXRlRGVtYW5kKEl0ZW0gaXRlbSwgaW50IGl0ZW1Db3VudCkKCXsKCQl2YXIgcmVzT2JqcyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBpdGVtQ291bnQ7IGkrKykKCQl7CgkJCUdhbWVPYmplY3QgcmVzT2JqID0gSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgdHJhbnNmb3JtKTsKCQkJcmVzT2Jqcy5BZGQocmVzT2JqKTsKCQkJcmVzT2JqLnRyYW5zZm9ybS5ET01vdmUobV9jaGFyYWN0ZXIudHJhbnNmb3JtLnBvc2l0aW9uICsgbmV3IFZlY3RvcjMoMCwgMiwgMCksIDEpLkZyb20oKTsKCQl9CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcygxLjBmKTsKCQl1aV9kZW1hbmQuU2hvdyhtX0RlbWFuZCk7CgkJaWYgKG1fRGVtYW5kLkNvbXBsZXRlZCkgaXNTdGFydGVkID0gdHJ1ZTsKCQlmb3JlYWNoICh2YXIgb2JqIGluIHJlc09ianMpCgkJewoJCQlEZXN0cm95KG9iaik7CgkJfQoJfQp9CgAAAAAAAAAAoQwAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					2,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAChDAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwoKcHVibGljIGNsYXNzIEl0ZW1EZW1hbmRlciA6IFRpbWVyQmVoYXZpb3VyCnsKCXB1YmxpYyBzdHJpbmcgZGVtYW5kZXJJZDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIEdhbWVPYmplY3Q+IERlbWFuZGVFdmVudHM7CglbU2VyaWFsaXplRmllbGRdCglVSUl0ZW1EZW1hbmQgdWlfZGVtYW5kOwoJW1NlcmlhbGl6ZUZpZWxkXQoJTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8SXRlbSwgaW50Pj4gRGVtYW5kRGF0YTsKCUludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIG1fRGVtYW5kOwoJQ2hhcmFjdGVyRGF0YSBtX2NoYXJhY3RlcjsKCUludGVyYWN0SGFuZGxlIG1faW50ZXJhY3RIYW5kbGU7Cgl2b2lkIFN0YXJ0KCkKCXsKCQltX2ludGVyYWN0SGFuZGxlID0gR2V0Q29tcG9uZW50PEludGVyYWN0SGFuZGxlPigpOwoJCW1faW50ZXJhY3RIYW5kbGUuSW50ZXJhY3RFdmVudC5BZGRMaXN0ZW5lcihPbkludGVyYWN0RXZlbnQpOwoJCW1fRGVtYW5kID0gbmV3IEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kKEtleVZhbHVlRGF0YS5Ub0RpYyhEZW1hbmREYXRhKSk7CgkJdWlfZGVtYW5kLlNob3cobV9EZW1hbmQpOwoJCW1faW50ZXJhY3RIYW5kbGUuU2V0SGFuZGxlKHRydWUpOwoJfQoKCXB1YmxpYyB2b2lkIE9uSW50ZXJhY3RFdmVudChHYW1lT2JqZWN0IGFjdG9yLCBzdHJpbmcgZXZlbnROYW1lKQoJewoJCWlmIChtX2NoYXJhY3RlciA9PSBudWxsKSBtX2NoYXJhY3RlciA9IGFjdG9yLkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCWlmIChldmVudE5hbWUgPT0gIkVudGVyIiAmJiBtX2NoYXJhY3RlciAhPSBudWxsKQoJCXsKCQkJdWlfZGVtYW5kLkludGVyKCk7CgkJCW1fY2hhcmFjdGVyLkludmVudG9yeS5JdGVtRXZlbnQgKz0gT25JdGVtRXZlbnQ7CgkJfQoJCWlmIChldmVudE5hbWUgPT0gIlJlYWR5IiAmJiBtX2NoYXJhY3RlciAhPSBudWxsKQoJCXsKCQkJaWYgKG1fY2hhcmFjdGVyLkJhc2VBSS5pc0lkbGUgJiYgIW1fRGVtYW5kLkNvbXBsZXRlZCkKCQkJewoJCQkJdmFyIHN1Ym1pdGFibGUgPSBtX0RlbWFuZC5TdWJtaXR0YWJsZShtX2NoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQkJaWYgKHN1Ym1pdGFibGUuQ291bnQgPiAwKQoJCQkJewoJCQkJCW1fRGVtYW5kLkZ1bGZpbGwobV9jaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJCX0KCQkJCWVsc2UgdWlfZGVtYW5kLkZhaWwoKTsKCQkJfQoJCX0KCQlpZiAoZXZlbnROYW1lID09ICJFeGl0IiAmJiBtX2NoYXJhY3RlciAhPSBudWxsICYmICFpc1N0YXJ0ZWQpCgkJewoJCQltX2NoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUV2ZW50IC09IE9uSXRlbUV2ZW50OwoJCQltX2NoYXJhY3RlciA9IG51bGw7CgkJfQoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJLy9pZiAobV9jaGFyYWN0ZXIpIG1fY2hhcmFjdGVyLkNoYW5nZVN0YXRlKENoYXJhY3RlckNvbnRyb2wuU3RhdGUuV09SS0lORywgdHJ1ZSk7Cgl9CgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25FbmQoKQoJewoJCW1faW50ZXJhY3RIYW5kbGUuU2V0SGFuZGxlKGZhbHNlKTsKCQltX2NoYXJhY3RlciA9IG51bGw7Cgl9Cglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblRpbWVyKCkKCXsKCQlpZiAobV9jaGFyYWN0ZXIgIT0gbnVsbCkKCQl7CgkJCURlbWFuZGVFdmVudHM/Lkludm9rZShnYW1lT2JqZWN0LCBtX2NoYXJhY3Rlci5nYW1lT2JqZWN0KTsKCQkJbV9jaGFyYWN0ZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5Db3VudChFdmVudFNlbmRlci5FdmVudFR5cGUuRGVtYW5kQ29tcGxldGUsIGRlbWFuZGVySWQpOwoJCX0KCgkJLy8gR2FtZU9iamVjdCBjcmVhdGVPYmogPSBSZXNvdXJjZXMuTG9hZChjcmVhdFByZWZhYikgYXMgR2FtZU9iamVjdDsKCQkvLyBpZiAoY3JlYXRlT2JqKQoJCS8vIHsKCQkvLyAJR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShjcmVhdGVPYmosIHRyYW5zLnBvc2l0aW9uLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCS8vR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShwcmVmYWIsIGJ1aWxkZXIuR2V0TmF2TWVzaFJhbmRvbVBvcyhnYW1lT2JqZWN0KSwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKSBhcyBHYW1lT2JqZWN0OwoJCS8vIH0KCX0KCgl2b2lkIE9uSXRlbUV2ZW50KEl0ZW0gaXRlbSwgc3RyaW5nIGFjdGlvbk5hbWUsIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKGFjdGlvbk5hbWUgPT0gIkZ1bGZpbGwiKQoJCXsKCQkJUmVzQ29sbGVjdG9yIGNvbGxlY3RvciA9IG1fY2hhcmFjdGVyLkdldENvbXBvbmVudDxSZXNDb2xsZWN0b3I+KCk7CgkJCWlmIChjb2xsZWN0b3IpCgkJCXsKCQkJCS8vY29sbGVjdG9yLkRpc3BsYXkoaXRlbSwgaXRlbUNvdW50LCBVcGRhdGVEZW1hbmQpOwoJCQkJSGVscGVycy5Mb2codGhpcywgIkZ1bGZpbGwiLCAkIntpdGVtLkl0ZW1OYW1lfXh7aXRlbUNvdW50fSIpOwoJCQkJU3RhcnRDb3JvdXRpbmUoVXBkYXRlRGVtYW5kKGl0ZW0sIGl0ZW1Db3VudCkpOwoJCQl9CgkJfQoJfQoKCUlFbnVtZXJhdG9yIFVwZGF0ZURlbWFuZChJdGVtIGl0ZW0sIGludCBpdGVtQ291bnQpCgl7CgkJdmFyIHJlc09ianMgPSBuZXcgTGlzdDxHYW1lT2JqZWN0PigpOwoJCWZvciAoaW50IGkgPSAwOyBpIDwgaXRlbUNvdW50OyBpKyspCgkJewoJCQlHYW1lT2JqZWN0IHJlc09iaiA9IEluc3RhbnRpYXRlKGl0ZW0uV29ybGRPYmplY3RQcmVmYWIsIHRyYW5zZm9ybSk7CgkJCXJlc09ianMuQWRkKHJlc09iaik7CgkJCXJlc09iai50cmFuc2Zvcm0uRE9Nb3ZlKG1fY2hhcmFjdGVyLnRyYW5zZm9ybS5wb3NpdGlvbiArIG5ldyBWZWN0b3IzKDAsIDIsIDApLCAxKS5Gcm9tKCk7CgkJfQoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMoMS4wZik7CgkJdWlfZGVtYW5kLlNob3cobV9EZW1hbmQpOwoJCWlmIChtX0RlbWFuZC5Db21wbGV0ZWQpIGlzU3RhcnRlZCA9IHRydWU7CgkJZm9yZWFjaCAodmFyIG9iaiBpbiByZXNPYmpzKQoJCXsKCQkJRGVzdHJveShvYmopOwoJCX0KCX0KfQoAAAAAAAAAACkNAAAAAAAAAAAAAAAAAAAAAAAA0QsAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADRCwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwoKcHVibGljIGNsYXNzIEl0ZW1EZW1hbmRlciA6IFRpbWVyQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCXB1YmxpYyBzdHJpbmcgZGVtYW5kZXJJZDsKCXB1YmxpYyBVbml0eUV2ZW50IFJlZnJlc2hFdmVudHM7CglbU2VyaWFsaXplRmllbGRdCglVSUl0ZW1EZW1hbmQgdWlfZGVtYW5kOwoJW1NlcmlhbGl6ZUZpZWxkXQoJTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8SXRlbSwgaW50Pj4gRGVtYW5kRGF0YTsKCUludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIG1fRGVtYW5kOwoJYm9vbCBtX2ludGVyYWN0YWJsZTsKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgYXV0b0FjdGl2ZTsKCXZvaWQgU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJaWYgKGF1dG9BY3RpdmUpIEFjdGl2ZUludGVyYWN0KCk7Cgl9CgoJcHVibGljIHZvaWQgQWN0aXZlSW50ZXJhY3QoKQoJewoJCW1faW50ZXJhY3RhYmxlID0gdHJ1ZTsKCQltX0RlbWFuZCA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZChLZXlWYWx1ZURhdGEuVG9EaWMoRGVtYW5kRGF0YSkpOwoJCXVpX2RlbWFuZC5TaG93KG1fRGVtYW5kKTsKCQlHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk/LlNldEhhbmRsZSh0cnVlKTsKCX0KCglwdWJsaWMgdm9pZCBPbkludGVyYWN0b3JFbnRlcihJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQl1aV9kZW1hbmQuSW50ZXIoKTsKCQltX2ludGVyYWN0YWJsZSA9IHRydWU7Cgl9CgoJcHVibGljIHN0cmluZyBJbnRlcmFjdEFuaW0oSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJcmV0dXJuICIiOwoJfQoKCXB1YmxpYyBib29sIENhbkludGVyYWN0KElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCXJldHVybiAhbV9EZW1hbmQuQ29tcGxldGVkICYmIG1faW50ZXJhY3RhYmxlICYmIHRhcmdldC5DYW5JbnRlcmFjdCh0aGlzKTsKCX0KCglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKHRhcmdldCBpcyBDaGFyYWN0ZXJEYXRhKQoJCXsKCQkJdmFyIGNoYXJhY3RlciA9IHRhcmdldCBhcyBDaGFyYWN0ZXJEYXRhOwoJCQl2YXIgc3VibWl0YWJsZSA9IG1fRGVtYW5kLlN1Ym1pdHRhYmxlKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQlpZiAoc3VibWl0YWJsZS5Db3VudCA+IDApCgkJCXsKCQkJCW1fdGFyZ2V0ID0gY2hhcmFjdGVyLmdhbWVPYmplY3Q7CgkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJCQltX0RlbWFuZC5GdWxmaWxsKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQl9CgkJCWVsc2UgeyB1aV9kZW1hbmQuRmFpbCgpOyBtX2ludGVyYWN0YWJsZSA9IGZhbHNlOyB9CgkJfQoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uUmVmcmVzaCgpCgl7CgkJQWN0aXZlSW50ZXJhY3QoKTsKCQlSZWZyZXNoRXZlbnRzPy5JbnZva2UoKTsKCX0KCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJbV9pbnRlcmFjdGFibGUgPSBmYWxzZTsKCQkvL2lmIChtX2NoYXJhY3RlcikgbV9jaGFyYWN0ZXIuQ2hhbmdlU3RhdGUoQ2hhcmFjdGVyQ29udHJvbC5TdGF0ZS5XT1JLSU5HLCB0cnVlKTsKCX0KCglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkJlaGF2ZWQoKQoJewoJCW1fdGFyZ2V0Py5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LkNvdW50KEV2ZW50U2VuZGVyLkV2ZW50VHlwZS5EZW1hbmRDb21wbGV0ZSwgZGVtYW5kZXJJZCk7CgkJbV90YXJnZXQgPSBudWxsOwoJfQoKCXZvaWQgT25JdGVtRXZlbnQoSXRlbSBpdGVtLCBzdHJpbmcgYWN0aW9uTmFtZSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAoYWN0aW9uTmFtZSA9PSAiRnVsZmlsbCIpCgkJewoJCQlpZiAobV90YXJnZXQgIT0gbnVsbCkKCQkJewoJCQkJbV90YXJnZXQuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCkuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gLT0gT25JdGVtRXZlbnQ7CgkJCQlSZXNDb2xsZWN0b3IgY29sbGVjdG9yID0gbV90YXJnZXQuR2V0Q29tcG9uZW50PFJlc0NvbGxlY3Rvcj4oKTsKCQkJCWlmIChjb2xsZWN0b3IpCgkJCQl7CgkJCQkJLy9jb2xsZWN0b3IuRGlzcGxheShpdGVtLCBpdGVtQ291bnQsIFVwZGF0ZURlbWFuZCk7CgkJCQkJSGVscGVycy5Mb2codGhpcywgIkZ1bGZpbGwiLCAkIntpdGVtLkl0ZW1OYW1lfXh7aXRlbUNvdW50fSIpOwoJCQkJCVN0YXJ0Q29yb3V0aW5lKFVwZGF0ZURlbWFuZChpdGVtLCBpdGVtQ291bnQpKTsKCQkJCX0KCQkJfQoJCQllbHNlIHVpX2RlbWFuZC5TaG93KG1fRGVtYW5kKTsKCQl9Cgl9CgoJSUVudW1lcmF0b3IgVXBkYXRlRGVtYW5kKEl0ZW0gaXRlbSwgaW50IGl0ZW1Db3VudCkKCXsKCQl2YXIgcmVzT2JqcyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBpdGVtQ291bnQ7IGkrKykKCQl7CgkJCUdhbWVPYmplY3QgcmVzT2JqID0gSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgdHJhbnNmb3JtKTsKCQkJcmVzT2Jqcy5BZGQocmVzT2JqKTsKCQkJcmVzT2JqLnRyYW5zZm9ybS5ET01vdmUobV90YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uICsgbmV3IFZlY3RvcjMoMCwgMiwgMCksIDEpLkZyb20oKTsKCQl9CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcygxLjBmKTsKCQlmb3JlYWNoICh2YXIgb2JqIGluIHJlc09ianMpCgkJewoJCQlEZXN0cm95KG9iaik7CgkJfQoJCXVpX2RlbWFuZC5TaG93KG1fRGVtYW5kKTsKCQlpZiAobV9EZW1hbmQuQ29tcGxldGVkKSBTdGFydEJlaGF2aW91cigpOwoJCWVsc2UgbV90YXJnZXQgPSBudWxsOwoJfQp9CgAAAAAAAAAAuAsAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC4CwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwoKcHVibGljIGNsYXNzIEl0ZW1EZW1hbmRlciA6IFRpbWVyQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCXB1YmxpYyBzdHJpbmcgZGVtYW5kZXJJZDsKCXB1YmxpYyBVbml0eUV2ZW50IFJlZnJlc2hFdmVudHM7CglbU2VyaWFsaXplRmllbGRdCglVSUl0ZW1EZW1hbmQgdWlfZGVtYW5kOwoJW1NlcmlhbGl6ZUZpZWxkXQoJTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8SXRlbSwgaW50Pj4gRGVtYW5kRGF0YTsKCUludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIG1fRGVtYW5kOwoJYm9vbCBtX2ludGVyYWN0YWJsZTsKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgYXV0b0FjdGl2ZTsKCXZvaWQgU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJaWYgKGF1dG9BY3RpdmUpIEFjdGl2ZUludGVyYWN0KCk7Cgl9CgoJcHVibGljIHZvaWQgQWN0aXZlSW50ZXJhY3QoKQoJewoJCW1faW50ZXJhY3RhYmxlID0gdHJ1ZTsKCQltX0RlbWFuZCA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZChLZXlWYWx1ZURhdGEuVG9EaWMoRGVtYW5kRGF0YSkpOwoJCXVpX2RlbWFuZC5TaG93KG1fRGVtYW5kKTsKCQlHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk/LlNldEhhbmRsZSh0cnVlKTsKCX0KCglwdWJsaWMgdm9pZCBPbkludGVyYWN0b3JFbnRlcihJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQltX2ludGVyYWN0YWJsZSA9IHRydWU7Cgl9CgoJcHVibGljIHN0cmluZyBJbnRlcmFjdEFuaW0oSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJcmV0dXJuICIiOwoJfQoKCXB1YmxpYyBib29sIENhbkludGVyYWN0KElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCXJldHVybiAhbV9EZW1hbmQuQ29tcGxldGVkICYmIG1faW50ZXJhY3RhYmxlICYmIHRhcmdldC5DYW5JbnRlcmFjdCh0aGlzKTsKCX0KCglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKHRhcmdldCBpcyBDaGFyYWN0ZXJEYXRhKQoJCXsKCQkJdmFyIGNoYXJhY3RlciA9IHRhcmdldCBhcyBDaGFyYWN0ZXJEYXRhOwoJCQl2YXIgc3VibWl0YWJsZSA9IG1fRGVtYW5kLlN1Ym1pdHRhYmxlKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQlpZiAoc3VibWl0YWJsZS5Db3VudCA+IDApCgkJCXsKCQkJCW1fdGFyZ2V0ID0gY2hhcmFjdGVyLmdhbWVPYmplY3Q7CgkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJCQltX0RlbWFuZC5GdWxmaWxsKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQl9CgkJCWVsc2UgeyB1aV9kZW1hbmQuRmFpbCgpOyBtX2ludGVyYWN0YWJsZSA9IGZhbHNlOyB9CgkJfQoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uUmVmcmVzaCgpCgl7CgkJQWN0aXZlSW50ZXJhY3QoKTsKCQlSZWZyZXNoRXZlbnRzPy5JbnZva2UoKTsKCX0KCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJbV9pbnRlcmFjdGFibGUgPSBmYWxzZTsKCQkvL2lmIChtX2NoYXJhY3RlcikgbV9jaGFyYWN0ZXIuQ2hhbmdlU3RhdGUoQ2hhcmFjdGVyQ29udHJvbC5TdGF0ZS5XT1JLSU5HLCB0cnVlKTsKCX0KCglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkJlaGF2ZWQoKQoJewoJCW1fdGFyZ2V0Py5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LkNvdW50KEV2ZW50U2VuZGVyLkV2ZW50VHlwZS5EZW1hbmRDb21wbGV0ZSwgZGVtYW5kZXJJZCk7CgkJbV90YXJnZXQgPSBudWxsOwoJfQoKCXZvaWQgT25JdGVtRXZlbnQoSXRlbSBpdGVtLCBzdHJpbmcgYWN0aW9uTmFtZSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAoYWN0aW9uTmFtZSA9PSAiRnVsZmlsbCIpCgkJewoJCQlpZiAobV90YXJnZXQgIT0gbnVsbCkKCQkJewoJCQkJbV90YXJnZXQuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCkuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gLT0gT25JdGVtRXZlbnQ7CgkJCQlSZXNDb2xsZWN0b3IgY29sbGVjdG9yID0gbV90YXJnZXQuR2V0Q29tcG9uZW50PFJlc0NvbGxlY3Rvcj4oKTsKCQkJCWlmIChjb2xsZWN0b3IpCgkJCQl7CgkJCQkJLy9jb2xsZWN0b3IuRGlzcGxheShpdGVtLCBpdGVtQ291bnQsIFVwZGF0ZURlbWFuZCk7CgkJCQkJSGVscGVycy5Mb2codGhpcywgIkZ1bGZpbGwiLCAkIntpdGVtLkl0ZW1OYW1lfXh7aXRlbUNvdW50fSIpOwoJCQkJCVN0YXJ0Q29yb3V0aW5lKFVwZGF0ZURlbWFuZChpdGVtLCBpdGVtQ291bnQpKTsKCQkJCX0KCQkJfQoJCQllbHNlIHVpX2RlbWFuZC5TaG93KG1fRGVtYW5kKTsKCQl9Cgl9CgoJSUVudW1lcmF0b3IgVXBkYXRlRGVtYW5kKEl0ZW0gaXRlbSwgaW50IGl0ZW1Db3VudCkKCXsKCQl2YXIgcmVzT2JqcyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBpdGVtQ291bnQ7IGkrKykKCQl7CgkJCUdhbWVPYmplY3QgcmVzT2JqID0gSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgdHJhbnNmb3JtKTsKCQkJcmVzT2Jqcy5BZGQocmVzT2JqKTsKCQkJcmVzT2JqLnRyYW5zZm9ybS5ET01vdmUobV90YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uICsgbmV3IFZlY3RvcjMoMCwgMiwgMCksIDEpLkZyb20oKTsKCQl9CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcygxLjBmKTsKCQlmb3JlYWNoICh2YXIgb2JqIGluIHJlc09ianMpCgkJewoJCQlEZXN0cm95KG9iaik7CgkJfQoJCXVpX2RlbWFuZC5TaG93KG1fRGVtYW5kKTsKCQlpZiAobV9EZW1hbmQuQ29tcGxldGVkKSBTdGFydFRpbWVyKCk7CgkJZWxzZSBtX3RhcmdldCA9IG51bGw7Cgl9Cn0KAAAAAAAAAABUDAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABUDAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwoKcHVibGljIGNsYXNzIEl0ZW1EZW1hbmRlciA6IFRpbWVyQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCXB1YmxpYyBzdHJpbmcgZGVtYW5kZXJJZDsKCXB1YmxpYyBVbml0eUV2ZW50IFJlZnJlc2hFdmVudHM7CglbU2VyaWFsaXplRmllbGRdCglVSUl0ZW1EZW1hbmQgdWlfZGVtYW5kOwoJW1NlcmlhbGl6ZUZpZWxkXQoJTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8SXRlbSwgaW50Pj4gRGVtYW5kRGF0YTsKCUludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIG1fRGVtYW5kOwoJW1NlcmlhbGl6ZUZpZWxkXQoJYm9vbCBhdXRvQWN0aXZlOwoJcHVibGljIElJbnRlcmFjdGFibGUgQ3VycmVudEludGVyYWN0b3IgeyBnZXQgeyByZXR1cm4gbV9pbnRlcmFjdG9yOyB9IHNldCB7IG1faW50ZXJhY3RvciA9IHZhbHVlOyB9IH0KCXByb3RlY3RlZCBJSW50ZXJhY3RhYmxlIG1faW50ZXJhY3RvcjsKCXZvaWQgU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJaWYgKGF1dG9BY3RpdmUpIEFjdGl2ZUludGVyYWN0KCk7Cgl9CgoJcHVibGljIHZvaWQgQWN0aXZlSW50ZXJhY3QoKQoJewoJCW1fRGVtYW5kID0gbmV3IEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kKEtleVZhbHVlRGF0YS5Ub0RpYyhEZW1hbmREYXRhKSk7CgkJdWlfZGVtYW5kLlNob3cobV9EZW1hbmQpOwoJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uU2V0SGFuZGxlKHRydWUpOwoJfQoKCXB1YmxpYyBzdHJpbmcgSW50ZXJhY3RBbmltKElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCXJldHVybiAiIjsKCX0KCglwdWJsaWMgYm9vbCBDYW5JbnRlcmFjdChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlyZXR1cm4gIW1fRGVtYW5kLkNvbXBsZXRlZCAmJiAhaXNTdGFydGVkICYmIHRhcmdldC5DYW5JbnRlcmFjdCh0aGlzKSAmJiBtX2ludGVyYWN0b3IgPT0gbnVsbDsKCX0KCglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKG1faW50ZXJhY3RvciA9PSBudWxsICYmIHRhcmdldCBpcyBDaGFyYWN0ZXJEYXRhKQoJCXsKCQkJdmFyIGNoYXJhY3RlciA9IHRhcmdldCBhcyBDaGFyYWN0ZXJEYXRhOwoJCQl2YXIgc3VibWl0YWJsZSA9IG1fRGVtYW5kLlN1Ym1pdHRhYmxlKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQlpZiAoc3VibWl0YWJsZS5Db3VudCA+IDApCgkJCXsKCQkJCW1faW50ZXJhY3RvciA9IGNoYXJhY3RlcjsKCQkJCWNoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiArPSBPbkl0ZW1FdmVudDsKCQkJCW1fRGVtYW5kLkZ1bGZpbGwoY2hhcmFjdGVyLkludmVudG9yeSk7CgkJCX0KCQkJZWxzZSB1aV9kZW1hbmQuRmFpbCgpOwoJCX0KCQllbHNlIGlmIChtX2ludGVyYWN0b3IgPT0gdGFyZ2V0KSBtX2ludGVyYWN0b3IgPSBudWxsOwoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uUmVmcmVzaCgpCgl7CgkJQWN0aXZlSW50ZXJhY3QoKTsKCQlSZWZyZXNoRXZlbnRzPy5JbnZva2UoKTsKCX0KCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJLy9pZiAobV9jaGFyYWN0ZXIpIG1fY2hhcmFjdGVyLkNoYW5nZVN0YXRlKENoYXJhY3RlckNvbnRyb2wuU3RhdGUuV09SS0lORywgdHJ1ZSk7Cgl9CgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25CZWhhdmVkKCkKCXsKCQltX3RhcmdldD8uR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5Db3VudChFdmVudFNlbmRlci5FdmVudFR5cGUuRGVtYW5kQ29tcGxldGUsIGRlbWFuZGVySWQpOwoJCW1fdGFyZ2V0ID0gbnVsbDsKCX0KCgl2b2lkIE9uSXRlbUV2ZW50KEl0ZW0gaXRlbSwgc3RyaW5nIGFjdGlvbk5hbWUsIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKGFjdGlvbk5hbWUgPT0gIkZ1bGZpbGwiKQoJCXsKCQkJQ2hhcmFjdGVyRGF0YSBjaGFyYWN0ZXIgPSBtX2ludGVyYWN0b3IgYXMgQ2hhcmFjdGVyRGF0YTsKCQkJbV9pbnRlcmFjdG9yID0gbnVsbDsKCQkJaWYgKGNoYXJhY3RlciAhPSBudWxsKQoJCQl7CgkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gLT0gT25JdGVtRXZlbnQ7CgkJCQlSZXNDb2xsZWN0b3IgY29sbGVjdG9yID0gY2hhcmFjdGVyLkdldENvbXBvbmVudDxSZXNDb2xsZWN0b3I+KCk7CgkJCQlpZiAoY29sbGVjdG9yKQoJCQkJewoJCQkJCW1fdGFyZ2V0ID0gY2hhcmFjdGVyLmdhbWVPYmplY3Q7CgkJCQkJSGVscGVycy5Mb2codGhpcywgIkZ1bGZpbGwiLCAkIntpdGVtLkl0ZW1OYW1lfXh7aXRlbUNvdW50fSIpOwoJCQkJCVN0YXJ0Q29yb3V0aW5lKFVwZGF0ZURlbWFuZChpdGVtLCBpdGVtQ291bnQpKTsKCQkJCX0KCQkJCWVsc2UgaWYgKG1fRGVtYW5kLkNvbXBsZXRlZCkgU3RhcnRUaW1lcigpOwoJCQl9CgkJCWVsc2UgdWlfZGVtYW5kLlNob3cobV9EZW1hbmQpOwoJCX0KCX0KCglJRW51bWVyYXRvciBVcGRhdGVEZW1hbmQoSXRlbSBpdGVtLCBpbnQgaXRlbUNvdW50KQoJewoJCWlmIChtX3RhcmdldCAhPSBudWxsKQoJCXsKCQkJdmFyIHJlc09ianMgPSBuZXcgTGlzdDxHYW1lT2JqZWN0PigpOwoJCQlmb3IgKGludCBpID0gMDsgaSA8IGl0ZW1Db3VudDsgaSsrKQoJCQl7CgkJCQlHYW1lT2JqZWN0IHJlc09iaiA9IEluc3RhbnRpYXRlKGl0ZW0uV29ybGRPYmplY3RQcmVmYWIsIHRyYW5zZm9ybSk7CgkJCQlyZXNPYmpzLkFkZChyZXNPYmopOwoJCQkJcmVzT2JqLnRyYW5zZm9ybS5ET01vdmUobV90YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uICsgbmV3IFZlY3RvcjMoMCwgMiwgMCksIDEpLkZyb20oKTsKCQkJfQoJCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKDEuMGYpOwoJCQlmb3JlYWNoICh2YXIgb2JqIGluIHJlc09ianMpCgkJCXsKCQkJCURlc3Ryb3kob2JqKTsKCQkJfQoJCQl1aV9kZW1hbmQuU2hvdyhtX0RlbWFuZCk7CgkJCWlmIChtX0RlbWFuZC5Db21wbGV0ZWQpIFN0YXJ0VGltZXIoKTsKCQl9Cgl9Cn0KAAAAAAAAAAA7DAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA7DAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBUaW1lckJlaGF2aW91ciwgSUludGVyYWN0YWJsZQp7CglwdWJsaWMgc3RyaW5nIGRlbWFuZGVySWQ7CglwdWJsaWMgVW5pdHlFdmVudCBSZWZyZXNoRXZlbnRzOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVUlJdGVtRGVtYW5kIHVpX2RlbWFuZDsKCVtTZXJpYWxpemVGaWVsZF0KCUxpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEl0ZW0sIGludD4+IERlbWFuZERhdGE7CglJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZCBtX0RlbWFuZDsKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgYXV0b0FjdGl2ZTsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1faW50ZXJhY3RvcjsgfSBzZXQgeyBtX2ludGVyYWN0b3IgPSB2YWx1ZTsgfSB9Cglwcm90ZWN0ZWQgSUludGVyYWN0YWJsZSBtX2ludGVyYWN0b3I7Cgl2b2lkIFN0YXJ0KCkKCXsKCQl1aV9kZW1hbmQuZ2FtZU9iamVjdC5TZXRBY3RpdmUoZmFsc2UpOwoJCWlmIChhdXRvQWN0aXZlKSBBY3RpdmVJbnRlcmFjdCgpOwoJfQoKCXB1YmxpYyB2b2lkIEFjdGl2ZUludGVyYWN0KCkKCXsKCQltX0RlbWFuZCA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZChLZXlWYWx1ZURhdGEuVG9EaWMoRGVtYW5kRGF0YSkpOwoJCXVpX2RlbWFuZC5TaG93KG1fRGVtYW5kKTsKCQlHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk/LlNldEhhbmRsZSh0cnVlKTsKCX0KCglwdWJsaWMgc3RyaW5nIEludGVyYWN0QW5pbShJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlyZXR1cm4gIlNraWxsIjsKCX0KCglwdWJsaWMgYm9vbCBDYW5JbnRlcmFjdChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlyZXR1cm4gIW1fRGVtYW5kLkNvbXBsZXRlZCAmJiAhaXNTdGFydGVkICYmIHRhcmdldC5DYW5JbnRlcmFjdCh0aGlzKSAmJiBtX2ludGVyYWN0b3IgPT0gbnVsbDsKCX0KCglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKG1faW50ZXJhY3RvciA9PSBudWxsICYmIHRhcmdldCBpcyBDaGFyYWN0ZXJEYXRhKQoJCXsKCQkJdmFyIGNoYXJhY3RlciA9IHRhcmdldCBhcyBDaGFyYWN0ZXJEYXRhOwoJCQl2YXIgc3VibWl0YWJsZSA9IG1fRGVtYW5kLlN1Ym1pdHRhYmxlKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQlpZiAoc3VibWl0YWJsZS5WYWx1ZXMuU3VtKCkgPiAwKQoJCQl7CgkJCQltX2ludGVyYWN0b3IgPSBjaGFyYWN0ZXI7CgkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJCQltX0RlbWFuZC5GdWxmaWxsKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQl9CgkJCWVsc2UgdWlfZGVtYW5kLkZhaWwoKTsKCQl9Cgl9CgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25SZWZyZXNoKCkKCXsKCQlBY3RpdmVJbnRlcmFjdCgpOwoJCVJlZnJlc2hFdmVudHM/Lkludm9rZSgpOwoJfQoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TdGFydCgpCgl7CgkJdWlfZGVtYW5kLmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQkvL2lmIChtX2NoYXJhY3RlcikgbV9jaGFyYWN0ZXIuQ2hhbmdlU3RhdGUoQ2hhcmFjdGVyQ29udHJvbC5TdGF0ZS5XT1JLSU5HLCB0cnVlKTsKCX0KCglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkJlaGF2ZWQoKQoJewoJCW1fdGFyZ2V0Py5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LkNvdW50KEV2ZW50U2VuZGVyLkV2ZW50VHlwZS5EZW1hbmRDb21wbGV0ZSwgZGVtYW5kZXJJZCk7CgkJbV90YXJnZXQgPSBudWxsOwoJfQoKCXZvaWQgT25JdGVtRXZlbnQoSXRlbSBpdGVtLCBzdHJpbmcgYWN0aW9uTmFtZSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAoYWN0aW9uTmFtZSA9PSAiRnVsZmlsbCIpCgkJewoJCQlDaGFyYWN0ZXJEYXRhIGNoYXJhY3RlciA9IG1faW50ZXJhY3RvciBhcyBDaGFyYWN0ZXJEYXRhOwoJCQltX2ludGVyYWN0b3IgPSBudWxsOwoJCQlpZiAoY2hhcmFjdGVyICE9IG51bGwpCgkJCXsKCQkJCWNoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiAtPSBPbkl0ZW1FdmVudDsKCQkJCVJlc0NvbGxlY3RvciBjb2xsZWN0b3IgPSBjaGFyYWN0ZXIuR2V0Q29tcG9uZW50PFJlc0NvbGxlY3Rvcj4oKTsKCQkJCWlmIChjb2xsZWN0b3IpCgkJCQl7CgkJCQkJbV90YXJnZXQgPSBjaGFyYWN0ZXIuZ2FtZU9iamVjdDsKCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRnVsZmlsbCIsICQie2l0ZW0uSXRlbU5hbWV9eHtpdGVtQ291bnR9Iik7CgkJCQkJU3RhcnRDb3JvdXRpbmUoVXBkYXRlRGVtYW5kKGl0ZW0sIGl0ZW1Db3VudCkpOwoJCQkJfQoJCQkJZWxzZSBpZiAobV9EZW1hbmQuQ29tcGxldGVkKSBTdGFydFRpbWVyKCk7CgkJCX0KCQkJZWxzZSB1aV9kZW1hbmQuU2hvdyhtX0RlbWFuZCk7CgkJfQoJfQoKCUlFbnVtZXJhdG9yIFVwZGF0ZURlbWFuZChJdGVtIGl0ZW0sIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKG1fdGFyZ2V0ICE9IG51bGwpCgkJewoJCQl2YXIgcmVzT2JqcyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7CgkJCWZvciAoaW50IGkgPSAwOyBpIDwgaXRlbUNvdW50OyBpKyspCgkJCXsKCQkJCUdhbWVPYmplY3QgcmVzT2JqID0gSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgdHJhbnNmb3JtKTsKCQkJCXJlc09ianMuQWRkKHJlc09iaik7CgkJCQlyZXNPYmoudHJhbnNmb3JtLkRPTW92ZShtX3RhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gKyBuZXcgVmVjdG9yMygwLCAyLCAwKSwgMSkuRnJvbSgpOwoJCQl9CgkJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMoMS4wZik7CgkJCWZvcmVhY2ggKHZhciBvYmogaW4gcmVzT2JqcykKCQkJewoJCQkJRGVzdHJveShvYmopOwoJCQl9CgkJCXVpX2RlbWFuZC5TaG93KG1fRGVtYW5kKTsKCQkJaWYgKG1fRGVtYW5kLkNvbXBsZXRlZCkgU3RhcnRUaW1lcigpOwoJCX0KCX0KfQoAAAAAAAAAAGAMAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAABgDAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBUaW1lckJlaGF2aW91ciwgSUludGVyYWN0YWJsZQp7CglwdWJsaWMgc3RyaW5nIGRlbWFuZGVySWQ7CglwdWJsaWMgVW5pdHlFdmVudCBSZWZyZXNoRXZlbnRzOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVUlJdGVtRGVtYW5kIHVpX2RlbWFuZDsKCVtTZXJpYWxpemVGaWVsZF0KCUxpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEl0ZW0sIGludD4+IERlbWFuZERhdGE7CglJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZCBtX0RlbWFuZDsKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgYXV0b0FjdGl2ZTsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1faW50ZXJhY3RvcjsgfSBzZXQgeyBtX2ludGVyYWN0b3IgPSB2YWx1ZTsgfSB9Cglwcm90ZWN0ZWQgSUludGVyYWN0YWJsZSBtX2ludGVyYWN0b3I7Cgl2b2lkIFN0YXJ0KCkKCXsKCQl1aV9kZW1hbmQuZ2FtZU9iamVjdC5TZXRBY3RpdmUoZmFsc2UpOwoJCWlmIChhdXRvQWN0aXZlKSBBY3RpdmVJbnRlcmFjdCgpOwoJfQoKCXB1YmxpYyB2b2lkIEFjdGl2ZUludGVyYWN0KCkKCXsKCQltX0RlbWFuZCA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZChLZXlWYWx1ZURhdGEuVG9EaWMoRGVtYW5kRGF0YSkpOwoJCXVpX2RlbWFuZC5TaG93KG1fRGVtYW5kKTsKCQlHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk/LlNldEhhbmRsZSh0cnVlKTsKCX0KCglwdWJsaWMgc3RyaW5nIEludGVyYWN0QW5pbShJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlyZXR1cm4gIlNraWxsIjsKCX0KCglwdWJsaWMgYm9vbCBDYW5JbnRlcmFjdChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlyZXR1cm4gIW1fRGVtYW5kLkNvbXBsZXRlZCAmJiAhaXNTdGFydGVkICYmIHRhcmdldC5DYW5JbnRlcmFjdCh0aGlzKSAmJiBtX2ludGVyYWN0b3IgPT0gbnVsbDsKCX0KCglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKG1faW50ZXJhY3RvciA9PSBudWxsICYmIHRhcmdldCBpcyBDaGFyYWN0ZXJEYXRhKQoJCXsKCQkJdmFyIGNoYXJhY3RlciA9IHRhcmdldCBhcyBDaGFyYWN0ZXJEYXRhOwoJCQl2YXIgc3VibWl0YWJsZSA9IG1fRGVtYW5kLlN1Ym1pdHRhYmxlKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQlpZiAoc3VibWl0YWJsZS5WYWx1ZXMuU3VtKCkgPiAwKQoJCQl7CgkJCQltX2ludGVyYWN0b3IgPSBjaGFyYWN0ZXI7CgkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJCQltX0RlbWFuZC5GdWxmaWxsKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQl9CgkJCWVsc2UgeyB1aV9kZW1hbmQuRmFpbCgpOyB0YXJnZXQuQ3VycmVudEludGVyYWN0b3IgPSBudWxsOyB9CgkJfQoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uUmVmcmVzaCgpCgl7CgkJQWN0aXZlSW50ZXJhY3QoKTsKCQlSZWZyZXNoRXZlbnRzPy5JbnZva2UoKTsKCX0KCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJLy9pZiAobV9jaGFyYWN0ZXIpIG1fY2hhcmFjdGVyLkNoYW5nZVN0YXRlKENoYXJhY3RlckNvbnRyb2wuU3RhdGUuV09SS0lORywgdHJ1ZSk7Cgl9CgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25CZWhhdmVkKCkKCXsKCQltX3RhcmdldD8uR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5Db3VudChFdmVudFNlbmRlci5FdmVudFR5cGUuRGVtYW5kQ29tcGxldGUsIGRlbWFuZGVySWQpOwoJCW1fdGFyZ2V0ID0gbnVsbDsKCX0KCgl2b2lkIE9uSXRlbUV2ZW50KEl0ZW0gaXRlbSwgc3RyaW5nIGFjdGlvbk5hbWUsIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKGFjdGlvbk5hbWUgPT0gIkZ1bGZpbGwiKQoJCXsKCQkJQ2hhcmFjdGVyRGF0YSBjaGFyYWN0ZXIgPSBtX2ludGVyYWN0b3IgYXMgQ2hhcmFjdGVyRGF0YTsKCQkJbV9pbnRlcmFjdG9yID0gbnVsbDsKCQkJaWYgKGNoYXJhY3RlciAhPSBudWxsKQoJCQl7CgkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gLT0gT25JdGVtRXZlbnQ7CgkJCQlSZXNDb2xsZWN0b3IgY29sbGVjdG9yID0gY2hhcmFjdGVyLkdldENvbXBvbmVudDxSZXNDb2xsZWN0b3I+KCk7CgkJCQlpZiAoY29sbGVjdG9yKQoJCQkJewoJCQkJCW1fdGFyZ2V0ID0gY2hhcmFjdGVyLmdhbWVPYmplY3Q7CgkJCQkJSGVscGVycy5Mb2codGhpcywgIkZ1bGZpbGwiLCAkIntpdGVtLkl0ZW1OYW1lfXh7aXRlbUNvdW50fSIpOwoJCQkJCVN0YXJ0Q29yb3V0aW5lKFVwZGF0ZURlbWFuZChpdGVtLCBpdGVtQ291bnQpKTsKCQkJCX0KCQkJCWVsc2UgaWYgKG1fRGVtYW5kLkNvbXBsZXRlZCkgU3RhcnRUaW1lcigpOwoJCQl9CgkJCWVsc2UgdWlfZGVtYW5kLlNob3cobV9EZW1hbmQpOwoJCX0KCX0KCglJRW51bWVyYXRvciBVcGRhdGVEZW1hbmQoSXRlbSBpdGVtLCBpbnQgaXRlbUNvdW50KQoJewoJCWlmIChtX3RhcmdldCAhPSBudWxsKQoJCXsKCQkJdmFyIHJlc09ianMgPSBuZXcgTGlzdDxHYW1lT2JqZWN0PigpOwoJCQlmb3IgKGludCBpID0gMDsgaSA8IGl0ZW1Db3VudDsgaSsrKQoJCQl7CgkJCQlHYW1lT2JqZWN0IHJlc09iaiA9IEluc3RhbnRpYXRlKGl0ZW0uV29ybGRPYmplY3RQcmVmYWIsIHRyYW5zZm9ybSk7CgkJCQlyZXNPYmpzLkFkZChyZXNPYmopOwoJCQkJcmVzT2JqLnRyYW5zZm9ybS5ET01vdmUobV90YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uICsgbmV3IFZlY3RvcjMoMCwgMiwgMCksIDEpLkZyb20oKTsKCQkJfQoJCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKDEuMGYpOwoJCQlmb3JlYWNoICh2YXIgb2JqIGluIHJlc09ianMpCgkJCXsKCQkJCURlc3Ryb3kob2JqKTsKCQkJfQoJCQl1aV9kZW1hbmQuU2hvdyhtX0RlbWFuZCk7CgkJCWlmIChtX0RlbWFuZC5Db21wbGV0ZWQpIFN0YXJ0VGltZXIoKTsKCQl9Cgl9Cn0KAAAAAAAAAACvDQAAAAAAAAAAAAAAAAAAAAAAAK8NAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACvDQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBUaW1lckJlaGF2aW91ciwgSUludGVyYWN0YWJsZQp7CglwdWJsaWMgc3RyaW5nIGRlbWFuZGVySWQ7CglwdWJsaWMgVW5pdHlFdmVudCBSZWFkeUV2ZW50czsKCXB1YmxpYyBVbml0eUV2ZW50IFJlZnJlc2hFdmVudHM7CglbU2VyaWFsaXplRmllbGRdCglVSUl0ZW1EZW1hbmQgdWlfZGVtYW5kOwoJW1NlcmlhbGl6ZUZpZWxkXQoJTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8SXRlbSwgaW50Pj4gRGVtYW5kRGF0YTsKCUludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIG1fRGVtYW5kOwoJW1NlcmlhbGl6ZUZpZWxkXQoJYm9vbCBhdXRvQWN0aXZlOwoJcHVibGljIElJbnRlcmFjdGFibGUgQ3VycmVudEludGVyYWN0b3IgeyBnZXQgeyByZXR1cm4gbV9pbnRlcmFjdG9yOyB9IHNldCB7IG1faW50ZXJhY3RvciA9IHZhbHVlOyB9IH0KCXByb3RlY3RlZCBJSW50ZXJhY3RhYmxlIG1faW50ZXJhY3RvcjsKCXZvaWQgU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJaWYgKGF1dG9BY3RpdmUpIEFjdGl2ZUludGVyYWN0KCk7Cgl9CgoJcHVibGljIHZvaWQgQWN0aXZlSW50ZXJhY3QoKQoJewoJCW1fRGVtYW5kID0gbmV3IEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kKEtleVZhbHVlRGF0YS5Ub0RpYyhEZW1hbmREYXRhKSk7CgkJdWlfZGVtYW5kLlNob3cobV9EZW1hbmQpOwoJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uU2V0SGFuZGxlKHRydWUpOwoJfQoKCXB1YmxpYyBzdHJpbmcgSW50ZXJhY3RBbmltKElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCXJldHVybiAiIjsKCX0KCglwdWJsaWMgYm9vbCBDYW5JbnRlcmFjdChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlyZXR1cm4gIW1fRGVtYW5kLkNvbXBsZXRlZCAmJiAhaXNTdGFydGVkICYmIHRhcmdldC5DYW5JbnRlcmFjdCh0aGlzKSAmJiBtX2ludGVyYWN0b3IgPT0gbnVsbDsKCX0KCglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKG1faW50ZXJhY3RvciA9PSBudWxsICYmIHRhcmdldCBpcyBDaGFyYWN0ZXJEYXRhKQoJCXsKCQkJdmFyIGNoYXJhY3RlciA9IHRhcmdldCBhcyBDaGFyYWN0ZXJEYXRhOwoJCQl2YXIgc3VibWl0YWJsZSA9IG1fRGVtYW5kLlN1Ym1pdHRhYmxlKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQlpZiAoc3VibWl0YWJsZS5WYWx1ZXMuU3VtKCkgPiAwKQoJCQl7CgkJCQlSZWFkeUV2ZW50cz8uSW52b2tlKCk7CgkJCQl0YXJnZXQuQ3VycmVudEludGVyYWN0b3IgPSBudWxsOwoJCQkJaWYgKGNoYXJhY3RlciAhPSBHYW1lTWFuYWdlci5DdXJIZXJvKQoJCQkJewoJCQkJCW1faW50ZXJhY3RvciA9IGNoYXJhY3RlcjsKCQkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJCQkJbV9EZW1hbmQuRnVsZmlsbChjaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJCX0KCQkJfQoJCQllbHNlIHsgdWlfZGVtYW5kLkZhaWwoKTsgdGFyZ2V0LkN1cnJlbnRJbnRlcmFjdG9yID0gbnVsbDsgfQoJCX0KCX0KCglwdWJsaWMgdm9pZCBPbkNsaWNrX0ludGVyYWN0KCkKCXsKCQltX2ludGVyYWN0b3IgPSBHYW1lTWFuYWdlci5DdXJIZXJvOwoJCUdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJbV9EZW1hbmQuRnVsZmlsbChHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeSk7Cgl9CgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25SZWZyZXNoKCkKCXsKCQlBY3RpdmVJbnRlcmFjdCgpOwoJCVJlZnJlc2hFdmVudHM/Lkludm9rZSgpOwoJfQoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TdGFydCgpCgl7CgkJdWlfZGVtYW5kLmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQkvL2lmIChtX2NoYXJhY3RlcikgbV9jaGFyYWN0ZXIuQ2hhbmdlU3RhdGUoQ2hhcmFjdGVyQ29udHJvbC5TdGF0ZS5XT1JLSU5HLCB0cnVlKTsKCX0KCglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkJlaGF2ZWQoKQoJewoJCW1fdGFyZ2V0Py5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LkNvdW50KEV2ZW50U2VuZGVyLkV2ZW50VHlwZS5EZW1hbmRDb21wbGV0ZSwgZGVtYW5kZXJJZCk7CgkJbV90YXJnZXQgPSBudWxsOwoJfQoKCXZvaWQgT25JdGVtRXZlbnQoSXRlbSBpdGVtLCBzdHJpbmcgYWN0aW9uTmFtZSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAoYWN0aW9uTmFtZSA9PSAiRnVsZmlsbCIpCgkJewoJCQlDaGFyYWN0ZXJEYXRhIGNoYXJhY3RlciA9IG1faW50ZXJhY3RvciBhcyBDaGFyYWN0ZXJEYXRhOwoJCQltX2ludGVyYWN0b3IgPSBudWxsOwoJCQlpZiAoY2hhcmFjdGVyICE9IG51bGwpCgkJCXsKCQkJCWNoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiAtPSBPbkl0ZW1FdmVudDsKCQkJCVJlc0NvbGxlY3RvciBjb2xsZWN0b3IgPSBjaGFyYWN0ZXIuR2V0Q29tcG9uZW50PFJlc0NvbGxlY3Rvcj4oKTsKCQkJCWlmIChjb2xsZWN0b3IpCgkJCQl7CgkJCQkJbV90YXJnZXQgPSBjaGFyYWN0ZXIuZ2FtZU9iamVjdDsKCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRnVsZmlsbCIsICQie2l0ZW0uSXRlbU5hbWV9eHtpdGVtQ291bnR9Iik7CgkJCQkJU3RhcnRDb3JvdXRpbmUoVXBkYXRlRGVtYW5kKGl0ZW0sIGl0ZW1Db3VudCkpOwoJCQkJfQoJCQkJZWxzZSBpZiAobV9EZW1hbmQuQ29tcGxldGVkKSBTdGFydFRpbWVyKCk7CgkJCX0KCQkJZWxzZSB1aV9kZW1hbmQuU2hvdyhtX0RlbWFuZCk7CgkJfQoJfQoKCUlFbnVtZXJhdG9yIFVwZGF0ZURlbWFuZChJdGVtIGl0ZW0sIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKG1fdGFyZ2V0ICE9IG51bGwpCgkJewoJCQl2YXIgcmVzT2JqcyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7CgkJCWZvciAoaW50IGkgPSAwOyBpIDwgaXRlbUNvdW50OyBpKyspCgkJCXsKCQkJCUdhbWVPYmplY3QgcmVzT2JqID0gSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgdHJhbnNmb3JtKTsKCQkJCXJlc09ianMuQWRkKHJlc09iaik7CgkJCQlyZXNPYmoudHJhbnNmb3JtLkRPTW92ZShtX3RhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gKyBuZXcgVmVjdG9yMygwLCAyLCAwKSwgMSkuRnJvbSgpOwoJCQl9CgkJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMoMS4wZik7CgkJCWZvcmVhY2ggKHZhciBvYmogaW4gcmVzT2JqcykKCQkJewoJCQkJRGVzdHJveShvYmopOwoJCQl9CgkJCXVpX2RlbWFuZC5TaG93KG1fRGVtYW5kKTsKCQkJaWYgKG1fRGVtYW5kLkNvbXBsZXRlZCkgU3RhcnRUaW1lcigpOwoJCX0KCX0KfQoAAAAAAAAAAPAOAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADwDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBUaW1lckJlaGF2aW91ciwgSUludGVyYWN0YWJsZQp7CglwdWJsaWMgc3RyaW5nIGRlbWFuZGVySWQ7CglwdWJsaWMgVW5pdHlFdmVudCBSZWFkeUV2ZW50czsKCXB1YmxpYyBVbml0eUV2ZW50IFJlZnJlc2hFdmVudHM7CglbU2VyaWFsaXplRmllbGRdCglVSUl0ZW1EZW1hbmQgdWlfZGVtYW5kOwoJW1NlcmlhbGl6ZUZpZWxkXQoJTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8SXRlbSwgaW50Pj4gRGVtYW5kRGF0YTsKCUludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIG1fRGVtYW5kOwoJW1NlcmlhbGl6ZUZpZWxkXQoJYm9vbCBhdXRvQWN0aXZlOwoJcHVibGljIElJbnRlcmFjdGFibGUgQ3VycmVudEludGVyYWN0b3IgeyBnZXQgeyByZXR1cm4gbV9pbnRlcmFjdG9yOyB9IHNldCB7IG1faW50ZXJhY3RvciA9IHZhbHVlOyB9IH0KCXByb3RlY3RlZCBJSW50ZXJhY3RhYmxlIG1faW50ZXJhY3RvcjsKCXZvaWQgU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJaWYgKGF1dG9BY3RpdmUpIEFjdGl2ZUludGVyYWN0KCk7Cgl9CgoJcHVibGljIHZvaWQgQWN0aXZlSW50ZXJhY3QoKQoJewoJCW1fRGVtYW5kID0gbmV3IEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kKEtleVZhbHVlRGF0YS5Ub0RpYyhEZW1hbmREYXRhKSk7CgkJdWlfZGVtYW5kLlNob3cobV9EZW1hbmQpOwoJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uU2V0SGFuZGxlKHRydWUpOwoJfQoKCXB1YmxpYyBzdHJpbmcgSW50ZXJhY3RBbmltKElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCXJldHVybiAiIjsKCX0KCglwdWJsaWMgYm9vbCBDYW5JbnRlcmFjdChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlyZXR1cm4gIW1fRGVtYW5kLkNvbXBsZXRlZCAmJiAhaXNTdGFydGVkICYmIHRhcmdldC5DYW5JbnRlcmFjdCh0aGlzKSAmJiBtX2ludGVyYWN0b3IgPT0gbnVsbDsKCX0KCglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKG1faW50ZXJhY3RvciA9PSBudWxsICYmIHRhcmdldCBpcyBDaGFyYWN0ZXJEYXRhKQoJCXsKCQkJdmFyIGNoYXJhY3RlciA9IHRhcmdldCBhcyBDaGFyYWN0ZXJEYXRhOwoJCQl2YXIgc3VibWl0YWJsZSA9IG1fRGVtYW5kLlN1Ym1pdHRhYmxlKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQlpZiAoc3VibWl0YWJsZS5WYWx1ZXMuU3VtKCkgPiAwKQoJCQl7CgkJCQlSZWFkeUV2ZW50cz8uSW52b2tlKCk7CgkJCQl0YXJnZXQuQ3VycmVudEludGVyYWN0b3IgPSBudWxsOwoJCQkJaWYgKGNoYXJhY3RlciA9PSBHYW1lTWFuYWdlci5DdXJIZXJvKQoJCQkJewoJCQkJCVVJSW50ZXJhY3RXaW5kb3cgd2luID0gR2FtZU1hbmFnZXIuR2FtZVVJLk9wZW5XaW5kb3coIndpbkludGVyYWN0IikgYXMgVUlJbnRlcmFjdFdpbmRvdzsKCQkJCQl3aW4uSW5pdCh0aGlzKTsKCQkJCQlHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk/LkV4aXRFdmVudC5BZGRMaXN0ZW5lcigoKSA9PiB3aW4uQ2xvc2UoKSk7CgkJCQkJd2luLmJ0X2ludGVyYWN0Lm9uQ2xpY2suQWRkTGlzdGVuZXIoKCkgPT4gT25DbGlja19JbnRlcmFjdCh3aW4pKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQltX2ludGVyYWN0b3IgPSBjaGFyYWN0ZXI7CgkJCQkJY2hhcmFjdGVyLkludmVudG9yeS5JdGVtQWN0aW9uICs9IE9uSXRlbUV2ZW50OwoJCQkJCW1fRGVtYW5kLkZ1bGZpbGwoY2hhcmFjdGVyLkludmVudG9yeSk7CgkJCQl9CgkJCX0KCQkJZWxzZSB7IHVpX2RlbWFuZC5GYWlsKCk7IHRhcmdldC5DdXJyZW50SW50ZXJhY3RvciA9IG51bGw7IH0KCQl9Cgl9CgoJcHVibGljIHZvaWQgT25DbGlja19JbnRlcmFjdChVSUludGVyYWN0V2luZG93IHdpbikKCXsKCQltX2ludGVyYWN0b3IgPSBHYW1lTWFuYWdlci5DdXJIZXJvOwoJCUdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJbV9EZW1hbmQuRnVsZmlsbChHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeSk7CgkJd2luLkNsb3NlKCk7Cgl9CgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25SZWZyZXNoKCkKCXsKCQlBY3RpdmVJbnRlcmFjdCgpOwoJCVJlZnJlc2hFdmVudHM/Lkludm9rZSgpOwoJfQoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TdGFydCgpCgl7CgkJdWlfZGVtYW5kLmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQkvL2lmIChtX2NoYXJhY3RlcikgbV9jaGFyYWN0ZXIuQ2hhbmdlU3RhdGUoQ2hhcmFjdGVyQ29udHJvbC5TdGF0ZS5XT1JLSU5HLCB0cnVlKTsKCX0KCglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkJlaGF2ZWQoKQoJewoJCW1fdGFyZ2V0Py5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LkNvdW50KEV2ZW50U2VuZGVyLkV2ZW50VHlwZS5EZW1hbmRDb21wbGV0ZSwgZGVtYW5kZXJJZCk7CgkJbV90YXJnZXQgPSBudWxsOwoJfQoKCXZvaWQgT25JdGVtRXZlbnQoSXRlbSBpdGVtLCBzdHJpbmcgYWN0aW9uTmFtZSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAoYWN0aW9uTmFtZSA9PSAiRnVsZmlsbCIpCgkJewoJCQlDaGFyYWN0ZXJEYXRhIGNoYXJhY3RlciA9IG1faW50ZXJhY3RvciBhcyBDaGFyYWN0ZXJEYXRhOwoJCQltX2ludGVyYWN0b3IgPSBudWxsOwoJCQlpZiAoY2hhcmFjdGVyICE9IG51bGwpCgkJCXsKCQkJCWNoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiAtPSBPbkl0ZW1FdmVudDsKCQkJCVJlc0NvbGxlY3RvciBjb2xsZWN0b3IgPSBjaGFyYWN0ZXIuR2V0Q29tcG9uZW50PFJlc0NvbGxlY3Rvcj4oKTsKCQkJCWlmIChjb2xsZWN0b3IpCgkJCQl7CgkJCQkJbV90YXJnZXQgPSBjaGFyYWN0ZXIuZ2FtZU9iamVjdDsKCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRnVsZmlsbCIsICQie2l0ZW0uSXRlbU5hbWV9eHtpdGVtQ291bnR9Iik7CgkJCQkJU3RhcnRDb3JvdXRpbmUoVXBkYXRlRGVtYW5kKGl0ZW0sIGl0ZW1Db3VudCkpOwoJCQkJfQoJCQkJZWxzZSBpZiAobV9EZW1hbmQuQ29tcGxldGVkKSBTdGFydFRpbWVyKCk7CgkJCX0KCQkJZWxzZSB1aV9kZW1hbmQuU2hvdyhtX0RlbWFuZCk7CgkJfQoJfQoKCUlFbnVtZXJhdG9yIFVwZGF0ZURlbWFuZChJdGVtIGl0ZW0sIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKG1fdGFyZ2V0ICE9IG51bGwpCgkJewoJCQl2YXIgcmVzT2JqcyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7CgkJCWZvciAoaW50IGkgPSAwOyBpIDwgaXRlbUNvdW50OyBpKyspCgkJCXsKCQkJCUdhbWVPYmplY3QgcmVzT2JqID0gSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgdHJhbnNmb3JtKTsKCQkJCXJlc09ianMuQWRkKHJlc09iaik7CgkJCQlyZXNPYmoudHJhbnNmb3JtLkRPTW92ZShtX3RhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gKyBuZXcgVmVjdG9yMygwLCAyLCAwKSwgMSkuRnJvbSgpOwoJCQl9CgkJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMoMS4wZik7CgkJCWZvcmVhY2ggKHZhciBvYmogaW4gcmVzT2JqcykKCQkJewoJCQkJRGVzdHJveShvYmopOwoJCQl9CgkJCXVpX2RlbWFuZC5TaG93KG1fRGVtYW5kKTsKCQkJaWYgKG1fRGVtYW5kLkNvbXBsZXRlZCkgU3RhcnRUaW1lcigpOwoJCX0KCX0KfQoAAAAAAAAAAKYOAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACmDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBUaW1lckJlaGF2aW91ciwgSUludGVyYWN0YWJsZQp7CglbU2VyaWFsaXplRmllbGRdCglJbnRlcmFjdERhdGEgbV9kYXRhOwoJcHVibGljIEludGVyYWN0RGF0YSBEYXRhIHsgZ2V0IHsgcmV0dXJuIG1fZGF0YTsgfSB9CglbU2VyaWFsaXplRmllbGRdCglVSUl0ZW1EZW1hbmQgdWlfZGVtYW5kOwoJW1NlcmlhbGl6ZUZpZWxkXQoJTGlzdDxLZXlWYWx1ZURhdGEuS2V5VmFsdWU8SXRlbSwgaW50Pj4gRGVtYW5kRGF0YTsKCUludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIG1fRGVtYW5kOwoJcHVibGljIFVuaXR5RXZlbnQgUmVhZHlFdmVudHM7CglwdWJsaWMgVW5pdHlFdmVudCBSZWZyZXNoRXZlbnRzOwoJW1NlcmlhbGl6ZUZpZWxkXQoJYm9vbCBhdXRvQWN0aXZlOwoJcHVibGljIElJbnRlcmFjdGFibGUgQ3VycmVudEludGVyYWN0b3IgeyBnZXQgeyByZXR1cm4gbV9pbnRlcmFjdG9yOyB9IHNldCB7IG1faW50ZXJhY3RvciA9IHZhbHVlOyB9IH0KCXByb3RlY3RlZCBJSW50ZXJhY3RhYmxlIG1faW50ZXJhY3RvcjsKCXZvaWQgU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJaWYgKGF1dG9BY3RpdmUpIEFjdGl2ZUludGVyYWN0KCk7Cgl9CgoJcHVibGljIHZvaWQgQWN0aXZlSW50ZXJhY3QoKQoJewoJCW1fRGVtYW5kID0gbmV3IEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kKEtleVZhbHVlRGF0YS5Ub0RpYyhEZW1hbmREYXRhKSk7CgkJdWlfZGVtYW5kLlNob3cobV9EZW1hbmQpOwoJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uU2V0SGFuZGxlKHRydWUpOwoJfQoKCXB1YmxpYyBib29sIENhbkludGVyYWN0KElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCXJldHVybiAhbV9EZW1hbmQuQ29tcGxldGVkICYmICFpc1N0YXJ0ZWQgJiYgdGFyZ2V0LkNhbkludGVyYWN0KHRoaXMpICYmIG1faW50ZXJhY3RvciA9PSBudWxsOwoJfQoKCXB1YmxpYyB2b2lkIEludGVyYWN0V2l0aChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlpZiAobV9pbnRlcmFjdG9yID09IG51bGwgJiYgdGFyZ2V0IGlzIENoYXJhY3RlckRhdGEpCgkJewoJCQl2YXIgY2hhcmFjdGVyID0gdGFyZ2V0IGFzIENoYXJhY3RlckRhdGE7CgkJCXZhciBzdWJtaXRhYmxlID0gbV9EZW1hbmQuU3VibWl0dGFibGUoY2hhcmFjdGVyLkludmVudG9yeSk7CgkJCWlmIChzdWJtaXRhYmxlLlZhbHVlcy5TdW0oKSA+IDApCgkJCXsKCQkJCVJlYWR5RXZlbnRzPy5JbnZva2UoKTsKCQkJCXRhcmdldC5DdXJyZW50SW50ZXJhY3RvciA9IG51bGw7CgkJCQlpZiAoY2hhcmFjdGVyID09IEdhbWVNYW5hZ2VyLkN1ckhlcm8pCgkJCQl7CgkJCQkJVUlJbnRlcmFjdFdpbmRvdyB3aW4gPSBHYW1lTWFuYWdlci5HYW1lVUkuT3BlbldpbmRvdygid2luSW50ZXJhY3QiKSBhcyBVSUludGVyYWN0V2luZG93OwoJCQkJCXdpbi5Jbml0KHRoaXMsIG1fRGVtYW5kKTsKCQkJCQlHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk/LkV4aXRFdmVudC5BZGRMaXN0ZW5lcigoKSA9PiB3aW4uQ2xvc2UoKSk7CgkJCQkJd2luLmJ0X2ludGVyYWN0Lm9uQ2xpY2suQWRkTGlzdGVuZXIoKCkgPT4gT25DbGlja19JbnRlcmFjdCh3aW4pKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQltX2ludGVyYWN0b3IgPSBjaGFyYWN0ZXI7CgkJCQkJY2hhcmFjdGVyLkludmVudG9yeS5JdGVtQWN0aW9uICs9IE9uSXRlbUV2ZW50OwoJCQkJCW1fRGVtYW5kLkZ1bGZpbGwoY2hhcmFjdGVyLkludmVudG9yeSk7CgkJCQl9CgkJCX0KCQkJZWxzZSB7IHVpX2RlbWFuZC5GYWlsKCk7IHRhcmdldC5DdXJyZW50SW50ZXJhY3RvciA9IG51bGw7IH0KCQl9Cgl9CgoJcHVibGljIHZvaWQgT25DbGlja19JbnRlcmFjdChVSUludGVyYWN0V2luZG93IHdpbikKCXsKCQltX2ludGVyYWN0b3IgPSBHYW1lTWFuYWdlci5DdXJIZXJvOwoJCUdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJbV9EZW1hbmQuRnVsZmlsbChHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeSk7CgkJd2luLkNsb3NlKCk7Cgl9CgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25SZWZyZXNoKCkKCXsKCQlBY3RpdmVJbnRlcmFjdCgpOwoJCVJlZnJlc2hFdmVudHM/Lkludm9rZSgpOwoJfQoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TdGFydCgpCgl7CgkJdWlfZGVtYW5kLmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQkvL2lmIChtX2NoYXJhY3RlcikgbV9jaGFyYWN0ZXIuQ2hhbmdlU3RhdGUoQ2hhcmFjdGVyQ29udHJvbC5TdGF0ZS5XT1JLSU5HLCB0cnVlKTsKCX0KCglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkJlaGF2ZWQoKQoJewoJCW1fdGFyZ2V0Py5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LkNvdW50KEV2ZW50U2VuZGVyLkV2ZW50VHlwZS5EZW1hbmRDb21wbGV0ZSwgbV9kYXRhLktleSk7CgkJbV90YXJnZXQgPSBudWxsOwoJfQoKCXZvaWQgT25JdGVtRXZlbnQoSXRlbSBpdGVtLCBzdHJpbmcgYWN0aW9uTmFtZSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAoYWN0aW9uTmFtZSA9PSAiRnVsZmlsbCIpCgkJewoJCQl1aV9kZW1hbmQuU2hvdyhtX0RlbWFuZCk7CgkJCUNoYXJhY3RlckRhdGEgY2hhcmFjdGVyID0gbV9pbnRlcmFjdG9yIGFzIENoYXJhY3RlckRhdGE7CgkJCW1faW50ZXJhY3RvciA9IG51bGw7CgkJCWlmIChjaGFyYWN0ZXIgIT0gbnVsbCkKCQkJewoJCQkJY2hhcmFjdGVyLkludmVudG9yeS5JdGVtQWN0aW9uIC09IE9uSXRlbUV2ZW50OwoJCQkJUmVzQ29sbGVjdG9yIGNvbGxlY3RvciA9IGNoYXJhY3Rlci5HZXRDb21wb25lbnQ8UmVzQ29sbGVjdG9yPigpOwoJCQkJaWYgKGNvbGxlY3RvcikKCQkJCXsKCQkJCQltX3RhcmdldCA9IGNoYXJhY3Rlci5nYW1lT2JqZWN0OwoJCQkJCUhlbHBlcnMuTG9nKHRoaXMsICJGdWxmaWxsIiwgJCJ7aXRlbS5JdGVtTmFtZX14e2l0ZW1Db3VudH0iKTsKCQkJCQlTdGFydENvcm91dGluZShVcGRhdGVEZW1hbmQoaXRlbSwgaXRlbUNvdW50KSk7CgkJCQl9CgkJCQlpZiAobV9EZW1hbmQuQ29tcGxldGVkKSBTdGFydFRpbWVyKCk7CgkJCX0KCQl9Cgl9CgoJSUVudW1lcmF0b3IgVXBkYXRlRGVtYW5kKEl0ZW0gaXRlbSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAobV90YXJnZXQgIT0gbnVsbCkKCQl7CgkJCXZhciByZXNPYmpzID0gbmV3IExpc3Q8R2FtZU9iamVjdD4oKTsKCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBpdGVtQ291bnQ7IGkrKykKCQkJewoJCQkJR2FtZU9iamVjdCByZXNPYmogPSBJbnN0YW50aWF0ZShpdGVtLldvcmxkT2JqZWN0UHJlZmFiLCB0cmFuc2Zvcm0pOwoJCQkJcmVzT2Jqcy5BZGQocmVzT2JqKTsKCQkJCXJlc09iai50cmFuc2Zvcm0uRE9Nb3ZlKG1fdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiArIG5ldyBWZWN0b3IzKDAsIDIsIDApLCAxKS5Gcm9tKCk7CgkJCX0KCQkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcygxLjBmKTsKCQkJZm9yZWFjaCAodmFyIG9iaiBpbiByZXNPYmpzKQoJCQl7CgkJCQlEZXN0cm95KG9iaik7CgkJCX0KCQl9Cgl9Cn0KAAAAAAAAAADCDwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADCDwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKdXNpbmcgVW5pdHkuVmlzdWFsU2NyaXB0aW5nLkRlcGVuZGVuY2llcy5TcWxpdGU7CgpwdWJsaWMgY2xhc3MgSXRlbURlbWFuZGVyIDogVGltZXJCZWhhdmlvdXIsIElJbnRlcmFjdGFibGUKewoJW1NlcmlhbGl6ZUZpZWxkXQoJSW50ZXJhY3REYXRhIG1fZGF0YTsKCXB1YmxpYyBJbnRlcmFjdERhdGEgRGF0YSB7IGdldCB7IHJldHVybiBtX2RhdGE7IH0gfQoJW1NlcmlhbGl6ZUZpZWxkXQoJVUlJdGVtRGVtYW5kIHVpX2RlbWFuZDsKCXB1YmxpYyBVbml0eUV2ZW50IFJlYWR5RXZlbnRzOwoJcHVibGljIFVuaXR5RXZlbnQgUmVmcmVzaEV2ZW50czsKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgYXV0b0FjdGl2ZTsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1faW50ZXJhY3RvcjsgfSBzZXQgeyBtX2ludGVyYWN0b3IgPSB2YWx1ZTsgfSB9Cglwcm90ZWN0ZWQgSUludGVyYWN0YWJsZSBtX2ludGVyYWN0b3I7CglpbnQgbV9jdXJTZWxlY3RlZDsKCUludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIG1fY3VyRGVtYW5kOwoJdm9pZCBTdGFydCgpCgl7CgkJdWlfZGVtYW5kLmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQlpZiAoYXV0b0FjdGl2ZSkgQWN0aXZlSW50ZXJhY3QoKTsKCX0KCglwdWJsaWMgdm9pZCBBY3RpdmVJbnRlcmFjdCgpCgl7CgkJaWYgKG1fZGF0YS5kZW1hbmRzLkNvdW50ID4gMCkgbV9jdXJEZW1hbmQgPSBtX2RhdGEuZGVtYW5kc1swXS5JbnN0YW5jZSgpOwoJCXVpX2RlbWFuZC5TaG93KG1fY3VyRGVtYW5kKTsKCQlHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk/LlNldEhhbmRsZSh0cnVlKTsKCX0KCglwdWJsaWMgYm9vbCBDYW5JbnRlcmFjdChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlyZXR1cm4gIW1fY3VyRGVtYW5kLkNvbXBsZXRlZCAmJiAhaXNTdGFydGVkICYmIHRhcmdldC5DYW5JbnRlcmFjdCh0aGlzKSAmJiBtX2ludGVyYWN0b3IgPT0gbnVsbDsKCX0KCglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKG1faW50ZXJhY3RvciA9PSBudWxsICYmIHRhcmdldCBpcyBDaGFyYWN0ZXIpCgkJewoJCQl2YXIgY2hhcmFjdGVyID0gdGFyZ2V0IGFzIENoYXJhY3RlcjsKCQkJdmFyIHN1Ym1pdGFibGUgPSBtX2N1ckRlbWFuZC5TdWJtaXR0YWJsZShjaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJaWYgKHN1Ym1pdGFibGUuVmFsdWVzLlN1bSgpID4gMCkKCQkJewoJCQkJUmVhZHlFdmVudHM/Lkludm9rZSgpOwoJCQkJdGFyZ2V0LkN1cnJlbnRJbnRlcmFjdG9yID0gbnVsbDsKCQkJCWlmIChjaGFyYWN0ZXIgPT0gR2FtZU1hbmFnZXIuQ3VySGVybykKCQkJCXsKCQkJCQlVSUludGVyYWN0V2luZG93IHdpbiA9IEdhbWVNYW5hZ2VyLkdhbWVVSS5HZXRXaW5kb3coIndpbkludGVyYWN0IikgYXMgVUlJbnRlcmFjdFdpbmRvdzsKCQkJCQl3aW4uSW5pdCh0aGlzKTsKCQkJCQl3aW4uT3BlbigpOwoJCQkJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uRXhpdEV2ZW50LkFkZExpc3RlbmVyKCgpID0+IHdpbi5DbG9zZSgpKTsKCQkJCQl3aW4uYnRfaW50ZXJhY3Qub25DbGljay5BZGRMaXN0ZW5lcigoKSA9PiBPbkNsaWNrX0ludGVyYWN0KHdpbikpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCW1faW50ZXJhY3RvciA9IGNoYXJhY3RlcjsKCQkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJCQkJbV9jdXJEZW1hbmQuRnVsZmlsbChjaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJCX0KCQkJfQoJCQllbHNlIHsgdWlfZGVtYW5kLkZhaWwoKTsgdGFyZ2V0LkN1cnJlbnRJbnRlcmFjdG9yID0gbnVsbDsgfQoJCX0KCX0KCglwdWJsaWMgdm9pZCBPbkNsaWNrX0ludGVyYWN0KFVJSW50ZXJhY3RXaW5kb3cgd2luKQoJewoJCW1faW50ZXJhY3RvciA9IEdhbWVNYW5hZ2VyLkN1ckhlcm87CgkJR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkuSXRlbUFjdGlvbiArPSBPbkl0ZW1FdmVudDsKCQltX2N1ckRlbWFuZC5GdWxmaWxsKEdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5KTsKCQltX2N1clNlbGVjdGVkID0gd2luLlNlbGVjdGVkSW5kZXg7CgkJd2luLmJ0X2ludGVyYWN0LmludGVyYWN0YWJsZSA9IGZhbHNlOwoJCXdpbi5DbG9zZSgpOwoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uUmVmcmVzaCgpCgl7CgkJQWN0aXZlSW50ZXJhY3QoKTsKCQlSZWZyZXNoRXZlbnRzPy5JbnZva2UoKTsKCX0KCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJLy9pZiAobV9jaGFyYWN0ZXIpIG1fY2hhcmFjdGVyLkNoYW5nZVN0YXRlKENoYXJhY3RlckNvbnRyb2wuU3RhdGUuV09SS0lORywgdHJ1ZSk7Cgl9CgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25FbmQoKQoJewoJCURlc3Ryb3koZ2FtZU9iamVjdCk7Cgl9CgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25CZWhhdmVkKCkKCXsKCQltX2RhdGEuSW50ZXJhY3RCZWhhdmUodHJhbnNmb3JtLCBtX2N1clNlbGVjdGVkKTsKCQlDaGFyYWN0ZXIgY2hhcmFjdGVyID0gbV9pbnRlcmFjdG9yIGFzIENoYXJhY3RlcjsKCQlpZiAoY2hhcmFjdGVyKQoJCXsKCQkJY2hhcmFjdGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uQ291bnQoRXZlbnRTZW5kZXIuRXZlbnRUeXBlLkRlbWFuZENvbXBsZXRlLCBtX2RhdGEuS2V5KTsKCQl9CgkJbV9pbnRlcmFjdG9yID0gbnVsbDsKCX0KCgl2b2lkIE9uSXRlbUV2ZW50KEl0ZW0gaXRlbSwgc3RyaW5nIGFjdGlvbk5hbWUsIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKGFjdGlvbk5hbWUgPT0gIkZ1bGZpbGwiKQoJCXsKCQkJdWlfZGVtYW5kLlNob3cobV9jdXJEZW1hbmQpOwoJCQlDaGFyYWN0ZXIgY2hhcmFjdGVyID0gbV9pbnRlcmFjdG9yIGFzIENoYXJhY3RlcjsKCQkJbV9pbnRlcmFjdG9yID0gbnVsbDsKCQkJaWYgKGNoYXJhY3RlciAhPSBudWxsKQoJCQl7CgkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gLT0gT25JdGVtRXZlbnQ7CgkJCQlSZXNDb2xsZWN0b3IgY29sbGVjdG9yID0gY2hhcmFjdGVyLkdldENvbXBvbmVudDxSZXNDb2xsZWN0b3I+KCk7CgkJCQlpZiAoY29sbGVjdG9yKQoJCQkJewoJCQkJCW1fdGFyZ2V0ID0gY2hhcmFjdGVyLmdhbWVPYmplY3Q7CgkJCQkJSGVscGVycy5Mb2codGhpcywgIkZ1bGZpbGwiLCAkIntpdGVtLkl0ZW1OYW1lfXh7aXRlbUNvdW50fSIpOwoJCQkJCVN0YXJ0Q29yb3V0aW5lKFVwZGF0ZURlbWFuZChpdGVtLCBpdGVtQ291bnQpKTsKCQkJCX0KCQkJCWlmIChtX2N1ckRlbWFuZC5Db21wbGV0ZWQpIFN0YXJ0VGltZXIoKTsKCQkJfQoJCX0KCX0KCglJRW51bWVyYXRvciBVcGRhdGVEZW1hbmQoSXRlbSBpdGVtLCBpbnQgaXRlbUNvdW50KQoJewoJCWlmIChtX3RhcmdldCAhPSBudWxsKQoJCXsKCQkJdmFyIHJlc09ianMgPSBuZXcgTGlzdDxHYW1lT2JqZWN0PigpOwoJCQlmb3IgKGludCBpID0gMDsgaSA8IGl0ZW1Db3VudDsgaSsrKQoJCQl7CgkJCQlHYW1lT2JqZWN0IHJlc09iaiA9IEluc3RhbnRpYXRlKGl0ZW0uV29ybGRPYmplY3RQcmVmYWIsIHRyYW5zZm9ybSk7CgkJCQlyZXNPYmpzLkFkZChyZXNPYmopOwoJCQkJcmVzT2JqLnRyYW5zZm9ybS5ET01vdmUobV90YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uICsgbmV3IFZlY3RvcjMoMCwgMiwgMCksIDEpLkZyb20oKTsKCQkJfQoJCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKDEuMGYpOwoJCQlmb3JlYWNoICh2YXIgb2JqIGluIHJlc09ianMpCgkJCXsKCQkJCURlc3Ryb3kob2JqKTsKCQkJfQoJCX0KCX0KfQoAAAAAAAAAAKwQAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					5,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAACsEAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKdXNpbmcgVW5pdHkuVmlzdWFsU2NyaXB0aW5nLkRlcGVuZGVuY2llcy5TcWxpdGU7CgpwdWJsaWMgY2xhc3MgSXRlbURlbWFuZGVyIDogVGltZXJCZWhhdmlvdXIsIElJbnRlcmFjdGFibGUKewoJW1NlcmlhbGl6ZUZpZWxkXQoJSW50ZXJhY3REYXRhIG1fZGF0YTsKCXB1YmxpYyBJbnRlcmFjdERhdGEgRGF0YSB7IGdldCB7IHJldHVybiBtX2RhdGE7IH0gfQoJW1NlcmlhbGl6ZUZpZWxkXQoJVUlJdGVtRGVtYW5kIHVpX2RlbWFuZDsKCXB1YmxpYyBVbml0eUV2ZW50IFJlYWR5RXZlbnRzOwoJcHVibGljIFVuaXR5RXZlbnQgUmVmcmVzaEV2ZW50czsKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgYXV0b0FjdGl2ZTsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1faW50ZXJhY3RvcjsgfSBzZXQgeyBtX2ludGVyYWN0b3IgPSB2YWx1ZTsgfSB9Cglwcm90ZWN0ZWQgSUludGVyYWN0YWJsZSBtX2ludGVyYWN0b3I7CglpbnQgbV9jdXJTZWxlY3RlZDsKCUxpc3Q8SW52ZW50b3J5U3lzdGVtLkl0ZW1EZW1hbmQ+IG1fZGVtYW5kczsKCXZvaWQgU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJaWYgKGF1dG9BY3RpdmUpIEFjdGl2ZUludGVyYWN0KCk7Cgl9CgoJcHVibGljIHZvaWQgQWN0aXZlSW50ZXJhY3QoKQoJewoJCW1fZGVtYW5kcyA9IG5ldyBMaXN0PEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kPigpOwoJCWZvcmVhY2ggKHZhciBkYXRhIGluIG1fZGF0YS5kZW1hbmRzKQoJCXsKCQkJbV9kZW1hbmRzLkFkZChkYXRhLkNyZWF0SXRlbURlbWFuZCgpKTsKCQl9CgkJaWYgKG1fZGVtYW5kcy5Db3VudCA+IDApIHVpX2RlbWFuZC5TaG93KG1fZGVtYW5kc1swXSk7CgkJR2V0Q29tcG9uZW50PEludGVyYWN0SGFuZGxlPigpPy5TZXRIYW5kbGUodHJ1ZSk7Cgl9CgoJcHVibGljIGJvb2wgQ2FuSW50ZXJhY3QoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJcmV0dXJuICFtX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0uQ29tcGxldGVkICYmICFpc1N0YXJ0ZWQgJiYgdGFyZ2V0LkNhbkludGVyYWN0KHRoaXMpICYmIG1faW50ZXJhY3RvciA9PSBudWxsOwoJfQoKCXB1YmxpYyB2b2lkIEludGVyYWN0V2l0aChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlpZiAobV9pbnRlcmFjdG9yID09IG51bGwgJiYgdGFyZ2V0IGlzIENoYXJhY3RlcikKCQl7CgkJCXZhciBjaGFyYWN0ZXIgPSB0YXJnZXQgYXMgQ2hhcmFjdGVyOwoJCQl2YXIgc3VibWl0YWJsZSA9IG1fZGVtYW5kc1ttX2N1clNlbGVjdGVkXS5TdWJtaXR0YWJsZShjaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJaWYgKHN1Ym1pdGFibGUuVmFsdWVzLlN1bSgpID4gMCkKCQkJewoJCQkJUmVhZHlFdmVudHM/Lkludm9rZSgpOwoJCQkJdGFyZ2V0LkN1cnJlbnRJbnRlcmFjdG9yID0gbnVsbDsKCQkJCWlmIChjaGFyYWN0ZXIgPT0gR2FtZU1hbmFnZXIuQ3VySGVybykKCQkJCXsKCQkJCQlVSUludGVyYWN0V2luZG93IHdpbiA9IEdhbWVNYW5hZ2VyLkdhbWVVSS5HZXRXaW5kb3coIndpbkludGVyYWN0IikgYXMgVUlJbnRlcmFjdFdpbmRvdzsKCQkJCQl3aW4uSW5pdCh0aGlzLCBtX2RlbWFuZHMpOwoJCQkJCXdpbi5PcGVuKCk7CgkJCQkJR2V0Q29tcG9uZW50PEludGVyYWN0SGFuZGxlPigpPy5FeGl0RXZlbnQuQWRkTGlzdGVuZXIoKCkgPT4gd2luLkNsb3NlKCkpOwoJCQkJCXdpbi5idF9pbnRlcmFjdC5vbkNsaWNrLkFkZExpc3RlbmVyKCgpID0+IE9uQ2xpY2tfSW50ZXJhY3Qod2luKSk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJbV9pbnRlcmFjdG9yID0gY2hhcmFjdGVyOwoJCQkJCWNoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiArPSBPbkl0ZW1FdmVudDsKCQkJCQltX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0uRnVsZmlsbChjaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJCX0KCQkJfQoJCQllbHNlIHsgdWlfZGVtYW5kLkZhaWwoKTsgdGFyZ2V0LkN1cnJlbnRJbnRlcmFjdG9yID0gbnVsbDsgfQoJCX0KCX0KCglwdWJsaWMgdm9pZCBPbkNsaWNrX0ludGVyYWN0KFVJSW50ZXJhY3RXaW5kb3cgd2luKQoJewoJCW1faW50ZXJhY3RvciA9IEdhbWVNYW5hZ2VyLkN1ckhlcm87CgkJR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkuSXRlbUFjdGlvbiArPSBPbkl0ZW1FdmVudDsKCQltX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0uRnVsZmlsbChHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeSk7CgkJbV9jdXJTZWxlY3RlZCA9IHdpbi5TZWxlY3RlZEluZGV4OwoJCXdpbi5idF9pbnRlcmFjdC5vbkNsaWNrLlJlbW92ZUFsbExpc3RlbmVycygpOwoJCXdpbi5idF9pbnRlcmFjdC5pbnRlcmFjdGFibGUgPSBmYWxzZTsKCQl3aW4uQ2xvc2UoKTsKCX0KCglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblJlZnJlc2goKQoJewoJCUFjdGl2ZUludGVyYWN0KCk7CgkJUmVmcmVzaEV2ZW50cz8uSW52b2tlKCk7Cgl9Cglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblN0YXJ0KCkKCXsKCQl1aV9kZW1hbmQuZ2FtZU9iamVjdC5TZXRBY3RpdmUoZmFsc2UpOwoJCS8vaWYgKG1fY2hhcmFjdGVyKSBtX2NoYXJhY3Rlci5DaGFuZ2VTdGF0ZShDaGFyYWN0ZXJDb250cm9sLlN0YXRlLldPUktJTkcsIHRydWUpOwoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uRW5kKCkKCXsKCQlEZXN0cm95KGdhbWVPYmplY3QpOwoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uQmVoYXZlZCgpCgl7CgkJbV9kYXRhLkludGVyYWN0QmVoYXZlKHRyYW5zZm9ybSwgbV9jdXJTZWxlY3RlZCk7CgkJQ2hhcmFjdGVyIGNoYXJhY3RlciA9IG1faW50ZXJhY3RvciBhcyBDaGFyYWN0ZXI7CgkJaWYgKGNoYXJhY3RlcikKCQl7CgkJCWNoYXJhY3Rlci5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LkNvdW50KEV2ZW50U2VuZGVyLkV2ZW50VHlwZS5EZW1hbmRDb21wbGV0ZSwgbV9kYXRhLktleSk7CgkJfQoJCW1faW50ZXJhY3RvciA9IG51bGw7Cgl9CgoJdm9pZCBPbkl0ZW1FdmVudChJdGVtIGl0ZW0sIHN0cmluZyBhY3Rpb25OYW1lLCBpbnQgaXRlbUNvdW50KQoJewoJCWlmIChhY3Rpb25OYW1lID09ICJGdWxmaWxsIikKCQl7CgkJCXVpX2RlbWFuZC5TaG93KG1fZGVtYW5kc1ttX2N1clNlbGVjdGVkXSk7CgkJCUNoYXJhY3RlciBjaGFyYWN0ZXIgPSBtX2ludGVyYWN0b3IgYXMgQ2hhcmFjdGVyOwoJCQltX2ludGVyYWN0b3IgPSBudWxsOwoJCQlpZiAoY2hhcmFjdGVyICE9IG51bGwpCgkJCXsKCQkJCWNoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiAtPSBPbkl0ZW1FdmVudDsKCQkJCVJlc0NvbGxlY3RvciBjb2xsZWN0b3IgPSBjaGFyYWN0ZXIuR2V0Q29tcG9uZW50PFJlc0NvbGxlY3Rvcj4oKTsKCQkJCWlmIChjb2xsZWN0b3IpCgkJCQl7CgkJCQkJbV90YXJnZXQgPSBjaGFyYWN0ZXIuZ2FtZU9iamVjdDsKCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRnVsZmlsbCIsICQie2l0ZW0uSXRlbU5hbWV9eHtpdGVtQ291bnR9Iik7CgkJCQkJU3RhcnRDb3JvdXRpbmUoVXBkYXRlRGVtYW5kKGl0ZW0sIGl0ZW1Db3VudCkpOwoJCQkJfQoJCQkJaWYgKG1fZGVtYW5kc1ttX2N1clNlbGVjdGVkXS5Db21wbGV0ZWQpIFN0YXJ0VGltZXIoKTsKCQkJfQoJCX0KCX0KCglJRW51bWVyYXRvciBVcGRhdGVEZW1hbmQoSXRlbSBpdGVtLCBpbnQgaXRlbUNvdW50KQoJewoJCWlmIChtX3RhcmdldCAhPSBudWxsKQoJCXsKCQkJdmFyIHJlc09ianMgPSBuZXcgTGlzdDxHYW1lT2JqZWN0PigpOwoJCQlmb3IgKGludCBpID0gMDsgaSA8IGl0ZW1Db3VudDsgaSsrKQoJCQl7CgkJCQlHYW1lT2JqZWN0IHJlc09iaiA9IEluc3RhbnRpYXRlKGl0ZW0uV29ybGRPYmplY3RQcmVmYWIsIHRyYW5zZm9ybSk7CgkJCQlyZXNPYmpzLkFkZChyZXNPYmopOwoJCQkJcmVzT2JqLnRyYW5zZm9ybS5ET01vdmUobV90YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uICsgbmV3IFZlY3RvcjMoMCwgMiwgMCksIDEpLkZyb20oKTsKCQkJfQoJCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKDEuMGYpOwoJCQlmb3JlYWNoICh2YXIgb2JqIGluIHJlc09ianMpCgkJCXsKCQkJCURlc3Ryb3kob2JqKTsKCQkJfQoJCX0KCX0KfQoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAxA8AAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADEDwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBNb25vQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCVtTZXJpYWxpemVGaWVsZF0KCUludGVyYWN0RGF0YSBtX2RhdGE7CglwdWJsaWMgSW50ZXJhY3REYXRhIERhdGEgeyBnZXQgeyByZXR1cm4gbV9kYXRhOyB9IH0KCVtTZXJpYWxpemVGaWVsZF0KCVVJSXRlbURlbWFuZCB1aV9kZW1hbmQ7CglbU2VyaWFsaXplRmllbGRdCglib29sIGF1dG9BY3RpdmU7CglwdWJsaWMgSUludGVyYWN0YWJsZSBDdXJyZW50SW50ZXJhY3RvciB7IGdldCB7IHJldHVybiBtX2ludGVyYWN0b3I7IH0gc2V0IHsgbV9pbnRlcmFjdG9yID0gdmFsdWU7IH0gfQoJcHJvdGVjdGVkIElJbnRlcmFjdGFibGUgbV9pbnRlcmFjdG9yOwoJaW50IG1fY3VyU2VsZWN0ZWQ7CglMaXN0PEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kPiBtX2RlbWFuZHM7CglUaW1lciBtX3RpbWVyOwoJR2FtZU9iamVjdCBtX3RhcmdldDsKCgl2b2lkIEF3YWtlKCkKCXsKCQltX3RpbWVyID0gR2V0Q29tcG9uZW50PFRpbWVyPigpOwoJfQoJdm9pZCBTdGFydCgpCgl7CgkJdWlfZGVtYW5kLmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQlpZiAoYXV0b0FjdGl2ZSkgQWN0aXZlSW50ZXJhY3QoKTsKCQltX3RpbWVyLnJlZnJlc2hFdmVudC5BZGRMaXN0ZW5lcihBY3RpdmVJbnRlcmFjdCk7CgkJbV90aW1lci5iZWhhdmVFdmVudC5BZGRMaXN0ZW5lcihPbkJlaGF2ZWQpOwoJfQoKCXB1YmxpYyB2b2lkIEFjdGl2ZUludGVyYWN0KCkKCXsKCQltX2RlbWFuZHMgPSBuZXcgTGlzdDxJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZD4oKTsKCQlmb3JlYWNoICh2YXIgZGF0YSBpbiBtX2RhdGEuZGVtYW5kcykKCQl7CgkJCW1fZGVtYW5kcy5BZGQoZGF0YS5DcmVhdEl0ZW1EZW1hbmQoKSk7CgkJfQoJCWlmIChtX2RlbWFuZHMuQ291bnQgPiAwKSB1aV9kZW1hbmQuU2hvdyhtX2RlbWFuZHNbMF0pOwoJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uU2V0SGFuZGxlKHRydWUpOwoJfQoKCXB1YmxpYyBib29sIENhbkludGVyYWN0KElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCXJldHVybiAhbV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkNvbXBsZXRlZCAmJiAhbV90aW1lci5pc1N0YXJ0ZWQgJiYgdGFyZ2V0LkNhbkludGVyYWN0KHRoaXMpICYmIG1faW50ZXJhY3RvciA9PSBudWxsOwoJfQoKCXB1YmxpYyB2b2lkIEludGVyYWN0V2l0aChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlpZiAobV9pbnRlcmFjdG9yID09IG51bGwgJiYgdGFyZ2V0IGlzIENoYXJhY3RlcikKCQl7CgkJCXZhciBjaGFyYWN0ZXIgPSB0YXJnZXQgYXMgQ2hhcmFjdGVyOwoJCQl2YXIgc3VibWl0YWJsZSA9IG1fZGVtYW5kc1ttX2N1clNlbGVjdGVkXS5TdWJtaXR0YWJsZShjaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJaWYgKHN1Ym1pdGFibGUuVmFsdWVzLlN1bSgpID4gMCkKCQkJewoJCQkJdGFyZ2V0LkN1cnJlbnRJbnRlcmFjdG9yID0gbnVsbDsKCQkJCWlmIChjaGFyYWN0ZXIgPT0gR2FtZU1hbmFnZXIuQ3VySGVybykKCQkJCXsKCQkJCQlVSUludGVyYWN0V2luZG93IHdpbiA9IEdhbWVNYW5hZ2VyLkdhbWVVSS5HZXRXaW5kb3coIndpbkludGVyYWN0IikgYXMgVUlJbnRlcmFjdFdpbmRvdzsKCQkJCQl3aW4uSW5pdCh0aGlzLCBtX2RlbWFuZHMpOwoJCQkJCXdpbi5PcGVuKCk7CgkJCQkJR2V0Q29tcG9uZW50PEludGVyYWN0SGFuZGxlPigpPy5FeGl0RXZlbnQuQWRkTGlzdGVuZXIoKCkgPT4gd2luLkNsb3NlKCkpOwoJCQkJCXdpbi5idF9pbnRlcmFjdC5vbkNsaWNrLkFkZExpc3RlbmVyKCgpID0+IE9uQ2xpY2tfSW50ZXJhY3Qod2luKSk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJbV9pbnRlcmFjdG9yID0gY2hhcmFjdGVyOwoJCQkJCWNoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiArPSBPbkl0ZW1FdmVudDsKCQkJCQltX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0uRnVsZmlsbChjaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJCX0KCQkJfQoJCQllbHNlIHsgdWlfZGVtYW5kLkZhaWwoKTsgdGFyZ2V0LkN1cnJlbnRJbnRlcmFjdG9yID0gbnVsbDsgfQoJCX0KCX0KCglwdWJsaWMgdm9pZCBPbkNsaWNrX0ludGVyYWN0KFVJSW50ZXJhY3RXaW5kb3cgd2luKQoJewoJCW1faW50ZXJhY3RvciA9IEdhbWVNYW5hZ2VyLkN1ckhlcm87CgkJR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkuSXRlbUFjdGlvbiArPSBPbkl0ZW1FdmVudDsKCQltX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0uRnVsZmlsbChHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeSk7CgkJbV9jdXJTZWxlY3RlZCA9IHdpbi5TZWxlY3RlZEluZGV4OwoJCXdpbi5idF9pbnRlcmFjdC5vbkNsaWNrLlJlbW92ZUFsbExpc3RlbmVycygpOwoJCXdpbi5idF9pbnRlcmFjdC5pbnRlcmFjdGFibGUgPSBmYWxzZTsKCQl3aW4uQ2xvc2UoKTsKCX0KCXZvaWQgT25CZWhhdmVkKCkKCXsKCQltX2RhdGEuSW50ZXJhY3RCZWhhdmUodHJhbnNmb3JtLCBtX2N1clNlbGVjdGVkKTsKCQlDaGFyYWN0ZXIgY2hhcmFjdGVyID0gbV9pbnRlcmFjdG9yIGFzIENoYXJhY3RlcjsKCQlpZiAoY2hhcmFjdGVyKQoJCXsKCQkJY2hhcmFjdGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uQ291bnQoRXZlbnRTZW5kZXIuRXZlbnRUeXBlLkRlbWFuZENvbXBsZXRlLCBtX2RhdGEuS2V5KTsKCQl9CgkJbV9pbnRlcmFjdG9yID0gbnVsbDsKCX0KCgl2b2lkIE9uSXRlbUV2ZW50KEl0ZW0gaXRlbSwgc3RyaW5nIGFjdGlvbk5hbWUsIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKGFjdGlvbk5hbWUgPT0gIkZ1bGZpbGwiKQoJCXsKCQkJdWlfZGVtYW5kLlNob3cobV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdKTsKCQkJQ2hhcmFjdGVyIGNoYXJhY3RlciA9IG1faW50ZXJhY3RvciBhcyBDaGFyYWN0ZXI7CgkJCW1faW50ZXJhY3RvciA9IG51bGw7CgkJCWlmIChjaGFyYWN0ZXIgIT0gbnVsbCkKCQkJewoJCQkJY2hhcmFjdGVyLkludmVudG9yeS5JdGVtQWN0aW9uIC09IE9uSXRlbUV2ZW50OwoJCQkJUmVzQ29sbGVjdG9yIGNvbGxlY3RvciA9IGNoYXJhY3Rlci5HZXRDb21wb25lbnQ8UmVzQ29sbGVjdG9yPigpOwoJCQkJaWYgKGNvbGxlY3RvcikKCQkJCXsKCQkJCQltX3RhcmdldCA9IGNoYXJhY3Rlci5nYW1lT2JqZWN0OwoJCQkJCUhlbHBlcnMuTG9nKHRoaXMsICJGdWxmaWxsIiwgJCJ7aXRlbS5JdGVtTmFtZX14e2l0ZW1Db3VudH0iKTsKCQkJCQlTdGFydENvcm91dGluZShVcGRhdGVEZW1hbmQoaXRlbSwgaXRlbUNvdW50KSk7CgkJCQl9CgkJCQlpZiAobV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkNvbXBsZXRlZCkgeyBtX3RpbWVyLlN0YXJ0VGltZXIoKTsgdWlfZGVtYW5kLmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsgfQoJCQl9CgkJfQoJfQoKCUlFbnVtZXJhdG9yIFVwZGF0ZURlbWFuZChJdGVtIGl0ZW0sIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKG1fdGFyZ2V0ICE9IG51bGwpCgkJewoJCQl2YXIgcmVzT2JqcyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7CgkJCWZvciAoaW50IGkgPSAwOyBpIDwgaXRlbUNvdW50OyBpKyspCgkJCXsKCQkJCUdhbWVPYmplY3QgcmVzT2JqID0gSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgdHJhbnNmb3JtKTsKCQkJCXJlc09ianMuQWRkKHJlc09iaik7CgkJCQlyZXNPYmoudHJhbnNmb3JtLkRPTW92ZShtX3RhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gKyBuZXcgVmVjdG9yMygwLCAyLCAwKSwgMSkuRnJvbSgpOwoJCQl9CgkJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMoMS4wZik7CgkJCWZvcmVhY2ggKHZhciBvYmogaW4gcmVzT2JqcykKCQkJewoJCQkJRGVzdHJveShvYmopOwoJCQl9CgkJfQoJfQp9CgAAAAAAAAAAFRAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAVEAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBNb25vQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCVtTZXJpYWxpemVGaWVsZF0KCUludGVyYWN0RGF0YSBtX2RhdGE7CglwdWJsaWMgSW50ZXJhY3REYXRhIERhdGEgeyBnZXQgeyByZXR1cm4gbV9kYXRhOyB9IH0KCVtTZXJpYWxpemVGaWVsZF0KCVVJSXRlbURlbWFuZCB1aV9kZW1hbmQ7CglbU2VyaWFsaXplRmllbGRdCglib29sIGF1dG9BY3RpdmU7CglwdWJsaWMgSUludGVyYWN0YWJsZSBDdXJyZW50SW50ZXJhY3RvciB7IGdldCB7IHJldHVybiBtX2ludGVyYWN0b3I7IH0gc2V0IHsgbV9pbnRlcmFjdG9yID0gdmFsdWU7IH0gfQoJcHJvdGVjdGVkIElJbnRlcmFjdGFibGUgbV9pbnRlcmFjdG9yOwoJaW50IG1fY3VyU2VsZWN0ZWQ7CglMaXN0PEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kPiBtX2RlbWFuZHM7CglUaW1lciBtX3RpbWVyOwoJR2FtZU9iamVjdCBtX3RhcmdldDsKCgl2b2lkIEF3YWtlKCkKCXsKCQltX3RpbWVyID0gR2V0Q29tcG9uZW50PFRpbWVyPigpOwoJfQoJdm9pZCBTdGFydCgpCgl7CgkJdWlfZGVtYW5kLmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQlpZiAoYXV0b0FjdGl2ZSkgQWN0aXZlSW50ZXJhY3QoKTsKCQltX3RpbWVyPy5yZWZyZXNoRXZlbnQuQWRkTGlzdGVuZXIoQWN0aXZlSW50ZXJhY3QpOwoJCW1fdGltZXI/LmJlaGF2ZUV2ZW50LkFkZExpc3RlbmVyKE9uQmVoYXZlZCk7Cgl9CgoJcHVibGljIHZvaWQgQWN0aXZlSW50ZXJhY3QoKQoJewoJCW1fZGVtYW5kcyA9IG5ldyBMaXN0PEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kPigpOwoJCWZvcmVhY2ggKHZhciBkYXRhIGluIG1fZGF0YS5kZW1hbmRzKQoJCXsKCQkJbV9kZW1hbmRzLkFkZChkYXRhLkNyZWF0SXRlbURlbWFuZCgpKTsKCQl9CgkJaWYgKG1fZGVtYW5kcy5Db3VudCA+IDApIHVpX2RlbWFuZC5TaG93KG1fZGVtYW5kc1swXSk7CgkJR2V0Q29tcG9uZW50PEludGVyYWN0SGFuZGxlPigpPy5TZXRIYW5kbGUodHJ1ZSk7Cgl9CgoJcHVibGljIGJvb2wgQ2FuSW50ZXJhY3QoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJcmV0dXJuICFtX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0uQ29tcGxldGVkICYmIHRhcmdldC5DYW5JbnRlcmFjdCh0aGlzKSAmJiBtX2ludGVyYWN0b3IgPT0gbnVsbDsKCX0KCglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKG1faW50ZXJhY3RvciA9PSBudWxsICYmIHRhcmdldCBpcyBDaGFyYWN0ZXIpCgkJewoJCQl2YXIgY2hhcmFjdGVyID0gdGFyZ2V0IGFzIENoYXJhY3RlcjsKCQkJdmFyIHN1Ym1pdGFibGUgPSBtX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0uU3VibWl0dGFibGUoY2hhcmFjdGVyLkludmVudG9yeSk7CgkJCWlmIChzdWJtaXRhYmxlLlZhbHVlcy5TdW0oKSA+IDApCgkJCXsKCQkJCXRhcmdldC5DdXJyZW50SW50ZXJhY3RvciA9IG51bGw7CgkJCQlpZiAoY2hhcmFjdGVyID09IEdhbWVNYW5hZ2VyLkN1ckhlcm8pCgkJCQl7CgkJCQkJVUlJbnRlcmFjdFdpbmRvdyB3aW4gPSBHYW1lTWFuYWdlci5HYW1lVUkuR2V0V2luZG93KCJ3aW5JbnRlcmFjdCIpIGFzIFVJSW50ZXJhY3RXaW5kb3c7CgkJCQkJd2luLkluaXQodGhpcywgbV9kZW1hbmRzKTsKCQkJCQl3aW4uT3BlbigpOwoJCQkJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uRXhpdEV2ZW50LkFkZExpc3RlbmVyKCgpID0+IHdpbi5DbG9zZSgpKTsKCQkJCQl3aW4uYnRfaW50ZXJhY3Qub25DbGljay5BZGRMaXN0ZW5lcigoKSA9PiBPbkNsaWNrX0ludGVyYWN0KHdpbikpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCW1faW50ZXJhY3RvciA9IGNoYXJhY3RlcjsKCQkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJCQkJbV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkZ1bGZpbGwoY2hhcmFjdGVyLkludmVudG9yeSk7CgkJCQl9CgkJCX0KCQkJZWxzZSB7IHVpX2RlbWFuZC5GYWlsKCk7IHRhcmdldC5DdXJyZW50SW50ZXJhY3RvciA9IG51bGw7IH0KCQl9Cgl9CgoJcHVibGljIHZvaWQgT25DbGlja19JbnRlcmFjdChVSUludGVyYWN0V2luZG93IHdpbikKCXsKCQltX2ludGVyYWN0b3IgPSBHYW1lTWFuYWdlci5DdXJIZXJvOwoJCUdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJbV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkZ1bGZpbGwoR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkpOwoJCW1fY3VyU2VsZWN0ZWQgPSB3aW4uU2VsZWN0ZWRJbmRleDsKCQl3aW4uYnRfaW50ZXJhY3Qub25DbGljay5SZW1vdmVBbGxMaXN0ZW5lcnMoKTsKCQl3aW4uYnRfaW50ZXJhY3QuaW50ZXJhY3RhYmxlID0gZmFsc2U7CgkJd2luLkNsb3NlKCk7Cgl9Cgl2b2lkIE9uQmVoYXZlZCgpCgl7CgkJbV9kYXRhLkludGVyYWN0QmVoYXZlKHRyYW5zZm9ybSwgbV9jdXJTZWxlY3RlZCk7CgkJQ2hhcmFjdGVyIGNoYXJhY3RlciA9IG1faW50ZXJhY3RvciBhcyBDaGFyYWN0ZXI7CgkJaWYgKGNoYXJhY3RlcikKCQl7CgkJCWNoYXJhY3Rlci5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LkNvdW50KEV2ZW50U2VuZGVyLkV2ZW50VHlwZS5EZW1hbmRDb21wbGV0ZSwgbV9kYXRhLktleSk7CgkJfQoJCW1faW50ZXJhY3RvciA9IG51bGw7CgkJaWYgKG1fZGF0YS5hdXRvRGVzdHJveSkgRGVzdHJveShnYW1lT2JqZWN0KTsKCX0KCgl2b2lkIE9uSXRlbUV2ZW50KEl0ZW0gaXRlbSwgc3RyaW5nIGFjdGlvbk5hbWUsIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKGFjdGlvbk5hbWUgPT0gIkZ1bGZpbGwiKQoJCXsKCQkJdWlfZGVtYW5kLlNob3cobV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdKTsKCQkJQ2hhcmFjdGVyIGNoYXJhY3RlciA9IG1faW50ZXJhY3RvciBhcyBDaGFyYWN0ZXI7CgkJCW1faW50ZXJhY3RvciA9IG51bGw7CgkJCWlmIChjaGFyYWN0ZXIgIT0gbnVsbCkKCQkJewoJCQkJY2hhcmFjdGVyLkludmVudG9yeS5JdGVtQWN0aW9uIC09IE9uSXRlbUV2ZW50OwoJCQkJUmVzQ29sbGVjdG9yIGNvbGxlY3RvciA9IGNoYXJhY3Rlci5HZXRDb21wb25lbnQ8UmVzQ29sbGVjdG9yPigpOwoJCQkJaWYgKGNvbGxlY3RvcikKCQkJCXsKCQkJCQltX3RhcmdldCA9IGNoYXJhY3Rlci5nYW1lT2JqZWN0OwoJCQkJCUhlbHBlcnMuTG9nKHRoaXMsICJGdWxmaWxsIiwgJCJ7aXRlbS5JdGVtTmFtZX14e2l0ZW1Db3VudH0iKTsKCQkJCQlTdGFydENvcm91dGluZShVcGRhdGVEZW1hbmQoaXRlbSwgaXRlbUNvdW50KSk7CgkJCQl9CgkJCQlpZiAobV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkNvbXBsZXRlZCkKCQkJCXsKCQkJCQlpZiAobV90aW1lcikgbV90aW1lci5TdGFydFRpbWVyKCk7CgkJCQkJZWxzZSBPbkJlaGF2ZWQoKTsKCQkJCQl1aV9kZW1hbmQuZ2FtZU9iamVjdC5TZXRBY3RpdmUoZmFsc2UpOwoJCQkJfQoJCQl9CgkJfQoJfQoKCUlFbnVtZXJhdG9yIFVwZGF0ZURlbWFuZChJdGVtIGl0ZW0sIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKG1fdGFyZ2V0ICE9IG51bGwpCgkJewoJCQl2YXIgcmVzT2JqcyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7CgkJCWZvciAoaW50IGkgPSAwOyBpIDwgaXRlbUNvdW50OyBpKyspCgkJCXsKCQkJCUdhbWVPYmplY3QgcmVzT2JqID0gSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgdHJhbnNmb3JtKTsKCQkJCXJlc09ianMuQWRkKHJlc09iaik7CgkJCQlyZXNPYmoudHJhbnNmb3JtLkRPTW92ZShtX3RhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gKyBuZXcgVmVjdG9yMygwLCAyLCAwKSwgMSkuRnJvbSgpOwoJCQl9CgkJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMoMS4wZik7CgkJCWZvcmVhY2ggKHZhciBvYmogaW4gcmVzT2JqcykKCQkJewoJCQkJRGVzdHJveShvYmopOwoJCQl9CgkJfQoJfQp9CgAAAAAAAAAArhAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACuEAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBNb25vQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCVtTZXJpYWxpemVGaWVsZF0KCUludGVyYWN0RGF0YSBtX2RhdGE7CglwdWJsaWMgSW50ZXJhY3REYXRhIERhdGEgeyBnZXQgeyByZXR1cm4gbV9kYXRhOyB9IH0KCVtTZXJpYWxpemVGaWVsZF0KCVVJSXRlbURlbWFuZCB1aV9kZW1hbmQ7CglbU2VyaWFsaXplRmllbGRdCglib29sIGF1dG9BY3RpdmU7CglwdWJsaWMgSUludGVyYWN0YWJsZSBDdXJyZW50SW50ZXJhY3RvciB7IGdldCB7IHJldHVybiBtX2ludGVyYWN0b3I7IH0gc2V0IHsgbV9pbnRlcmFjdG9yID0gdmFsdWU7IH0gfQoJcHJvdGVjdGVkIElJbnRlcmFjdGFibGUgbV9pbnRlcmFjdG9yOwoJaW50IG1fY3VyU2VsZWN0ZWQ7CglMaXN0PEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kPiBtX2RlbWFuZHM7CglUaW1lciBtX3RpbWVyOwoJR2FtZU9iamVjdCBtX3RhcmdldDsKCgl2b2lkIEF3YWtlKCkKCXsKCQlpZiAobV9kYXRhLkJlaGF2ZUR1cmluZyA+IDAgfHwgbV9kYXRhLmFjdFRpbWVzID4gMSkgbV90aW1lciA9IGdhbWVPYmplY3QuQWRkQ29tcG9uZW50PFRpbWVyPigpOwoJfQoJdm9pZCBTdGFydCgpCgl7CgkJdWlfZGVtYW5kLmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQlpZiAoYXV0b0FjdGl2ZSkgQWN0aXZlSW50ZXJhY3QoKTsKCX0KCglwdWJsaWMgdm9pZCBBY3RpdmVJbnRlcmFjdCgpCgl7CgkJbV9kZW1hbmRzID0gbmV3IExpc3Q8SW52ZW50b3J5U3lzdGVtLkl0ZW1EZW1hbmQ+KCk7CgkJZm9yZWFjaCAodmFyIGRhdGEgaW4gbV9kYXRhLmRlbWFuZHMpCgkJewoJCQltX2RlbWFuZHMuQWRkKGRhdGEuQ3JlYXRJdGVtRGVtYW5kKCkpOwoJCX0KCQlpZiAobV9kZW1hbmRzLkNvdW50ID4gMCkgdWlfZGVtYW5kLlNob3cobV9kZW1hbmRzWzBdKTsKCQlHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk/LlNldEhhbmRsZSh0cnVlKTsKCX0KCglwdWJsaWMgYm9vbCBDYW5JbnRlcmFjdChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlyZXR1cm4gIW1fZGVtYW5kc1ttX2N1clNlbGVjdGVkXS5Db21wbGV0ZWQgJiYgdGFyZ2V0LkNhbkludGVyYWN0KHRoaXMpICYmIG1faW50ZXJhY3RvciA9PSBudWxsOwoJfQoKCXB1YmxpYyB2b2lkIEludGVyYWN0V2l0aChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlpZiAobV9pbnRlcmFjdG9yID09IG51bGwgJiYgdGFyZ2V0IGlzIENoYXJhY3RlcikKCQl7CgkJCXRhcmdldC5DdXJyZW50SW50ZXJhY3RvciA9IG51bGw7CgkJCXZhciBjaGFyYWN0ZXIgPSB0YXJnZXQgYXMgQ2hhcmFjdGVyOwoJCQl2YXIgc3VibWl0YWJsZSA9IG1fZGVtYW5kc1ttX2N1clNlbGVjdGVkXS5TdWJtaXR0YWJsZShjaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJaWYgKHN1Ym1pdGFibGUuVmFsdWVzLlN1bSgpID4gMCkKCQkJewoJCQkJbV9pbnRlcmFjdG9yID0gY2hhcmFjdGVyOwoJCQkJaWYgKGNoYXJhY3RlciA9PSBHYW1lTWFuYWdlci5DdXJIZXJvKQoJCQkJewoJCQkJCVVJSW50ZXJhY3RXaW5kb3cgd2luID0gR2FtZU1hbmFnZXIuR2FtZVVJLkdldFdpbmRvdygid2luSW50ZXJhY3QiKSBhcyBVSUludGVyYWN0V2luZG93OwoJCQkJCXdpbi5Jbml0KHRoaXMsIG1fZGVtYW5kcyk7CgkJCQkJd2luLk9wZW4oKTsKCQkJCQlHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk/LkV4aXRFdmVudC5BZGRMaXN0ZW5lcigoKSA9PiB3aW4uQ2xvc2UoKSk7CgkJCQkJd2luLmJ0X2ludGVyYWN0Lm9uQ2xpY2suQWRkTGlzdGVuZXIoKCkgPT4gT25DbGlja19JbnRlcmFjdCh3aW4pKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJCQkJbV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkZ1bGZpbGwoY2hhcmFjdGVyLkludmVudG9yeSk7CgkJCQl9CgkJCX0KCQkJZWxzZSB1aV9kZW1hbmQuRmFpbCgpOwoJCX0KCX0KCglwdWJsaWMgdm9pZCBPbkNsaWNrX0ludGVyYWN0KFVJSW50ZXJhY3RXaW5kb3cgd2luKQoJewoJCUdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJbV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkZ1bGZpbGwoR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkpOwoJCW1fY3VyU2VsZWN0ZWQgPSB3aW4uU2VsZWN0ZWRJbmRleDsKCQl3aW4uYnRfaW50ZXJhY3Qub25DbGljay5SZW1vdmVBbGxMaXN0ZW5lcnMoKTsKCQl3aW4uYnRfaW50ZXJhY3QuaW50ZXJhY3RhYmxlID0gZmFsc2U7CgkJd2luLkNsb3NlKCk7Cgl9CgoJdm9pZCBTdGFydEJlaGF2ZVRpbWVyKCkKCXsKCQltX3RpbWVyLnRpbWVyRHVyYXRpb24gPSBtX2RhdGEuQmVoYXZlRHVyaW5nOwoJCW1fdGltZXIucmVmcmVzaEV2ZW50LkFkZExpc3RlbmVyKEFjdGl2ZUludGVyYWN0KTsKCQltX3RpbWVyLmJlaGF2ZUV2ZW50LkFkZExpc3RlbmVyKE9uQmVoYXZlZCk7CgkJbV90aW1lci5sb29wVGltZXMgPSBtX2RhdGEuYWN0VGltZXM7CgkJbV90aW1lci5jZCA9IG1fZGF0YS5hY3RDZDsKCQltX3RpbWVyLlN0YXJ0VGltZXIoKTsKCX0KCXZvaWQgT25CZWhhdmVkKCkKCXsKCQltX2RhdGEuSW50ZXJhY3RCZWhhdmUodHJhbnNmb3JtLCBtX2N1clNlbGVjdGVkKTsKCQlDaGFyYWN0ZXIgY2hhcmFjdGVyID0gbV9pbnRlcmFjdG9yIGFzIENoYXJhY3RlcjsKCQlpZiAoY2hhcmFjdGVyKQoJCXsKCQkJY2hhcmFjdGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uQ291bnQoRXZlbnRTZW5kZXIuRXZlbnRUeXBlLkRlbWFuZENvbXBsZXRlLCBtX2RhdGEuS2V5KTsKCQl9CgkJbV9pbnRlcmFjdG9yID0gbnVsbDsKCQlpZiAobV9kYXRhLmF1dG9EZXN0cm95KSBEZXN0cm95KGdhbWVPYmplY3QpOwoJfQoKCXZvaWQgT25JdGVtRXZlbnQoSXRlbSBpdGVtLCBzdHJpbmcgYWN0aW9uTmFtZSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAoYWN0aW9uTmFtZSA9PSAiRnVsZmlsbCIpCgkJewoJCQl1aV9kZW1hbmQuU2hvdyhtX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0pOwoJCQlDaGFyYWN0ZXIgY2hhcmFjdGVyID0gbV9pbnRlcmFjdG9yIGFzIENoYXJhY3RlcjsKCQkJbV9pbnRlcmFjdG9yID0gbnVsbDsKCQkJaWYgKGNoYXJhY3RlciAhPSBudWxsKQoJCQl7CgkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gLT0gT25JdGVtRXZlbnQ7CgkJCQlpZiAobV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkNvbXBsZXRlZCkKCQkJCXsKCQkJCQlpZiAobV90aW1lcikgU3RhcnRCZWhhdmVUaW1lcigpOwoJCQkJCWVsc2UgT25CZWhhdmVkKCk7CgkJCQkJdWlfZGVtYW5kLmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQkJCX0KCQkJCVJlc0NvbGxlY3RvciBjb2xsZWN0b3IgPSBjaGFyYWN0ZXIuR2V0Q29tcG9uZW50PFJlc0NvbGxlY3Rvcj4oKTsKCQkJCWlmIChjb2xsZWN0b3IpCgkJCQl7CgkJCQkJbV90YXJnZXQgPSBjaGFyYWN0ZXIuZ2FtZU9iamVjdDsKCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRnVsZmlsbCIsICQie2l0ZW0uSXRlbU5hbWV9eHtpdGVtQ291bnR9Iik7CgkJCQkJU3RhcnRDb3JvdXRpbmUoVXBkYXRlRGVtYW5kKGl0ZW0sIGl0ZW1Db3VudCkpOwoJCQkJfQoJCQl9CgkJfQoJfQoKCUlFbnVtZXJhdG9yIFVwZGF0ZURlbWFuZChJdGVtIGl0ZW0sIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKG1fdGFyZ2V0ICE9IG51bGwpCgkJewoJCQl2YXIgcmVzT2JqcyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7CgkJCWZvciAoaW50IGkgPSAwOyBpIDwgaXRlbUNvdW50OyBpKyspCgkJCXsKCQkJCUdhbWVPYmplY3QgcmVzT2JqID0gSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgdHJhbnNmb3JtKTsKCQkJCXJlc09ianMuQWRkKHJlc09iaik7CgkJCQlyZXNPYmoudHJhbnNmb3JtLkRPTW92ZShtX3RhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gKyBuZXcgVmVjdG9yMygwLCAyLCAwKSwgMSkuRnJvbSgpOwoJCQl9CgkJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMoMS4wZik7CgkJCWZvcmVhY2ggKHZhciBvYmogaW4gcmVzT2JqcykKCQkJewoJCQkJRGVzdHJveShvYmopOwoJCQl9CgkJfQoJfQp9CgAAAAAAAAAAtxAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC3EAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBNb25vQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCVtTZXJpYWxpemVGaWVsZF0KCUludGVyYWN0RGF0YSBtX2RhdGE7CglwdWJsaWMgSW50ZXJhY3REYXRhIERhdGEgeyBnZXQgeyByZXR1cm4gbV9kYXRhOyB9IH0KCVtTZXJpYWxpemVGaWVsZF0KCVVJSXRlbURlbWFuZCB1aV9kZW1hbmQ7CglbU2VyaWFsaXplRmllbGRdCglib29sIGF1dG9BY3RpdmU7CglwdWJsaWMgSUludGVyYWN0YWJsZSBDdXJyZW50SW50ZXJhY3RvciB7IGdldCB7IHJldHVybiBtX2ludGVyYWN0b3I7IH0gc2V0IHsgbV9pbnRlcmFjdG9yID0gdmFsdWU7IH0gfQoJcHJvdGVjdGVkIElJbnRlcmFjdGFibGUgbV9pbnRlcmFjdG9yOwoJaW50IG1fY3VyU2VsZWN0ZWQ7CglMaXN0PEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kPiBtX2RlbWFuZHM7CglUaW1lciBtX3RpbWVyOwoJR2FtZU9iamVjdCBtX3RhcmdldDsKCgl2b2lkIEF3YWtlKCkKCXsKCQlpZiAobV9kYXRhLkJlaGF2ZUR1cmluZyA+IDAgfHwgbV9kYXRhLmFjdFRpbWVzID4gMSkKCQkJbV90aW1lciA9IGdhbWVPYmplY3QuQWRkQ29tcG9uZW50PFRpbWVyPigpOwoKCX0KCXZvaWQgU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJaWYgKGF1dG9BY3RpdmUpIEFjdGl2ZUludGVyYWN0KCk7CgkJaWYgKG1fdGltZXIpCgkJewoJCQltX3RpbWVyLnJlZnJlc2hFdmVudCArPSBBY3RpdmVJbnRlcmFjdDsKCQkJbV90aW1lci5iZWhhdmVFdmVudCArPSBPbkJlaGF2ZWQ7CgkJfQoJfQoKCXB1YmxpYyB2b2lkIEFjdGl2ZUludGVyYWN0KCkKCXsKCQltX2RlbWFuZHMgPSBuZXcgTGlzdDxJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZD4oKTsKCQlmb3JlYWNoICh2YXIgZGF0YSBpbiBtX2RhdGEuZGVtYW5kcykKCQl7CgkJCW1fZGVtYW5kcy5BZGQoZGF0YS5DcmVhdEl0ZW1EZW1hbmQoKSk7CgkJfQoJCWlmIChtX2RlbWFuZHMuQ291bnQgPiAwKSB1aV9kZW1hbmQuU2hvdyhtX2RlbWFuZHNbMF0pOwoJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uU2V0SGFuZGxlKHRydWUpOwoJfQoKCXB1YmxpYyBib29sIENhbkludGVyYWN0KElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCXJldHVybiAhbV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkNvbXBsZXRlZCAmJiB0YXJnZXQuQ2FuSW50ZXJhY3QodGhpcykgJiYgbV9pbnRlcmFjdG9yID09IG51bGw7Cgl9CgoJcHVibGljIHZvaWQgSW50ZXJhY3RXaXRoKElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCWlmIChtX2ludGVyYWN0b3IgPT0gbnVsbCAmJiB0YXJnZXQgaXMgQ2hhcmFjdGVyKQoJCXsKCQkJdGFyZ2V0LkN1cnJlbnRJbnRlcmFjdG9yID0gbnVsbDsKCQkJdmFyIGNoYXJhY3RlciA9IHRhcmdldCBhcyBDaGFyYWN0ZXI7CgkJCXZhciBzdWJtaXRhYmxlID0gbV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLlN1Ym1pdHRhYmxlKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQlpZiAoc3VibWl0YWJsZS5WYWx1ZXMuU3VtKCkgPiAwKQoJCQl7CgkJCQltX2ludGVyYWN0b3IgPSBjaGFyYWN0ZXI7CgkJCQlpZiAoY2hhcmFjdGVyID09IEdhbWVNYW5hZ2VyLkN1ckhlcm8pCgkJCQl7CgkJCQkJVUlJbnRlcmFjdFdpbmRvdyB3aW4gPSBHYW1lTWFuYWdlci5HYW1lVUkuR2V0V2luZG93KCJ3aW5JbnRlcmFjdCIpIGFzIFVJSW50ZXJhY3RXaW5kb3c7CgkJCQkJd2luLkluaXQodGhpcywgbV9kZW1hbmRzKTsKCQkJCQl3aW4uT3BlbigpOwoJCQkJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uRXhpdEV2ZW50LkFkZExpc3RlbmVyKCgpID0+IHdpbi5DbG9zZSgpKTsKCQkJCQl3aW4uYnRfaW50ZXJhY3Qub25DbGljay5BZGRMaXN0ZW5lcigoKSA9PiBPbkNsaWNrX0ludGVyYWN0KHdpbikpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCWNoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiArPSBPbkl0ZW1FdmVudDsKCQkJCQltX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0uRnVsZmlsbChjaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJCX0KCQkJfQoJCQllbHNlIHVpX2RlbWFuZC5GYWlsKCk7CgkJfQoJfQoKCXB1YmxpYyB2b2lkIE9uQ2xpY2tfSW50ZXJhY3QoVUlJbnRlcmFjdFdpbmRvdyB3aW4pCgl7CgkJR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkuSXRlbUFjdGlvbiArPSBPbkl0ZW1FdmVudDsKCQltX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0uRnVsZmlsbChHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeSk7CgkJbV9jdXJTZWxlY3RlZCA9IHdpbi5TZWxlY3RlZEluZGV4OwoJCXdpbi5idF9pbnRlcmFjdC5vbkNsaWNrLlJlbW92ZUFsbExpc3RlbmVycygpOwoJCXdpbi5idF9pbnRlcmFjdC5pbnRlcmFjdGFibGUgPSBmYWxzZTsKCQl3aW4uQ2xvc2UoKTsKCX0KCgl2b2lkIFN0YXJ0QmVoYXZlVGltZXIoKQoJewoJCW1fdGltZXIudGltZXJEdXJhdGlvbiA9IG1fZGF0YS5CZWhhdmVEdXJpbmc7CgkJbV90aW1lci5sb29wVGltZXMgPSBtX2RhdGEuYWN0VGltZXM7CgkJbV90aW1lci5jZCA9IG1fZGF0YS5hY3RDZDsKCQltX3RpbWVyLlN0YXJ0VGltZXIoKTsKCX0KCXZvaWQgT25CZWhhdmVkKCkKCXsKCQltX2RhdGEuSW50ZXJhY3RCZWhhdmUodHJhbnNmb3JtLCBtX2N1clNlbGVjdGVkKTsKCQlDaGFyYWN0ZXIgY2hhcmFjdGVyID0gbV9pbnRlcmFjdG9yIGFzIENoYXJhY3RlcjsKCQlpZiAoY2hhcmFjdGVyKQoJCXsKCQkJY2hhcmFjdGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uQ291bnQoRXZlbnRTZW5kZXIuRXZlbnRUeXBlLkRlbWFuZENvbXBsZXRlLCBtX2RhdGEuS2V5KTsKCQl9CgkJbV9pbnRlcmFjdG9yID0gbnVsbDsKCQlpZiAobV9kYXRhLmF1dG9EZXN0cm95KSBEZXN0cm95KGdhbWVPYmplY3QpOwoJfQoKCXZvaWQgT25JdGVtRXZlbnQoSXRlbSBpdGVtLCBzdHJpbmcgYWN0aW9uTmFtZSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAoYWN0aW9uTmFtZSA9PSAiRnVsZmlsbCIpCgkJewoJCQl1aV9kZW1hbmQuU2hvdyhtX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0pOwoJCQlDaGFyYWN0ZXIgY2hhcmFjdGVyID0gbV9pbnRlcmFjdG9yIGFzIENoYXJhY3RlcjsKCQkJbV9pbnRlcmFjdG9yID0gbnVsbDsKCQkJaWYgKGNoYXJhY3RlciAhPSBudWxsKQoJCQl7CgkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gLT0gT25JdGVtRXZlbnQ7CgkJCQlpZiAobV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkNvbXBsZXRlZCkKCQkJCXsKCQkJCQlpZiAobV90aW1lcikgU3RhcnRCZWhhdmVUaW1lcigpOwoJCQkJCWVsc2UgT25CZWhhdmVkKCk7CgkJCQkJdWlfZGVtYW5kLmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQkJCX0KCQkJCVJlc0NvbGxlY3RvciBjb2xsZWN0b3IgPSBjaGFyYWN0ZXIuR2V0Q29tcG9uZW50PFJlc0NvbGxlY3Rvcj4oKTsKCQkJCWlmIChjb2xsZWN0b3IpCgkJCQl7CgkJCQkJbV90YXJnZXQgPSBjaGFyYWN0ZXIuZ2FtZU9iamVjdDsKCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRnVsZmlsbCIsICQie2l0ZW0uSXRlbU5hbWV9eHtpdGVtQ291bnR9Iik7CgkJCQkJU3RhcnRDb3JvdXRpbmUoVXBkYXRlRGVtYW5kKGl0ZW0sIGl0ZW1Db3VudCkpOwoJCQkJfQoJCQl9CgkJfQoJfQoKCUlFbnVtZXJhdG9yIFVwZGF0ZURlbWFuZChJdGVtIGl0ZW0sIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKG1fdGFyZ2V0ICE9IG51bGwpCgkJewoJCQl2YXIgcmVzT2JqcyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7CgkJCWZvciAoaW50IGkgPSAwOyBpIDwgaXRlbUNvdW50OyBpKyspCgkJCXsKCQkJCUdhbWVPYmplY3QgcmVzT2JqID0gSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgdHJhbnNmb3JtKTsKCQkJCXJlc09ianMuQWRkKHJlc09iaik7CgkJCQlyZXNPYmoudHJhbnNmb3JtLkRPTW92ZShtX3RhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gKyBuZXcgVmVjdG9yMygwLCAyLCAwKSwgMSkuRnJvbSgpOwoJCQl9CgkJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMoMS4wZik7CgkJCWZvcmVhY2ggKHZhciBvYmogaW4gcmVzT2JqcykKCQkJewoJCQkJRGVzdHJveShvYmopOwoJCQl9CgkJfQoJfQp9CgAAAAAAAAAARxAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABHEAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBNb25vQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCVtTZXJpYWxpemVGaWVsZF0KCUludGVyYWN0RGF0YSBtX2RhdGE7CglwdWJsaWMgSW50ZXJhY3REYXRhIERhdGEgeyBnZXQgeyByZXR1cm4gbV9kYXRhOyB9IH0KCVtTZXJpYWxpemVGaWVsZF0KCVVJSXRlbURlbWFuZCB1aV9kZW1hbmQ7CglbU2VyaWFsaXplRmllbGRdCglib29sIGF1dG9BY3RpdmU7CglwdWJsaWMgSUludGVyYWN0YWJsZSBDdXJyZW50SW50ZXJhY3RvciB7IGdldCB7IHJldHVybiBtX2ludGVyYWN0b3I7IH0gc2V0IHsgbV9pbnRlcmFjdG9yID0gdmFsdWU7IH0gfQoJcHJvdGVjdGVkIElJbnRlcmFjdGFibGUgbV9pbnRlcmFjdG9yOwoJaW50IG1fY3VyU2VsZWN0ZWQ7CglMaXN0PEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kPiBtX2RlbWFuZHM7CglUaW1lciBtX3RpbWVyOwoJR2FtZU9iamVjdCBtX3RhcmdldDsKCgl2b2lkIEF3YWtlKCkKCXsKCQlpZiAobV9kYXRhLkJlaGF2ZUR1cmluZyA+IDAgfHwgbV9kYXRhLmFjdFRpbWVzID4gMSkKCQkJbV90aW1lciA9IGdhbWVPYmplY3QuQWRkQ29tcG9uZW50PFRpbWVyPigpOwoKCX0KCXZvaWQgU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJaWYgKGF1dG9BY3RpdmUpIEFjdGl2ZUludGVyYWN0KCk7CgkJaWYgKG1fdGltZXIpCgkJewoJCQltX3RpbWVyLnRpbWVyRHVyYXRpb24gPSBtX2RhdGEuQmVoYXZlRHVyaW5nOwoJCQltX3RpbWVyLmxvb3BUaW1lcyA9IG1fZGF0YS5hY3RUaW1lczsKCQkJbV90aW1lci5jZCA9IG1fZGF0YS5hY3RDZDsKCQkJbV90aW1lci5yZWZyZXNoRXZlbnQgKz0gQWN0aXZlSW50ZXJhY3Q7CgkJCW1fdGltZXIuYmVoYXZlRXZlbnQgKz0gT25CZWhhdmVkOwoJCQlpZiAobV9kYXRhLmF1dG9EZXN0cm95KSBtX3RpbWVyLmVuZEV2ZW50ICs9ICgpID0+IERlc3Ryb3koZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXB1YmxpYyB2b2lkIEFjdGl2ZUludGVyYWN0KCkKCXsKCQltX2RlbWFuZHMgPSBuZXcgTGlzdDxJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZD4oKTsKCQlmb3JlYWNoICh2YXIgZGF0YSBpbiBtX2RhdGEuZGVtYW5kcykKCQl7CgkJCW1fZGVtYW5kcy5BZGQoZGF0YS5DcmVhdEl0ZW1EZW1hbmQoKSk7CgkJfQoJCWlmIChtX2RlbWFuZHMuQ291bnQgPiAwKSB1aV9kZW1hbmQuU2hvdyhtX2RlbWFuZHNbMF0pOwoJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uU2V0SGFuZGxlKHRydWUpOwoJfQoKCXB1YmxpYyBib29sIENhbkludGVyYWN0KElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCXJldHVybiAhbV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkNvbXBsZXRlZCAmJiB0YXJnZXQuQ2FuSW50ZXJhY3QodGhpcykgJiYgbV9pbnRlcmFjdG9yID09IG51bGw7Cgl9CgoJcHVibGljIHZvaWQgSW50ZXJhY3RXaXRoKElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCWlmIChtX2ludGVyYWN0b3IgPT0gbnVsbCAmJiB0YXJnZXQgaXMgQ2hhcmFjdGVyKQoJCXsKCQkJdGFyZ2V0LkN1cnJlbnRJbnRlcmFjdG9yID0gbnVsbDsKCQkJdmFyIGNoYXJhY3RlciA9IHRhcmdldCBhcyBDaGFyYWN0ZXI7CgkJCXZhciBzdWJtaXRhYmxlID0gbV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLlN1Ym1pdHRhYmxlKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQlpZiAoc3VibWl0YWJsZS5WYWx1ZXMuU3VtKCkgPiAwKQoJCQl7CgkJCQltX2ludGVyYWN0b3IgPSBjaGFyYWN0ZXI7CgkJCQlpZiAoY2hhcmFjdGVyID09IEdhbWVNYW5hZ2VyLkN1ckhlcm8pCgkJCQl7CgkJCQkJVUlJbnRlcmFjdFdpbmRvdyB3aW4gPSBHYW1lTWFuYWdlci5HYW1lVUkuR2V0V2luZG93KCJ3aW5JbnRlcmFjdCIpIGFzIFVJSW50ZXJhY3RXaW5kb3c7CgkJCQkJd2luLkluaXQodGhpcywgbV9kZW1hbmRzKTsKCQkJCQl3aW4uT3BlbigpOwoJCQkJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uRXhpdEV2ZW50LkFkZExpc3RlbmVyKCgpID0+IHdpbi5DbG9zZSgpKTsKCQkJCQl3aW4uYnRfQ29uZmlybS5vbkNsaWNrLkFkZExpc3RlbmVyKCgpID0+IE9uQ2xpY2tfSW50ZXJhY3Qod2luKSk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJY2hhcmFjdGVyLkludmVudG9yeS5JdGVtQWN0aW9uICs9IE9uSXRlbUV2ZW50OwoJCQkJCW1fZGVtYW5kc1ttX2N1clNlbGVjdGVkXS5GdWxmaWxsKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQkJfQoJCQl9CgkJCWVsc2UgdWlfZGVtYW5kLkZhaWwoKTsKCQl9Cgl9CgoJcHVibGljIHZvaWQgT25DbGlja19JbnRlcmFjdChVSUludGVyYWN0V2luZG93IHdpbikKCXsKCQlHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeS5JdGVtQWN0aW9uICs9IE9uSXRlbUV2ZW50OwoJCW1fZGVtYW5kc1ttX2N1clNlbGVjdGVkXS5GdWxmaWxsKEdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5KTsKCQltX2N1clNlbGVjdGVkID0gd2luLlNlbGVjdGVkSW5kZXg7CgkJd2luLkNsb3NlKCk7Cgl9CgoJdm9pZCBPbkJlaGF2ZWQoKQoJewoJCW1fZGF0YS5JbnRlcmFjdEJlaGF2ZSh0cmFuc2Zvcm0sIG1fY3VyU2VsZWN0ZWQpOwoJCUNoYXJhY3RlciBjaGFyYWN0ZXIgPSBtX2ludGVyYWN0b3IgYXMgQ2hhcmFjdGVyOwoJCWlmIChjaGFyYWN0ZXIpCgkJewoJCQljaGFyYWN0ZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5Db3VudChFdmVudFNlbmRlci5FdmVudFR5cGUuRGVtYW5kQ29tcGxldGUsIG1fZGF0YS5LZXkpOwoJCX0KCQltX2ludGVyYWN0b3IgPSBudWxsOwoJfQoKCXZvaWQgT25JdGVtRXZlbnQoSXRlbSBpdGVtLCBzdHJpbmcgYWN0aW9uTmFtZSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAoYWN0aW9uTmFtZSA9PSAiRnVsZmlsbCIpCgkJewoJCQl1aV9kZW1hbmQuU2hvdyhtX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0pOwoJCQlDaGFyYWN0ZXIgY2hhcmFjdGVyID0gbV9pbnRlcmFjdG9yIGFzIENoYXJhY3RlcjsKCQkJbV9pbnRlcmFjdG9yID0gbnVsbDsKCQkJaWYgKGNoYXJhY3RlciAhPSBudWxsKQoJCQl7CgkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gLT0gT25JdGVtRXZlbnQ7CgkJCQlpZiAobV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkNvbXBsZXRlZCkKCQkJCXsKCQkJCQlpZiAobV90aW1lcikgbV90aW1lci5TdGFydFRpbWVyKCk7CgkJCQkJZWxzZSBPbkJlaGF2ZWQoKTsKCQkJCQl1aV9kZW1hbmQuZ2FtZU9iamVjdC5TZXRBY3RpdmUoZmFsc2UpOwoJCQkJfQoJCQkJUmVzQ29sbGVjdG9yIGNvbGxlY3RvciA9IGNoYXJhY3Rlci5HZXRDb21wb25lbnQ8UmVzQ29sbGVjdG9yPigpOwoJCQkJaWYgKGNvbGxlY3RvcikKCQkJCXsKCQkJCQltX3RhcmdldCA9IGNoYXJhY3Rlci5nYW1lT2JqZWN0OwoJCQkJCUhlbHBlcnMuTG9nKHRoaXMsICJGdWxmaWxsIiwgJCJ7aXRlbS5JdGVtTmFtZX14e2l0ZW1Db3VudH0iKTsKCQkJCQlTdGFydENvcm91dGluZShVcGRhdGVEZW1hbmQoaXRlbSwgaXRlbUNvdW50KSk7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJSUVudW1lcmF0b3IgVXBkYXRlRGVtYW5kKEl0ZW0gaXRlbSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAobV90YXJnZXQgIT0gbnVsbCkKCQl7CgkJCXZhciByZXNPYmpzID0gbmV3IExpc3Q8R2FtZU9iamVjdD4oKTsKCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBpdGVtQ291bnQ7IGkrKykKCQkJewoJCQkJR2FtZU9iamVjdCByZXNPYmogPSBJbnN0YW50aWF0ZShpdGVtLldvcmxkT2JqZWN0UHJlZmFiLCB0cmFuc2Zvcm0pOwoJCQkJcmVzT2Jqcy5BZGQocmVzT2JqKTsKCQkJCXJlc09iai50cmFuc2Zvcm0uRE9Nb3ZlKG1fdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiArIG5ldyBWZWN0b3IzKDAsIDIsIDApLCAxKS5Gcm9tKCk7CgkJCX0KCQkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcygxLjBmKTsKCQkJZm9yZWFjaCAodmFyIG9iaiBpbiByZXNPYmpzKQoJCQl7CgkJCQlEZXN0cm95KG9iaik7CgkJCX0KCQl9Cgl9Cn0KAAAAAAAAAABNEAAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					7,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABNEAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBNb25vQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCVtTZXJpYWxpemVGaWVsZF0KCUludGVyYWN0RGF0YSBtX2RhdGE7CglwdWJsaWMgSW50ZXJhY3REYXRhIERhdGEgeyBnZXQgeyByZXR1cm4gbV9kYXRhOyB9IH0KCVtTZXJpYWxpemVGaWVsZF0KCVVJSXRlbURlbWFuZCB1aV9kZW1hbmQ7CglbU2VyaWFsaXplRmllbGRdCglib29sIGF1dG9BY3RpdmU7CglwdWJsaWMgSUludGVyYWN0YWJsZSBDdXJyZW50SW50ZXJhY3RvciB7IGdldCB7IHJldHVybiBtX2ludGVyYWN0b3I7IH0gc2V0IHsgbV9pbnRlcmFjdG9yID0gdmFsdWU7IH0gfQoJcHJvdGVjdGVkIElJbnRlcmFjdGFibGUgbV9pbnRlcmFjdG9yOwoJaW50IG1fY3VyU2VsZWN0ZWQ7CglMaXN0PEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kPiBtX2RlbWFuZHM7CglUaW1lciBtX3RpbWVyOwoJR2FtZU9iamVjdCBtX3RhcmdldDsKCgl2b2lkIEF3YWtlKCkKCXsKCQlpZiAobV9kYXRhLkJlaGF2ZUR1cmluZyA+IDAgfHwgbV9kYXRhLmFjdFRpbWVzID4gMSkKCQkJbV90aW1lciA9IGdhbWVPYmplY3QuQWRkQ29tcG9uZW50PFRpbWVyPigpOwoKCX0KCXZvaWQgU3RhcnQoKQoJewoJCXVpX2RlbWFuZC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CgkJaWYgKGF1dG9BY3RpdmUpIEFjdGl2ZUludGVyYWN0KCk7CgkJaWYgKG1fdGltZXIpCgkJewoJCQltX3RpbWVyLnRpbWVyRHVyYXRpb24gPSBtX2RhdGEuQmVoYXZlRHVyaW5nOwoJCQltX3RpbWVyLmxvb3BUaW1lcyA9IG1fZGF0YS5hY3RUaW1lczsKCQkJbV90aW1lci5jZCA9IG1fZGF0YS5hY3RDZDsKCQkJbV90aW1lci5yZWZyZXNoRXZlbnQgKz0gQWN0aXZlSW50ZXJhY3Q7CgkJCW1fdGltZXIuYmVoYXZlRXZlbnQgKz0gT25CZWhhdmVkOwoJCQlpZiAobV9kYXRhLmF1dG9EZXN0cm95KSBtX3RpbWVyLmVuZEV2ZW50ICs9ICgpID0+IERlc3Ryb3koZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXB1YmxpYyB2b2lkIEFjdGl2ZUludGVyYWN0KCkKCXsKCQltX2RlbWFuZHMgPSBuZXcgTGlzdDxJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZD4oKTsKCQlmb3JlYWNoICh2YXIgZGF0YSBpbiBtX2RhdGEuZGVtYW5kcy5WYWx1ZSkKCQl7CgkJCW1fZGVtYW5kcy5BZGQoZGF0YS5DcmVhdEl0ZW1EZW1hbmQoKSk7CgkJfQoJCWlmIChtX2RlbWFuZHMuQ291bnQgPiAwKSB1aV9kZW1hbmQuU2hvdyhtX2RlbWFuZHNbMF0pOwoJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uU2V0SGFuZGxlKHRydWUpOwoJfQoKCXB1YmxpYyBib29sIENhbkludGVyYWN0KElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCXJldHVybiAhbV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkNvbXBsZXRlZCAmJiB0YXJnZXQuQ2FuSW50ZXJhY3QodGhpcykgJiYgbV9pbnRlcmFjdG9yID09IG51bGw7Cgl9CgoJcHVibGljIHZvaWQgSW50ZXJhY3RXaXRoKElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCWlmIChtX2ludGVyYWN0b3IgPT0gbnVsbCAmJiB0YXJnZXQgaXMgQ2hhcmFjdGVyKQoJCXsKCQkJdGFyZ2V0LkN1cnJlbnRJbnRlcmFjdG9yID0gbnVsbDsKCQkJdmFyIGNoYXJhY3RlciA9IHRhcmdldCBhcyBDaGFyYWN0ZXI7CgkJCXZhciBzdWJtaXRhYmxlID0gbV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLlN1Ym1pdHRhYmxlKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQlpZiAoc3VibWl0YWJsZS5WYWx1ZXMuU3VtKCkgPiAwKQoJCQl7CgkJCQltX2ludGVyYWN0b3IgPSBjaGFyYWN0ZXI7CgkJCQlpZiAoY2hhcmFjdGVyID09IEdhbWVNYW5hZ2VyLkN1ckhlcm8pCgkJCQl7CgkJCQkJVUlJbnRlcmFjdFdpbmRvdyB3aW4gPSBHYW1lTWFuYWdlci5HYW1lVUkuR2V0V2luZG93KCJ3aW5JbnRlcmFjdCIpIGFzIFVJSW50ZXJhY3RXaW5kb3c7CgkJCQkJd2luLkluaXQodGhpcywgbV9kZW1hbmRzKTsKCQkJCQl3aW4uT3BlbigpOwoJCQkJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uRXhpdEV2ZW50LkFkZExpc3RlbmVyKCgpID0+IHdpbi5DbG9zZSgpKTsKCQkJCQl3aW4uYnRfQ29uZmlybS5vbkNsaWNrLkFkZExpc3RlbmVyKCgpID0+IE9uQ2xpY2tfSW50ZXJhY3Qod2luKSk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJY2hhcmFjdGVyLkludmVudG9yeS5JdGVtQWN0aW9uICs9IE9uSXRlbUV2ZW50OwoJCQkJCW1fZGVtYW5kc1ttX2N1clNlbGVjdGVkXS5GdWxmaWxsKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQkJfQoJCQl9CgkJCWVsc2UgdWlfZGVtYW5kLkZhaWwoKTsKCQl9Cgl9CgoJcHVibGljIHZvaWQgT25DbGlja19JbnRlcmFjdChVSUludGVyYWN0V2luZG93IHdpbikKCXsKCQlHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeS5JdGVtQWN0aW9uICs9IE9uSXRlbUV2ZW50OwoJCW1fZGVtYW5kc1ttX2N1clNlbGVjdGVkXS5GdWxmaWxsKEdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5KTsKCQltX2N1clNlbGVjdGVkID0gd2luLlNlbGVjdGVkSW5kZXg7CgkJd2luLkNsb3NlKCk7Cgl9CgoJdm9pZCBPbkJlaGF2ZWQoKQoJewoJCW1fZGF0YS5JbnRlcmFjdEJlaGF2ZSh0cmFuc2Zvcm0sIG1fY3VyU2VsZWN0ZWQpOwoJCUNoYXJhY3RlciBjaGFyYWN0ZXIgPSBtX2ludGVyYWN0b3IgYXMgQ2hhcmFjdGVyOwoJCWlmIChjaGFyYWN0ZXIpCgkJewoJCQljaGFyYWN0ZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5Db3VudChFdmVudFNlbmRlci5FdmVudFR5cGUuRGVtYW5kQ29tcGxldGUsIG1fZGF0YS5LZXkpOwoJCX0KCQltX2ludGVyYWN0b3IgPSBudWxsOwoJfQoKCXZvaWQgT25JdGVtRXZlbnQoSXRlbSBpdGVtLCBzdHJpbmcgYWN0aW9uTmFtZSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAoYWN0aW9uTmFtZSA9PSAiRnVsZmlsbCIpCgkJewoJCQl1aV9kZW1hbmQuU2hvdyhtX2RlbWFuZHNbbV9jdXJTZWxlY3RlZF0pOwoJCQlDaGFyYWN0ZXIgY2hhcmFjdGVyID0gbV9pbnRlcmFjdG9yIGFzIENoYXJhY3RlcjsKCQkJbV9pbnRlcmFjdG9yID0gbnVsbDsKCQkJaWYgKGNoYXJhY3RlciAhPSBudWxsKQoJCQl7CgkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gLT0gT25JdGVtRXZlbnQ7CgkJCQlpZiAobV9kZW1hbmRzW21fY3VyU2VsZWN0ZWRdLkNvbXBsZXRlZCkKCQkJCXsKCQkJCQlpZiAobV90aW1lcikgbV90aW1lci5TdGFydFRpbWVyKCk7CgkJCQkJZWxzZSBPbkJlaGF2ZWQoKTsKCQkJCQl1aV9kZW1hbmQuZ2FtZU9iamVjdC5TZXRBY3RpdmUoZmFsc2UpOwoJCQkJfQoJCQkJUmVzQ29sbGVjdG9yIGNvbGxlY3RvciA9IGNoYXJhY3Rlci5HZXRDb21wb25lbnQ8UmVzQ29sbGVjdG9yPigpOwoJCQkJaWYgKGNvbGxlY3RvcikKCQkJCXsKCQkJCQltX3RhcmdldCA9IGNoYXJhY3Rlci5nYW1lT2JqZWN0OwoJCQkJCUhlbHBlcnMuTG9nKHRoaXMsICJGdWxmaWxsIiwgJCJ7aXRlbS5JdGVtTmFtZX14e2l0ZW1Db3VudH0iKTsKCQkJCQlTdGFydENvcm91dGluZShVcGRhdGVEZW1hbmQoaXRlbSwgaXRlbUNvdW50KSk7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJSUVudW1lcmF0b3IgVXBkYXRlRGVtYW5kKEl0ZW0gaXRlbSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAobV90YXJnZXQgIT0gbnVsbCkKCQl7CgkJCXZhciByZXNPYmpzID0gbmV3IExpc3Q8R2FtZU9iamVjdD4oKTsKCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBpdGVtQ291bnQ7IGkrKykKCQkJewoJCQkJR2FtZU9iamVjdCByZXNPYmogPSBJbnN0YW50aWF0ZShpdGVtLldvcmxkT2JqZWN0UHJlZmFiLCB0cmFuc2Zvcm0pOwoJCQkJcmVzT2Jqcy5BZGQocmVzT2JqKTsKCQkJCXJlc09iai50cmFuc2Zvcm0uRE9Nb3ZlKG1fdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiArIG5ldyBWZWN0b3IzKDAsIDIsIDApLCAxKS5Gcm9tKCk7CgkJCX0KCQkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcygxLjBmKTsKCQkJZm9yZWFjaCAodmFyIG9iaiBpbiByZXNPYmpzKQoJCQl7CgkJCQlEZXN0cm95KG9iaik7CgkJCX0KCQl9Cgl9Cn0KAAAAAAAAAABJEQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAABJEQAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBNb25vQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1faW50ZXJhY3RvcjsgfSBzZXQgeyBtX2ludGVyYWN0b3IgPSB2YWx1ZTsgfSB9CglJSW50ZXJhY3RhYmxlIG1faW50ZXJhY3RvcjsKCXB1YmxpYyBJbnRlcmFjdERhdGEgRGF0YSB7IGdldCB7IHJldHVybiBtX2RhdGE7IH0gfQoJW1NlcmlhbGl6ZUZpZWxkXQoJSW50ZXJhY3REYXRhIG1fZGF0YTsKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgYXV0b0FjdGl2ZTsKCglwdWJsaWMgQWN0aW9uPEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kLCBzdHJpbmc+IGRlbWFuZEV2ZW50OwoKCUxpc3Q8SW52ZW50b3J5U3lzdGVtLkl0ZW1EZW1hbmQ+IG1fZGVtYW5kczsKCWludCBtX2N1ckRlbWFuZEluZGV4OwoJVGltZXIgbV90aW1lcjsKCUdhbWVPYmplY3QgbV9zdWJtaXRlcjsKCgl2b2lkIEF3YWtlKCkKCXsKCQlpZiAobV9kYXRhLkJlaGF2ZUR1cmluZyA+IDAgfHwgbV9kYXRhLmFjdFRpbWVzID4gMSkKCQkJbV90aW1lciA9IGdhbWVPYmplY3QuQWRkQ29tcG9uZW50PFRpbWVyPigpOwoKCX0KCXZvaWQgU3RhcnQoKQoJewoJCWlmIChhdXRvQWN0aXZlKSBBY3RpdmVJbnRlcmFjdCgpOwoJCWlmIChtX3RpbWVyKQoJCXsKCQkJbV90aW1lci50aW1lckR1cmF0aW9uID0gbV9kYXRhLkJlaGF2ZUR1cmluZzsKCQkJbV90aW1lci5sb29wVGltZXMgPSBtX2RhdGEuYWN0VGltZXM7CgkJCW1fdGltZXIuY2QgPSBtX2RhdGEuYWN0Q2Q7CgkJCW1fdGltZXIucmVmcmVzaEV2ZW50ICs9IEFjdGl2ZUludGVyYWN0OwoJCQltX3RpbWVyLmJlaGF2ZUV2ZW50ICs9IE9uQmVoYXZlZDsKCQkJaWYgKG1fZGF0YS5hdXRvRGVzdHJveSkgbV90aW1lci5lbmRFdmVudCArPSAoKSA9PiBEZXN0cm95KGdhbWVPYmplY3QpOwoJCX0KCX0KCgl2b2lkIEFjdGl2ZUludGVyYWN0KCkKCXsKCQltX2RlbWFuZHMgPSBuZXcgTGlzdDxJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZD4oKTsKCQlmb3JlYWNoICh2YXIgZGF0YSBpbiBtX2RhdGEuZGVtYW5kcy5WYWx1ZSkKCQl7CgkJCW1fZGVtYW5kcy5BZGQoZGF0YS5DcmVhdEl0ZW1EZW1hbmQoKSk7CgkJfQoJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uU2V0SGFuZGxlKHRydWUpOwoKCQlpZiAobV9kYXRhLlR5cGUgPT0gSW50ZXJhY3REYXRhLkludGVyYWN0VHlwZS5EZXZpY2VGaXhlciAmJiBtX2RlbWFuZHMuQ291bnQgPiAwKQoJCXsKCQkJbV9jdXJEZW1hbmRJbmRleCA9IDA7CgkJCWRlbWFuZEV2ZW50Py5JbnZva2UobV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLCAiQWN0aXZlIik7CgkJfQoJfQoKCXB1YmxpYyBib29sIENhbkludGVyYWN0KElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCXJldHVybiAhbV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLkNvbXBsZXRlZCAmJiB0YXJnZXQuQ2FuSW50ZXJhY3QodGhpcykgJiYgbV9pbnRlcmFjdG9yID09IG51bGw7Cgl9CgoJcHVibGljIHZvaWQgSW50ZXJhY3RXaXRoKElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCWlmIChtX2ludGVyYWN0b3IgPT0gbnVsbCAmJiB0YXJnZXQgaXMgQ2hhcmFjdGVyKQoJCXsKCQkJdGFyZ2V0LkN1cnJlbnRJbnRlcmFjdG9yID0gbnVsbDsKCQkJdmFyIGNoYXJhY3RlciA9IHRhcmdldCBhcyBDaGFyYWN0ZXI7CgkJCXZhciBzdWJtaXRhYmxlID0gbV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLlN1Ym1pdHRhYmxlKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQlpZiAoc3VibWl0YWJsZS5WYWx1ZXMuU3VtKCkgPiAwKQoJCQl7CgkJCQltX2ludGVyYWN0b3IgPSBjaGFyYWN0ZXI7CgkJCQlpZiAoY2hhcmFjdGVyID09IEdhbWVNYW5hZ2VyLkN1ckhlcm8pCgkJCQl7CgkJCQkJVUlJbnRlcmFjdFdpbmRvdyB3aW4gPSBHYW1lTWFuYWdlci5HYW1lVUkuR2V0V2luZG93KCJ3aW5JbnRlcmFjdCIpIGFzIFVJSW50ZXJhY3RXaW5kb3c7CgkJCQkJd2luLkluaXQodGhpcywgbV9kZW1hbmRzKTsKCQkJCQl3aW4uT3BlbigpOwoJCQkJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uRXhpdEV2ZW50LkFkZExpc3RlbmVyKCgpID0+IHdpbi5DbG9zZSgpKTsKCQkJCQl3aW4uYnRfQ29uZmlybS5vbkNsaWNrLkFkZExpc3RlbmVyKCgpID0+IE9uQ2xpY2tfSW50ZXJhY3Qod2luKSk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJY2hhcmFjdGVyLkludmVudG9yeS5JdGVtQWN0aW9uICs9IE9uSXRlbUV2ZW50OwoJCQkJCW1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XS5GdWxmaWxsKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQkJfQoJCQkJZGVtYW5kRXZlbnQgKz0gKGRlbWFuZCwgZXZlbnROYW1lKSA9PgoJCQkJewoJCQkJCWlmIChldmVudE5hbWUgPT0gIkZ1bGZpbGwiICYmIGRlbWFuZC5Db21wbGV0ZWQpCgkJCQkJewoJCQkJCQlpZiAobV90aW1lcikgbV90aW1lci5TdGFydFRpbWVyKCk7CgkJCQkJCWVsc2UgT25CZWhhdmVkKCk7CgkJCQkJfQoJCQkJfTsKCQkJfQoJCQllbHNlIGRlbWFuZEV2ZW50Py5JbnZva2UobV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLCAiRmFpbCIpOwoJCX0KCX0KCglwdWJsaWMgdm9pZCBPbkNsaWNrX0ludGVyYWN0KFVJSW50ZXJhY3RXaW5kb3cgd2luKQoJewoJCUdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJbV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLkZ1bGZpbGwoR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkpOwoJCW1fY3VyRGVtYW5kSW5kZXggPSB3aW4uU2VsZWN0ZWRJbmRleDsKCQl3aW4uQ2xvc2UoKTsKCX0KCgl2b2lkIE9uQmVoYXZlZCgpCgl7CgkJbV9kYXRhLkludGVyYWN0QmVoYXZlKHRyYW5zZm9ybSwgbV9jdXJEZW1hbmRJbmRleCk7CgkJQ2hhcmFjdGVyIGNoYXJhY3RlciA9IG1faW50ZXJhY3RvciBhcyBDaGFyYWN0ZXI7CgkJaWYgKGNoYXJhY3RlcikKCQl7CgkJCWNoYXJhY3Rlci5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LkNvdW50KEV2ZW50U2VuZGVyLkV2ZW50VHlwZS5EZW1hbmRDb21wbGV0ZSwgbV9kYXRhLktleSk7CgkJfQoJCW1faW50ZXJhY3RvciA9IG51bGw7Cgl9CgoJdm9pZCBPbkl0ZW1FdmVudChJdGVtIGl0ZW0sIHN0cmluZyBhY3Rpb25OYW1lLCBpbnQgaXRlbUNvdW50KQoJewoJCWlmIChhY3Rpb25OYW1lID09ICJGdWxmaWxsIikKCQl7CgkJCUNoYXJhY3RlciBjaGFyYWN0ZXIgPSBtX2ludGVyYWN0b3IgYXMgQ2hhcmFjdGVyOwoJCQltX2ludGVyYWN0b3IgPSBudWxsOwoJCQlpZiAoY2hhcmFjdGVyICE9IG51bGwpCgkJCXsKCQkJCWNoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiAtPSBPbkl0ZW1FdmVudDsKCQkJCVJlc0NvbGxlY3RvciBjb2xsZWN0b3IgPSBjaGFyYWN0ZXIuR2V0Q29tcG9uZW50PFJlc0NvbGxlY3Rvcj4oKTsKCQkJCWlmIChjb2xsZWN0b3IpCgkJCQl7CgkJCQkJbV90YXJnZXQgPSBjaGFyYWN0ZXIuZ2FtZU9iamVjdDsKCQkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRnVsZmlsbCIsICQie2l0ZW0uSXRlbU5hbWV9eHtpdGVtQ291bnR9Iik7CgkJCQkJU3RhcnRDb3JvdXRpbmUoVXBkYXRlRGVtYW5kKGl0ZW0sIGl0ZW1Db3VudCkpOwoJCQkJfQoJCQkJZWxzZSBkZW1hbmRFdmVudD8uSW52b2tlKG1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XSwgIkZ1bGZpbGwiKTsKCQkJfQoJCX0KCX0KCglJRW51bWVyYXRvciBVcGRhdGVEZW1hbmQoSXRlbSBpdGVtLCBpbnQgaXRlbUNvdW50KQoJewoJCWlmIChtX3RhcmdldCAhPSBudWxsKQoJCXsKCQkJdmFyIHJlc09ianMgPSBuZXcgTGlzdDxHYW1lT2JqZWN0PigpOwoJCQlmb3IgKGludCBpID0gMDsgaSA8IGl0ZW1Db3VudDsgaSsrKQoJCQl7CgkJCQlHYW1lT2JqZWN0IHJlc09iaiA9IEluc3RhbnRpYXRlKGl0ZW0uV29ybGRPYmplY3RQcmVmYWIsIHRyYW5zZm9ybSk7CgkJCQlyZXNPYmpzLkFkZChyZXNPYmopOwoJCQkJcmVzT2JqLnRyYW5zZm9ybS5ET01vdmUobV90YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uICsgbmV3IFZlY3RvcjMoMCwgMiwgMCksIDEpLkZyb20oKTsKCQkJfQoJCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKDEuMGYpOwoJCQlmb3JlYWNoICh2YXIgb2JqIGluIHJlc09ianMpCgkJCXsKCQkJCURlc3Ryb3kob2JqKTsKCQkJfQoJCQlkZW1hbmRFdmVudD8uSW52b2tlKG1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XSwgIkZ1bGZpbGwiKTsKCQl9Cgl9Cn0KAAAAAAAAAADZEAAAAAAAAAAAAAAAAAAAAAAAABsSAAAAAAAAAAAAAAAAAAAAAAAAGxIAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAAAbEgAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBNb25vQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1fc3VibWl0dGVyOyB9IHNldCB7IGlmICh2YWx1ZSA9PSBudWxsICYmIG1fc3VibWl0dGVyICE9IG51bGwpIG1fc3VibWl0dGVyID0gbnVsbDsgfSB9CglwdWJsaWMgSW50ZXJhY3REYXRhIERhdGEgeyBnZXQgeyByZXR1cm4gbV9kYXRhOyB9IH0KCVtTZXJpYWxpemVGaWVsZF0KCUludGVyYWN0RGF0YSBtX2RhdGE7CglbU2VyaWFsaXplRmllbGRdCglib29sIGF1dG9BY3RpdmU7CglwdWJsaWMgQWN0aW9uPEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kLCBzdHJpbmc+IGRlbWFuZEV2ZW50OwoJTGlzdDxJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZD4gbV9kZW1hbmRzOwoJaW50IG1fY3VyRGVtYW5kSW5kZXg7CglUaW1lciBtX3RpbWVyOwoJQ2hhcmFjdGVyIG1fc3VibWl0dGVyOwoKCXZvaWQgQXdha2UoKQoJewoJCWlmIChtX2RhdGEuQmVoYXZlRHVyaW5nID4gMCB8fCBtX2RhdGEubWF4QWN0VGltZXMgPiAxIHx8IG1fZGF0YS5hdXRvRGVzdHJveSkKCQkJbV90aW1lciA9IGdhbWVPYmplY3QuQWRkQ29tcG9uZW50PFRpbWVyPigpOwoKCX0KCXZvaWQgU3RhcnQoKQoJewoJCWlmIChhdXRvQWN0aXZlKQoJCXsKCQkJR2V0Q29tcG9uZW50PEludGVyYWN0SGFuZGxlPigpPy5TZXRIYW5kbGUodHJ1ZSk7CgkJCUFjdGl2ZUludGVyYWN0KCk7CgkJfQoJCWlmIChtX3RpbWVyKQoJCXsKCQkJbV90aW1lci5TZXRUaW1lcihtX2RhdGEuQmVoYXZlRHVyaW5nLCBtX2RhdGEubWF4QWN0VGltZXMsIG1fZGF0YS5hY3RDZCk7CgkJCW1fdGltZXIucmVmcmVzaEFjdGlvbiArPSAoKSA9PgoJCQl7CgkJCQlBY3RpdmVJbnRlcmFjdCgpOwoJCQkJdmFyIGFuaW0gPSBHZXRDb21wb25lbnRJbkNoaWxkcmVuPEFuaW1hdG9yPigpOwoJCQkJaWYgKGFuaW0gJiYgbV9kYXRhLm9uUmVmcmVzaEFuaW0gIT0gIiIpIGFuaW0uU2V0VHJpZ2dlcihtX2RhdGEub25SZWZyZXNoQW5pbSk7CgkJCX07CgkJCW1fdGltZXIuYmVoYXZlQWN0aW9uICs9ICgpID0+IG1fZGF0YS5JbnRlcmFjdEJlaGF2ZShnYW1lT2JqZWN0LCBtX2N1ckRlbWFuZEluZGV4KTsKCQkJbV90aW1lci5wcm9jZXNzQWN0aW9uICs9IChtYXgsIHBhc3NlZCkgPT4geyBWRlhNYW5hZ2VyLlBsYXlWRlgobV9kYXRhLmJlaGF2aW5nVkZYLCB0cmFuc2Zvcm0ucG9zaXRpb24pOyB9OwoJCQlpZiAobV9kYXRhLmF1dG9EZXN0cm95KSBtX3RpbWVyLmVuZEFjdGlvbiArPSAoKSA9PiBEZXN0cm95KGdhbWVPYmplY3QpOwoJCX0KCX0KCgl2b2lkIEFjdGl2ZUludGVyYWN0KCkKCXsKCQltX2RlbWFuZHMgPSBuZXcgTGlzdDxJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZD4oKTsKCQlmb3JlYWNoICh2YXIgZGF0YSBpbiBtX2RhdGEuZGVtYW5kcy5WYWx1ZSkKCQl7CgkJCW1fZGVtYW5kcy5BZGQoZGF0YS5DcmVhdEl0ZW1EZW1hbmQoKSk7CgkJfQoJCWlmIChtX2RlbWFuZHMuQ291bnQgPiAwKQoJCXsKCQkJbV9jdXJEZW1hbmRJbmRleCA9IDA7CgkJCWRlbWFuZEV2ZW50Py5JbnZva2UobV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLCAiQWN0aXZlIik7CgkJfQoJfQoKCXB1YmxpYyBib29sIENhbkludGVyYWN0KElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCXJldHVybiAhbV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLkNvbXBsZXRlZCAmJiB0YXJnZXQuQ2FuSW50ZXJhY3QodGhpcykgJiYgbV9zdWJtaXR0ZXIgPT0gbnVsbDsKCX0KCglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKHRhcmdldCBpcyBDaGFyYWN0ZXIgJiYgbV9zdWJtaXR0ZXIgPT0gbnVsbCkKCQl7CgkJCXRhcmdldC5DdXJyZW50SW50ZXJhY3RvciA9IG51bGw7CgkJCXZhciBjaGFyYWN0ZXIgPSB0YXJnZXQgYXMgQ2hhcmFjdGVyOwoJCQl2YXIgc3VibWl0YWJsZSA9IG1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XS5TdWJtaXR0YWJsZShjaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJaWYgKHN1Ym1pdGFibGUuVmFsdWVzLlN1bSgpID4gMCkKCQkJewoJCQkJbV9zdWJtaXR0ZXIgPSBjaGFyYWN0ZXI7CgkJCQlpZiAoY2hhcmFjdGVyID09IEdhbWVNYW5hZ2VyLkN1ckhlcm8gJiYgbV9kYXRhLlR5cGUgPT0gSW50ZXJhY3REYXRhLkludGVyYWN0VHlwZS5EZXZpY2VGaXhlciB8fCBtX2RhdGEuVHlwZSA9PSBJbnRlcmFjdERhdGEuSW50ZXJhY3RUeXBlLkRldmljZUNyZWF0ZXIpCgkJCQl7CgkJCQkJVUlJbnRlcmFjdFdpbmRvdyB3aW4gPSBHYW1lTWFuYWdlci5HYW1lVUkuR2V0V2luZG93KCJ3aW5JbnRlcmFjdCIpIGFzIFVJSW50ZXJhY3RXaW5kb3c7CgkJCQkJd2luLkluaXQodGhpcywgbV9kZW1hbmRzKTsKCQkJCQl3aW4uT3BlbigpOwoJCQkJCUdldENvbXBvbmVudDxJbnRlcmFjdEhhbmRsZT4oKT8uRXhpdEV2ZW50LkFkZExpc3RlbmVyKCgpID0+IHdpbi5DbG9zZSgpKTsKCQkJCQl3aW4uYnRfQ29uZmlybS5vbkNsaWNrLkFkZExpc3RlbmVyKCgpID0+IE9uQ2xpY2tfSW50ZXJhY3Qod2luKSk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJY2hhcmFjdGVyLkludmVudG9yeS5JdGVtQWN0aW9uICs9IE9uSXRlbUV2ZW50OwoJCQkJCW1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XS5GdWxmaWxsKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQkJfQoJCQkJZGVtYW5kRXZlbnQgKz0gT25EZW1hbmRFdmVudDsKCQkJfQoJCQllbHNlIGRlbWFuZEV2ZW50Py5JbnZva2UobV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLCAiRmFpbCIpOwoJCX0KCX0KCgl2b2lkIE9uRGVtYW5kRXZlbnQoSW52ZW50b3J5U3lzdGVtLkl0ZW1EZW1hbmQgZGVtYW5kLCBzdHJpbmcgZXZlbnROYW1lKQoJewoJCWlmIChldmVudE5hbWUgPT0gIkZ1bGZpbGwiICYmIGRlbWFuZC5Db21wbGV0ZWQpCgkJewoJCQlkZW1hbmRFdmVudD8uSW52b2tlKGRlbWFuZCwgIkNvbXBsZXRlIik7CgkJCWlmIChtX3RpbWVyKSBtX3RpbWVyLlN0YXJ0VGltZXIoKTsKCQkJZWxzZSBtX2RhdGEuSW50ZXJhY3RCZWhhdmUoZ2FtZU9iamVjdCwgbV9jdXJEZW1hbmRJbmRleCk7CgkJCW1fc3VibWl0dGVyPy5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LkNvdW50KEV2ZW50U2VuZGVyLkV2ZW50VHlwZS5EZW1hbmRDb21wbGV0ZSwgbV9kYXRhLktleSk7CgkJfQoJCW1fc3VibWl0dGVyID0gbnVsbDsKCQlkZW1hbmRFdmVudCAtPSBPbkRlbWFuZEV2ZW50OwoJfQoKCXB1YmxpYyB2b2lkIE9uQ2xpY2tfSW50ZXJhY3QoVUlJbnRlcmFjdFdpbmRvdyB3aW4pCgl7CgkJR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkuSXRlbUFjdGlvbiArPSBPbkl0ZW1FdmVudDsKCQltX2RlbWFuZHNbbV9jdXJEZW1hbmRJbmRleF0uRnVsZmlsbChHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeSk7CgkJbV9jdXJEZW1hbmRJbmRleCA9IHdpbi5TZWxlY3RlZEluZGV4OwoJCXdpbi5DbG9zZSgpOwoJfQoKCXZvaWQgT25JdGVtRXZlbnQoSXRlbSBpdGVtLCBzdHJpbmcgYWN0aW9uTmFtZSwgaW50IGl0ZW1Db3VudCkKCXsKCQlpZiAoYWN0aW9uTmFtZSA9PSAiRnVsZmlsbCIgJiYgbV9zdWJtaXR0ZXIgIT0gbnVsbCkKCQl7CgkJCW1fc3VibWl0dGVyLkludmVudG9yeS5JdGVtQWN0aW9uIC09IE9uSXRlbUV2ZW50OwoJCQlSZXNDb2xsZWN0b3IgY29sbGVjdG9yID0gbV9zdWJtaXR0ZXIuR2V0Q29tcG9uZW50PFJlc0NvbGxlY3Rvcj4oKTsKCQkJaWYgKGNvbGxlY3RvcikKCQkJewoJCQkJSGVscGVycy5Mb2codGhpcywgIkZ1bGZpbGwiLCAkIntpdGVtLkl0ZW1OYW1lfXh7aXRlbUNvdW50fSIpOwoJCQkJU3RhcnRDb3JvdXRpbmUoVXBkYXRlRGVtYW5kKGl0ZW0sIGl0ZW1Db3VudCkpOwoKCQkJfQoJCQllbHNlIGRlbWFuZEV2ZW50Py5JbnZva2UobV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLCAiRnVsZmlsbCIpOwoJCX0KCX0KCglJRW51bWVyYXRvciBVcGRhdGVEZW1hbmQoSXRlbSBpdGVtLCBpbnQgaXRlbUNvdW50KQoJewoJCXZhciByZXNPYmpzID0gbmV3IExpc3Q8R2FtZU9iamVjdD4oKTsKCQlmb3IgKGludCBpID0gMDsgaSA8IGl0ZW1Db3VudDsgaSsrKQoJCXsKCQkJR2FtZU9iamVjdCByZXNPYmogPSBJbnN0YW50aWF0ZShpdGVtLldvcmxkT2JqZWN0UHJlZmFiLCB0cmFuc2Zvcm0pOwoJCQlyZXNPYmpzLkFkZChyZXNPYmopOwoJCQlyZXNPYmoudHJhbnNmb3JtLkRPTW92ZShtX3N1Ym1pdHRlci50cmFuc2Zvcm0ucG9zaXRpb24gKyBuZXcgVmVjdG9yMygwLCAyLCAwKSwgMSkuRnJvbSgpOwoJCX0KCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKDEuMGYpOwoJCWZvcmVhY2ggKHZhciBvYmogaW4gcmVzT2JqcykKCQl7CgkJCURlc3Ryb3kob2JqKTsKCQl9CgkJZGVtYW5kRXZlbnQ/Lkludm9rZShtX2RlbWFuZHNbbV9jdXJEZW1hbmRJbmRleF0sICJGdWxmaWxsIik7Cgl9Cn0KAAAAAAAAAADUEgAAAAAAAAAAAAAAAAAAAAAAANQSAAAAAAAAAAAAAAAAAAAAAAAA1BIAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADUEgAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBNb25vQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1fc3VibWl0dGVyOyB9IHNldCB7IGlmICh2YWx1ZSA9PSBudWxsICYmIG1fc3VibWl0dGVyICE9IG51bGwpIG1fc3VibWl0dGVyID0gbnVsbDsgfSB9CglwdWJsaWMgSW50ZXJhY3REYXRhIERhdGEgeyBnZXQgeyByZXR1cm4gbV9kYXRhOyB9IH0KCVtTZXJpYWxpemVGaWVsZF0KCUludGVyYWN0RGF0YSBtX2RhdGE7CglbU2VyaWFsaXplRmllbGRdCglib29sIGF1dG9BY3RpdmU7CglwdWJsaWMgQWN0aW9uPEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kLCBzdHJpbmc+IGRlbWFuZEV2ZW50OwoJTGlzdDxJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZD4gbV9kZW1hbmRzOwoJaW50IG1fY3VyRGVtYW5kSW5kZXg7CglUaW1lciBtX3RpbWVyOwoJQ2hhcmFjdGVyIG1fc3VibWl0dGVyOwoKCXZvaWQgQXdha2UoKQoJewoJCWlmIChtX2RhdGEuQmVoYXZlRHVyaW5nID4gMCB8fCBtX2RhdGEubWF4QWN0VGltZXMgPiAxIHx8IG1fZGF0YS5hdXRvRGVzdHJveSkKCQkJbV90aW1lciA9IGdhbWVPYmplY3QuQWRkQ29tcG9uZW50PFRpbWVyPigpOwoKCX0KCXZvaWQgU3RhcnQoKQoJewoJCWlmIChhdXRvQWN0aXZlKSBBY3RpdmVJbnRlcmFjdCgpOwoJCWlmIChtX3RpbWVyKQoJCXsKCQkJbV90aW1lci5TZXRUaW1lcihtX2RhdGEuQmVoYXZlRHVyaW5nLCBtX2RhdGEubWF4QWN0VGltZXMsIG1fZGF0YS5hY3RDZCk7CgkJCW1fdGltZXIucmVmcmVzaEFjdGlvbiArPSAoKSA9PgoJCQl7CgkJCQlBY3RpdmVJbnRlcmFjdCgpOwoJCQkJdmFyIGFuaW0gPSBHZXRDb21wb25lbnRJbkNoaWxkcmVuPEFuaW1hdG9yPigpOwoJCQkJaWYgKGFuaW0gJiYgbV9kYXRhLm9uUmVmcmVzaEFuaW0gIT0gIiIpIGFuaW0uU2V0VHJpZ2dlcihtX2RhdGEub25SZWZyZXNoQW5pbSk7CgkJCX07CgkJCW1fdGltZXIuYmVoYXZlQWN0aW9uICs9ICgpID0+IG1fZGF0YS5JbnRlcmFjdEJlaGF2ZShnYW1lT2JqZWN0LCBtX2N1ckRlbWFuZEluZGV4KTsKCQkJbV90aW1lci5wcm9jZXNzQWN0aW9uICs9IChtYXgsIHBhc3NlZCkgPT4geyBWRlhNYW5hZ2VyLlBsYXlWRlgobV9kYXRhLmJlaGF2aW5nVkZYLCB0cmFuc2Zvcm0ucG9zaXRpb24pOyB9OwoJCQlpZiAobV9kYXRhLmF1dG9EZXN0cm95KSBtX3RpbWVyLmVuZEFjdGlvbiArPSAoKSA9PiBEZXN0cm95KGdhbWVPYmplY3QpOwoJCQltX3RpbWVyLmVuYWJsZWQgPSBmYWxzZTsKCQl9Cgl9CgoJdm9pZCBBY3RpdmVJbnRlcmFjdCgpCgl7CgkJdmFyIEludGVyYWN0SGFuZGxlID0gR2V0Q29tcG9uZW50PEludGVyYWN0SGFuZGxlPigpOwoJCWlmIChJbnRlcmFjdEhhbmRsZSkKCQl7CgkJCUludGVyYWN0SGFuZGxlLlNldEhhbmRsZSh0cnVlKTsKCQkJSW50ZXJhY3RIYW5kbGUuRW50ZXJFdmVudC5BZGRMaXN0ZW5lcigoKSA9PiB7IGlmICghbV90aW1lci5lbmFibGVkKSBtX3RpbWVyLmVuYWJsZWQgPSB0cnVlOyB9KTsKCQl9CgoJCW1fZGVtYW5kcyA9IG5ldyBMaXN0PEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kPigpOwoJCWZvcmVhY2ggKHZhciBkYXRhIGluIG1fZGF0YS5kZW1hbmRzLlZhbHVlKQoJCXsKCQkJbV9kZW1hbmRzLkFkZChkYXRhLkNyZWF0SXRlbURlbWFuZCgpKTsKCQl9CgkJaWYgKG1fZGVtYW5kcy5Db3VudCA+IDApCgkJewoJCQltX2N1ckRlbWFuZEluZGV4ID0gMDsKCQkJZGVtYW5kRXZlbnQ/Lkludm9rZShtX2RlbWFuZHNbbV9jdXJEZW1hbmRJbmRleF0sICJBY3RpdmUiKTsKCQl9Cgl9CgoJcHVibGljIGJvb2wgQ2FuSW50ZXJhY3QoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJcmV0dXJuICFtX2RlbWFuZHNbbV9jdXJEZW1hbmRJbmRleF0uQ29tcGxldGVkICYmIHRhcmdldC5DYW5JbnRlcmFjdCh0aGlzKSAmJiBtX3N1Ym1pdHRlciA9PSBudWxsOwoJfQoKCXB1YmxpYyB2b2lkIEludGVyYWN0V2l0aChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlpZiAodGFyZ2V0IGlzIENoYXJhY3RlciAmJiBtX3N1Ym1pdHRlciA9PSBudWxsKQoJCXsKCQkJdGFyZ2V0LkN1cnJlbnRJbnRlcmFjdG9yID0gbnVsbDsKCQkJdmFyIGNoYXJhY3RlciA9IHRhcmdldCBhcyBDaGFyYWN0ZXI7CgkJCXZhciBzdWJtaXRhYmxlID0gbV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLlN1Ym1pdHRhYmxlKGNoYXJhY3Rlci5JbnZlbnRvcnkpOwoJCQlpZiAoc3VibWl0YWJsZS5WYWx1ZXMuU3VtKCkgPiAwKQoJCQl7CgkJCQltX3N1Ym1pdHRlciA9IGNoYXJhY3RlcjsKCQkJCWlmIChjaGFyYWN0ZXIgPT0gR2FtZU1hbmFnZXIuQ3VySGVybyAmJiBtX2RhdGEuVHlwZSA9PSBJbnRlcmFjdERhdGEuSW50ZXJhY3RUeXBlLkRldmljZUZpeGVyIHx8IG1fZGF0YS5UeXBlID09IEludGVyYWN0RGF0YS5JbnRlcmFjdFR5cGUuRGV2aWNlQ3JlYXRlcikKCQkJCXsKCQkJCQlVSUludGVyYWN0V2luZG93IHdpbiA9IEdhbWVNYW5hZ2VyLkdhbWVVSS5HZXRXaW5kb3coIndpbkludGVyYWN0IikgYXMgVUlJbnRlcmFjdFdpbmRvdzsKCQkJCQl3aW4uSW5pdCh0aGlzLCBtX2RlbWFuZHMpOwoJCQkJCXdpbi5PcGVuKCk7CgkJCQkJR2V0Q29tcG9uZW50PEludGVyYWN0SGFuZGxlPigpPy5FeGl0RXZlbnQuQWRkTGlzdGVuZXIoKCkgPT4gd2luLkNsb3NlKCkpOwoJCQkJCXdpbi5idF9Db25maXJtLm9uQ2xpY2suQWRkTGlzdGVuZXIoKCkgPT4gT25DbGlja19JbnRlcmFjdCh3aW4pKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQljaGFyYWN0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJCQkJbV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLkZ1bGZpbGwoY2hhcmFjdGVyLkludmVudG9yeSk7CgkJCQl9CgkJCQlkZW1hbmRFdmVudCArPSBPbkRlbWFuZEV2ZW50OwoJCQl9CgkJCWVsc2UgZGVtYW5kRXZlbnQ/Lkludm9rZShtX2RlbWFuZHNbbV9jdXJEZW1hbmRJbmRleF0sICJGYWlsIik7CgkJfQoJfQoKCXZvaWQgT25EZW1hbmRFdmVudChJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZCBkZW1hbmQsIHN0cmluZyBldmVudE5hbWUpCgl7CgkJaWYgKGV2ZW50TmFtZSA9PSAiRnVsZmlsbCIgJiYgZGVtYW5kLkNvbXBsZXRlZCkKCQl7CgkJCWRlbWFuZEV2ZW50Py5JbnZva2UoZGVtYW5kLCAiQ29tcGxldGUiKTsKCQkJaWYgKG1fdGltZXIpIG1fdGltZXIuU3RhcnRUaW1lcigpOwoJCQllbHNlIG1fZGF0YS5JbnRlcmFjdEJlaGF2ZShnYW1lT2JqZWN0LCBtX2N1ckRlbWFuZEluZGV4KTsKCQkJbV9zdWJtaXR0ZXI/LkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uQ291bnQoRXZlbnRTZW5kZXIuRXZlbnRUeXBlLkRlbWFuZENvbXBsZXRlLCBtX2RhdGEuS2V5KTsKCQl9CgkJbV9zdWJtaXR0ZXIgPSBudWxsOwoJCWRlbWFuZEV2ZW50IC09IE9uRGVtYW5kRXZlbnQ7Cgl9CgoJcHVibGljIHZvaWQgT25DbGlja19JbnRlcmFjdChVSUludGVyYWN0V2luZG93IHdpbikKCXsKCQlHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeS5JdGVtQWN0aW9uICs9IE9uSXRlbUV2ZW50OwoJCW1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XS5GdWxmaWxsKEdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5KTsKCQltX2N1ckRlbWFuZEluZGV4ID0gd2luLlNlbGVjdGVkSW5kZXg7CgkJd2luLkNsb3NlKCk7Cgl9CgoJdm9pZCBPbkl0ZW1FdmVudChJdGVtIGl0ZW0sIHN0cmluZyBhY3Rpb25OYW1lLCBpbnQgaXRlbUNvdW50KQoJewoJCWlmIChhY3Rpb25OYW1lID09ICJGdWxmaWxsIiAmJiBtX3N1Ym1pdHRlciAhPSBudWxsKQoJCXsKCQkJbV9zdWJtaXR0ZXIuSW52ZW50b3J5Lkl0ZW1BY3Rpb24gLT0gT25JdGVtRXZlbnQ7CgkJCVJlc0NvbGxlY3RvciBjb2xsZWN0b3IgPSBtX3N1Ym1pdHRlci5HZXRDb21wb25lbnQ8UmVzQ29sbGVjdG9yPigpOwoJCQlpZiAoY29sbGVjdG9yKQoJCQl7CgkJCQlIZWxwZXJzLkxvZyh0aGlzLCAiRnVsZmlsbCIsICQie2l0ZW0uSXRlbU5hbWV9eHtpdGVtQ291bnR9Iik7CgkJCQlTdGFydENvcm91dGluZShVcGRhdGVEZW1hbmQoaXRlbSwgaXRlbUNvdW50KSk7CgoJCQl9CgkJCWVsc2UgZGVtYW5kRXZlbnQ/Lkludm9rZShtX2RlbWFuZHNbbV9jdXJEZW1hbmRJbmRleF0sICJGdWxmaWxsIik7CgkJfQoJfQoKCUlFbnVtZXJhdG9yIFVwZGF0ZURlbWFuZChJdGVtIGl0ZW0sIGludCBpdGVtQ291bnQpCgl7CgkJdmFyIHJlc09ianMgPSBuZXcgTGlzdDxHYW1lT2JqZWN0PigpOwoJCWZvciAoaW50IGkgPSAwOyBpIDwgaXRlbUNvdW50OyBpKyspCgkJewoJCQlHYW1lT2JqZWN0IHJlc09iaiA9IEluc3RhbnRpYXRlKGl0ZW0uV29ybGRPYmplY3RQcmVmYWIsIHRyYW5zZm9ybSk7CgkJCXJlc09ianMuQWRkKHJlc09iaik7CgkJCXJlc09iai50cmFuc2Zvcm0uRE9Nb3ZlKG1fc3VibWl0dGVyLnRyYW5zZm9ybS5wb3NpdGlvbiArIG5ldyBWZWN0b3IzKDAsIDIsIDApLCAxKS5Gcm9tKCk7CgkJfQoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMoMS4wZik7CgkJZm9yZWFjaCAodmFyIG9iaiBpbiByZXNPYmpzKQoJCXsKCQkJRGVzdHJveShvYmopOwoJCX0KCQlkZW1hbmRFdmVudD8uSW52b2tlKG1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XSwgIkZ1bGZpbGwiKTsKCX0KfQoAAAAAAAAAANwSAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADcEgAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBNb25vQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1fc3VibWl0dGVyOyB9IHNldCB7IGlmICh2YWx1ZSA9PSBudWxsICYmIG1fc3VibWl0dGVyICE9IG51bGwpIG1fc3VibWl0dGVyID0gbnVsbDsgfSB9CglwdWJsaWMgSW50ZXJhY3REYXRhIGludGVyYWN0RGF0YSB7IGdldCB7IHJldHVybiBtX2RhdGE7IH0gfQoJW1NlcmlhbGl6ZUZpZWxkXQoJSW50ZXJhY3REYXRhIG1fZGF0YTsKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgYXV0b0FjdGl2ZTsKCXB1YmxpYyBBY3Rpb248SW52ZW50b3J5U3lzdGVtLkl0ZW1EZW1hbmQsIHN0cmluZz4gZGVtYW5kRXZlbnQ7CglMaXN0PEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kPiBtX2RlbWFuZHM7CglpbnQgbV9jdXJEZW1hbmRJbmRleDsKCVRpbWVyIG1fdGltZXI7CglDaGFyYWN0ZXIgbV9zdWJtaXR0ZXI7CgoJdm9pZCBBd2FrZSgpCgl7CgkJaWYgKG1fZGF0YS5CZWhhdmVEdXJpbmcgPiAwIHx8IG1fZGF0YS5tYXhBY3RUaW1lcyA+IDEgfHwgbV9kYXRhLmF1dG9EZXN0cm95KQoJCQltX3RpbWVyID0gZ2FtZU9iamVjdC5BZGRDb21wb25lbnQ8VGltZXI+KCk7CgoJfQoJdm9pZCBTdGFydCgpCgl7CgkJaWYgKGF1dG9BY3RpdmUpIEFjdGl2ZUludGVyYWN0KCk7CgkJaWYgKG1fdGltZXIpCgkJewoJCQltX3RpbWVyLlNldFRpbWVyKG1fZGF0YS5CZWhhdmVEdXJpbmcsIG1fZGF0YS5tYXhBY3RUaW1lcywgbV9kYXRhLmFjdENkKTsKCQkJbV90aW1lci5yZWZyZXNoQWN0aW9uICs9ICgpID0+CgkJCXsKCQkJCUFjdGl2ZUludGVyYWN0KCk7CgkJCQl2YXIgYW5pbSA9IEdldENvbXBvbmVudEluQ2hpbGRyZW48QW5pbWF0b3I+KCk7CgkJCQlpZiAoYW5pbSAmJiBtX2RhdGEub25SZWZyZXNoQW5pbSAhPSAiIikgYW5pbS5TZXRUcmlnZ2VyKG1fZGF0YS5vblJlZnJlc2hBbmltKTsKCQkJfTsKCQkJbV90aW1lci5iZWhhdmVBY3Rpb24gKz0gKCkgPT4gbV9kYXRhLkludGVyYWN0QmVoYXZlKGdhbWVPYmplY3QsIG1fY3VyRGVtYW5kSW5kZXgpOwoJCQltX3RpbWVyLnByb2Nlc3NBY3Rpb24gKz0gKG1heCwgcGFzc2VkKSA9PiB7IFZGWE1hbmFnZXIuUGxheVZGWChtX2RhdGEuYmVoYXZpbmdWRlgsIHRyYW5zZm9ybS5wb3NpdGlvbik7IH07CgkJCWlmIChtX2RhdGEuYXV0b0Rlc3Ryb3kpIG1fdGltZXIuZW5kQWN0aW9uICs9ICgpID0+IERlc3Ryb3koZ2FtZU9iamVjdCk7CgkJCW1fdGltZXIuZW5hYmxlZCA9IGZhbHNlOwoJCX0KCX0KCgl2b2lkIEFjdGl2ZUludGVyYWN0KCkKCXsKCQl2YXIgSW50ZXJhY3RIYW5kbGUgPSBHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk7CgkJaWYgKEludGVyYWN0SGFuZGxlKQoJCXsKCQkJSW50ZXJhY3RIYW5kbGUuU2V0SGFuZGxlKHRydWUpOwoJCQlJbnRlcmFjdEhhbmRsZS5FbnRlckV2ZW50LkFkZExpc3RlbmVyKCgpID0+IHsgaWYgKCFtX3RpbWVyLmVuYWJsZWQpIG1fdGltZXIuZW5hYmxlZCA9IHRydWU7IH0pOwoJCX0KCgkJbV9kZW1hbmRzID0gbmV3IExpc3Q8SW52ZW50b3J5U3lzdGVtLkl0ZW1EZW1hbmQ+KCk7CgkJZm9yZWFjaCAodmFyIGRhdGEgaW4gbV9kYXRhLmRlbWFuZHMuVmFsdWUpCgkJewoJCQltX2RlbWFuZHMuQWRkKGRhdGEuQ3JlYXRJdGVtRGVtYW5kKCkpOwoJCX0KCQlpZiAobV9kZW1hbmRzLkNvdW50ID4gMCkKCQl7CgkJCW1fY3VyRGVtYW5kSW5kZXggPSAwOwoJCQlkZW1hbmRFdmVudD8uSW52b2tlKG1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XSwgIkFjdGl2ZSIpOwoJCX0KCX0KCglwdWJsaWMgYm9vbCBDYW5JbnRlcmFjdChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlyZXR1cm4gIW1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XS5Db21wbGV0ZWQgJiYgdGFyZ2V0LkNhbkludGVyYWN0KHRoaXMpICYmIG1fc3VibWl0dGVyID09IG51bGw7Cgl9CgoJcHVibGljIHZvaWQgSW50ZXJhY3RXaXRoKElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgaXMgQ2hhcmFjdGVyICYmIG1fc3VibWl0dGVyID09IG51bGwpCgkJewoJCQl0YXJnZXQuQ3VycmVudEludGVyYWN0b3IgPSBudWxsOwoJCQl2YXIgY2hhcmFjdGVyID0gdGFyZ2V0IGFzIENoYXJhY3RlcjsKCQkJdmFyIHN1Ym1pdGFibGUgPSBtX2RlbWFuZHNbbV9jdXJEZW1hbmRJbmRleF0uU3VibWl0dGFibGUoY2hhcmFjdGVyLkludmVudG9yeSk7CgkJCWlmIChzdWJtaXRhYmxlLlZhbHVlcy5TdW0oKSA+IDApCgkJCXsKCQkJCW1fc3VibWl0dGVyID0gY2hhcmFjdGVyOwoJCQkJaWYgKGNoYXJhY3RlciA9PSBHYW1lTWFuYWdlci5DdXJIZXJvICYmIG1fZGF0YS5UeXBlID09IEludGVyYWN0RGF0YS5JbnRlcmFjdFR5cGUuRGV2aWNlRml4ZXIgfHwgbV9kYXRhLlR5cGUgPT0gSW50ZXJhY3REYXRhLkludGVyYWN0VHlwZS5EZXZpY2VDcmVhdGVyKQoJCQkJewoJCQkJCVVJSW50ZXJhY3RXaW5kb3cgd2luID0gR2FtZU1hbmFnZXIuR2FtZVVJLkdldFdpbmRvdygid2luSW50ZXJhY3QiKSBhcyBVSUludGVyYWN0V2luZG93OwoJCQkJCXdpbi5Jbml0KHRoaXMsIG1fZGVtYW5kcyk7CgkJCQkJd2luLk9wZW4oKTsKCQkJCQlHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk/LkV4aXRFdmVudC5BZGRMaXN0ZW5lcigoKSA9PiB3aW4uQ2xvc2UoKSk7CgkJCQkJd2luLmJ0X0NvbmZpcm0ub25DbGljay5BZGRMaXN0ZW5lcigoKSA9PiBPbkNsaWNrX0ludGVyYWN0KHdpbikpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCWNoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiArPSBPbkl0ZW1FdmVudDsKCQkJCQltX2RlbWFuZHNbbV9jdXJEZW1hbmRJbmRleF0uRnVsZmlsbChjaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJCX0KCQkJCWRlbWFuZEV2ZW50ICs9IE9uRGVtYW5kRXZlbnQ7CgkJCX0KCQkJZWxzZSBkZW1hbmRFdmVudD8uSW52b2tlKG1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XSwgIkZhaWwiKTsKCQl9Cgl9CgoJdm9pZCBPbkRlbWFuZEV2ZW50KEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIGRlbWFuZCwgc3RyaW5nIGV2ZW50TmFtZSkKCXsKCQlpZiAoZXZlbnROYW1lID09ICJGdWxmaWxsIiAmJiBkZW1hbmQuQ29tcGxldGVkKQoJCXsKCQkJZGVtYW5kRXZlbnQ/Lkludm9rZShkZW1hbmQsICJDb21wbGV0ZSIpOwoJCQlpZiAobV90aW1lcikgbV90aW1lci5TdGFydFRpbWVyKCk7CgkJCWVsc2UgbV9kYXRhLkludGVyYWN0QmVoYXZlKGdhbWVPYmplY3QsIG1fY3VyRGVtYW5kSW5kZXgpOwoJCQltX3N1Ym1pdHRlcj8uR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5Db3VudChFdmVudFNlbmRlci5FdmVudFR5cGUuRGVtYW5kQ29tcGxldGUsIG1fZGF0YS5LZXkpOwoJCX0KCQltX3N1Ym1pdHRlciA9IG51bGw7CgkJZGVtYW5kRXZlbnQgLT0gT25EZW1hbmRFdmVudDsKCX0KCglwdWJsaWMgdm9pZCBPbkNsaWNrX0ludGVyYWN0KFVJSW50ZXJhY3RXaW5kb3cgd2luKQoJewoJCUdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJbV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLkZ1bGZpbGwoR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkpOwoJCW1fY3VyRGVtYW5kSW5kZXggPSB3aW4uU2VsZWN0ZWRJbmRleDsKCQl3aW4uQ2xvc2UoKTsKCX0KCgl2b2lkIE9uSXRlbUV2ZW50KEl0ZW0gaXRlbSwgc3RyaW5nIGFjdGlvbk5hbWUsIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKGFjdGlvbk5hbWUgPT0gIkZ1bGZpbGwiICYmIG1fc3VibWl0dGVyICE9IG51bGwpCgkJewoJCQltX3N1Ym1pdHRlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiAtPSBPbkl0ZW1FdmVudDsKCQkJUmVzQ29sbGVjdG9yIGNvbGxlY3RvciA9IG1fc3VibWl0dGVyLkdldENvbXBvbmVudDxSZXNDb2xsZWN0b3I+KCk7CgkJCWlmIChjb2xsZWN0b3IpCgkJCXsKCQkJCUhlbHBlcnMuTG9nKHRoaXMsICJGdWxmaWxsIiwgJCJ7aXRlbS5JdGVtTmFtZX14e2l0ZW1Db3VudH0iKTsKCQkJCVN0YXJ0Q29yb3V0aW5lKFVwZGF0ZURlbWFuZChpdGVtLCBpdGVtQ291bnQpKTsKCgkJCX0KCQkJZWxzZSBkZW1hbmRFdmVudD8uSW52b2tlKG1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XSwgIkZ1bGZpbGwiKTsKCQl9Cgl9CgoJSUVudW1lcmF0b3IgVXBkYXRlRGVtYW5kKEl0ZW0gaXRlbSwgaW50IGl0ZW1Db3VudCkKCXsKCQl2YXIgcmVzT2JqcyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBpdGVtQ291bnQ7IGkrKykKCQl7CgkJCUdhbWVPYmplY3QgcmVzT2JqID0gSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgdHJhbnNmb3JtKTsKCQkJcmVzT2Jqcy5BZGQocmVzT2JqKTsKCQkJcmVzT2JqLnRyYW5zZm9ybS5ET01vdmUobV9zdWJtaXR0ZXIudHJhbnNmb3JtLnBvc2l0aW9uICsgbmV3IFZlY3RvcjMoMCwgMiwgMCksIDEpLkZyb20oKTsKCQl9CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcygxLjBmKTsKCQlmb3JlYWNoICh2YXIgb2JqIGluIHJlc09ianMpCgkJewoJCQlEZXN0cm95KG9iaik7CgkJfQoJCWRlbWFuZEV2ZW50Py5JbnZva2UobV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLCAiRnVsZmlsbCIpOwoJfQp9CgAAAAAAAAAAvhIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC+EgAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIERHLlR3ZWVuaW5nOwp1c2luZyBTeXN0ZW0uTGlucTsKCnB1YmxpYyBjbGFzcyBJdGVtRGVtYW5kZXIgOiBNb25vQmVoYXZpb3VyLCBJSW50ZXJhY3RhYmxlCnsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1fc3VibWl0dGVyOyB9IHNldCB7IGlmICh2YWx1ZSA9PSBudWxsICYmIG1fc3VibWl0dGVyICE9IG51bGwpIG1fc3VibWl0dGVyID0gbnVsbDsgfSB9CglwdWJsaWMgSW50ZXJhY3REYXRhIGludGVyYWN0RGF0YSB7IGdldCB7IHJldHVybiBtX2RhdGE7IH0gfQoJW1NlcmlhbGl6ZUZpZWxkXQoJSW50ZXJhY3REYXRhIG1fZGF0YTsKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgYXV0b0FjdGl2ZTsKCXB1YmxpYyBBY3Rpb248SW52ZW50b3J5U3lzdGVtLkl0ZW1EZW1hbmQsIHN0cmluZz4gZGVtYW5kRXZlbnQ7CglMaXN0PEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kPiBtX2RlbWFuZHM7CglpbnQgbV9jdXJEZW1hbmRJbmRleDsKCVRpbWVyIG1fdGltZXI7CglDaGFyYWN0ZXIgbV9zdWJtaXR0ZXI7CgoJdm9pZCBBd2FrZSgpCgl7CgkJaWYgKG1fZGF0YS5CZWhhdmVEdXJpbmcgPiAwIHx8IG1fZGF0YS5tYXhBY3RUaW1lcyA+IDEgfHwgbV9kYXRhLmF1dG9EZXN0cm95KQoJCQltX3RpbWVyID0gZ2FtZU9iamVjdC5BZGRDb21wb25lbnQ8VGltZXI+KCk7CgoJfQoJdm9pZCBTdGFydCgpCgl7CgkJaWYgKGF1dG9BY3RpdmUpIEFjdGl2ZUludGVyYWN0KCk7CgkJaWYgKG1fdGltZXIpCgkJewoJCQltX3RpbWVyLlNldFRpbWVyKG1fZGF0YS5CZWhhdmVEdXJpbmcsIG1fZGF0YS5tYXhBY3RUaW1lcywgbV9kYXRhLmFjdENkKTsKCQkJbV90aW1lci5yZWZyZXNoQWN0aW9uICs9ICgpID0+CgkJCXsKCQkJCUFjdGl2ZUludGVyYWN0KCk7CgkJCQl2YXIgYW5pbSA9IEdldENvbXBvbmVudEluQ2hpbGRyZW48QW5pbWF0b3I+KCk7CgkJCQlpZiAoYW5pbSAmJiBtX2RhdGEub25SZWZyZXNoQW5pbSAhPSAiIikgYW5pbS5TZXRUcmlnZ2VyKG1fZGF0YS5vblJlZnJlc2hBbmltKTsKCQkJfTsKCQkJbV90aW1lci5iZWhhdmVBY3Rpb24gKz0gKCkgPT4gbV9kYXRhLkludGVyYWN0QmVoYXZlKGdhbWVPYmplY3QsIG1fY3VyRGVtYW5kSW5kZXgpOwoJCQltX3RpbWVyLnByb2Nlc3NBY3Rpb24gKz0gKG1heCwgcGFzc2VkKSA9PiB7IFZGWE1hbmFnZXIuUGxheVZGWChtX2RhdGEuYmVoYXZpbmdWRlgsIHRyYW5zZm9ybS5wb3NpdGlvbik7IH07CgkJCWlmIChtX2RhdGEuYXV0b0Rlc3Ryb3kpIG1fdGltZXIuZW5kQWN0aW9uICs9ICgpID0+IERlc3Ryb3koZ2FtZU9iamVjdCk7CgkJCW1fdGltZXIuZW5hYmxlZCA9IGZhbHNlOwoJCX0KCX0KCgl2b2lkIEFjdGl2ZUludGVyYWN0KCkKCXsKCQl2YXIgSW50ZXJhY3RIYW5kbGUgPSBHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk7CgkJaWYgKEludGVyYWN0SGFuZGxlKQoJCXsKCQkJSW50ZXJhY3RIYW5kbGUuU2V0SGFuZGxlKHRydWUpOwoJCQlJbnRlcmFjdEhhbmRsZS5FbnRlckV2ZW50LkFkZExpc3RlbmVyKCgpID0+IHsgaWYgKCFtX3RpbWVyLmVuYWJsZWQpIG1fdGltZXIuZW5hYmxlZCA9IHRydWU7IH0pOwoJCX0KCgkJbV9kZW1hbmRzID0gbmV3IExpc3Q8SW52ZW50b3J5U3lzdGVtLkl0ZW1EZW1hbmQ+KCk7CgkJZm9yZWFjaCAodmFyIGRhdGEgaW4gbV9kYXRhLmRlbWFuZHMuVmFsdWUpCgkJewoJCQltX2RlbWFuZHMuQWRkKGRhdGEuQ3JlYXRJdGVtRGVtYW5kKCkpOwoJCX0KCQlpZiAobV9kZW1hbmRzLkNvdW50ID4gMCkKCQl7CgkJCW1fY3VyRGVtYW5kSW5kZXggPSAwOwoJCQlkZW1hbmRFdmVudD8uSW52b2tlKG1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XSwgIkFjdGl2ZSIpOwoJCX0KCX0KCglwdWJsaWMgYm9vbCBDYW5JbnRlcmFjdChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQlyZXR1cm4gIW1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XS5Db21wbGV0ZWQgJiYgdGFyZ2V0LkNhbkludGVyYWN0KHRoaXMpICYmIG1fc3VibWl0dGVyID09IG51bGw7Cgl9CgoJcHVibGljIHZvaWQgSW50ZXJhY3RXaXRoKElJbnRlcmFjdGFibGUgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgaXMgQ2hhcmFjdGVyICYmIG1fc3VibWl0dGVyID09IG51bGwpCgkJewoJCQl0YXJnZXQuQ3VycmVudEludGVyYWN0b3IgPSBudWxsOwoJCQl2YXIgY2hhcmFjdGVyID0gdGFyZ2V0IGFzIENoYXJhY3RlcjsKCQkJdmFyIHN1Ym1pdGFibGUgPSBtX2RlbWFuZHNbbV9jdXJEZW1hbmRJbmRleF0uU3VibWl0dGFibGUoY2hhcmFjdGVyLkludmVudG9yeSk7CgkJCWlmIChzdWJtaXRhYmxlLlZhbHVlcy5TdW0oKSA+IDApCgkJCXsKCQkJCW1fc3VibWl0dGVyID0gY2hhcmFjdGVyOwoJCQkJaWYgKGNoYXJhY3RlciA9PSBHYW1lTWFuYWdlci5DdXJIZXJvICYmIG1fZGF0YS5UeXBlID09IEludGVyYWN0RGF0YS5JbnRlcmFjdFR5cGUuRGV2aWNlRml4ZXIgfHwgbV9kYXRhLlR5cGUgPT0gSW50ZXJhY3REYXRhLkludGVyYWN0VHlwZS5EZXZpY2VDcmVhdGVyKQoJCQkJewoJCQkJCVVJSW50ZXJhY3RXaW5kb3cgd2luID0gR2FtZU1hbmFnZXIuR2FtZVVJLkdldFdpbmRvdzxVSUludGVyYWN0V2luZG93Pih0cnVlLCB3ID0+IHcuSW5pdCh0aGlzLCBtX2RlbWFuZHMpKTsKCQkJCQlHZXRDb21wb25lbnQ8SW50ZXJhY3RIYW5kbGU+KCk/LkV4aXRFdmVudC5BZGRMaXN0ZW5lcigoKSA9PiB3aW4uQ2xvc2UoKSk7CgkJCQkJd2luLmJ0X0NvbmZpcm0ub25DbGljay5BZGRMaXN0ZW5lcigoKSA9PiBPbkNsaWNrX0ludGVyYWN0KHdpbikpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCWNoYXJhY3Rlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiArPSBPbkl0ZW1FdmVudDsKCQkJCQltX2RlbWFuZHNbbV9jdXJEZW1hbmRJbmRleF0uRnVsZmlsbChjaGFyYWN0ZXIuSW52ZW50b3J5KTsKCQkJCX0KCQkJCWRlbWFuZEV2ZW50ICs9IE9uRGVtYW5kRXZlbnQ7CgkJCX0KCQkJZWxzZSBkZW1hbmRFdmVudD8uSW52b2tlKG1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XSwgIkZhaWwiKTsKCQl9Cgl9CgoJdm9pZCBPbkRlbWFuZEV2ZW50KEludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIGRlbWFuZCwgc3RyaW5nIGV2ZW50TmFtZSkKCXsKCQlpZiAoZXZlbnROYW1lID09ICJGdWxmaWxsIiAmJiBkZW1hbmQuQ29tcGxldGVkKQoJCXsKCQkJZGVtYW5kRXZlbnQ/Lkludm9rZShkZW1hbmQsICJDb21wbGV0ZSIpOwoJCQlpZiAobV90aW1lcikgbV90aW1lci5TdGFydFRpbWVyKCk7CgkJCWVsc2UgbV9kYXRhLkludGVyYWN0QmVoYXZlKGdhbWVPYmplY3QsIG1fY3VyRGVtYW5kSW5kZXgpOwoJCQltX3N1Ym1pdHRlcj8uR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5Db3VudChFdmVudFNlbmRlci5FdmVudFR5cGUuRGVtYW5kQ29tcGxldGUsIG1fZGF0YS5LZXkpOwoJCX0KCQltX3N1Ym1pdHRlciA9IG51bGw7CgkJZGVtYW5kRXZlbnQgLT0gT25EZW1hbmRFdmVudDsKCX0KCglwdWJsaWMgdm9pZCBPbkNsaWNrX0ludGVyYWN0KFVJSW50ZXJhY3RXaW5kb3cgd2luKQoJewoJCUdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5Lkl0ZW1BY3Rpb24gKz0gT25JdGVtRXZlbnQ7CgkJbV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLkZ1bGZpbGwoR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkpOwoJCW1fY3VyRGVtYW5kSW5kZXggPSB3aW4uU2VsZWN0ZWRJbmRleDsKCQl3aW4uQ2xvc2UoKTsKCX0KCgl2b2lkIE9uSXRlbUV2ZW50KEl0ZW0gaXRlbSwgc3RyaW5nIGFjdGlvbk5hbWUsIGludCBpdGVtQ291bnQpCgl7CgkJaWYgKGFjdGlvbk5hbWUgPT0gIkZ1bGZpbGwiICYmIG1fc3VibWl0dGVyICE9IG51bGwpCgkJewoJCQltX3N1Ym1pdHRlci5JbnZlbnRvcnkuSXRlbUFjdGlvbiAtPSBPbkl0ZW1FdmVudDsKCQkJUmVzQ29sbGVjdG9yIGNvbGxlY3RvciA9IG1fc3VibWl0dGVyLkdldENvbXBvbmVudDxSZXNDb2xsZWN0b3I+KCk7CgkJCWlmIChjb2xsZWN0b3IpCgkJCXsKCQkJCUhlbHBlcnMuTG9nKHRoaXMsICJGdWxmaWxsIiwgJCJ7aXRlbS5JdGVtTmFtZX14e2l0ZW1Db3VudH0iKTsKCQkJCVN0YXJ0Q29yb3V0aW5lKFVwZGF0ZURlbWFuZChpdGVtLCBpdGVtQ291bnQpKTsKCgkJCX0KCQkJZWxzZSBkZW1hbmRFdmVudD8uSW52b2tlKG1fZGVtYW5kc1ttX2N1ckRlbWFuZEluZGV4XSwgIkZ1bGZpbGwiKTsKCQl9Cgl9CgoJSUVudW1lcmF0b3IgVXBkYXRlRGVtYW5kKEl0ZW0gaXRlbSwgaW50IGl0ZW1Db3VudCkKCXsKCQl2YXIgcmVzT2JqcyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBpdGVtQ291bnQ7IGkrKykKCQl7CgkJCUdhbWVPYmplY3QgcmVzT2JqID0gSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgdHJhbnNmb3JtKTsKCQkJcmVzT2Jqcy5BZGQocmVzT2JqKTsKCQkJcmVzT2JqLnRyYW5zZm9ybS5ET01vdmUobV9zdWJtaXR0ZXIudHJhbnNmb3JtLnBvc2l0aW9uICsgbmV3IFZlY3RvcjMoMCwgMiwgMCksIDEpLkZyb20oKTsKCQl9CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcygxLjBmKTsKCQlmb3JlYWNoICh2YXIgb2JqIGluIHJlc09ianMpCgkJewoJCQlEZXN0cm95KG9iaik7CgkJfQoJCWRlbWFuZEV2ZW50Py5JbnZva2UobV9kZW1hbmRzW21fY3VyRGVtYW5kSW5kZXhdLCAiRnVsZmlsbCIpOwoJfQp9CgAAAAAAAAAAzRIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.Events;\n\n[RequireComponent(typeof(Collider))]\npublic class InteractOnTrigger : MonoBehaviour\n{\n\tpublic LayerMask layers;\n\tpublic float Radius\n\t{\n\t\tget\n\t\t{\n\t\t\tif (m_capCollider) return m_capCollider.radius;\n\t\t\telse return m_boxCollier.size.y;\n\t\t}\n\t\tset\n\t\t{\n\t\t\tif (m_capCollider) m_capCollider.radius = value;\n\t\t\telse m_boxCollier.size = new Vector3(value, value, value);\n\t\t}\n\t}\n\tpublic UnityEvent<GameObject> OnEnter, OnExit;\n\tpublic UnityEvent<GameObject, float> OnStay;\n\tpublic UnityEvent<GameObject, string> OnEvent;\n\n\tpublic List<GameObject> Inners { get { return interObjects; } }\n\tpublic GameObject lastInner { get; private set; }\n\tpublic GameObject lastExiter { get; private set; }\n\tpublic GameObject curStayer { get; private set; }\n\tpublic bool once;\n\n\tList<GameObject> interObjects;\n\tCapsuleCollider m_capCollider;\n\tBoxCollider m_boxCollier;\n\tfloat m_stayDuring;\n\n\tvoid Start()\n\t{\n\t\tm_capCollider = GetComponent<CapsuleCollider>();\n\t\tm_boxCollier = GetComponent<BoxCollider>();\n\t\tif (m_capCollider) m_capCollider.isTrigger = true;\n\t\tif (m_boxCollier) m_boxCollier.isTrigger = true;\n\t\tinterObjects = new List<GameObject>();\n\t}\n\n\tvoid OnTriggerEnter(Collider other)\n\t{\n\t\tif (other.gameObject == gameObject) return;\n\n\t\tif (0 != (layers.value & 1 << other.gameObject.layer))\n\t\t{\n\t\t\tExecuteOnEnter(other.gameObject);\n\t\t}\n\t}\n\n\tprotected virtual void ExecuteOnEnter(GameObject enter)\n\t{\n\t\tOnEnter?.Invoke(enter);\n\t\tlastInner = enter;\n\t\tif (!interObjects.Contains(lastInner))\n\t\t{\n\t\t\tinterObjects.Add(lastInner);\n\t\t\tvar character = enter.GetComponent<Character>();\n\t\t\tif (character) character.DeathEvent.AddListener((c) => { RemoveTarget(c.gameObject); });\n\t\t\tlastInner.GetComponent<EventSender>()?.events.AddListener(OnInterEvent);\n\t\t}\n\t\tif (once) GetComponent<Collider>().enabled = false;\n\t}\n\n\tvoid OnTriggerExit(Collider other)\n\t{\n\t\tif (interObjects.Contains(other.gameObject))\n\t\t{\n\t\t\tlastExiter = other.gameObject;\n\t\t\tExecuteOnExit(lastExiter);\n\t\t}\n\t}\n\n\tprotected virtual void ExecuteOnExit(GameObject exiter)\n\t{\n\t\tOnExit?.Invoke(exiter);\n\t\tinterObjects.Remove(exiter);\n\t\tif (exiter == lastInner)\n\t\t{\n\t\t\tlastInner = interObjects.Count > 0 ? interObjects[interObjects.Count - 1] : null;\n\t\t}\n\t\tif (exiter == curStayer)\n\t\t{\n\t\t\tcurStayer = null;\n\t\t\tm_stayDuring = 0;\n\t\t}\n\t\texiter.GetComponent<EventSender>()?.events.RemoveListener(OnInterEvent);\n\t}\n\n\tvoid OnTriggerStay(Collider other)\n\t{\n\t\tif (other.gameObject == gameObject || 0 == (layers.value & 1 << other.gameObject.layer)) return;\n\n\t\tif (!interObjects.Contains(other.gameObject))\n\t\t{\n\t\t\tOnTriggerEnter(other);\n\t\t\treturn;\n\t\t}\n\t\tif (other.gameObject == curStayer)\n\t\t{\n\t\t\tm_stayDuring += Time.deltaTime;\n\t\t\tOnStay?.Invoke(curStayer, m_stayDuring);\n\t\t}\n\t\telse if (curStayer == null) curStayer = other.gameObject;\n\t}\n\n\tpublic GameObject GetNearest()\n\t{\n\t\tif (interObjects.Count == 0) return null;\n\n\t\tGameObject nearest = interObjects[0];\n\t\tif (nearest == null) return null;\n\t\tfloat nearestDistance = Vector3.Distance(transform.position, nearest.transform.position);\n\n\t\tfor (int i = 1; i < interObjects.Count; i++)\n\t\t{\n\t\t\tfloat distance = Vector3.Distance(transform.position, interObjects[i].transform.position);\n\n\t\t\tif (distance < nearestDistance)\n\t\t\t{\n\t\t\t\tnearest = interObjects[i];\n\t\t\t\tnearestDistance = distance;\n\t\t\t}\n\t\t}\n\t\treturn nearest;\n\t}\n\n\tvoid OnInterEvent(GameObject sender, string eventMessage)\n\t{\n\t\tOnEvent?.Invoke(sender, eventMessage);\n\t}\n\n\tpublic void RemoveTarget(GameObject obj)\n\t{\n\t\tif (interObjects.Contains(obj))\n\t\t{\n\t\t\tExecuteOnExit(obj);\n\t\t}\n\n\t}\n}\n\n",
			"file": "Assets/Standard Assets/Scripts/InteractOnTrigger.cs",
			"file_size": 3770,
			"file_write_time": 133556652133372943,
			"settings":
			{
				"buffer_size": 3619,
				"line_ending": "Windows",
				"scratch": true
			},
			"undo_stack":
			[
				[
					1,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": false,
						"stamp": "1708070239.366291"
					},
					"AQAAAAAAAAAAAAAAew0AAAAAAAB7DQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlsYXN0SW5uZXIgPSBlbnRlcjsKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhsYXN0SW5uZXIpKQoJCXsKCQkJaW50ZXJPYmplY3RzLkFkZChsYXN0SW5uZXIpOwoJCQlsYXN0SW5uZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuQWRkTGlzdGVuZXIoT25JbnRlckV2ZW50KTsKCQl9CgkJT25FbnRlcj8uSW52b2tlKGVudGVyKTsKCQlpZiAob25jZSkgR2V0Q29tcG9uZW50PENvbGxpZGVyPigpLmVuYWJsZWQgPSBmYWxzZTsKCX0KCgl2b2lkIE9uVHJpZ2dlckV4aXQoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCWxhc3RFeGl0ZXIgPSBvdGhlci5nYW1lT2JqZWN0OwoJCQlFeGVjdXRlT25FeGl0KGxhc3RFeGl0ZXIpOwoJCX0KCX0KCglwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIEV4ZWN1dGVPbkV4aXQoR2FtZU9iamVjdCBleGl0ZXIpCgl7CgkJaW50ZXJPYmplY3RzLlJlbW92ZShleGl0ZXIpOwoJCWlmIChleGl0ZXIgPT0gbGFzdElubmVyKQoJCXsKCQkJbGFzdElubmVyID0gaW50ZXJPYmplY3RzLkNvdW50ID4gMCA/IGludGVyT2JqZWN0c1tpbnRlck9iamVjdHMuQ291bnQgLSAxXSA6IG51bGw7CgkJfQoJCWlmIChleGl0ZXIgPT0gY3VyU3RheWVyKQoJCXsKCQkJY3VyU3RheWVyID0gbnVsbDsKCQkJbV9zdGF5RHVyaW5nID0gMDsKCQl9CgkJZXhpdGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLlJlbW92ZUxpc3RlbmVyKE9uSW50ZXJFdmVudCk7CgkJT25FeGl0Py5JbnZva2UoZXhpdGVyKTsKCX0KCgl2b2lkIE9uVHJpZ2dlclN0YXkoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKG90aGVyLmdhbWVPYmplY3QgPT0gZ2FtZU9iamVjdCkgcmV0dXJuOwoKCQlpZiAoMCAhPSAobGF5ZXJzLnZhbHVlICYgMSA8PCBvdGhlci5nYW1lT2JqZWN0LmxheWVyKSAmJiAhaW50ZXJPYmplY3RzLkNvbnRhaW5zKG90aGVyLmdhbWVPYmplY3QpKQoJCXsKCQkJT25UcmlnZ2VyRW50ZXIob3RoZXIpOwoJCQlyZXR1cm47CgkJfQoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGN1clN0YXllcikKCQl7CgkJCW1fc3RheUR1cmluZyArPSBUaW1lLmRlbHRhVGltZTsKCQkJT25TdGF5Py5JbnZva2UoY3VyU3RheWVyLCBtX3N0YXlEdXJpbmcpOwoJCX0KCQllbHNlIGlmIChjdXJTdGF5ZXIgPT0gbnVsbCkgY3VyU3RheWVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCX0KCglwdWJsaWMgR2FtZU9iamVjdCBHZXROZWFyZXN0KCkKCXsKCQlpZiAoaW50ZXJPYmplY3RzLkNvdW50ID09IDApIHJldHVybiBudWxsOwoKCQlHYW1lT2JqZWN0IG5lYXJlc3QgPSBpbnRlck9iamVjdHNbMF07CgkJZmxvYXQgbmVhcmVzdERpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIG5lYXJlc3QudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJZm9yIChpbnQgaSA9IDE7IGkgPCBpbnRlck9iamVjdHMuQ291bnQ7IGkrKykKCQl7CgkJCWZsb2F0IGRpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIGludGVyT2JqZWN0c1tpXS50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJaWYgKGRpc3RhbmNlIDwgbmVhcmVzdERpc3RhbmNlKQoJCQl7CgkJCQluZWFyZXN0ID0gaW50ZXJPYmplY3RzW2ldOwoJCQkJbmVhcmVzdERpc3RhbmNlID0gZGlzdGFuY2U7CgkJCX0KCQl9CgkJcmV0dXJuIG5lYXJlc3Q7Cgl9CgoJdm9pZCBPbkludGVyRXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJT25FdmVudD8uSW52b2tlKHNlbmRlciwgZXZlbnRNZXNzYWdlKTsKCQlpZiAoZXZlbnRNZXNzYWdlID09ICJyb2xlRXZlbnRfT25TdGF0ZV9ERUFEIiAmJiBpbnRlck9iamVjdHMuQ29udGFpbnMoc2VuZGVyKSkKCQl7CgkJCUV4ZWN1dGVPbkV4aXQoc2VuZGVyKTsKCQl9Cgl9Cn0KCg",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB7DQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlsYXN0SW5uZXIgPSBlbnRlcjsKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhsYXN0SW5uZXIpKQoJCXsKCQkJaW50ZXJPYmplY3RzLkFkZChsYXN0SW5uZXIpOwoJCQlsYXN0SW5uZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuQWRkTGlzdGVuZXIoT25JbnRlckV2ZW50KTsKCQl9CgkJT25FbnRlcj8uSW52b2tlKGVudGVyKTsKCQlpZiAob25jZSkgR2V0Q29tcG9uZW50PENvbGxpZGVyPigpLmVuYWJsZWQgPSBmYWxzZTsKCX0KCgl2b2lkIE9uVHJpZ2dlckV4aXQoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCWxhc3RFeGl0ZXIgPSBvdGhlci5nYW1lT2JqZWN0OwoJCQlFeGVjdXRlT25FeGl0KGxhc3RFeGl0ZXIpOwoJCX0KCX0KCglwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIEV4ZWN1dGVPbkV4aXQoR2FtZU9iamVjdCBleGl0ZXIpCgl7CgkJaW50ZXJPYmplY3RzLlJlbW92ZShleGl0ZXIpOwoJCWlmIChleGl0ZXIgPT0gbGFzdElubmVyKQoJCXsKCQkJbGFzdElubmVyID0gaW50ZXJPYmplY3RzLkNvdW50ID4gMCA/IGludGVyT2JqZWN0c1tpbnRlck9iamVjdHMuQ291bnQgLSAxXSA6IG51bGw7CgkJfQoJCWlmIChleGl0ZXIgPT0gY3VyU3RheWVyKQoJCXsKCQkJY3VyU3RheWVyID0gbnVsbDsKCQkJbV9zdGF5RHVyaW5nID0gMDsKCQl9CgkJZXhpdGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLlJlbW92ZUxpc3RlbmVyKE9uSW50ZXJFdmVudCk7CgkJT25FeGl0Py5JbnZva2UoZXhpdGVyKTsKCX0KCgl2b2lkIE9uVHJpZ2dlclN0YXkoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKG90aGVyLmdhbWVPYmplY3QgPT0gZ2FtZU9iamVjdCkgcmV0dXJuOwoKCQlpZiAoMCAhPSAobGF5ZXJzLnZhbHVlICYgMSA8PCBvdGhlci5nYW1lT2JqZWN0LmxheWVyKSAmJiAhaW50ZXJPYmplY3RzLkNvbnRhaW5zKG90aGVyLmdhbWVPYmplY3QpKQoJCXsKCQkJT25UcmlnZ2VyRW50ZXIob3RoZXIpOwoJCQlyZXR1cm47CgkJfQoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGN1clN0YXllcikKCQl7CgkJCW1fc3RheUR1cmluZyArPSBUaW1lLmRlbHRhVGltZTsKCQkJT25TdGF5Py5JbnZva2UoY3VyU3RheWVyLCBtX3N0YXlEdXJpbmcpOwoJCX0KCQllbHNlIGlmIChjdXJTdGF5ZXIgPT0gbnVsbCkgY3VyU3RheWVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCX0KCglwdWJsaWMgR2FtZU9iamVjdCBHZXROZWFyZXN0KCkKCXsKCQlpZiAoaW50ZXJPYmplY3RzLkNvdW50ID09IDApIHJldHVybiBudWxsOwoKCQlHYW1lT2JqZWN0IG5lYXJlc3QgPSBpbnRlck9iamVjdHNbMF07CgkJZmxvYXQgbmVhcmVzdERpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIG5lYXJlc3QudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJZm9yIChpbnQgaSA9IDE7IGkgPCBpbnRlck9iamVjdHMuQ291bnQ7IGkrKykKCQl7CgkJCWZsb2F0IGRpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIGludGVyT2JqZWN0c1tpXS50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJaWYgKGRpc3RhbmNlIDwgbmVhcmVzdERpc3RhbmNlKQoJCQl7CgkJCQluZWFyZXN0ID0gaW50ZXJPYmplY3RzW2ldOwoJCQkJbmVhcmVzdERpc3RhbmNlID0gZGlzdGFuY2U7CgkJCX0KCQl9CgkJcmV0dXJuIG5lYXJlc3Q7Cgl9CgoJdm9pZCBPbkludGVyRXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJT25FdmVudD8uSW52b2tlKHNlbmRlciwgZXZlbnRNZXNzYWdlKTsKCQlpZiAoZXZlbnRNZXNzYWdlID09ICJyb2xlRXZlbnRfT25TdGF0ZV9ERUFEIiAmJiBpbnRlck9iamVjdHMuQ29udGFpbnMoc2VuZGVyKSkKCQl7CgkJCUV4ZWN1dGVPbkV4aXQoc2VuZGVyKTsKCQl9Cgl9Cn0KCgAAAAAAAAAAzA0AAAAAAAAAAAAA",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					3,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1708077770.8903816"
					},
					"AQAAAAAAAAAAAAAAzA0AAAAAAADMDQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlsYXN0SW5uZXIgPSBlbnRlcjsKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhsYXN0SW5uZXIpKQoJCXsKCQkJaW50ZXJPYmplY3RzLkFkZChsYXN0SW5uZXIpOwoJCQlsYXN0SW5uZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuQWRkTGlzdGVuZXIoT25JbnRlckV2ZW50KTsKCQl9CgkJT25FbnRlcj8uSW52b2tlKGVudGVyKTsKCQlpZiAob25jZSkgR2V0Q29tcG9uZW50PENvbGxpZGVyPigpLmVuYWJsZWQgPSBmYWxzZTsKCX0KCgl2b2lkIE9uVHJpZ2dlckV4aXQoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCWxhc3RFeGl0ZXIgPSBvdGhlci5nYW1lT2JqZWN0OwoJCQlFeGVjdXRlT25FeGl0KGxhc3RFeGl0ZXIpOwoJCX0KCX0KCglwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIEV4ZWN1dGVPbkV4aXQoR2FtZU9iamVjdCBleGl0ZXIpCgl7CgkJaW50ZXJPYmplY3RzLlJlbW92ZShleGl0ZXIpOwoJCWlmIChleGl0ZXIgPT0gbGFzdElubmVyKQoJCXsKCQkJbGFzdElubmVyID0gaW50ZXJPYmplY3RzLkNvdW50ID4gMCA/IGludGVyT2JqZWN0c1tpbnRlck9iamVjdHMuQ291bnQgLSAxXSA6IG51bGw7CgkJfQoJCWlmIChleGl0ZXIgPT0gY3VyU3RheWVyKQoJCXsKCQkJY3VyU3RheWVyID0gbnVsbDsKCQkJbV9zdGF5RHVyaW5nID0gMDsKCQl9CgkJZXhpdGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLlJlbW92ZUxpc3RlbmVyKE9uSW50ZXJFdmVudCk7CgkJT25FeGl0Py5JbnZva2UoZXhpdGVyKTsKCX0KCgl2b2lkIE9uVHJpZ2dlclN0YXkoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKG90aGVyLmdhbWVPYmplY3QgPT0gZ2FtZU9iamVjdCkgcmV0dXJuOwoKCQlpZiAoMCAhPSAobGF5ZXJzLnZhbHVlICYgMSA8PCBvdGhlci5nYW1lT2JqZWN0LmxheWVyKSAmJiAhaW50ZXJPYmplY3RzLkNvbnRhaW5zKG90aGVyLmdhbWVPYmplY3QpKQoJCXsKCQkJT25UcmlnZ2VyRW50ZXIob3RoZXIpOwoJCQlyZXR1cm47CgkJfQoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGN1clN0YXllcikKCQl7CgkJCW1fc3RheUR1cmluZyArPSBUaW1lLmRlbHRhVGltZTsKCQkJT25TdGF5Py5JbnZva2UoY3VyU3RheWVyLCBtX3N0YXlEdXJpbmcpOwoJCX0KCQllbHNlIGlmIChjdXJTdGF5ZXIgPT0gbnVsbCkgY3VyU3RheWVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCX0KCglwdWJsaWMgR2FtZU9iamVjdCBHZXROZWFyZXN0KCkKCXsKCQlpZiAoaW50ZXJPYmplY3RzLkNvdW50ID09IDApIHJldHVybiBudWxsOwoKCQlHYW1lT2JqZWN0IG5lYXJlc3QgPSBpbnRlck9iamVjdHNbMF07CgkJZmxvYXQgbmVhcmVzdERpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIG5lYXJlc3QudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJZm9yIChpbnQgaSA9IDE7IGkgPCBpbnRlck9iamVjdHMuQ291bnQ7IGkrKykKCQl7CgkJCWZsb2F0IGRpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIGludGVyT2JqZWN0c1tpXS50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJaWYgKGRpc3RhbmNlIDwgbmVhcmVzdERpc3RhbmNlKQoJCQl7CgkJCQluZWFyZXN0ID0gaW50ZXJPYmplY3RzW2ldOwoJCQkJbmVhcmVzdERpc3RhbmNlID0gZGlzdGFuY2U7CgkJCX0KCQl9CgkJcmV0dXJuIG5lYXJlc3Q7Cgl9CgoJdm9pZCBPbkludGVyRXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJT25FdmVudD8uSW52b2tlKHNlbmRlciwgZXZlbnRNZXNzYWdlKTsKCQlpZiAoZXZlbnRNZXNzYWdlID09ICJyb2xlRXZlbnRfT25TdGF0ZV9ERUFEIikKCQl7CgkJCVJlbW92ZVRhcmdldChzZW5kZXIpOwoJCX0KCX0KCglwdWJsaWMgdm9pZCBSZW1vdmVUYXJnZXQoR2FtZU9iamVjdCBvYmopCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvYmopKQoJCXsKCQkJRXhlY3V0ZU9uRXhpdChvYmopOwoJCX0KCgl9Cn0KCg",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADMDQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlsYXN0SW5uZXIgPSBlbnRlcjsKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhsYXN0SW5uZXIpKQoJCXsKCQkJaW50ZXJPYmplY3RzLkFkZChsYXN0SW5uZXIpOwoJCQlsYXN0SW5uZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuQWRkTGlzdGVuZXIoT25JbnRlckV2ZW50KTsKCQl9CgkJT25FbnRlcj8uSW52b2tlKGVudGVyKTsKCQlpZiAob25jZSkgR2V0Q29tcG9uZW50PENvbGxpZGVyPigpLmVuYWJsZWQgPSBmYWxzZTsKCX0KCgl2b2lkIE9uVHJpZ2dlckV4aXQoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCWxhc3RFeGl0ZXIgPSBvdGhlci5nYW1lT2JqZWN0OwoJCQlFeGVjdXRlT25FeGl0KGxhc3RFeGl0ZXIpOwoJCX0KCX0KCglwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIEV4ZWN1dGVPbkV4aXQoR2FtZU9iamVjdCBleGl0ZXIpCgl7CgkJaW50ZXJPYmplY3RzLlJlbW92ZShleGl0ZXIpOwoJCWlmIChleGl0ZXIgPT0gbGFzdElubmVyKQoJCXsKCQkJbGFzdElubmVyID0gaW50ZXJPYmplY3RzLkNvdW50ID4gMCA/IGludGVyT2JqZWN0c1tpbnRlck9iamVjdHMuQ291bnQgLSAxXSA6IG51bGw7CgkJfQoJCWlmIChleGl0ZXIgPT0gY3VyU3RheWVyKQoJCXsKCQkJY3VyU3RheWVyID0gbnVsbDsKCQkJbV9zdGF5RHVyaW5nID0gMDsKCQl9CgkJZXhpdGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLlJlbW92ZUxpc3RlbmVyKE9uSW50ZXJFdmVudCk7CgkJT25FeGl0Py5JbnZva2UoZXhpdGVyKTsKCX0KCgl2b2lkIE9uVHJpZ2dlclN0YXkoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKG90aGVyLmdhbWVPYmplY3QgPT0gZ2FtZU9iamVjdCkgcmV0dXJuOwoKCQlpZiAoMCAhPSAobGF5ZXJzLnZhbHVlICYgMSA8PCBvdGhlci5nYW1lT2JqZWN0LmxheWVyKSAmJiAhaW50ZXJPYmplY3RzLkNvbnRhaW5zKG90aGVyLmdhbWVPYmplY3QpKQoJCXsKCQkJT25UcmlnZ2VyRW50ZXIob3RoZXIpOwoJCQlyZXR1cm47CgkJfQoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGN1clN0YXllcikKCQl7CgkJCW1fc3RheUR1cmluZyArPSBUaW1lLmRlbHRhVGltZTsKCQkJT25TdGF5Py5JbnZva2UoY3VyU3RheWVyLCBtX3N0YXlEdXJpbmcpOwoJCX0KCQllbHNlIGlmIChjdXJTdGF5ZXIgPT0gbnVsbCkgY3VyU3RheWVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCX0KCglwdWJsaWMgR2FtZU9iamVjdCBHZXROZWFyZXN0KCkKCXsKCQlpZiAoaW50ZXJPYmplY3RzLkNvdW50ID09IDApIHJldHVybiBudWxsOwoKCQlHYW1lT2JqZWN0IG5lYXJlc3QgPSBpbnRlck9iamVjdHNbMF07CgkJZmxvYXQgbmVhcmVzdERpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIG5lYXJlc3QudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJZm9yIChpbnQgaSA9IDE7IGkgPCBpbnRlck9iamVjdHMuQ291bnQ7IGkrKykKCQl7CgkJCWZsb2F0IGRpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIGludGVyT2JqZWN0c1tpXS50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJaWYgKGRpc3RhbmNlIDwgbmVhcmVzdERpc3RhbmNlKQoJCQl7CgkJCQluZWFyZXN0ID0gaW50ZXJPYmplY3RzW2ldOwoJCQkJbmVhcmVzdERpc3RhbmNlID0gZGlzdGFuY2U7CgkJCX0KCQl9CgkJcmV0dXJuIG5lYXJlc3Q7Cgl9CgoJdm9pZCBPbkludGVyRXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJT25FdmVudD8uSW52b2tlKHNlbmRlciwgZXZlbnRNZXNzYWdlKTsKCQlpZiAoZXZlbnRNZXNzYWdlID09ICJyb2xlRXZlbnRfT25TdGF0ZV9ERUFEIikKCQl7CgkJCVJlbW92ZVRhcmdldChzZW5kZXIpOwoJCX0KCX0KCglwdWJsaWMgdm9pZCBSZW1vdmVUYXJnZXQoR2FtZU9iamVjdCBvYmopCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvYmopKQoJCXsKCQkJRXhlY3V0ZU9uRXhpdChvYmopOwoJCX0KCgl9Cn0KCgAAAAAAAAAAzA0AAAAAAAAAAAAA",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1708312210.8303108"
					},
					"AQAAAAAAAAAAAAAAzA0AAAAAAADMDQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlsYXN0SW5uZXIgPSBlbnRlcjsKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhsYXN0SW5uZXIpKQoJCXsKCQkJaW50ZXJPYmplY3RzLkFkZChsYXN0SW5uZXIpOwoJCQlsYXN0SW5uZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuQWRkTGlzdGVuZXIoT25JbnRlckV2ZW50KTsKCQl9CgkJT25FbnRlcj8uSW52b2tlKGVudGVyKTsKCQlpZiAob25jZSkgR2V0Q29tcG9uZW50PENvbGxpZGVyPigpLmVuYWJsZWQgPSBmYWxzZTsKCX0KCgl2b2lkIE9uVHJpZ2dlckV4aXQoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCWxhc3RFeGl0ZXIgPSBvdGhlci5nYW1lT2JqZWN0OwoJCQlFeGVjdXRlT25FeGl0KGxhc3RFeGl0ZXIpOwoJCX0KCX0KCglwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIEV4ZWN1dGVPbkV4aXQoR2FtZU9iamVjdCBleGl0ZXIpCgl7CgkJaW50ZXJPYmplY3RzLlJlbW92ZShleGl0ZXIpOwoJCWlmIChleGl0ZXIgPT0gbGFzdElubmVyKQoJCXsKCQkJbGFzdElubmVyID0gaW50ZXJPYmplY3RzLkNvdW50ID4gMCA/IGludGVyT2JqZWN0c1tpbnRlck9iamVjdHMuQ291bnQgLSAxXSA6IG51bGw7CgkJfQoJCWlmIChleGl0ZXIgPT0gY3VyU3RheWVyKQoJCXsKCQkJY3VyU3RheWVyID0gbnVsbDsKCQkJbV9zdGF5RHVyaW5nID0gMDsKCQl9CgkJZXhpdGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLlJlbW92ZUxpc3RlbmVyKE9uSW50ZXJFdmVudCk7CgkJT25FeGl0Py5JbnZva2UoZXhpdGVyKTsKCX0KCgl2b2lkIE9uVHJpZ2dlclN0YXkoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKG90aGVyLmdhbWVPYmplY3QgPT0gZ2FtZU9iamVjdCB8fCAwID09IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKSByZXR1cm47CgoJCWlmICghaW50ZXJPYmplY3RzLkNvbnRhaW5zKG90aGVyLmdhbWVPYmplY3QpKQoJCXsKCQkJT25UcmlnZ2VyRW50ZXIob3RoZXIpOwoJCQlyZXR1cm47CgkJfQoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGN1clN0YXllcikKCQl7CgkJCW1fc3RheUR1cmluZyArPSBUaW1lLmRlbHRhVGltZTsKCQkJT25TdGF5Py5JbnZva2UoY3VyU3RheWVyLCBtX3N0YXlEdXJpbmcpOwoJCX0KCQllbHNlIGlmIChjdXJTdGF5ZXIgPT0gbnVsbCkgY3VyU3RheWVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCX0KCglwdWJsaWMgR2FtZU9iamVjdCBHZXROZWFyZXN0KCkKCXsKCQlpZiAoaW50ZXJPYmplY3RzLkNvdW50ID09IDApIHJldHVybiBudWxsOwoKCQlHYW1lT2JqZWN0IG5lYXJlc3QgPSBpbnRlck9iamVjdHNbMF07CgkJZmxvYXQgbmVhcmVzdERpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIG5lYXJlc3QudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJZm9yIChpbnQgaSA9IDE7IGkgPCBpbnRlck9iamVjdHMuQ291bnQ7IGkrKykKCQl7CgkJCWZsb2F0IGRpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIGludGVyT2JqZWN0c1tpXS50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJaWYgKGRpc3RhbmNlIDwgbmVhcmVzdERpc3RhbmNlKQoJCQl7CgkJCQluZWFyZXN0ID0gaW50ZXJPYmplY3RzW2ldOwoJCQkJbmVhcmVzdERpc3RhbmNlID0gZGlzdGFuY2U7CgkJCX0KCQl9CgkJcmV0dXJuIG5lYXJlc3Q7Cgl9CgoJdm9pZCBPbkludGVyRXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJT25FdmVudD8uSW52b2tlKHNlbmRlciwgZXZlbnRNZXNzYWdlKTsKCQlpZiAoZXZlbnRNZXNzYWdlID09ICJyb2xlRXZlbnRfT25TdGF0ZV9ERUFEIikKCQl7CgkJCVJlbW92ZVRhcmdldChzZW5kZXIpOwoJCX0KCX0KCglwdWJsaWMgdm9pZCBSZW1vdmVUYXJnZXQoR2FtZU9iamVjdCBvYmopCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvYmopKQoJCXsKCQkJRXhlY3V0ZU9uRXhpdChvYmopOwoJCX0KCgl9Cn0KCg",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADMDQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlsYXN0SW5uZXIgPSBlbnRlcjsKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhsYXN0SW5uZXIpKQoJCXsKCQkJaW50ZXJPYmplY3RzLkFkZChsYXN0SW5uZXIpOwoJCQlsYXN0SW5uZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuQWRkTGlzdGVuZXIoT25JbnRlckV2ZW50KTsKCQl9CgkJT25FbnRlcj8uSW52b2tlKGVudGVyKTsKCQlpZiAob25jZSkgR2V0Q29tcG9uZW50PENvbGxpZGVyPigpLmVuYWJsZWQgPSBmYWxzZTsKCX0KCgl2b2lkIE9uVHJpZ2dlckV4aXQoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCWxhc3RFeGl0ZXIgPSBvdGhlci5nYW1lT2JqZWN0OwoJCQlFeGVjdXRlT25FeGl0KGxhc3RFeGl0ZXIpOwoJCX0KCX0KCglwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIEV4ZWN1dGVPbkV4aXQoR2FtZU9iamVjdCBleGl0ZXIpCgl7CgkJaW50ZXJPYmplY3RzLlJlbW92ZShleGl0ZXIpOwoJCWlmIChleGl0ZXIgPT0gbGFzdElubmVyKQoJCXsKCQkJbGFzdElubmVyID0gaW50ZXJPYmplY3RzLkNvdW50ID4gMCA/IGludGVyT2JqZWN0c1tpbnRlck9iamVjdHMuQ291bnQgLSAxXSA6IG51bGw7CgkJfQoJCWlmIChleGl0ZXIgPT0gY3VyU3RheWVyKQoJCXsKCQkJY3VyU3RheWVyID0gbnVsbDsKCQkJbV9zdGF5RHVyaW5nID0gMDsKCQl9CgkJZXhpdGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLlJlbW92ZUxpc3RlbmVyKE9uSW50ZXJFdmVudCk7CgkJT25FeGl0Py5JbnZva2UoZXhpdGVyKTsKCX0KCgl2b2lkIE9uVHJpZ2dlclN0YXkoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKG90aGVyLmdhbWVPYmplY3QgPT0gZ2FtZU9iamVjdCB8fCAwID09IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKSByZXR1cm47CgoJCWlmICghaW50ZXJPYmplY3RzLkNvbnRhaW5zKG90aGVyLmdhbWVPYmplY3QpKQoJCXsKCQkJT25UcmlnZ2VyRW50ZXIob3RoZXIpOwoJCQlyZXR1cm47CgkJfQoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGN1clN0YXllcikKCQl7CgkJCW1fc3RheUR1cmluZyArPSBUaW1lLmRlbHRhVGltZTsKCQkJT25TdGF5Py5JbnZva2UoY3VyU3RheWVyLCBtX3N0YXlEdXJpbmcpOwoJCX0KCQllbHNlIGlmIChjdXJTdGF5ZXIgPT0gbnVsbCkgY3VyU3RheWVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCX0KCglwdWJsaWMgR2FtZU9iamVjdCBHZXROZWFyZXN0KCkKCXsKCQlpZiAoaW50ZXJPYmplY3RzLkNvdW50ID09IDApIHJldHVybiBudWxsOwoKCQlHYW1lT2JqZWN0IG5lYXJlc3QgPSBpbnRlck9iamVjdHNbMF07CgkJZmxvYXQgbmVhcmVzdERpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIG5lYXJlc3QudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJZm9yIChpbnQgaSA9IDE7IGkgPCBpbnRlck9iamVjdHMuQ291bnQ7IGkrKykKCQl7CgkJCWZsb2F0IGRpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIGludGVyT2JqZWN0c1tpXS50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJaWYgKGRpc3RhbmNlIDwgbmVhcmVzdERpc3RhbmNlKQoJCQl7CgkJCQluZWFyZXN0ID0gaW50ZXJPYmplY3RzW2ldOwoJCQkJbmVhcmVzdERpc3RhbmNlID0gZGlzdGFuY2U7CgkJCX0KCQl9CgkJcmV0dXJuIG5lYXJlc3Q7Cgl9CgoJdm9pZCBPbkludGVyRXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJT25FdmVudD8uSW52b2tlKHNlbmRlciwgZXZlbnRNZXNzYWdlKTsKCQlpZiAoZXZlbnRNZXNzYWdlID09ICJyb2xlRXZlbnRfT25TdGF0ZV9ERUFEIikKCQl7CgkJCVJlbW92ZVRhcmdldChzZW5kZXIpOwoJCX0KCX0KCglwdWJsaWMgdm9pZCBSZW1vdmVUYXJnZXQoR2FtZU9iamVjdCBvYmopCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvYmopKQoJCXsKCQkJRXhlY3V0ZU9uRXhpdChvYmopOwoJCX0KCgl9Cn0KCgAAAAAAAAAADA4AAAAAAAAAAAAA",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1708771575.195827"
					},
					"AQAAAAAAAAAAAAAADA4AAAAAAAAMDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlsYXN0SW5uZXIgPSBlbnRlcjsKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhsYXN0SW5uZXIpKQoJCXsKCQkJaW50ZXJPYmplY3RzLkFkZChsYXN0SW5uZXIpOwoJCQl2YXIgY2hhcmFjdGVyID0gZW50ZXIuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCk7CgkJCWlmIChjaGFyYWN0ZXIpIGNoYXJhY3Rlci5PbkRlYXRoLkFkZExpc3RlbmVyKChjKSA9PiB7IFJlbW92ZVRhcmdldChjLmdhbWVPYmplY3QpOyB9KTsKCQkJbGFzdElubmVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLkFkZExpc3RlbmVyKE9uSW50ZXJFdmVudCk7CgkJfQoJCU9uRW50ZXI/Lkludm9rZShlbnRlcik7CgkJaWYgKG9uY2UpIEdldENvbXBvbmVudDxDb2xsaWRlcj4oKS5lbmFibGVkID0gZmFsc2U7Cgl9CgoJdm9pZCBPblRyaWdnZXJFeGl0KENvbGxpZGVyIG90aGVyKQoJewoJCWlmIChpbnRlck9iamVjdHMuQ29udGFpbnMob3RoZXIuZ2FtZU9iamVjdCkpCgkJewoJCQlsYXN0RXhpdGVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCQkJRXhlY3V0ZU9uRXhpdChsYXN0RXhpdGVyKTsKCQl9Cgl9CgoJcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBFeGVjdXRlT25FeGl0KEdhbWVPYmplY3QgZXhpdGVyKQoJewoJCWludGVyT2JqZWN0cy5SZW1vdmUoZXhpdGVyKTsKCQlpZiAoZXhpdGVyID09IGxhc3RJbm5lcikKCQl7CgkJCWxhc3RJbm5lciA9IGludGVyT2JqZWN0cy5Db3VudCA+IDAgPyBpbnRlck9iamVjdHNbaW50ZXJPYmplY3RzLkNvdW50IC0gMV0gOiBudWxsOwoJCX0KCQlpZiAoZXhpdGVyID09IGN1clN0YXllcikKCQl7CgkJCWN1clN0YXllciA9IG51bGw7CgkJCW1fc3RheUR1cmluZyA9IDA7CgkJfQoJCWV4aXRlci5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LmV2ZW50cy5SZW1vdmVMaXN0ZW5lcihPbkludGVyRXZlbnQpOwoJCU9uRXhpdD8uSW52b2tlKGV4aXRlcik7Cgl9CgoJdm9pZCBPblRyaWdnZXJTdGF5KENvbGxpZGVyIG90aGVyKQoJewoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGdhbWVPYmplY3QgfHwgMCA9PSAobGF5ZXJzLnZhbHVlICYgMSA8PCBvdGhlci5nYW1lT2JqZWN0LmxheWVyKSkgcmV0dXJuOwoKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCU9uVHJpZ2dlckVudGVyKG90aGVyKTsKCQkJcmV0dXJuOwoJCX0KCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBjdXJTdGF5ZXIpCgkJewoJCQltX3N0YXlEdXJpbmcgKz0gVGltZS5kZWx0YVRpbWU7CgkJCU9uU3RheT8uSW52b2tlKGN1clN0YXllciwgbV9zdGF5RHVyaW5nKTsKCQl9CgkJZWxzZSBpZiAoY3VyU3RheWVyID09IG51bGwpIGN1clN0YXllciA9IG90aGVyLmdhbWVPYmplY3Q7Cgl9CgoJcHVibGljIEdhbWVPYmplY3QgR2V0TmVhcmVzdCgpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db3VudCA9PSAwKSByZXR1cm4gbnVsbDsKCgkJR2FtZU9iamVjdCBuZWFyZXN0ID0gaW50ZXJPYmplY3RzWzBdOwoJCWZsb2F0IG5lYXJlc3REaXN0YW5jZSA9IFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCBuZWFyZXN0LnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJCWZvciAoaW50IGkgPSAxOyBpIDwgaW50ZXJPYmplY3RzLkNvdW50OyBpKyspCgkJewoJCQlmbG9hdCBkaXN0YW5jZSA9IFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCBpbnRlck9iamVjdHNbaV0udHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJCWlmIChkaXN0YW5jZSA8IG5lYXJlc3REaXN0YW5jZSkKCQkJewoJCQkJbmVhcmVzdCA9IGludGVyT2JqZWN0c1tpXTsKCQkJCW5lYXJlc3REaXN0YW5jZSA9IGRpc3RhbmNlOwoJCQl9CgkJfQoJCXJldHVybiBuZWFyZXN0OwoJfQoKCXZvaWQgT25JbnRlckV2ZW50KEdhbWVPYmplY3Qgc2VuZGVyLCBzdHJpbmcgZXZlbnRNZXNzYWdlKQoJewoJCU9uRXZlbnQ/Lkludm9rZShzZW5kZXIsIGV2ZW50TWVzc2FnZSk7Cgl9CgoJcHVibGljIHZvaWQgUmVtb3ZlVGFyZ2V0KEdhbWVPYmplY3Qgb2JqKQoJewoJCWlmIChpbnRlck9iamVjdHMuQ29udGFpbnMob2JqKSkKCQl7CgkJCUV4ZWN1dGVPbkV4aXQob2JqKTsKCQl9CgoJfQp9Cgo",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAMDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlsYXN0SW5uZXIgPSBlbnRlcjsKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhsYXN0SW5uZXIpKQoJCXsKCQkJaW50ZXJPYmplY3RzLkFkZChsYXN0SW5uZXIpOwoJCQl2YXIgY2hhcmFjdGVyID0gZW50ZXIuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCk7CgkJCWlmIChjaGFyYWN0ZXIpIGNoYXJhY3Rlci5PbkRlYXRoLkFkZExpc3RlbmVyKChjKSA9PiB7IFJlbW92ZVRhcmdldChjLmdhbWVPYmplY3QpOyB9KTsKCQkJbGFzdElubmVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLkFkZExpc3RlbmVyKE9uSW50ZXJFdmVudCk7CgkJfQoJCU9uRW50ZXI/Lkludm9rZShlbnRlcik7CgkJaWYgKG9uY2UpIEdldENvbXBvbmVudDxDb2xsaWRlcj4oKS5lbmFibGVkID0gZmFsc2U7Cgl9CgoJdm9pZCBPblRyaWdnZXJFeGl0KENvbGxpZGVyIG90aGVyKQoJewoJCWlmIChpbnRlck9iamVjdHMuQ29udGFpbnMob3RoZXIuZ2FtZU9iamVjdCkpCgkJewoJCQlsYXN0RXhpdGVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCQkJRXhlY3V0ZU9uRXhpdChsYXN0RXhpdGVyKTsKCQl9Cgl9CgoJcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBFeGVjdXRlT25FeGl0KEdhbWVPYmplY3QgZXhpdGVyKQoJewoJCWludGVyT2JqZWN0cy5SZW1vdmUoZXhpdGVyKTsKCQlpZiAoZXhpdGVyID09IGxhc3RJbm5lcikKCQl7CgkJCWxhc3RJbm5lciA9IGludGVyT2JqZWN0cy5Db3VudCA+IDAgPyBpbnRlck9iamVjdHNbaW50ZXJPYmplY3RzLkNvdW50IC0gMV0gOiBudWxsOwoJCX0KCQlpZiAoZXhpdGVyID09IGN1clN0YXllcikKCQl7CgkJCWN1clN0YXllciA9IG51bGw7CgkJCW1fc3RheUR1cmluZyA9IDA7CgkJfQoJCWV4aXRlci5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LmV2ZW50cy5SZW1vdmVMaXN0ZW5lcihPbkludGVyRXZlbnQpOwoJCU9uRXhpdD8uSW52b2tlKGV4aXRlcik7Cgl9CgoJdm9pZCBPblRyaWdnZXJTdGF5KENvbGxpZGVyIG90aGVyKQoJewoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGdhbWVPYmplY3QgfHwgMCA9PSAobGF5ZXJzLnZhbHVlICYgMSA8PCBvdGhlci5nYW1lT2JqZWN0LmxheWVyKSkgcmV0dXJuOwoKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCU9uVHJpZ2dlckVudGVyKG90aGVyKTsKCQkJcmV0dXJuOwoJCX0KCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBjdXJTdGF5ZXIpCgkJewoJCQltX3N0YXlEdXJpbmcgKz0gVGltZS5kZWx0YVRpbWU7CgkJCU9uU3RheT8uSW52b2tlKGN1clN0YXllciwgbV9zdGF5RHVyaW5nKTsKCQl9CgkJZWxzZSBpZiAoY3VyU3RheWVyID09IG51bGwpIGN1clN0YXllciA9IG90aGVyLmdhbWVPYmplY3Q7Cgl9CgoJcHVibGljIEdhbWVPYmplY3QgR2V0TmVhcmVzdCgpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db3VudCA9PSAwKSByZXR1cm4gbnVsbDsKCgkJR2FtZU9iamVjdCBuZWFyZXN0ID0gaW50ZXJPYmplY3RzWzBdOwoJCWZsb2F0IG5lYXJlc3REaXN0YW5jZSA9IFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCBuZWFyZXN0LnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJCWZvciAoaW50IGkgPSAxOyBpIDwgaW50ZXJPYmplY3RzLkNvdW50OyBpKyspCgkJewoJCQlmbG9hdCBkaXN0YW5jZSA9IFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCBpbnRlck9iamVjdHNbaV0udHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJCWlmIChkaXN0YW5jZSA8IG5lYXJlc3REaXN0YW5jZSkKCQkJewoJCQkJbmVhcmVzdCA9IGludGVyT2JqZWN0c1tpXTsKCQkJCW5lYXJlc3REaXN0YW5jZSA9IGRpc3RhbmNlOwoJCQl9CgkJfQoJCXJldHVybiBuZWFyZXN0OwoJfQoKCXZvaWQgT25JbnRlckV2ZW50KEdhbWVPYmplY3Qgc2VuZGVyLCBzdHJpbmcgZXZlbnRNZXNzYWdlKQoJewoJCU9uRXZlbnQ/Lkludm9rZShzZW5kZXIsIGV2ZW50TWVzc2FnZSk7Cgl9CgoJcHVibGljIHZvaWQgUmVtb3ZlVGFyZ2V0KEdhbWVPYmplY3Qgb2JqKQoJewoJCWlmIChpbnRlck9iamVjdHMuQ29udGFpbnMob2JqKSkKCQl7CgkJCUV4ZWN1dGVPbkV4aXQob2JqKTsKCQl9CgoJfQp9CgoAAAAAAAAAAA8OAAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1709374073.129732"
					},
					"AQAAAAAAAAAAAAAADw4AAAAAAAAPDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlsYXN0SW5uZXIgPSBlbnRlcjsKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhsYXN0SW5uZXIpKQoJCXsKCQkJaW50ZXJPYmplY3RzLkFkZChsYXN0SW5uZXIpOwoJCQl2YXIgY2hhcmFjdGVyID0gZW50ZXIuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCk7CgkJCWlmIChjaGFyYWN0ZXIpIGNoYXJhY3Rlci5EZWF0aEV2ZW50LkFkZExpc3RlbmVyKChjKSA9PiB7IFJlbW92ZVRhcmdldChjLmdhbWVPYmplY3QpOyB9KTsKCQkJbGFzdElubmVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLkFkZExpc3RlbmVyKE9uSW50ZXJFdmVudCk7CgkJfQoJCU9uRW50ZXI/Lkludm9rZShlbnRlcik7CgkJaWYgKG9uY2UpIEdldENvbXBvbmVudDxDb2xsaWRlcj4oKS5lbmFibGVkID0gZmFsc2U7Cgl9CgoJdm9pZCBPblRyaWdnZXJFeGl0KENvbGxpZGVyIG90aGVyKQoJewoJCWlmIChpbnRlck9iamVjdHMuQ29udGFpbnMob3RoZXIuZ2FtZU9iamVjdCkpCgkJewoJCQlsYXN0RXhpdGVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCQkJRXhlY3V0ZU9uRXhpdChsYXN0RXhpdGVyKTsKCQl9Cgl9CgoJcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBFeGVjdXRlT25FeGl0KEdhbWVPYmplY3QgZXhpdGVyKQoJewoJCWludGVyT2JqZWN0cy5SZW1vdmUoZXhpdGVyKTsKCQlpZiAoZXhpdGVyID09IGxhc3RJbm5lcikKCQl7CgkJCWxhc3RJbm5lciA9IGludGVyT2JqZWN0cy5Db3VudCA+IDAgPyBpbnRlck9iamVjdHNbaW50ZXJPYmplY3RzLkNvdW50IC0gMV0gOiBudWxsOwoJCX0KCQlpZiAoZXhpdGVyID09IGN1clN0YXllcikKCQl7CgkJCWN1clN0YXllciA9IG51bGw7CgkJCW1fc3RheUR1cmluZyA9IDA7CgkJfQoJCWV4aXRlci5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LmV2ZW50cy5SZW1vdmVMaXN0ZW5lcihPbkludGVyRXZlbnQpOwoJCU9uRXhpdD8uSW52b2tlKGV4aXRlcik7Cgl9CgoJdm9pZCBPblRyaWdnZXJTdGF5KENvbGxpZGVyIG90aGVyKQoJewoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGdhbWVPYmplY3QgfHwgMCA9PSAobGF5ZXJzLnZhbHVlICYgMSA8PCBvdGhlci5nYW1lT2JqZWN0LmxheWVyKSkgcmV0dXJuOwoKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCU9uVHJpZ2dlckVudGVyKG90aGVyKTsKCQkJcmV0dXJuOwoJCX0KCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBjdXJTdGF5ZXIpCgkJewoJCQltX3N0YXlEdXJpbmcgKz0gVGltZS5kZWx0YVRpbWU7CgkJCU9uU3RheT8uSW52b2tlKGN1clN0YXllciwgbV9zdGF5RHVyaW5nKTsKCQl9CgkJZWxzZSBpZiAoY3VyU3RheWVyID09IG51bGwpIGN1clN0YXllciA9IG90aGVyLmdhbWVPYmplY3Q7Cgl9CgoJcHVibGljIEdhbWVPYmplY3QgR2V0TmVhcmVzdCgpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db3VudCA9PSAwKSByZXR1cm4gbnVsbDsKCgkJR2FtZU9iamVjdCBuZWFyZXN0ID0gaW50ZXJPYmplY3RzWzBdOwoJCWZsb2F0IG5lYXJlc3REaXN0YW5jZSA9IFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCBuZWFyZXN0LnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJCWZvciAoaW50IGkgPSAxOyBpIDwgaW50ZXJPYmplY3RzLkNvdW50OyBpKyspCgkJewoJCQlmbG9hdCBkaXN0YW5jZSA9IFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCBpbnRlck9iamVjdHNbaV0udHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJCWlmIChkaXN0YW5jZSA8IG5lYXJlc3REaXN0YW5jZSkKCQkJewoJCQkJbmVhcmVzdCA9IGludGVyT2JqZWN0c1tpXTsKCQkJCW5lYXJlc3REaXN0YW5jZSA9IGRpc3RhbmNlOwoJCQl9CgkJfQoJCXJldHVybiBuZWFyZXN0OwoJfQoKCXZvaWQgT25JbnRlckV2ZW50KEdhbWVPYmplY3Qgc2VuZGVyLCBzdHJpbmcgZXZlbnRNZXNzYWdlKQoJewoJCU9uRXZlbnQ/Lkludm9rZShzZW5kZXIsIGV2ZW50TWVzc2FnZSk7Cgl9CgoJcHVibGljIHZvaWQgUmVtb3ZlVGFyZ2V0KEdhbWVPYmplY3Qgb2JqKQoJewoJCWlmIChpbnRlck9iamVjdHMuQ29udGFpbnMob2JqKSkKCQl7CgkJCUV4ZWN1dGVPbkV4aXQob2JqKTsKCQl9CgoJfQp9Cgo",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAAPDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlsYXN0SW5uZXIgPSBlbnRlcjsKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhsYXN0SW5uZXIpKQoJCXsKCQkJaW50ZXJPYmplY3RzLkFkZChsYXN0SW5uZXIpOwoJCQl2YXIgY2hhcmFjdGVyID0gZW50ZXIuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCk7CgkJCWlmIChjaGFyYWN0ZXIpIGNoYXJhY3Rlci5EZWF0aEV2ZW50LkFkZExpc3RlbmVyKChjKSA9PiB7IFJlbW92ZVRhcmdldChjLmdhbWVPYmplY3QpOyB9KTsKCQkJbGFzdElubmVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLkFkZExpc3RlbmVyKE9uSW50ZXJFdmVudCk7CgkJfQoJCU9uRW50ZXI/Lkludm9rZShlbnRlcik7CgkJaWYgKG9uY2UpIEdldENvbXBvbmVudDxDb2xsaWRlcj4oKS5lbmFibGVkID0gZmFsc2U7Cgl9CgoJdm9pZCBPblRyaWdnZXJFeGl0KENvbGxpZGVyIG90aGVyKQoJewoJCWlmIChpbnRlck9iamVjdHMuQ29udGFpbnMob3RoZXIuZ2FtZU9iamVjdCkpCgkJewoJCQlsYXN0RXhpdGVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCQkJRXhlY3V0ZU9uRXhpdChsYXN0RXhpdGVyKTsKCQl9Cgl9CgoJcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBFeGVjdXRlT25FeGl0KEdhbWVPYmplY3QgZXhpdGVyKQoJewoJCWludGVyT2JqZWN0cy5SZW1vdmUoZXhpdGVyKTsKCQlpZiAoZXhpdGVyID09IGxhc3RJbm5lcikKCQl7CgkJCWxhc3RJbm5lciA9IGludGVyT2JqZWN0cy5Db3VudCA+IDAgPyBpbnRlck9iamVjdHNbaW50ZXJPYmplY3RzLkNvdW50IC0gMV0gOiBudWxsOwoJCX0KCQlpZiAoZXhpdGVyID09IGN1clN0YXllcikKCQl7CgkJCWN1clN0YXllciA9IG51bGw7CgkJCW1fc3RheUR1cmluZyA9IDA7CgkJfQoJCWV4aXRlci5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LmV2ZW50cy5SZW1vdmVMaXN0ZW5lcihPbkludGVyRXZlbnQpOwoJCU9uRXhpdD8uSW52b2tlKGV4aXRlcik7Cgl9CgoJdm9pZCBPblRyaWdnZXJTdGF5KENvbGxpZGVyIG90aGVyKQoJewoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGdhbWVPYmplY3QgfHwgMCA9PSAobGF5ZXJzLnZhbHVlICYgMSA8PCBvdGhlci5nYW1lT2JqZWN0LmxheWVyKSkgcmV0dXJuOwoKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCU9uVHJpZ2dlckVudGVyKG90aGVyKTsKCQkJcmV0dXJuOwoJCX0KCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBjdXJTdGF5ZXIpCgkJewoJCQltX3N0YXlEdXJpbmcgKz0gVGltZS5kZWx0YVRpbWU7CgkJCU9uU3RheT8uSW52b2tlKGN1clN0YXllciwgbV9zdGF5RHVyaW5nKTsKCQl9CgkJZWxzZSBpZiAoY3VyU3RheWVyID09IG51bGwpIGN1clN0YXllciA9IG90aGVyLmdhbWVPYmplY3Q7Cgl9CgoJcHVibGljIEdhbWVPYmplY3QgR2V0TmVhcmVzdCgpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db3VudCA9PSAwKSByZXR1cm4gbnVsbDsKCgkJR2FtZU9iamVjdCBuZWFyZXN0ID0gaW50ZXJPYmplY3RzWzBdOwoJCWZsb2F0IG5lYXJlc3REaXN0YW5jZSA9IFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCBuZWFyZXN0LnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJCWZvciAoaW50IGkgPSAxOyBpIDwgaW50ZXJPYmplY3RzLkNvdW50OyBpKyspCgkJewoJCQlmbG9hdCBkaXN0YW5jZSA9IFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCBpbnRlck9iamVjdHNbaV0udHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJCWlmIChkaXN0YW5jZSA8IG5lYXJlc3REaXN0YW5jZSkKCQkJewoJCQkJbmVhcmVzdCA9IGludGVyT2JqZWN0c1tpXTsKCQkJCW5lYXJlc3REaXN0YW5jZSA9IGRpc3RhbmNlOwoJCQl9CgkJfQoJCXJldHVybiBuZWFyZXN0OwoJfQoKCXZvaWQgT25JbnRlckV2ZW50KEdhbWVPYmplY3Qgc2VuZGVyLCBzdHJpbmcgZXZlbnRNZXNzYWdlKQoJewoJCU9uRXZlbnQ/Lkludm9rZShzZW5kZXIsIGV2ZW50TWVzc2FnZSk7Cgl9CgoJcHVibGljIHZvaWQgUmVtb3ZlVGFyZ2V0KEdhbWVPYmplY3Qgb2JqKQoJewoJCWlmIChpbnRlck9iamVjdHMuQ29udGFpbnMob2JqKSkKCQl7CgkJCUV4ZWN1dGVPbkV4aXQob2JqKTsKCQl9CgoJfQp9CgoAAAAAAAAAAA8OAAAAAAAAAAAAAAAAAAAAAAAADw4AAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAPDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlPbkVudGVyPy5JbnZva2UoZW50ZXIpOwoJCWxhc3RJbm5lciA9IGVudGVyOwoJCWlmICghaW50ZXJPYmplY3RzLkNvbnRhaW5zKGxhc3RJbm5lcikpCgkJewoJCQlpbnRlck9iamVjdHMuQWRkKGxhc3RJbm5lcik7CgkJCXZhciBjaGFyYWN0ZXIgPSBlbnRlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKTsKCQkJaWYgKGNoYXJhY3RlcikgY2hhcmFjdGVyLkRlYXRoRXZlbnQuQWRkTGlzdGVuZXIoKGMpID0+IHsgUmVtb3ZlVGFyZ2V0KGMuZ2FtZU9iamVjdCk7IH0pOwoJCQlsYXN0SW5uZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuQWRkTGlzdGVuZXIoT25JbnRlckV2ZW50KTsKCQl9CgkJaWYgKG9uY2UpIEdldENvbXBvbmVudDxDb2xsaWRlcj4oKS5lbmFibGVkID0gZmFsc2U7Cgl9CgoJdm9pZCBPblRyaWdnZXJFeGl0KENvbGxpZGVyIG90aGVyKQoJewoJCWlmIChpbnRlck9iamVjdHMuQ29udGFpbnMob3RoZXIuZ2FtZU9iamVjdCkpCgkJewoJCQlsYXN0RXhpdGVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCQkJRXhlY3V0ZU9uRXhpdChsYXN0RXhpdGVyKTsKCQl9Cgl9CgoJcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBFeGVjdXRlT25FeGl0KEdhbWVPYmplY3QgZXhpdGVyKQoJewoJCU9uRXhpdD8uSW52b2tlKGV4aXRlcik7CgkJaW50ZXJPYmplY3RzLlJlbW92ZShleGl0ZXIpOwoJCWlmIChleGl0ZXIgPT0gbGFzdElubmVyKQoJCXsKCQkJbGFzdElubmVyID0gaW50ZXJPYmplY3RzLkNvdW50ID4gMCA/IGludGVyT2JqZWN0c1tpbnRlck9iamVjdHMuQ291bnQgLSAxXSA6IG51bGw7CgkJfQoJCWlmIChleGl0ZXIgPT0gY3VyU3RheWVyKQoJCXsKCQkJY3VyU3RheWVyID0gbnVsbDsKCQkJbV9zdGF5RHVyaW5nID0gMDsKCQl9CgkJZXhpdGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLlJlbW92ZUxpc3RlbmVyKE9uSW50ZXJFdmVudCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJTdGF5KENvbGxpZGVyIG90aGVyKQoJewoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGdhbWVPYmplY3QgfHwgMCA9PSAobGF5ZXJzLnZhbHVlICYgMSA8PCBvdGhlci5nYW1lT2JqZWN0LmxheWVyKSkgcmV0dXJuOwoKCQlpZiAoIWludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCU9uVHJpZ2dlckVudGVyKG90aGVyKTsKCQkJcmV0dXJuOwoJCX0KCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBjdXJTdGF5ZXIpCgkJewoJCQltX3N0YXlEdXJpbmcgKz0gVGltZS5kZWx0YVRpbWU7CgkJCU9uU3RheT8uSW52b2tlKGN1clN0YXllciwgbV9zdGF5RHVyaW5nKTsKCQl9CgkJZWxzZSBpZiAoY3VyU3RheWVyID09IG51bGwpIGN1clN0YXllciA9IG90aGVyLmdhbWVPYmplY3Q7Cgl9CgoJcHVibGljIEdhbWVPYmplY3QgR2V0TmVhcmVzdCgpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db3VudCA9PSAwKSByZXR1cm4gbnVsbDsKCgkJR2FtZU9iamVjdCBuZWFyZXN0ID0gaW50ZXJPYmplY3RzWzBdOwoJCWZsb2F0IG5lYXJlc3REaXN0YW5jZSA9IFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCBuZWFyZXN0LnRyYW5zZm9ybS5wb3NpdGlvbik7CgoJCWZvciAoaW50IGkgPSAxOyBpIDwgaW50ZXJPYmplY3RzLkNvdW50OyBpKyspCgkJewoJCQlmbG9hdCBkaXN0YW5jZSA9IFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCBpbnRlck9iamVjdHNbaV0udHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJCWlmIChkaXN0YW5jZSA8IG5lYXJlc3REaXN0YW5jZSkKCQkJewoJCQkJbmVhcmVzdCA9IGludGVyT2JqZWN0c1tpXTsKCQkJCW5lYXJlc3REaXN0YW5jZSA9IGRpc3RhbmNlOwoJCQl9CgkJfQoJCXJldHVybiBuZWFyZXN0OwoJfQoKCXZvaWQgT25JbnRlckV2ZW50KEdhbWVPYmplY3Qgc2VuZGVyLCBzdHJpbmcgZXZlbnRNZXNzYWdlKQoJewoJCU9uRXZlbnQ/Lkludm9rZShzZW5kZXIsIGV2ZW50TWVzc2FnZSk7Cgl9CgoJcHVibGljIHZvaWQgUmVtb3ZlVGFyZ2V0KEdhbWVPYmplY3Qgb2JqKQoJewoJCWlmIChpbnRlck9iamVjdHMuQ29udGFpbnMob2JqKSkKCQl7CgkJCUV4ZWN1dGVPbkV4aXQob2JqKTsKCQl9CgoJfQp9CgoAAAAAAAAAAAsOAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1710496596.8106825"
					},
					"AQAAAAAAAAAAAAAACw4AAAAAAAALDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlPbkVudGVyPy5JbnZva2UoZW50ZXIpOwoJCWxhc3RJbm5lciA9IGVudGVyOwoJCWlmICghaW50ZXJPYmplY3RzLkNvbnRhaW5zKGxhc3RJbm5lcikpCgkJewoJCQlpbnRlck9iamVjdHMuQWRkKGxhc3RJbm5lcik7CgkJCXZhciBjaGFyYWN0ZXIgPSBlbnRlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpOwoJCQlpZiAoY2hhcmFjdGVyKSBjaGFyYWN0ZXIuRGVhdGhFdmVudC5BZGRMaXN0ZW5lcigoYykgPT4geyBSZW1vdmVUYXJnZXQoYy5nYW1lT2JqZWN0KTsgfSk7CgkJCWxhc3RJbm5lci5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LmV2ZW50cy5BZGRMaXN0ZW5lcihPbkludGVyRXZlbnQpOwoJCX0KCQlpZiAob25jZSkgR2V0Q29tcG9uZW50PENvbGxpZGVyPigpLmVuYWJsZWQgPSBmYWxzZTsKCX0KCgl2b2lkIE9uVHJpZ2dlckV4aXQoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCWxhc3RFeGl0ZXIgPSBvdGhlci5nYW1lT2JqZWN0OwoJCQlFeGVjdXRlT25FeGl0KGxhc3RFeGl0ZXIpOwoJCX0KCX0KCglwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIEV4ZWN1dGVPbkV4aXQoR2FtZU9iamVjdCBleGl0ZXIpCgl7CgkJT25FeGl0Py5JbnZva2UoZXhpdGVyKTsKCQlpbnRlck9iamVjdHMuUmVtb3ZlKGV4aXRlcik7CgkJaWYgKGV4aXRlciA9PSBsYXN0SW5uZXIpCgkJewoJCQlsYXN0SW5uZXIgPSBpbnRlck9iamVjdHMuQ291bnQgPiAwID8gaW50ZXJPYmplY3RzW2ludGVyT2JqZWN0cy5Db3VudCAtIDFdIDogbnVsbDsKCQl9CgkJaWYgKGV4aXRlciA9PSBjdXJTdGF5ZXIpCgkJewoJCQljdXJTdGF5ZXIgPSBudWxsOwoJCQltX3N0YXlEdXJpbmcgPSAwOwoJCX0KCQlleGl0ZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuUmVtb3ZlTGlzdGVuZXIoT25JbnRlckV2ZW50KTsKCX0KCgl2b2lkIE9uVHJpZ2dlclN0YXkoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKG90aGVyLmdhbWVPYmplY3QgPT0gZ2FtZU9iamVjdCB8fCAwID09IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKSByZXR1cm47CgoJCWlmICghaW50ZXJPYmplY3RzLkNvbnRhaW5zKG90aGVyLmdhbWVPYmplY3QpKQoJCXsKCQkJT25UcmlnZ2VyRW50ZXIob3RoZXIpOwoJCQlyZXR1cm47CgkJfQoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGN1clN0YXllcikKCQl7CgkJCW1fc3RheUR1cmluZyArPSBUaW1lLmRlbHRhVGltZTsKCQkJT25TdGF5Py5JbnZva2UoY3VyU3RheWVyLCBtX3N0YXlEdXJpbmcpOwoJCX0KCQllbHNlIGlmIChjdXJTdGF5ZXIgPT0gbnVsbCkgY3VyU3RheWVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCX0KCglwdWJsaWMgR2FtZU9iamVjdCBHZXROZWFyZXN0KCkKCXsKCQlpZiAoaW50ZXJPYmplY3RzLkNvdW50ID09IDApIHJldHVybiBudWxsOwoKCQlHYW1lT2JqZWN0IG5lYXJlc3QgPSBpbnRlck9iamVjdHNbMF07CgkJZmxvYXQgbmVhcmVzdERpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIG5lYXJlc3QudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJZm9yIChpbnQgaSA9IDE7IGkgPCBpbnRlck9iamVjdHMuQ291bnQ7IGkrKykKCQl7CgkJCWZsb2F0IGRpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIGludGVyT2JqZWN0c1tpXS50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJaWYgKGRpc3RhbmNlIDwgbmVhcmVzdERpc3RhbmNlKQoJCQl7CgkJCQluZWFyZXN0ID0gaW50ZXJPYmplY3RzW2ldOwoJCQkJbmVhcmVzdERpc3RhbmNlID0gZGlzdGFuY2U7CgkJCX0KCQl9CgkJcmV0dXJuIG5lYXJlc3Q7Cgl9CgoJdm9pZCBPbkludGVyRXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJT25FdmVudD8uSW52b2tlKHNlbmRlciwgZXZlbnRNZXNzYWdlKTsKCX0KCglwdWJsaWMgdm9pZCBSZW1vdmVUYXJnZXQoR2FtZU9iamVjdCBvYmopCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvYmopKQoJCXsKCQkJRXhlY3V0ZU9uRXhpdChvYmopOwoJCX0KCgl9Cn0KCg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAALDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlPbkVudGVyPy5JbnZva2UoZW50ZXIpOwoJCWxhc3RJbm5lciA9IGVudGVyOwoJCWlmICghaW50ZXJPYmplY3RzLkNvbnRhaW5zKGxhc3RJbm5lcikpCgkJewoJCQlpbnRlck9iamVjdHMuQWRkKGxhc3RJbm5lcik7CgkJCXZhciBjaGFyYWN0ZXIgPSBlbnRlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpOwoJCQlpZiAoY2hhcmFjdGVyKSBjaGFyYWN0ZXIuRGVhdGhFdmVudC5BZGRMaXN0ZW5lcigoYykgPT4geyBSZW1vdmVUYXJnZXQoYy5nYW1lT2JqZWN0KTsgfSk7CgkJCWxhc3RJbm5lci5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LmV2ZW50cy5BZGRMaXN0ZW5lcihPbkludGVyRXZlbnQpOwoJCX0KCQlpZiAob25jZSkgR2V0Q29tcG9uZW50PENvbGxpZGVyPigpLmVuYWJsZWQgPSBmYWxzZTsKCX0KCgl2b2lkIE9uVHJpZ2dlckV4aXQoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCWxhc3RFeGl0ZXIgPSBvdGhlci5nYW1lT2JqZWN0OwoJCQlFeGVjdXRlT25FeGl0KGxhc3RFeGl0ZXIpOwoJCX0KCX0KCglwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIEV4ZWN1dGVPbkV4aXQoR2FtZU9iamVjdCBleGl0ZXIpCgl7CgkJT25FeGl0Py5JbnZva2UoZXhpdGVyKTsKCQlpbnRlck9iamVjdHMuUmVtb3ZlKGV4aXRlcik7CgkJaWYgKGV4aXRlciA9PSBsYXN0SW5uZXIpCgkJewoJCQlsYXN0SW5uZXIgPSBpbnRlck9iamVjdHMuQ291bnQgPiAwID8gaW50ZXJPYmplY3RzW2ludGVyT2JqZWN0cy5Db3VudCAtIDFdIDogbnVsbDsKCQl9CgkJaWYgKGV4aXRlciA9PSBjdXJTdGF5ZXIpCgkJewoJCQljdXJTdGF5ZXIgPSBudWxsOwoJCQltX3N0YXlEdXJpbmcgPSAwOwoJCX0KCQlleGl0ZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuUmVtb3ZlTGlzdGVuZXIoT25JbnRlckV2ZW50KTsKCX0KCgl2b2lkIE9uVHJpZ2dlclN0YXkoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKG90aGVyLmdhbWVPYmplY3QgPT0gZ2FtZU9iamVjdCB8fCAwID09IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKSByZXR1cm47CgoJCWlmICghaW50ZXJPYmplY3RzLkNvbnRhaW5zKG90aGVyLmdhbWVPYmplY3QpKQoJCXsKCQkJT25UcmlnZ2VyRW50ZXIob3RoZXIpOwoJCQlyZXR1cm47CgkJfQoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGN1clN0YXllcikKCQl7CgkJCW1fc3RheUR1cmluZyArPSBUaW1lLmRlbHRhVGltZTsKCQkJT25TdGF5Py5JbnZva2UoY3VyU3RheWVyLCBtX3N0YXlEdXJpbmcpOwoJCX0KCQllbHNlIGlmIChjdXJTdGF5ZXIgPT0gbnVsbCkgY3VyU3RheWVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCX0KCglwdWJsaWMgR2FtZU9iamVjdCBHZXROZWFyZXN0KCkKCXsKCQlpZiAoaW50ZXJPYmplY3RzLkNvdW50ID09IDApIHJldHVybiBudWxsOwoKCQlHYW1lT2JqZWN0IG5lYXJlc3QgPSBpbnRlck9iamVjdHNbMF07CgkJZmxvYXQgbmVhcmVzdERpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIG5lYXJlc3QudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJZm9yIChpbnQgaSA9IDE7IGkgPCBpbnRlck9iamVjdHMuQ291bnQ7IGkrKykKCQl7CgkJCWZsb2F0IGRpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIGludGVyT2JqZWN0c1tpXS50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJaWYgKGRpc3RhbmNlIDwgbmVhcmVzdERpc3RhbmNlKQoJCQl7CgkJCQluZWFyZXN0ID0gaW50ZXJPYmplY3RzW2ldOwoJCQkJbmVhcmVzdERpc3RhbmNlID0gZGlzdGFuY2U7CgkJCX0KCQl9CgkJcmV0dXJuIG5lYXJlc3Q7Cgl9CgoJdm9pZCBPbkludGVyRXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJT25FdmVudD8uSW52b2tlKHNlbmRlciwgZXZlbnRNZXNzYWdlKTsKCX0KCglwdWJsaWMgdm9pZCBSZW1vdmVUYXJnZXQoR2FtZU9iamVjdCBvYmopCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvYmopKQoJCXsKCQkJRXhlY3V0ZU9uRXhpdChvYmopOwoJCX0KCgl9Cn0KCgAAAAAAAAAALw4AAAAAAAAAAAAAAAAAAAAAAAAvDgAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAvDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCWJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlPbkVudGVyPy5JbnZva2UoZW50ZXIpOwoJCWxhc3RJbm5lciA9IGVudGVyOwoJCWlmICghaW50ZXJPYmplY3RzLkNvbnRhaW5zKGxhc3RJbm5lcikpCgkJewoJCQlpbnRlck9iamVjdHMuQWRkKGxhc3RJbm5lcik7CgkJCXZhciBjaGFyYWN0ZXIgPSBlbnRlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpOwoJCQlpZiAoY2hhcmFjdGVyKSBjaGFyYWN0ZXIuRGVhdGhFdmVudC5BZGRMaXN0ZW5lcigoYykgPT4geyBSZW1vdmVUYXJnZXQoYy5nYW1lT2JqZWN0KTsgfSk7CgkJCWxhc3RJbm5lci5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LmV2ZW50cy5BZGRMaXN0ZW5lcihPbkludGVyRXZlbnQpOwoJCX0KCQlpZiAob25jZSkgR2V0Q29tcG9uZW50PENvbGxpZGVyPigpLmVuYWJsZWQgPSBmYWxzZTsKCX0KCgl2b2lkIE9uVHJpZ2dlckV4aXQoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCWxhc3RFeGl0ZXIgPSBvdGhlci5nYW1lT2JqZWN0OwoJCQlFeGVjdXRlT25FeGl0KGxhc3RFeGl0ZXIpOwoJCX0KCX0KCglwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIEV4ZWN1dGVPbkV4aXQoR2FtZU9iamVjdCBleGl0ZXIpCgl7CgkJT25FeGl0Py5JbnZva2UoZXhpdGVyKTsKCQlpbnRlck9iamVjdHMuUmVtb3ZlKGV4aXRlcik7CgkJaWYgKGV4aXRlciA9PSBsYXN0SW5uZXIpCgkJewoJCQlsYXN0SW5uZXIgPSBpbnRlck9iamVjdHMuQ291bnQgPiAwID8gaW50ZXJPYmplY3RzW2ludGVyT2JqZWN0cy5Db3VudCAtIDFdIDogbnVsbDsKCQl9CgkJaWYgKGV4aXRlciA9PSBjdXJTdGF5ZXIpCgkJewoJCQljdXJTdGF5ZXIgPSBudWxsOwoJCQltX3N0YXlEdXJpbmcgPSAwOwoJCX0KCQlleGl0ZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuUmVtb3ZlTGlzdGVuZXIoT25JbnRlckV2ZW50KTsKCX0KCgl2b2lkIE9uVHJpZ2dlclN0YXkoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKG90aGVyLmdhbWVPYmplY3QgPT0gZ2FtZU9iamVjdCB8fCAwID09IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKSByZXR1cm47CgoJCWlmICghaW50ZXJPYmplY3RzLkNvbnRhaW5zKG90aGVyLmdhbWVPYmplY3QpKQoJCXsKCQkJT25UcmlnZ2VyRW50ZXIob3RoZXIpOwoJCQlyZXR1cm47CgkJfQoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGN1clN0YXllcikKCQl7CgkJCW1fc3RheUR1cmluZyArPSBUaW1lLmRlbHRhVGltZTsKCQkJT25TdGF5Py5JbnZva2UoY3VyU3RheWVyLCBtX3N0YXlEdXJpbmcpOwoJCX0KCQllbHNlIGlmIChjdXJTdGF5ZXIgPT0gbnVsbCkgY3VyU3RheWVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCX0KCglwdWJsaWMgR2FtZU9iamVjdCBHZXROZWFyZXN0KCkKCXsKCQlpZiAoaW50ZXJPYmplY3RzLkNvdW50ID09IDApIHJldHVybiBudWxsOwoKCQlHYW1lT2JqZWN0IG5lYXJlc3QgPSBpbnRlck9iamVjdHNbMF07CgkJaWYgKG5lYXJlc3QgPT0gbnVsbCkgcmV0dXJuIG51bGw7CgkJZmxvYXQgbmVhcmVzdERpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIG5lYXJlc3QudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJZm9yIChpbnQgaSA9IDE7IGkgPCBpbnRlck9iamVjdHMuQ291bnQ7IGkrKykKCQl7CgkJCWZsb2F0IGRpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIGludGVyT2JqZWN0c1tpXS50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJaWYgKGRpc3RhbmNlIDwgbmVhcmVzdERpc3RhbmNlKQoJCQl7CgkJCQluZWFyZXN0ID0gaW50ZXJPYmplY3RzW2ldOwoJCQkJbmVhcmVzdERpc3RhbmNlID0gZGlzdGFuY2U7CgkJCX0KCQl9CgkJcmV0dXJuIG5lYXJlc3Q7Cgl9CgoJdm9pZCBPbkludGVyRXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJT25FdmVudD8uSW52b2tlKHNlbmRlciwgZXZlbnRNZXNzYWdlKTsKCX0KCglwdWJsaWMgdm9pZCBSZW1vdmVUYXJnZXQoR2FtZU9iamVjdCBvYmopCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvYmopKQoJCXsKCQkJRXhlY3V0ZU9uRXhpdChvYmopOwoJCX0KCgl9Cn0KCgAAAAAAAAAAIw4AAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1711194794.6336777"
					},
					"AQAAAAAAAAAAAAAAIw4AAAAAAAAjDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihDb2xsaWRlcikpXQpwdWJsaWMgY2xhc3MgSW50ZXJhY3RPblRyaWdnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBMYXllck1hc2sgbGF5ZXJzOwoJcHVibGljIGZsb2F0IFJhZGl1cwoJewoJCWdldAoJCXsKCQkJaWYgKG1fY2FwQ29sbGlkZXIpIHJldHVybiBtX2NhcENvbGxpZGVyLnJhZGl1czsKCQkJZWxzZSByZXR1cm4gbV9ib3hDb2xsaWVyLnNpemUueTsKCQl9CgkJc2V0CgkJewoJCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5yYWRpdXMgPSB2YWx1ZTsKCQkJZWxzZSBtX2JveENvbGxpZXIuc2l6ZSA9IG5ldyBWZWN0b3IzKHZhbHVlLCB2YWx1ZSwgdmFsdWUpOwoJCX0KCX0KCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3Q+IE9uRW50ZXIsIE9uRXhpdDsKCXB1YmxpYyBVbml0eUV2ZW50PEdhbWVPYmplY3QsIGZsb2F0PiBPblN0YXk7CglwdWJsaWMgVW5pdHlFdmVudDxHYW1lT2JqZWN0LCBzdHJpbmc+IE9uRXZlbnQ7CgoJcHVibGljIExpc3Q8R2FtZU9iamVjdD4gSW5uZXJzIHsgZ2V0IHsgcmV0dXJuIGludGVyT2JqZWN0czsgfSB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0SW5uZXIgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CglwdWJsaWMgR2FtZU9iamVjdCBsYXN0RXhpdGVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIEdhbWVPYmplY3QgY3VyU3RheWVyIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoJcHVibGljIGJvb2wgb25jZTsKCglMaXN0PEdhbWVPYmplY3Q+IGludGVyT2JqZWN0czsKCUNhcHN1bGVDb2xsaWRlciBtX2NhcENvbGxpZGVyOwoJQm94Q29sbGlkZXIgbV9ib3hDb2xsaWVyOwoJZmxvYXQgbV9zdGF5RHVyaW5nOwoKCXZvaWQgU3RhcnQoKQoJewoJCW1fY2FwQ29sbGlkZXIgPSBHZXRDb21wb25lbnQ8Q2Fwc3VsZUNvbGxpZGVyPigpOwoJCW1fYm94Q29sbGllciA9IEdldENvbXBvbmVudDxCb3hDb2xsaWRlcj4oKTsKCQlpZiAobV9jYXBDb2xsaWRlcikgbV9jYXBDb2xsaWRlci5pc1RyaWdnZXIgPSB0cnVlOwoJCWlmIChtX2JveENvbGxpZXIpIG1fYm94Q29sbGllci5pc1RyaWdnZXIgPSB0cnVlOwoJCWludGVyT2JqZWN0cyA9IG5ldyBMaXN0PEdhbWVPYmplY3Q+KCk7Cgl9CgoJdm9pZCBPblRyaWdnZXJFbnRlcihDb2xsaWRlciBvdGhlcikKCXsKCQlpZiAob3RoZXIuZ2FtZU9iamVjdCA9PSBnYW1lT2JqZWN0KSByZXR1cm47CgoJCWlmICgwICE9IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKQoJCXsKCQkJRXhlY3V0ZU9uRW50ZXIob3RoZXIuZ2FtZU9iamVjdCk7CgkJfQoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXhlY3V0ZU9uRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlPbkVudGVyPy5JbnZva2UoZW50ZXIpOwoJCWxhc3RJbm5lciA9IGVudGVyOwoJCWlmICghaW50ZXJPYmplY3RzLkNvbnRhaW5zKGxhc3RJbm5lcikpCgkJewoJCQlpbnRlck9iamVjdHMuQWRkKGxhc3RJbm5lcik7CgkJCXZhciBjaGFyYWN0ZXIgPSBlbnRlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpOwoJCQlpZiAoY2hhcmFjdGVyKSBjaGFyYWN0ZXIuRGVhdGhFdmVudC5BZGRMaXN0ZW5lcigoYykgPT4geyBSZW1vdmVUYXJnZXQoYy5nYW1lT2JqZWN0KTsgfSk7CgkJCWxhc3RJbm5lci5HZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LmV2ZW50cy5BZGRMaXN0ZW5lcihPbkludGVyRXZlbnQpOwoJCX0KCQlpZiAob25jZSkgR2V0Q29tcG9uZW50PENvbGxpZGVyPigpLmVuYWJsZWQgPSBmYWxzZTsKCX0KCgl2b2lkIE9uVHJpZ2dlckV4aXQoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvdGhlci5nYW1lT2JqZWN0KSkKCQl7CgkJCWxhc3RFeGl0ZXIgPSBvdGhlci5nYW1lT2JqZWN0OwoJCQlFeGVjdXRlT25FeGl0KGxhc3RFeGl0ZXIpOwoJCX0KCX0KCglwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIEV4ZWN1dGVPbkV4aXQoR2FtZU9iamVjdCBleGl0ZXIpCgl7CgkJT25FeGl0Py5JbnZva2UoZXhpdGVyKTsKCQlpbnRlck9iamVjdHMuUmVtb3ZlKGV4aXRlcik7CgkJaWYgKGV4aXRlciA9PSBsYXN0SW5uZXIpCgkJewoJCQlsYXN0SW5uZXIgPSBpbnRlck9iamVjdHMuQ291bnQgPiAwID8gaW50ZXJPYmplY3RzW2ludGVyT2JqZWN0cy5Db3VudCAtIDFdIDogbnVsbDsKCQl9CgkJaWYgKGV4aXRlciA9PSBjdXJTdGF5ZXIpCgkJewoJCQljdXJTdGF5ZXIgPSBudWxsOwoJCQltX3N0YXlEdXJpbmcgPSAwOwoJCX0KCQlleGl0ZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuUmVtb3ZlTGlzdGVuZXIoT25JbnRlckV2ZW50KTsKCX0KCgl2b2lkIE9uVHJpZ2dlclN0YXkoQ29sbGlkZXIgb3RoZXIpCgl7CgkJaWYgKG90aGVyLmdhbWVPYmplY3QgPT0gZ2FtZU9iamVjdCB8fCAwID09IChsYXllcnMudmFsdWUgJiAxIDw8IG90aGVyLmdhbWVPYmplY3QubGF5ZXIpKSByZXR1cm47CgoJCWlmICghaW50ZXJPYmplY3RzLkNvbnRhaW5zKG90aGVyLmdhbWVPYmplY3QpKQoJCXsKCQkJT25UcmlnZ2VyRW50ZXIob3RoZXIpOwoJCQlyZXR1cm47CgkJfQoJCWlmIChvdGhlci5nYW1lT2JqZWN0ID09IGN1clN0YXllcikKCQl7CgkJCW1fc3RheUR1cmluZyArPSBUaW1lLmRlbHRhVGltZTsKCQkJT25TdGF5Py5JbnZva2UoY3VyU3RheWVyLCBtX3N0YXlEdXJpbmcpOwoJCX0KCQllbHNlIGlmIChjdXJTdGF5ZXIgPT0gbnVsbCkgY3VyU3RheWVyID0gb3RoZXIuZ2FtZU9iamVjdDsKCX0KCglwdWJsaWMgR2FtZU9iamVjdCBHZXROZWFyZXN0KCkKCXsKCQlpZiAoaW50ZXJPYmplY3RzLkNvdW50ID09IDApIHJldHVybiBudWxsOwoKCQlHYW1lT2JqZWN0IG5lYXJlc3QgPSBpbnRlck9iamVjdHNbMF07CgkJaWYgKG5lYXJlc3QgPT0gbnVsbCkgcmV0dXJuIG51bGw7CgkJZmxvYXQgbmVhcmVzdERpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIG5lYXJlc3QudHJhbnNmb3JtLnBvc2l0aW9uKTsKCgkJZm9yIChpbnQgaSA9IDE7IGkgPCBpbnRlck9iamVjdHMuQ291bnQ7IGkrKykKCQl7CgkJCWZsb2F0IGRpc3RhbmNlID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIGludGVyT2JqZWN0c1tpXS50cmFuc2Zvcm0ucG9zaXRpb24pOwoKCQkJaWYgKGRpc3RhbmNlIDwgbmVhcmVzdERpc3RhbmNlKQoJCQl7CgkJCQluZWFyZXN0ID0gaW50ZXJPYmplY3RzW2ldOwoJCQkJbmVhcmVzdERpc3RhbmNlID0gZGlzdGFuY2U7CgkJCX0KCQl9CgkJcmV0dXJuIG5lYXJlc3Q7Cgl9CgoJdm9pZCBPbkludGVyRXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJT25FdmVudD8uSW52b2tlKHNlbmRlciwgZXZlbnRNZXNzYWdlKTsKCX0KCglwdWJsaWMgdm9pZCBSZW1vdmVUYXJnZXQoR2FtZU9iamVjdCBvYmopCgl7CgkJaWYgKGludGVyT2JqZWN0cy5Db250YWlucyhvYmopKQoJCXsKCQkJRXhlY3V0ZU9uRXhpdChvYmopOwoJCX0KCgl9Cn0KCg",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "using System;\nusing System.Collections;\nusing System.Collections.Generic;\nusing System.Linq;\nusing CreatorKitCode;\nusing UnityEngine;\nusing UnityEngine.Events;\nusing Random = UnityEngine.Random;\n\n/// <summary>\n/// This defines a character in the game. The name Character is used in a loose sense, it just means something that\n/// can be attacked and have some stats including health. It could also be an inanimate object like a breakable box.\n/// </summary>\npublic class CharacterData : HighlightableObject, IInteractable\n{\n\tpublic enum Camp\n\t{\n\t\tPLAYER,\n\t\tALLY,\n\t\tENEMY,\n\t\tNEUTRAL,\n\t\tBUILDING,\n\t\tENEMYBUILDING\n\t}\n\tpublic Camp camp;\n\tpublic string CharacterName;\n\tpublic Weapon DefaultWeapon;\n\tpublic Transform WeaponLocator;\n\tpublic float MoveSpeed = 3.0f;\n\tpublic int CorpseChance;\n\t[SerializeField] float m_CorpseRetention;\n\tpublic StatSystem Stats;\n\tpublic InventorySystem Inventory = new InventorySystem();\n\tpublic EquipmentSystem Equipment = new EquipmentSystem();\n\tpublic UnityEvent<Damage> DamageEvent;\n\tpublic UnityEvent<CharacterData> DeathEvent;\n\tpublic UnityEvent<CharacterData> AttackEvent;\n\tpublic Action<CharacterData> KillEnemyAction { get; set; }\n\tpublic Action<Skill, string> SkillAction { get; set; }\n\tpublic Action<AIBase.State> StateUpdateAction { get; set; }\n\tpublic Action<AIBase.State> StateStartAction { get; set; }\n\tpublic Action<EffectData> EffectAction { get; set; }\n\tVector3 m_BirthPos;\n\tpublic Vector3 BirthPos => m_BirthPos;\n\tCharacterData m_Enemy;\n\tpublic CharacterData CurrentEnemy { get { return m_Enemy; } }\n\tpublic SkillUser SkillUser => GetComponent<SkillUser>();\n\tpublic AIBase BaseAI => GetComponent<AIBase>();\n\tpublic IInteractable CurrentInteractor { get { return m_interactor; } set { m_interactor = value; } }\n\tprotected IInteractable m_interactor;\n\tpublic InteractData Data { get { return null; } }\n\tfloat m_AttackCoolDown;\n\n\tvoid Awake()\n\t{\n\t\tInitHighlight();\n\t\tStats.Init(this);\n\t\tInventory.Init(this);\n\t\tEquipment.Init(this);\n\t\tm_BirthPos = transform.position;\n\n\t\tswitch (camp)\n\t\t{\n\t\t\tcase CharacterData.Camp.PLAYER:\n\t\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Player\");\n\t\t\t\tbreak;\n\t\t\tcase CharacterData.Camp.ENEMY:\n\t\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Enemy\");\n\t\t\t\tbreak;\n\t\t\tcase CharacterData.Camp.ALLY:\n\t\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Ally\");\n\t\t\t\tbreak;\n\t\t\tcase CharacterData.Camp.NEUTRAL:\n\t\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Neutral\");\n\t\t\t\tbreak;\n\t\t\tcase CharacterData.Camp.BUILDING:\n\t\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Building\");\n\t\t\t\tbreak;\n\t\t\tcase CharacterData.Camp.ENEMYBUILDING:\n\t\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Enemy\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tEquipment.OnEquiped += item =>\n\t\t{\n\t\t\tif (item.Slot == EquipmentItem.EquipmentSlot.Weapon)\n\t\t\t{\n\t\t\t\tWeapon wp = item as Weapon;\n\t\t\t\tBaseAI.EnemyDetector.Radius = System.Math.Max(wp.Stats.MaxRange, BaseAI.EnemyDetector.Radius);\n\t\t\t\twp.bulletTrans = WeaponLocator;\n\t\t\t\tif (WeaponLocator && item.WorldObjectPrefab)\n\t\t\t\t\tInstantiate(item.WorldObjectPrefab, WeaponLocator, false);\n\t\t\t\t//Helpers.RecursiveLayerChange(obj.transform, LayerMask.NameToLayer(\"PlayerEquipment\"));\n\t\t\t}\n\t\t};\n\n\t\tEquipment.OnUnequip += item =>\n\t\t{\n\t\t\tif (item.Slot == EquipmentItem.EquipmentSlot.Weapon)\n\t\t\t{\n\t\t\t\tforeach (Transform t in WeaponLocator)\n\t\t\t\t\tDestroy(t.gameObject);\n\t\t\t}\n\t\t};\n\t}\n\n\tvoid Start()\n\t{\n\t\tif (DefaultWeapon == null)\n\t\t\tDefaultWeapon = KeyValueData.GetValue<Item>(GameManager.Config.Item, \"wp_unarmed\") as Weapon;\n\t\tEquipment.InitWeapon(DefaultWeapon);\n\t}\n\tvoid Update()\n\t{\n\t\tStats.Tick();\n\n\t\tif (m_AttackCoolDown > 0.0f)\n\t\t\tm_AttackCoolDown -= Time.deltaTime;\n\n\t\tif (m_interactor != null && !m_interactor.CanInteract(this)) m_interactor = null;\n\t}\n\n\tpublic void SetEnemy(CharacterData enemy)\n\t{\n\t\tif (enemy != m_Enemy) m_Enemy = enemy;\n\t}\n\n\tpublic bool CanAttackReach(CharacterData target)\n\t{\n\t\tif (target == null) return false;\n\t\treturn Equipment.Weapon.CanHit(this, target);\n\t}\n\tpublic bool CanAttackReach() { return CanAttackReach(m_Enemy); }\n\tpublic bool CanAttackTarget(CharacterData target)\n\t{\n\t\tif (target == null) return false;\n\t\tif (target.Stats.CurrentHealth == 0)\n\t\t\treturn false;\n\n\t\tif (!CanAttackReach(target))\n\t\t\treturn false;\n\n\t\tif (m_AttackCoolDown > 0.0f)\n\t\t\treturn false;\n\n\t\treturn true;\n\t}\n\tpublic bool CanAttackTarget() { return CanAttackTarget(m_Enemy); }\n\tpublic void CheckAttack()\n\t{\n\t\tif (CanAttackTarget())\n\t\t{\n\t\t\tBaseAI.Stop();\n\t\t\tBaseAI.LookAt(CurrentEnemy.transform);\n\t\t\tAttackTriggered();\n\t\t\tAttackEvent?.Invoke(this);\n\t\t}\n\t}\n\tpublic void AttackFrame()\n\t{\n\t\t//if we can't reach the target anymore when it's time to damage, then that attack miss.\n\t\tif (CurrentEnemy && CanAttackReach(CurrentEnemy))\n\t\t{\n\t\t\tAttack(CurrentEnemy);\n\t\t}\n\t\telse if (CurrentEnemy) Helpers.Log(this, \"AttackMiss: \", $\"{CharacterName}->{CurrentEnemy.CharacterName}\");\n\t\telse Helpers.Log(this, \"AttackMiss: \", $\"{CharacterName}->(Enemy Missed)\");\n\t}\n\tpublic void Attack(CharacterData target)\n\t{\n\t\tif (Equipment.Weapon)\n\t\t{\n\t\t\tEquipment.Weapon.Attack(this, target);\n\t\t\tif (Equipment.Weapon.Stats.AdditionalTargets > 0)\n\t\t\t{\n\t\t\t\tList<GameObject> targets = BaseAI.EnemyDetector.Inners;\n\t\t\t\tint addNum = 0;\n\t\t\t\tforeach (GameObject t in targets)\n\t\t\t\t{\n\t\t\t\t\tif (t != target.gameObject && addNum < Equipment.Weapon.Stats.AdditionalTargets)\n\t\t\t\t\t{\n\t\t\t\t\t\tEquipment.Weapon.Attack(this, t.GetComponent<CharacterData>());\n\t\t\t\t\t\taddNum++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse Debug.LogError(\"Character missing weapon : \" + gameObject);\n\t}\n\tpublic void AttackTriggered()\n\t{\n\t\t//Agility reduce by 0.5% the cooldown to attack (e.g. if agility = 50, 25% faster to attack)\n\t\tm_AttackCoolDown = Math.Max(0.1f, Equipment.Weapon.Stats.Speed - (Stats.stats.agility * 0.5f * 0.001f * Equipment.Weapon.Stats.Speed));\n\t}\n\n\tpublic void Dead()\n\t{\n\t\tDeathEvent?.Invoke(this);\n\t\tbool corpse = (Random.Range(1, 101) <= CorpseChance);\n\t\tif (corpse)\n\t\t{\n\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Interactable\");\n\t\t\tStartCoroutine(DestroyCorpse(m_CorpseRetention));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgameObject.layer = (camp == Camp.PLAYER) ? LayerMask.NameToLayer(\"PlayerCorpse\") : LayerMask.NameToLayer(\"Corpse\");\n\t\t\tStartCoroutine(DestroyCorpse(1.0f));\n\t\t}\n\t}\n\tIEnumerator DestroyCorpse(float time)\n\t{\n\t\tyield return new WaitForSeconds(time);\n\t\tVFXManager.PlayVFX(VFXType.Death, transform.position);\n\t\tDestroy(gameObject);\n\t}\n\n\tpublic bool HoldTools(ResItem item)\n\t{\n\t\tif (item.toolType == Weapon.WeaponType.None) return true;\n\t\tif (Equipment.Weapon && item.toolType == Equipment.Weapon.weaponType) return true;\n\t\tif (Equipment.ViceWeapon && item.toolType == Equipment.ViceWeapon.weaponType) { Equipment.SwitchWeapon(); return true; }\n\t\tforeach (var entry in Inventory.Entries)\n\t\t{\n\t\t\tWeapon wp = entry?.Item as Weapon;\n\t\t\tif (wp && wp.weaponType == item.toolType) { Inventory.EquipItem(wp); return true; }\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic bool CanInteract(IInteractable target) { return BaseAI && BaseAI.isIdle; }\n\tpublic void InteractWith(IInteractable target)\n\t{\n\t\tif (m_interactor == null)\n\t\t{\n\t\t\tm_interactor = target;\n\t\t\tif (m_interactor != null && BaseAI) BaseAI.SetState(AIBase.State.INTERACTING);\n\t\t}\n\t}\n\tpublic string InteractAnim(IInteractable target) { return \"Hit\"; }\n}\n",
			"file": "Assets/Standard Assets/Scripts/CreatorKitCode/CharacterSystem/CharacterData.cs",
			"file_size": 7448,
			"file_write_time": 133548774739448691,
			"settings":
			{
				"buffer_size": 7202,
				"line_ending": "Windows",
				"scratch": true
			},
			"undo_stack":
			[
				[
					7,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1709350555.423313"
					},
					"AQAAAAAAAAAAAAAAUhgAAAAAAABSGAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwoKLy8vIDxzdW1tYXJ5PgovLy8gVGhpcyBkZWZpbmVzIGEgY2hhcmFjdGVyIGluIHRoZSBnYW1lLiBUaGUgbmFtZSBDaGFyYWN0ZXIgaXMgdXNlZCBpbiBhIGxvb3NlIHNlbnNlLCBpdCBqdXN0IG1lYW5zIHNvbWV0aGluZyB0aGF0Ci8vLyBjYW4gYmUgYXR0YWNrZWQgYW5kIGhhdmUgc29tZSBzdGF0cyBpbmNsdWRpbmcgaGVhbHRoLiBJdCBjb3VsZCBhbHNvIGJlIGFuIGluYW5pbWF0ZSBvYmplY3QgbGlrZSBhIGJyZWFrYWJsZSBib3guCi8vLyA8L3N1bW1hcnk+CnB1YmxpYyBjbGFzcyBDaGFyYWN0ZXJEYXRhIDogSGlnaGxpZ2h0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBDYW1wCgl7CgkJUExBWUVSLAoJCUFMTFksCgkJRU5FTVksCgkJTkVVVFJBTCwKCQlCVUlMRElORywKCQlFTkVNWUJVSUxESU5HCgl9CglwdWJsaWMgQ2FtcCBjYW1wOwoJcHVibGljIHN0cmluZyBDaGFyYWN0ZXJOYW1lOwoJcHVibGljIFdlYXBvbiBEZWZhdWx0V2VhcG9uOwoJcHVibGljIFRyYW5zZm9ybSBXZWFwb25Mb2NhdG9yOwoJcHVibGljIGZsb2F0IE1vdmVTcGVlZCA9IDMuMGY7CglwdWJsaWMgaW50IENvcnBzZUNoYW5jZTsKCVtTZXJpYWxpemVGaWVsZF0gZmxvYXQgbV9Db3Jwc2VSZXRlbnRpb247CglwdWJsaWMgU3RhdFN5c3RlbSBTdGF0czsKCXB1YmxpYyBJbnZlbnRvcnlTeXN0ZW0gSW52ZW50b3J5ID0gbmV3IEludmVudG9yeVN5c3RlbSgpOwoJcHVibGljIEVxdWlwbWVudFN5c3RlbSBFcXVpcG1lbnQgPSBuZXcgRXF1aXBtZW50U3lzdGVtKCk7CglwdWJsaWMgQWN0aW9uPEFJQmFzZS5TdGF0ZT4gT25TdGF0ZVVwZGF0ZTsKCXB1YmxpYyBVbml0eUV2ZW50PERhbWFnZT4gT25EYW1hZ2U7CglwdWJsaWMgVW5pdHlFdmVudDxDaGFyYWN0ZXJEYXRhPiBPbkRlYXRoOwoJcHVibGljIExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gRGVhZEVmZmVjdHM7CglwdWJsaWMgQWN0aW9uPENoYXJhY3RlckRhdGE+IE9uQXR0YWNrIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gT25LaWxsRW5lbXkgeyBnZXQ7IHNldDsgfQoJVmVjdG9yMyBtX0JpcnRoUG9zOwoJcHVibGljIFZlY3RvcjMgQmlydGhQb3MgPT4gbV9CaXJ0aFBvczsKCUNoYXJhY3RlckRhdGEgbV9FbmVteTsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIEN1cnJlbnRFbmVteSB7IGdldCB7IHJldHVybiBtX0VuZW15OyB9IH0KCXB1YmxpYyBBSUJhc2UgQmFzZUFJID0+IG1fQWk7CglBSUJhc2UgbV9BaTsKCWZsb2F0IG1fQXR0YWNrQ29vbERvd247CglTdGF0aXN0aWNzSGFuZGxlIG1fcmVjb3JkZXI7CgoJdm9pZCBBd2FrZSgpCgl7CgkJSW5pdEhpZ2hsaWdodCgpOwoJCVN0YXRzLkluaXQodGhpcyk7CgkJSW52ZW50b3J5LkluaXQodGhpcyk7CgkJRXF1aXBtZW50LkluaXQodGhpcyk7CgkJbV9CaXJ0aFBvcyA9IHRyYW5zZm9ybS5wb3NpdGlvbjsKCgkJc3dpdGNoIChjYW1wKQoJCXsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuUExBWUVSOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuRU5FTVk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkFMTFk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJBbGx5Iik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuTkVVVFJBTDoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIk5ldXRyYWwiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5CVUlMRElORzoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkJ1aWxkaW5nIik7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCWJyZWFrOwoJCX0KCX0KCXB1YmxpYyB2b2lkIEFjdGl2ZSgpCgl7CgkJR2V0Q29tcG9uZW50SW5DaGlsZHJlbjxBbmltYXRpb25EaXNwYXRjaGVyPigpPy5BdHRhY2tTdGVwLkFkZExpc3RlbmVyKEF0dGFja0ZyYW1lKTsKCgkJaWYgKERlZmF1bHRXZWFwb24gPT0gbnVsbCkgRGVmYXVsdFdlYXBvbiA9IEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxJdGVtPihHYW1lTWFuYWdlci5Db25maWcuSXRlbSwgIndwX3VuYXJtZWQiKSBhcyBXZWFwb247CgkJRXF1aXBtZW50LkluaXRXZWFwb24oRGVmYXVsdFdlYXBvbik7CgoJCW1fQWkgPSBHZXRDb21wb25lbnQ8QUlCYXNlPigpOwoJCW1fQWkuSW5pdCh0aGlzKTsKCgkJbV9yZWNvcmRlciA9IEdldENvbXBvbmVudDxTdGF0aXN0aWNzSGFuZGxlPigpOwoJCW1fcmVjb3JkZXI/LkluaXQodGhpcyk7CgoJCU9uRGFtYWdlLkFkZExpc3RlbmVyKChkYW1hZ2UpID0+CgkJewoJCQlEYW1hZ2VVSS5JbnN0YW5jZS5OZXdEYW1hZ2UoZGFtYWdlLkdldEZ1bGxEYW1hZ2UoKSwgdHJhbnNmb3JtLnBvc2l0aW9uKTsKCQl9KTsKCgkJRXF1aXBtZW50Lk9uRXF1aXBlZCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCVdlYXBvbiB3cCA9IGl0ZW0gYXMgV2VhcG9uOwoJCQkJQmFzZUFJLkVuZW15RGV0ZWN0b3IuUmFkaXVzID0gU3lzdGVtLk1hdGguTWF4KHdwLlN0YXRzLk1heFJhbmdlLCBCYXNlQUkuRW5lbXlEZXRlY3Rvci5SYWRpdXMpOwoJCQkJd3AuYnVsbGV0VHJhbnMgPSBXZWFwb25Mb2NhdG9yOwoJCQkJaWYgKFdlYXBvbkxvY2F0b3IgJiYgaXRlbS5Xb3JsZE9iamVjdFByZWZhYikKCQkJCQlJbnN0YW50aWF0ZShpdGVtLldvcmxkT2JqZWN0UHJlZmFiLCBXZWFwb25Mb2NhdG9yLCBmYWxzZSk7CgoJCQkJLy9IZWxwZXJzLlJlY3Vyc2l2ZUxheWVyQ2hhbmdlKG9iai50cmFuc2Zvcm0sIExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyRXF1aXBtZW50IikpOwoJCQl9CgkJfTsKCgkJRXF1aXBtZW50Lk9uVW5lcXVpcCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCWZvcmVhY2ggKFRyYW5zZm9ybSB0IGluIFdlYXBvbkxvY2F0b3IpCgkJCQkJRGVzdHJveSh0LmdhbWVPYmplY3QpOwoJCQl9CgkJfTsKCX0KCgl2b2lkIFVwZGF0ZSgpCgl7CgkJU3RhdHMuVGljaygpOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCW1fQXR0YWNrQ29vbERvd24gLT0gVGltZS5kZWx0YVRpbWU7Cgl9CgoJcHVibGljIHZvaWQgU2V0RW5lbXkoQ2hhcmFjdGVyRGF0YSBlbmVteSkKCXsKCQlpZiAoZW5lbXkgIT0gbV9FbmVteSkgbV9FbmVteSA9IGVuZW15OwoJfQoKCXB1YmxpYyBib29sIENhbkF0dGFja1JlYWNoKENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCXJldHVybiBFcXVpcG1lbnQuV2VhcG9uLkNhbkhpdCh0aGlzLCB0YXJnZXQpOwoJfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrUmVhY2goKSB7IHJldHVybiBDYW5BdHRhY2tSZWFjaChtX0VuZW15KTsgfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrVGFyZ2V0KENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCWlmICh0YXJnZXQuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSAwKQoJCQlyZXR1cm4gZmFsc2U7CgoJCWlmICghQ2FuQXR0YWNrUmVhY2godGFyZ2V0KSkKCQkJcmV0dXJuIGZhbHNlOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCXJldHVybiBmYWxzZTsKCgkJcmV0dXJuIHRydWU7Cgl9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tUYXJnZXQoKSB7IHJldHVybiBDYW5BdHRhY2tUYXJnZXQobV9FbmVteSk7IH0KCXB1YmxpYyB2b2lkIENoZWNrQXR0YWNrKCkKCXsKCQlpZiAoQ2FuQXR0YWNrVGFyZ2V0KCkpCgkJewoJCQlCYXNlQUkuU3RvcCgpOwoJCQlCYXNlQUkuTG9va0F0KEN1cnJlbnRFbmVteS50cmFuc2Zvcm0pOwoJCQlBdHRhY2tUcmlnZ2VyZWQoKTsKCQkJT25BdHRhY2s/Lkludm9rZSh0aGlzKTsKCQl9Cgl9Cgl2b2lkIEF0dGFja0ZyYW1lKCkKCXsKCQkvL2lmIHdlIGNhbid0IHJlYWNoIHRoZSB0YXJnZXQgYW55bW9yZSB3aGVuIGl0J3MgdGltZSB0byBkYW1hZ2UsIHRoZW4gdGhhdCBhdHRhY2sgbWlzcy4KCQlpZiAoQ3VycmVudEVuZW15ICYmIENhbkF0dGFja1JlYWNoKEN1cnJlbnRFbmVteSkpCgkJewoJCQlBdHRhY2soQ3VycmVudEVuZW15KTsKCQl9CgkJZWxzZSBpZiAoQ3VycmVudEVuZW15KSBIZWxwZXJzLkxvZyh0aGlzLCAiQXR0YWNrTWlzczogIiwgJCJ7Q2hhcmFjdGVyTmFtZX0tPntDdXJyZW50RW5lbXkuQ2hhcmFjdGVyTmFtZX0iKTsKCQllbHNlIEhlbHBlcnMuTG9nKHRoaXMsICJBdHRhY2tNaXNzOiAiLCAkIntDaGFyYWN0ZXJOYW1lfS0+KEVuZW15IE1pc3NlZCkiKTsKCX0KCXB1YmxpYyB2b2lkIEF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpZiAoRXF1aXBtZW50LldlYXBvbikKCQl7CgkJCUVxdWlwbWVudC5XZWFwb24uQXR0YWNrKHRoaXMsIHRhcmdldCk7CgkJCWlmIChFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzID4gMCkKCQkJewoJCQkJTGlzdDxHYW1lT2JqZWN0PiB0YXJnZXRzID0gQmFzZUFJLkVuZW15RGV0ZWN0b3IuSW5uZXJzOwoJCQkJaW50IGFkZE51bSA9IDA7CgkJCQlmb3JlYWNoIChHYW1lT2JqZWN0IHQgaW4gdGFyZ2V0cykKCQkJCXsKCQkJCQlpZiAodCAhPSB0YXJnZXQuZ2FtZU9iamVjdCAmJiBhZGROdW0gPCBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzKQoJCQkJCXsKCQkJCQkJRXF1aXBtZW50LldlYXBvbi5BdHRhY2sodGhpcywgdC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSk7CgkJCQkJCWFkZE51bSsrOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQllbHNlIERlYnVnLkxvZ0Vycm9yKCJDaGFyYWN0ZXIgbWlzc2luZyB3ZWFwb24gOiAiICsgZ2FtZU9iamVjdCk7Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2tUcmlnZ2VyZWQoKQoJewoJCS8vQWdpbGl0eSByZWR1Y2UgYnkgMC41JSB0aGUgY29vbGRvd24gdG8gYXR0YWNrIChlLmcuIGlmIGFnaWxpdHkgPSA1MCwgMjUlIGZhc3RlciB0byBhdHRhY2spCgkJbV9BdHRhY2tDb29sRG93biA9IE1hdGguTWF4KDAuMWYsIEVxdWlwbWVudC5XZWFwb24uU3RhdHMuU3BlZWQgLSAoU3RhdHMuc3RhdHMuYWdpbGl0eSAqIDAuNWYgKiAwLjAwMWYgKiBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLlNwZWVkKSk7Cgl9CgoJcHVibGljIHZvaWQgRGVhZCgpCgl7CgkJT25EZWF0aD8uSW52b2tlKHRoaXMpOwoJCWJvb2wgY29ycHNlID0gKFJhbmRvbS5SYW5nZSgxLCAxMDEpIDw9IENvcnBzZUNoYW5jZSk7CgkJaWYgKGNvcnBzZSkKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkludGVyYWN0YWJsZSIpOwoJCQlTdGFydENvcm91dGluZShEZXN0cm95Q29ycHNlKG1fQ29ycHNlUmV0ZW50aW9uKSk7CgkJfQoJCWVsc2UKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSAoY2FtcCA9PSBDYW1wLlBMQVlFUikgPyBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllckNvcnBzZSIpIDogTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJDb3Jwc2UiKTsKCQkJaWYgKERlYWRFZmZlY3RzICE9IG51bGwpIEVmZmVjdERhdGEuVGFrZUVmZmVjdHMoRGVhZEVmZmVjdHMsIGdhbWVPYmplY3QsIGdhbWVPYmplY3QpOwoJCQlTdGFydENvcm91dGluZShEZXN0cm95Q29ycHNlKDEuMGYpKTsKCQl9Cgl9CglJRW51bWVyYXRvciBEZXN0cm95Q29ycHNlKGZsb2F0IHRpbWUpCgl7CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcyh0aW1lKTsKCQlWRlhNYW5hZ2VyLlBsYXlWRlgoVkZYVHlwZS5EZWF0aCwgdHJhbnNmb3JtLnBvc2l0aW9uKTsKCQlEZXN0cm95KGdhbWVPYmplY3QpOwoJfQp9Cg",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADMAwAAAAAAAMwDAAAAAAAAAAAAAAAA8L8"
				],
				[
					8,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABSGAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwoKLy8vIDxzdW1tYXJ5PgovLy8gVGhpcyBkZWZpbmVzIGEgY2hhcmFjdGVyIGluIHRoZSBnYW1lLiBUaGUgbmFtZSBDaGFyYWN0ZXIgaXMgdXNlZCBpbiBhIGxvb3NlIHNlbnNlLCBpdCBqdXN0IG1lYW5zIHNvbWV0aGluZyB0aGF0Ci8vLyBjYW4gYmUgYXR0YWNrZWQgYW5kIGhhdmUgc29tZSBzdGF0cyBpbmNsdWRpbmcgaGVhbHRoLiBJdCBjb3VsZCBhbHNvIGJlIGFuIGluYW5pbWF0ZSBvYmplY3QgbGlrZSBhIGJyZWFrYWJsZSBib3guCi8vLyA8L3N1bW1hcnk+CnB1YmxpYyBjbGFzcyBDaGFyYWN0ZXJEYXRhIDogSGlnaGxpZ2h0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBDYW1wCgl7CgkJUExBWUVSLAoJCUFMTFksCgkJRU5FTVksCgkJTkVVVFJBTCwKCQlCVUlMRElORywKCQlFTkVNWUJVSUxESU5HCgl9CglwdWJsaWMgQ2FtcCBjYW1wOwoJcHVibGljIHN0cmluZyBDaGFyYWN0ZXJOYW1lOwoJcHVibGljIFdlYXBvbiBEZWZhdWx0V2VhcG9uOwoJcHVibGljIFRyYW5zZm9ybSBXZWFwb25Mb2NhdG9yOwoJcHVibGljIGZsb2F0IE1vdmVTcGVlZCA9IDMuMGY7CglwdWJsaWMgaW50IENvcnBzZUNoYW5jZTsKCVtTZXJpYWxpemVGaWVsZF0gZmxvYXQgbV9Db3Jwc2VSZXRlbnRpb247CglwdWJsaWMgU3RhdFN5c3RlbSBTdGF0czsKCXB1YmxpYyBJbnZlbnRvcnlTeXN0ZW0gSW52ZW50b3J5ID0gbmV3IEludmVudG9yeVN5c3RlbSgpOwoJcHVibGljIEVxdWlwbWVudFN5c3RlbSBFcXVpcG1lbnQgPSBuZXcgRXF1aXBtZW50U3lzdGVtKCk7CglwdWJsaWMgQWN0aW9uPEFJQmFzZS5TdGF0ZT4gT25TdGF0ZVVwZGF0ZTsKCXB1YmxpYyBVbml0eUV2ZW50PERhbWFnZT4gT25EYW1hZ2U7CglwdWJsaWMgVW5pdHlFdmVudDxDaGFyYWN0ZXJEYXRhPiBPbkRlYXRoOwoJcHVibGljIExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gRGVhZEVmZmVjdHM7CglwdWJsaWMgQWN0aW9uPENoYXJhY3RlckRhdGE+IE9uQXR0YWNrIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gT25LaWxsRW5lbXkgeyBnZXQ7IHNldDsgfQoJVmVjdG9yMyBtX0JpcnRoUG9zOwoJcHVibGljIFZlY3RvcjMgQmlydGhQb3MgPT4gbV9CaXJ0aFBvczsKCUNoYXJhY3RlckRhdGEgbV9FbmVteTsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIEN1cnJlbnRFbmVteSB7IGdldCB7IHJldHVybiBtX0VuZW15OyB9IH0KCXB1YmxpYyBBSUJhc2UgQmFzZUFJID0+IG1fQWk7CglBSUJhc2UgbV9BaTsKCWZsb2F0IG1fQXR0YWNrQ29vbERvd247CglTdGF0aXN0aWNzSGFuZGxlIG1fcmVjb3JkZXI7CgoJdm9pZCBBd2FrZSgpCgl7CgkJSW5pdEhpZ2hsaWdodCgpOwoJCVN0YXRzLkluaXQodGhpcyk7CgkJSW52ZW50b3J5LkluaXQodGhpcyk7CgkJRXF1aXBtZW50LkluaXQodGhpcyk7CgkJbV9CaXJ0aFBvcyA9IHRyYW5zZm9ybS5wb3NpdGlvbjsKCgkJc3dpdGNoIChjYW1wKQoJCXsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuUExBWUVSOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuRU5FTVk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkFMTFk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJBbGx5Iik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuTkVVVFJBTDoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIk5ldXRyYWwiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5CVUlMRElORzoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkJ1aWxkaW5nIik7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCWJyZWFrOwoJCX0KCX0KCXB1YmxpYyB2b2lkIEFjdGl2ZSgpCgl7CgkJR2V0Q29tcG9uZW50SW5DaGlsZHJlbjxBbmltYXRpb25EaXNwYXRjaGVyPigpPy5BdHRhY2tTdGVwLkFkZExpc3RlbmVyKEF0dGFja0ZyYW1lKTsKCgkJaWYgKERlZmF1bHRXZWFwb24gPT0gbnVsbCkgRGVmYXVsdFdlYXBvbiA9IEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxJdGVtPihHYW1lTWFuYWdlci5Db25maWcuSXRlbSwgIndwX3VuYXJtZWQiKSBhcyBXZWFwb247CgkJRXF1aXBtZW50LkluaXRXZWFwb24oRGVmYXVsdFdlYXBvbik7CgoJCW1fQWkgPSBHZXRDb21wb25lbnQ8QUlCYXNlPigpOwoJCW1fQWkuSW5pdCh0aGlzKTsKCgkJbV9yZWNvcmRlciA9IEdldENvbXBvbmVudDxTdGF0aXN0aWNzSGFuZGxlPigpOwoJCW1fcmVjb3JkZXI/LkluaXQodGhpcyk7CgoJCU9uRGFtYWdlLkFkZExpc3RlbmVyKChkYW1hZ2UpID0+CgkJewoJCQlEYW1hZ2VVSS5JbnN0YW5jZS5OZXdEYW1hZ2UoZGFtYWdlLkdldEZ1bGxEYW1hZ2UoKSwgdHJhbnNmb3JtLnBvc2l0aW9uKTsKCQl9KTsKCgkJRXF1aXBtZW50Lk9uRXF1aXBlZCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCVdlYXBvbiB3cCA9IGl0ZW0gYXMgV2VhcG9uOwoJCQkJQmFzZUFJLkVuZW15RGV0ZWN0b3IuUmFkaXVzID0gU3lzdGVtLk1hdGguTWF4KHdwLlN0YXRzLk1heFJhbmdlLCBCYXNlQUkuRW5lbXlEZXRlY3Rvci5SYWRpdXMpOwoJCQkJd3AuYnVsbGV0VHJhbnMgPSBXZWFwb25Mb2NhdG9yOwoJCQkJaWYgKFdlYXBvbkxvY2F0b3IgJiYgaXRlbS5Xb3JsZE9iamVjdFByZWZhYikKCQkJCQlJbnN0YW50aWF0ZShpdGVtLldvcmxkT2JqZWN0UHJlZmFiLCBXZWFwb25Mb2NhdG9yLCBmYWxzZSk7CgoJCQkJLy9IZWxwZXJzLlJlY3Vyc2l2ZUxheWVyQ2hhbmdlKG9iai50cmFuc2Zvcm0sIExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyRXF1aXBtZW50IikpOwoJCQl9CgkJfTsKCgkJRXF1aXBtZW50Lk9uVW5lcXVpcCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCWZvcmVhY2ggKFRyYW5zZm9ybSB0IGluIFdlYXBvbkxvY2F0b3IpCgkJCQkJRGVzdHJveSh0LmdhbWVPYmplY3QpOwoJCQl9CgkJfTsKCX0KCgl2b2lkIFVwZGF0ZSgpCgl7CgkJU3RhdHMuVGljaygpOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCW1fQXR0YWNrQ29vbERvd24gLT0gVGltZS5kZWx0YVRpbWU7Cgl9CgoJcHVibGljIHZvaWQgU2V0RW5lbXkoQ2hhcmFjdGVyRGF0YSBlbmVteSkKCXsKCQlpZiAoZW5lbXkgIT0gbV9FbmVteSkgbV9FbmVteSA9IGVuZW15OwoJfQoKCXB1YmxpYyBib29sIENhbkF0dGFja1JlYWNoKENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCXJldHVybiBFcXVpcG1lbnQuV2VhcG9uLkNhbkhpdCh0aGlzLCB0YXJnZXQpOwoJfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrUmVhY2goKSB7IHJldHVybiBDYW5BdHRhY2tSZWFjaChtX0VuZW15KTsgfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrVGFyZ2V0KENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCWlmICh0YXJnZXQuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSAwKQoJCQlyZXR1cm4gZmFsc2U7CgoJCWlmICghQ2FuQXR0YWNrUmVhY2godGFyZ2V0KSkKCQkJcmV0dXJuIGZhbHNlOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCXJldHVybiBmYWxzZTsKCgkJcmV0dXJuIHRydWU7Cgl9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tUYXJnZXQoKSB7IHJldHVybiBDYW5BdHRhY2tUYXJnZXQobV9FbmVteSk7IH0KCXB1YmxpYyB2b2lkIENoZWNrQXR0YWNrKCkKCXsKCQlpZiAoQ2FuQXR0YWNrVGFyZ2V0KCkpCgkJewoJCQlCYXNlQUkuU3RvcCgpOwoJCQlCYXNlQUkuTG9va0F0KEN1cnJlbnRFbmVteS50cmFuc2Zvcm0pOwoJCQlBdHRhY2tUcmlnZ2VyZWQoKTsKCQkJT25BdHRhY2s/Lkludm9rZSh0aGlzKTsKCQl9Cgl9Cgl2b2lkIEF0dGFja0ZyYW1lKCkKCXsKCQkvL2lmIHdlIGNhbid0IHJlYWNoIHRoZSB0YXJnZXQgYW55bW9yZSB3aGVuIGl0J3MgdGltZSB0byBkYW1hZ2UsIHRoZW4gdGhhdCBhdHRhY2sgbWlzcy4KCQlpZiAoQ3VycmVudEVuZW15ICYmIENhbkF0dGFja1JlYWNoKEN1cnJlbnRFbmVteSkpCgkJewoJCQlBdHRhY2soQ3VycmVudEVuZW15KTsKCQl9CgkJZWxzZSBpZiAoQ3VycmVudEVuZW15KSBIZWxwZXJzLkxvZyh0aGlzLCAiQXR0YWNrTWlzczogIiwgJCJ7Q2hhcmFjdGVyTmFtZX0tPntDdXJyZW50RW5lbXkuQ2hhcmFjdGVyTmFtZX0iKTsKCQllbHNlIEhlbHBlcnMuTG9nKHRoaXMsICJBdHRhY2tNaXNzOiAiLCAkIntDaGFyYWN0ZXJOYW1lfS0+KEVuZW15IE1pc3NlZCkiKTsKCX0KCXB1YmxpYyB2b2lkIEF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpZiAoRXF1aXBtZW50LldlYXBvbikKCQl7CgkJCUVxdWlwbWVudC5XZWFwb24uQXR0YWNrKHRoaXMsIHRhcmdldCk7CgkJCWlmIChFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzID4gMCkKCQkJewoJCQkJTGlzdDxHYW1lT2JqZWN0PiB0YXJnZXRzID0gQmFzZUFJLkVuZW15RGV0ZWN0b3IuSW5uZXJzOwoJCQkJaW50IGFkZE51bSA9IDA7CgkJCQlmb3JlYWNoIChHYW1lT2JqZWN0IHQgaW4gdGFyZ2V0cykKCQkJCXsKCQkJCQlpZiAodCAhPSB0YXJnZXQuZ2FtZU9iamVjdCAmJiBhZGROdW0gPCBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzKQoJCQkJCXsKCQkJCQkJRXF1aXBtZW50LldlYXBvbi5BdHRhY2sodGhpcywgdC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSk7CgkJCQkJCWFkZE51bSsrOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQllbHNlIERlYnVnLkxvZ0Vycm9yKCJDaGFyYWN0ZXIgbWlzc2luZyB3ZWFwb24gOiAiICsgZ2FtZU9iamVjdCk7Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2tUcmlnZ2VyZWQoKQoJewoJCS8vQWdpbGl0eSByZWR1Y2UgYnkgMC41JSB0aGUgY29vbGRvd24gdG8gYXR0YWNrIChlLmcuIGlmIGFnaWxpdHkgPSA1MCwgMjUlIGZhc3RlciB0byBhdHRhY2spCgkJbV9BdHRhY2tDb29sRG93biA9IE1hdGguTWF4KDAuMWYsIEVxdWlwbWVudC5XZWFwb24uU3RhdHMuU3BlZWQgLSAoU3RhdHMuc3RhdHMuYWdpbGl0eSAqIDAuNWYgKiAwLjAwMWYgKiBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLlNwZWVkKSk7Cgl9CgoJcHVibGljIHZvaWQgRGVhZCgpCgl7CgkJT25EZWF0aD8uSW52b2tlKHRoaXMpOwoJCWJvb2wgY29ycHNlID0gKFJhbmRvbS5SYW5nZSgxLCAxMDEpIDw9IENvcnBzZUNoYW5jZSk7CgkJaWYgKGNvcnBzZSkKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkludGVyYWN0YWJsZSIpOwoJCQlTdGFydENvcm91dGluZShEZXN0cm95Q29ycHNlKG1fQ29ycHNlUmV0ZW50aW9uKSk7CgkJfQoJCWVsc2UKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSAoY2FtcCA9PSBDYW1wLlBMQVlFUikgPyBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllckNvcnBzZSIpIDogTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJDb3Jwc2UiKTsKCQkJaWYgKERlYWRFZmZlY3RzICE9IG51bGwpIEVmZmVjdERhdGEuVGFrZUVmZmVjdHMoRGVhZEVmZmVjdHMsIGdhbWVPYmplY3QsIGdhbWVPYmplY3QpOwoJCQlTdGFydENvcm91dGluZShEZXN0cm95Q29ycHNlKDEuMGYpKTsKCQl9Cgl9CglJRW51bWVyYXRvciBEZXN0cm95Q29ycHNlKGZsb2F0IHRpbWUpCgl7CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcyh0aW1lKTsKCQlWRlhNYW5hZ2VyLlBsYXlWRlgoVkZYVHlwZS5EZWF0aCwgdHJhbnNmb3JtLnBvc2l0aW9uKTsKCQlEZXN0cm95KGdhbWVPYmplY3QpOwoJfQp9CgAAAAAAAAAAIBcAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADMAwAAAAAAAMwDAAAAAAAAAAAAAAAA8L8"
				],
				[
					9,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1709374073.1696641"
					},
					"AQAAAAAAAAAAAAAAIBcAAAAAAAAgFwAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwoKLy8vIDxzdW1tYXJ5PgovLy8gVGhpcyBkZWZpbmVzIGEgY2hhcmFjdGVyIGluIHRoZSBnYW1lLiBUaGUgbmFtZSBDaGFyYWN0ZXIgaXMgdXNlZCBpbiBhIGxvb3NlIHNlbnNlLCBpdCBqdXN0IG1lYW5zIHNvbWV0aGluZyB0aGF0Ci8vLyBjYW4gYmUgYXR0YWNrZWQgYW5kIGhhdmUgc29tZSBzdGF0cyBpbmNsdWRpbmcgaGVhbHRoLiBJdCBjb3VsZCBhbHNvIGJlIGFuIGluYW5pbWF0ZSBvYmplY3QgbGlrZSBhIGJyZWFrYWJsZSBib3guCi8vLyA8L3N1bW1hcnk+CnB1YmxpYyBjbGFzcyBDaGFyYWN0ZXJEYXRhIDogSGlnaGxpZ2h0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBDYW1wCgl7CgkJUExBWUVSLAoJCUFMTFksCgkJRU5FTVksCgkJTkVVVFJBTCwKCQlCVUlMRElORywKCQlFTkVNWUJVSUxESU5HCgl9CglwdWJsaWMgQ2FtcCBjYW1wOwoJcHVibGljIHN0cmluZyBDaGFyYWN0ZXJOYW1lOwoJcHVibGljIFdlYXBvbiBEZWZhdWx0V2VhcG9uOwoJcHVibGljIFRyYW5zZm9ybSBXZWFwb25Mb2NhdG9yOwoJcHVibGljIGZsb2F0IE1vdmVTcGVlZCA9IDMuMGY7CglwdWJsaWMgaW50IENvcnBzZUNoYW5jZTsKCVtTZXJpYWxpemVGaWVsZF0gZmxvYXQgbV9Db3Jwc2VSZXRlbnRpb247CglwdWJsaWMgU3RhdFN5c3RlbSBTdGF0czsKCXB1YmxpYyBJbnZlbnRvcnlTeXN0ZW0gSW52ZW50b3J5ID0gbmV3IEludmVudG9yeVN5c3RlbSgpOwoJcHVibGljIEVxdWlwbWVudFN5c3RlbSBFcXVpcG1lbnQgPSBuZXcgRXF1aXBtZW50U3lzdGVtKCk7CglwdWJsaWMgVW5pdHlFdmVudDxEYW1hZ2U+IERhbWFnZUV2ZW50OwoJcHVibGljIFVuaXR5RXZlbnQ8Q2hhcmFjdGVyRGF0YT4gRGVhdGhFdmVudDsKCXB1YmxpYyBBY3Rpb248RWZmZWN0RGF0YT4gRWZmZWN0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gQXR0YWNrQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gS2lsbEVuZW15QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248U2tpbGwsIHN0cmluZz4gU2tpbGxBY3Rpb24geyBnZXQ7IHNldDsgfQoJcHVibGljIExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gRGVhZEVmZmVjdHM7CglWZWN0b3IzIG1fQmlydGhQb3M7CglwdWJsaWMgVmVjdG9yMyBCaXJ0aFBvcyA9PiBtX0JpcnRoUG9zOwoJQ2hhcmFjdGVyRGF0YSBtX0VuZW15OwoJcHVibGljIENoYXJhY3RlckRhdGEgQ3VycmVudEVuZW15IHsgZ2V0IHsgcmV0dXJuIG1fRW5lbXk7IH0gfQoJcHVibGljIEFJQmFzZSBCYXNlQUkgPT4gR2V0Q29tcG9uZW50PEFJQmFzZT4oKTsKCWZsb2F0IG1fQXR0YWNrQ29vbERvd247CgoJdm9pZCBBd2FrZSgpCgl7CgkJSW5pdEhpZ2hsaWdodCgpOwoJCVN0YXRzLkluaXQodGhpcyk7CgkJSW52ZW50b3J5LkluaXQodGhpcyk7CgkJRXF1aXBtZW50LkluaXQodGhpcyk7CgkJbV9CaXJ0aFBvcyA9IHRyYW5zZm9ybS5wb3NpdGlvbjsKCgkJc3dpdGNoIChjYW1wKQoJCXsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuUExBWUVSOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuRU5FTVk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkFMTFk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJBbGx5Iik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuTkVVVFJBTDoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIk5ldXRyYWwiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5CVUlMRElORzoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkJ1aWxkaW5nIik7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCWJyZWFrOwoJCX0KCgkJRXF1aXBtZW50Lk9uRXF1aXBlZCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCVdlYXBvbiB3cCA9IGl0ZW0gYXMgV2VhcG9uOwoJCQkJQmFzZUFJLkVuZW15RGV0ZWN0b3IuUmFkaXVzID0gU3lzdGVtLk1hdGguTWF4KHdwLlN0YXRzLk1heFJhbmdlLCBCYXNlQUkuRW5lbXlEZXRlY3Rvci5SYWRpdXMpOwoJCQkJd3AuYnVsbGV0VHJhbnMgPSBXZWFwb25Mb2NhdG9yOwoJCQkJaWYgKFdlYXBvbkxvY2F0b3IgJiYgaXRlbS5Xb3JsZE9iamVjdFByZWZhYikKCQkJCQlJbnN0YW50aWF0ZShpdGVtLldvcmxkT2JqZWN0UHJlZmFiLCBXZWFwb25Mb2NhdG9yLCBmYWxzZSk7CgkJCQkvL0hlbHBlcnMuUmVjdXJzaXZlTGF5ZXJDaGFuZ2Uob2JqLnRyYW5zZm9ybSwgTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJQbGF5ZXJFcXVpcG1lbnQiKSk7CgkJCX0KCQl9OwoKCQlFcXVpcG1lbnQuT25VbmVxdWlwICs9IGl0ZW0gPT4KCQl7CgkJCWlmIChpdGVtLlNsb3QgPT0gRXF1aXBtZW50SXRlbS5FcXVpcG1lbnRTbG90LldlYXBvbikKCQkJewoJCQkJZm9yZWFjaCAoVHJhbnNmb3JtIHQgaW4gV2VhcG9uTG9jYXRvcikKCQkJCQlEZXN0cm95KHQuZ2FtZU9iamVjdCk7CgkJCX0KCQl9OwoJfQoKCXZvaWQgU3RhcnQoKQoJewoJCWlmIChEZWZhdWx0V2VhcG9uID09IG51bGwpCgkJCURlZmF1bHRXZWFwb24gPSBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8SXRlbT4oR2FtZU1hbmFnZXIuQ29uZmlnLkl0ZW0sICJ3cF91bmFybWVkIikgYXMgV2VhcG9uOwoJCUVxdWlwbWVudC5Jbml0V2VhcG9uKERlZmF1bHRXZWFwb24pOwoJfQoJdm9pZCBVcGRhdGUoKQoJewoJCVN0YXRzLlRpY2soKTsKCgkJaWYgKG1fQXR0YWNrQ29vbERvd24gPiAwLjBmKQoJCQltX0F0dGFja0Nvb2xEb3duIC09IFRpbWUuZGVsdGFUaW1lOwoJfQoKCXB1YmxpYyB2b2lkIFNldEVuZW15KENoYXJhY3RlckRhdGEgZW5lbXkpCgl7CgkJaWYgKGVuZW15ICE9IG1fRW5lbXkpIG1fRW5lbXkgPSBlbmVteTsKCX0KCglwdWJsaWMgYm9vbCBDYW5BdHRhY2tSZWFjaChDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpZiAodGFyZ2V0ID09IG51bGwpIHJldHVybiBmYWxzZTsKCQlyZXR1cm4gRXF1aXBtZW50LldlYXBvbi5DYW5IaXQodGhpcywgdGFyZ2V0KTsKCX0KCXB1YmxpYyBib29sIENhbkF0dGFja1JlYWNoKCkgeyByZXR1cm4gQ2FuQXR0YWNrUmVhY2gobV9FbmVteSk7IH0KCXB1YmxpYyBib29sIENhbkF0dGFja1RhcmdldChDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpZiAodGFyZ2V0ID09IG51bGwpIHJldHVybiBmYWxzZTsKCQlpZiAodGFyZ2V0LlN0YXRzLkN1cnJlbnRIZWFsdGggPT0gMCkKCQkJcmV0dXJuIGZhbHNlOwoKCQlpZiAoIUNhbkF0dGFja1JlYWNoKHRhcmdldCkpCgkJCXJldHVybiBmYWxzZTsKCgkJaWYgKG1fQXR0YWNrQ29vbERvd24gPiAwLjBmKQoJCQlyZXR1cm4gZmFsc2U7CgoJCXJldHVybiB0cnVlOwoJfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrVGFyZ2V0KCkgeyByZXR1cm4gQ2FuQXR0YWNrVGFyZ2V0KG1fRW5lbXkpOyB9CglwdWJsaWMgdm9pZCBDaGVja0F0dGFjaygpCgl7CgkJaWYgKENhbkF0dGFja1RhcmdldCgpKQoJCXsKCQkJQmFzZUFJLlN0b3AoKTsKCQkJQmFzZUFJLkxvb2tBdChDdXJyZW50RW5lbXkudHJhbnNmb3JtKTsKCQkJQXR0YWNrVHJpZ2dlcmVkKCk7CgkJCUF0dGFja0FjdGlvbj8uSW52b2tlKHRoaXMpOwoJCX0KCX0KCXB1YmxpYyB2b2lkIEF0dGFja0ZyYW1lKCkKCXsKCQkvL2lmIHdlIGNhbid0IHJlYWNoIHRoZSB0YXJnZXQgYW55bW9yZSB3aGVuIGl0J3MgdGltZSB0byBkYW1hZ2UsIHRoZW4gdGhhdCBhdHRhY2sgbWlzcy4KCQlpZiAoQ3VycmVudEVuZW15ICYmIENhbkF0dGFja1JlYWNoKEN1cnJlbnRFbmVteSkpCgkJewoJCQlBdHRhY2soQ3VycmVudEVuZW15KTsKCQl9CgkJZWxzZSBpZiAoQ3VycmVudEVuZW15KSBIZWxwZXJzLkxvZyh0aGlzLCAiQXR0YWNrTWlzczogIiwgJCJ7Q2hhcmFjdGVyTmFtZX0tPntDdXJyZW50RW5lbXkuQ2hhcmFjdGVyTmFtZX0iKTsKCQllbHNlIEhlbHBlcnMuTG9nKHRoaXMsICJBdHRhY2tNaXNzOiAiLCAkIntDaGFyYWN0ZXJOYW1lfS0+KEVuZW15IE1pc3NlZCkiKTsKCX0KCXB1YmxpYyB2b2lkIEF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpZiAoRXF1aXBtZW50LldlYXBvbikKCQl7CgkJCUVxdWlwbWVudC5XZWFwb24uQXR0YWNrKHRoaXMsIHRhcmdldCk7CgkJCWlmIChFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzID4gMCkKCQkJewoJCQkJTGlzdDxHYW1lT2JqZWN0PiB0YXJnZXRzID0gQmFzZUFJLkVuZW15RGV0ZWN0b3IuSW5uZXJzOwoJCQkJaW50IGFkZE51bSA9IDA7CgkJCQlmb3JlYWNoIChHYW1lT2JqZWN0IHQgaW4gdGFyZ2V0cykKCQkJCXsKCQkJCQlpZiAodCAhPSB0YXJnZXQuZ2FtZU9iamVjdCAmJiBhZGROdW0gPCBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzKQoJCQkJCXsKCQkJCQkJRXF1aXBtZW50LldlYXBvbi5BdHRhY2sodGhpcywgdC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSk7CgkJCQkJCWFkZE51bSsrOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQllbHNlIERlYnVnLkxvZ0Vycm9yKCJDaGFyYWN0ZXIgbWlzc2luZyB3ZWFwb24gOiAiICsgZ2FtZU9iamVjdCk7Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2tUcmlnZ2VyZWQoKQoJewoJCS8vQWdpbGl0eSByZWR1Y2UgYnkgMC41JSB0aGUgY29vbGRvd24gdG8gYXR0YWNrIChlLmcuIGlmIGFnaWxpdHkgPSA1MCwgMjUlIGZhc3RlciB0byBhdHRhY2spCgkJbV9BdHRhY2tDb29sRG93biA9IE1hdGguTWF4KDAuMWYsIEVxdWlwbWVudC5XZWFwb24uU3RhdHMuU3BlZWQgLSAoU3RhdHMuc3RhdHMuYWdpbGl0eSAqIDAuNWYgKiAwLjAwMWYgKiBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLlNwZWVkKSk7Cgl9CgoJcHVibGljIHZvaWQgRGVhZCgpCgl7CgkJRGVhdGhFdmVudD8uSW52b2tlKHRoaXMpOwoJCWJvb2wgY29ycHNlID0gKFJhbmRvbS5SYW5nZSgxLCAxMDEpIDw9IENvcnBzZUNoYW5jZSk7CgkJaWYgKGNvcnBzZSkKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkludGVyYWN0YWJsZSIpOwoJCQlTdGFydENvcm91dGluZShEZXN0cm95Q29ycHNlKG1fQ29ycHNlUmV0ZW50aW9uKSk7CgkJfQoJCWVsc2UKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSAoY2FtcCA9PSBDYW1wLlBMQVlFUikgPyBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllckNvcnBzZSIpIDogTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJDb3Jwc2UiKTsKCQkJaWYgKERlYWRFZmZlY3RzICE9IG51bGwpIEVmZmVjdERhdGEuVGFrZUVmZmVjdHMoRGVhZEVmZmVjdHMsIGdhbWVPYmplY3QsIGdhbWVPYmplY3QpOwoJCQlTdGFydENvcm91dGluZShEZXN0cm95Q29ycHNlKDEuMGYpKTsKCQl9Cgl9CglJRW51bWVyYXRvciBEZXN0cm95Q29ycHNlKGZsb2F0IHRpbWUpCgl7CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcyh0aW1lKTsKCQlWRlhNYW5hZ2VyLlBsYXlWRlgoVkZYVHlwZS5EZWF0aCwgdHJhbnNmb3JtLnBvc2l0aW9uKTsKCQlEZXN0cm95KGdhbWVPYmplY3QpOwoJfQp9Cg",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADMAwAAAAAAAMwDAAAAAAAAAAAAAAAA8L8"
				],
				[
					10,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAgFwAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwoKLy8vIDxzdW1tYXJ5PgovLy8gVGhpcyBkZWZpbmVzIGEgY2hhcmFjdGVyIGluIHRoZSBnYW1lLiBUaGUgbmFtZSBDaGFyYWN0ZXIgaXMgdXNlZCBpbiBhIGxvb3NlIHNlbnNlLCBpdCBqdXN0IG1lYW5zIHNvbWV0aGluZyB0aGF0Ci8vLyBjYW4gYmUgYXR0YWNrZWQgYW5kIGhhdmUgc29tZSBzdGF0cyBpbmNsdWRpbmcgaGVhbHRoLiBJdCBjb3VsZCBhbHNvIGJlIGFuIGluYW5pbWF0ZSBvYmplY3QgbGlrZSBhIGJyZWFrYWJsZSBib3guCi8vLyA8L3N1bW1hcnk+CnB1YmxpYyBjbGFzcyBDaGFyYWN0ZXJEYXRhIDogSGlnaGxpZ2h0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBDYW1wCgl7CgkJUExBWUVSLAoJCUFMTFksCgkJRU5FTVksCgkJTkVVVFJBTCwKCQlCVUlMRElORywKCQlFTkVNWUJVSUxESU5HCgl9CglwdWJsaWMgQ2FtcCBjYW1wOwoJcHVibGljIHN0cmluZyBDaGFyYWN0ZXJOYW1lOwoJcHVibGljIFdlYXBvbiBEZWZhdWx0V2VhcG9uOwoJcHVibGljIFRyYW5zZm9ybSBXZWFwb25Mb2NhdG9yOwoJcHVibGljIGZsb2F0IE1vdmVTcGVlZCA9IDMuMGY7CglwdWJsaWMgaW50IENvcnBzZUNoYW5jZTsKCVtTZXJpYWxpemVGaWVsZF0gZmxvYXQgbV9Db3Jwc2VSZXRlbnRpb247CglwdWJsaWMgU3RhdFN5c3RlbSBTdGF0czsKCXB1YmxpYyBJbnZlbnRvcnlTeXN0ZW0gSW52ZW50b3J5ID0gbmV3IEludmVudG9yeVN5c3RlbSgpOwoJcHVibGljIEVxdWlwbWVudFN5c3RlbSBFcXVpcG1lbnQgPSBuZXcgRXF1aXBtZW50U3lzdGVtKCk7CglwdWJsaWMgVW5pdHlFdmVudDxEYW1hZ2U+IERhbWFnZUV2ZW50OwoJcHVibGljIFVuaXR5RXZlbnQ8Q2hhcmFjdGVyRGF0YT4gRGVhdGhFdmVudDsKCXB1YmxpYyBBY3Rpb248RWZmZWN0RGF0YT4gRWZmZWN0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gQXR0YWNrQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gS2lsbEVuZW15QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248U2tpbGwsIHN0cmluZz4gU2tpbGxBY3Rpb24geyBnZXQ7IHNldDsgfQoJcHVibGljIExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gRGVhZEVmZmVjdHM7CglWZWN0b3IzIG1fQmlydGhQb3M7CglwdWJsaWMgVmVjdG9yMyBCaXJ0aFBvcyA9PiBtX0JpcnRoUG9zOwoJQ2hhcmFjdGVyRGF0YSBtX0VuZW15OwoJcHVibGljIENoYXJhY3RlckRhdGEgQ3VycmVudEVuZW15IHsgZ2V0IHsgcmV0dXJuIG1fRW5lbXk7IH0gfQoJcHVibGljIEFJQmFzZSBCYXNlQUkgPT4gR2V0Q29tcG9uZW50PEFJQmFzZT4oKTsKCWZsb2F0IG1fQXR0YWNrQ29vbERvd247CgoJdm9pZCBBd2FrZSgpCgl7CgkJSW5pdEhpZ2hsaWdodCgpOwoJCVN0YXRzLkluaXQodGhpcyk7CgkJSW52ZW50b3J5LkluaXQodGhpcyk7CgkJRXF1aXBtZW50LkluaXQodGhpcyk7CgkJbV9CaXJ0aFBvcyA9IHRyYW5zZm9ybS5wb3NpdGlvbjsKCgkJc3dpdGNoIChjYW1wKQoJCXsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuUExBWUVSOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuRU5FTVk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkFMTFk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJBbGx5Iik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuTkVVVFJBTDoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIk5ldXRyYWwiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5CVUlMRElORzoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkJ1aWxkaW5nIik7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCWJyZWFrOwoJCX0KCgkJRXF1aXBtZW50Lk9uRXF1aXBlZCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCVdlYXBvbiB3cCA9IGl0ZW0gYXMgV2VhcG9uOwoJCQkJQmFzZUFJLkVuZW15RGV0ZWN0b3IuUmFkaXVzID0gU3lzdGVtLk1hdGguTWF4KHdwLlN0YXRzLk1heFJhbmdlLCBCYXNlQUkuRW5lbXlEZXRlY3Rvci5SYWRpdXMpOwoJCQkJd3AuYnVsbGV0VHJhbnMgPSBXZWFwb25Mb2NhdG9yOwoJCQkJaWYgKFdlYXBvbkxvY2F0b3IgJiYgaXRlbS5Xb3JsZE9iamVjdFByZWZhYikKCQkJCQlJbnN0YW50aWF0ZShpdGVtLldvcmxkT2JqZWN0UHJlZmFiLCBXZWFwb25Mb2NhdG9yLCBmYWxzZSk7CgkJCQkvL0hlbHBlcnMuUmVjdXJzaXZlTGF5ZXJDaGFuZ2Uob2JqLnRyYW5zZm9ybSwgTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJQbGF5ZXJFcXVpcG1lbnQiKSk7CgkJCX0KCQl9OwoKCQlFcXVpcG1lbnQuT25VbmVxdWlwICs9IGl0ZW0gPT4KCQl7CgkJCWlmIChpdGVtLlNsb3QgPT0gRXF1aXBtZW50SXRlbS5FcXVpcG1lbnRTbG90LldlYXBvbikKCQkJewoJCQkJZm9yZWFjaCAoVHJhbnNmb3JtIHQgaW4gV2VhcG9uTG9jYXRvcikKCQkJCQlEZXN0cm95KHQuZ2FtZU9iamVjdCk7CgkJCX0KCQl9OwoJfQoKCXZvaWQgU3RhcnQoKQoJewoJCWlmIChEZWZhdWx0V2VhcG9uID09IG51bGwpCgkJCURlZmF1bHRXZWFwb24gPSBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8SXRlbT4oR2FtZU1hbmFnZXIuQ29uZmlnLkl0ZW0sICJ3cF91bmFybWVkIikgYXMgV2VhcG9uOwoJCUVxdWlwbWVudC5Jbml0V2VhcG9uKERlZmF1bHRXZWFwb24pOwoJfQoJdm9pZCBVcGRhdGUoKQoJewoJCVN0YXRzLlRpY2soKTsKCgkJaWYgKG1fQXR0YWNrQ29vbERvd24gPiAwLjBmKQoJCQltX0F0dGFja0Nvb2xEb3duIC09IFRpbWUuZGVsdGFUaW1lOwoJfQoKCXB1YmxpYyB2b2lkIFNldEVuZW15KENoYXJhY3RlckRhdGEgZW5lbXkpCgl7CgkJaWYgKGVuZW15ICE9IG1fRW5lbXkpIG1fRW5lbXkgPSBlbmVteTsKCX0KCglwdWJsaWMgYm9vbCBDYW5BdHRhY2tSZWFjaChDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpZiAodGFyZ2V0ID09IG51bGwpIHJldHVybiBmYWxzZTsKCQlyZXR1cm4gRXF1aXBtZW50LldlYXBvbi5DYW5IaXQodGhpcywgdGFyZ2V0KTsKCX0KCXB1YmxpYyBib29sIENhbkF0dGFja1JlYWNoKCkgeyByZXR1cm4gQ2FuQXR0YWNrUmVhY2gobV9FbmVteSk7IH0KCXB1YmxpYyBib29sIENhbkF0dGFja1RhcmdldChDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpZiAodGFyZ2V0ID09IG51bGwpIHJldHVybiBmYWxzZTsKCQlpZiAodGFyZ2V0LlN0YXRzLkN1cnJlbnRIZWFsdGggPT0gMCkKCQkJcmV0dXJuIGZhbHNlOwoKCQlpZiAoIUNhbkF0dGFja1JlYWNoKHRhcmdldCkpCgkJCXJldHVybiBmYWxzZTsKCgkJaWYgKG1fQXR0YWNrQ29vbERvd24gPiAwLjBmKQoJCQlyZXR1cm4gZmFsc2U7CgoJCXJldHVybiB0cnVlOwoJfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrVGFyZ2V0KCkgeyByZXR1cm4gQ2FuQXR0YWNrVGFyZ2V0KG1fRW5lbXkpOyB9CglwdWJsaWMgdm9pZCBDaGVja0F0dGFjaygpCgl7CgkJaWYgKENhbkF0dGFja1RhcmdldCgpKQoJCXsKCQkJQmFzZUFJLlN0b3AoKTsKCQkJQmFzZUFJLkxvb2tBdChDdXJyZW50RW5lbXkudHJhbnNmb3JtKTsKCQkJQXR0YWNrVHJpZ2dlcmVkKCk7CgkJCUF0dGFja0FjdGlvbj8uSW52b2tlKHRoaXMpOwoJCX0KCX0KCXB1YmxpYyB2b2lkIEF0dGFja0ZyYW1lKCkKCXsKCQkvL2lmIHdlIGNhbid0IHJlYWNoIHRoZSB0YXJnZXQgYW55bW9yZSB3aGVuIGl0J3MgdGltZSB0byBkYW1hZ2UsIHRoZW4gdGhhdCBhdHRhY2sgbWlzcy4KCQlpZiAoQ3VycmVudEVuZW15ICYmIENhbkF0dGFja1JlYWNoKEN1cnJlbnRFbmVteSkpCgkJewoJCQlBdHRhY2soQ3VycmVudEVuZW15KTsKCQl9CgkJZWxzZSBpZiAoQ3VycmVudEVuZW15KSBIZWxwZXJzLkxvZyh0aGlzLCAiQXR0YWNrTWlzczogIiwgJCJ7Q2hhcmFjdGVyTmFtZX0tPntDdXJyZW50RW5lbXkuQ2hhcmFjdGVyTmFtZX0iKTsKCQllbHNlIEhlbHBlcnMuTG9nKHRoaXMsICJBdHRhY2tNaXNzOiAiLCAkIntDaGFyYWN0ZXJOYW1lfS0+KEVuZW15IE1pc3NlZCkiKTsKCX0KCXB1YmxpYyB2b2lkIEF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpZiAoRXF1aXBtZW50LldlYXBvbikKCQl7CgkJCUVxdWlwbWVudC5XZWFwb24uQXR0YWNrKHRoaXMsIHRhcmdldCk7CgkJCWlmIChFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzID4gMCkKCQkJewoJCQkJTGlzdDxHYW1lT2JqZWN0PiB0YXJnZXRzID0gQmFzZUFJLkVuZW15RGV0ZWN0b3IuSW5uZXJzOwoJCQkJaW50IGFkZE51bSA9IDA7CgkJCQlmb3JlYWNoIChHYW1lT2JqZWN0IHQgaW4gdGFyZ2V0cykKCQkJCXsKCQkJCQlpZiAodCAhPSB0YXJnZXQuZ2FtZU9iamVjdCAmJiBhZGROdW0gPCBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzKQoJCQkJCXsKCQkJCQkJRXF1aXBtZW50LldlYXBvbi5BdHRhY2sodGhpcywgdC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSk7CgkJCQkJCWFkZE51bSsrOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQllbHNlIERlYnVnLkxvZ0Vycm9yKCJDaGFyYWN0ZXIgbWlzc2luZyB3ZWFwb24gOiAiICsgZ2FtZU9iamVjdCk7Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2tUcmlnZ2VyZWQoKQoJewoJCS8vQWdpbGl0eSByZWR1Y2UgYnkgMC41JSB0aGUgY29vbGRvd24gdG8gYXR0YWNrIChlLmcuIGlmIGFnaWxpdHkgPSA1MCwgMjUlIGZhc3RlciB0byBhdHRhY2spCgkJbV9BdHRhY2tDb29sRG93biA9IE1hdGguTWF4KDAuMWYsIEVxdWlwbWVudC5XZWFwb24uU3RhdHMuU3BlZWQgLSAoU3RhdHMuc3RhdHMuYWdpbGl0eSAqIDAuNWYgKiAwLjAwMWYgKiBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLlNwZWVkKSk7Cgl9CgoJcHVibGljIHZvaWQgRGVhZCgpCgl7CgkJRGVhdGhFdmVudD8uSW52b2tlKHRoaXMpOwoJCWJvb2wgY29ycHNlID0gKFJhbmRvbS5SYW5nZSgxLCAxMDEpIDw9IENvcnBzZUNoYW5jZSk7CgkJaWYgKGNvcnBzZSkKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkludGVyYWN0YWJsZSIpOwoJCQlTdGFydENvcm91dGluZShEZXN0cm95Q29ycHNlKG1fQ29ycHNlUmV0ZW50aW9uKSk7CgkJfQoJCWVsc2UKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSAoY2FtcCA9PSBDYW1wLlBMQVlFUikgPyBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllckNvcnBzZSIpIDogTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJDb3Jwc2UiKTsKCQkJaWYgKERlYWRFZmZlY3RzICE9IG51bGwpIEVmZmVjdERhdGEuVGFrZUVmZmVjdHMoRGVhZEVmZmVjdHMsIGdhbWVPYmplY3QsIGdhbWVPYmplY3QpOwoJCQlTdGFydENvcm91dGluZShEZXN0cm95Q29ycHNlKDEuMGYpKTsKCQl9Cgl9CglJRW51bWVyYXRvciBEZXN0cm95Q29ycHNlKGZsb2F0IHRpbWUpCgl7CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcyh0aW1lKTsKCQlWRlhNYW5hZ2VyLlBsYXlWRlgoVkZYVHlwZS5EZWF0aCwgdHJhbnNmb3JtLnBvc2l0aW9uKTsKCQlEZXN0cm95KGdhbWVPYmplY3QpOwoJfQp9CgAAAAAAAAAA0xcAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADMAwAAAAAAAMwDAAAAAAAAAAAAAAAA8L8"
				],
				[
					11,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1709386878.4346852"
					},
					"AQAAAAAAAAAAAAAA0xcAAAAAAADTFwAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwoKLy8vIDxzdW1tYXJ5PgovLy8gVGhpcyBkZWZpbmVzIGEgY2hhcmFjdGVyIGluIHRoZSBnYW1lLiBUaGUgbmFtZSBDaGFyYWN0ZXIgaXMgdXNlZCBpbiBhIGxvb3NlIHNlbnNlLCBpdCBqdXN0IG1lYW5zIHNvbWV0aGluZyB0aGF0Ci8vLyBjYW4gYmUgYXR0YWNrZWQgYW5kIGhhdmUgc29tZSBzdGF0cyBpbmNsdWRpbmcgaGVhbHRoLiBJdCBjb3VsZCBhbHNvIGJlIGFuIGluYW5pbWF0ZSBvYmplY3QgbGlrZSBhIGJyZWFrYWJsZSBib3guCi8vLyA8L3N1bW1hcnk+CnB1YmxpYyBjbGFzcyBDaGFyYWN0ZXJEYXRhIDogSGlnaGxpZ2h0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBDYW1wCgl7CgkJUExBWUVSLAoJCUFMTFksCgkJRU5FTVksCgkJTkVVVFJBTCwKCQlCVUlMRElORywKCQlFTkVNWUJVSUxESU5HCgl9CglwdWJsaWMgQ2FtcCBjYW1wOwoJcHVibGljIHN0cmluZyBDaGFyYWN0ZXJOYW1lOwoJcHVibGljIFdlYXBvbiBEZWZhdWx0V2VhcG9uOwoJcHVibGljIFRyYW5zZm9ybSBXZWFwb25Mb2NhdG9yOwoJcHVibGljIGZsb2F0IE1vdmVTcGVlZCA9IDMuMGY7CglwdWJsaWMgaW50IENvcnBzZUNoYW5jZTsKCVtTZXJpYWxpemVGaWVsZF0gZmxvYXQgbV9Db3Jwc2VSZXRlbnRpb247CglwdWJsaWMgU3RhdFN5c3RlbSBTdGF0czsKCXB1YmxpYyBJbnZlbnRvcnlTeXN0ZW0gSW52ZW50b3J5ID0gbmV3IEludmVudG9yeVN5c3RlbSgpOwoJcHVibGljIEVxdWlwbWVudFN5c3RlbSBFcXVpcG1lbnQgPSBuZXcgRXF1aXBtZW50U3lzdGVtKCk7CglwdWJsaWMgVW5pdHlFdmVudDxEYW1hZ2U+IERhbWFnZUV2ZW50OwoJcHVibGljIFVuaXR5RXZlbnQ8Q2hhcmFjdGVyRGF0YT4gRGVhdGhFdmVudDsKCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gQXR0YWNrQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gS2lsbEVuZW15QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248U2tpbGwsIHN0cmluZz4gU2tpbGxBY3Rpb24geyBnZXQ7IHNldDsgfQoJcHVibGljIEFjdGlvbjxBSUJhc2UuU3RhdGU+IFN0YXRlVXBkYXRlQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248QUlCYXNlLlN0YXRlPiBTdGF0ZVN0YXJ0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248RWZmZWN0RGF0YT4gRWZmZWN0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+IERlYWRFZmZlY3RzOwoJVmVjdG9yMyBtX0JpcnRoUG9zOwoJcHVibGljIFZlY3RvcjMgQmlydGhQb3MgPT4gbV9CaXJ0aFBvczsKCUNoYXJhY3RlckRhdGEgbV9FbmVteTsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIEN1cnJlbnRFbmVteSB7IGdldCB7IHJldHVybiBtX0VuZW15OyB9IH0KCXB1YmxpYyBTa2lsbFVzZXIgU2tpbGxVc2VyID0+IEdldENvbXBvbmVudDxTa2lsbFVzZXI+KCk7CglwdWJsaWMgQUlCYXNlIEJhc2VBSSA9PiBHZXRDb21wb25lbnQ8QUlCYXNlPigpOwoJZmxvYXQgbV9BdHRhY2tDb29sRG93bjsKCgl2b2lkIEF3YWtlKCkKCXsKCQlJbml0SGlnaGxpZ2h0KCk7CgkJU3RhdHMuSW5pdCh0aGlzKTsKCQlJbnZlbnRvcnkuSW5pdCh0aGlzKTsKCQlFcXVpcG1lbnQuSW5pdCh0aGlzKTsKCQltX0JpcnRoUG9zID0gdHJhbnNmb3JtLnBvc2l0aW9uOwoKCQlzd2l0Y2ggKGNhbXApCgkJewoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5QTEFZRVI6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJQbGF5ZXIiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5FTkVNWToKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkVuZW15Iik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuQUxMWToKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkFsbHkiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5ORVVUUkFMOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiTmV1dHJhbCIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkJVSUxESU5HOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiQnVpbGRpbmciKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJYnJlYWs7CgkJfQoKCQlFcXVpcG1lbnQuT25FcXVpcGVkICs9IGl0ZW0gPT4KCQl7CgkJCWlmIChpdGVtLlNsb3QgPT0gRXF1aXBtZW50SXRlbS5FcXVpcG1lbnRTbG90LldlYXBvbikKCQkJewoJCQkJV2VhcG9uIHdwID0gaXRlbSBhcyBXZWFwb247CgkJCQlCYXNlQUkuRW5lbXlEZXRlY3Rvci5SYWRpdXMgPSBTeXN0ZW0uTWF0aC5NYXgod3AuU3RhdHMuTWF4UmFuZ2UsIEJhc2VBSS5FbmVteURldGVjdG9yLlJhZGl1cyk7CgkJCQl3cC5idWxsZXRUcmFucyA9IFdlYXBvbkxvY2F0b3I7CgkJCQlpZiAoV2VhcG9uTG9jYXRvciAmJiBpdGVtLldvcmxkT2JqZWN0UHJlZmFiKQoJCQkJCUluc3RhbnRpYXRlKGl0ZW0uV29ybGRPYmplY3RQcmVmYWIsIFdlYXBvbkxvY2F0b3IsIGZhbHNlKTsKCQkJCS8vSGVscGVycy5SZWN1cnNpdmVMYXllckNoYW5nZShvYmoudHJhbnNmb3JtLCBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllckVxdWlwbWVudCIpKTsKCQkJfQoJCX07CgoJCUVxdWlwbWVudC5PblVuZXF1aXAgKz0gaXRlbSA9PgoJCXsKCQkJaWYgKGl0ZW0uU2xvdCA9PSBFcXVpcG1lbnRJdGVtLkVxdWlwbWVudFNsb3QuV2VhcG9uKQoJCQl7CgkJCQlmb3JlYWNoIChUcmFuc2Zvcm0gdCBpbiBXZWFwb25Mb2NhdG9yKQoJCQkJCURlc3Ryb3kodC5nYW1lT2JqZWN0KTsKCQkJfQoJCX07Cgl9CgoJdm9pZCBTdGFydCgpCgl7CgkJaWYgKERlZmF1bHRXZWFwb24gPT0gbnVsbCkKCQkJRGVmYXVsdFdlYXBvbiA9IEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxJdGVtPihHYW1lTWFuYWdlci5Db25maWcuSXRlbSwgIndwX3VuYXJtZWQiKSBhcyBXZWFwb247CgkJRXF1aXBtZW50LkluaXRXZWFwb24oRGVmYXVsdFdlYXBvbik7Cgl9Cgl2b2lkIFVwZGF0ZSgpCgl7CgkJU3RhdHMuVGljaygpOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCW1fQXR0YWNrQ29vbERvd24gLT0gVGltZS5kZWx0YVRpbWU7Cgl9CgoJcHVibGljIHZvaWQgU2V0RW5lbXkoQ2hhcmFjdGVyRGF0YSBlbmVteSkKCXsKCQlpZiAoZW5lbXkgIT0gbV9FbmVteSkgbV9FbmVteSA9IGVuZW15OwoJfQoKCXB1YmxpYyBib29sIENhbkF0dGFja1JlYWNoKENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCXJldHVybiBFcXVpcG1lbnQuV2VhcG9uLkNhbkhpdCh0aGlzLCB0YXJnZXQpOwoJfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrUmVhY2goKSB7IHJldHVybiBDYW5BdHRhY2tSZWFjaChtX0VuZW15KTsgfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrVGFyZ2V0KENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCWlmICh0YXJnZXQuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSAwKQoJCQlyZXR1cm4gZmFsc2U7CgoJCWlmICghQ2FuQXR0YWNrUmVhY2godGFyZ2V0KSkKCQkJcmV0dXJuIGZhbHNlOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCXJldHVybiBmYWxzZTsKCgkJcmV0dXJuIHRydWU7Cgl9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tUYXJnZXQoKSB7IHJldHVybiBDYW5BdHRhY2tUYXJnZXQobV9FbmVteSk7IH0KCXB1YmxpYyB2b2lkIENoZWNrQXR0YWNrKCkKCXsKCQlpZiAoQ2FuQXR0YWNrVGFyZ2V0KCkpCgkJewoJCQlCYXNlQUkuU3RvcCgpOwoJCQlCYXNlQUkuTG9va0F0KEN1cnJlbnRFbmVteS50cmFuc2Zvcm0pOwoJCQlBdHRhY2tUcmlnZ2VyZWQoKTsKCQkJQXR0YWNrQWN0aW9uPy5JbnZva2UodGhpcyk7CgkJfQoJfQoJcHVibGljIHZvaWQgQXR0YWNrRnJhbWUoKQoJewoJCS8vaWYgd2UgY2FuJ3QgcmVhY2ggdGhlIHRhcmdldCBhbnltb3JlIHdoZW4gaXQncyB0aW1lIHRvIGRhbWFnZSwgdGhlbiB0aGF0IGF0dGFjayBtaXNzLgoJCWlmIChDdXJyZW50RW5lbXkgJiYgQ2FuQXR0YWNrUmVhY2goQ3VycmVudEVuZW15KSkKCQl7CgkJCUF0dGFjayhDdXJyZW50RW5lbXkpOwoJCX0KCQllbHNlIGlmIChDdXJyZW50RW5lbXkpIEhlbHBlcnMuTG9nKHRoaXMsICJBdHRhY2tNaXNzOiAiLCAkIntDaGFyYWN0ZXJOYW1lfS0+e0N1cnJlbnRFbmVteS5DaGFyYWN0ZXJOYW1lfSIpOwoJCWVsc2UgSGVscGVycy5Mb2codGhpcywgIkF0dGFja01pc3M6ICIsICQie0NoYXJhY3Rlck5hbWV9LT4oRW5lbXkgTWlzc2VkKSIpOwoJfQoJcHVibGljIHZvaWQgQXR0YWNrKENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmIChFcXVpcG1lbnQuV2VhcG9uKQoJCXsKCQkJRXF1aXBtZW50LldlYXBvbi5BdHRhY2sodGhpcywgdGFyZ2V0KTsKCQkJaWYgKEVxdWlwbWVudC5XZWFwb24uU3RhdHMuQWRkaXRpb25hbFRhcmdldHMgPiAwKQoJCQl7CgkJCQlMaXN0PEdhbWVPYmplY3Q+IHRhcmdldHMgPSBCYXNlQUkuRW5lbXlEZXRlY3Rvci5Jbm5lcnM7CgkJCQlpbnQgYWRkTnVtID0gMDsKCQkJCWZvcmVhY2ggKEdhbWVPYmplY3QgdCBpbiB0YXJnZXRzKQoJCQkJewoJCQkJCWlmICh0ICE9IHRhcmdldC5nYW1lT2JqZWN0ICYmIGFkZE51bSA8IEVxdWlwbWVudC5XZWFwb24uU3RhdHMuQWRkaXRpb25hbFRhcmdldHMpCgkJCQkJewoJCQkJCQlFcXVpcG1lbnQuV2VhcG9uLkF0dGFjayh0aGlzLCB0LkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpKTsKCQkJCQkJYWRkTnVtKys7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJCWVsc2UgRGVidWcuTG9nRXJyb3IoIkNoYXJhY3RlciBtaXNzaW5nIHdlYXBvbiA6ICIgKyBnYW1lT2JqZWN0KTsKCX0KCXB1YmxpYyB2b2lkIEF0dGFja1RyaWdnZXJlZCgpCgl7CgkJLy9BZ2lsaXR5IHJlZHVjZSBieSAwLjUlIHRoZSBjb29sZG93biB0byBhdHRhY2sgKGUuZy4gaWYgYWdpbGl0eSA9IDUwLCAyNSUgZmFzdGVyIHRvIGF0dGFjaykKCQltX0F0dGFja0Nvb2xEb3duID0gTWF0aC5NYXgoMC4xZiwgRXF1aXBtZW50LldlYXBvbi5TdGF0cy5TcGVlZCAtIChTdGF0cy5zdGF0cy5hZ2lsaXR5ICogMC41ZiAqIDAuMDAxZiAqIEVxdWlwbWVudC5XZWFwb24uU3RhdHMuU3BlZWQpKTsKCX0KCglwdWJsaWMgdm9pZCBEZWFkKCkKCXsKCQlEZWF0aEV2ZW50Py5JbnZva2UodGhpcyk7CgkJYm9vbCBjb3Jwc2UgPSAoUmFuZG9tLlJhbmdlKDEsIDEwMSkgPD0gQ29ycHNlQ2hhbmNlKTsKCQlpZiAoY29ycHNlKQoJCXsKCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiSW50ZXJhY3RhYmxlIik7CgkJCVN0YXJ0Q29yb3V0aW5lKERlc3Ryb3lDb3Jwc2UobV9Db3Jwc2VSZXRlbnRpb24pKTsKCQl9CgkJZWxzZQoJCXsKCQkJZ2FtZU9iamVjdC5sYXllciA9IChjYW1wID09IENhbXAuUExBWUVSKSA/IExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyQ29ycHNlIikgOiBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkNvcnBzZSIpOwoJCQlpZiAoRGVhZEVmZmVjdHMgIT0gbnVsbCkgRWZmZWN0RGF0YS5UYWtlRWZmZWN0cyhEZWFkRWZmZWN0cywgZ2FtZU9iamVjdCwgZ2FtZU9iamVjdCk7CgkJCVN0YXJ0Q29yb3V0aW5lKERlc3Ryb3lDb3Jwc2UoMS4wZikpOwoJCX0KCX0KCUlFbnVtZXJhdG9yIERlc3Ryb3lDb3Jwc2UoZmxvYXQgdGltZSkKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHRpbWUpOwoJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkRlYXRoLCB0cmFuc2Zvcm0ucG9zaXRpb24pOwoJCURlc3Ryb3koZ2FtZU9iamVjdCk7Cgl9Cn0K",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADMAwAAAAAAAMwDAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADTFwAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLkV2ZW50czsKdXNpbmcgUmFuZG9tID0gVW5pdHlFbmdpbmUuUmFuZG9tOwoKLy8vIDxzdW1tYXJ5PgovLy8gVGhpcyBkZWZpbmVzIGEgY2hhcmFjdGVyIGluIHRoZSBnYW1lLiBUaGUgbmFtZSBDaGFyYWN0ZXIgaXMgdXNlZCBpbiBhIGxvb3NlIHNlbnNlLCBpdCBqdXN0IG1lYW5zIHNvbWV0aGluZyB0aGF0Ci8vLyBjYW4gYmUgYXR0YWNrZWQgYW5kIGhhdmUgc29tZSBzdGF0cyBpbmNsdWRpbmcgaGVhbHRoLiBJdCBjb3VsZCBhbHNvIGJlIGFuIGluYW5pbWF0ZSBvYmplY3QgbGlrZSBhIGJyZWFrYWJsZSBib3guCi8vLyA8L3N1bW1hcnk+CnB1YmxpYyBjbGFzcyBDaGFyYWN0ZXJEYXRhIDogSGlnaGxpZ2h0YWJsZU9iamVjdAp7CglwdWJsaWMgZW51bSBDYW1wCgl7CgkJUExBWUVSLAoJCUFMTFksCgkJRU5FTVksCgkJTkVVVFJBTCwKCQlCVUlMRElORywKCQlFTkVNWUJVSUxESU5HCgl9CglwdWJsaWMgQ2FtcCBjYW1wOwoJcHVibGljIHN0cmluZyBDaGFyYWN0ZXJOYW1lOwoJcHVibGljIFdlYXBvbiBEZWZhdWx0V2VhcG9uOwoJcHVibGljIFRyYW5zZm9ybSBXZWFwb25Mb2NhdG9yOwoJcHVibGljIGZsb2F0IE1vdmVTcGVlZCA9IDMuMGY7CglwdWJsaWMgaW50IENvcnBzZUNoYW5jZTsKCVtTZXJpYWxpemVGaWVsZF0gZmxvYXQgbV9Db3Jwc2VSZXRlbnRpb247CglwdWJsaWMgU3RhdFN5c3RlbSBTdGF0czsKCXB1YmxpYyBJbnZlbnRvcnlTeXN0ZW0gSW52ZW50b3J5ID0gbmV3IEludmVudG9yeVN5c3RlbSgpOwoJcHVibGljIEVxdWlwbWVudFN5c3RlbSBFcXVpcG1lbnQgPSBuZXcgRXF1aXBtZW50U3lzdGVtKCk7CglwdWJsaWMgVW5pdHlFdmVudDxEYW1hZ2U+IERhbWFnZUV2ZW50OwoJcHVibGljIFVuaXR5RXZlbnQ8Q2hhcmFjdGVyRGF0YT4gRGVhdGhFdmVudDsKCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gQXR0YWNrQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gS2lsbEVuZW15QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248U2tpbGwsIHN0cmluZz4gU2tpbGxBY3Rpb24geyBnZXQ7IHNldDsgfQoJcHVibGljIEFjdGlvbjxBSUJhc2UuU3RhdGU+IFN0YXRlVXBkYXRlQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248QUlCYXNlLlN0YXRlPiBTdGF0ZVN0YXJ0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248RWZmZWN0RGF0YT4gRWZmZWN0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+IERlYWRFZmZlY3RzOwoJVmVjdG9yMyBtX0JpcnRoUG9zOwoJcHVibGljIFZlY3RvcjMgQmlydGhQb3MgPT4gbV9CaXJ0aFBvczsKCUNoYXJhY3RlckRhdGEgbV9FbmVteTsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIEN1cnJlbnRFbmVteSB7IGdldCB7IHJldHVybiBtX0VuZW15OyB9IH0KCXB1YmxpYyBTa2lsbFVzZXIgU2tpbGxVc2VyID0+IEdldENvbXBvbmVudDxTa2lsbFVzZXI+KCk7CglwdWJsaWMgQUlCYXNlIEJhc2VBSSA9PiBHZXRDb21wb25lbnQ8QUlCYXNlPigpOwoJZmxvYXQgbV9BdHRhY2tDb29sRG93bjsKCgl2b2lkIEF3YWtlKCkKCXsKCQlJbml0SGlnaGxpZ2h0KCk7CgkJU3RhdHMuSW5pdCh0aGlzKTsKCQlJbnZlbnRvcnkuSW5pdCh0aGlzKTsKCQlFcXVpcG1lbnQuSW5pdCh0aGlzKTsKCQltX0JpcnRoUG9zID0gdHJhbnNmb3JtLnBvc2l0aW9uOwoKCQlzd2l0Y2ggKGNhbXApCgkJewoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5QTEFZRVI6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJQbGF5ZXIiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5FTkVNWToKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkVuZW15Iik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuQUxMWToKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkFsbHkiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5ORVVUUkFMOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiTmV1dHJhbCIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkJVSUxESU5HOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiQnVpbGRpbmciKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJYnJlYWs7CgkJfQoKCQlFcXVpcG1lbnQuT25FcXVpcGVkICs9IGl0ZW0gPT4KCQl7CgkJCWlmIChpdGVtLlNsb3QgPT0gRXF1aXBtZW50SXRlbS5FcXVpcG1lbnRTbG90LldlYXBvbikKCQkJewoJCQkJV2VhcG9uIHdwID0gaXRlbSBhcyBXZWFwb247CgkJCQlCYXNlQUkuRW5lbXlEZXRlY3Rvci5SYWRpdXMgPSBTeXN0ZW0uTWF0aC5NYXgod3AuU3RhdHMuTWF4UmFuZ2UsIEJhc2VBSS5FbmVteURldGVjdG9yLlJhZGl1cyk7CgkJCQl3cC5idWxsZXRUcmFucyA9IFdlYXBvbkxvY2F0b3I7CgkJCQlpZiAoV2VhcG9uTG9jYXRvciAmJiBpdGVtLldvcmxkT2JqZWN0UHJlZmFiKQoJCQkJCUluc3RhbnRpYXRlKGl0ZW0uV29ybGRPYmplY3RQcmVmYWIsIFdlYXBvbkxvY2F0b3IsIGZhbHNlKTsKCQkJCS8vSGVscGVycy5SZWN1cnNpdmVMYXllckNoYW5nZShvYmoudHJhbnNmb3JtLCBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllckVxdWlwbWVudCIpKTsKCQkJfQoJCX07CgoJCUVxdWlwbWVudC5PblVuZXF1aXAgKz0gaXRlbSA9PgoJCXsKCQkJaWYgKGl0ZW0uU2xvdCA9PSBFcXVpcG1lbnRJdGVtLkVxdWlwbWVudFNsb3QuV2VhcG9uKQoJCQl7CgkJCQlmb3JlYWNoIChUcmFuc2Zvcm0gdCBpbiBXZWFwb25Mb2NhdG9yKQoJCQkJCURlc3Ryb3kodC5nYW1lT2JqZWN0KTsKCQkJfQoJCX07Cgl9CgoJdm9pZCBTdGFydCgpCgl7CgkJaWYgKERlZmF1bHRXZWFwb24gPT0gbnVsbCkKCQkJRGVmYXVsdFdlYXBvbiA9IEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxJdGVtPihHYW1lTWFuYWdlci5Db25maWcuSXRlbSwgIndwX3VuYXJtZWQiKSBhcyBXZWFwb247CgkJRXF1aXBtZW50LkluaXRXZWFwb24oRGVmYXVsdFdlYXBvbik7Cgl9Cgl2b2lkIFVwZGF0ZSgpCgl7CgkJU3RhdHMuVGljaygpOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCW1fQXR0YWNrQ29vbERvd24gLT0gVGltZS5kZWx0YVRpbWU7Cgl9CgoJcHVibGljIHZvaWQgU2V0RW5lbXkoQ2hhcmFjdGVyRGF0YSBlbmVteSkKCXsKCQlpZiAoZW5lbXkgIT0gbV9FbmVteSkgbV9FbmVteSA9IGVuZW15OwoJfQoKCXB1YmxpYyBib29sIENhbkF0dGFja1JlYWNoKENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCXJldHVybiBFcXVpcG1lbnQuV2VhcG9uLkNhbkhpdCh0aGlzLCB0YXJnZXQpOwoJfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrUmVhY2goKSB7IHJldHVybiBDYW5BdHRhY2tSZWFjaChtX0VuZW15KTsgfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrVGFyZ2V0KENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCWlmICh0YXJnZXQuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSAwKQoJCQlyZXR1cm4gZmFsc2U7CgoJCWlmICghQ2FuQXR0YWNrUmVhY2godGFyZ2V0KSkKCQkJcmV0dXJuIGZhbHNlOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCXJldHVybiBmYWxzZTsKCgkJcmV0dXJuIHRydWU7Cgl9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tUYXJnZXQoKSB7IHJldHVybiBDYW5BdHRhY2tUYXJnZXQobV9FbmVteSk7IH0KCXB1YmxpYyB2b2lkIENoZWNrQXR0YWNrKCkKCXsKCQlpZiAoQ2FuQXR0YWNrVGFyZ2V0KCkpCgkJewoJCQlCYXNlQUkuU3RvcCgpOwoJCQlCYXNlQUkuTG9va0F0KEN1cnJlbnRFbmVteS50cmFuc2Zvcm0pOwoJCQlBdHRhY2tUcmlnZ2VyZWQoKTsKCQkJQXR0YWNrQWN0aW9uPy5JbnZva2UodGhpcyk7CgkJfQoJfQoJcHVibGljIHZvaWQgQXR0YWNrRnJhbWUoKQoJewoJCS8vaWYgd2UgY2FuJ3QgcmVhY2ggdGhlIHRhcmdldCBhbnltb3JlIHdoZW4gaXQncyB0aW1lIHRvIGRhbWFnZSwgdGhlbiB0aGF0IGF0dGFjayBtaXNzLgoJCWlmIChDdXJyZW50RW5lbXkgJiYgQ2FuQXR0YWNrUmVhY2goQ3VycmVudEVuZW15KSkKCQl7CgkJCUF0dGFjayhDdXJyZW50RW5lbXkpOwoJCX0KCQllbHNlIGlmIChDdXJyZW50RW5lbXkpIEhlbHBlcnMuTG9nKHRoaXMsICJBdHRhY2tNaXNzOiAiLCAkIntDaGFyYWN0ZXJOYW1lfS0+e0N1cnJlbnRFbmVteS5DaGFyYWN0ZXJOYW1lfSIpOwoJCWVsc2UgSGVscGVycy5Mb2codGhpcywgIkF0dGFja01pc3M6ICIsICQie0NoYXJhY3Rlck5hbWV9LT4oRW5lbXkgTWlzc2VkKSIpOwoJfQoJcHVibGljIHZvaWQgQXR0YWNrKENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmIChFcXVpcG1lbnQuV2VhcG9uKQoJCXsKCQkJRXF1aXBtZW50LldlYXBvbi5BdHRhY2sodGhpcywgdGFyZ2V0KTsKCQkJaWYgKEVxdWlwbWVudC5XZWFwb24uU3RhdHMuQWRkaXRpb25hbFRhcmdldHMgPiAwKQoJCQl7CgkJCQlMaXN0PEdhbWVPYmplY3Q+IHRhcmdldHMgPSBCYXNlQUkuRW5lbXlEZXRlY3Rvci5Jbm5lcnM7CgkJCQlpbnQgYWRkTnVtID0gMDsKCQkJCWZvcmVhY2ggKEdhbWVPYmplY3QgdCBpbiB0YXJnZXRzKQoJCQkJewoJCQkJCWlmICh0ICE9IHRhcmdldC5nYW1lT2JqZWN0ICYmIGFkZE51bSA8IEVxdWlwbWVudC5XZWFwb24uU3RhdHMuQWRkaXRpb25hbFRhcmdldHMpCgkJCQkJewoJCQkJCQlFcXVpcG1lbnQuV2VhcG9uLkF0dGFjayh0aGlzLCB0LkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpKTsKCQkJCQkJYWRkTnVtKys7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJCWVsc2UgRGVidWcuTG9nRXJyb3IoIkNoYXJhY3RlciBtaXNzaW5nIHdlYXBvbiA6ICIgKyBnYW1lT2JqZWN0KTsKCX0KCXB1YmxpYyB2b2lkIEF0dGFja1RyaWdnZXJlZCgpCgl7CgkJLy9BZ2lsaXR5IHJlZHVjZSBieSAwLjUlIHRoZSBjb29sZG93biB0byBhdHRhY2sgKGUuZy4gaWYgYWdpbGl0eSA9IDUwLCAyNSUgZmFzdGVyIHRvIGF0dGFjaykKCQltX0F0dGFja0Nvb2xEb3duID0gTWF0aC5NYXgoMC4xZiwgRXF1aXBtZW50LldlYXBvbi5TdGF0cy5TcGVlZCAtIChTdGF0cy5zdGF0cy5hZ2lsaXR5ICogMC41ZiAqIDAuMDAxZiAqIEVxdWlwbWVudC5XZWFwb24uU3RhdHMuU3BlZWQpKTsKCX0KCglwdWJsaWMgdm9pZCBEZWFkKCkKCXsKCQlEZWF0aEV2ZW50Py5JbnZva2UodGhpcyk7CgkJYm9vbCBjb3Jwc2UgPSAoUmFuZG9tLlJhbmdlKDEsIDEwMSkgPD0gQ29ycHNlQ2hhbmNlKTsKCQlpZiAoY29ycHNlKQoJCXsKCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiSW50ZXJhY3RhYmxlIik7CgkJCVN0YXJ0Q29yb3V0aW5lKERlc3Ryb3lDb3Jwc2UobV9Db3Jwc2VSZXRlbnRpb24pKTsKCQl9CgkJZWxzZQoJCXsKCQkJZ2FtZU9iamVjdC5sYXllciA9IChjYW1wID09IENhbXAuUExBWUVSKSA/IExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyQ29ycHNlIikgOiBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkNvcnBzZSIpOwoJCQlpZiAoRGVhZEVmZmVjdHMgIT0gbnVsbCkgRWZmZWN0RGF0YS5UYWtlRWZmZWN0cyhEZWFkRWZmZWN0cywgZ2FtZU9iamVjdCwgZ2FtZU9iamVjdCk7CgkJCVN0YXJ0Q29yb3V0aW5lKERlc3Ryb3lDb3Jwc2UoMS4wZikpOwoJCX0KCX0KCUlFbnVtZXJhdG9yIERlc3Ryb3lDb3Jwc2UoZmxvYXQgdGltZSkKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHRpbWUpOwoJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkRlYXRoLCB0cmFuc2Zvcm0ucG9zaXRpb24pOwoJCURlc3Ryb3koZ2FtZU9iamVjdCk7Cgl9Cn0KAAAAAAAAAACdGwAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAzAMAAAAAAADMAwAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACdGwAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uTGlucTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBVbml0eUVuZ2luZS5FdmVudHM7CnVzaW5nIFJhbmRvbSA9IFVuaXR5RW5naW5lLlJhbmRvbTsKCi8vLyA8c3VtbWFyeT4KLy8vIFRoaXMgZGVmaW5lcyBhIGNoYXJhY3RlciBpbiB0aGUgZ2FtZS4gVGhlIG5hbWUgQ2hhcmFjdGVyIGlzIHVzZWQgaW4gYSBsb29zZSBzZW5zZSwgaXQganVzdCBtZWFucyBzb21ldGhpbmcgdGhhdAovLy8gY2FuIGJlIGF0dGFja2VkIGFuZCBoYXZlIHNvbWUgc3RhdHMgaW5jbHVkaW5nIGhlYWx0aC4gSXQgY291bGQgYWxzbyBiZSBhbiBpbmFuaW1hdGUgb2JqZWN0IGxpa2UgYSBicmVha2FibGUgYm94LgovLy8gPC9zdW1tYXJ5PgpwdWJsaWMgY2xhc3MgQ2hhcmFjdGVyRGF0YSA6IEhpZ2hsaWdodGFibGVPYmplY3QsIElJbnRlcmFjdGFibGUKewoJcHVibGljIGVudW0gQ2FtcAoJewoJCVBMQVlFUiwKCQlBTExZLAoJCUVORU1ZLAoJCU5FVVRSQUwsCgkJQlVJTERJTkcsCgkJRU5FTVlCVUlMRElORwoJfQoJcHVibGljIENhbXAgY2FtcDsKCXB1YmxpYyBzdHJpbmcgQ2hhcmFjdGVyTmFtZTsKCXB1YmxpYyBXZWFwb24gRGVmYXVsdFdlYXBvbjsKCXB1YmxpYyBUcmFuc2Zvcm0gV2VhcG9uTG9jYXRvcjsKCXB1YmxpYyBmbG9hdCBNb3ZlU3BlZWQgPSAzLjBmOwoJcHVibGljIGludCBDb3Jwc2VDaGFuY2U7CglbU2VyaWFsaXplRmllbGRdIGZsb2F0IG1fQ29ycHNlUmV0ZW50aW9uOwoJcHVibGljIFN0YXRTeXN0ZW0gU3RhdHM7CglwdWJsaWMgSW52ZW50b3J5U3lzdGVtIEludmVudG9yeSA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0oKTsKCXB1YmxpYyBFcXVpcG1lbnRTeXN0ZW0gRXF1aXBtZW50ID0gbmV3IEVxdWlwbWVudFN5c3RlbSgpOwoJcHVibGljIFVuaXR5RXZlbnQ8RGFtYWdlPiBEYW1hZ2VFdmVudDsKCXB1YmxpYyBVbml0eUV2ZW50PENoYXJhY3RlckRhdGE+IERlYXRoRXZlbnQ7CglwdWJsaWMgVW5pdHlFdmVudDxDaGFyYWN0ZXJEYXRhPiBBdHRhY2tFdmVudDsKCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gS2lsbEVuZW15QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248U2tpbGwsIHN0cmluZz4gU2tpbGxBY3Rpb24geyBnZXQ7IHNldDsgfQoJcHVibGljIEFjdGlvbjxBSUJhc2UuU3RhdGU+IFN0YXRlVXBkYXRlQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248QUlCYXNlLlN0YXRlPiBTdGF0ZVN0YXJ0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248RWZmZWN0RGF0YT4gRWZmZWN0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCVZlY3RvcjMgbV9CaXJ0aFBvczsKCXB1YmxpYyBWZWN0b3IzIEJpcnRoUG9zID0+IG1fQmlydGhQb3M7CglDaGFyYWN0ZXJEYXRhIG1fRW5lbXk7CglwdWJsaWMgQ2hhcmFjdGVyRGF0YSBDdXJyZW50RW5lbXkgeyBnZXQgeyByZXR1cm4gbV9FbmVteTsgfSB9CglwdWJsaWMgU2tpbGxVc2VyIFNraWxsVXNlciA9PiBHZXRDb21wb25lbnQ8U2tpbGxVc2VyPigpOwoJcHVibGljIEFJQmFzZSBCYXNlQUkgPT4gR2V0Q29tcG9uZW50PEFJQmFzZT4oKTsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yID0+IG1faW50ZXJhY3RvcjsKCXByb3RlY3RlZCBJSW50ZXJhY3RhYmxlIG1faW50ZXJhY3RvcjsKCWZsb2F0IG1fQXR0YWNrQ29vbERvd247CgoJdm9pZCBBd2FrZSgpCgl7CgkJSW5pdEhpZ2hsaWdodCgpOwoJCVN0YXRzLkluaXQodGhpcyk7CgkJSW52ZW50b3J5LkluaXQodGhpcyk7CgkJRXF1aXBtZW50LkluaXQodGhpcyk7CgkJbV9CaXJ0aFBvcyA9IHRyYW5zZm9ybS5wb3NpdGlvbjsKCgkJc3dpdGNoIChjYW1wKQoJCXsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuUExBWUVSOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuRU5FTVk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkFMTFk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJBbGx5Iik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuTkVVVFJBTDoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIk5ldXRyYWwiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5CVUlMRElORzoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkJ1aWxkaW5nIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuRU5FTVlCVUlMRElORzoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkVuZW15Iik7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCWJyZWFrOwoJCX0KCgkJRXF1aXBtZW50Lk9uRXF1aXBlZCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCVdlYXBvbiB3cCA9IGl0ZW0gYXMgV2VhcG9uOwoJCQkJQmFzZUFJLkVuZW15RGV0ZWN0b3IuUmFkaXVzID0gU3lzdGVtLk1hdGguTWF4KHdwLlN0YXRzLk1heFJhbmdlLCBCYXNlQUkuRW5lbXlEZXRlY3Rvci5SYWRpdXMpOwoJCQkJd3AuYnVsbGV0VHJhbnMgPSBXZWFwb25Mb2NhdG9yOwoJCQkJaWYgKFdlYXBvbkxvY2F0b3IgJiYgaXRlbS5Xb3JsZE9iamVjdFByZWZhYikKCQkJCQlJbnN0YW50aWF0ZShpdGVtLldvcmxkT2JqZWN0UHJlZmFiLCBXZWFwb25Mb2NhdG9yLCBmYWxzZSk7CgkJCQkvL0hlbHBlcnMuUmVjdXJzaXZlTGF5ZXJDaGFuZ2Uob2JqLnRyYW5zZm9ybSwgTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJQbGF5ZXJFcXVpcG1lbnQiKSk7CgkJCX0KCQl9OwoKCQlFcXVpcG1lbnQuT25VbmVxdWlwICs9IGl0ZW0gPT4KCQl7CgkJCWlmIChpdGVtLlNsb3QgPT0gRXF1aXBtZW50SXRlbS5FcXVpcG1lbnRTbG90LldlYXBvbikKCQkJewoJCQkJZm9yZWFjaCAoVHJhbnNmb3JtIHQgaW4gV2VhcG9uTG9jYXRvcikKCQkJCQlEZXN0cm95KHQuZ2FtZU9iamVjdCk7CgkJCX0KCQl9OwoJfQoKCXZvaWQgU3RhcnQoKQoJewoJCWlmIChEZWZhdWx0V2VhcG9uID09IG51bGwpCgkJCURlZmF1bHRXZWFwb24gPSBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8SXRlbT4oR2FtZU1hbmFnZXIuQ29uZmlnLkl0ZW0sICJ3cF91bmFybWVkIikgYXMgV2VhcG9uOwoJCUVxdWlwbWVudC5Jbml0V2VhcG9uKERlZmF1bHRXZWFwb24pOwoJfQoJdm9pZCBVcGRhdGUoKQoJewoJCVN0YXRzLlRpY2soKTsKCgkJaWYgKG1fQXR0YWNrQ29vbERvd24gPiAwLjBmKQoJCQltX0F0dGFja0Nvb2xEb3duIC09IFRpbWUuZGVsdGFUaW1lOwoKCQlpZiAobV9pbnRlcmFjdG9yICE9IG51bGwgJiYgIW1faW50ZXJhY3Rvci5DYW5JbnRlcmFjdCh0aGlzKSkgbV9pbnRlcmFjdG9yID0gbnVsbDsKCX0KCglwdWJsaWMgdm9pZCBTZXRFbmVteShDaGFyYWN0ZXJEYXRhIGVuZW15KQoJewoJCWlmIChlbmVteSAhPSBtX0VuZW15KSBtX0VuZW15ID0gZW5lbXk7Cgl9CgoJcHVibGljIGJvb2wgQ2FuQXR0YWNrUmVhY2goQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgl7CgkJaWYgKHRhcmdldCA9PSBudWxsKSByZXR1cm4gZmFsc2U7CgkJcmV0dXJuIEVxdWlwbWVudC5XZWFwb24uQ2FuSGl0KHRoaXMsIHRhcmdldCk7Cgl9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tSZWFjaCgpIHsgcmV0dXJuIENhbkF0dGFja1JlYWNoKG1fRW5lbXkpOyB9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tUYXJnZXQoQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgl7CgkJaWYgKHRhcmdldCA9PSBudWxsKSByZXR1cm4gZmFsc2U7CgkJaWYgKHRhcmdldC5TdGF0cy5DdXJyZW50SGVhbHRoID09IDApCgkJCXJldHVybiBmYWxzZTsKCgkJaWYgKCFDYW5BdHRhY2tSZWFjaCh0YXJnZXQpKQoJCQlyZXR1cm4gZmFsc2U7CgoJCWlmIChtX0F0dGFja0Nvb2xEb3duID4gMC4wZikKCQkJcmV0dXJuIGZhbHNlOwoKCQlyZXR1cm4gdHJ1ZTsKCX0KCXB1YmxpYyBib29sIENhbkF0dGFja1RhcmdldCgpIHsgcmV0dXJuIENhbkF0dGFja1RhcmdldChtX0VuZW15KTsgfQoJcHVibGljIHZvaWQgQ2hlY2tBdHRhY2soKQoJewoJCWlmIChDYW5BdHRhY2tUYXJnZXQoKSkKCQl7CgkJCUJhc2VBSS5TdG9wKCk7CgkJCUJhc2VBSS5Mb29rQXQoQ3VycmVudEVuZW15LnRyYW5zZm9ybSk7CgkJCUF0dGFja1RyaWdnZXJlZCgpOwoJCQlBdHRhY2tFdmVudD8uSW52b2tlKHRoaXMpOwoJCX0KCX0KCXB1YmxpYyB2b2lkIEF0dGFja0ZyYW1lKCkKCXsKCQkvL2lmIHdlIGNhbid0IHJlYWNoIHRoZSB0YXJnZXQgYW55bW9yZSB3aGVuIGl0J3MgdGltZSB0byBkYW1hZ2UsIHRoZW4gdGhhdCBhdHRhY2sgbWlzcy4KCQlpZiAoQ3VycmVudEVuZW15ICYmIENhbkF0dGFja1JlYWNoKEN1cnJlbnRFbmVteSkpCgkJewoJCQlBdHRhY2soQ3VycmVudEVuZW15KTsKCQl9CgkJZWxzZSBpZiAoQ3VycmVudEVuZW15KSBIZWxwZXJzLkxvZyh0aGlzLCAiQXR0YWNrTWlzczogIiwgJCJ7Q2hhcmFjdGVyTmFtZX0tPntDdXJyZW50RW5lbXkuQ2hhcmFjdGVyTmFtZX0iKTsKCQllbHNlIEhlbHBlcnMuTG9nKHRoaXMsICJBdHRhY2tNaXNzOiAiLCAkIntDaGFyYWN0ZXJOYW1lfS0+KEVuZW15IE1pc3NlZCkiKTsKCX0KCXB1YmxpYyB2b2lkIEF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpZiAoRXF1aXBtZW50LldlYXBvbikKCQl7CgkJCUVxdWlwbWVudC5XZWFwb24uQXR0YWNrKHRoaXMsIHRhcmdldCk7CgkJCWlmIChFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzID4gMCkKCQkJewoJCQkJTGlzdDxHYW1lT2JqZWN0PiB0YXJnZXRzID0gQmFzZUFJLkVuZW15RGV0ZWN0b3IuSW5uZXJzOwoJCQkJaW50IGFkZE51bSA9IDA7CgkJCQlmb3JlYWNoIChHYW1lT2JqZWN0IHQgaW4gdGFyZ2V0cykKCQkJCXsKCQkJCQlpZiAodCAhPSB0YXJnZXQuZ2FtZU9iamVjdCAmJiBhZGROdW0gPCBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzKQoJCQkJCXsKCQkJCQkJRXF1aXBtZW50LldlYXBvbi5BdHRhY2sodGhpcywgdC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSk7CgkJCQkJCWFkZE51bSsrOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQllbHNlIERlYnVnLkxvZ0Vycm9yKCJDaGFyYWN0ZXIgbWlzc2luZyB3ZWFwb24gOiAiICsgZ2FtZU9iamVjdCk7Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2tUcmlnZ2VyZWQoKQoJewoJCS8vQWdpbGl0eSByZWR1Y2UgYnkgMC41JSB0aGUgY29vbGRvd24gdG8gYXR0YWNrIChlLmcuIGlmIGFnaWxpdHkgPSA1MCwgMjUlIGZhc3RlciB0byBhdHRhY2spCgkJbV9BdHRhY2tDb29sRG93biA9IE1hdGguTWF4KDAuMWYsIEVxdWlwbWVudC5XZWFwb24uU3RhdHMuU3BlZWQgLSAoU3RhdHMuc3RhdHMuYWdpbGl0eSAqIDAuNWYgKiAwLjAwMWYgKiBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLlNwZWVkKSk7Cgl9CgoJcHVibGljIHZvaWQgRGVhZCgpCgl7CgkJRGVhdGhFdmVudD8uSW52b2tlKHRoaXMpOwoJCWJvb2wgY29ycHNlID0gKFJhbmRvbS5SYW5nZSgxLCAxMDEpIDw9IENvcnBzZUNoYW5jZSk7CgkJaWYgKGNvcnBzZSkKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkludGVyYWN0YWJsZSIpOwoJCQlTdGFydENvcm91dGluZShEZXN0cm95Q29ycHNlKG1fQ29ycHNlUmV0ZW50aW9uKSk7CgkJfQoJCWVsc2UKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSAoY2FtcCA9PSBDYW1wLlBMQVlFUikgPyBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllckNvcnBzZSIpIDogTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJDb3Jwc2UiKTsKCQkJU3RhcnRDb3JvdXRpbmUoRGVzdHJveUNvcnBzZSgxLjBmKSk7CgkJfQoJfQoJSUVudW1lcmF0b3IgRGVzdHJveUNvcnBzZShmbG9hdCB0aW1lKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHModGltZSk7CgkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuRGVhdGgsIHRyYW5zZm9ybS5wb3NpdGlvbik7CgkJRGVzdHJveShnYW1lT2JqZWN0KTsKCX0KCglwdWJsaWMgYm9vbCBIb2xkVG9vbHMoUmVzSXRlbSBpdGVtKQoJewoJCWlmIChpdGVtLnRvb2xUeXBlID09IFdlYXBvbi5XZWFwb25UeXBlLk5vbmUpIHJldHVybiB0cnVlOwoJCWlmIChFcXVpcG1lbnQuV2VhcG9uICYmIGl0ZW0udG9vbFR5cGUgPT0gRXF1aXBtZW50LldlYXBvbi53ZWFwb25UeXBlKSByZXR1cm4gdHJ1ZTsKCQlpZiAoRXF1aXBtZW50LlZpY2VXZWFwb24gJiYgaXRlbS50b29sVHlwZSA9PSBFcXVpcG1lbnQuVmljZVdlYXBvbi53ZWFwb25UeXBlKSB7IEVxdWlwbWVudC5Td2l0Y2hXZWFwb24oKTsgcmV0dXJuIHRydWU7IH0KCQlmb3JlYWNoICh2YXIgZW50cnkgaW4gSW52ZW50b3J5LkVudHJpZXMpCgkJewoJCQlXZWFwb24gd3AgPSBlbnRyeT8uSXRlbSBhcyBXZWFwb247CgkJCWlmICh3cCAmJiB3cC53ZWFwb25UeXBlID09IGl0ZW0udG9vbFR5cGUpIHsgSW52ZW50b3J5LkVxdWlwSXRlbSh3cCk7IHJldHVybiB0cnVlOyB9CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCglwdWJsaWMgYm9vbCBDYW5JbnRlcmFjdChJSW50ZXJhY3RhYmxlIHRhcmdldCkgeyByZXR1cm4gQmFzZUFJICYmIEJhc2VBSS5pc0lkbGU7IH0KCXB1YmxpYyB2b2lkIEludGVyYWN0V2l0aChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQltX2ludGVyYWN0b3IgPSB0YXJnZXQ7CgkJaWYgKG1faW50ZXJhY3RvciAhPSBudWxsICYmIEJhc2VBSSkgQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JTlRFUkFDVElORyk7Cgl9CglwdWJsaWMgc3RyaW5nIEludGVyYWN0QW5pbShJSW50ZXJhY3RhYmxlIHRhcmdldCkgeyByZXR1cm4gIlNraWxsIjsgfQp9CgAAAAAAAAAAmxsAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAzAMAAAAAAADMAwAAAAAAAAAAAAAAAPC/"
				],
				[
					3,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1710229678.2590108"
					},
					"AQAAAAAAAAAAAAAAmxsAAAAAAACbGwAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uTGlucTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBVbml0eUVuZ2luZS5FdmVudHM7CnVzaW5nIFJhbmRvbSA9IFVuaXR5RW5naW5lLlJhbmRvbTsKCi8vLyA8c3VtbWFyeT4KLy8vIFRoaXMgZGVmaW5lcyBhIGNoYXJhY3RlciBpbiB0aGUgZ2FtZS4gVGhlIG5hbWUgQ2hhcmFjdGVyIGlzIHVzZWQgaW4gYSBsb29zZSBzZW5zZSwgaXQganVzdCBtZWFucyBzb21ldGhpbmcgdGhhdAovLy8gY2FuIGJlIGF0dGFja2VkIGFuZCBoYXZlIHNvbWUgc3RhdHMgaW5jbHVkaW5nIGhlYWx0aC4gSXQgY291bGQgYWxzbyBiZSBhbiBpbmFuaW1hdGUgb2JqZWN0IGxpa2UgYSBicmVha2FibGUgYm94LgovLy8gPC9zdW1tYXJ5PgpwdWJsaWMgY2xhc3MgQ2hhcmFjdGVyRGF0YSA6IEhpZ2hsaWdodGFibGVPYmplY3QsIElJbnRlcmFjdGFibGUKewoJcHVibGljIGVudW0gQ2FtcAoJewoJCVBMQVlFUiwKCQlBTExZLAoJCUVORU1ZLAoJCU5FVVRSQUwsCgkJQlVJTERJTkcsCgkJRU5FTVlCVUlMRElORwoJfQoJcHVibGljIENhbXAgY2FtcDsKCXB1YmxpYyBzdHJpbmcgQ2hhcmFjdGVyTmFtZTsKCXB1YmxpYyBXZWFwb24gRGVmYXVsdFdlYXBvbjsKCXB1YmxpYyBUcmFuc2Zvcm0gV2VhcG9uTG9jYXRvcjsKCXB1YmxpYyBmbG9hdCBNb3ZlU3BlZWQgPSAzLjBmOwoJcHVibGljIGludCBDb3Jwc2VDaGFuY2U7CglbU2VyaWFsaXplRmllbGRdIGZsb2F0IG1fQ29ycHNlUmV0ZW50aW9uOwoJcHVibGljIFN0YXRTeXN0ZW0gU3RhdHM7CglwdWJsaWMgSW52ZW50b3J5U3lzdGVtIEludmVudG9yeSA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0oKTsKCXB1YmxpYyBFcXVpcG1lbnRTeXN0ZW0gRXF1aXBtZW50ID0gbmV3IEVxdWlwbWVudFN5c3RlbSgpOwoJcHVibGljIFVuaXR5RXZlbnQ8RGFtYWdlPiBEYW1hZ2VFdmVudDsKCXB1YmxpYyBVbml0eUV2ZW50PENoYXJhY3RlckRhdGE+IERlYXRoRXZlbnQ7CglwdWJsaWMgVW5pdHlFdmVudDxDaGFyYWN0ZXJEYXRhPiBBdHRhY2tFdmVudDsKCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gS2lsbEVuZW15QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248U2tpbGwsIHN0cmluZz4gU2tpbGxBY3Rpb24geyBnZXQ7IHNldDsgfQoJcHVibGljIEFjdGlvbjxBSUJhc2UuU3RhdGU+IFN0YXRlVXBkYXRlQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248QUlCYXNlLlN0YXRlPiBTdGF0ZVN0YXJ0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248RWZmZWN0RGF0YT4gRWZmZWN0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCVZlY3RvcjMgbV9CaXJ0aFBvczsKCXB1YmxpYyBWZWN0b3IzIEJpcnRoUG9zID0+IG1fQmlydGhQb3M7CglDaGFyYWN0ZXJEYXRhIG1fRW5lbXk7CglwdWJsaWMgQ2hhcmFjdGVyRGF0YSBDdXJyZW50RW5lbXkgeyBnZXQgeyByZXR1cm4gbV9FbmVteTsgfSB9CglwdWJsaWMgU2tpbGxVc2VyIFNraWxsVXNlciA9PiBHZXRDb21wb25lbnQ8U2tpbGxVc2VyPigpOwoJcHVibGljIEFJQmFzZSBCYXNlQUkgPT4gR2V0Q29tcG9uZW50PEFJQmFzZT4oKTsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yID0+IG1faW50ZXJhY3RvcjsKCXByb3RlY3RlZCBJSW50ZXJhY3RhYmxlIG1faW50ZXJhY3RvcjsKCWZsb2F0IG1fQXR0YWNrQ29vbERvd247CgoJdm9pZCBBd2FrZSgpCgl7CgkJSW5pdEhpZ2hsaWdodCgpOwoJCVN0YXRzLkluaXQodGhpcyk7CgkJSW52ZW50b3J5LkluaXQodGhpcyk7CgkJRXF1aXBtZW50LkluaXQodGhpcyk7CgkJbV9CaXJ0aFBvcyA9IHRyYW5zZm9ybS5wb3NpdGlvbjsKCgkJc3dpdGNoIChjYW1wKQoJCXsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuUExBWUVSOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuRU5FTVk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkFMTFk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJBbGx5Iik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuTkVVVFJBTDoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIk5ldXRyYWwiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5CVUlMRElORzoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkJ1aWxkaW5nIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuRU5FTVlCVUlMRElORzoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkVuZW15Iik7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCWJyZWFrOwoJCX0KCgkJRXF1aXBtZW50Lk9uRXF1aXBlZCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCVdlYXBvbiB3cCA9IGl0ZW0gYXMgV2VhcG9uOwoJCQkJQmFzZUFJLkVuZW15RGV0ZWN0b3IuUmFkaXVzID0gU3lzdGVtLk1hdGguTWF4KHdwLlN0YXRzLk1heFJhbmdlLCBCYXNlQUkuRW5lbXlEZXRlY3Rvci5SYWRpdXMpOwoJCQkJd3AuYnVsbGV0VHJhbnMgPSBXZWFwb25Mb2NhdG9yOwoJCQkJaWYgKFdlYXBvbkxvY2F0b3IgJiYgaXRlbS5Xb3JsZE9iamVjdFByZWZhYikKCQkJCQlJbnN0YW50aWF0ZShpdGVtLldvcmxkT2JqZWN0UHJlZmFiLCBXZWFwb25Mb2NhdG9yLCBmYWxzZSk7CgkJCQkvL0hlbHBlcnMuUmVjdXJzaXZlTGF5ZXJDaGFuZ2Uob2JqLnRyYW5zZm9ybSwgTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJQbGF5ZXJFcXVpcG1lbnQiKSk7CgkJCX0KCQl9OwoKCQlFcXVpcG1lbnQuT25VbmVxdWlwICs9IGl0ZW0gPT4KCQl7CgkJCWlmIChpdGVtLlNsb3QgPT0gRXF1aXBtZW50SXRlbS5FcXVpcG1lbnRTbG90LldlYXBvbikKCQkJewoJCQkJZm9yZWFjaCAoVHJhbnNmb3JtIHQgaW4gV2VhcG9uTG9jYXRvcikKCQkJCQlEZXN0cm95KHQuZ2FtZU9iamVjdCk7CgkJCX0KCQl9OwoJfQoKCXZvaWQgU3RhcnQoKQoJewoJCWlmIChEZWZhdWx0V2VhcG9uID09IG51bGwpCgkJCURlZmF1bHRXZWFwb24gPSBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8SXRlbT4oR2FtZU1hbmFnZXIuQ29uZmlnLkl0ZW0sICJ3cF91bmFybWVkIikgYXMgV2VhcG9uOwoJCUVxdWlwbWVudC5Jbml0V2VhcG9uKERlZmF1bHRXZWFwb24pOwoJfQoJdm9pZCBVcGRhdGUoKQoJewoJCVN0YXRzLlRpY2soKTsKCgkJaWYgKG1fQXR0YWNrQ29vbERvd24gPiAwLjBmKQoJCQltX0F0dGFja0Nvb2xEb3duIC09IFRpbWUuZGVsdGFUaW1lOwoKCQlpZiAobV9pbnRlcmFjdG9yICE9IG51bGwgJiYgIW1faW50ZXJhY3Rvci5DYW5JbnRlcmFjdCh0aGlzKSkgbV9pbnRlcmFjdG9yID0gbnVsbDsKCX0KCglwdWJsaWMgdm9pZCBTZXRFbmVteShDaGFyYWN0ZXJEYXRhIGVuZW15KQoJewoJCWlmIChlbmVteSAhPSBtX0VuZW15KSBtX0VuZW15ID0gZW5lbXk7Cgl9CgoJcHVibGljIGJvb2wgQ2FuQXR0YWNrUmVhY2goQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgl7CgkJaWYgKHRhcmdldCA9PSBudWxsKSByZXR1cm4gZmFsc2U7CgkJcmV0dXJuIEVxdWlwbWVudC5XZWFwb24uQ2FuSGl0KHRoaXMsIHRhcmdldCk7Cgl9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tSZWFjaCgpIHsgcmV0dXJuIENhbkF0dGFja1JlYWNoKG1fRW5lbXkpOyB9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tUYXJnZXQoQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgl7CgkJaWYgKHRhcmdldCA9PSBudWxsKSByZXR1cm4gZmFsc2U7CgkJaWYgKHRhcmdldC5TdGF0cy5DdXJyZW50SGVhbHRoID09IDApCgkJCXJldHVybiBmYWxzZTsKCgkJaWYgKCFDYW5BdHRhY2tSZWFjaCh0YXJnZXQpKQoJCQlyZXR1cm4gZmFsc2U7CgoJCWlmIChtX0F0dGFja0Nvb2xEb3duID4gMC4wZikKCQkJcmV0dXJuIGZhbHNlOwoKCQlyZXR1cm4gdHJ1ZTsKCX0KCXB1YmxpYyBib29sIENhbkF0dGFja1RhcmdldCgpIHsgcmV0dXJuIENhbkF0dGFja1RhcmdldChtX0VuZW15KTsgfQoJcHVibGljIHZvaWQgQ2hlY2tBdHRhY2soKQoJewoJCWlmIChDYW5BdHRhY2tUYXJnZXQoKSkKCQl7CgkJCUJhc2VBSS5TdG9wKCk7CgkJCUJhc2VBSS5Mb29rQXQoQ3VycmVudEVuZW15LnRyYW5zZm9ybSk7CgkJCUF0dGFja1RyaWdnZXJlZCgpOwoJCQlBdHRhY2tFdmVudD8uSW52b2tlKHRoaXMpOwoJCX0KCX0KCXB1YmxpYyB2b2lkIEF0dGFja0ZyYW1lKCkKCXsKCQkvL2lmIHdlIGNhbid0IHJlYWNoIHRoZSB0YXJnZXQgYW55bW9yZSB3aGVuIGl0J3MgdGltZSB0byBkYW1hZ2UsIHRoZW4gdGhhdCBhdHRhY2sgbWlzcy4KCQlpZiAoQ3VycmVudEVuZW15ICYmIENhbkF0dGFja1JlYWNoKEN1cnJlbnRFbmVteSkpCgkJewoJCQlBdHRhY2soQ3VycmVudEVuZW15KTsKCQl9CgkJZWxzZSBpZiAoQ3VycmVudEVuZW15KSBIZWxwZXJzLkxvZyh0aGlzLCAiQXR0YWNrTWlzczogIiwgJCJ7Q2hhcmFjdGVyTmFtZX0tPntDdXJyZW50RW5lbXkuQ2hhcmFjdGVyTmFtZX0iKTsKCQllbHNlIEhlbHBlcnMuTG9nKHRoaXMsICJBdHRhY2tNaXNzOiAiLCAkIntDaGFyYWN0ZXJOYW1lfS0+KEVuZW15IE1pc3NlZCkiKTsKCX0KCXB1YmxpYyB2b2lkIEF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpZiAoRXF1aXBtZW50LldlYXBvbikKCQl7CgkJCUVxdWlwbWVudC5XZWFwb24uQXR0YWNrKHRoaXMsIHRhcmdldCk7CgkJCWlmIChFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzID4gMCkKCQkJewoJCQkJTGlzdDxHYW1lT2JqZWN0PiB0YXJnZXRzID0gQmFzZUFJLkVuZW15RGV0ZWN0b3IuSW5uZXJzOwoJCQkJaW50IGFkZE51bSA9IDA7CgkJCQlmb3JlYWNoIChHYW1lT2JqZWN0IHQgaW4gdGFyZ2V0cykKCQkJCXsKCQkJCQlpZiAodCAhPSB0YXJnZXQuZ2FtZU9iamVjdCAmJiBhZGROdW0gPCBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzKQoJCQkJCXsKCQkJCQkJRXF1aXBtZW50LldlYXBvbi5BdHRhY2sodGhpcywgdC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSk7CgkJCQkJCWFkZE51bSsrOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQllbHNlIERlYnVnLkxvZ0Vycm9yKCJDaGFyYWN0ZXIgbWlzc2luZyB3ZWFwb24gOiAiICsgZ2FtZU9iamVjdCk7Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2tUcmlnZ2VyZWQoKQoJewoJCS8vQWdpbGl0eSByZWR1Y2UgYnkgMC41JSB0aGUgY29vbGRvd24gdG8gYXR0YWNrIChlLmcuIGlmIGFnaWxpdHkgPSA1MCwgMjUlIGZhc3RlciB0byBhdHRhY2spCgkJbV9BdHRhY2tDb29sRG93biA9IE1hdGguTWF4KDAuMWYsIEVxdWlwbWVudC5XZWFwb24uU3RhdHMuU3BlZWQgLSAoU3RhdHMuc3RhdHMuYWdpbGl0eSAqIDAuNWYgKiAwLjAwMWYgKiBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLlNwZWVkKSk7Cgl9CgoJcHVibGljIHZvaWQgRGVhZCgpCgl7CgkJRGVhdGhFdmVudD8uSW52b2tlKHRoaXMpOwoJCWJvb2wgY29ycHNlID0gKFJhbmRvbS5SYW5nZSgxLCAxMDEpIDw9IENvcnBzZUNoYW5jZSk7CgkJaWYgKGNvcnBzZSkKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkludGVyYWN0YWJsZSIpOwoJCQlTdGFydENvcm91dGluZShEZXN0cm95Q29ycHNlKG1fQ29ycHNlUmV0ZW50aW9uKSk7CgkJfQoJCWVsc2UKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSAoY2FtcCA9PSBDYW1wLlBMQVlFUikgPyBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllckNvcnBzZSIpIDogTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJDb3Jwc2UiKTsKCQkJU3RhcnRDb3JvdXRpbmUoRGVzdHJveUNvcnBzZSgxLjBmKSk7CgkJfQoJfQoJSUVudW1lcmF0b3IgRGVzdHJveUNvcnBzZShmbG9hdCB0aW1lKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHModGltZSk7CgkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuRGVhdGgsIHRyYW5zZm9ybS5wb3NpdGlvbik7CgkJRGVzdHJveShnYW1lT2JqZWN0KTsKCX0KCglwdWJsaWMgYm9vbCBIb2xkVG9vbHMoUmVzSXRlbSBpdGVtKQoJewoJCWlmIChpdGVtLnRvb2xUeXBlID09IFdlYXBvbi5XZWFwb25UeXBlLk5vbmUpIHJldHVybiB0cnVlOwoJCWlmIChFcXVpcG1lbnQuV2VhcG9uICYmIGl0ZW0udG9vbFR5cGUgPT0gRXF1aXBtZW50LldlYXBvbi53ZWFwb25UeXBlKSByZXR1cm4gdHJ1ZTsKCQlpZiAoRXF1aXBtZW50LlZpY2VXZWFwb24gJiYgaXRlbS50b29sVHlwZSA9PSBFcXVpcG1lbnQuVmljZVdlYXBvbi53ZWFwb25UeXBlKSB7IEVxdWlwbWVudC5Td2l0Y2hXZWFwb24oKTsgcmV0dXJuIHRydWU7IH0KCQlmb3JlYWNoICh2YXIgZW50cnkgaW4gSW52ZW50b3J5LkVudHJpZXMpCgkJewoJCQlXZWFwb24gd3AgPSBlbnRyeT8uSXRlbSBhcyBXZWFwb247CgkJCWlmICh3cCAmJiB3cC53ZWFwb25UeXBlID09IGl0ZW0udG9vbFR5cGUpIHsgSW52ZW50b3J5LkVxdWlwSXRlbSh3cCk7IHJldHVybiB0cnVlOyB9CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCglwdWJsaWMgYm9vbCBDYW5JbnRlcmFjdChJSW50ZXJhY3RhYmxlIHRhcmdldCkgeyByZXR1cm4gQmFzZUFJICYmIEJhc2VBSS5pc0lkbGU7IH0KCXB1YmxpYyB2b2lkIEludGVyYWN0V2l0aChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQltX2ludGVyYWN0b3IgPSB0YXJnZXQ7CgkJaWYgKG1faW50ZXJhY3RvciAhPSBudWxsICYmIEJhc2VBSSkgQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JTlRFUkFDVElORyk7Cgl9CglwdWJsaWMgc3RyaW5nIEludGVyYWN0QW5pbShJSW50ZXJhY3RhYmxlIHRhcmdldCkgeyByZXR1cm4gIkhpdCI7IH0KfQo",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAzAMAAAAAAADMAwAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACbGwAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uTGlucTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBVbml0eUVuZ2luZS5FdmVudHM7CnVzaW5nIFJhbmRvbSA9IFVuaXR5RW5naW5lLlJhbmRvbTsKCi8vLyA8c3VtbWFyeT4KLy8vIFRoaXMgZGVmaW5lcyBhIGNoYXJhY3RlciBpbiB0aGUgZ2FtZS4gVGhlIG5hbWUgQ2hhcmFjdGVyIGlzIHVzZWQgaW4gYSBsb29zZSBzZW5zZSwgaXQganVzdCBtZWFucyBzb21ldGhpbmcgdGhhdAovLy8gY2FuIGJlIGF0dGFja2VkIGFuZCBoYXZlIHNvbWUgc3RhdHMgaW5jbHVkaW5nIGhlYWx0aC4gSXQgY291bGQgYWxzbyBiZSBhbiBpbmFuaW1hdGUgb2JqZWN0IGxpa2UgYSBicmVha2FibGUgYm94LgovLy8gPC9zdW1tYXJ5PgpwdWJsaWMgY2xhc3MgQ2hhcmFjdGVyRGF0YSA6IEhpZ2hsaWdodGFibGVPYmplY3QsIElJbnRlcmFjdGFibGUKewoJcHVibGljIGVudW0gQ2FtcAoJewoJCVBMQVlFUiwKCQlBTExZLAoJCUVORU1ZLAoJCU5FVVRSQUwsCgkJQlVJTERJTkcsCgkJRU5FTVlCVUlMRElORwoJfQoJcHVibGljIENhbXAgY2FtcDsKCXB1YmxpYyBzdHJpbmcgQ2hhcmFjdGVyTmFtZTsKCXB1YmxpYyBXZWFwb24gRGVmYXVsdFdlYXBvbjsKCXB1YmxpYyBUcmFuc2Zvcm0gV2VhcG9uTG9jYXRvcjsKCXB1YmxpYyBmbG9hdCBNb3ZlU3BlZWQgPSAzLjBmOwoJcHVibGljIGludCBDb3Jwc2VDaGFuY2U7CglbU2VyaWFsaXplRmllbGRdIGZsb2F0IG1fQ29ycHNlUmV0ZW50aW9uOwoJcHVibGljIFN0YXRTeXN0ZW0gU3RhdHM7CglwdWJsaWMgSW52ZW50b3J5U3lzdGVtIEludmVudG9yeSA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0oKTsKCXB1YmxpYyBFcXVpcG1lbnRTeXN0ZW0gRXF1aXBtZW50ID0gbmV3IEVxdWlwbWVudFN5c3RlbSgpOwoJcHVibGljIFVuaXR5RXZlbnQ8RGFtYWdlPiBEYW1hZ2VFdmVudDsKCXB1YmxpYyBVbml0eUV2ZW50PENoYXJhY3RlckRhdGE+IERlYXRoRXZlbnQ7CglwdWJsaWMgVW5pdHlFdmVudDxDaGFyYWN0ZXJEYXRhPiBBdHRhY2tFdmVudDsKCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gS2lsbEVuZW15QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248U2tpbGwsIHN0cmluZz4gU2tpbGxBY3Rpb24geyBnZXQ7IHNldDsgfQoJcHVibGljIEFjdGlvbjxBSUJhc2UuU3RhdGU+IFN0YXRlVXBkYXRlQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248QUlCYXNlLlN0YXRlPiBTdGF0ZVN0YXJ0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248RWZmZWN0RGF0YT4gRWZmZWN0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCVZlY3RvcjMgbV9CaXJ0aFBvczsKCXB1YmxpYyBWZWN0b3IzIEJpcnRoUG9zID0+IG1fQmlydGhQb3M7CglDaGFyYWN0ZXJEYXRhIG1fRW5lbXk7CglwdWJsaWMgQ2hhcmFjdGVyRGF0YSBDdXJyZW50RW5lbXkgeyBnZXQgeyByZXR1cm4gbV9FbmVteTsgfSB9CglwdWJsaWMgU2tpbGxVc2VyIFNraWxsVXNlciA9PiBHZXRDb21wb25lbnQ8U2tpbGxVc2VyPigpOwoJcHVibGljIEFJQmFzZSBCYXNlQUkgPT4gR2V0Q29tcG9uZW50PEFJQmFzZT4oKTsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yID0+IG1faW50ZXJhY3RvcjsKCXByb3RlY3RlZCBJSW50ZXJhY3RhYmxlIG1faW50ZXJhY3RvcjsKCWZsb2F0IG1fQXR0YWNrQ29vbERvd247CgoJdm9pZCBBd2FrZSgpCgl7CgkJSW5pdEhpZ2hsaWdodCgpOwoJCVN0YXRzLkluaXQodGhpcyk7CgkJSW52ZW50b3J5LkluaXQodGhpcyk7CgkJRXF1aXBtZW50LkluaXQodGhpcyk7CgkJbV9CaXJ0aFBvcyA9IHRyYW5zZm9ybS5wb3NpdGlvbjsKCgkJc3dpdGNoIChjYW1wKQoJCXsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuUExBWUVSOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuRU5FTVk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkFMTFk6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJBbGx5Iik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuTkVVVFJBTDoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIk5ldXRyYWwiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5CVUlMRElORzoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkJ1aWxkaW5nIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuRU5FTVlCVUlMRElORzoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkVuZW15Iik7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCWJyZWFrOwoJCX0KCgkJRXF1aXBtZW50Lk9uRXF1aXBlZCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCVdlYXBvbiB3cCA9IGl0ZW0gYXMgV2VhcG9uOwoJCQkJQmFzZUFJLkVuZW15RGV0ZWN0b3IuUmFkaXVzID0gU3lzdGVtLk1hdGguTWF4KHdwLlN0YXRzLk1heFJhbmdlLCBCYXNlQUkuRW5lbXlEZXRlY3Rvci5SYWRpdXMpOwoJCQkJd3AuYnVsbGV0VHJhbnMgPSBXZWFwb25Mb2NhdG9yOwoJCQkJaWYgKFdlYXBvbkxvY2F0b3IgJiYgaXRlbS5Xb3JsZE9iamVjdFByZWZhYikKCQkJCQlJbnN0YW50aWF0ZShpdGVtLldvcmxkT2JqZWN0UHJlZmFiLCBXZWFwb25Mb2NhdG9yLCBmYWxzZSk7CgkJCQkvL0hlbHBlcnMuUmVjdXJzaXZlTGF5ZXJDaGFuZ2Uob2JqLnRyYW5zZm9ybSwgTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJQbGF5ZXJFcXVpcG1lbnQiKSk7CgkJCX0KCQl9OwoKCQlFcXVpcG1lbnQuT25VbmVxdWlwICs9IGl0ZW0gPT4KCQl7CgkJCWlmIChpdGVtLlNsb3QgPT0gRXF1aXBtZW50SXRlbS5FcXVpcG1lbnRTbG90LldlYXBvbikKCQkJewoJCQkJZm9yZWFjaCAoVHJhbnNmb3JtIHQgaW4gV2VhcG9uTG9jYXRvcikKCQkJCQlEZXN0cm95KHQuZ2FtZU9iamVjdCk7CgkJCX0KCQl9OwoJfQoKCXZvaWQgU3RhcnQoKQoJewoJCWlmIChEZWZhdWx0V2VhcG9uID09IG51bGwpCgkJCURlZmF1bHRXZWFwb24gPSBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8SXRlbT4oR2FtZU1hbmFnZXIuQ29uZmlnLkl0ZW0sICJ3cF91bmFybWVkIikgYXMgV2VhcG9uOwoJCUVxdWlwbWVudC5Jbml0V2VhcG9uKERlZmF1bHRXZWFwb24pOwoJfQoJdm9pZCBVcGRhdGUoKQoJewoJCVN0YXRzLlRpY2soKTsKCgkJaWYgKG1fQXR0YWNrQ29vbERvd24gPiAwLjBmKQoJCQltX0F0dGFja0Nvb2xEb3duIC09IFRpbWUuZGVsdGFUaW1lOwoKCQlpZiAobV9pbnRlcmFjdG9yICE9IG51bGwgJiYgIW1faW50ZXJhY3Rvci5DYW5JbnRlcmFjdCh0aGlzKSkgbV9pbnRlcmFjdG9yID0gbnVsbDsKCX0KCglwdWJsaWMgdm9pZCBTZXRFbmVteShDaGFyYWN0ZXJEYXRhIGVuZW15KQoJewoJCWlmIChlbmVteSAhPSBtX0VuZW15KSBtX0VuZW15ID0gZW5lbXk7Cgl9CgoJcHVibGljIGJvb2wgQ2FuQXR0YWNrUmVhY2goQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgl7CgkJaWYgKHRhcmdldCA9PSBudWxsKSByZXR1cm4gZmFsc2U7CgkJcmV0dXJuIEVxdWlwbWVudC5XZWFwb24uQ2FuSGl0KHRoaXMsIHRhcmdldCk7Cgl9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tSZWFjaCgpIHsgcmV0dXJuIENhbkF0dGFja1JlYWNoKG1fRW5lbXkpOyB9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tUYXJnZXQoQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgl7CgkJaWYgKHRhcmdldCA9PSBudWxsKSByZXR1cm4gZmFsc2U7CgkJaWYgKHRhcmdldC5TdGF0cy5DdXJyZW50SGVhbHRoID09IDApCgkJCXJldHVybiBmYWxzZTsKCgkJaWYgKCFDYW5BdHRhY2tSZWFjaCh0YXJnZXQpKQoJCQlyZXR1cm4gZmFsc2U7CgoJCWlmIChtX0F0dGFja0Nvb2xEb3duID4gMC4wZikKCQkJcmV0dXJuIGZhbHNlOwoKCQlyZXR1cm4gdHJ1ZTsKCX0KCXB1YmxpYyBib29sIENhbkF0dGFja1RhcmdldCgpIHsgcmV0dXJuIENhbkF0dGFja1RhcmdldChtX0VuZW15KTsgfQoJcHVibGljIHZvaWQgQ2hlY2tBdHRhY2soKQoJewoJCWlmIChDYW5BdHRhY2tUYXJnZXQoKSkKCQl7CgkJCUJhc2VBSS5TdG9wKCk7CgkJCUJhc2VBSS5Mb29rQXQoQ3VycmVudEVuZW15LnRyYW5zZm9ybSk7CgkJCUF0dGFja1RyaWdnZXJlZCgpOwoJCQlBdHRhY2tFdmVudD8uSW52b2tlKHRoaXMpOwoJCX0KCX0KCXB1YmxpYyB2b2lkIEF0dGFja0ZyYW1lKCkKCXsKCQkvL2lmIHdlIGNhbid0IHJlYWNoIHRoZSB0YXJnZXQgYW55bW9yZSB3aGVuIGl0J3MgdGltZSB0byBkYW1hZ2UsIHRoZW4gdGhhdCBhdHRhY2sgbWlzcy4KCQlpZiAoQ3VycmVudEVuZW15ICYmIENhbkF0dGFja1JlYWNoKEN1cnJlbnRFbmVteSkpCgkJewoJCQlBdHRhY2soQ3VycmVudEVuZW15KTsKCQl9CgkJZWxzZSBpZiAoQ3VycmVudEVuZW15KSBIZWxwZXJzLkxvZyh0aGlzLCAiQXR0YWNrTWlzczogIiwgJCJ7Q2hhcmFjdGVyTmFtZX0tPntDdXJyZW50RW5lbXkuQ2hhcmFjdGVyTmFtZX0iKTsKCQllbHNlIEhlbHBlcnMuTG9nKHRoaXMsICJBdHRhY2tNaXNzOiAiLCAkIntDaGFyYWN0ZXJOYW1lfS0+KEVuZW15IE1pc3NlZCkiKTsKCX0KCXB1YmxpYyB2b2lkIEF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpZiAoRXF1aXBtZW50LldlYXBvbikKCQl7CgkJCUVxdWlwbWVudC5XZWFwb24uQXR0YWNrKHRoaXMsIHRhcmdldCk7CgkJCWlmIChFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzID4gMCkKCQkJewoJCQkJTGlzdDxHYW1lT2JqZWN0PiB0YXJnZXRzID0gQmFzZUFJLkVuZW15RGV0ZWN0b3IuSW5uZXJzOwoJCQkJaW50IGFkZE51bSA9IDA7CgkJCQlmb3JlYWNoIChHYW1lT2JqZWN0IHQgaW4gdGFyZ2V0cykKCQkJCXsKCQkJCQlpZiAodCAhPSB0YXJnZXQuZ2FtZU9iamVjdCAmJiBhZGROdW0gPCBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLkFkZGl0aW9uYWxUYXJnZXRzKQoJCQkJCXsKCQkJCQkJRXF1aXBtZW50LldlYXBvbi5BdHRhY2sodGhpcywgdC5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSk7CgkJCQkJCWFkZE51bSsrOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQllbHNlIERlYnVnLkxvZ0Vycm9yKCJDaGFyYWN0ZXIgbWlzc2luZyB3ZWFwb24gOiAiICsgZ2FtZU9iamVjdCk7Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2tUcmlnZ2VyZWQoKQoJewoJCS8vQWdpbGl0eSByZWR1Y2UgYnkgMC41JSB0aGUgY29vbGRvd24gdG8gYXR0YWNrIChlLmcuIGlmIGFnaWxpdHkgPSA1MCwgMjUlIGZhc3RlciB0byBhdHRhY2spCgkJbV9BdHRhY2tDb29sRG93biA9IE1hdGguTWF4KDAuMWYsIEVxdWlwbWVudC5XZWFwb24uU3RhdHMuU3BlZWQgLSAoU3RhdHMuc3RhdHMuYWdpbGl0eSAqIDAuNWYgKiAwLjAwMWYgKiBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLlNwZWVkKSk7Cgl9CgoJcHVibGljIHZvaWQgRGVhZCgpCgl7CgkJRGVhdGhFdmVudD8uSW52b2tlKHRoaXMpOwoJCWJvb2wgY29ycHNlID0gKFJhbmRvbS5SYW5nZSgxLCAxMDEpIDw9IENvcnBzZUNoYW5jZSk7CgkJaWYgKGNvcnBzZSkKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkludGVyYWN0YWJsZSIpOwoJCQlTdGFydENvcm91dGluZShEZXN0cm95Q29ycHNlKG1fQ29ycHNlUmV0ZW50aW9uKSk7CgkJfQoJCWVsc2UKCQl7CgkJCWdhbWVPYmplY3QubGF5ZXIgPSAoY2FtcCA9PSBDYW1wLlBMQVlFUikgPyBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllckNvcnBzZSIpIDogTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJDb3Jwc2UiKTsKCQkJU3RhcnRDb3JvdXRpbmUoRGVzdHJveUNvcnBzZSgxLjBmKSk7CgkJfQoJfQoJSUVudW1lcmF0b3IgRGVzdHJveUNvcnBzZShmbG9hdCB0aW1lKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHModGltZSk7CgkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuRGVhdGgsIHRyYW5zZm9ybS5wb3NpdGlvbik7CgkJRGVzdHJveShnYW1lT2JqZWN0KTsKCX0KCglwdWJsaWMgYm9vbCBIb2xkVG9vbHMoUmVzSXRlbSBpdGVtKQoJewoJCWlmIChpdGVtLnRvb2xUeXBlID09IFdlYXBvbi5XZWFwb25UeXBlLk5vbmUpIHJldHVybiB0cnVlOwoJCWlmIChFcXVpcG1lbnQuV2VhcG9uICYmIGl0ZW0udG9vbFR5cGUgPT0gRXF1aXBtZW50LldlYXBvbi53ZWFwb25UeXBlKSByZXR1cm4gdHJ1ZTsKCQlpZiAoRXF1aXBtZW50LlZpY2VXZWFwb24gJiYgaXRlbS50b29sVHlwZSA9PSBFcXVpcG1lbnQuVmljZVdlYXBvbi53ZWFwb25UeXBlKSB7IEVxdWlwbWVudC5Td2l0Y2hXZWFwb24oKTsgcmV0dXJuIHRydWU7IH0KCQlmb3JlYWNoICh2YXIgZW50cnkgaW4gSW52ZW50b3J5LkVudHJpZXMpCgkJewoJCQlXZWFwb24gd3AgPSBlbnRyeT8uSXRlbSBhcyBXZWFwb247CgkJCWlmICh3cCAmJiB3cC53ZWFwb25UeXBlID09IGl0ZW0udG9vbFR5cGUpIHsgSW52ZW50b3J5LkVxdWlwSXRlbSh3cCk7IHJldHVybiB0cnVlOyB9CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCglwdWJsaWMgYm9vbCBDYW5JbnRlcmFjdChJSW50ZXJhY3RhYmxlIHRhcmdldCkgeyByZXR1cm4gQmFzZUFJICYmIEJhc2VBSS5pc0lkbGU7IH0KCXB1YmxpYyB2b2lkIEludGVyYWN0V2l0aChJSW50ZXJhY3RhYmxlIHRhcmdldCkKCXsKCQltX2ludGVyYWN0b3IgPSB0YXJnZXQ7CgkJaWYgKG1faW50ZXJhY3RvciAhPSBudWxsICYmIEJhc2VBSSkgQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JTlRFUkFDVElORyk7Cgl9CglwdWJsaWMgc3RyaW5nIEludGVyYWN0QW5pbShJSW50ZXJhY3RhYmxlIHRhcmdldCkgeyByZXR1cm4gIkhpdCI7IH0KfQoAAAAAAAAAACccAAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAzAMAAAAAAADMAwAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1710322132.346275"
					},
					"AQAAAAAAAAAAAAAAJxwAAAAAAAAnHAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uTGlucTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBVbml0eUVuZ2luZS5FdmVudHM7CnVzaW5nIFJhbmRvbSA9IFVuaXR5RW5naW5lLlJhbmRvbTsKCi8vLyA8c3VtbWFyeT4KLy8vIFRoaXMgZGVmaW5lcyBhIGNoYXJhY3RlciBpbiB0aGUgZ2FtZS4gVGhlIG5hbWUgQ2hhcmFjdGVyIGlzIHVzZWQgaW4gYSBsb29zZSBzZW5zZSwgaXQganVzdCBtZWFucyBzb21ldGhpbmcgdGhhdAovLy8gY2FuIGJlIGF0dGFja2VkIGFuZCBoYXZlIHNvbWUgc3RhdHMgaW5jbHVkaW5nIGhlYWx0aC4gSXQgY291bGQgYWxzbyBiZSBhbiBpbmFuaW1hdGUgb2JqZWN0IGxpa2UgYSBicmVha2FibGUgYm94LgovLy8gPC9zdW1tYXJ5PgpwdWJsaWMgY2xhc3MgQ2hhcmFjdGVyRGF0YSA6IEhpZ2hsaWdodGFibGVPYmplY3QsIElJbnRlcmFjdGFibGUKewoJcHVibGljIGVudW0gQ2FtcAoJewoJCVBMQVlFUiwKCQlBTExZLAoJCUVORU1ZLAoJCU5FVVRSQUwsCgkJQlVJTERJTkcsCgkJRU5FTVlCVUlMRElORwoJfQoJcHVibGljIENhbXAgY2FtcDsKCXB1YmxpYyBzdHJpbmcgQ2hhcmFjdGVyTmFtZTsKCXB1YmxpYyBXZWFwb24gRGVmYXVsdFdlYXBvbjsKCXB1YmxpYyBUcmFuc2Zvcm0gV2VhcG9uTG9jYXRvcjsKCXB1YmxpYyBmbG9hdCBNb3ZlU3BlZWQgPSAzLjBmOwoJcHVibGljIGludCBDb3Jwc2VDaGFuY2U7CglbU2VyaWFsaXplRmllbGRdIGZsb2F0IG1fQ29ycHNlUmV0ZW50aW9uOwoJcHVibGljIFN0YXRTeXN0ZW0gU3RhdHM7CglwdWJsaWMgSW52ZW50b3J5U3lzdGVtIEludmVudG9yeSA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0oKTsKCXB1YmxpYyBFcXVpcG1lbnRTeXN0ZW0gRXF1aXBtZW50ID0gbmV3IEVxdWlwbWVudFN5c3RlbSgpOwoJcHVibGljIFVuaXR5RXZlbnQ8RGFtYWdlPiBEYW1hZ2VFdmVudDsKCXB1YmxpYyBVbml0eUV2ZW50PENoYXJhY3RlckRhdGE+IERlYXRoRXZlbnQ7CglwdWJsaWMgVW5pdHlFdmVudDxDaGFyYWN0ZXJEYXRhPiBBdHRhY2tFdmVudDsKCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gS2lsbEVuZW15QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248U2tpbGwsIHN0cmluZz4gU2tpbGxBY3Rpb24geyBnZXQ7IHNldDsgfQoJcHVibGljIEFjdGlvbjxBSUJhc2UuU3RhdGU+IFN0YXRlVXBkYXRlQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248QUlCYXNlLlN0YXRlPiBTdGF0ZVN0YXJ0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248RWZmZWN0RGF0YT4gRWZmZWN0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCVZlY3RvcjMgbV9CaXJ0aFBvczsKCXB1YmxpYyBWZWN0b3IzIEJpcnRoUG9zID0+IG1fQmlydGhQb3M7CglDaGFyYWN0ZXJEYXRhIG1fRW5lbXk7CglwdWJsaWMgQ2hhcmFjdGVyRGF0YSBDdXJyZW50RW5lbXkgeyBnZXQgeyByZXR1cm4gbV9FbmVteTsgfSB9CglwdWJsaWMgU2tpbGxVc2VyIFNraWxsVXNlciA9PiBHZXRDb21wb25lbnQ8U2tpbGxVc2VyPigpOwoJcHVibGljIEFJQmFzZSBCYXNlQUkgPT4gR2V0Q29tcG9uZW50PEFJQmFzZT4oKTsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1faW50ZXJhY3RvcjsgfSBzZXQgeyBtX2ludGVyYWN0b3IgPSB2YWx1ZTsgfSB9Cglwcm90ZWN0ZWQgSUludGVyYWN0YWJsZSBtX2ludGVyYWN0b3I7CglmbG9hdCBtX0F0dGFja0Nvb2xEb3duOwoKCXZvaWQgQXdha2UoKQoJewoJCUluaXRIaWdobGlnaHQoKTsKCQlTdGF0cy5Jbml0KHRoaXMpOwoJCUludmVudG9yeS5Jbml0KHRoaXMpOwoJCUVxdWlwbWVudC5Jbml0KHRoaXMpOwoJCW1fQmlydGhQb3MgPSB0cmFuc2Zvcm0ucG9zaXRpb247CgoJCXN3aXRjaCAoY2FtcCkKCQl7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLlBMQVlFUjoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllciIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkVORU1ZOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiRW5lbXkiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5BTExZOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiQWxseSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLk5FVVRSQUw6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJOZXV0cmFsIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuQlVJTERJTkc6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJCdWlsZGluZyIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkVORU1ZQlVJTERJTkc6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9CgoJCUVxdWlwbWVudC5PbkVxdWlwZWQgKz0gaXRlbSA9PgoJCXsKCQkJaWYgKGl0ZW0uU2xvdCA9PSBFcXVpcG1lbnRJdGVtLkVxdWlwbWVudFNsb3QuV2VhcG9uKQoJCQl7CgkJCQlXZWFwb24gd3AgPSBpdGVtIGFzIFdlYXBvbjsKCQkJCUJhc2VBSS5FbmVteURldGVjdG9yLlJhZGl1cyA9IFN5c3RlbS5NYXRoLk1heCh3cC5TdGF0cy5NYXhSYW5nZSwgQmFzZUFJLkVuZW15RGV0ZWN0b3IuUmFkaXVzKTsKCQkJCXdwLmJ1bGxldFRyYW5zID0gV2VhcG9uTG9jYXRvcjsKCQkJCWlmIChXZWFwb25Mb2NhdG9yICYmIGl0ZW0uV29ybGRPYmplY3RQcmVmYWIpCgkJCQkJSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgV2VhcG9uTG9jYXRvciwgZmFsc2UpOwoJCQkJLy9IZWxwZXJzLlJlY3Vyc2l2ZUxheWVyQ2hhbmdlKG9iai50cmFuc2Zvcm0sIExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyRXF1aXBtZW50IikpOwoJCQl9CgkJfTsKCgkJRXF1aXBtZW50Lk9uVW5lcXVpcCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCWZvcmVhY2ggKFRyYW5zZm9ybSB0IGluIFdlYXBvbkxvY2F0b3IpCgkJCQkJRGVzdHJveSh0LmdhbWVPYmplY3QpOwoJCQl9CgkJfTsKCX0KCgl2b2lkIFN0YXJ0KCkKCXsKCQlpZiAoRGVmYXVsdFdlYXBvbiA9PSBudWxsKQoJCQlEZWZhdWx0V2VhcG9uID0gS2V5VmFsdWVEYXRhLkdldFZhbHVlPEl0ZW0+KEdhbWVNYW5hZ2VyLkNvbmZpZy5JdGVtLCAid3BfdW5hcm1lZCIpIGFzIFdlYXBvbjsKCQlFcXVpcG1lbnQuSW5pdFdlYXBvbihEZWZhdWx0V2VhcG9uKTsKCX0KCXZvaWQgVXBkYXRlKCkKCXsKCQlTdGF0cy5UaWNrKCk7CgoJCWlmIChtX0F0dGFja0Nvb2xEb3duID4gMC4wZikKCQkJbV9BdHRhY2tDb29sRG93biAtPSBUaW1lLmRlbHRhVGltZTsKCgkJaWYgKG1faW50ZXJhY3RvciAhPSBudWxsICYmICFtX2ludGVyYWN0b3IuQ2FuSW50ZXJhY3QodGhpcykpIG1faW50ZXJhY3RvciA9IG51bGw7Cgl9CgoJcHVibGljIHZvaWQgU2V0RW5lbXkoQ2hhcmFjdGVyRGF0YSBlbmVteSkKCXsKCQlpZiAoZW5lbXkgIT0gbV9FbmVteSkgbV9FbmVteSA9IGVuZW15OwoJfQoKCXB1YmxpYyBib29sIENhbkF0dGFja1JlYWNoKENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCXJldHVybiBFcXVpcG1lbnQuV2VhcG9uLkNhbkhpdCh0aGlzLCB0YXJnZXQpOwoJfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrUmVhY2goKSB7IHJldHVybiBDYW5BdHRhY2tSZWFjaChtX0VuZW15KTsgfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrVGFyZ2V0KENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCWlmICh0YXJnZXQuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSAwKQoJCQlyZXR1cm4gZmFsc2U7CgoJCWlmICghQ2FuQXR0YWNrUmVhY2godGFyZ2V0KSkKCQkJcmV0dXJuIGZhbHNlOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCXJldHVybiBmYWxzZTsKCgkJcmV0dXJuIHRydWU7Cgl9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tUYXJnZXQoKSB7IHJldHVybiBDYW5BdHRhY2tUYXJnZXQobV9FbmVteSk7IH0KCXB1YmxpYyB2b2lkIENoZWNrQXR0YWNrKCkKCXsKCQlpZiAoQ2FuQXR0YWNrVGFyZ2V0KCkpCgkJewoJCQlCYXNlQUkuU3RvcCgpOwoJCQlCYXNlQUkuTG9va0F0KEN1cnJlbnRFbmVteS50cmFuc2Zvcm0pOwoJCQlBdHRhY2tUcmlnZ2VyZWQoKTsKCQkJQXR0YWNrRXZlbnQ/Lkludm9rZSh0aGlzKTsKCQl9Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2tGcmFtZSgpCgl7CgkJLy9pZiB3ZSBjYW4ndCByZWFjaCB0aGUgdGFyZ2V0IGFueW1vcmUgd2hlbiBpdCdzIHRpbWUgdG8gZGFtYWdlLCB0aGVuIHRoYXQgYXR0YWNrIG1pc3MuCgkJaWYgKEN1cnJlbnRFbmVteSAmJiBDYW5BdHRhY2tSZWFjaChDdXJyZW50RW5lbXkpKQoJCXsKCQkJQXR0YWNrKEN1cnJlbnRFbmVteSk7CgkJfQoJCWVsc2UgaWYgKEN1cnJlbnRFbmVteSkgSGVscGVycy5Mb2codGhpcywgIkF0dGFja01pc3M6ICIsICQie0NoYXJhY3Rlck5hbWV9LT57Q3VycmVudEVuZW15LkNoYXJhY3Rlck5hbWV9Iik7CgkJZWxzZSBIZWxwZXJzLkxvZyh0aGlzLCAiQXR0YWNrTWlzczogIiwgJCJ7Q2hhcmFjdGVyTmFtZX0tPihFbmVteSBNaXNzZWQpIik7Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2soQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgl7CgkJaWYgKEVxdWlwbWVudC5XZWFwb24pCgkJewoJCQlFcXVpcG1lbnQuV2VhcG9uLkF0dGFjayh0aGlzLCB0YXJnZXQpOwoJCQlpZiAoRXF1aXBtZW50LldlYXBvbi5TdGF0cy5BZGRpdGlvbmFsVGFyZ2V0cyA+IDApCgkJCXsKCQkJCUxpc3Q8R2FtZU9iamVjdD4gdGFyZ2V0cyA9IEJhc2VBSS5FbmVteURldGVjdG9yLklubmVyczsKCQkJCWludCBhZGROdW0gPSAwOwoJCQkJZm9yZWFjaCAoR2FtZU9iamVjdCB0IGluIHRhcmdldHMpCgkJCQl7CgkJCQkJaWYgKHQgIT0gdGFyZ2V0LmdhbWVPYmplY3QgJiYgYWRkTnVtIDwgRXF1aXBtZW50LldlYXBvbi5TdGF0cy5BZGRpdGlvbmFsVGFyZ2V0cykKCQkJCQl7CgkJCQkJCUVxdWlwbWVudC5XZWFwb24uQXR0YWNrKHRoaXMsIHQuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCkpOwoJCQkJCQlhZGROdW0rKzsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJZWxzZSBEZWJ1Zy5Mb2dFcnJvcigiQ2hhcmFjdGVyIG1pc3Npbmcgd2VhcG9uIDogIiArIGdhbWVPYmplY3QpOwoJfQoJcHVibGljIHZvaWQgQXR0YWNrVHJpZ2dlcmVkKCkKCXsKCQkvL0FnaWxpdHkgcmVkdWNlIGJ5IDAuNSUgdGhlIGNvb2xkb3duIHRvIGF0dGFjayAoZS5nLiBpZiBhZ2lsaXR5ID0gNTAsIDI1JSBmYXN0ZXIgdG8gYXR0YWNrKQoJCW1fQXR0YWNrQ29vbERvd24gPSBNYXRoLk1heCgwLjFmLCBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLlNwZWVkIC0gKFN0YXRzLnN0YXRzLmFnaWxpdHkgKiAwLjVmICogMC4wMDFmICogRXF1aXBtZW50LldlYXBvbi5TdGF0cy5TcGVlZCkpOwoJfQoKCXB1YmxpYyB2b2lkIERlYWQoKQoJewoJCURlYXRoRXZlbnQ/Lkludm9rZSh0aGlzKTsKCQlib29sIGNvcnBzZSA9IChSYW5kb20uUmFuZ2UoMSwgMTAxKSA8PSBDb3Jwc2VDaGFuY2UpOwoJCWlmIChjb3Jwc2UpCgkJewoJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJJbnRlcmFjdGFibGUiKTsKCQkJU3RhcnRDb3JvdXRpbmUoRGVzdHJveUNvcnBzZShtX0NvcnBzZVJldGVudGlvbikpOwoJCX0KCQllbHNlCgkJewoJCQlnYW1lT2JqZWN0LmxheWVyID0gKGNhbXAgPT0gQ2FtcC5QTEFZRVIpID8gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJQbGF5ZXJDb3Jwc2UiKSA6IExheWVyTWFzay5OYW1lVG9MYXllcigiQ29ycHNlIik7CgkJCVN0YXJ0Q29yb3V0aW5lKERlc3Ryb3lDb3Jwc2UoMS4wZikpOwoJCX0KCX0KCUlFbnVtZXJhdG9yIERlc3Ryb3lDb3Jwc2UoZmxvYXQgdGltZSkKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHRpbWUpOwoJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkRlYXRoLCB0cmFuc2Zvcm0ucG9zaXRpb24pOwoJCURlc3Ryb3koZ2FtZU9iamVjdCk7Cgl9CgoJcHVibGljIGJvb2wgSG9sZFRvb2xzKFJlc0l0ZW0gaXRlbSkKCXsKCQlpZiAoaXRlbS50b29sVHlwZSA9PSBXZWFwb24uV2VhcG9uVHlwZS5Ob25lKSByZXR1cm4gdHJ1ZTsKCQlpZiAoRXF1aXBtZW50LldlYXBvbiAmJiBpdGVtLnRvb2xUeXBlID09IEVxdWlwbWVudC5XZWFwb24ud2VhcG9uVHlwZSkgcmV0dXJuIHRydWU7CgkJaWYgKEVxdWlwbWVudC5WaWNlV2VhcG9uICYmIGl0ZW0udG9vbFR5cGUgPT0gRXF1aXBtZW50LlZpY2VXZWFwb24ud2VhcG9uVHlwZSkgeyBFcXVpcG1lbnQuU3dpdGNoV2VhcG9uKCk7IHJldHVybiB0cnVlOyB9CgkJZm9yZWFjaCAodmFyIGVudHJ5IGluIEludmVudG9yeS5FbnRyaWVzKQoJCXsKCQkJV2VhcG9uIHdwID0gZW50cnk/Lkl0ZW0gYXMgV2VhcG9uOwoJCQlpZiAod3AgJiYgd3Aud2VhcG9uVHlwZSA9PSBpdGVtLnRvb2xUeXBlKSB7IEludmVudG9yeS5FcXVpcEl0ZW0od3ApOyByZXR1cm4gdHJ1ZTsgfQoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIGJvb2wgQ2FuSW50ZXJhY3QoSUludGVyYWN0YWJsZSB0YXJnZXQpIHsgcmV0dXJuIEJhc2VBSSAmJiBCYXNlQUkuaXNJZGxlOyB9CglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKG1faW50ZXJhY3RvciA9PSBudWxsKQoJCXsKCQkJbV9pbnRlcmFjdG9yID0gdGFyZ2V0OwoJCQlpZiAobV9pbnRlcmFjdG9yICE9IG51bGwgJiYgQmFzZUFJKSBCYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklOVEVSQUNUSU5HKTsKCQl9CgkJZWxzZSBpZiAobV9pbnRlcmFjdG9yID09IHRhcmdldCkgbV9pbnRlcmFjdG9yID0gbnVsbDsKCX0KCXB1YmxpYyBzdHJpbmcgSW50ZXJhY3RBbmltKElJbnRlcmFjdGFibGUgdGFyZ2V0KSB7IHJldHVybiAiSGl0IjsgfQp9Cg",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAzAMAAAAAAADMAwAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAnHAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uTGlucTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBVbml0eUVuZ2luZS5FdmVudHM7CnVzaW5nIFJhbmRvbSA9IFVuaXR5RW5naW5lLlJhbmRvbTsKCi8vLyA8c3VtbWFyeT4KLy8vIFRoaXMgZGVmaW5lcyBhIGNoYXJhY3RlciBpbiB0aGUgZ2FtZS4gVGhlIG5hbWUgQ2hhcmFjdGVyIGlzIHVzZWQgaW4gYSBsb29zZSBzZW5zZSwgaXQganVzdCBtZWFucyBzb21ldGhpbmcgdGhhdAovLy8gY2FuIGJlIGF0dGFja2VkIGFuZCBoYXZlIHNvbWUgc3RhdHMgaW5jbHVkaW5nIGhlYWx0aC4gSXQgY291bGQgYWxzbyBiZSBhbiBpbmFuaW1hdGUgb2JqZWN0IGxpa2UgYSBicmVha2FibGUgYm94LgovLy8gPC9zdW1tYXJ5PgpwdWJsaWMgY2xhc3MgQ2hhcmFjdGVyRGF0YSA6IEhpZ2hsaWdodGFibGVPYmplY3QsIElJbnRlcmFjdGFibGUKewoJcHVibGljIGVudW0gQ2FtcAoJewoJCVBMQVlFUiwKCQlBTExZLAoJCUVORU1ZLAoJCU5FVVRSQUwsCgkJQlVJTERJTkcsCgkJRU5FTVlCVUlMRElORwoJfQoJcHVibGljIENhbXAgY2FtcDsKCXB1YmxpYyBzdHJpbmcgQ2hhcmFjdGVyTmFtZTsKCXB1YmxpYyBXZWFwb24gRGVmYXVsdFdlYXBvbjsKCXB1YmxpYyBUcmFuc2Zvcm0gV2VhcG9uTG9jYXRvcjsKCXB1YmxpYyBmbG9hdCBNb3ZlU3BlZWQgPSAzLjBmOwoJcHVibGljIGludCBDb3Jwc2VDaGFuY2U7CglbU2VyaWFsaXplRmllbGRdIGZsb2F0IG1fQ29ycHNlUmV0ZW50aW9uOwoJcHVibGljIFN0YXRTeXN0ZW0gU3RhdHM7CglwdWJsaWMgSW52ZW50b3J5U3lzdGVtIEludmVudG9yeSA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0oKTsKCXB1YmxpYyBFcXVpcG1lbnRTeXN0ZW0gRXF1aXBtZW50ID0gbmV3IEVxdWlwbWVudFN5c3RlbSgpOwoJcHVibGljIFVuaXR5RXZlbnQ8RGFtYWdlPiBEYW1hZ2VFdmVudDsKCXB1YmxpYyBVbml0eUV2ZW50PENoYXJhY3RlckRhdGE+IERlYXRoRXZlbnQ7CglwdWJsaWMgVW5pdHlFdmVudDxDaGFyYWN0ZXJEYXRhPiBBdHRhY2tFdmVudDsKCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gS2lsbEVuZW15QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248U2tpbGwsIHN0cmluZz4gU2tpbGxBY3Rpb24geyBnZXQ7IHNldDsgfQoJcHVibGljIEFjdGlvbjxBSUJhc2UuU3RhdGU+IFN0YXRlVXBkYXRlQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248QUlCYXNlLlN0YXRlPiBTdGF0ZVN0YXJ0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248RWZmZWN0RGF0YT4gRWZmZWN0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCVZlY3RvcjMgbV9CaXJ0aFBvczsKCXB1YmxpYyBWZWN0b3IzIEJpcnRoUG9zID0+IG1fQmlydGhQb3M7CglDaGFyYWN0ZXJEYXRhIG1fRW5lbXk7CglwdWJsaWMgQ2hhcmFjdGVyRGF0YSBDdXJyZW50RW5lbXkgeyBnZXQgeyByZXR1cm4gbV9FbmVteTsgfSB9CglwdWJsaWMgU2tpbGxVc2VyIFNraWxsVXNlciA9PiBHZXRDb21wb25lbnQ8U2tpbGxVc2VyPigpOwoJcHVibGljIEFJQmFzZSBCYXNlQUkgPT4gR2V0Q29tcG9uZW50PEFJQmFzZT4oKTsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1faW50ZXJhY3RvcjsgfSBzZXQgeyBtX2ludGVyYWN0b3IgPSB2YWx1ZTsgfSB9Cglwcm90ZWN0ZWQgSUludGVyYWN0YWJsZSBtX2ludGVyYWN0b3I7CglmbG9hdCBtX0F0dGFja0Nvb2xEb3duOwoKCXZvaWQgQXdha2UoKQoJewoJCUluaXRIaWdobGlnaHQoKTsKCQlTdGF0cy5Jbml0KHRoaXMpOwoJCUludmVudG9yeS5Jbml0KHRoaXMpOwoJCUVxdWlwbWVudC5Jbml0KHRoaXMpOwoJCW1fQmlydGhQb3MgPSB0cmFuc2Zvcm0ucG9zaXRpb247CgoJCXN3aXRjaCAoY2FtcCkKCQl7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLlBMQVlFUjoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllciIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkVORU1ZOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiRW5lbXkiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5BTExZOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiQWxseSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLk5FVVRSQUw6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJOZXV0cmFsIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuQlVJTERJTkc6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJCdWlsZGluZyIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkVORU1ZQlVJTERJTkc6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9CgoJCUVxdWlwbWVudC5PbkVxdWlwZWQgKz0gaXRlbSA9PgoJCXsKCQkJaWYgKGl0ZW0uU2xvdCA9PSBFcXVpcG1lbnRJdGVtLkVxdWlwbWVudFNsb3QuV2VhcG9uKQoJCQl7CgkJCQlXZWFwb24gd3AgPSBpdGVtIGFzIFdlYXBvbjsKCQkJCUJhc2VBSS5FbmVteURldGVjdG9yLlJhZGl1cyA9IFN5c3RlbS5NYXRoLk1heCh3cC5TdGF0cy5NYXhSYW5nZSwgQmFzZUFJLkVuZW15RGV0ZWN0b3IuUmFkaXVzKTsKCQkJCXdwLmJ1bGxldFRyYW5zID0gV2VhcG9uTG9jYXRvcjsKCQkJCWlmIChXZWFwb25Mb2NhdG9yICYmIGl0ZW0uV29ybGRPYmplY3RQcmVmYWIpCgkJCQkJSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgV2VhcG9uTG9jYXRvciwgZmFsc2UpOwoJCQkJLy9IZWxwZXJzLlJlY3Vyc2l2ZUxheWVyQ2hhbmdlKG9iai50cmFuc2Zvcm0sIExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyRXF1aXBtZW50IikpOwoJCQl9CgkJfTsKCgkJRXF1aXBtZW50Lk9uVW5lcXVpcCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCWZvcmVhY2ggKFRyYW5zZm9ybSB0IGluIFdlYXBvbkxvY2F0b3IpCgkJCQkJRGVzdHJveSh0LmdhbWVPYmplY3QpOwoJCQl9CgkJfTsKCX0KCgl2b2lkIFN0YXJ0KCkKCXsKCQlpZiAoRGVmYXVsdFdlYXBvbiA9PSBudWxsKQoJCQlEZWZhdWx0V2VhcG9uID0gS2V5VmFsdWVEYXRhLkdldFZhbHVlPEl0ZW0+KEdhbWVNYW5hZ2VyLkNvbmZpZy5JdGVtLCAid3BfdW5hcm1lZCIpIGFzIFdlYXBvbjsKCQlFcXVpcG1lbnQuSW5pdFdlYXBvbihEZWZhdWx0V2VhcG9uKTsKCX0KCXZvaWQgVXBkYXRlKCkKCXsKCQlTdGF0cy5UaWNrKCk7CgoJCWlmIChtX0F0dGFja0Nvb2xEb3duID4gMC4wZikKCQkJbV9BdHRhY2tDb29sRG93biAtPSBUaW1lLmRlbHRhVGltZTsKCgkJaWYgKG1faW50ZXJhY3RvciAhPSBudWxsICYmICFtX2ludGVyYWN0b3IuQ2FuSW50ZXJhY3QodGhpcykpIG1faW50ZXJhY3RvciA9IG51bGw7Cgl9CgoJcHVibGljIHZvaWQgU2V0RW5lbXkoQ2hhcmFjdGVyRGF0YSBlbmVteSkKCXsKCQlpZiAoZW5lbXkgIT0gbV9FbmVteSkgbV9FbmVteSA9IGVuZW15OwoJfQoKCXB1YmxpYyBib29sIENhbkF0dGFja1JlYWNoKENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCXJldHVybiBFcXVpcG1lbnQuV2VhcG9uLkNhbkhpdCh0aGlzLCB0YXJnZXQpOwoJfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrUmVhY2goKSB7IHJldHVybiBDYW5BdHRhY2tSZWFjaChtX0VuZW15KTsgfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrVGFyZ2V0KENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCWlmICh0YXJnZXQuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSAwKQoJCQlyZXR1cm4gZmFsc2U7CgoJCWlmICghQ2FuQXR0YWNrUmVhY2godGFyZ2V0KSkKCQkJcmV0dXJuIGZhbHNlOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCXJldHVybiBmYWxzZTsKCgkJcmV0dXJuIHRydWU7Cgl9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tUYXJnZXQoKSB7IHJldHVybiBDYW5BdHRhY2tUYXJnZXQobV9FbmVteSk7IH0KCXB1YmxpYyB2b2lkIENoZWNrQXR0YWNrKCkKCXsKCQlpZiAoQ2FuQXR0YWNrVGFyZ2V0KCkpCgkJewoJCQlCYXNlQUkuU3RvcCgpOwoJCQlCYXNlQUkuTG9va0F0KEN1cnJlbnRFbmVteS50cmFuc2Zvcm0pOwoJCQlBdHRhY2tUcmlnZ2VyZWQoKTsKCQkJQXR0YWNrRXZlbnQ/Lkludm9rZSh0aGlzKTsKCQl9Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2tGcmFtZSgpCgl7CgkJLy9pZiB3ZSBjYW4ndCByZWFjaCB0aGUgdGFyZ2V0IGFueW1vcmUgd2hlbiBpdCdzIHRpbWUgdG8gZGFtYWdlLCB0aGVuIHRoYXQgYXR0YWNrIG1pc3MuCgkJaWYgKEN1cnJlbnRFbmVteSAmJiBDYW5BdHRhY2tSZWFjaChDdXJyZW50RW5lbXkpKQoJCXsKCQkJQXR0YWNrKEN1cnJlbnRFbmVteSk7CgkJfQoJCWVsc2UgaWYgKEN1cnJlbnRFbmVteSkgSGVscGVycy5Mb2codGhpcywgIkF0dGFja01pc3M6ICIsICQie0NoYXJhY3Rlck5hbWV9LT57Q3VycmVudEVuZW15LkNoYXJhY3Rlck5hbWV9Iik7CgkJZWxzZSBIZWxwZXJzLkxvZyh0aGlzLCAiQXR0YWNrTWlzczogIiwgJCJ7Q2hhcmFjdGVyTmFtZX0tPihFbmVteSBNaXNzZWQpIik7Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2soQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgl7CgkJaWYgKEVxdWlwbWVudC5XZWFwb24pCgkJewoJCQlFcXVpcG1lbnQuV2VhcG9uLkF0dGFjayh0aGlzLCB0YXJnZXQpOwoJCQlpZiAoRXF1aXBtZW50LldlYXBvbi5TdGF0cy5BZGRpdGlvbmFsVGFyZ2V0cyA+IDApCgkJCXsKCQkJCUxpc3Q8R2FtZU9iamVjdD4gdGFyZ2V0cyA9IEJhc2VBSS5FbmVteURldGVjdG9yLklubmVyczsKCQkJCWludCBhZGROdW0gPSAwOwoJCQkJZm9yZWFjaCAoR2FtZU9iamVjdCB0IGluIHRhcmdldHMpCgkJCQl7CgkJCQkJaWYgKHQgIT0gdGFyZ2V0LmdhbWVPYmplY3QgJiYgYWRkTnVtIDwgRXF1aXBtZW50LldlYXBvbi5TdGF0cy5BZGRpdGlvbmFsVGFyZ2V0cykKCQkJCQl7CgkJCQkJCUVxdWlwbWVudC5XZWFwb24uQXR0YWNrKHRoaXMsIHQuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCkpOwoJCQkJCQlhZGROdW0rKzsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJZWxzZSBEZWJ1Zy5Mb2dFcnJvcigiQ2hhcmFjdGVyIG1pc3Npbmcgd2VhcG9uIDogIiArIGdhbWVPYmplY3QpOwoJfQoJcHVibGljIHZvaWQgQXR0YWNrVHJpZ2dlcmVkKCkKCXsKCQkvL0FnaWxpdHkgcmVkdWNlIGJ5IDAuNSUgdGhlIGNvb2xkb3duIHRvIGF0dGFjayAoZS5nLiBpZiBhZ2lsaXR5ID0gNTAsIDI1JSBmYXN0ZXIgdG8gYXR0YWNrKQoJCW1fQXR0YWNrQ29vbERvd24gPSBNYXRoLk1heCgwLjFmLCBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLlNwZWVkIC0gKFN0YXRzLnN0YXRzLmFnaWxpdHkgKiAwLjVmICogMC4wMDFmICogRXF1aXBtZW50LldlYXBvbi5TdGF0cy5TcGVlZCkpOwoJfQoKCXB1YmxpYyB2b2lkIERlYWQoKQoJewoJCURlYXRoRXZlbnQ/Lkludm9rZSh0aGlzKTsKCQlib29sIGNvcnBzZSA9IChSYW5kb20uUmFuZ2UoMSwgMTAxKSA8PSBDb3Jwc2VDaGFuY2UpOwoJCWlmIChjb3Jwc2UpCgkJewoJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJJbnRlcmFjdGFibGUiKTsKCQkJU3RhcnRDb3JvdXRpbmUoRGVzdHJveUNvcnBzZShtX0NvcnBzZVJldGVudGlvbikpOwoJCX0KCQllbHNlCgkJewoJCQlnYW1lT2JqZWN0LmxheWVyID0gKGNhbXAgPT0gQ2FtcC5QTEFZRVIpID8gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJQbGF5ZXJDb3Jwc2UiKSA6IExheWVyTWFzay5OYW1lVG9MYXllcigiQ29ycHNlIik7CgkJCVN0YXJ0Q29yb3V0aW5lKERlc3Ryb3lDb3Jwc2UoMS4wZikpOwoJCX0KCX0KCUlFbnVtZXJhdG9yIERlc3Ryb3lDb3Jwc2UoZmxvYXQgdGltZSkKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHRpbWUpOwoJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkRlYXRoLCB0cmFuc2Zvcm0ucG9zaXRpb24pOwoJCURlc3Ryb3koZ2FtZU9iamVjdCk7Cgl9CgoJcHVibGljIGJvb2wgSG9sZFRvb2xzKFJlc0l0ZW0gaXRlbSkKCXsKCQlpZiAoaXRlbS50b29sVHlwZSA9PSBXZWFwb24uV2VhcG9uVHlwZS5Ob25lKSByZXR1cm4gdHJ1ZTsKCQlpZiAoRXF1aXBtZW50LldlYXBvbiAmJiBpdGVtLnRvb2xUeXBlID09IEVxdWlwbWVudC5XZWFwb24ud2VhcG9uVHlwZSkgcmV0dXJuIHRydWU7CgkJaWYgKEVxdWlwbWVudC5WaWNlV2VhcG9uICYmIGl0ZW0udG9vbFR5cGUgPT0gRXF1aXBtZW50LlZpY2VXZWFwb24ud2VhcG9uVHlwZSkgeyBFcXVpcG1lbnQuU3dpdGNoV2VhcG9uKCk7IHJldHVybiB0cnVlOyB9CgkJZm9yZWFjaCAodmFyIGVudHJ5IGluIEludmVudG9yeS5FbnRyaWVzKQoJCXsKCQkJV2VhcG9uIHdwID0gZW50cnk/Lkl0ZW0gYXMgV2VhcG9uOwoJCQlpZiAod3AgJiYgd3Aud2VhcG9uVHlwZSA9PSBpdGVtLnRvb2xUeXBlKSB7IEludmVudG9yeS5FcXVpcEl0ZW0od3ApOyByZXR1cm4gdHJ1ZTsgfQoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIGJvb2wgQ2FuSW50ZXJhY3QoSUludGVyYWN0YWJsZSB0YXJnZXQpIHsgcmV0dXJuIEJhc2VBSSAmJiBCYXNlQUkuaXNJZGxlOyB9CglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKG1faW50ZXJhY3RvciA9PSBudWxsKQoJCXsKCQkJbV9pbnRlcmFjdG9yID0gdGFyZ2V0OwoJCQlpZiAobV9pbnRlcmFjdG9yICE9IG51bGwgJiYgQmFzZUFJKSBCYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklOVEVSQUNUSU5HKTsKCQl9CgkJZWxzZSBpZiAobV9pbnRlcmFjdG9yID09IHRhcmdldCkgbV9pbnRlcmFjdG9yID0gbnVsbDsKCX0KCXB1YmxpYyBzdHJpbmcgSW50ZXJhY3RBbmltKElJbnRlcmFjdGFibGUgdGFyZ2V0KSB7IHJldHVybiAiSGl0IjsgfQp9CgAAAAAAAAAA7xsAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAzAMAAAAAAADMAwAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1710327991.9096916"
					},
					"AQAAAAAAAAAAAAAA7xsAAAAAAADvGwAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uTGlucTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBVbml0eUVuZ2luZS5FdmVudHM7CnVzaW5nIFJhbmRvbSA9IFVuaXR5RW5naW5lLlJhbmRvbTsKCi8vLyA8c3VtbWFyeT4KLy8vIFRoaXMgZGVmaW5lcyBhIGNoYXJhY3RlciBpbiB0aGUgZ2FtZS4gVGhlIG5hbWUgQ2hhcmFjdGVyIGlzIHVzZWQgaW4gYSBsb29zZSBzZW5zZSwgaXQganVzdCBtZWFucyBzb21ldGhpbmcgdGhhdAovLy8gY2FuIGJlIGF0dGFja2VkIGFuZCBoYXZlIHNvbWUgc3RhdHMgaW5jbHVkaW5nIGhlYWx0aC4gSXQgY291bGQgYWxzbyBiZSBhbiBpbmFuaW1hdGUgb2JqZWN0IGxpa2UgYSBicmVha2FibGUgYm94LgovLy8gPC9zdW1tYXJ5PgpwdWJsaWMgY2xhc3MgQ2hhcmFjdGVyRGF0YSA6IEhpZ2hsaWdodGFibGVPYmplY3QsIElJbnRlcmFjdGFibGUKewoJcHVibGljIGVudW0gQ2FtcAoJewoJCVBMQVlFUiwKCQlBTExZLAoJCUVORU1ZLAoJCU5FVVRSQUwsCgkJQlVJTERJTkcsCgkJRU5FTVlCVUlMRElORwoJfQoJcHVibGljIENhbXAgY2FtcDsKCXB1YmxpYyBzdHJpbmcgQ2hhcmFjdGVyTmFtZTsKCXB1YmxpYyBXZWFwb24gRGVmYXVsdFdlYXBvbjsKCXB1YmxpYyBUcmFuc2Zvcm0gV2VhcG9uTG9jYXRvcjsKCXB1YmxpYyBmbG9hdCBNb3ZlU3BlZWQgPSAzLjBmOwoJcHVibGljIGludCBDb3Jwc2VDaGFuY2U7CglbU2VyaWFsaXplRmllbGRdIGZsb2F0IG1fQ29ycHNlUmV0ZW50aW9uOwoJcHVibGljIFN0YXRTeXN0ZW0gU3RhdHM7CglwdWJsaWMgSW52ZW50b3J5U3lzdGVtIEludmVudG9yeSA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0oKTsKCXB1YmxpYyBFcXVpcG1lbnRTeXN0ZW0gRXF1aXBtZW50ID0gbmV3IEVxdWlwbWVudFN5c3RlbSgpOwoJcHVibGljIFVuaXR5RXZlbnQ8RGFtYWdlPiBEYW1hZ2VFdmVudDsKCXB1YmxpYyBVbml0eUV2ZW50PENoYXJhY3RlckRhdGE+IERlYXRoRXZlbnQ7CglwdWJsaWMgVW5pdHlFdmVudDxDaGFyYWN0ZXJEYXRhPiBBdHRhY2tFdmVudDsKCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gS2lsbEVuZW15QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248U2tpbGwsIHN0cmluZz4gU2tpbGxBY3Rpb24geyBnZXQ7IHNldDsgfQoJcHVibGljIEFjdGlvbjxBSUJhc2UuU3RhdGU+IFN0YXRlVXBkYXRlQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248QUlCYXNlLlN0YXRlPiBTdGF0ZVN0YXJ0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248RWZmZWN0RGF0YT4gRWZmZWN0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCVZlY3RvcjMgbV9CaXJ0aFBvczsKCXB1YmxpYyBWZWN0b3IzIEJpcnRoUG9zID0+IG1fQmlydGhQb3M7CglDaGFyYWN0ZXJEYXRhIG1fRW5lbXk7CglwdWJsaWMgQ2hhcmFjdGVyRGF0YSBDdXJyZW50RW5lbXkgeyBnZXQgeyByZXR1cm4gbV9FbmVteTsgfSB9CglwdWJsaWMgU2tpbGxVc2VyIFNraWxsVXNlciA9PiBHZXRDb21wb25lbnQ8U2tpbGxVc2VyPigpOwoJcHVibGljIEFJQmFzZSBCYXNlQUkgPT4gR2V0Q29tcG9uZW50PEFJQmFzZT4oKTsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1faW50ZXJhY3RvcjsgfSBzZXQgeyBtX2ludGVyYWN0b3IgPSB2YWx1ZTsgfSB9Cglwcm90ZWN0ZWQgSUludGVyYWN0YWJsZSBtX2ludGVyYWN0b3I7CglmbG9hdCBtX0F0dGFja0Nvb2xEb3duOwoKCXZvaWQgQXdha2UoKQoJewoJCUluaXRIaWdobGlnaHQoKTsKCQlTdGF0cy5Jbml0KHRoaXMpOwoJCUludmVudG9yeS5Jbml0KHRoaXMpOwoJCUVxdWlwbWVudC5Jbml0KHRoaXMpOwoJCW1fQmlydGhQb3MgPSB0cmFuc2Zvcm0ucG9zaXRpb247CgoJCXN3aXRjaCAoY2FtcCkKCQl7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLlBMQVlFUjoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllciIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkVORU1ZOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiRW5lbXkiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5BTExZOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiQWxseSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLk5FVVRSQUw6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJOZXV0cmFsIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuQlVJTERJTkc6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJCdWlsZGluZyIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkVORU1ZQlVJTERJTkc6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9CgoJCUVxdWlwbWVudC5PbkVxdWlwZWQgKz0gaXRlbSA9PgoJCXsKCQkJaWYgKGl0ZW0uU2xvdCA9PSBFcXVpcG1lbnRJdGVtLkVxdWlwbWVudFNsb3QuV2VhcG9uKQoJCQl7CgkJCQlXZWFwb24gd3AgPSBpdGVtIGFzIFdlYXBvbjsKCQkJCUJhc2VBSS5FbmVteURldGVjdG9yLlJhZGl1cyA9IFN5c3RlbS5NYXRoLk1heCh3cC5TdGF0cy5NYXhSYW5nZSwgQmFzZUFJLkVuZW15RGV0ZWN0b3IuUmFkaXVzKTsKCQkJCXdwLmJ1bGxldFRyYW5zID0gV2VhcG9uTG9jYXRvcjsKCQkJCWlmIChXZWFwb25Mb2NhdG9yICYmIGl0ZW0uV29ybGRPYmplY3RQcmVmYWIpCgkJCQkJSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgV2VhcG9uTG9jYXRvciwgZmFsc2UpOwoJCQkJLy9IZWxwZXJzLlJlY3Vyc2l2ZUxheWVyQ2hhbmdlKG9iai50cmFuc2Zvcm0sIExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyRXF1aXBtZW50IikpOwoJCQl9CgkJfTsKCgkJRXF1aXBtZW50Lk9uVW5lcXVpcCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCWZvcmVhY2ggKFRyYW5zZm9ybSB0IGluIFdlYXBvbkxvY2F0b3IpCgkJCQkJRGVzdHJveSh0LmdhbWVPYmplY3QpOwoJCQl9CgkJfTsKCX0KCgl2b2lkIFN0YXJ0KCkKCXsKCQlpZiAoRGVmYXVsdFdlYXBvbiA9PSBudWxsKQoJCQlEZWZhdWx0V2VhcG9uID0gS2V5VmFsdWVEYXRhLkdldFZhbHVlPEl0ZW0+KEdhbWVNYW5hZ2VyLkNvbmZpZy5JdGVtLCAid3BfdW5hcm1lZCIpIGFzIFdlYXBvbjsKCQlFcXVpcG1lbnQuSW5pdFdlYXBvbihEZWZhdWx0V2VhcG9uKTsKCX0KCXZvaWQgVXBkYXRlKCkKCXsKCQlTdGF0cy5UaWNrKCk7CgoJCWlmIChtX0F0dGFja0Nvb2xEb3duID4gMC4wZikKCQkJbV9BdHRhY2tDb29sRG93biAtPSBUaW1lLmRlbHRhVGltZTsKCgkJaWYgKG1faW50ZXJhY3RvciAhPSBudWxsICYmICFtX2ludGVyYWN0b3IuQ2FuSW50ZXJhY3QodGhpcykpIG1faW50ZXJhY3RvciA9IG51bGw7Cgl9CgoJcHVibGljIHZvaWQgU2V0RW5lbXkoQ2hhcmFjdGVyRGF0YSBlbmVteSkKCXsKCQlpZiAoZW5lbXkgIT0gbV9FbmVteSkgbV9FbmVteSA9IGVuZW15OwoJfQoKCXB1YmxpYyBib29sIENhbkF0dGFja1JlYWNoKENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCXJldHVybiBFcXVpcG1lbnQuV2VhcG9uLkNhbkhpdCh0aGlzLCB0YXJnZXQpOwoJfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrUmVhY2goKSB7IHJldHVybiBDYW5BdHRhY2tSZWFjaChtX0VuZW15KTsgfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrVGFyZ2V0KENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCWlmICh0YXJnZXQuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSAwKQoJCQlyZXR1cm4gZmFsc2U7CgoJCWlmICghQ2FuQXR0YWNrUmVhY2godGFyZ2V0KSkKCQkJcmV0dXJuIGZhbHNlOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCXJldHVybiBmYWxzZTsKCgkJcmV0dXJuIHRydWU7Cgl9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tUYXJnZXQoKSB7IHJldHVybiBDYW5BdHRhY2tUYXJnZXQobV9FbmVteSk7IH0KCXB1YmxpYyB2b2lkIENoZWNrQXR0YWNrKCkKCXsKCQlpZiAoQ2FuQXR0YWNrVGFyZ2V0KCkpCgkJewoJCQlCYXNlQUkuU3RvcCgpOwoJCQlCYXNlQUkuTG9va0F0KEN1cnJlbnRFbmVteS50cmFuc2Zvcm0pOwoJCQlBdHRhY2tUcmlnZ2VyZWQoKTsKCQkJQXR0YWNrRXZlbnQ/Lkludm9rZSh0aGlzKTsKCQl9Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2tGcmFtZSgpCgl7CgkJLy9pZiB3ZSBjYW4ndCByZWFjaCB0aGUgdGFyZ2V0IGFueW1vcmUgd2hlbiBpdCdzIHRpbWUgdG8gZGFtYWdlLCB0aGVuIHRoYXQgYXR0YWNrIG1pc3MuCgkJaWYgKEN1cnJlbnRFbmVteSAmJiBDYW5BdHRhY2tSZWFjaChDdXJyZW50RW5lbXkpKQoJCXsKCQkJQXR0YWNrKEN1cnJlbnRFbmVteSk7CgkJfQoJCWVsc2UgaWYgKEN1cnJlbnRFbmVteSkgSGVscGVycy5Mb2codGhpcywgIkF0dGFja01pc3M6ICIsICQie0NoYXJhY3Rlck5hbWV9LT57Q3VycmVudEVuZW15LkNoYXJhY3Rlck5hbWV9Iik7CgkJZWxzZSBIZWxwZXJzLkxvZyh0aGlzLCAiQXR0YWNrTWlzczogIiwgJCJ7Q2hhcmFjdGVyTmFtZX0tPihFbmVteSBNaXNzZWQpIik7Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2soQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgl7CgkJaWYgKEVxdWlwbWVudC5XZWFwb24pCgkJewoJCQlFcXVpcG1lbnQuV2VhcG9uLkF0dGFjayh0aGlzLCB0YXJnZXQpOwoJCQlpZiAoRXF1aXBtZW50LldlYXBvbi5TdGF0cy5BZGRpdGlvbmFsVGFyZ2V0cyA+IDApCgkJCXsKCQkJCUxpc3Q8R2FtZU9iamVjdD4gdGFyZ2V0cyA9IEJhc2VBSS5FbmVteURldGVjdG9yLklubmVyczsKCQkJCWludCBhZGROdW0gPSAwOwoJCQkJZm9yZWFjaCAoR2FtZU9iamVjdCB0IGluIHRhcmdldHMpCgkJCQl7CgkJCQkJaWYgKHQgIT0gdGFyZ2V0LmdhbWVPYmplY3QgJiYgYWRkTnVtIDwgRXF1aXBtZW50LldlYXBvbi5TdGF0cy5BZGRpdGlvbmFsVGFyZ2V0cykKCQkJCQl7CgkJCQkJCUVxdWlwbWVudC5XZWFwb24uQXR0YWNrKHRoaXMsIHQuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCkpOwoJCQkJCQlhZGROdW0rKzsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJZWxzZSBEZWJ1Zy5Mb2dFcnJvcigiQ2hhcmFjdGVyIG1pc3Npbmcgd2VhcG9uIDogIiArIGdhbWVPYmplY3QpOwoJfQoJcHVibGljIHZvaWQgQXR0YWNrVHJpZ2dlcmVkKCkKCXsKCQkvL0FnaWxpdHkgcmVkdWNlIGJ5IDAuNSUgdGhlIGNvb2xkb3duIHRvIGF0dGFjayAoZS5nLiBpZiBhZ2lsaXR5ID0gNTAsIDI1JSBmYXN0ZXIgdG8gYXR0YWNrKQoJCW1fQXR0YWNrQ29vbERvd24gPSBNYXRoLk1heCgwLjFmLCBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLlNwZWVkIC0gKFN0YXRzLnN0YXRzLmFnaWxpdHkgKiAwLjVmICogMC4wMDFmICogRXF1aXBtZW50LldlYXBvbi5TdGF0cy5TcGVlZCkpOwoJfQoKCXB1YmxpYyB2b2lkIERlYWQoKQoJewoJCURlYXRoRXZlbnQ/Lkludm9rZSh0aGlzKTsKCQlib29sIGNvcnBzZSA9IChSYW5kb20uUmFuZ2UoMSwgMTAxKSA8PSBDb3Jwc2VDaGFuY2UpOwoJCWlmIChjb3Jwc2UpCgkJewoJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJJbnRlcmFjdGFibGUiKTsKCQkJU3RhcnRDb3JvdXRpbmUoRGVzdHJveUNvcnBzZShtX0NvcnBzZVJldGVudGlvbikpOwoJCX0KCQllbHNlCgkJewoJCQlnYW1lT2JqZWN0LmxheWVyID0gKGNhbXAgPT0gQ2FtcC5QTEFZRVIpID8gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJQbGF5ZXJDb3Jwc2UiKSA6IExheWVyTWFzay5OYW1lVG9MYXllcigiQ29ycHNlIik7CgkJCVN0YXJ0Q29yb3V0aW5lKERlc3Ryb3lDb3Jwc2UoMS4wZikpOwoJCX0KCX0KCUlFbnVtZXJhdG9yIERlc3Ryb3lDb3Jwc2UoZmxvYXQgdGltZSkKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHRpbWUpOwoJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkRlYXRoLCB0cmFuc2Zvcm0ucG9zaXRpb24pOwoJCURlc3Ryb3koZ2FtZU9iamVjdCk7Cgl9CgoJcHVibGljIGJvb2wgSG9sZFRvb2xzKFJlc0l0ZW0gaXRlbSkKCXsKCQlpZiAoaXRlbS50b29sVHlwZSA9PSBXZWFwb24uV2VhcG9uVHlwZS5Ob25lKSByZXR1cm4gdHJ1ZTsKCQlpZiAoRXF1aXBtZW50LldlYXBvbiAmJiBpdGVtLnRvb2xUeXBlID09IEVxdWlwbWVudC5XZWFwb24ud2VhcG9uVHlwZSkgcmV0dXJuIHRydWU7CgkJaWYgKEVxdWlwbWVudC5WaWNlV2VhcG9uICYmIGl0ZW0udG9vbFR5cGUgPT0gRXF1aXBtZW50LlZpY2VXZWFwb24ud2VhcG9uVHlwZSkgeyBFcXVpcG1lbnQuU3dpdGNoV2VhcG9uKCk7IHJldHVybiB0cnVlOyB9CgkJZm9yZWFjaCAodmFyIGVudHJ5IGluIEludmVudG9yeS5FbnRyaWVzKQoJCXsKCQkJV2VhcG9uIHdwID0gZW50cnk/Lkl0ZW0gYXMgV2VhcG9uOwoJCQlpZiAod3AgJiYgd3Aud2VhcG9uVHlwZSA9PSBpdGVtLnRvb2xUeXBlKSB7IEludmVudG9yeS5FcXVpcEl0ZW0od3ApOyByZXR1cm4gdHJ1ZTsgfQoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIGJvb2wgQ2FuSW50ZXJhY3QoSUludGVyYWN0YWJsZSB0YXJnZXQpIHsgcmV0dXJuIEJhc2VBSSAmJiBCYXNlQUkuaXNJZGxlOyB9CglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKG1faW50ZXJhY3RvciA9PSBudWxsKQoJCXsKCQkJbV9pbnRlcmFjdG9yID0gdGFyZ2V0OwoJCQlpZiAobV9pbnRlcmFjdG9yICE9IG51bGwgJiYgQmFzZUFJKSBCYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklOVEVSQUNUSU5HKTsKCQl9Cgl9CglwdWJsaWMgc3RyaW5nIEludGVyYWN0QW5pbShJSW50ZXJhY3RhYmxlIHRhcmdldCkgeyByZXR1cm4gIkhpdCI7IH0KfQo",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAzAMAAAAAAADMAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADvGwAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uTGlucTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBVbml0eUVuZ2luZS5FdmVudHM7CnVzaW5nIFJhbmRvbSA9IFVuaXR5RW5naW5lLlJhbmRvbTsKCi8vLyA8c3VtbWFyeT4KLy8vIFRoaXMgZGVmaW5lcyBhIGNoYXJhY3RlciBpbiB0aGUgZ2FtZS4gVGhlIG5hbWUgQ2hhcmFjdGVyIGlzIHVzZWQgaW4gYSBsb29zZSBzZW5zZSwgaXQganVzdCBtZWFucyBzb21ldGhpbmcgdGhhdAovLy8gY2FuIGJlIGF0dGFja2VkIGFuZCBoYXZlIHNvbWUgc3RhdHMgaW5jbHVkaW5nIGhlYWx0aC4gSXQgY291bGQgYWxzbyBiZSBhbiBpbmFuaW1hdGUgb2JqZWN0IGxpa2UgYSBicmVha2FibGUgYm94LgovLy8gPC9zdW1tYXJ5PgpwdWJsaWMgY2xhc3MgQ2hhcmFjdGVyRGF0YSA6IEhpZ2hsaWdodGFibGVPYmplY3QsIElJbnRlcmFjdGFibGUKewoJcHVibGljIGVudW0gQ2FtcAoJewoJCVBMQVlFUiwKCQlBTExZLAoJCUVORU1ZLAoJCU5FVVRSQUwsCgkJQlVJTERJTkcsCgkJRU5FTVlCVUlMRElORwoJfQoJcHVibGljIENhbXAgY2FtcDsKCXB1YmxpYyBzdHJpbmcgQ2hhcmFjdGVyTmFtZTsKCXB1YmxpYyBXZWFwb24gRGVmYXVsdFdlYXBvbjsKCXB1YmxpYyBUcmFuc2Zvcm0gV2VhcG9uTG9jYXRvcjsKCXB1YmxpYyBmbG9hdCBNb3ZlU3BlZWQgPSAzLjBmOwoJcHVibGljIGludCBDb3Jwc2VDaGFuY2U7CglbU2VyaWFsaXplRmllbGRdIGZsb2F0IG1fQ29ycHNlUmV0ZW50aW9uOwoJcHVibGljIFN0YXRTeXN0ZW0gU3RhdHM7CglwdWJsaWMgSW52ZW50b3J5U3lzdGVtIEludmVudG9yeSA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0oKTsKCXB1YmxpYyBFcXVpcG1lbnRTeXN0ZW0gRXF1aXBtZW50ID0gbmV3IEVxdWlwbWVudFN5c3RlbSgpOwoJcHVibGljIFVuaXR5RXZlbnQ8RGFtYWdlPiBEYW1hZ2VFdmVudDsKCXB1YmxpYyBVbml0eUV2ZW50PENoYXJhY3RlckRhdGE+IERlYXRoRXZlbnQ7CglwdWJsaWMgVW5pdHlFdmVudDxDaGFyYWN0ZXJEYXRhPiBBdHRhY2tFdmVudDsKCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gS2lsbEVuZW15QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248U2tpbGwsIHN0cmluZz4gU2tpbGxBY3Rpb24geyBnZXQ7IHNldDsgfQoJcHVibGljIEFjdGlvbjxBSUJhc2UuU3RhdGU+IFN0YXRlVXBkYXRlQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248QUlCYXNlLlN0YXRlPiBTdGF0ZVN0YXJ0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248RWZmZWN0RGF0YT4gRWZmZWN0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCVZlY3RvcjMgbV9CaXJ0aFBvczsKCXB1YmxpYyBWZWN0b3IzIEJpcnRoUG9zID0+IG1fQmlydGhQb3M7CglDaGFyYWN0ZXJEYXRhIG1fRW5lbXk7CglwdWJsaWMgQ2hhcmFjdGVyRGF0YSBDdXJyZW50RW5lbXkgeyBnZXQgeyByZXR1cm4gbV9FbmVteTsgfSB9CglwdWJsaWMgU2tpbGxVc2VyIFNraWxsVXNlciA9PiBHZXRDb21wb25lbnQ8U2tpbGxVc2VyPigpOwoJcHVibGljIEFJQmFzZSBCYXNlQUkgPT4gR2V0Q29tcG9uZW50PEFJQmFzZT4oKTsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1faW50ZXJhY3RvcjsgfSBzZXQgeyBtX2ludGVyYWN0b3IgPSB2YWx1ZTsgfSB9Cglwcm90ZWN0ZWQgSUludGVyYWN0YWJsZSBtX2ludGVyYWN0b3I7CglmbG9hdCBtX0F0dGFja0Nvb2xEb3duOwoKCXZvaWQgQXdha2UoKQoJewoJCUluaXRIaWdobGlnaHQoKTsKCQlTdGF0cy5Jbml0KHRoaXMpOwoJCUludmVudG9yeS5Jbml0KHRoaXMpOwoJCUVxdWlwbWVudC5Jbml0KHRoaXMpOwoJCW1fQmlydGhQb3MgPSB0cmFuc2Zvcm0ucG9zaXRpb247CgoJCXN3aXRjaCAoY2FtcCkKCQl7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLlBMQVlFUjoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllciIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkVORU1ZOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiRW5lbXkiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5BTExZOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiQWxseSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLk5FVVRSQUw6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJOZXV0cmFsIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuQlVJTERJTkc6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJCdWlsZGluZyIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkVORU1ZQlVJTERJTkc6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9CgoJCUVxdWlwbWVudC5PbkVxdWlwZWQgKz0gaXRlbSA9PgoJCXsKCQkJaWYgKGl0ZW0uU2xvdCA9PSBFcXVpcG1lbnRJdGVtLkVxdWlwbWVudFNsb3QuV2VhcG9uKQoJCQl7CgkJCQlXZWFwb24gd3AgPSBpdGVtIGFzIFdlYXBvbjsKCQkJCUJhc2VBSS5FbmVteURldGVjdG9yLlJhZGl1cyA9IFN5c3RlbS5NYXRoLk1heCh3cC5TdGF0cy5NYXhSYW5nZSwgQmFzZUFJLkVuZW15RGV0ZWN0b3IuUmFkaXVzKTsKCQkJCXdwLmJ1bGxldFRyYW5zID0gV2VhcG9uTG9jYXRvcjsKCQkJCWlmIChXZWFwb25Mb2NhdG9yICYmIGl0ZW0uV29ybGRPYmplY3RQcmVmYWIpCgkJCQkJSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgV2VhcG9uTG9jYXRvciwgZmFsc2UpOwoJCQkJLy9IZWxwZXJzLlJlY3Vyc2l2ZUxheWVyQ2hhbmdlKG9iai50cmFuc2Zvcm0sIExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyRXF1aXBtZW50IikpOwoJCQl9CgkJfTsKCgkJRXF1aXBtZW50Lk9uVW5lcXVpcCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCWZvcmVhY2ggKFRyYW5zZm9ybSB0IGluIFdlYXBvbkxvY2F0b3IpCgkJCQkJRGVzdHJveSh0LmdhbWVPYmplY3QpOwoJCQl9CgkJfTsKCX0KCgl2b2lkIFN0YXJ0KCkKCXsKCQlpZiAoRGVmYXVsdFdlYXBvbiA9PSBudWxsKQoJCQlEZWZhdWx0V2VhcG9uID0gS2V5VmFsdWVEYXRhLkdldFZhbHVlPEl0ZW0+KEdhbWVNYW5hZ2VyLkNvbmZpZy5JdGVtLCAid3BfdW5hcm1lZCIpIGFzIFdlYXBvbjsKCQlFcXVpcG1lbnQuSW5pdFdlYXBvbihEZWZhdWx0V2VhcG9uKTsKCX0KCXZvaWQgVXBkYXRlKCkKCXsKCQlTdGF0cy5UaWNrKCk7CgoJCWlmIChtX0F0dGFja0Nvb2xEb3duID4gMC4wZikKCQkJbV9BdHRhY2tDb29sRG93biAtPSBUaW1lLmRlbHRhVGltZTsKCgkJaWYgKG1faW50ZXJhY3RvciAhPSBudWxsICYmICFtX2ludGVyYWN0b3IuQ2FuSW50ZXJhY3QodGhpcykpIG1faW50ZXJhY3RvciA9IG51bGw7Cgl9CgoJcHVibGljIHZvaWQgU2V0RW5lbXkoQ2hhcmFjdGVyRGF0YSBlbmVteSkKCXsKCQlpZiAoZW5lbXkgIT0gbV9FbmVteSkgbV9FbmVteSA9IGVuZW15OwoJfQoKCXB1YmxpYyBib29sIENhbkF0dGFja1JlYWNoKENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCXJldHVybiBFcXVpcG1lbnQuV2VhcG9uLkNhbkhpdCh0aGlzLCB0YXJnZXQpOwoJfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrUmVhY2goKSB7IHJldHVybiBDYW5BdHRhY2tSZWFjaChtX0VuZW15KTsgfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrVGFyZ2V0KENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCWlmICh0YXJnZXQuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSAwKQoJCQlyZXR1cm4gZmFsc2U7CgoJCWlmICghQ2FuQXR0YWNrUmVhY2godGFyZ2V0KSkKCQkJcmV0dXJuIGZhbHNlOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCXJldHVybiBmYWxzZTsKCgkJcmV0dXJuIHRydWU7Cgl9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tUYXJnZXQoKSB7IHJldHVybiBDYW5BdHRhY2tUYXJnZXQobV9FbmVteSk7IH0KCXB1YmxpYyB2b2lkIENoZWNrQXR0YWNrKCkKCXsKCQlpZiAoQ2FuQXR0YWNrVGFyZ2V0KCkpCgkJewoJCQlCYXNlQUkuU3RvcCgpOwoJCQlCYXNlQUkuTG9va0F0KEN1cnJlbnRFbmVteS50cmFuc2Zvcm0pOwoJCQlBdHRhY2tUcmlnZ2VyZWQoKTsKCQkJQXR0YWNrRXZlbnQ/Lkludm9rZSh0aGlzKTsKCQl9Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2tGcmFtZSgpCgl7CgkJLy9pZiB3ZSBjYW4ndCByZWFjaCB0aGUgdGFyZ2V0IGFueW1vcmUgd2hlbiBpdCdzIHRpbWUgdG8gZGFtYWdlLCB0aGVuIHRoYXQgYXR0YWNrIG1pc3MuCgkJaWYgKEN1cnJlbnRFbmVteSAmJiBDYW5BdHRhY2tSZWFjaChDdXJyZW50RW5lbXkpKQoJCXsKCQkJQXR0YWNrKEN1cnJlbnRFbmVteSk7CgkJfQoJCWVsc2UgaWYgKEN1cnJlbnRFbmVteSkgSGVscGVycy5Mb2codGhpcywgIkF0dGFja01pc3M6ICIsICQie0NoYXJhY3Rlck5hbWV9LT57Q3VycmVudEVuZW15LkNoYXJhY3Rlck5hbWV9Iik7CgkJZWxzZSBIZWxwZXJzLkxvZyh0aGlzLCAiQXR0YWNrTWlzczogIiwgJCJ7Q2hhcmFjdGVyTmFtZX0tPihFbmVteSBNaXNzZWQpIik7Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2soQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgl7CgkJaWYgKEVxdWlwbWVudC5XZWFwb24pCgkJewoJCQlFcXVpcG1lbnQuV2VhcG9uLkF0dGFjayh0aGlzLCB0YXJnZXQpOwoJCQlpZiAoRXF1aXBtZW50LldlYXBvbi5TdGF0cy5BZGRpdGlvbmFsVGFyZ2V0cyA+IDApCgkJCXsKCQkJCUxpc3Q8R2FtZU9iamVjdD4gdGFyZ2V0cyA9IEJhc2VBSS5FbmVteURldGVjdG9yLklubmVyczsKCQkJCWludCBhZGROdW0gPSAwOwoJCQkJZm9yZWFjaCAoR2FtZU9iamVjdCB0IGluIHRhcmdldHMpCgkJCQl7CgkJCQkJaWYgKHQgIT0gdGFyZ2V0LmdhbWVPYmplY3QgJiYgYWRkTnVtIDwgRXF1aXBtZW50LldlYXBvbi5TdGF0cy5BZGRpdGlvbmFsVGFyZ2V0cykKCQkJCQl7CgkJCQkJCUVxdWlwbWVudC5XZWFwb24uQXR0YWNrKHRoaXMsIHQuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCkpOwoJCQkJCQlhZGROdW0rKzsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJZWxzZSBEZWJ1Zy5Mb2dFcnJvcigiQ2hhcmFjdGVyIG1pc3Npbmcgd2VhcG9uIDogIiArIGdhbWVPYmplY3QpOwoJfQoJcHVibGljIHZvaWQgQXR0YWNrVHJpZ2dlcmVkKCkKCXsKCQkvL0FnaWxpdHkgcmVkdWNlIGJ5IDAuNSUgdGhlIGNvb2xkb3duIHRvIGF0dGFjayAoZS5nLiBpZiBhZ2lsaXR5ID0gNTAsIDI1JSBmYXN0ZXIgdG8gYXR0YWNrKQoJCW1fQXR0YWNrQ29vbERvd24gPSBNYXRoLk1heCgwLjFmLCBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLlNwZWVkIC0gKFN0YXRzLnN0YXRzLmFnaWxpdHkgKiAwLjVmICogMC4wMDFmICogRXF1aXBtZW50LldlYXBvbi5TdGF0cy5TcGVlZCkpOwoJfQoKCXB1YmxpYyB2b2lkIERlYWQoKQoJewoJCURlYXRoRXZlbnQ/Lkludm9rZSh0aGlzKTsKCQlib29sIGNvcnBzZSA9IChSYW5kb20uUmFuZ2UoMSwgMTAxKSA8PSBDb3Jwc2VDaGFuY2UpOwoJCWlmIChjb3Jwc2UpCgkJewoJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJJbnRlcmFjdGFibGUiKTsKCQkJU3RhcnRDb3JvdXRpbmUoRGVzdHJveUNvcnBzZShtX0NvcnBzZVJldGVudGlvbikpOwoJCX0KCQllbHNlCgkJewoJCQlnYW1lT2JqZWN0LmxheWVyID0gKGNhbXAgPT0gQ2FtcC5QTEFZRVIpID8gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJQbGF5ZXJDb3Jwc2UiKSA6IExheWVyTWFzay5OYW1lVG9MYXllcigiQ29ycHNlIik7CgkJCVN0YXJ0Q29yb3V0aW5lKERlc3Ryb3lDb3Jwc2UoMS4wZikpOwoJCX0KCX0KCUlFbnVtZXJhdG9yIERlc3Ryb3lDb3Jwc2UoZmxvYXQgdGltZSkKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHRpbWUpOwoJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkRlYXRoLCB0cmFuc2Zvcm0ucG9zaXRpb24pOwoJCURlc3Ryb3koZ2FtZU9iamVjdCk7Cgl9CgoJcHVibGljIGJvb2wgSG9sZFRvb2xzKFJlc0l0ZW0gaXRlbSkKCXsKCQlpZiAoaXRlbS50b29sVHlwZSA9PSBXZWFwb24uV2VhcG9uVHlwZS5Ob25lKSByZXR1cm4gdHJ1ZTsKCQlpZiAoRXF1aXBtZW50LldlYXBvbiAmJiBpdGVtLnRvb2xUeXBlID09IEVxdWlwbWVudC5XZWFwb24ud2VhcG9uVHlwZSkgcmV0dXJuIHRydWU7CgkJaWYgKEVxdWlwbWVudC5WaWNlV2VhcG9uICYmIGl0ZW0udG9vbFR5cGUgPT0gRXF1aXBtZW50LlZpY2VXZWFwb24ud2VhcG9uVHlwZSkgeyBFcXVpcG1lbnQuU3dpdGNoV2VhcG9uKCk7IHJldHVybiB0cnVlOyB9CgkJZm9yZWFjaCAodmFyIGVudHJ5IGluIEludmVudG9yeS5FbnRyaWVzKQoJCXsKCQkJV2VhcG9uIHdwID0gZW50cnk/Lkl0ZW0gYXMgV2VhcG9uOwoJCQlpZiAod3AgJiYgd3Aud2VhcG9uVHlwZSA9PSBpdGVtLnRvb2xUeXBlKSB7IEludmVudG9yeS5FcXVpcEl0ZW0od3ApOyByZXR1cm4gdHJ1ZTsgfQoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIGJvb2wgQ2FuSW50ZXJhY3QoSUludGVyYWN0YWJsZSB0YXJnZXQpIHsgcmV0dXJuIEJhc2VBSSAmJiBCYXNlQUkuaXNJZGxlOyB9CglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKG1faW50ZXJhY3RvciA9PSBudWxsKQoJCXsKCQkJbV9pbnRlcmFjdG9yID0gdGFyZ2V0OwoJCQlpZiAobV9pbnRlcmFjdG9yICE9IG51bGwgJiYgQmFzZUFJKSBCYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklOVEVSQUNUSU5HKTsKCQl9Cgl9CglwdWJsaWMgc3RyaW5nIEludGVyYWN0QW5pbShJSW50ZXJhY3RhYmxlIHRhcmdldCkgeyByZXR1cm4gIkhpdCI7IH0KfQoAAAAAAAAAACIcAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMwDAAAAAAAAzAMAAAAAAAAAAAAAAADwvw"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1710410655.0399466"
					},
					"AQAAAAAAAAAAAAAAIhwAAAAAAAAiHAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uTGlucTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBVbml0eUVuZ2luZS5FdmVudHM7CnVzaW5nIFJhbmRvbSA9IFVuaXR5RW5naW5lLlJhbmRvbTsKCi8vLyA8c3VtbWFyeT4KLy8vIFRoaXMgZGVmaW5lcyBhIGNoYXJhY3RlciBpbiB0aGUgZ2FtZS4gVGhlIG5hbWUgQ2hhcmFjdGVyIGlzIHVzZWQgaW4gYSBsb29zZSBzZW5zZSwgaXQganVzdCBtZWFucyBzb21ldGhpbmcgdGhhdAovLy8gY2FuIGJlIGF0dGFja2VkIGFuZCBoYXZlIHNvbWUgc3RhdHMgaW5jbHVkaW5nIGhlYWx0aC4gSXQgY291bGQgYWxzbyBiZSBhbiBpbmFuaW1hdGUgb2JqZWN0IGxpa2UgYSBicmVha2FibGUgYm94LgovLy8gPC9zdW1tYXJ5PgpwdWJsaWMgY2xhc3MgQ2hhcmFjdGVyRGF0YSA6IEhpZ2hsaWdodGFibGVPYmplY3QsIElJbnRlcmFjdGFibGUKewoJcHVibGljIGVudW0gQ2FtcAoJewoJCVBMQVlFUiwKCQlBTExZLAoJCUVORU1ZLAoJCU5FVVRSQUwsCgkJQlVJTERJTkcsCgkJRU5FTVlCVUlMRElORwoJfQoJcHVibGljIENhbXAgY2FtcDsKCXB1YmxpYyBzdHJpbmcgQ2hhcmFjdGVyTmFtZTsKCXB1YmxpYyBXZWFwb24gRGVmYXVsdFdlYXBvbjsKCXB1YmxpYyBUcmFuc2Zvcm0gV2VhcG9uTG9jYXRvcjsKCXB1YmxpYyBmbG9hdCBNb3ZlU3BlZWQgPSAzLjBmOwoJcHVibGljIGludCBDb3Jwc2VDaGFuY2U7CglbU2VyaWFsaXplRmllbGRdIGZsb2F0IG1fQ29ycHNlUmV0ZW50aW9uOwoJcHVibGljIFN0YXRTeXN0ZW0gU3RhdHM7CglwdWJsaWMgSW52ZW50b3J5U3lzdGVtIEludmVudG9yeSA9IG5ldyBJbnZlbnRvcnlTeXN0ZW0oKTsKCXB1YmxpYyBFcXVpcG1lbnRTeXN0ZW0gRXF1aXBtZW50ID0gbmV3IEVxdWlwbWVudFN5c3RlbSgpOwoJcHVibGljIFVuaXR5RXZlbnQ8RGFtYWdlPiBEYW1hZ2VFdmVudDsKCXB1YmxpYyBVbml0eUV2ZW50PENoYXJhY3RlckRhdGE+IERlYXRoRXZlbnQ7CglwdWJsaWMgVW5pdHlFdmVudDxDaGFyYWN0ZXJEYXRhPiBBdHRhY2tFdmVudDsKCXB1YmxpYyBBY3Rpb248Q2hhcmFjdGVyRGF0YT4gS2lsbEVuZW15QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248U2tpbGwsIHN0cmluZz4gU2tpbGxBY3Rpb24geyBnZXQ7IHNldDsgfQoJcHVibGljIEFjdGlvbjxBSUJhc2UuU3RhdGU+IFN0YXRlVXBkYXRlQWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248QUlCYXNlLlN0YXRlPiBTdGF0ZVN0YXJ0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCXB1YmxpYyBBY3Rpb248RWZmZWN0RGF0YT4gRWZmZWN0QWN0aW9uIHsgZ2V0OyBzZXQ7IH0KCVZlY3RvcjMgbV9CaXJ0aFBvczsKCXB1YmxpYyBWZWN0b3IzIEJpcnRoUG9zID0+IG1fQmlydGhQb3M7CglDaGFyYWN0ZXJEYXRhIG1fRW5lbXk7CglwdWJsaWMgQ2hhcmFjdGVyRGF0YSBDdXJyZW50RW5lbXkgeyBnZXQgeyByZXR1cm4gbV9FbmVteTsgfSB9CglwdWJsaWMgU2tpbGxVc2VyIFNraWxsVXNlciA9PiBHZXRDb21wb25lbnQ8U2tpbGxVc2VyPigpOwoJcHVibGljIEFJQmFzZSBCYXNlQUkgPT4gR2V0Q29tcG9uZW50PEFJQmFzZT4oKTsKCXB1YmxpYyBJSW50ZXJhY3RhYmxlIEN1cnJlbnRJbnRlcmFjdG9yIHsgZ2V0IHsgcmV0dXJuIG1faW50ZXJhY3RvcjsgfSBzZXQgeyBtX2ludGVyYWN0b3IgPSB2YWx1ZTsgfSB9Cglwcm90ZWN0ZWQgSUludGVyYWN0YWJsZSBtX2ludGVyYWN0b3I7CglwdWJsaWMgSW50ZXJhY3REYXRhIERhdGEgeyBnZXQgeyByZXR1cm4gbnVsbDsgfSB9CglmbG9hdCBtX0F0dGFja0Nvb2xEb3duOwoKCXZvaWQgQXdha2UoKQoJewoJCUluaXRIaWdobGlnaHQoKTsKCQlTdGF0cy5Jbml0KHRoaXMpOwoJCUludmVudG9yeS5Jbml0KHRoaXMpOwoJCUVxdWlwbWVudC5Jbml0KHRoaXMpOwoJCW1fQmlydGhQb3MgPSB0cmFuc2Zvcm0ucG9zaXRpb247CgoJCXN3aXRjaCAoY2FtcCkKCQl7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLlBMQVlFUjoKCQkJCWdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllciIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkVORU1ZOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiRW5lbXkiKTsKCQkJCWJyZWFrOwoJCQljYXNlIENoYXJhY3RlckRhdGEuQ2FtcC5BTExZOgoJCQkJZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiQWxseSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLk5FVVRSQUw6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJOZXV0cmFsIik7CgkJCQlicmVhazsKCQkJY2FzZSBDaGFyYWN0ZXJEYXRhLkNhbXAuQlVJTERJTkc6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJCdWlsZGluZyIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgQ2hhcmFjdGVyRGF0YS5DYW1wLkVORU1ZQlVJTERJTkc6CgkJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9CgoJCUVxdWlwbWVudC5PbkVxdWlwZWQgKz0gaXRlbSA9PgoJCXsKCQkJaWYgKGl0ZW0uU2xvdCA9PSBFcXVpcG1lbnRJdGVtLkVxdWlwbWVudFNsb3QuV2VhcG9uKQoJCQl7CgkJCQlXZWFwb24gd3AgPSBpdGVtIGFzIFdlYXBvbjsKCQkJCUJhc2VBSS5FbmVteURldGVjdG9yLlJhZGl1cyA9IFN5c3RlbS5NYXRoLk1heCh3cC5TdGF0cy5NYXhSYW5nZSwgQmFzZUFJLkVuZW15RGV0ZWN0b3IuUmFkaXVzKTsKCQkJCXdwLmJ1bGxldFRyYW5zID0gV2VhcG9uTG9jYXRvcjsKCQkJCWlmIChXZWFwb25Mb2NhdG9yICYmIGl0ZW0uV29ybGRPYmplY3RQcmVmYWIpCgkJCQkJSW5zdGFudGlhdGUoaXRlbS5Xb3JsZE9iamVjdFByZWZhYiwgV2VhcG9uTG9jYXRvciwgZmFsc2UpOwoJCQkJLy9IZWxwZXJzLlJlY3Vyc2l2ZUxheWVyQ2hhbmdlKG9iai50cmFuc2Zvcm0sIExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyRXF1aXBtZW50IikpOwoJCQl9CgkJfTsKCgkJRXF1aXBtZW50Lk9uVW5lcXVpcCArPSBpdGVtID0+CgkJewoJCQlpZiAoaXRlbS5TbG90ID09IEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdC5XZWFwb24pCgkJCXsKCQkJCWZvcmVhY2ggKFRyYW5zZm9ybSB0IGluIFdlYXBvbkxvY2F0b3IpCgkJCQkJRGVzdHJveSh0LmdhbWVPYmplY3QpOwoJCQl9CgkJfTsKCX0KCgl2b2lkIFN0YXJ0KCkKCXsKCQlpZiAoRGVmYXVsdFdlYXBvbiA9PSBudWxsKQoJCQlEZWZhdWx0V2VhcG9uID0gS2V5VmFsdWVEYXRhLkdldFZhbHVlPEl0ZW0+KEdhbWVNYW5hZ2VyLkNvbmZpZy5JdGVtLCAid3BfdW5hcm1lZCIpIGFzIFdlYXBvbjsKCQlFcXVpcG1lbnQuSW5pdFdlYXBvbihEZWZhdWx0V2VhcG9uKTsKCX0KCXZvaWQgVXBkYXRlKCkKCXsKCQlTdGF0cy5UaWNrKCk7CgoJCWlmIChtX0F0dGFja0Nvb2xEb3duID4gMC4wZikKCQkJbV9BdHRhY2tDb29sRG93biAtPSBUaW1lLmRlbHRhVGltZTsKCgkJaWYgKG1faW50ZXJhY3RvciAhPSBudWxsICYmICFtX2ludGVyYWN0b3IuQ2FuSW50ZXJhY3QodGhpcykpIG1faW50ZXJhY3RvciA9IG51bGw7Cgl9CgoJcHVibGljIHZvaWQgU2V0RW5lbXkoQ2hhcmFjdGVyRGF0YSBlbmVteSkKCXsKCQlpZiAoZW5lbXkgIT0gbV9FbmVteSkgbV9FbmVteSA9IGVuZW15OwoJfQoKCXB1YmxpYyBib29sIENhbkF0dGFja1JlYWNoKENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCXJldHVybiBFcXVpcG1lbnQuV2VhcG9uLkNhbkhpdCh0aGlzLCB0YXJnZXQpOwoJfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrUmVhY2goKSB7IHJldHVybiBDYW5BdHRhY2tSZWFjaChtX0VuZW15KTsgfQoJcHVibGljIGJvb2wgQ2FuQXR0YWNrVGFyZ2V0KENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJewoJCWlmICh0YXJnZXQgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOwoJCWlmICh0YXJnZXQuU3RhdHMuQ3VycmVudEhlYWx0aCA9PSAwKQoJCQlyZXR1cm4gZmFsc2U7CgoJCWlmICghQ2FuQXR0YWNrUmVhY2godGFyZ2V0KSkKCQkJcmV0dXJuIGZhbHNlOwoKCQlpZiAobV9BdHRhY2tDb29sRG93biA+IDAuMGYpCgkJCXJldHVybiBmYWxzZTsKCgkJcmV0dXJuIHRydWU7Cgl9CglwdWJsaWMgYm9vbCBDYW5BdHRhY2tUYXJnZXQoKSB7IHJldHVybiBDYW5BdHRhY2tUYXJnZXQobV9FbmVteSk7IH0KCXB1YmxpYyB2b2lkIENoZWNrQXR0YWNrKCkKCXsKCQlpZiAoQ2FuQXR0YWNrVGFyZ2V0KCkpCgkJewoJCQlCYXNlQUkuU3RvcCgpOwoJCQlCYXNlQUkuTG9va0F0KEN1cnJlbnRFbmVteS50cmFuc2Zvcm0pOwoJCQlBdHRhY2tUcmlnZ2VyZWQoKTsKCQkJQXR0YWNrRXZlbnQ/Lkludm9rZSh0aGlzKTsKCQl9Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2tGcmFtZSgpCgl7CgkJLy9pZiB3ZSBjYW4ndCByZWFjaCB0aGUgdGFyZ2V0IGFueW1vcmUgd2hlbiBpdCdzIHRpbWUgdG8gZGFtYWdlLCB0aGVuIHRoYXQgYXR0YWNrIG1pc3MuCgkJaWYgKEN1cnJlbnRFbmVteSAmJiBDYW5BdHRhY2tSZWFjaChDdXJyZW50RW5lbXkpKQoJCXsKCQkJQXR0YWNrKEN1cnJlbnRFbmVteSk7CgkJfQoJCWVsc2UgaWYgKEN1cnJlbnRFbmVteSkgSGVscGVycy5Mb2codGhpcywgIkF0dGFja01pc3M6ICIsICQie0NoYXJhY3Rlck5hbWV9LT57Q3VycmVudEVuZW15LkNoYXJhY3Rlck5hbWV9Iik7CgkJZWxzZSBIZWxwZXJzLkxvZyh0aGlzLCAiQXR0YWNrTWlzczogIiwgJCJ7Q2hhcmFjdGVyTmFtZX0tPihFbmVteSBNaXNzZWQpIik7Cgl9CglwdWJsaWMgdm9pZCBBdHRhY2soQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgl7CgkJaWYgKEVxdWlwbWVudC5XZWFwb24pCgkJewoJCQlFcXVpcG1lbnQuV2VhcG9uLkF0dGFjayh0aGlzLCB0YXJnZXQpOwoJCQlpZiAoRXF1aXBtZW50LldlYXBvbi5TdGF0cy5BZGRpdGlvbmFsVGFyZ2V0cyA+IDApCgkJCXsKCQkJCUxpc3Q8R2FtZU9iamVjdD4gdGFyZ2V0cyA9IEJhc2VBSS5FbmVteURldGVjdG9yLklubmVyczsKCQkJCWludCBhZGROdW0gPSAwOwoJCQkJZm9yZWFjaCAoR2FtZU9iamVjdCB0IGluIHRhcmdldHMpCgkJCQl7CgkJCQkJaWYgKHQgIT0gdGFyZ2V0LmdhbWVPYmplY3QgJiYgYWRkTnVtIDwgRXF1aXBtZW50LldlYXBvbi5TdGF0cy5BZGRpdGlvbmFsVGFyZ2V0cykKCQkJCQl7CgkJCQkJCUVxdWlwbWVudC5XZWFwb24uQXR0YWNrKHRoaXMsIHQuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCkpOwoJCQkJCQlhZGROdW0rKzsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJZWxzZSBEZWJ1Zy5Mb2dFcnJvcigiQ2hhcmFjdGVyIG1pc3Npbmcgd2VhcG9uIDogIiArIGdhbWVPYmplY3QpOwoJfQoJcHVibGljIHZvaWQgQXR0YWNrVHJpZ2dlcmVkKCkKCXsKCQkvL0FnaWxpdHkgcmVkdWNlIGJ5IDAuNSUgdGhlIGNvb2xkb3duIHRvIGF0dGFjayAoZS5nLiBpZiBhZ2lsaXR5ID0gNTAsIDI1JSBmYXN0ZXIgdG8gYXR0YWNrKQoJCW1fQXR0YWNrQ29vbERvd24gPSBNYXRoLk1heCgwLjFmLCBFcXVpcG1lbnQuV2VhcG9uLlN0YXRzLlNwZWVkIC0gKFN0YXRzLnN0YXRzLmFnaWxpdHkgKiAwLjVmICogMC4wMDFmICogRXF1aXBtZW50LldlYXBvbi5TdGF0cy5TcGVlZCkpOwoJfQoKCXB1YmxpYyB2b2lkIERlYWQoKQoJewoJCURlYXRoRXZlbnQ/Lkludm9rZSh0aGlzKTsKCQlib29sIGNvcnBzZSA9IChSYW5kb20uUmFuZ2UoMSwgMTAxKSA8PSBDb3Jwc2VDaGFuY2UpOwoJCWlmIChjb3Jwc2UpCgkJewoJCQlnYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJJbnRlcmFjdGFibGUiKTsKCQkJU3RhcnRDb3JvdXRpbmUoRGVzdHJveUNvcnBzZShtX0NvcnBzZVJldGVudGlvbikpOwoJCX0KCQllbHNlCgkJewoJCQlnYW1lT2JqZWN0LmxheWVyID0gKGNhbXAgPT0gQ2FtcC5QTEFZRVIpID8gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJQbGF5ZXJDb3Jwc2UiKSA6IExheWVyTWFzay5OYW1lVG9MYXllcigiQ29ycHNlIik7CgkJCVN0YXJ0Q29yb3V0aW5lKERlc3Ryb3lDb3Jwc2UoMS4wZikpOwoJCX0KCX0KCUlFbnVtZXJhdG9yIERlc3Ryb3lDb3Jwc2UoZmxvYXQgdGltZSkKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHRpbWUpOwoJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkRlYXRoLCB0cmFuc2Zvcm0ucG9zaXRpb24pOwoJCURlc3Ryb3koZ2FtZU9iamVjdCk7Cgl9CgoJcHVibGljIGJvb2wgSG9sZFRvb2xzKFJlc0l0ZW0gaXRlbSkKCXsKCQlpZiAoaXRlbS50b29sVHlwZSA9PSBXZWFwb24uV2VhcG9uVHlwZS5Ob25lKSByZXR1cm4gdHJ1ZTsKCQlpZiAoRXF1aXBtZW50LldlYXBvbiAmJiBpdGVtLnRvb2xUeXBlID09IEVxdWlwbWVudC5XZWFwb24ud2VhcG9uVHlwZSkgcmV0dXJuIHRydWU7CgkJaWYgKEVxdWlwbWVudC5WaWNlV2VhcG9uICYmIGl0ZW0udG9vbFR5cGUgPT0gRXF1aXBtZW50LlZpY2VXZWFwb24ud2VhcG9uVHlwZSkgeyBFcXVpcG1lbnQuU3dpdGNoV2VhcG9uKCk7IHJldHVybiB0cnVlOyB9CgkJZm9yZWFjaCAodmFyIGVudHJ5IGluIEludmVudG9yeS5FbnRyaWVzKQoJCXsKCQkJV2VhcG9uIHdwID0gZW50cnk/Lkl0ZW0gYXMgV2VhcG9uOwoJCQlpZiAod3AgJiYgd3Aud2VhcG9uVHlwZSA9PSBpdGVtLnRvb2xUeXBlKSB7IEludmVudG9yeS5FcXVpcEl0ZW0od3ApOyByZXR1cm4gdHJ1ZTsgfQoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIGJvb2wgQ2FuSW50ZXJhY3QoSUludGVyYWN0YWJsZSB0YXJnZXQpIHsgcmV0dXJuIEJhc2VBSSAmJiBCYXNlQUkuaXNJZGxlOyB9CglwdWJsaWMgdm9pZCBJbnRlcmFjdFdpdGgoSUludGVyYWN0YWJsZSB0YXJnZXQpCgl7CgkJaWYgKG1faW50ZXJhY3RvciA9PSBudWxsKQoJCXsKCQkJbV9pbnRlcmFjdG9yID0gdGFyZ2V0OwoJCQlpZiAobV9pbnRlcmFjdG9yICE9IG51bGwgJiYgQmFzZUFJKSBCYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklOVEVSQUNUSU5HKTsKCQl9Cgl9CglwdWJsaWMgc3RyaW5nIEludGVyYWN0QW5pbShJSW50ZXJhY3RhYmxlIHRhcmdldCkgeyByZXR1cm4gIkhpdCI7IH0KfQo",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMwDAAAAAAAAzAMAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "Assets/Standard Assets/Scripts/Damage.cs",
			"settings":
			{
				"buffer_size": 2797,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					23,
					1,
					"cut",
					null,
					"AQAAAKEDAAAAAAAAoQMAAAAAAABEAAAARGFtYWdlVUkuSW5zdGFuY2UuTmV3RGFtYWdlKHRvdGFsRGFtYWdlLCB0YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uKTs",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKEDAAAAAAAA5QMAAAAAAAAAAAAAAADwvw"
				],
				[
					24,
					3,
					"left_delete",
					null,
					"AwAAAKADAAAAAAAAoAMAAAAAAAABAAAACZ8DAAAAAAAAnwMAAAAAAAABAAAACZ4DAAAAAAAAngMAAAAAAAABAAAACg",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKEDAAAAAAAAoQMAAAAAAAAAAAAAAADwvw"
				],
				[
					27,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAKEDAAAAAAAAogMAAAAAAAAAAAAAogMAAAAAAACjAwAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKEDAAAAAAAAoQMAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAACNDAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBDcmVhdG9yS2l0Q29kZUludGVybmFsOwpwdWJsaWMgY2xhc3MgRGFtYWdlCnsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIFRhcmdldCA9PiBtX1RhcmdldDsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIFNvdXJjZSA9PiBtX1NvdXJjZTsKCUNoYXJhY3RlckRhdGEgbV9UYXJnZXQ7CglDaGFyYWN0ZXJEYXRhIG1fU291cmNlOwoJaW50W10gbV9EYW1hZ2VzID0gbmV3IGludFtTeXN0ZW0uRW51bS5HZXRWYWx1ZXModHlwZW9mKFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSkpLkxlbmd0aF07CgoJcHVibGljIERhbWFnZShDaGFyYWN0ZXJEYXRhIHRhcmdldCwgQ2hhcmFjdGVyRGF0YSBzb3VyY2VyID0gbnVsbCkKCXsKCQltX1RhcmdldCA9IHRhcmdldDsKCQltX1NvdXJjZSA9IHNvdXJjZXI7Cgl9CgoJcHVibGljIHZvaWQgVGFrZShDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpbnQgdG90YWxEYW1hZ2UgPSBHZXRGdWxsRGFtYWdlKCk7CgkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aCgtdG90YWxEYW1hZ2UpOwoJCXZhciBkYW1hZ2VQb3MgPSB0YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uICsgdGFyZ2V0LnRyYW5zZm9ybS51cCAqIDAuNWY7CgkJaWYgKHRhcmdldC5IaXRDbGlwLkxlbmd0aCAhPSAwKQoJCXsKCQkJU0ZYTWFuYWdlci5QbGF5U291bmQoU0ZYTWFuYWdlci5Vc2UuUGxheWVyLCBuZXcgU0ZYTWFuYWdlci5QbGF5RGF0YSgpCgkJCXsKCQkJCUNsaXAgPSB0YXJnZXQuSGl0Q2xpcFtSYW5kb20uUmFuZ2UoMCwgdGFyZ2V0LkhpdENsaXAuTGVuZ3RoKV0sCgkJCQlQaXRjaE1heCA9IDEuMWYsCgkJCQlQaXRjaE1pbiA9IDAuOGYsCgkJCQlQb3NpdGlvbiA9IGRhbWFnZVBvcwoJCQl9KTsKCQl9CgkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuSGl0LCBkYW1hZ2VQb3MpOwoJCVNGWE1hbmFnZXIuUGxheVNvdW5kKG1fU291cmNlLkF1ZGlvUGxheWVyLlVzZVR5cGUsIG5ldyBTRlhNYW5hZ2VyLlBsYXlEYXRhKCkgeyBDbGlwID0gbV9Tb3VyY2UuRXF1aXBtZW50LldlYXBvbi5HZXRIaXRTb3VuZCgpLCBQaXRjaE1pbiA9IDAuOGYsIFBpdGNoTWF4ID0gMS4yZiwgUG9zaXRpb24gPSBkYW1hZ2VQb3MgfSk7CgkJdGFyZ2V0Lk9uRGFtYWdlPy5JbnZva2UodGhpcyk7Cgl9CgoJcHVibGljIHZvaWQgVGFrZSgpIHsgVGFrZShtX1RhcmdldCk7IH0KCglwdWJsaWMgaW50IEFkZERhbWFnZShTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZSwgaW50IGFtb3VudCkKCXsKCQlpbnQgYWRkZWRBbW91bnQgPSBhbW91bnQ7CgkJLy9QaHlzaWNhbCBkYW1hZ2UgYXJlIGluY3JlYXNlIGJ5IDElIGZvciBlYWNoIHBvaW50IG9mIHN0cmVuZ3RoCgkJaWYgKGRhbWFnZVR5cGUgPT0gU3RhdFN5c3RlbS5EYW1hZ2VUeXBlLlBoeXNpY2FsKQoJCXsKCQkJLy9zb3VyY2UgY25hIGJlIG51bGwgd2hlbiBpdCdzIGVsZW1lbnRhbCBvciBlZmZlY3QgZGFtYWdlCgkJCWlmIChtX1NvdXJjZSAhPSBudWxsKQoJCQkJYWRkZWRBbW91bnQgKz0gTWF0aGYuRmxvb3JUb0ludChhZGRlZEFtb3VudCAqIG1fU291cmNlLlN0YXRzLnN0YXRzLnN0cmVuZ3RoICogMC4wMWYpOwoKCQkJLy9lYWNoIHBvaXRuIG9mIGRlZmVuc2UgcmVtb3ZlIDEgZGFtYWdlLCB3aXRoIGEgbWluaW11bSBvZiAxIGRhbWFnZQoJCQlpZiAobV9UYXJnZXQgIT0gbnVsbCkKCQkJCWFkZGVkQW1vdW50ID0gTWF0aGYuTWF4KGFkZGVkQW1vdW50IC0gbV9UYXJnZXQuU3RhdHMuc3RhdHMuZGVmZW5zZSwgMSk7CgkJfQoKCQkvL3dlIHRoZW4gYWRkIGJvb3N0IHBlciBkYW1hZ2UgdHlwZS4gTm90IHRoaXMgaXMgY2FsbGVkIGVsZW1lbnRhbEJvb3N0LCBidXQgcGh5c2ljYWwgY2FuIGFsc28gYmUgYm9vc3RlZAoJCWlmIChtX1NvdXJjZSAhPSBudWxsKQoJCQlhZGRlZEFtb3VudCArPSBhZGRlZEFtb3VudCAqIE1hdGhmLkZsb29yVG9JbnQobV9Tb3VyY2UuU3RhdHMuc3RhdHMuZGFtQm9vc3RzWyhpbnQpZGFtYWdlVHlwZV0gLyAxMDAuMGYpOwoKCQkvL1RoZW4gdGhlIGVsZW1lbnRhbCBwcm90ZWN0aW9uIHRoYXQgaXMgYSBwZXJjZW50YWdlCgkJYWRkZWRBbW91bnQgLT0gYWRkZWRBbW91bnQgKiBNYXRoZi5GbG9vclRvSW50KG1fVGFyZ2V0LlN0YXRzLnN0YXRzLmRhbVByb3RlY3Rpb25bKGludClkYW1hZ2VUeXBlXSAvIDEwMC4wZik7CgoJCW1fRGFtYWdlc1soaW50KWRhbWFnZVR5cGVdICs9IGFkZGVkQW1vdW50OwoKCQlyZXR1cm4gYWRkZWRBbW91bnQ7Cgl9CgkvLy8gPHN1bW1hcnk+CgkvLy8gUmV0dXJuIHRoZSBjdXJyZW50IGFtb3VudCBvZiBkYW1hZ2Ugb2YgdGhlIGdpdmVuIHR5cGUgc3RvcmVkIGluIHRoYXQgQXR0YWNrRGF0YS4gVGhpcyBpcyB0aGUgKmVmZmVjdGl2ZSoKCS8vLyBhbW91bnQgb2YgZGFtYWdlLCBib29zdCBhbmQgZGVmZW5zZSBoYXZlIGFscmVhZHkgYmVlbiBhcHBsaWVkLgoJLy8vIDwvc3VtbWFyeT4KCS8vLyA8cGFyYW0gbmFtZT0iZGFtYWdlVHlwZSI+VGhlIHR5cGUgb2YgZGFtYWdlPC9wYXJhbT4KCS8vLyA8cmV0dXJucz5Ib3cgbXVjaCBkYW1hZ2Ugb2YgdGhhdCB0eXBlIGlzIHN0b3JlZCBpbiB0aGF0IEF0dGFja0RhdGE8L3JldHVybnM+CglwdWJsaWMgaW50IEdldERhbWFnZShTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZSkKCXsKCQlyZXR1cm4gbV9EYW1hZ2VzWyhpbnQpZGFtYWdlVHlwZV07Cgl9CgkvLy8gPHN1bW1hcnk+CgkvLy8gUmV0dXJuIHRoZSB0b3RhbCBhbW91bnQgb2YgZGFtYWdlIGFjcm9zcyBhbGwgdHlwZSBzdG9yZWQgaW4gdGhhdCBBdHRhY2tEYXRhLiBUaGlzIGlzICplZmZlY3RpdmUqIGRhbWFnZSwKCS8vLyB0aGF0IG1lYW4gYWxsIGJvb3N0L2RlZmVuc2Ugd2FzIGFscmVhZHkgYXBwbGllZC4KCS8vLyA8L3N1bW1hcnk+CgkvLy8gPHJldHVybnM+VGhlIHRvdGFsIGFtb3VudCBvZiBkYW1hZ2UgYWNyb3NzIGFsbCB0eXBlIGluIHRoYXQgQXR0YWNrIERhdGE8L3JldHVybnM+CglwdWJsaWMgaW50IEdldEZ1bGxEYW1hZ2UoKQoJewoJCWludCB0b3RhbERhbWFnZSA9IDA7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBtX0RhbWFnZXMuTGVuZ3RoOyArK2kpCgkJewoJCQl0b3RhbERhbWFnZSArPSBtX0RhbWFnZXNbaV07CgkJfQoJCXJldHVybiB0b3RhbERhbWFnZTsKCX0KfQoKAAAAAAAAAACPDAAAAAAAAAAAAAAAAAAAAAAAAI8MAAAAAAAAAAAAAA",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAACPDAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBDcmVhdG9yS2l0Q29kZUludGVybmFsOwpwdWJsaWMgY2xhc3MgRGFtYWdlCnsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIFRhcmdldCA9PiBtX1RhcmdldDsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIFNvdXJjZSA9PiBtX1NvdXJjZTsKCUNoYXJhY3RlckRhdGEgbV9UYXJnZXQ7CglDaGFyYWN0ZXJEYXRhIG1fU291cmNlOwoJaW50W10gbV9EYW1hZ2VzID0gbmV3IGludFtTeXN0ZW0uRW51bS5HZXRWYWx1ZXModHlwZW9mKFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSkpLkxlbmd0aF07CgoJcHVibGljIERhbWFnZShDaGFyYWN0ZXJEYXRhIHRhcmdldCwgQ2hhcmFjdGVyRGF0YSBzb3VyY2VyID0gbnVsbCkKCXsKCQltX1RhcmdldCA9IHRhcmdldDsKCQltX1NvdXJjZSA9IHNvdXJjZXI7Cgl9CgoJcHVibGljIHZvaWQgVGFrZShDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpbnQgdG90YWxEYW1hZ2UgPSBHZXRGdWxsRGFtYWdlKCk7CgkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aCgtdG90YWxEYW1hZ2UpOwoJCXZhciBkYW1hZ2VQb3MgPSB0YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uICsgdGFyZ2V0LnRyYW5zZm9ybS51cCAqIDAuNWY7CgkJaWYgKHRhcmdldC5IaXRDbGlwLkxlbmd0aCAhPSAwKQoJCXsKCQkJU0ZYTWFuYWdlci5QbGF5U291bmQoU0ZYTWFuYWdlci5Vc2UuUGxheWVyLCBuZXcgU0ZYTWFuYWdlci5QbGF5RGF0YSgpCgkJCXsKCQkJCUNsaXAgPSB0YXJnZXQuSGl0Q2xpcFtSYW5kb20uUmFuZ2UoMCwgdGFyZ2V0LkhpdENsaXAuTGVuZ3RoKV0sCgkJCQlQaXRjaE1heCA9IDEuMWYsCgkJCQlQaXRjaE1pbiA9IDAuOGYsCgkJCQlQb3NpdGlvbiA9IGRhbWFnZVBvcwoJCQl9KTsKCQl9CgkJVkZYTWFuYWdlci5QbGF5VkZYKFZGWFR5cGUuSGl0LCBkYW1hZ2VQb3MpOwoJCS8vU0ZYTWFuYWdlci5QbGF5U291bmQobV9Tb3VyY2UuQXVkaW9QbGF5ZXIuVXNlVHlwZSwgbmV3IFNGWE1hbmFnZXIuUGxheURhdGEoKSB7IENsaXAgPSBtX1NvdXJjZS5FcXVpcG1lbnQuV2VhcG9uLkdldEhpdFNvdW5kKCksIFBpdGNoTWluID0gMC44ZiwgUGl0Y2hNYXggPSAxLjJmLCBQb3NpdGlvbiA9IGRhbWFnZVBvcyB9KTsKCQl0YXJnZXQuT25EYW1hZ2U/Lkludm9rZSh0aGlzKTsKCX0KCglwdWJsaWMgdm9pZCBUYWtlKCkgeyBUYWtlKG1fVGFyZ2V0KTsgfQoKCXB1YmxpYyBpbnQgQWRkRGFtYWdlKFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSBkYW1hZ2VUeXBlLCBpbnQgYW1vdW50KQoJewoJCWludCBhZGRlZEFtb3VudCA9IGFtb3VudDsKCQkvL1BoeXNpY2FsIGRhbWFnZSBhcmUgaW5jcmVhc2UgYnkgMSUgZm9yIGVhY2ggcG9pbnQgb2Ygc3RyZW5ndGgKCQlpZiAoZGFtYWdlVHlwZSA9PSBTdGF0U3lzdGVtLkRhbWFnZVR5cGUuUGh5c2ljYWwpCgkJewoJCQkvL3NvdXJjZSBjbmEgYmUgbnVsbCB3aGVuIGl0J3MgZWxlbWVudGFsIG9yIGVmZmVjdCBkYW1hZ2UKCQkJaWYgKG1fU291cmNlICE9IG51bGwpCgkJCQlhZGRlZEFtb3VudCArPSBNYXRoZi5GbG9vclRvSW50KGFkZGVkQW1vdW50ICogbV9Tb3VyY2UuU3RhdHMuc3RhdHMuc3RyZW5ndGggKiAwLjAxZik7CgoJCQkvL2VhY2ggcG9pdG4gb2YgZGVmZW5zZSByZW1vdmUgMSBkYW1hZ2UsIHdpdGggYSBtaW5pbXVtIG9mIDEgZGFtYWdlCgkJCWlmIChtX1RhcmdldCAhPSBudWxsKQoJCQkJYWRkZWRBbW91bnQgPSBNYXRoZi5NYXgoYWRkZWRBbW91bnQgLSBtX1RhcmdldC5TdGF0cy5zdGF0cy5kZWZlbnNlLCAxKTsKCQl9CgoJCS8vd2UgdGhlbiBhZGQgYm9vc3QgcGVyIGRhbWFnZSB0eXBlLiBOb3QgdGhpcyBpcyBjYWxsZWQgZWxlbWVudGFsQm9vc3QsIGJ1dCBwaHlzaWNhbCBjYW4gYWxzbyBiZSBib29zdGVkCgkJaWYgKG1fU291cmNlICE9IG51bGwpCgkJCWFkZGVkQW1vdW50ICs9IGFkZGVkQW1vdW50ICogTWF0aGYuRmxvb3JUb0ludChtX1NvdXJjZS5TdGF0cy5zdGF0cy5kYW1Cb29zdHNbKGludClkYW1hZ2VUeXBlXSAvIDEwMC4wZik7CgoJCS8vVGhlbiB0aGUgZWxlbWVudGFsIHByb3RlY3Rpb24gdGhhdCBpcyBhIHBlcmNlbnRhZ2UKCQlhZGRlZEFtb3VudCAtPSBhZGRlZEFtb3VudCAqIE1hdGhmLkZsb29yVG9JbnQobV9UYXJnZXQuU3RhdHMuc3RhdHMuZGFtUHJvdGVjdGlvblsoaW50KWRhbWFnZVR5cGVdIC8gMTAwLjBmKTsKCgkJbV9EYW1hZ2VzWyhpbnQpZGFtYWdlVHlwZV0gKz0gYWRkZWRBbW91bnQ7CgoJCXJldHVybiBhZGRlZEFtb3VudDsKCX0KCS8vLyA8c3VtbWFyeT4KCS8vLyBSZXR1cm4gdGhlIGN1cnJlbnQgYW1vdW50IG9mIGRhbWFnZSBvZiB0aGUgZ2l2ZW4gdHlwZSBzdG9yZWQgaW4gdGhhdCBBdHRhY2tEYXRhLiBUaGlzIGlzIHRoZSAqZWZmZWN0aXZlKgoJLy8vIGFtb3VudCBvZiBkYW1hZ2UsIGJvb3N0IGFuZCBkZWZlbnNlIGhhdmUgYWxyZWFkeSBiZWVuIGFwcGxpZWQuCgkvLy8gPC9zdW1tYXJ5PgoJLy8vIDxwYXJhbSBuYW1lPSJkYW1hZ2VUeXBlIj5UaGUgdHlwZSBvZiBkYW1hZ2U8L3BhcmFtPgoJLy8vIDxyZXR1cm5zPkhvdyBtdWNoIGRhbWFnZSBvZiB0aGF0IHR5cGUgaXMgc3RvcmVkIGluIHRoYXQgQXR0YWNrRGF0YTwvcmV0dXJucz4KCXB1YmxpYyBpbnQgR2V0RGFtYWdlKFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSBkYW1hZ2VUeXBlKQoJewoJCXJldHVybiBtX0RhbWFnZXNbKGludClkYW1hZ2VUeXBlXTsKCX0KCS8vLyA8c3VtbWFyeT4KCS8vLyBSZXR1cm4gdGhlIHRvdGFsIGFtb3VudCBvZiBkYW1hZ2UgYWNyb3NzIGFsbCB0eXBlIHN0b3JlZCBpbiB0aGF0IEF0dGFja0RhdGEuIFRoaXMgaXMgKmVmZmVjdGl2ZSogZGFtYWdlLAoJLy8vIHRoYXQgbWVhbiBhbGwgYm9vc3QvZGVmZW5zZSB3YXMgYWxyZWFkeSBhcHBsaWVkLgoJLy8vIDwvc3VtbWFyeT4KCS8vLyA8cmV0dXJucz5UaGUgdG90YWwgYW1vdW50IG9mIGRhbWFnZSBhY3Jvc3MgYWxsIHR5cGUgaW4gdGhhdCBBdHRhY2sgRGF0YTwvcmV0dXJucz4KCXB1YmxpYyBpbnQgR2V0RnVsbERhbWFnZSgpCgl7CgkJaW50IHRvdGFsRGFtYWdlID0gMDsKCQlmb3IgKGludCBpID0gMDsgaSA8IG1fRGFtYWdlcy5MZW5ndGg7ICsraSkKCQl7CgkJCXRvdGFsRGFtYWdlICs9IG1fRGFtYWdlc1tpXTsKCQl9CgkJcmV0dXJuIHRvdGFsRGFtYWdlOwoJfQp9CgoAAAAAAAAAAMwKAAAAAAAAAAAAAAAAAAAAAAAACgsAAAAAAAAAAAAAAAAAAAAAAAAKCwAAAAAAAAAAAAA",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAAAKCwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBDcmVhdG9yS2l0Q29kZUludGVybmFsOwpwdWJsaWMgY2xhc3MgRGFtYWdlCnsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIFRhcmdldCA9PiBtX1RhcmdldDsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIFNvdXJjZSA9PiBtX1NvdXJjZTsKCUNoYXJhY3RlckRhdGEgbV9UYXJnZXQ7CglDaGFyYWN0ZXJEYXRhIG1fU291cmNlOwoJaW50W10gbV9EYW1hZ2VzID0gbmV3IGludFtTeXN0ZW0uRW51bS5HZXRWYWx1ZXModHlwZW9mKFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSkpLkxlbmd0aF07CgoJcHVibGljIERhbWFnZShDaGFyYWN0ZXJEYXRhIHRhcmdldCwgQ2hhcmFjdGVyRGF0YSBzb3VyY2VyID0gbnVsbCkKCXsKCQltX1RhcmdldCA9IHRhcmdldDsKCQltX1NvdXJjZSA9IHNvdXJjZXI7Cgl9CgoJcHVibGljIHZvaWQgVGFrZURhbWFnZShDaGFyYWN0ZXJEYXRhIGF0dGFja2VyLCBDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpbnQgdG90YWxEYW1hZ2UgPSBHZXRGdWxsRGFtYWdlKCk7CgkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aCgtdG90YWxEYW1hZ2UsIGF0dGFja2VyKTsKCQl2YXIgZGFtYWdlUG9zID0gdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiArIHRhcmdldC50cmFuc2Zvcm0udXAgKiAwLjVmOwoJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkhpdCwgZGFtYWdlUG9zKTsKCQl0YXJnZXQuT25EYW1hZ2U/Lkludm9rZSh0aGlzKTsKCX0KCglwdWJsaWMgdm9pZCBUYWtlRGFtYWdlKCkgeyBUYWtlRGFtYWdlKG1fU291cmNlLCBtX1RhcmdldCk7IH0KCglwdWJsaWMgaW50IEFkZERhbWFnZShTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZSwgaW50IGFtb3VudCkKCXsKCQlpbnQgYWRkZWRBbW91bnQgPSBhbW91bnQ7CgkJLy9QaHlzaWNhbCBkYW1hZ2UgYXJlIGluY3JlYXNlIGJ5IDElIGZvciBlYWNoIHBvaW50IG9mIHN0cmVuZ3RoCgkJaWYgKGRhbWFnZVR5cGUgPT0gU3RhdFN5c3RlbS5EYW1hZ2VUeXBlLlBoeXNpY2FsKQoJCXsKCQkJLy9zb3VyY2UgY25hIGJlIG51bGwgd2hlbiBpdCdzIGVsZW1lbnRhbCBvciBlZmZlY3QgZGFtYWdlCgkJCWlmIChtX1NvdXJjZSAhPSBudWxsKQoJCQkJYWRkZWRBbW91bnQgKz0gTWF0aGYuRmxvb3JUb0ludChhZGRlZEFtb3VudCAqIG1fU291cmNlLlN0YXRzLnN0YXRzLnN0cmVuZ3RoICogMC4wMWYpOwoKCQkJLy9lYWNoIHBvaXRuIG9mIGRlZmVuc2UgcmVtb3ZlIDEgZGFtYWdlLCB3aXRoIGEgbWluaW11bSBvZiAwIGRhbWFnZQoJCQlpZiAobV9UYXJnZXQgIT0gbnVsbCkKCQkJCWFkZGVkQW1vdW50ID0gTWF0aGYuTWF4KGFkZGVkQW1vdW50IC0gbV9UYXJnZXQuU3RhdHMuc3RhdHMuZGVmZW5zZSwgMCk7CgkJfQoKCQkvL3dlIHRoZW4gYWRkIGJvb3N0IHBlciBkYW1hZ2UgdHlwZS4gTm90IHRoaXMgaXMgY2FsbGVkIGVsZW1lbnRhbEJvb3N0LCBidXQgcGh5c2ljYWwgY2FuIGFsc28gYmUgYm9vc3RlZAoJCWlmIChtX1NvdXJjZSAhPSBudWxsKQoJCQlhZGRlZEFtb3VudCArPSBhZGRlZEFtb3VudCAqIE1hdGhmLkZsb29yVG9JbnQobV9Tb3VyY2UuU3RhdHMuc3RhdHMuZGFtQm9vc3RzWyhpbnQpZGFtYWdlVHlwZV0gLyAxMDAuMGYpOwoKCQkvL1RoZW4gdGhlIGVsZW1lbnRhbCBwcm90ZWN0aW9uIHRoYXQgaXMgYSBwZXJjZW50YWdlCgkJYWRkZWRBbW91bnQgLT0gYWRkZWRBbW91bnQgKiBNYXRoZi5GbG9vclRvSW50KG1fVGFyZ2V0LlN0YXRzLnN0YXRzLmRhbVByb3RlY3Rpb25bKGludClkYW1hZ2VUeXBlXSAvIDEwMC4wZik7CgoJCW1fRGFtYWdlc1soaW50KWRhbWFnZVR5cGVdICs9IGFkZGVkQW1vdW50OwoKCQlyZXR1cm4gYWRkZWRBbW91bnQ7Cgl9CgkvLy8gPHN1bW1hcnk+CgkvLy8gUmV0dXJuIHRoZSBjdXJyZW50IGFtb3VudCBvZiBkYW1hZ2Ugb2YgdGhlIGdpdmVuIHR5cGUgc3RvcmVkIGluIHRoYXQgQXR0YWNrRGF0YS4gVGhpcyBpcyB0aGUgKmVmZmVjdGl2ZSoKCS8vLyBhbW91bnQgb2YgZGFtYWdlLCBib29zdCBhbmQgZGVmZW5zZSBoYXZlIGFscmVhZHkgYmVlbiBhcHBsaWVkLgoJLy8vIDwvc3VtbWFyeT4KCS8vLyA8cGFyYW0gbmFtZT0iZGFtYWdlVHlwZSI+VGhlIHR5cGUgb2YgZGFtYWdlPC9wYXJhbT4KCS8vLyA8cmV0dXJucz5Ib3cgbXVjaCBkYW1hZ2Ugb2YgdGhhdCB0eXBlIGlzIHN0b3JlZCBpbiB0aGF0IEF0dGFja0RhdGE8L3JldHVybnM+CglwdWJsaWMgaW50IEdldERhbWFnZShTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZSkKCXsKCQlyZXR1cm4gbV9EYW1hZ2VzWyhpbnQpZGFtYWdlVHlwZV07Cgl9CgkvLy8gPHN1bW1hcnk+CgkvLy8gUmV0dXJuIHRoZSB0b3RhbCBhbW91bnQgb2YgZGFtYWdlIGFjcm9zcyBhbGwgdHlwZSBzdG9yZWQgaW4gdGhhdCBBdHRhY2tEYXRhLiBUaGlzIGlzICplZmZlY3RpdmUqIGRhbWFnZSwKCS8vLyB0aGF0IG1lYW4gYWxsIGJvb3N0L2RlZmVuc2Ugd2FzIGFscmVhZHkgYXBwbGllZC4KCS8vLyA8L3N1bW1hcnk+CgkvLy8gPHJldHVybnM+VGhlIHRvdGFsIGFtb3VudCBvZiBkYW1hZ2UgYWNyb3NzIGFsbCB0eXBlIGluIHRoYXQgQXR0YWNrIERhdGE8L3JldHVybnM+CglwdWJsaWMgaW50IEdldEZ1bGxEYW1hZ2UoKQoJewoJCWludCB0b3RhbERhbWFnZSA9IDA7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBtX0RhbWFnZXMuTGVuZ3RoOyArK2kpCgkJewoJCQl0b3RhbERhbWFnZSArPSBtX0RhbWFnZXNbaV07CgkJfQoJCXJldHVybiB0b3RhbERhbWFnZTsKCX0KfQoKAAAAAAAAAAANCwAAAAAAAAAAAAAAAAAAAAAAAA0LAAAAAAAAAAAAAAAAAAAAAAAADQsAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"BwAAAAAAAAAAAAAAAAAAAAAAAAANCwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBDcmVhdG9yS2l0Q29kZUludGVybmFsOwpwdWJsaWMgY2xhc3MgRGFtYWdlCnsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIFRhcmdldCA9PiBtX1RhcmdldDsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIFNvdXJjZSA9PiBtX1NvdXJjZTsKCUNoYXJhY3RlckRhdGEgbV9UYXJnZXQ7CglDaGFyYWN0ZXJEYXRhIG1fU291cmNlOwoJaW50W10gbV9EYW1hZ2VzID0gbmV3IGludFtTeXN0ZW0uRW51bS5HZXRWYWx1ZXModHlwZW9mKFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSkpLkxlbmd0aF07CgoJcHVibGljIERhbWFnZShDaGFyYWN0ZXJEYXRhIHRhcmdldCwgQ2hhcmFjdGVyRGF0YSBzb3VyY2VyID0gbnVsbCkKCXsKCQltX1RhcmdldCA9IHRhcmdldDsKCQltX1NvdXJjZSA9IHNvdXJjZXI7Cgl9CgoJcHVibGljIHZvaWQgVGFrZURhbWFnZShDaGFyYWN0ZXJEYXRhIGF0dGFja2VyLCBDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCXsKCQlpbnQgdG90YWxEYW1hZ2UgPSBHZXRGdWxsRGFtYWdlKCk7CgkJdGFyZ2V0LlN0YXRzLkNoYW5nZUhlYWx0aCgtdG90YWxEYW1hZ2UsIGF0dGFja2VyKTsKCQl2YXIgZGFtYWdlUG9zID0gdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiArIHRhcmdldC50cmFuc2Zvcm0udXAgKiAwLjVmOwoJCVZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLkhpdCwgZGFtYWdlUG9zKTsKCQl0YXJnZXQuRGFtYWdlRXZlbnQ/Lkludm9rZSh0aGlzKTsKCX0KCglwdWJsaWMgdm9pZCBUYWtlRGFtYWdlKCkgeyBUYWtlRGFtYWdlKG1fU291cmNlLCBtX1RhcmdldCk7IH0KCglwdWJsaWMgaW50IEFkZERhbWFnZShTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZSwgaW50IGFtb3VudCkKCXsKCQlpbnQgYWRkZWRBbW91bnQgPSBhbW91bnQ7CgkJLy9QaHlzaWNhbCBkYW1hZ2UgYXJlIGluY3JlYXNlIGJ5IDElIGZvciBlYWNoIHBvaW50IG9mIHN0cmVuZ3RoCgkJaWYgKGRhbWFnZVR5cGUgPT0gU3RhdFN5c3RlbS5EYW1hZ2VUeXBlLlBoeXNpY2FsKQoJCXsKCQkJLy9zb3VyY2UgY25hIGJlIG51bGwgd2hlbiBpdCdzIGVsZW1lbnRhbCBvciBlZmZlY3QgZGFtYWdlCgkJCWlmIChtX1NvdXJjZSAhPSBudWxsKQoJCQkJYWRkZWRBbW91bnQgKz0gTWF0aGYuRmxvb3JUb0ludChhZGRlZEFtb3VudCAqIG1fU291cmNlLlN0YXRzLnN0YXRzLnN0cmVuZ3RoICogMC4wMWYpOwoKCQkJLy9lYWNoIHBvaXRuIG9mIGRlZmVuc2UgcmVtb3ZlIDEgZGFtYWdlLCB3aXRoIGEgbWluaW11bSBvZiAwIGRhbWFnZQoJCQlpZiAobV9UYXJnZXQgIT0gbnVsbCkKCQkJCWFkZGVkQW1vdW50ID0gTWF0aGYuTWF4KGFkZGVkQW1vdW50IC0gbV9UYXJnZXQuU3RhdHMuc3RhdHMuZGVmZW5zZSwgMCk7CgkJfQoKCQkvL3dlIHRoZW4gYWRkIGJvb3N0IHBlciBkYW1hZ2UgdHlwZS4gTm90IHRoaXMgaXMgY2FsbGVkIGVsZW1lbnRhbEJvb3N0LCBidXQgcGh5c2ljYWwgY2FuIGFsc28gYmUgYm9vc3RlZAoJCWlmIChtX1NvdXJjZSAhPSBudWxsKQoJCQlhZGRlZEFtb3VudCArPSBhZGRlZEFtb3VudCAqIE1hdGhmLkZsb29yVG9JbnQobV9Tb3VyY2UuU3RhdHMuc3RhdHMuZGFtQm9vc3RzWyhpbnQpZGFtYWdlVHlwZV0gLyAxMDAuMGYpOwoKCQkvL1RoZW4gdGhlIGVsZW1lbnRhbCBwcm90ZWN0aW9uIHRoYXQgaXMgYSBwZXJjZW50YWdlCgkJYWRkZWRBbW91bnQgLT0gYWRkZWRBbW91bnQgKiBNYXRoZi5GbG9vclRvSW50KG1fVGFyZ2V0LlN0YXRzLnN0YXRzLmRhbVByb3RlY3Rpb25bKGludClkYW1hZ2VUeXBlXSAvIDEwMC4wZik7CgoJCW1fRGFtYWdlc1soaW50KWRhbWFnZVR5cGVdICs9IGFkZGVkQW1vdW50OwoKCQlyZXR1cm4gYWRkZWRBbW91bnQ7Cgl9CgkvLy8gPHN1bW1hcnk+CgkvLy8gUmV0dXJuIHRoZSBjdXJyZW50IGFtb3VudCBvZiBkYW1hZ2Ugb2YgdGhlIGdpdmVuIHR5cGUgc3RvcmVkIGluIHRoYXQgQXR0YWNrRGF0YS4gVGhpcyBpcyB0aGUgKmVmZmVjdGl2ZSoKCS8vLyBhbW91bnQgb2YgZGFtYWdlLCBib29zdCBhbmQgZGVmZW5zZSBoYXZlIGFscmVhZHkgYmVlbiBhcHBsaWVkLgoJLy8vIDwvc3VtbWFyeT4KCS8vLyA8cGFyYW0gbmFtZT0iZGFtYWdlVHlwZSI+VGhlIHR5cGUgb2YgZGFtYWdlPC9wYXJhbT4KCS8vLyA8cmV0dXJucz5Ib3cgbXVjaCBkYW1hZ2Ugb2YgdGhhdCB0eXBlIGlzIHN0b3JlZCBpbiB0aGF0IEF0dGFja0RhdGE8L3JldHVybnM+CglwdWJsaWMgaW50IEdldERhbWFnZShTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZSkKCXsKCQlyZXR1cm4gbV9EYW1hZ2VzWyhpbnQpZGFtYWdlVHlwZV07Cgl9CgkvLy8gPHN1bW1hcnk+CgkvLy8gUmV0dXJuIHRoZSB0b3RhbCBhbW91bnQgb2YgZGFtYWdlIGFjcm9zcyBhbGwgdHlwZSBzdG9yZWQgaW4gdGhhdCBBdHRhY2tEYXRhLiBUaGlzIGlzICplZmZlY3RpdmUqIGRhbWFnZSwKCS8vLyB0aGF0IG1lYW4gYWxsIGJvb3N0L2RlZmVuc2Ugd2FzIGFscmVhZHkgYXBwbGllZC4KCS8vLyA8L3N1bW1hcnk+CgkvLy8gPHJldHVybnM+VGhlIHRvdGFsIGFtb3VudCBvZiBkYW1hZ2UgYWNyb3NzIGFsbCB0eXBlIGluIHRoYXQgQXR0YWNrIERhdGE8L3JldHVybnM+CglwdWJsaWMgaW50IEdldEZ1bGxEYW1hZ2UoKQoJewoJCWludCB0b3RhbERhbWFnZSA9IDA7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBtX0RhbWFnZXMuTGVuZ3RoOyArK2kpCgkJewoJCQl0b3RhbERhbWFnZSArPSBtX0RhbWFnZXNbaV07CgkJfQoJCXJldHVybiB0b3RhbERhbWFnZTsKCX0KfQoKAAAAAAAAAADtCgAAAAAAAAAAAAAAAAAAAAAAAO0KAAAAAAAAAAAAAAAAAAAAAAAA7QoAAAAAAAAAAAAAAAAAAAAAAADtCgAAAAAAAAAAAAAAAAAAAAAAAO0KAAAAAAAAAAAAAAAAAAAAAAAA7QoAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\n\n\n/// <summary>\n/// Handle all the UI related to damage number appearing above object/character when they get damaged.\n/// Manage the pool of UI text and activating, placing and fading them out across time.\n/// </summary>\npublic class DamageUI : MonoBehaviour\n{\n\tpublic static DamageUI Instance { get; private set; }\n\n\tpublic class ActiveText\n\t{\n\t\tpublic Text UIText;\n\t\tpublic float MaxTime;\n\t\tpublic float Timer;\n\t\tpublic Vector3 WorldPositionStart;\n\n\t\tpublic void PlaceText(Camera cam, Canvas canvas)\n\t\t{\n\t\t\tfloat ratio = 1.0f - (Timer / MaxTime);\n\t\t\tVector3 pos = WorldPositionStart + new Vector3(ratio, Mathf.Sin(ratio * Mathf.PI), 0);\n\t\t\tpos = cam.WorldToScreenPoint(pos);\n\t\t\t//pos *= canvas.scaleFactor;\n\t\t\tpos.z = 0.0f;\n\n\t\t\tUIText.transform.position = pos;\n\t\t}\n\t}\n\n\tpublic Text DamageTextPrefab;\n\n\tCanvas m_Canvas;\n\tQueue<Text> m_TextPool = new Queue<Text>();\n\tList<ActiveText> m_ActiveTexts = new List<ActiveText>();\n\n\tCamera m_MainCamera;\n\n\tvoid Awake()\n\t{\n\t\tInstance = this;\n\t}\n\n\tvoid Start()\n\t{\n\t\tm_Canvas = GetComponent<Canvas>();\n\n\t\tconst int POOL_SIZE = 64;\n\t\tfor (int i = 0; i < POOL_SIZE; ++i)\n\t\t{\n\t\t\tvar t = Instantiate(DamageTextPrefab, m_Canvas.transform);\n\t\t\tt.gameObject.SetActive(false);\n\t\t\tm_TextPool.Enqueue(t);\n\t\t}\n\n\t\tm_MainCamera = Camera.main;\n\t}\n\n\tvoid Update()\n\t{\n\t\tfor (int i = 0; i < m_ActiveTexts.Count; ++i)\n\t\t{\n\t\t\tvar at = m_ActiveTexts[i];\n\t\t\tat.Timer -= Time.deltaTime;\n\n\t\t\tif (at.Timer <= 0.0f)\n\t\t\t{\n\t\t\t\tat.UIText.gameObject.SetActive(false);\n\t\t\t\tm_TextPool.Enqueue(at.UIText);\n\t\t\t\tm_ActiveTexts.RemoveAt(i);\n\t\t\t\ti--;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar color = at.UIText.color;\n\t\t\t\tcolor.a = at.Timer / at.MaxTime;\n\t\t\t\tat.UIText.color = color;\n\t\t\t\tat.PlaceText(m_MainCamera, m_Canvas);\n\t\t\t}\n\t\t}\n\t}\n\n\t/// <summary>\n\t/// Called by the Character system when a new damage is made. This will take care of grabbing a text from\n\t/// the pool and place it properly, then register it as an active text so its position and opacity is updated by\n\t/// the system.\n\t/// </summary>\n\t/// <param name=\"amount\">The amount of damage to display</param>\n\t/// <param name=\"worldPos\">The position is the world where the damage text should appear (e.g. character head)</param>\n\tpublic void NewDamage(int amount, Vector3 worldPos)\n\t{\n\t\tvar t = m_TextPool.Dequeue();\n\n\t\tt.text = amount.ToString();\n\t\tt.gameObject.SetActive(true);\n\n\t\tActiveText at = new ActiveText();\n\t\tat.MaxTime = 1.0f;\n\t\tat.Timer = at.MaxTime;\n\t\tat.UIText = t;\n\t\tat.WorldPositionStart = worldPos + Vector3.up;\n\t\tat.PlaceText(m_MainCamera, m_Canvas);\n\n\t\tm_ActiveTexts.Add(at);\n\t}\n}\n",
			"file": "Assets/Standard Assets/Scripts/CreatorKitCode/UI/DamageUI.cs",
			"file_size": 2766,
			"file_write_time": 133549493965072754,
			"settings":
			{
				"buffer_size": 2654,
				"line_ending": "Windows",
				"scratch": true
			},
			"undo_stack":
			[
				[
					1,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": false,
						"stamp": "1707388833.3104675"
					},
					"AQAAAAAAAAAAAAAABA4AAAAAAAAEDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLlVJOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlSW50ZXJuYWwgCnsKICAgIC8vLyA8c3VtbWFyeT4KICAgIC8vLyBIYW5kbGUgYWxsIHRoZSBVSSByZWxhdGVkIHRvIGRhbWFnZSBudW1iZXIgYXBwZWFyaW5nIGFib3ZlIG9iamVjdC9jaGFyYWN0ZXIgd2hlbiB0aGV5IGdldCBkYW1hZ2VkLgogICAgLy8vIE1hbmFnZSB0aGUgcG9vbCBvZiBVSSB0ZXh0IGFuZCBhY3RpdmF0aW5nLCBwbGFjaW5nIGFuZCBmYWRpbmcgdGhlbSBvdXQgYWNyb3NzIHRpbWUuCiAgICAvLy8gPC9zdW1tYXJ5PgogICAgcHVibGljIGNsYXNzIERhbWFnZVVJIDogTW9ub0JlaGF2aW91cgogICAgewogICAgICAgIHB1YmxpYyBzdGF0aWMgRGFtYWdlVUkgSW5zdGFuY2UgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CiAgICAKICAgICAgICBwdWJsaWMgY2xhc3MgQWN0aXZlVGV4dAogICAgICAgIHsKICAgICAgICAgICAgcHVibGljIFRleHQgVUlUZXh0OwogICAgICAgICAgICBwdWJsaWMgZmxvYXQgTWF4VGltZTsKICAgICAgICAgICAgcHVibGljIGZsb2F0IFRpbWVyOwogICAgICAgICAgICBwdWJsaWMgVmVjdG9yMyBXb3JsZFBvc2l0aW9uU3RhcnQ7CgogICAgICAgICAgICBwdWJsaWMgdm9pZCBQbGFjZVRleHQoQ2FtZXJhIGNhbSwgQ2FudmFzIGNhbnZhcykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZmxvYXQgcmF0aW8gPSAxLjBmIC0gKFRpbWVyIC8gTWF4VGltZSk7CiAgICAgICAgICAgICAgICBWZWN0b3IzIHBvcyA9IFdvcmxkUG9zaXRpb25TdGFydCArIG5ldyBWZWN0b3IzKHJhdGlvLCBNYXRoZi5TaW4ocmF0aW8gKiBNYXRoZi5QSSksIDApOwogICAgICAgICAgICAgICAgcG9zID0gY2FtLldvcmxkVG9TY3JlZW5Qb2ludChwb3MpOwogICAgICAgICAgICAgICAgLy9wb3MgKj0gY2FudmFzLnNjYWxlRmFjdG9yOwogICAgICAgICAgICAgICAgcG9zLnogPSAwLjBmOwogICAgICAgICAgICAKICAgICAgICAgICAgICAgIFVJVGV4dC50cmFuc2Zvcm0ucG9zaXRpb24gPSBwb3M7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAKICAgICAgICBwdWJsaWMgVGV4dCBEYW1hZ2VUZXh0UHJlZmFiOwoKICAgICAgICBDYW52YXMgbV9DYW52YXM7CiAgICAgICAgUXVldWU8VGV4dD4gbV9UZXh0UG9vbCA9IG5ldyBRdWV1ZTxUZXh0PigpOwogICAgICAgIExpc3Q8QWN0aXZlVGV4dD4gbV9BY3RpdmVUZXh0cyA9IG5ldyBMaXN0PEFjdGl2ZVRleHQ+KCk7CgogICAgICAgIENhbWVyYSBtX01haW5DYW1lcmE7CgogICAgICAgIHZvaWQgQXdha2UoKQogICAgICAgIHsKICAgICAgICAgICAgSW5zdGFuY2UgPSB0aGlzOwogICAgICAgIH0KCiAgICAgICAgdm9pZCBTdGFydCgpCiAgICAgICAgewogICAgICAgICAgICBtX0NhbnZhcyA9IEdldENvbXBvbmVudDxDYW52YXM+KCk7CiAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGludCBQT09MX1NJWkUgPSA2NDsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBQT09MX1NJWkU7ICsraSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHQgPSBJbnN0YW50aWF0ZShEYW1hZ2VUZXh0UHJlZmFiLCBtX0NhbnZhcy50cmFuc2Zvcm0pOwogICAgICAgICAgICAgICAgdC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CiAgICAgICAgICAgICAgICBtX1RleHRQb29sLkVucXVldWUodCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1fTWFpbkNhbWVyYSA9IENhbWVyYS5tYWluOwogICAgICAgIH0KCiAgICAgICAgdm9pZCBVcGRhdGUoKQogICAgICAgIHsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtX0FjdGl2ZVRleHRzLkNvdW50OyArK2kpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBhdCA9IG1fQWN0aXZlVGV4dHNbaV07CiAgICAgICAgICAgICAgICBhdC5UaW1lciAtPSBUaW1lLmRlbHRhVGltZTsKCiAgICAgICAgICAgICAgICBpZiAoYXQuVGltZXIgPD0gMC4wZikKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhdC5VSVRleHQuZ2FtZU9iamVjdC5TZXRBY3RpdmUoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIG1fVGV4dFBvb2wuRW5xdWV1ZShhdC5VSVRleHQpOwogICAgICAgICAgICAgICAgICAgIG1fQWN0aXZlVGV4dHMuUmVtb3ZlQXQoaSk7CiAgICAgICAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGF0LlVJVGV4dC5jb2xvcjsKICAgICAgICAgICAgICAgICAgICBjb2xvci5hID0gYXQuVGltZXIgLyBhdC5NYXhUaW1lOwogICAgICAgICAgICAgICAgICAgIGF0LlVJVGV4dC5jb2xvciA9IGNvbG9yOwogICAgICAgICAgICAgICAgICAgIGF0LlBsYWNlVGV4dChtX01haW5DYW1lcmEsIG1fQ2FudmFzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8vIDxzdW1tYXJ5PgogICAgICAgIC8vLyBDYWxsZWQgYnkgdGhlIENoYXJhY3RlckRhdGEgc3lzdGVtIHdoZW4gYSBuZXcgZGFtYWdlIGlzIG1hZGUuIFRoaXMgd2lsbCB0YWtlIGNhcmUgb2YgZ3JhYmJpbmcgYSB0ZXh0IGZyb20KICAgICAgICAvLy8gdGhlIHBvb2wgYW5kIHBsYWNlIGl0IHByb3Blcmx5LCB0aGVuIHJlZ2lzdGVyIGl0IGFzIGFuIGFjdGl2ZSB0ZXh0IHNvIGl0cyBwb3NpdGlvbiBhbmQgb3BhY2l0eSBpcyB1cGRhdGVkIGJ5CiAgICAgICAgLy8vIHRoZSBzeXN0ZW0uCiAgICAgICAgLy8vIDwvc3VtbWFyeT4KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9ImFtb3VudCI+VGhlIGFtb3VudCBvZiBkYW1hZ2UgdG8gZGlzcGxheTwvcGFyYW0+CiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJ3b3JsZFBvcyI+VGhlIHBvc2l0aW9uIGlzIHRoZSB3b3JsZCB3aGVyZSB0aGUgZGFtYWdlIHRleHQgc2hvdWxkIGFwcGVhciAoZS5nLiBjaGFyYWN0ZXIgaGVhZCk8L3BhcmFtPgogICAgICAgIHB1YmxpYyB2b2lkIE5ld0RhbWFnZShpbnQgYW1vdW50LCBWZWN0b3IzIHdvcmxkUG9zKQogICAgICAgIHsgICAgICAgCiAgICAgICAgICAgIHZhciB0ID0gbV9UZXh0UG9vbC5EZXF1ZXVlKCk7CgogICAgICAgICAgICB0LnRleHQgPSBhbW91bnQuVG9TdHJpbmcoKTsKICAgICAgICAgICAgdC5nYW1lT2JqZWN0LlNldEFjdGl2ZSh0cnVlKTsKICAgICAgICAKICAgICAgICAgICAgQWN0aXZlVGV4dCBhdCA9IG5ldyBBY3RpdmVUZXh0KCk7CiAgICAgICAgICAgIGF0Lk1heFRpbWUgPSAxLjBmOwogICAgICAgICAgICBhdC5UaW1lciA9IGF0Lk1heFRpbWU7CiAgICAgICAgICAgIGF0LlVJVGV4dCA9IHQ7CiAgICAgICAgICAgIGF0LldvcmxkUG9zaXRpb25TdGFydCA9IHdvcmxkUG9zICsgVmVjdG9yMy51cDsKICAgICAgICAgICAgYXQuUGxhY2VUZXh0KG1fTWFpbkNhbWVyYSwgbV9DYW52YXMpOwogICAgICAgIAogICAgICAgICAgICBtX0FjdGl2ZVRleHRzLkFkZChhdCk7CiAgICAgICAgfQogICAgfQp9",
					"DgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABwAAAAAAAAAIYAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAAAEDgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLlVJOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlSW50ZXJuYWwgCnsKICAgIC8vLyA8c3VtbWFyeT4KICAgIC8vLyBIYW5kbGUgYWxsIHRoZSBVSSByZWxhdGVkIHRvIGRhbWFnZSBudW1iZXIgYXBwZWFyaW5nIGFib3ZlIG9iamVjdC9jaGFyYWN0ZXIgd2hlbiB0aGV5IGdldCBkYW1hZ2VkLgogICAgLy8vIE1hbmFnZSB0aGUgcG9vbCBvZiBVSSB0ZXh0IGFuZCBhY3RpdmF0aW5nLCBwbGFjaW5nIGFuZCBmYWRpbmcgdGhlbSBvdXQgYWNyb3NzIHRpbWUuCiAgICAvLy8gPC9zdW1tYXJ5PgogICAgcHVibGljIGNsYXNzIERhbWFnZVVJIDogTW9ub0JlaGF2aW91cgogICAgewogICAgICAgIHB1YmxpYyBzdGF0aWMgRGFtYWdlVUkgSW5zdGFuY2UgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CiAgICAKICAgICAgICBwdWJsaWMgY2xhc3MgQWN0aXZlVGV4dAogICAgICAgIHsKICAgICAgICAgICAgcHVibGljIFRleHQgVUlUZXh0OwogICAgICAgICAgICBwdWJsaWMgZmxvYXQgTWF4VGltZTsKICAgICAgICAgICAgcHVibGljIGZsb2F0IFRpbWVyOwogICAgICAgICAgICBwdWJsaWMgVmVjdG9yMyBXb3JsZFBvc2l0aW9uU3RhcnQ7CgogICAgICAgICAgICBwdWJsaWMgdm9pZCBQbGFjZVRleHQoQ2FtZXJhIGNhbSwgQ2FudmFzIGNhbnZhcykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZmxvYXQgcmF0aW8gPSAxLjBmIC0gKFRpbWVyIC8gTWF4VGltZSk7CiAgICAgICAgICAgICAgICBWZWN0b3IzIHBvcyA9IFdvcmxkUG9zaXRpb25TdGFydCArIG5ldyBWZWN0b3IzKHJhdGlvLCBNYXRoZi5TaW4ocmF0aW8gKiBNYXRoZi5QSSksIDApOwogICAgICAgICAgICAgICAgcG9zID0gY2FtLldvcmxkVG9TY3JlZW5Qb2ludChwb3MpOwogICAgICAgICAgICAgICAgLy9wb3MgKj0gY2FudmFzLnNjYWxlRmFjdG9yOwogICAgICAgICAgICAgICAgcG9zLnogPSAwLjBmOwogICAgICAgICAgICAKICAgICAgICAgICAgICAgIFVJVGV4dC50cmFuc2Zvcm0ucG9zaXRpb24gPSBwb3M7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAKICAgICAgICBwdWJsaWMgVGV4dCBEYW1hZ2VUZXh0UHJlZmFiOwoKICAgICAgICBDYW52YXMgbV9DYW52YXM7CiAgICAgICAgUXVldWU8VGV4dD4gbV9UZXh0UG9vbCA9IG5ldyBRdWV1ZTxUZXh0PigpOwogICAgICAgIExpc3Q8QWN0aXZlVGV4dD4gbV9BY3RpdmVUZXh0cyA9IG5ldyBMaXN0PEFjdGl2ZVRleHQ+KCk7CgogICAgICAgIENhbWVyYSBtX01haW5DYW1lcmE7CgogICAgICAgIHZvaWQgQXdha2UoKQogICAgICAgIHsKICAgICAgICAgICAgSW5zdGFuY2UgPSB0aGlzOwogICAgICAgIH0KCiAgICAgICAgdm9pZCBTdGFydCgpCiAgICAgICAgewogICAgICAgICAgICBtX0NhbnZhcyA9IEdldENvbXBvbmVudDxDYW52YXM+KCk7CiAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGludCBQT09MX1NJWkUgPSA2NDsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBQT09MX1NJWkU7ICsraSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHQgPSBJbnN0YW50aWF0ZShEYW1hZ2VUZXh0UHJlZmFiLCBtX0NhbnZhcy50cmFuc2Zvcm0pOwogICAgICAgICAgICAgICAgdC5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CiAgICAgICAgICAgICAgICBtX1RleHRQb29sLkVucXVldWUodCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1fTWFpbkNhbWVyYSA9IENhbWVyYS5tYWluOwogICAgICAgIH0KCiAgICAgICAgdm9pZCBVcGRhdGUoKQogICAgICAgIHsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtX0FjdGl2ZVRleHRzLkNvdW50OyArK2kpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBhdCA9IG1fQWN0aXZlVGV4dHNbaV07CiAgICAgICAgICAgICAgICBhdC5UaW1lciAtPSBUaW1lLmRlbHRhVGltZTsKCiAgICAgICAgICAgICAgICBpZiAoYXQuVGltZXIgPD0gMC4wZikKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhdC5VSVRleHQuZ2FtZU9iamVjdC5TZXRBY3RpdmUoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIG1fVGV4dFBvb2wuRW5xdWV1ZShhdC5VSVRleHQpOwogICAgICAgICAgICAgICAgICAgIG1fQWN0aXZlVGV4dHMuUmVtb3ZlQXQoaSk7CiAgICAgICAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGF0LlVJVGV4dC5jb2xvcjsKICAgICAgICAgICAgICAgICAgICBjb2xvci5hID0gYXQuVGltZXIgLyBhdC5NYXhUaW1lOwogICAgICAgICAgICAgICAgICAgIGF0LlVJVGV4dC5jb2xvciA9IGNvbG9yOwogICAgICAgICAgICAgICAgICAgIGF0LlBsYWNlVGV4dChtX01haW5DYW1lcmEsIG1fQ2FudmFzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8vIDxzdW1tYXJ5PgogICAgICAgIC8vLyBDYWxsZWQgYnkgdGhlIENoYXJhY3RlckRhdGEgc3lzdGVtIHdoZW4gYSBuZXcgZGFtYWdlIGlzIG1hZGUuIFRoaXMgd2lsbCB0YWtlIGNhcmUgb2YgZ3JhYmJpbmcgYSB0ZXh0IGZyb20KICAgICAgICAvLy8gdGhlIHBvb2wgYW5kIHBsYWNlIGl0IHByb3Blcmx5LCB0aGVuIHJlZ2lzdGVyIGl0IGFzIGFuIGFjdGl2ZSB0ZXh0IHNvIGl0cyBwb3NpdGlvbiBhbmQgb3BhY2l0eSBpcyB1cGRhdGVkIGJ5CiAgICAgICAgLy8vIHRoZSBzeXN0ZW0uCiAgICAgICAgLy8vIDwvc3VtbWFyeT4KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9ImFtb3VudCI+VGhlIGFtb3VudCBvZiBkYW1hZ2UgdG8gZGlzcGxheTwvcGFyYW0+CiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJ3b3JsZFBvcyI+VGhlIHBvc2l0aW9uIGlzIHRoZSB3b3JsZCB3aGVyZSB0aGUgZGFtYWdlIHRleHQgc2hvdWxkIGFwcGVhciAoZS5nLiBjaGFyYWN0ZXIgaGVhZCk8L3BhcmFtPgogICAgICAgIHB1YmxpYyB2b2lkIE5ld0RhbWFnZShpbnQgYW1vdW50LCBWZWN0b3IzIHdvcmxkUG9zKQogICAgICAgIHsgICAgICAgCiAgICAgICAgICAgIHZhciB0ID0gbV9UZXh0UG9vbC5EZXF1ZXVlKCk7CgogICAgICAgICAgICB0LnRleHQgPSBhbW91bnQuVG9TdHJpbmcoKTsKICAgICAgICAgICAgdC5nYW1lT2JqZWN0LlNldEFjdGl2ZSh0cnVlKTsKICAgICAgICAKICAgICAgICAgICAgQWN0aXZlVGV4dCBhdCA9IG5ldyBBY3RpdmVUZXh0KCk7CiAgICAgICAgICAgIGF0Lk1heFRpbWUgPSAxLjBmOwogICAgICAgICAgICBhdC5UaW1lciA9IGF0Lk1heFRpbWU7CiAgICAgICAgICAgIGF0LlVJVGV4dCA9IHQ7CiAgICAgICAgICAgIGF0LldvcmxkUG9zaXRpb25TdGFydCA9IHdvcmxkUG9zICsgVmVjdG9yMy51cDsKICAgICAgICAgICAgYXQuUGxhY2VUZXh0KG1fTWFpbkNhbWVyYSwgbV9DYW52YXMpOwogICAgICAgIAogICAgICAgICAgICBtX0FjdGl2ZVRleHRzLkFkZChhdCk7CiAgICAgICAgfQogICAgfQp9AAAAAAAAAABiCgAAAAAAAAAAAAAAAAAAAAAAAGIKAAAAAAAAAAAAAAAAAAAAAAAAYgoAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAABwAAAAAAAAAIYAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABiCgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLlVJOwoKCi8vLyA8c3VtbWFyeT4KLy8vIEhhbmRsZSBhbGwgdGhlIFVJIHJlbGF0ZWQgdG8gZGFtYWdlIG51bWJlciBhcHBlYXJpbmcgYWJvdmUgb2JqZWN0L2NoYXJhY3RlciB3aGVuIHRoZXkgZ2V0IGRhbWFnZWQuCi8vLyBNYW5hZ2UgdGhlIHBvb2wgb2YgVUkgdGV4dCBhbmQgYWN0aXZhdGluZywgcGxhY2luZyBhbmQgZmFkaW5nIHRoZW0gb3V0IGFjcm9zcyB0aW1lLgovLy8gPC9zdW1tYXJ5PgpwdWJsaWMgY2xhc3MgRGFtYWdlVUkgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgRGFtYWdlVUkgSW5zdGFuY2UgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CgoJcHVibGljIGNsYXNzIEFjdGl2ZVRleHQKCXsKCQlwdWJsaWMgVGV4dCBVSVRleHQ7CgkJcHVibGljIGZsb2F0IE1heFRpbWU7CgkJcHVibGljIGZsb2F0IFRpbWVyOwoJCXB1YmxpYyBWZWN0b3IzIFdvcmxkUG9zaXRpb25TdGFydDsKCgkJcHVibGljIHZvaWQgUGxhY2VUZXh0KENhbWVyYSBjYW0sIENhbnZhcyBjYW52YXMpCgkJewoJCQlmbG9hdCByYXRpbyA9IDEuMGYgLSAoVGltZXIgLyBNYXhUaW1lKTsKCQkJVmVjdG9yMyBwb3MgPSBXb3JsZFBvc2l0aW9uU3RhcnQgKyBuZXcgVmVjdG9yMyhyYXRpbywgTWF0aGYuU2luKHJhdGlvICogTWF0aGYuUEkpLCAwKTsKCQkJcG9zID0gY2FtLldvcmxkVG9TY3JlZW5Qb2ludChwb3MpOwoJCQkvL3BvcyAqPSBjYW52YXMuc2NhbGVGYWN0b3I7CgkJCXBvcy56ID0gMC4wZjsKCgkJCVVJVGV4dC50cmFuc2Zvcm0ucG9zaXRpb24gPSBwb3M7CgkJfQoJfQoKCXB1YmxpYyBUZXh0IERhbWFnZVRleHRQcmVmYWI7CgoJQ2FudmFzIG1fQ2FudmFzOwoJUXVldWU8VGV4dD4gbV9UZXh0UG9vbCA9IG5ldyBRdWV1ZTxUZXh0PigpOwoJTGlzdDxBY3RpdmVUZXh0PiBtX0FjdGl2ZVRleHRzID0gbmV3IExpc3Q8QWN0aXZlVGV4dD4oKTsKCglDYW1lcmEgbV9NYWluQ2FtZXJhOwoKCXZvaWQgQXdha2UoKQoJewoJCUluc3RhbmNlID0gdGhpczsKCX0KCgl2b2lkIFN0YXJ0KCkKCXsKCQltX0NhbnZhcyA9IEdldENvbXBvbmVudDxDYW52YXM+KCk7CgoJCWNvbnN0IGludCBQT09MX1NJWkUgPSA2NDsKCQlmb3IgKGludCBpID0gMDsgaSA8IFBPT0xfU0laRTsgKytpKQoJCXsKCQkJdmFyIHQgPSBJbnN0YW50aWF0ZShEYW1hZ2VUZXh0UHJlZmFiLCBtX0NhbnZhcy50cmFuc2Zvcm0pOwoJCQl0LmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQkJbV9UZXh0UG9vbC5FbnF1ZXVlKHQpOwoJCX0KCgkJbV9NYWluQ2FtZXJhID0gQ2FtZXJhLm1haW47Cgl9CgoJdm9pZCBVcGRhdGUoKQoJewoJCWZvciAoaW50IGkgPSAwOyBpIDwgbV9BY3RpdmVUZXh0cy5Db3VudDsgKytpKQoJCXsKCQkJdmFyIGF0ID0gbV9BY3RpdmVUZXh0c1tpXTsKCQkJYXQuVGltZXIgLT0gVGltZS5kZWx0YVRpbWU7CgoJCQlpZiAoYXQuVGltZXIgPD0gMC4wZikKCQkJewoJCQkJYXQuVUlUZXh0LmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQkJCW1fVGV4dFBvb2wuRW5xdWV1ZShhdC5VSVRleHQpOwoJCQkJbV9BY3RpdmVUZXh0cy5SZW1vdmVBdChpKTsKCQkJCWktLTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXZhciBjb2xvciA9IGF0LlVJVGV4dC5jb2xvcjsKCQkJCWNvbG9yLmEgPSBhdC5UaW1lciAvIGF0Lk1heFRpbWU7CgkJCQlhdC5VSVRleHQuY29sb3IgPSBjb2xvcjsKCQkJCWF0LlBsYWNlVGV4dChtX01haW5DYW1lcmEsIG1fQ2FudmFzKTsKCQkJfQoJCX0KCX0KCgkvLy8gPHN1bW1hcnk+CgkvLy8gQ2FsbGVkIGJ5IHRoZSBDaGFyYWN0ZXJEYXRhIHN5c3RlbSB3aGVuIGEgbmV3IGRhbWFnZSBpcyBtYWRlLiBUaGlzIHdpbGwgdGFrZSBjYXJlIG9mIGdyYWJiaW5nIGEgdGV4dCBmcm9tCgkvLy8gdGhlIHBvb2wgYW5kIHBsYWNlIGl0IHByb3Blcmx5LCB0aGVuIHJlZ2lzdGVyIGl0IGFzIGFuIGFjdGl2ZSB0ZXh0IHNvIGl0cyBwb3NpdGlvbiBhbmQgb3BhY2l0eSBpcyB1cGRhdGVkIGJ5CgkvLy8gdGhlIHN5c3RlbS4KCS8vLyA8L3N1bW1hcnk+CgkvLy8gPHBhcmFtIG5hbWU9ImFtb3VudCI+VGhlIGFtb3VudCBvZiBkYW1hZ2UgdG8gZGlzcGxheTwvcGFyYW0+CgkvLy8gPHBhcmFtIG5hbWU9IndvcmxkUG9zIj5UaGUgcG9zaXRpb24gaXMgdGhlIHdvcmxkIHdoZXJlIHRoZSBkYW1hZ2UgdGV4dCBzaG91bGQgYXBwZWFyIChlLmcuIGNoYXJhY3RlciBoZWFkKTwvcGFyYW0+CglwdWJsaWMgdm9pZCBOZXdEYW1hZ2UoaW50IGFtb3VudCwgVmVjdG9yMyB3b3JsZFBvcykKCXsKCQl2YXIgdCA9IG1fVGV4dFBvb2wuRGVxdWV1ZSgpOwoKCQl0LnRleHQgPSBhbW91bnQuVG9TdHJpbmcoKTsKCQl0LmdhbWVPYmplY3QuU2V0QWN0aXZlKHRydWUpOwoKCQlBY3RpdmVUZXh0IGF0ID0gbmV3IEFjdGl2ZVRleHQoKTsKCQlhdC5NYXhUaW1lID0gMS4wZjsKCQlhdC5UaW1lciA9IGF0Lk1heFRpbWU7CgkJYXQuVUlUZXh0ID0gdDsKCQlhdC5Xb3JsZFBvc2l0aW9uU3RhcnQgPSB3b3JsZFBvcyArIFZlY3RvcjMudXA7CgkJYXQuUGxhY2VUZXh0KG1fTWFpbkNhbWVyYSwgbV9DYW52YXMpOwoKCQltX0FjdGl2ZVRleHRzLkFkZChhdCk7Cgl9Cn0KAAAAAAAAAABeCgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHAAAAAAAAAAhgAAAAAAAAAAAAAAAADwvw"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": false,
						"stamp": "1710496613.1977756"
					},
					"AQAAAAAAAAAAAAAAXgoAAAAAAABeCgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLlVJOwoKCi8vLyA8c3VtbWFyeT4KLy8vIEhhbmRsZSBhbGwgdGhlIFVJIHJlbGF0ZWQgdG8gZGFtYWdlIG51bWJlciBhcHBlYXJpbmcgYWJvdmUgb2JqZWN0L2NoYXJhY3RlciB3aGVuIHRoZXkgZ2V0IGRhbWFnZWQuCi8vLyBNYW5hZ2UgdGhlIHBvb2wgb2YgVUkgdGV4dCBhbmQgYWN0aXZhdGluZywgcGxhY2luZyBhbmQgZmFkaW5nIHRoZW0gb3V0IGFjcm9zcyB0aW1lLgovLy8gPC9zdW1tYXJ5PgpwdWJsaWMgY2xhc3MgRGFtYWdlVUkgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgRGFtYWdlVUkgSW5zdGFuY2UgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CgoJcHVibGljIGNsYXNzIEFjdGl2ZVRleHQKCXsKCQlwdWJsaWMgVGV4dCBVSVRleHQ7CgkJcHVibGljIGZsb2F0IE1heFRpbWU7CgkJcHVibGljIGZsb2F0IFRpbWVyOwoJCXB1YmxpYyBWZWN0b3IzIFdvcmxkUG9zaXRpb25TdGFydDsKCgkJcHVibGljIHZvaWQgUGxhY2VUZXh0KENhbWVyYSBjYW0sIENhbnZhcyBjYW52YXMpCgkJewoJCQlmbG9hdCByYXRpbyA9IDEuMGYgLSAoVGltZXIgLyBNYXhUaW1lKTsKCQkJVmVjdG9yMyBwb3MgPSBXb3JsZFBvc2l0aW9uU3RhcnQgKyBuZXcgVmVjdG9yMyhyYXRpbywgTWF0aGYuU2luKHJhdGlvICogTWF0aGYuUEkpLCAwKTsKCQkJcG9zID0gY2FtLldvcmxkVG9TY3JlZW5Qb2ludChwb3MpOwoJCQkvL3BvcyAqPSBjYW52YXMuc2NhbGVGYWN0b3I7CgkJCXBvcy56ID0gMC4wZjsKCgkJCVVJVGV4dC50cmFuc2Zvcm0ucG9zaXRpb24gPSBwb3M7CgkJfQoJfQoKCXB1YmxpYyBUZXh0IERhbWFnZVRleHRQcmVmYWI7CgoJQ2FudmFzIG1fQ2FudmFzOwoJUXVldWU8VGV4dD4gbV9UZXh0UG9vbCA9IG5ldyBRdWV1ZTxUZXh0PigpOwoJTGlzdDxBY3RpdmVUZXh0PiBtX0FjdGl2ZVRleHRzID0gbmV3IExpc3Q8QWN0aXZlVGV4dD4oKTsKCglDYW1lcmEgbV9NYWluQ2FtZXJhOwoKCXZvaWQgQXdha2UoKQoJewoJCUluc3RhbmNlID0gdGhpczsKCX0KCgl2b2lkIFN0YXJ0KCkKCXsKCQltX0NhbnZhcyA9IEdldENvbXBvbmVudDxDYW52YXM+KCk7CgoJCWNvbnN0IGludCBQT09MX1NJWkUgPSA2NDsKCQlmb3IgKGludCBpID0gMDsgaSA8IFBPT0xfU0laRTsgKytpKQoJCXsKCQkJdmFyIHQgPSBJbnN0YW50aWF0ZShEYW1hZ2VUZXh0UHJlZmFiLCBtX0NhbnZhcy50cmFuc2Zvcm0pOwoJCQl0LmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQkJbV9UZXh0UG9vbC5FbnF1ZXVlKHQpOwoJCX0KCgkJbV9NYWluQ2FtZXJhID0gQ2FtZXJhLm1haW47Cgl9CgoJdm9pZCBVcGRhdGUoKQoJewoJCWZvciAoaW50IGkgPSAwOyBpIDwgbV9BY3RpdmVUZXh0cy5Db3VudDsgKytpKQoJCXsKCQkJdmFyIGF0ID0gbV9BY3RpdmVUZXh0c1tpXTsKCQkJYXQuVGltZXIgLT0gVGltZS5kZWx0YVRpbWU7CgoJCQlpZiAoYXQuVGltZXIgPD0gMC4wZikKCQkJewoJCQkJYXQuVUlUZXh0LmdhbWVPYmplY3QuU2V0QWN0aXZlKGZhbHNlKTsKCQkJCW1fVGV4dFBvb2wuRW5xdWV1ZShhdC5VSVRleHQpOwoJCQkJbV9BY3RpdmVUZXh0cy5SZW1vdmVBdChpKTsKCQkJCWktLTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXZhciBjb2xvciA9IGF0LlVJVGV4dC5jb2xvcjsKCQkJCWNvbG9yLmEgPSBhdC5UaW1lciAvIGF0Lk1heFRpbWU7CgkJCQlhdC5VSVRleHQuY29sb3IgPSBjb2xvcjsKCQkJCWF0LlBsYWNlVGV4dChtX01haW5DYW1lcmEsIG1fQ2FudmFzKTsKCQkJfQoJCX0KCX0KCgkvLy8gPHN1bW1hcnk+CgkvLy8gQ2FsbGVkIGJ5IHRoZSBDaGFyYWN0ZXIgc3lzdGVtIHdoZW4gYSBuZXcgZGFtYWdlIGlzIG1hZGUuIFRoaXMgd2lsbCB0YWtlIGNhcmUgb2YgZ3JhYmJpbmcgYSB0ZXh0IGZyb20KCS8vLyB0aGUgcG9vbCBhbmQgcGxhY2UgaXQgcHJvcGVybHksIHRoZW4gcmVnaXN0ZXIgaXQgYXMgYW4gYWN0aXZlIHRleHQgc28gaXRzIHBvc2l0aW9uIGFuZCBvcGFjaXR5IGlzIHVwZGF0ZWQgYnkKCS8vLyB0aGUgc3lzdGVtLgoJLy8vIDwvc3VtbWFyeT4KCS8vLyA8cGFyYW0gbmFtZT0iYW1vdW50Ij5UaGUgYW1vdW50IG9mIGRhbWFnZSB0byBkaXNwbGF5PC9wYXJhbT4KCS8vLyA8cGFyYW0gbmFtZT0id29ybGRQb3MiPlRoZSBwb3NpdGlvbiBpcyB0aGUgd29ybGQgd2hlcmUgdGhlIGRhbWFnZSB0ZXh0IHNob3VsZCBhcHBlYXIgKGUuZy4gY2hhcmFjdGVyIGhlYWQpPC9wYXJhbT4KCXB1YmxpYyB2b2lkIE5ld0RhbWFnZShpbnQgYW1vdW50LCBWZWN0b3IzIHdvcmxkUG9zKQoJewoJCXZhciB0ID0gbV9UZXh0UG9vbC5EZXF1ZXVlKCk7CgoJCXQudGV4dCA9IGFtb3VudC5Ub1N0cmluZygpOwoJCXQuZ2FtZU9iamVjdC5TZXRBY3RpdmUodHJ1ZSk7CgoJCUFjdGl2ZVRleHQgYXQgPSBuZXcgQWN0aXZlVGV4dCgpOwoJCWF0Lk1heFRpbWUgPSAxLjBmOwoJCWF0LlRpbWVyID0gYXQuTWF4VGltZTsKCQlhdC5VSVRleHQgPSB0OwoJCWF0LldvcmxkUG9zaXRpb25TdGFydCA9IHdvcmxkUG9zICsgVmVjdG9yMy51cDsKCQlhdC5QbGFjZVRleHQobV9NYWluQ2FtZXJhLCBtX0NhbnZhcyk7CgoJCW1fQWN0aXZlVGV4dHMuQWRkKGF0KTsKCX0KfQo",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAHAAAAAAAAAAhgAAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "using System.Collections;\nusing System.Collections.Generic;\nusing CreatorKitCode;\nusing UnityEngine;\nusing System.Linq;\n\n#if UNITY_EDITOR\nusing UnityEditor;\n#endif\n\n\n/// <summary>\n/// Describe an usable item. A usable item is an item that can be used in the inventory by double clicking on it.\n/// When it is used, all the stored UsageEffects will be run, allowing to specify what that item does.\n/// (e.g. a AddHealth effect will give health point back to the user)\n/// </summary>\n[CreateAssetMenu(fileName = \"UsableItem\", menuName = \"Data/Usable Item\", order = -999)]\npublic class UsableItem : Item\n{\n\tpublic List<KeyValueData.KeyValue<EffectData, string[]>> UsageEffects;\n\tpublic bool autoUse;\n\n\tpublic override bool UsedBy(Character user, int count = 1)\n\t{\n\t\tbool wasUsed = false;\n\t\tfor (int n = 0; n < count; n++)\n\t\t{\n\t\t\tfor (int i = 0; i < UsageEffects.Count; i++)\n\t\t\t{\n\t\t\t\twasUsed |= UsageEffects[i].Key.TakeEffect(user.gameObject, user.gameObject, UsageEffects[i].Value);\n\t\t\t}\n\t\t}\n\t\treturn wasUsed;\n\t}\n\n\tpublic override string GetDescription()\n\t{\n\t\tstring description = base.GetDescription();\n\n\t\tif (!string.IsNullOrWhiteSpace(description))\n\t\t\tdescription += \"\\n\";\n\t\telse\n\t\t\tdescription = \"\";\n\n\t\tfor (int i = 0; i < UsageEffects.Count; i++)\n\t\t{\n\t\t\tdescription += UsageEffects[i].Key.Description + \"\\n\";\n\t\t}\n\t\t// foreach (var effect in UsageEffects)\n\t\t// {\n\t\t// \tdescription += effect.Description + \"\\n\";\n\t\t// }\n\n\t\treturn description;\n\t}\n}\n\n\n// #if UNITY_EDITOR\n// [CustomEditor(typeof(UsableItem))]\n// public class UsableItemEditor : Editor\n// {\n// \tUsableItem m_Target;\n\n// \tItemEditor m_ItemEditor;\n\n// \tList<string> m_AvailableUsageType;\n// \tSerializedProperty m_UsageEffectListProperty;\n\n// \tvoid OnEnable()\n// \t{\n// \t\tm_Target = target as UsableItem;\n// \t\tm_UsageEffectListProperty = serializedObject.FindProperty(nameof(UsableItem.UsageEffects));\n\n// \t\tm_ItemEditor = new ItemEditor();\n// \t\tm_ItemEditor.Init(serializedObject);\n\n// \t\tvar lookup = typeof(UsableItem.UsageEffect);\n// \t\tm_AvailableUsageType = System.AppDomain.CurrentDomain.GetAssemblies()\n// \t\t\t.SelectMany(assembly => assembly.GetTypes())\n// \t\t\t.Where(x => x.IsClass && !x.IsAbstract && x.IsSubclassOf(lookup))\n// \t\t\t.Select(type => type.Name)\n// \t\t\t.ToList();\n// \t}\n\n// \tpublic override void OnInspectorGUI()\n// \t{\n// \t\tm_ItemEditor.GUI();\n\n// \t\tint choice = EditorGUILayout.Popup(\"Add new Effect\", -1, m_AvailableUsageType.ToArray());\n\n// \t\tif (choice != -1)\n// \t\t{\n// \t\t\tvar newInstance = ScriptableObject.CreateInstance(m_AvailableUsageType[choice]);\n\n// \t\t\tAssetDatabase.AddObjectToAsset(newInstance, target);\n\n// \t\t\tm_UsageEffectListProperty.InsertArrayElementAtIndex(m_UsageEffectListProperty.arraySize);\n// \t\t\tm_UsageEffectListProperty.GetArrayElementAtIndex(m_UsageEffectListProperty.arraySize - 1).objectReferenceValue = newInstance;\n// \t\t}\n\n// \t\tEditor ed = null;\n// \t\tint toDelete = -1;\n// \t\tfor (int i = 0; i < m_UsageEffectListProperty.arraySize; ++i)\n// \t\t{\n// \t\t\tEditorGUILayout.BeginHorizontal();\n// \t\t\tEditorGUILayout.BeginVertical();\n// \t\t\tvar item = m_UsageEffectListProperty.GetArrayElementAtIndex(i);\n// \t\t\tSerializedObject obj = new SerializedObject(item.objectReferenceValue);\n\n// \t\t\tEditor.CreateCachedEditor(item.objectReferenceValue, null, ref ed);\n\n// \t\t\ted.OnInspectorGUI();\n// \t\t\tEditorGUILayout.EndVertical();\n\n// \t\t\tif (GUILayout.Button(\"-\", GUILayout.Width(32)))\n// \t\t\t{\n// \t\t\t\ttoDelete = i;\n// \t\t\t}\n// \t\t\tEditorGUILayout.EndHorizontal();\n// \t\t}\n\n// \t\tif (toDelete != -1)\n// \t\t{\n// \t\t\tvar item = m_UsageEffectListProperty.GetArrayElementAtIndex(toDelete).objectReferenceValue;\n// \t\t\tDestroyImmediate(item, true);\n\n// \t\t\t//need to do it twice, first time just nullify the entry, second actually remove it.\n// \t\t\tm_UsageEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n// \t\t\tm_UsageEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n// \t\t}\n\n// \t\tserializedObject.ApplyModifiedProperties();\n// \t}\n// }\n// #endif\n",
			"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/UsableItem.cs",
			"file_size": 4073,
			"file_write_time": 133560031783352478,
			"settings":
			{
				"buffer_size": 3934,
				"encoding": "UTF-8 with BOM",
				"line_ending": "Windows",
				"scratch": true
			},
			"undo_stack":
			[
				[
					9,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAABREQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBTeXN0ZW0uTGlucTsKCiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CiNlbmRpZgoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlCnsKICAgIC8vLyA8c3VtbWFyeT4KICAgIC8vLyBEZXNjcmliZSBhbiB1c2FibGUgaXRlbS4gQSB1c2FibGUgaXRlbSBpcyBhbiBpdGVtIHRoYXQgY2FuIGJlIHVzZWQgaW4gdGhlIGludmVudG9yeSBieSBkb3VibGUgY2xpY2tpbmcgb24gaXQuCiAgICAvLy8gV2hlbiBpdCBpcyB1c2VkLCBhbGwgdGhlIHN0b3JlZCBVc2FnZUVmZmVjdHMgd2lsbCBiZSBydW4sIGFsbG93aW5nIHRvIHNwZWNpZnkgd2hhdCB0aGF0IGl0ZW0gZG9lcy4KICAgIC8vLyAoZS5nLiBhIEFkZEhlYWx0aCBlZmZlY3Qgd2lsbCBnaXZlIGhlYWx0aCBwb2ludCBiYWNrIHRvIHRoZSB1c2VyKQogICAgLy8vIDwvc3VtbWFyeT4KICAgIFtDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiVXNhYmxlSXRlbSIsIG1lbnVOYW1lID0gIkRhdGEvVXNhYmxlIEl0ZW0iLCBvcmRlciA9IC05OTkpXQogICAgcHVibGljIGNsYXNzIFVzYWJsZUl0ZW0gOiBJdGVtCiAgICB7CiAgICAgICAgcHVibGljIGFic3RyYWN0IGNsYXNzIFVzYWdlRWZmZWN0IDogU2NyaXB0YWJsZU9iamVjdAogICAgICAgIHsKICAgICAgICAgICAgLy8gcHVibGljIHN0cmluZyBEZXNjcmlwdGlvbjsKICAgICAgICAgICAgLy8gLy9yZXR1cm4gdHJ1ZSBpZiBjb3VsZCBiZSB1c2VkLCBmYWxzZSBvdGhlcndpc2UuCiAgICAgICAgICAgIC8vIHB1YmxpYyBhYnN0cmFjdCBib29sIFVzZShDaGFyYWN0ZXJEYXRhIHVzZXIpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIExpc3Q8RWZmZWN0RGF0YT4gVXNhZ2VFZmZlY3RzOwoKICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBVc2VkQnkoQ2hhcmFjdGVyRGF0YSB1c2VyKQogICAgICAgIHsKICAgICAgICAgICAgYm9vbCB3YXNVc2VkID0gZmFsc2U7CiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlZmZlY3QgaW4gVXNhZ2VFZmZlY3RzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB3YXNVc2VkIHw9IGVmZmVjdC5PblVzZSh1c2VyKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHdhc1VzZWQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKICAgICAgICB7CiAgICAgICAgICAgIHN0cmluZyBkZXNjcmlwdGlvbiA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCiAgICAgICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShkZXNjcmlwdGlvbikpCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiArPSAiXG4iOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9ICIiOwoKCiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlZmZlY3QgaW4gVXNhZ2VFZmZlY3RzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiArPSBlZmZlY3QuRGVzY3JpcHRpb24gKyAiXG4iOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRpb247CiAgICAgICAgfQogICAgfQp9CgojaWYgVU5JVFlfRURJVE9SCltDdXN0b21FZGl0b3IodHlwZW9mKFVzYWJsZUl0ZW0pKV0KcHVibGljIGNsYXNzIFVzYWJsZUl0ZW1FZGl0b3IgOiBFZGl0b3IKewogICAgVXNhYmxlSXRlbSBtX1RhcmdldDsKICAgIAogICAgSXRlbUVkaXRvciBtX0l0ZW1FZGl0b3I7CgogICAgTGlzdDxzdHJpbmc+IG1fQXZhaWxhYmxlVXNhZ2VUeXBlOwogICAgU2VyaWFsaXplZFByb3BlcnR5IG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHk7CiAgICAKICAgIHZvaWQgT25FbmFibGUoKQogICAgewogICAgICAgIG1fVGFyZ2V0ID0gdGFyZ2V0IGFzIFVzYWJsZUl0ZW07CiAgICAgICAgbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihVc2FibGVJdGVtLlVzYWdlRWZmZWN0cykpOwogICAgICAgIAogICAgICAgIG1fSXRlbUVkaXRvciA9IG5ldyBJdGVtRWRpdG9yKCk7CiAgICAgICAgbV9JdGVtRWRpdG9yLkluaXQoc2VyaWFsaXplZE9iamVjdCk7CgogICAgICAgIHZhciBsb29rdXAgPSB0eXBlb2YoVXNhYmxlSXRlbS5Vc2FnZUVmZmVjdCk7CiAgICAgICAgbV9BdmFpbGFibGVVc2FnZVR5cGUgPSBTeXN0ZW0uQXBwRG9tYWluLkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpCiAgICAgICAgICAgIC5TZWxlY3RNYW55KGFzc2VtYmx5ID0+IGFzc2VtYmx5LkdldFR5cGVzKCkpCiAgICAgICAgICAgIC5XaGVyZSh4ID0+IHguSXNDbGFzcyAmJiAheC5Jc0Fic3RyYWN0ICYmIHguSXNTdWJjbGFzc09mKGxvb2t1cCkpCiAgICAgICAgICAgIC5TZWxlY3QodHlwZSA9PiB0eXBlLk5hbWUpCiAgICAgICAgICAgIC5Ub0xpc3QoKTsKICAgIH0KCiAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBPbkluc3BlY3RvckdVSSgpCiAgICB7CiAgICAgICAgbV9JdGVtRWRpdG9yLkdVSSgpOwogICAgICAgIAogICAgICAgIGludCBjaG9pY2UgPSBFZGl0b3JHVUlMYXlvdXQuUG9wdXAoIkFkZCBuZXcgRWZmZWN0IiwgLTEsIG1fQXZhaWxhYmxlVXNhZ2VUeXBlLlRvQXJyYXkoKSk7CgogICAgICAgIGlmIChjaG9pY2UgIT0gLTEpCiAgICAgICAgewogICAgICAgICAgICB2YXIgbmV3SW5zdGFuY2UgPSBTY3JpcHRhYmxlT2JqZWN0LkNyZWF0ZUluc3RhbmNlKG1fQXZhaWxhYmxlVXNhZ2VUeXBlW2Nob2ljZV0pOwogICAgICAgICAgICAKICAgICAgICAgICAgQXNzZXREYXRhYmFzZS5BZGRPYmplY3RUb0Fzc2V0KG5ld0luc3RhbmNlLCB0YXJnZXQpOwogICAgICAgICAgICAKICAgICAgICAgICAgbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5JbnNlcnRBcnJheUVsZW1lbnRBdEluZGV4KG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplKTsKICAgICAgICAgICAgbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplIC0gMSkub2JqZWN0UmVmZXJlbmNlVmFsdWUgPSBuZXdJbnN0YW5jZTsKICAgICAgICB9CgogICAgICAgIEVkaXRvciBlZCA9IG51bGw7CiAgICAgICAgaW50IHRvRGVsZXRlID0gLTE7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZTsgKytpKQogICAgICAgIHsKICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkJlZ2luSG9yaXpvbnRhbCgpOwogICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5WZXJ0aWNhbCgpOwogICAgICAgICAgICB2YXIgaXRlbSA9IG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChpKTsgICAgICAgICAgIAogICAgICAgICAgICBTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKICAgICAgICAgICAgRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwogICAgICAgICAgICAKICAgICAgICAgICAgZWQuT25JbnNwZWN0b3JHVUkoKTsKICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgogICAgICAgICAgICBpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0b0RlbGV0ZSA9IGk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKICAgICAgICB9CgogICAgICAgIGlmICh0b0RlbGV0ZSAhPSAtMSkKICAgICAgICB7CiAgICAgICAgICAgIHZhciBpdGVtID0gbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKICAgICAgICAgICAgRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgogICAgICAgICAgICBtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwogICAgICAgICAgICBtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwogICAgICAgIH0KCiAgICAgICAgc2VyaWFsaXplZE9iamVjdC5BcHBseU1vZGlmaWVkUHJvcGVydGllcygpOwogICAgfQp9CiNlbmRpZgoAAAAAAAAAAI0PAAAAAAAAAAAAAAAAAAAAAAAAjQ8AAAAAAAAAAAAAAAAAAAAAAACNDwAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOEDAAAAAAAA7gMAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": false,
						"stamp": "1707390297.9920545"
					},
					"AQAAAAAAAAAAAAAAjQ8AAAAAAACNDwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBTeXN0ZW0uTGlucTsKCiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CiNlbmRpZgoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlCnsKCS8vLyA8c3VtbWFyeT4KCS8vLyBEZXNjcmliZSBhbiB1c2FibGUgaXRlbS4gQSB1c2FibGUgaXRlbSBpcyBhbiBpdGVtIHRoYXQgY2FuIGJlIHVzZWQgaW4gdGhlIGludmVudG9yeSBieSBkb3VibGUgY2xpY2tpbmcgb24gaXQuCgkvLy8gV2hlbiBpdCBpcyB1c2VkLCBhbGwgdGhlIHN0b3JlZCBVc2FnZUVmZmVjdHMgd2lsbCBiZSBydW4sIGFsbG93aW5nIHRvIHNwZWNpZnkgd2hhdCB0aGF0IGl0ZW0gZG9lcy4KCS8vLyAoZS5nLiBhIEFkZEhlYWx0aCBlZmZlY3Qgd2lsbCBnaXZlIGhlYWx0aCBwb2ludCBiYWNrIHRvIHRoZSB1c2VyKQoJLy8vIDwvc3VtbWFyeT4KCVtDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiVXNhYmxlSXRlbSIsIG1lbnVOYW1lID0gIkRhdGEvVXNhYmxlIEl0ZW0iLCBvcmRlciA9IC05OTkpXQoJcHVibGljIGNsYXNzIFVzYWJsZUl0ZW0gOiBJdGVtCgl7CgkJcHVibGljIExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gVXNhZ2VFZmZlY3RzOwoKCQlwdWJsaWMgb3ZlcnJpZGUgYm9vbCBVc2VkQnkoQ2hhcmFjdGVyRGF0YSB1c2VyKQoJCXsKCQkJYm9vbCB3YXNVc2VkID0gZmFsc2U7CgkJCWZvciAoaW50IGkgPSAwOyBpIDwgVXNhZ2VFZmZlY3RzLkNvdW50OyBpKyspCgkJCXsKCQkJCXdhc1VzZWQgfD0gVXNhZ2VFZmZlY3RzW2ldLktleS5UYWtlKHVzZXIsIFVzYWdlRWZmZWN0c1tpXS5WYWx1ZSk7CgkJCX0KCQkJLy8gZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBVc2FnZUVmZmVjdHMpCgkJCS8vIHsKCQkJLy8gCXdhc1VzZWQgfD0gZWZmZWN0LlRha2UodXNlcik7CgkJCS8vIH0KCgkJCXJldHVybiB3YXNVc2VkOwoJCX0KCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzY3JpcHRpb24gPSBiYXNlLkdldERlc2NyaXB0aW9uKCk7CgoJCQlpZiAoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoZGVzY3JpcHRpb24pKQoJCQkJZGVzY3JpcHRpb24gKz0gIlxuIjsKCQkJZWxzZQoJCQkJZGVzY3JpcHRpb24gPSAiIjsKCgkJCWZvciAoaW50IGkgPSAwOyBpIDwgVXNhZ2VFZmZlY3RzLkNvdW50OyBpKyspCgkJCXsKCQkJCWRlc2NyaXB0aW9uICs9IFVzYWdlRWZmZWN0c1tpXS5LZXkuRGVzY3JpcHRpb24gKyAiXG4iOwoJCQl9CgkJCS8vIGZvcmVhY2ggKHZhciBlZmZlY3QgaW4gVXNhZ2VFZmZlY3RzKQoJCQkvLyB7CgkJCS8vIAlkZXNjcmlwdGlvbiArPSBlZmZlY3QuRGVzY3JpcHRpb24gKyAiXG4iOwoJCQkvLyB9CgoJCQlyZXR1cm4gZGVzY3JpcHRpb247CgkJfQoJfQp9CgovLyAjaWYgVU5JVFlfRURJVE9SCi8vIFtDdXN0b21FZGl0b3IodHlwZW9mKFVzYWJsZUl0ZW0pKV0KLy8gcHVibGljIGNsYXNzIFVzYWJsZUl0ZW1FZGl0b3IgOiBFZGl0b3IKLy8gewovLyAJVXNhYmxlSXRlbSBtX1RhcmdldDsKCi8vIAlJdGVtRWRpdG9yIG1fSXRlbUVkaXRvcjsKCi8vIAlMaXN0PHN0cmluZz4gbV9BdmFpbGFibGVVc2FnZVR5cGU7Ci8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eTsKCi8vIAl2b2lkIE9uRW5hYmxlKCkKLy8gCXsKLy8gCQltX1RhcmdldCA9IHRhcmdldCBhcyBVc2FibGVJdGVtOwovLyAJCW1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoVXNhYmxlSXRlbS5Vc2FnZUVmZmVjdHMpKTsKCi8vIAkJbV9JdGVtRWRpdG9yID0gbmV3IEl0ZW1FZGl0b3IoKTsKLy8gCQltX0l0ZW1FZGl0b3IuSW5pdChzZXJpYWxpemVkT2JqZWN0KTsKCi8vIAkJdmFyIGxvb2t1cCA9IHR5cGVvZihVc2FibGVJdGVtLlVzYWdlRWZmZWN0KTsKLy8gCQltX0F2YWlsYWJsZVVzYWdlVHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gCQkJLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gCQkJLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gCQkJLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gCQkJLlRvTGlzdCgpOwovLyAJfQoKLy8gCXB1YmxpYyBvdmVycmlkZSB2b2lkIE9uSW5zcGVjdG9yR1VJKCkKLy8gCXsKLy8gCQltX0l0ZW1FZGl0b3IuR1VJKCk7CgovLyAJCWludCBjaG9pY2UgPSBFZGl0b3JHVUlMYXlvdXQuUG9wdXAoIkFkZCBuZXcgRWZmZWN0IiwgLTEsIG1fQXZhaWxhYmxlVXNhZ2VUeXBlLlRvQXJyYXkoKSk7CgovLyAJCWlmIChjaG9pY2UgIT0gLTEpCi8vIAkJewovLyAJCQl2YXIgbmV3SW5zdGFuY2UgPSBTY3JpcHRhYmxlT2JqZWN0LkNyZWF0ZUluc3RhbmNlKG1fQXZhaWxhYmxlVXNhZ2VUeXBlW2Nob2ljZV0pOwoKLy8gCQkJQXNzZXREYXRhYmFzZS5BZGRPYmplY3RUb0Fzc2V0KG5ld0luc3RhbmNlLCB0YXJnZXQpOwoKLy8gCQkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5JbnNlcnRBcnJheUVsZW1lbnRBdEluZGV4KG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplKTsKLy8gCQkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplIC0gMSkub2JqZWN0UmVmZXJlbmNlVmFsdWUgPSBuZXdJbnN0YW5jZTsKLy8gCQl9CgovLyAJCUVkaXRvciBlZCA9IG51bGw7Ci8vIAkJaW50IHRvRGVsZXRlID0gLTE7Ci8vIAkJZm9yIChpbnQgaSA9IDA7IGkgPCBtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZTsgKytpKQovLyAJCXsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkJlZ2luSG9yaXpvbnRhbCgpOwovLyAJCQlFZGl0b3JHVUlMYXlvdXQuQmVnaW5WZXJ0aWNhbCgpOwovLyAJCQl2YXIgaXRlbSA9IG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChpKTsKLy8gCQkJU2VyaWFsaXplZE9iamVjdCBvYmogPSBuZXcgU2VyaWFsaXplZE9iamVjdChpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlKTsKCi8vIAkJCUVkaXRvci5DcmVhdGVDYWNoZWRFZGl0b3IoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSwgbnVsbCwgcmVmIGVkKTsKCi8vIAkJCWVkLk9uSW5zcGVjdG9yR1VJKCk7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5FbmRWZXJ0aWNhbCgpOwoKLy8gCQkJaWYgKEdVSUxheW91dC5CdXR0b24oIi0iLCBHVUlMYXlvdXQuV2lkdGgoMzIpKSkKLy8gCQkJewovLyAJCQkJdG9EZWxldGUgPSBpOwovLyAJCQl9Ci8vIAkJCUVkaXRvckdVSUxheW91dC5FbmRIb3Jpem9udGFsKCk7Ci8vIAkJfQoKLy8gCQlpZiAodG9EZWxldGUgIT0gLTEpCi8vIAkJewovLyAJCQl2YXIgaXRlbSA9IG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSkub2JqZWN0UmVmZXJlbmNlVmFsdWU7Ci8vIAkJCURlc3Ryb3lJbW1lZGlhdGUoaXRlbSwgdHJ1ZSk7CgovLyAJCQkvL25lZWQgdG8gZG8gaXQgdHdpY2UsIGZpcnN0IHRpbWUganVzdCBudWxsaWZ5IHRoZSBlbnRyeSwgc2Vjb25kIGFjdHVhbGx5IHJlbW92ZSBpdC4KLy8gCQkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gCQkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gCQl9CgovLyAJCXNlcmlhbGl6ZWRPYmplY3QuQXBwbHlNb2RpZmllZFByb3BlcnRpZXMoKTsKLy8gCX0KLy8gfQovLyAjZW5kaWYK",
					"DQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA4QMAAAAAAADuAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"BQAAAAAAAAAAAAAAAAAAAAAAAACNDwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBTeXN0ZW0uTGlucTsKCiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CiNlbmRpZgoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlCnsKCS8vLyA8c3VtbWFyeT4KCS8vLyBEZXNjcmliZSBhbiB1c2FibGUgaXRlbS4gQSB1c2FibGUgaXRlbSBpcyBhbiBpdGVtIHRoYXQgY2FuIGJlIHVzZWQgaW4gdGhlIGludmVudG9yeSBieSBkb3VibGUgY2xpY2tpbmcgb24gaXQuCgkvLy8gV2hlbiBpdCBpcyB1c2VkLCBhbGwgdGhlIHN0b3JlZCBVc2FnZUVmZmVjdHMgd2lsbCBiZSBydW4sIGFsbG93aW5nIHRvIHNwZWNpZnkgd2hhdCB0aGF0IGl0ZW0gZG9lcy4KCS8vLyAoZS5nLiBhIEFkZEhlYWx0aCBlZmZlY3Qgd2lsbCBnaXZlIGhlYWx0aCBwb2ludCBiYWNrIHRvIHRoZSB1c2VyKQoJLy8vIDwvc3VtbWFyeT4KCVtDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiVXNhYmxlSXRlbSIsIG1lbnVOYW1lID0gIkRhdGEvVXNhYmxlIEl0ZW0iLCBvcmRlciA9IC05OTkpXQoJcHVibGljIGNsYXNzIFVzYWJsZUl0ZW0gOiBJdGVtCgl7CgkJcHVibGljIExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gVXNhZ2VFZmZlY3RzOwoKCQlwdWJsaWMgb3ZlcnJpZGUgYm9vbCBVc2VkQnkoQ2hhcmFjdGVyRGF0YSB1c2VyKQoJCXsKCQkJYm9vbCB3YXNVc2VkID0gZmFsc2U7CgkJCWZvciAoaW50IGkgPSAwOyBpIDwgVXNhZ2VFZmZlY3RzLkNvdW50OyBpKyspCgkJCXsKCQkJCXdhc1VzZWQgfD0gVXNhZ2VFZmZlY3RzW2ldLktleS5UYWtlKHVzZXIsIFVzYWdlRWZmZWN0c1tpXS5WYWx1ZSk7CgkJCX0KCQkJLy8gZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBVc2FnZUVmZmVjdHMpCgkJCS8vIHsKCQkJLy8gCXdhc1VzZWQgfD0gZWZmZWN0LlRha2UodXNlcik7CgkJCS8vIH0KCgkJCXJldHVybiB3YXNVc2VkOwoJCX0KCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzY3JpcHRpb24gPSBiYXNlLkdldERlc2NyaXB0aW9uKCk7CgoJCQlpZiAoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoZGVzY3JpcHRpb24pKQoJCQkJZGVzY3JpcHRpb24gKz0gIlxuIjsKCQkJZWxzZQoJCQkJZGVzY3JpcHRpb24gPSAiIjsKCgkJCWZvciAoaW50IGkgPSAwOyBpIDwgVXNhZ2VFZmZlY3RzLkNvdW50OyBpKyspCgkJCXsKCQkJCWRlc2NyaXB0aW9uICs9IFVzYWdlRWZmZWN0c1tpXS5LZXkuRGVzY3JpcHRpb24gKyAiXG4iOwoJCQl9CgkJCS8vIGZvcmVhY2ggKHZhciBlZmZlY3QgaW4gVXNhZ2VFZmZlY3RzKQoJCQkvLyB7CgkJCS8vIAlkZXNjcmlwdGlvbiArPSBlZmZlY3QuRGVzY3JpcHRpb24gKyAiXG4iOwoJCQkvLyB9CgoJCQlyZXR1cm4gZGVzY3JpcHRpb247CgkJfQoJfQp9CgovLyAjaWYgVU5JVFlfRURJVE9SCi8vIFtDdXN0b21FZGl0b3IodHlwZW9mKFVzYWJsZUl0ZW0pKV0KLy8gcHVibGljIGNsYXNzIFVzYWJsZUl0ZW1FZGl0b3IgOiBFZGl0b3IKLy8gewovLyAJVXNhYmxlSXRlbSBtX1RhcmdldDsKCi8vIAlJdGVtRWRpdG9yIG1fSXRlbUVkaXRvcjsKCi8vIAlMaXN0PHN0cmluZz4gbV9BdmFpbGFibGVVc2FnZVR5cGU7Ci8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eTsKCi8vIAl2b2lkIE9uRW5hYmxlKCkKLy8gCXsKLy8gCQltX1RhcmdldCA9IHRhcmdldCBhcyBVc2FibGVJdGVtOwovLyAJCW1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoVXNhYmxlSXRlbS5Vc2FnZUVmZmVjdHMpKTsKCi8vIAkJbV9JdGVtRWRpdG9yID0gbmV3IEl0ZW1FZGl0b3IoKTsKLy8gCQltX0l0ZW1FZGl0b3IuSW5pdChzZXJpYWxpemVkT2JqZWN0KTsKCi8vIAkJdmFyIGxvb2t1cCA9IHR5cGVvZihVc2FibGVJdGVtLlVzYWdlRWZmZWN0KTsKLy8gCQltX0F2YWlsYWJsZVVzYWdlVHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gCQkJLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gCQkJLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gCQkJLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gCQkJLlRvTGlzdCgpOwovLyAJfQoKLy8gCXB1YmxpYyBvdmVycmlkZSB2b2lkIE9uSW5zcGVjdG9yR1VJKCkKLy8gCXsKLy8gCQltX0l0ZW1FZGl0b3IuR1VJKCk7CgovLyAJCWludCBjaG9pY2UgPSBFZGl0b3JHVUlMYXlvdXQuUG9wdXAoIkFkZCBuZXcgRWZmZWN0IiwgLTEsIG1fQXZhaWxhYmxlVXNhZ2VUeXBlLlRvQXJyYXkoKSk7CgovLyAJCWlmIChjaG9pY2UgIT0gLTEpCi8vIAkJewovLyAJCQl2YXIgbmV3SW5zdGFuY2UgPSBTY3JpcHRhYmxlT2JqZWN0LkNyZWF0ZUluc3RhbmNlKG1fQXZhaWxhYmxlVXNhZ2VUeXBlW2Nob2ljZV0pOwoKLy8gCQkJQXNzZXREYXRhYmFzZS5BZGRPYmplY3RUb0Fzc2V0KG5ld0luc3RhbmNlLCB0YXJnZXQpOwoKLy8gCQkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5JbnNlcnRBcnJheUVsZW1lbnRBdEluZGV4KG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplKTsKLy8gCQkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplIC0gMSkub2JqZWN0UmVmZXJlbmNlVmFsdWUgPSBuZXdJbnN0YW5jZTsKLy8gCQl9CgovLyAJCUVkaXRvciBlZCA9IG51bGw7Ci8vIAkJaW50IHRvRGVsZXRlID0gLTE7Ci8vIAkJZm9yIChpbnQgaSA9IDA7IGkgPCBtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZTsgKytpKQovLyAJCXsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkJlZ2luSG9yaXpvbnRhbCgpOwovLyAJCQlFZGl0b3JHVUlMYXlvdXQuQmVnaW5WZXJ0aWNhbCgpOwovLyAJCQl2YXIgaXRlbSA9IG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChpKTsKLy8gCQkJU2VyaWFsaXplZE9iamVjdCBvYmogPSBuZXcgU2VyaWFsaXplZE9iamVjdChpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlKTsKCi8vIAkJCUVkaXRvci5DcmVhdGVDYWNoZWRFZGl0b3IoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSwgbnVsbCwgcmVmIGVkKTsKCi8vIAkJCWVkLk9uSW5zcGVjdG9yR1VJKCk7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5FbmRWZXJ0aWNhbCgpOwoKLy8gCQkJaWYgKEdVSUxheW91dC5CdXR0b24oIi0iLCBHVUlMYXlvdXQuV2lkdGgoMzIpKSkKLy8gCQkJewovLyAJCQkJdG9EZWxldGUgPSBpOwovLyAJCQl9Ci8vIAkJCUVkaXRvckdVSUxheW91dC5FbmRIb3Jpem9udGFsKCk7Ci8vIAkJfQoKLy8gCQlpZiAodG9EZWxldGUgIT0gLTEpCi8vIAkJewovLyAJCQl2YXIgaXRlbSA9IG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSkub2JqZWN0UmVmZXJlbmNlVmFsdWU7Ci8vIAkJCURlc3Ryb3lJbW1lZGlhdGUoaXRlbSwgdHJ1ZSk7CgovLyAJCQkvL25lZWQgdG8gZG8gaXQgdHdpY2UsIGZpcnN0IHRpbWUganVzdCBudWxsaWZ5IHRoZSBlbnRyeSwgc2Vjb25kIGFjdHVhbGx5IHJlbW92ZSBpdC4KLy8gCQkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gCQkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gCQl9CgovLyAJCXNlcmlhbGl6ZWRPYmplY3QuQXBwbHlNb2RpZmllZFByb3BlcnRpZXMoKTsKLy8gCX0KLy8gfQovLyAjZW5kaWYKAAAAAAAAAACYDwAAAAAAAAAAAAAAAAAAAAAAAJgPAAAAAAAAAAAAAAAAAAAAAAAAmA8AAAAAAAAAAAAAAAAAAAAAAACYDwAAAAAAAAAAAAA",
					"DAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOEDAAAAAAAA7gMAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"BQAAAAAAAAAAAAAAAAAAAAAAAACYDwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBTeXN0ZW0uTGlucTsKCiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CiNlbmRpZgoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlCnsKCS8vLyA8c3VtbWFyeT4KCS8vLyBEZXNjcmliZSBhbiB1c2FibGUgaXRlbS4gQSB1c2FibGUgaXRlbSBpcyBhbiBpdGVtIHRoYXQgY2FuIGJlIHVzZWQgaW4gdGhlIGludmVudG9yeSBieSBkb3VibGUgY2xpY2tpbmcgb24gaXQuCgkvLy8gV2hlbiBpdCBpcyB1c2VkLCBhbGwgdGhlIHN0b3JlZCBVc2FnZUVmZmVjdHMgd2lsbCBiZSBydW4sIGFsbG93aW5nIHRvIHNwZWNpZnkgd2hhdCB0aGF0IGl0ZW0gZG9lcy4KCS8vLyAoZS5nLiBhIEFkZEhlYWx0aCBlZmZlY3Qgd2lsbCBnaXZlIGhlYWx0aCBwb2ludCBiYWNrIHRvIHRoZSB1c2VyKQoJLy8vIDwvc3VtbWFyeT4KCVtDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiVXNhYmxlSXRlbSIsIG1lbnVOYW1lID0gIkRhdGEvVXNhYmxlIEl0ZW0iLCBvcmRlciA9IC05OTkpXQoJcHVibGljIGNsYXNzIFVzYWJsZUl0ZW0gOiBJdGVtCgl7CgkJcHVibGljIExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gVXNhZ2VFZmZlY3RzOwoKCQlwdWJsaWMgb3ZlcnJpZGUgYm9vbCBVc2VkQnkoQ2hhcmFjdGVyRGF0YSB1c2VyKQoJCXsKCQkJYm9vbCB3YXNVc2VkID0gZmFsc2U7CgkJCWZvciAoaW50IGkgPSAwOyBpIDwgVXNhZ2VFZmZlY3RzLkNvdW50OyBpKyspCgkJCXsKCQkJCXdhc1VzZWQgfD0gVXNhZ2VFZmZlY3RzW2ldLktleS5UYWtlKHVzZXIuZ2FtZU9iamVjdCwgVXNhZ2VFZmZlY3RzW2ldLlZhbHVlKTsKCQkJfQoJCQkvLyBmb3JlYWNoICh2YXIgZWZmZWN0IGluIFVzYWdlRWZmZWN0cykKCQkJLy8gewoJCQkvLyAJd2FzVXNlZCB8PSBlZmZlY3QuVGFrZSh1c2VyKTsKCQkJLy8gfQoKCQkJcmV0dXJuIHdhc1VzZWQ7CgkJfQoKCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCQl7CgkJCXN0cmluZyBkZXNjcmlwdGlvbiA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCgkJCWlmICghc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShkZXNjcmlwdGlvbikpCgkJCQlkZXNjcmlwdGlvbiArPSAiXG4iOwoJCQllbHNlCgkJCQlkZXNjcmlwdGlvbiA9ICIiOwoKCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBVc2FnZUVmZmVjdHMuQ291bnQ7IGkrKykKCQkJewoJCQkJZGVzY3JpcHRpb24gKz0gVXNhZ2VFZmZlY3RzW2ldLktleS5EZXNjcmlwdGlvbiArICJcbiI7CgkJCX0KCQkJLy8gZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBVc2FnZUVmZmVjdHMpCgkJCS8vIHsKCQkJLy8gCWRlc2NyaXB0aW9uICs9IGVmZmVjdC5EZXNjcmlwdGlvbiArICJcbiI7CgkJCS8vIH0KCgkJCXJldHVybiBkZXNjcmlwdGlvbjsKCQl9Cgl9Cn0KCi8vICNpZiBVTklUWV9FRElUT1IKLy8gW0N1c3RvbUVkaXRvcih0eXBlb2YoVXNhYmxlSXRlbSkpXQovLyBwdWJsaWMgY2xhc3MgVXNhYmxlSXRlbUVkaXRvciA6IEVkaXRvcgovLyB7Ci8vIAlVc2FibGVJdGVtIG1fVGFyZ2V0OwoKLy8gCUl0ZW1FZGl0b3IgbV9JdGVtRWRpdG9yOwoKLy8gCUxpc3Q8c3RyaW5nPiBtX0F2YWlsYWJsZVVzYWdlVHlwZTsKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5OwoKLy8gCXZvaWQgT25FbmFibGUoKQovLyAJewovLyAJCW1fVGFyZ2V0ID0gdGFyZ2V0IGFzIFVzYWJsZUl0ZW07Ci8vIAkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihVc2FibGVJdGVtLlVzYWdlRWZmZWN0cykpOwoKLy8gCQltX0l0ZW1FZGl0b3IgPSBuZXcgSXRlbUVkaXRvcigpOwovLyAJCW1fSXRlbUVkaXRvci5Jbml0KHNlcmlhbGl6ZWRPYmplY3QpOwoKLy8gCQl2YXIgbG9va3VwID0gdHlwZW9mKFVzYWJsZUl0ZW0uVXNhZ2VFZmZlY3QpOwovLyAJCW1fQXZhaWxhYmxlVXNhZ2VUeXBlID0gU3lzdGVtLkFwcERvbWFpbi5DdXJyZW50RG9tYWluLkdldEFzc2VtYmxpZXMoKQovLyAJCQkuU2VsZWN0TWFueShhc3NlbWJseSA9PiBhc3NlbWJseS5HZXRUeXBlcygpKQovLyAJCQkuV2hlcmUoeCA9PiB4LklzQ2xhc3MgJiYgIXguSXNBYnN0cmFjdCAmJiB4LklzU3ViY2xhc3NPZihsb29rdXApKQovLyAJCQkuU2VsZWN0KHR5cGUgPT4gdHlwZS5OYW1lKQovLyAJCQkuVG9MaXN0KCk7Ci8vIAl9CgovLyAJcHVibGljIG92ZXJyaWRlIHZvaWQgT25JbnNwZWN0b3JHVUkoKQovLyAJewovLyAJCW1fSXRlbUVkaXRvci5HVUkoKTsKCi8vIAkJaW50IGNob2ljZSA9IEVkaXRvckdVSUxheW91dC5Qb3B1cCgiQWRkIG5ldyBFZmZlY3QiLCAtMSwgbV9BdmFpbGFibGVVc2FnZVR5cGUuVG9BcnJheSgpKTsKCi8vIAkJaWYgKGNob2ljZSAhPSAtMSkKLy8gCQl7Ci8vIAkJCXZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVVc2FnZVR5cGVbY2hvaWNlXSk7CgovLyAJCQlBc3NldERhdGFiYXNlLkFkZE9iamVjdFRvQXNzZXQobmV3SW5zdGFuY2UsIHRhcmdldCk7CgovLyAJCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5Lkluc2VydEFycmF5RWxlbWVudEF0SW5kZXgobV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAJCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgobV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUgLSAxKS5vYmplY3RSZWZlcmVuY2VWYWx1ZSA9IG5ld0luc3RhbmNlOwovLyAJCX0KCi8vIAkJRWRpdG9yIGVkID0gbnVsbDsKLy8gCQlpbnQgdG9EZWxldGUgPSAtMTsKLy8gCQlmb3IgKGludCBpID0gMDsgaSA8IG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vIAkJewovLyAJCQlFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vIAkJCXZhciBpdGVtID0gbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KGkpOwovLyAJCQlTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gCQkJRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gCQkJZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAJCQlpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAJCQl7Ci8vIAkJCQl0b0RlbGV0ZSA9IGk7Ci8vIAkJCX0KLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gCQl9CgovLyAJCWlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gCQl7Ci8vIAkJCXZhciBpdGVtID0gbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKLy8gCQkJRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKCi8vIAkJCS8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgovLyAJCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAJCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAJCX0KCi8vIAkJc2VyaWFsaXplZE9iamVjdC5BcHBseU1vZGlmaWVkUHJvcGVydGllcygpOwovLyAJfQovLyB9Ci8vICNlbmRpZgoAAAAAAAAAAKUPAAAAAAAAAAAAAAAAAAAAAAAApQ8AAAAAAAAAAAAAAAAAAAAAAAClDwAAAAAAAAAAAAAAAAAAAAAAAKUPAAAAAAAAAAAAAA",
					"CQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOEDAAAAAAAA7gMAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAClDwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBTeXN0ZW0uTGlucTsKCiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CiNlbmRpZgoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlCnsKCS8vLyA8c3VtbWFyeT4KCS8vLyBEZXNjcmliZSBhbiB1c2FibGUgaXRlbS4gQSB1c2FibGUgaXRlbSBpcyBhbiBpdGVtIHRoYXQgY2FuIGJlIHVzZWQgaW4gdGhlIGludmVudG9yeSBieSBkb3VibGUgY2xpY2tpbmcgb24gaXQuCgkvLy8gV2hlbiBpdCBpcyB1c2VkLCBhbGwgdGhlIHN0b3JlZCBVc2FnZUVmZmVjdHMgd2lsbCBiZSBydW4sIGFsbG93aW5nIHRvIHNwZWNpZnkgd2hhdCB0aGF0IGl0ZW0gZG9lcy4KCS8vLyAoZS5nLiBhIEFkZEhlYWx0aCBlZmZlY3Qgd2lsbCBnaXZlIGhlYWx0aCBwb2ludCBiYWNrIHRvIHRoZSB1c2VyKQoJLy8vIDwvc3VtbWFyeT4KCVtDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiVXNhYmxlSXRlbSIsIG1lbnVOYW1lID0gIkRhdGEvVXNhYmxlIEl0ZW0iLCBvcmRlciA9IC05OTkpXQoJcHVibGljIGNsYXNzIFVzYWJsZUl0ZW0gOiBJdGVtCgl7CgkJcHVibGljIExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gVXNhZ2VFZmZlY3RzOwoJCXB1YmxpYyBib29sIGF1dG9Vc2U7CgoJCXB1YmxpYyBvdmVycmlkZSBib29sIFVzZWRCeShDaGFyYWN0ZXJEYXRhIHVzZXIsIGludCBjb3VudCA9IDEpCgkJewoJCQlib29sIHdhc1VzZWQgPSBmYWxzZTsKCQkJZm9yIChpbnQgbiA9IDA7IG4gPCBjb3VudDsgbisrKQoJCQl7CgkJCQlmb3IgKGludCBpID0gMDsgaSA8IFVzYWdlRWZmZWN0cy5Db3VudDsgaSsrKQoJCQkJewoJCQkJCXdhc1VzZWQgfD0gVXNhZ2VFZmZlY3RzW2ldLktleS5UYWtlRWZmZWN0KHVzZXIuZ2FtZU9iamVjdCwgdXNlci5nYW1lT2JqZWN0LCBVc2FnZUVmZmVjdHNbaV0uVmFsdWUpOwoJCQkJfQoJCQl9CgkJCXJldHVybiB3YXNVc2VkOwoJCX0KCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzY3JpcHRpb24gPSBiYXNlLkdldERlc2NyaXB0aW9uKCk7CgoJCQlpZiAoIXN0cmluZy5Jc051bGxPcldoaXRlU3BhY2UoZGVzY3JpcHRpb24pKQoJCQkJZGVzY3JpcHRpb24gKz0gIlxuIjsKCQkJZWxzZQoJCQkJZGVzY3JpcHRpb24gPSAiIjsKCgkJCWZvciAoaW50IGkgPSAwOyBpIDwgVXNhZ2VFZmZlY3RzLkNvdW50OyBpKyspCgkJCXsKCQkJCWRlc2NyaXB0aW9uICs9IFVzYWdlRWZmZWN0c1tpXS5LZXkuRGVzY3JpcHRpb24gKyAiXG4iOwoJCQl9CgkJCS8vIGZvcmVhY2ggKHZhciBlZmZlY3QgaW4gVXNhZ2VFZmZlY3RzKQoJCQkvLyB7CgkJCS8vIAlkZXNjcmlwdGlvbiArPSBlZmZlY3QuRGVzY3JpcHRpb24gKyAiXG4iOwoJCQkvLyB9CgoJCQlyZXR1cm4gZGVzY3JpcHRpb247CgkJfQoJfQp9CgovLyAjaWYgVU5JVFlfRURJVE9SCi8vIFtDdXN0b21FZGl0b3IodHlwZW9mKFVzYWJsZUl0ZW0pKV0KLy8gcHVibGljIGNsYXNzIFVzYWJsZUl0ZW1FZGl0b3IgOiBFZGl0b3IKLy8gewovLyAJVXNhYmxlSXRlbSBtX1RhcmdldDsKCi8vIAlJdGVtRWRpdG9yIG1fSXRlbUVkaXRvcjsKCi8vIAlMaXN0PHN0cmluZz4gbV9BdmFpbGFibGVVc2FnZVR5cGU7Ci8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eTsKCi8vIAl2b2lkIE9uRW5hYmxlKCkKLy8gCXsKLy8gCQltX1RhcmdldCA9IHRhcmdldCBhcyBVc2FibGVJdGVtOwovLyAJCW1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoVXNhYmxlSXRlbS5Vc2FnZUVmZmVjdHMpKTsKCi8vIAkJbV9JdGVtRWRpdG9yID0gbmV3IEl0ZW1FZGl0b3IoKTsKLy8gCQltX0l0ZW1FZGl0b3IuSW5pdChzZXJpYWxpemVkT2JqZWN0KTsKCi8vIAkJdmFyIGxvb2t1cCA9IHR5cGVvZihVc2FibGVJdGVtLlVzYWdlRWZmZWN0KTsKLy8gCQltX0F2YWlsYWJsZVVzYWdlVHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gCQkJLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gCQkJLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gCQkJLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gCQkJLlRvTGlzdCgpOwovLyAJfQoKLy8gCXB1YmxpYyBvdmVycmlkZSB2b2lkIE9uSW5zcGVjdG9yR1VJKCkKLy8gCXsKLy8gCQltX0l0ZW1FZGl0b3IuR1VJKCk7CgovLyAJCWludCBjaG9pY2UgPSBFZGl0b3JHVUlMYXlvdXQuUG9wdXAoIkFkZCBuZXcgRWZmZWN0IiwgLTEsIG1fQXZhaWxhYmxlVXNhZ2VUeXBlLlRvQXJyYXkoKSk7CgovLyAJCWlmIChjaG9pY2UgIT0gLTEpCi8vIAkJewovLyAJCQl2YXIgbmV3SW5zdGFuY2UgPSBTY3JpcHRhYmxlT2JqZWN0LkNyZWF0ZUluc3RhbmNlKG1fQXZhaWxhYmxlVXNhZ2VUeXBlW2Nob2ljZV0pOwoKLy8gCQkJQXNzZXREYXRhYmFzZS5BZGRPYmplY3RUb0Fzc2V0KG5ld0luc3RhbmNlLCB0YXJnZXQpOwoKLy8gCQkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5JbnNlcnRBcnJheUVsZW1lbnRBdEluZGV4KG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplKTsKLy8gCQkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplIC0gMSkub2JqZWN0UmVmZXJlbmNlVmFsdWUgPSBuZXdJbnN0YW5jZTsKLy8gCQl9CgovLyAJCUVkaXRvciBlZCA9IG51bGw7Ci8vIAkJaW50IHRvRGVsZXRlID0gLTE7Ci8vIAkJZm9yIChpbnQgaSA9IDA7IGkgPCBtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZTsgKytpKQovLyAJCXsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkJlZ2luSG9yaXpvbnRhbCgpOwovLyAJCQlFZGl0b3JHVUlMYXlvdXQuQmVnaW5WZXJ0aWNhbCgpOwovLyAJCQl2YXIgaXRlbSA9IG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChpKTsKLy8gCQkJU2VyaWFsaXplZE9iamVjdCBvYmogPSBuZXcgU2VyaWFsaXplZE9iamVjdChpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlKTsKCi8vIAkJCUVkaXRvci5DcmVhdGVDYWNoZWRFZGl0b3IoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSwgbnVsbCwgcmVmIGVkKTsKCi8vIAkJCWVkLk9uSW5zcGVjdG9yR1VJKCk7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5FbmRWZXJ0aWNhbCgpOwoKLy8gCQkJaWYgKEdVSUxheW91dC5CdXR0b24oIi0iLCBHVUlMYXlvdXQuV2lkdGgoMzIpKSkKLy8gCQkJewovLyAJCQkJdG9EZWxldGUgPSBpOwovLyAJCQl9Ci8vIAkJCUVkaXRvckdVSUxheW91dC5FbmRIb3Jpem9udGFsKCk7Ci8vIAkJfQoKLy8gCQlpZiAodG9EZWxldGUgIT0gLTEpCi8vIAkJewovLyAJCQl2YXIgaXRlbSA9IG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSkub2JqZWN0UmVmZXJlbmNlVmFsdWU7Ci8vIAkJCURlc3Ryb3lJbW1lZGlhdGUoaXRlbSwgdHJ1ZSk7CgovLyAJCQkvL25lZWQgdG8gZG8gaXQgdHdpY2UsIGZpcnN0IHRpbWUganVzdCBudWxsaWZ5IHRoZSBlbnRyeSwgc2Vjb25kIGFjdHVhbGx5IHJlbW92ZSBpdC4KLy8gCQkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gCQkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gCQl9CgovLyAJCXNlcmlhbGl6ZWRPYmplY3QuQXBwbHlNb2RpZmllZFByb3BlcnRpZXMoKTsKLy8gCX0KLy8gfQovLyAjZW5kaWYKAAAAAAAAAAChDwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOEDAAAAAAAA7gMAAAAAAAAAAAAAAADwvw"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1710496596.8426259"
					},
					"AQAAAAAAAAAAAAAAoQ8AAAAAAAChDwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBTeXN0ZW0uTGlucTsKCiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CiNlbmRpZgoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlCnsKCS8vLyA8c3VtbWFyeT4KCS8vLyBEZXNjcmliZSBhbiB1c2FibGUgaXRlbS4gQSB1c2FibGUgaXRlbSBpcyBhbiBpdGVtIHRoYXQgY2FuIGJlIHVzZWQgaW4gdGhlIGludmVudG9yeSBieSBkb3VibGUgY2xpY2tpbmcgb24gaXQuCgkvLy8gV2hlbiBpdCBpcyB1c2VkLCBhbGwgdGhlIHN0b3JlZCBVc2FnZUVmZmVjdHMgd2lsbCBiZSBydW4sIGFsbG93aW5nIHRvIHNwZWNpZnkgd2hhdCB0aGF0IGl0ZW0gZG9lcy4KCS8vLyAoZS5nLiBhIEFkZEhlYWx0aCBlZmZlY3Qgd2lsbCBnaXZlIGhlYWx0aCBwb2ludCBiYWNrIHRvIHRoZSB1c2VyKQoJLy8vIDwvc3VtbWFyeT4KCVtDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiVXNhYmxlSXRlbSIsIG1lbnVOYW1lID0gIkRhdGEvVXNhYmxlIEl0ZW0iLCBvcmRlciA9IC05OTkpXQoJcHVibGljIGNsYXNzIFVzYWJsZUl0ZW0gOiBJdGVtCgl7CgkJcHVibGljIExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gVXNhZ2VFZmZlY3RzOwoJCXB1YmxpYyBib29sIGF1dG9Vc2U7CgoJCXB1YmxpYyBvdmVycmlkZSBib29sIFVzZWRCeShDaGFyYWN0ZXIgdXNlciwgaW50IGNvdW50ID0gMSkKCQl7CgkJCWJvb2wgd2FzVXNlZCA9IGZhbHNlOwoJCQlmb3IgKGludCBuID0gMDsgbiA8IGNvdW50OyBuKyspCgkJCXsKCQkJCWZvciAoaW50IGkgPSAwOyBpIDwgVXNhZ2VFZmZlY3RzLkNvdW50OyBpKyspCgkJCQl7CgkJCQkJd2FzVXNlZCB8PSBVc2FnZUVmZmVjdHNbaV0uS2V5LlRha2VFZmZlY3QodXNlci5nYW1lT2JqZWN0LCB1c2VyLmdhbWVPYmplY3QsIFVzYWdlRWZmZWN0c1tpXS5WYWx1ZSk7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIHdhc1VzZWQ7CgkJfQoKCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCQl7CgkJCXN0cmluZyBkZXNjcmlwdGlvbiA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCgkJCWlmICghc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShkZXNjcmlwdGlvbikpCgkJCQlkZXNjcmlwdGlvbiArPSAiXG4iOwoJCQllbHNlCgkJCQlkZXNjcmlwdGlvbiA9ICIiOwoKCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBVc2FnZUVmZmVjdHMuQ291bnQ7IGkrKykKCQkJewoJCQkJZGVzY3JpcHRpb24gKz0gVXNhZ2VFZmZlY3RzW2ldLktleS5EZXNjcmlwdGlvbiArICJcbiI7CgkJCX0KCQkJLy8gZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBVc2FnZUVmZmVjdHMpCgkJCS8vIHsKCQkJLy8gCWRlc2NyaXB0aW9uICs9IGVmZmVjdC5EZXNjcmlwdGlvbiArICJcbiI7CgkJCS8vIH0KCgkJCXJldHVybiBkZXNjcmlwdGlvbjsKCQl9Cgl9Cn0KCi8vICNpZiBVTklUWV9FRElUT1IKLy8gW0N1c3RvbUVkaXRvcih0eXBlb2YoVXNhYmxlSXRlbSkpXQovLyBwdWJsaWMgY2xhc3MgVXNhYmxlSXRlbUVkaXRvciA6IEVkaXRvcgovLyB7Ci8vIAlVc2FibGVJdGVtIG1fVGFyZ2V0OwoKLy8gCUl0ZW1FZGl0b3IgbV9JdGVtRWRpdG9yOwoKLy8gCUxpc3Q8c3RyaW5nPiBtX0F2YWlsYWJsZVVzYWdlVHlwZTsKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5OwoKLy8gCXZvaWQgT25FbmFibGUoKQovLyAJewovLyAJCW1fVGFyZ2V0ID0gdGFyZ2V0IGFzIFVzYWJsZUl0ZW07Ci8vIAkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihVc2FibGVJdGVtLlVzYWdlRWZmZWN0cykpOwoKLy8gCQltX0l0ZW1FZGl0b3IgPSBuZXcgSXRlbUVkaXRvcigpOwovLyAJCW1fSXRlbUVkaXRvci5Jbml0KHNlcmlhbGl6ZWRPYmplY3QpOwoKLy8gCQl2YXIgbG9va3VwID0gdHlwZW9mKFVzYWJsZUl0ZW0uVXNhZ2VFZmZlY3QpOwovLyAJCW1fQXZhaWxhYmxlVXNhZ2VUeXBlID0gU3lzdGVtLkFwcERvbWFpbi5DdXJyZW50RG9tYWluLkdldEFzc2VtYmxpZXMoKQovLyAJCQkuU2VsZWN0TWFueShhc3NlbWJseSA9PiBhc3NlbWJseS5HZXRUeXBlcygpKQovLyAJCQkuV2hlcmUoeCA9PiB4LklzQ2xhc3MgJiYgIXguSXNBYnN0cmFjdCAmJiB4LklzU3ViY2xhc3NPZihsb29rdXApKQovLyAJCQkuU2VsZWN0KHR5cGUgPT4gdHlwZS5OYW1lKQovLyAJCQkuVG9MaXN0KCk7Ci8vIAl9CgovLyAJcHVibGljIG92ZXJyaWRlIHZvaWQgT25JbnNwZWN0b3JHVUkoKQovLyAJewovLyAJCW1fSXRlbUVkaXRvci5HVUkoKTsKCi8vIAkJaW50IGNob2ljZSA9IEVkaXRvckdVSUxheW91dC5Qb3B1cCgiQWRkIG5ldyBFZmZlY3QiLCAtMSwgbV9BdmFpbGFibGVVc2FnZVR5cGUuVG9BcnJheSgpKTsKCi8vIAkJaWYgKGNob2ljZSAhPSAtMSkKLy8gCQl7Ci8vIAkJCXZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVVc2FnZVR5cGVbY2hvaWNlXSk7CgovLyAJCQlBc3NldERhdGFiYXNlLkFkZE9iamVjdFRvQXNzZXQobmV3SW5zdGFuY2UsIHRhcmdldCk7CgovLyAJCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5Lkluc2VydEFycmF5RWxlbWVudEF0SW5kZXgobV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAJCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgobV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUgLSAxKS5vYmplY3RSZWZlcmVuY2VWYWx1ZSA9IG5ld0luc3RhbmNlOwovLyAJCX0KCi8vIAkJRWRpdG9yIGVkID0gbnVsbDsKLy8gCQlpbnQgdG9EZWxldGUgPSAtMTsKLy8gCQlmb3IgKGludCBpID0gMDsgaSA8IG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vIAkJewovLyAJCQlFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vIAkJCXZhciBpdGVtID0gbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KGkpOwovLyAJCQlTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gCQkJRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gCQkJZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAJCQlpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAJCQl7Ci8vIAkJCQl0b0RlbGV0ZSA9IGk7Ci8vIAkJCX0KLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gCQl9CgovLyAJCWlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gCQl7Ci8vIAkJCXZhciBpdGVtID0gbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKLy8gCQkJRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKCi8vIAkJCS8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgovLyAJCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAJCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAJCX0KCi8vIAkJc2VyaWFsaXplZE9iamVjdC5BcHBseU1vZGlmaWVkUHJvcGVydGllcygpOwovLyAJfQovLyB9Ci8vICNlbmRpZgo",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOEDAAAAAAAA7gMAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAChDwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBTeXN0ZW0uTGlucTsKCiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CiNlbmRpZgoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlCnsKCS8vLyA8c3VtbWFyeT4KCS8vLyBEZXNjcmliZSBhbiB1c2FibGUgaXRlbS4gQSB1c2FibGUgaXRlbSBpcyBhbiBpdGVtIHRoYXQgY2FuIGJlIHVzZWQgaW4gdGhlIGludmVudG9yeSBieSBkb3VibGUgY2xpY2tpbmcgb24gaXQuCgkvLy8gV2hlbiBpdCBpcyB1c2VkLCBhbGwgdGhlIHN0b3JlZCBVc2FnZUVmZmVjdHMgd2lsbCBiZSBydW4sIGFsbG93aW5nIHRvIHNwZWNpZnkgd2hhdCB0aGF0IGl0ZW0gZG9lcy4KCS8vLyAoZS5nLiBhIEFkZEhlYWx0aCBlZmZlY3Qgd2lsbCBnaXZlIGhlYWx0aCBwb2ludCBiYWNrIHRvIHRoZSB1c2VyKQoJLy8vIDwvc3VtbWFyeT4KCVtDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiVXNhYmxlSXRlbSIsIG1lbnVOYW1lID0gIkRhdGEvVXNhYmxlIEl0ZW0iLCBvcmRlciA9IC05OTkpXQoJcHVibGljIGNsYXNzIFVzYWJsZUl0ZW0gOiBJdGVtCgl7CgkJcHVibGljIExpc3Q8S2V5VmFsdWVEYXRhLktleVZhbHVlPEVmZmVjdERhdGEsIHN0cmluZ1tdPj4gVXNhZ2VFZmZlY3RzOwoJCXB1YmxpYyBib29sIGF1dG9Vc2U7CgoJCXB1YmxpYyBvdmVycmlkZSBib29sIFVzZWRCeShDaGFyYWN0ZXIgdXNlciwgaW50IGNvdW50ID0gMSkKCQl7CgkJCWJvb2wgd2FzVXNlZCA9IGZhbHNlOwoJCQlmb3IgKGludCBuID0gMDsgbiA8IGNvdW50OyBuKyspCgkJCXsKCQkJCWZvciAoaW50IGkgPSAwOyBpIDwgVXNhZ2VFZmZlY3RzLkNvdW50OyBpKyspCgkJCQl7CgkJCQkJd2FzVXNlZCB8PSBVc2FnZUVmZmVjdHNbaV0uS2V5LlRha2VFZmZlY3QodXNlci5nYW1lT2JqZWN0LCB1c2VyLmdhbWVPYmplY3QsIFVzYWdlRWZmZWN0c1tpXS5WYWx1ZSk7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIHdhc1VzZWQ7CgkJfQoKCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCQl7CgkJCXN0cmluZyBkZXNjcmlwdGlvbiA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCgkJCWlmICghc3RyaW5nLklzTnVsbE9yV2hpdGVTcGFjZShkZXNjcmlwdGlvbikpCgkJCQlkZXNjcmlwdGlvbiArPSAiXG4iOwoJCQllbHNlCgkJCQlkZXNjcmlwdGlvbiA9ICIiOwoKCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBVc2FnZUVmZmVjdHMuQ291bnQ7IGkrKykKCQkJewoJCQkJZGVzY3JpcHRpb24gKz0gVXNhZ2VFZmZlY3RzW2ldLktleS5EZXNjcmlwdGlvbiArICJcbiI7CgkJCX0KCQkJLy8gZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBVc2FnZUVmZmVjdHMpCgkJCS8vIHsKCQkJLy8gCWRlc2NyaXB0aW9uICs9IGVmZmVjdC5EZXNjcmlwdGlvbiArICJcbiI7CgkJCS8vIH0KCgkJCXJldHVybiBkZXNjcmlwdGlvbjsKCQl9Cgl9Cn0KCi8vICNpZiBVTklUWV9FRElUT1IKLy8gW0N1c3RvbUVkaXRvcih0eXBlb2YoVXNhYmxlSXRlbSkpXQovLyBwdWJsaWMgY2xhc3MgVXNhYmxlSXRlbUVkaXRvciA6IEVkaXRvcgovLyB7Ci8vIAlVc2FibGVJdGVtIG1fVGFyZ2V0OwoKLy8gCUl0ZW1FZGl0b3IgbV9JdGVtRWRpdG9yOwoKLy8gCUxpc3Q8c3RyaW5nPiBtX0F2YWlsYWJsZVVzYWdlVHlwZTsKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5OwoKLy8gCXZvaWQgT25FbmFibGUoKQovLyAJewovLyAJCW1fVGFyZ2V0ID0gdGFyZ2V0IGFzIFVzYWJsZUl0ZW07Ci8vIAkJbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihVc2FibGVJdGVtLlVzYWdlRWZmZWN0cykpOwoKLy8gCQltX0l0ZW1FZGl0b3IgPSBuZXcgSXRlbUVkaXRvcigpOwovLyAJCW1fSXRlbUVkaXRvci5Jbml0KHNlcmlhbGl6ZWRPYmplY3QpOwoKLy8gCQl2YXIgbG9va3VwID0gdHlwZW9mKFVzYWJsZUl0ZW0uVXNhZ2VFZmZlY3QpOwovLyAJCW1fQXZhaWxhYmxlVXNhZ2VUeXBlID0gU3lzdGVtLkFwcERvbWFpbi5DdXJyZW50RG9tYWluLkdldEFzc2VtYmxpZXMoKQovLyAJCQkuU2VsZWN0TWFueShhc3NlbWJseSA9PiBhc3NlbWJseS5HZXRUeXBlcygpKQovLyAJCQkuV2hlcmUoeCA9PiB4LklzQ2xhc3MgJiYgIXguSXNBYnN0cmFjdCAmJiB4LklzU3ViY2xhc3NPZihsb29rdXApKQovLyAJCQkuU2VsZWN0KHR5cGUgPT4gdHlwZS5OYW1lKQovLyAJCQkuVG9MaXN0KCk7Ci8vIAl9CgovLyAJcHVibGljIG92ZXJyaWRlIHZvaWQgT25JbnNwZWN0b3JHVUkoKQovLyAJewovLyAJCW1fSXRlbUVkaXRvci5HVUkoKTsKCi8vIAkJaW50IGNob2ljZSA9IEVkaXRvckdVSUxheW91dC5Qb3B1cCgiQWRkIG5ldyBFZmZlY3QiLCAtMSwgbV9BdmFpbGFibGVVc2FnZVR5cGUuVG9BcnJheSgpKTsKCi8vIAkJaWYgKGNob2ljZSAhPSAtMSkKLy8gCQl7Ci8vIAkJCXZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVVc2FnZVR5cGVbY2hvaWNlXSk7CgovLyAJCQlBc3NldERhdGFiYXNlLkFkZE9iamVjdFRvQXNzZXQobmV3SW5zdGFuY2UsIHRhcmdldCk7CgovLyAJCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5Lkluc2VydEFycmF5RWxlbWVudEF0SW5kZXgobV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAJCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgobV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUgLSAxKS5vYmplY3RSZWZlcmVuY2VWYWx1ZSA9IG5ld0luc3RhbmNlOwovLyAJCX0KCi8vIAkJRWRpdG9yIGVkID0gbnVsbDsKLy8gCQlpbnQgdG9EZWxldGUgPSAtMTsKLy8gCQlmb3IgKGludCBpID0gMDsgaSA8IG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vIAkJewovLyAJCQlFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vIAkJCXZhciBpdGVtID0gbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KGkpOwovLyAJCQlTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gCQkJRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gCQkJZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAJCQlpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAJCQl7Ci8vIAkJCQl0b0RlbGV0ZSA9IGk7Ci8vIAkJCX0KLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gCQl9CgovLyAJCWlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gCQl7Ci8vIAkJCXZhciBpdGVtID0gbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKLy8gCQkJRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKCi8vIAkJCS8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgovLyAJCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAJCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAJCX0KCi8vIAkJc2VyaWFsaXplZE9iamVjdC5BcHBseU1vZGlmaWVkUHJvcGVydGllcygpOwovLyAJfQovLyB9Ci8vICNlbmRpZgoAAAAAAAAAAF4PAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4QMAAAAAAADuAwAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1711529589.8763685"
					},
					"AQAAAAAAAAAAAAAAXg8AAAAAAABeDwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwp1c2luZyBTeXN0ZW0uTGlucTsKCiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CiNlbmRpZgoKCi8vLyA8c3VtbWFyeT4KLy8vIERlc2NyaWJlIGFuIHVzYWJsZSBpdGVtLiBBIHVzYWJsZSBpdGVtIGlzIGFuIGl0ZW0gdGhhdCBjYW4gYmUgdXNlZCBpbiB0aGUgaW52ZW50b3J5IGJ5IGRvdWJsZSBjbGlja2luZyBvbiBpdC4KLy8vIFdoZW4gaXQgaXMgdXNlZCwgYWxsIHRoZSBzdG9yZWQgVXNhZ2VFZmZlY3RzIHdpbGwgYmUgcnVuLCBhbGxvd2luZyB0byBzcGVjaWZ5IHdoYXQgdGhhdCBpdGVtIGRvZXMuCi8vLyAoZS5nLiBhIEFkZEhlYWx0aCBlZmZlY3Qgd2lsbCBnaXZlIGhlYWx0aCBwb2ludCBiYWNrIHRvIHRoZSB1c2VyKQovLy8gPC9zdW1tYXJ5PgpbQ3JlYXRlQXNzZXRNZW51KGZpbGVOYW1lID0gIlVzYWJsZUl0ZW0iLCBtZW51TmFtZSA9ICJEYXRhL1VzYWJsZSBJdGVtIiwgb3JkZXIgPSAtOTk5KV0KcHVibGljIGNsYXNzIFVzYWJsZUl0ZW0gOiBJdGVtCnsKCXB1YmxpYyBMaXN0PEtleVZhbHVlRGF0YS5LZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+IFVzYWdlRWZmZWN0czsKCXB1YmxpYyBib29sIGF1dG9Vc2U7CgoJcHVibGljIG92ZXJyaWRlIGJvb2wgVXNlZEJ5KENoYXJhY3RlciB1c2VyLCBpbnQgY291bnQgPSAxKQoJewoJCWJvb2wgd2FzVXNlZCA9IGZhbHNlOwoJCWZvciAoaW50IG4gPSAwOyBuIDwgY291bnQ7IG4rKykKCQl7CgkJCWZvciAoaW50IGkgPSAwOyBpIDwgVXNhZ2VFZmZlY3RzLkNvdW50OyBpKyspCgkJCXsKCQkJCXdhc1VzZWQgfD0gVXNhZ2VFZmZlY3RzW2ldLktleS5UYWtlRWZmZWN0KHVzZXIuZ2FtZU9iamVjdCwgdXNlci5nYW1lT2JqZWN0LCBVc2FnZUVmZmVjdHNbaV0uVmFsdWUpOwoJCQl9CgkJfQoJCXJldHVybiB3YXNVc2VkOwoJfQoKCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJewoJCXN0cmluZyBkZXNjcmlwdGlvbiA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCgkJaWYgKCFzdHJpbmcuSXNOdWxsT3JXaGl0ZVNwYWNlKGRlc2NyaXB0aW9uKSkKCQkJZGVzY3JpcHRpb24gKz0gIlxuIjsKCQllbHNlCgkJCWRlc2NyaXB0aW9uID0gIiI7CgoJCWZvciAoaW50IGkgPSAwOyBpIDwgVXNhZ2VFZmZlY3RzLkNvdW50OyBpKyspCgkJewoJCQlkZXNjcmlwdGlvbiArPSBVc2FnZUVmZmVjdHNbaV0uS2V5LkRlc2NyaXB0aW9uICsgIlxuIjsKCQl9CgkJLy8gZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBVc2FnZUVmZmVjdHMpCgkJLy8gewoJCS8vIAlkZXNjcmlwdGlvbiArPSBlZmZlY3QuRGVzY3JpcHRpb24gKyAiXG4iOwoJCS8vIH0KCgkJcmV0dXJuIGRlc2NyaXB0aW9uOwoJfQp9CgoKLy8gI2lmIFVOSVRZX0VESVRPUgovLyBbQ3VzdG9tRWRpdG9yKHR5cGVvZihVc2FibGVJdGVtKSldCi8vIHB1YmxpYyBjbGFzcyBVc2FibGVJdGVtRWRpdG9yIDogRWRpdG9yCi8vIHsKLy8gCVVzYWJsZUl0ZW0gbV9UYXJnZXQ7CgovLyAJSXRlbUVkaXRvciBtX0l0ZW1FZGl0b3I7CgovLyAJTGlzdDxzdHJpbmc+IG1fQXZhaWxhYmxlVXNhZ2VUeXBlOwovLyAJU2VyaWFsaXplZFByb3BlcnR5IG1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHk7CgovLyAJdm9pZCBPbkVuYWJsZSgpCi8vIAl7Ci8vIAkJbV9UYXJnZXQgPSB0YXJnZXQgYXMgVXNhYmxlSXRlbTsKLy8gCQltX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFVzYWJsZUl0ZW0uVXNhZ2VFZmZlY3RzKSk7CgovLyAJCW1fSXRlbUVkaXRvciA9IG5ldyBJdGVtRWRpdG9yKCk7Ci8vIAkJbV9JdGVtRWRpdG9yLkluaXQoc2VyaWFsaXplZE9iamVjdCk7CgovLyAJCXZhciBsb29rdXAgPSB0eXBlb2YoVXNhYmxlSXRlbS5Vc2FnZUVmZmVjdCk7Ci8vIAkJbV9BdmFpbGFibGVVc2FnZVR5cGUgPSBTeXN0ZW0uQXBwRG9tYWluLkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpCi8vIAkJCS5TZWxlY3RNYW55KGFzc2VtYmx5ID0+IGFzc2VtYmx5LkdldFR5cGVzKCkpCi8vIAkJCS5XaGVyZSh4ID0+IHguSXNDbGFzcyAmJiAheC5Jc0Fic3RyYWN0ICYmIHguSXNTdWJjbGFzc09mKGxvb2t1cCkpCi8vIAkJCS5TZWxlY3QodHlwZSA9PiB0eXBlLk5hbWUpCi8vIAkJCS5Ub0xpc3QoKTsKLy8gCX0KCi8vIAlwdWJsaWMgb3ZlcnJpZGUgdm9pZCBPbkluc3BlY3RvckdVSSgpCi8vIAl7Ci8vIAkJbV9JdGVtRWRpdG9yLkdVSSgpOwoKLy8gCQlpbnQgY2hvaWNlID0gRWRpdG9yR1VJTGF5b3V0LlBvcHVwKCJBZGQgbmV3IEVmZmVjdCIsIC0xLCBtX0F2YWlsYWJsZVVzYWdlVHlwZS5Ub0FycmF5KCkpOwoKLy8gCQlpZiAoY2hvaWNlICE9IC0xKQovLyAJCXsKLy8gCQkJdmFyIG5ld0luc3RhbmNlID0gU2NyaXB0YWJsZU9iamVjdC5DcmVhdGVJbnN0YW5jZShtX0F2YWlsYWJsZVVzYWdlVHlwZVtjaG9pY2VdKTsKCi8vIAkJCUFzc2V0RGF0YWJhc2UuQWRkT2JqZWN0VG9Bc3NldChuZXdJbnN0YW5jZSwgdGFyZ2V0KTsKCi8vIAkJCW1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuSW5zZXJ0QXJyYXlFbGVtZW50QXRJbmRleChtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSk7Ci8vIAkJCW1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSAtIDEpLm9iamVjdFJlZmVyZW5jZVZhbHVlID0gbmV3SW5zdGFuY2U7Ci8vIAkJfQoKLy8gCQlFZGl0b3IgZWQgPSBudWxsOwovLyAJCWludCB0b0RlbGV0ZSA9IC0xOwovLyAJCWZvciAoaW50IGkgPSAwOyBpIDwgbV9Vc2FnZUVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemU7ICsraSkKLy8gCQl7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5CZWdpbkhvcml6b250YWwoKTsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkJlZ2luVmVydGljYWwoKTsKLy8gCQkJdmFyIGl0ZW0gPSBtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgoaSk7Ci8vIAkJCVNlcmlhbGl6ZWRPYmplY3Qgb2JqID0gbmV3IFNlcmlhbGl6ZWRPYmplY3QoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSk7CgovLyAJCQlFZGl0b3IuQ3JlYXRlQ2FjaGVkRWRpdG9yKGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUsIG51bGwsIHJlZiBlZCk7CgovLyAJCQllZC5Pbkluc3BlY3RvckdVSSgpOwovLyAJCQlFZGl0b3JHVUlMYXlvdXQuRW5kVmVydGljYWwoKTsKCi8vIAkJCWlmIChHVUlMYXlvdXQuQnV0dG9uKCItIiwgR1VJTGF5b3V0LldpZHRoKDMyKSkpCi8vIAkJCXsKLy8gCQkJCXRvRGVsZXRlID0gaTsKLy8gCQkJfQovLyAJCQlFZGl0b3JHVUlMYXlvdXQuRW5kSG9yaXpvbnRhbCgpOwovLyAJCX0KCi8vIAkJaWYgKHRvRGVsZXRlICE9IC0xKQovLyAJCXsKLy8gCQkJdmFyIGl0ZW0gPSBtX1VzYWdlRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpLm9iamVjdFJlZmVyZW5jZVZhbHVlOwovLyAJCQlEZXN0cm95SW1tZWRpYXRlKGl0ZW0sIHRydWUpOwoKLy8gCQkJLy9uZWVkIHRvIGRvIGl0IHR3aWNlLCBmaXJzdCB0aW1lIGp1c3QgbnVsbGlmeSB0aGUgZW50cnksIHNlY29uZCBhY3R1YWxseSByZW1vdmUgaXQuCi8vIAkJCW1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vIAkJCW1fVXNhZ2VFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vIAkJfQoKLy8gCQlzZXJpYWxpemVkT2JqZWN0LkFwcGx5TW9kaWZpZWRQcm9wZXJ0aWVzKCk7Ci8vIAl9Ci8vIH0KLy8gI2VuZGlmCg",
					"AQAAAAAAAAABAAAA4QMAAAAAAADuAwAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "using System.Collections;\nusing System.Collections.Generic;\nusing CreatorKitCode;\nusing UnityEngine;\nusing UnityEngine.Serialization;\n\n// public class AddHealthUsageEffect : EffectData\n// {\n//     [FormerlySerializedAs(\"HealthPurcentageAmount\")] \n//     public int HealthPercentageAmount = 20;\n    \n//     public override bool OnUse(CharacterData user)\n//     {\n//         if (user.Stats.CurrentHealth == user.Stats.stats.health)\n//             return false;\n\n//         VFXManager.PlayVFX(VFXType.Healing, user.transform.position);\n\n//         user.Stats.ChangeHealth( Mathf.FloorToInt(HealthPercentageAmount/100.0f * user.Stats.stats.health) );\n\n//         return true;\n//     }\n// }",
			"file": "Assets/Standard Assets/Scripts/CreatorKitCode/AddHealthUsageEffect.cs",
			"file_size": 671,
			"file_write_time": 133516968373678864,
			"settings":
			{
				"buffer_size": 685,
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					15,
					1,
					"toggle_comment",
					{
						"block": false
					},
					"DQAAAIUCAAAAAAAAiAIAAAAAAAAAAAAAfwIAAAAAAACCAgAAAAAAAAAAAABqAgAAAAAAAG0CAAAAAAAAAAAAAPsBAAAAAAAA/gEAAAAAAAAAAAAAtAEAAAAAAAC3AQAAAAAAAAAAAACZAQAAAAAAAJwBAAAAAAAAAAAAAFgBAAAAAAAAWwEAAAAAAAAAAAAAUgEAAAAAAABVAQAAAAAAAAAAAAAfAQAAAAAAACIBAAAAAAAAAAAAAO4AAAAAAAAA8QAAAAAAAAAAAAAAuAAAAAAAAAC7AAAAAAAAAAAAAAC2AAAAAAAAALkAAAAAAAAAAAAAAIcAAAAAAAAAigAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIYCAAAAAAAAhwAAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "using System.Collections;\nusing System.Collections.Generic;\nusing CreatorKitCode;\nusing UnityEngine;\n\n\n",
			"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/IncreaseStrengthEffect.cs",
			"file_size": 752,
			"file_write_time": 133516968497272870,
			"settings":
			{
				"buffer_size": 103,
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"cut",
					null,
					"AQAAAGYAAAAAAAAAZgAAAAAAAABuAgAAcHVibGljIGNsYXNzIEluY3JlYXNlU3RyZW5ndGhFZmZlY3QgOiBFZmZlY3REYXRhCnsKICAgIHB1YmxpYyBmbG9hdCBEdXJhdGlvbiA9IDEwLjBmOwogICAgcHVibGljIGludCBTdHJlbmd0aENoYW5nZSA9IDU7CiAgICBwdWJsaWMgU3ByaXRlIEVmZmVjdFNwcml0ZTsKICAgIAogICAgcHVibGljIG92ZXJyaWRlIGJvb2wgT25Vc2UoQ2hhcmFjdGVyRGF0YSB1c2VyKQogICAgewogICAgICAgIFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyIG1vZGlmaWVyID0gbmV3IFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyKCk7CiAgICAgICAgbW9kaWZpZXIuTW9kaWZpZXJNb2RlID0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5BYnNvbHV0ZTsKICAgICAgICBtb2RpZmllci5TdGF0cy5zdHJlbmd0aCA9IFN0cmVuZ3RoQ2hhbmdlOwogICAgICAgIAogICAgICAgIFZGWE1hbmFnZXIuUGxheVZGWChWRlhUeXBlLlN0cm9uZ2VyLCB1c2VyLnRyYW5zZm9ybS5wb3NpdGlvbik7CiAgICAgICAgCiAgICAgICAgdXNlci5TdGF0cy5BZGRUaW1lZE1vZGlmaWVyKG1vZGlmaWVyLCBEdXJhdGlvbiwgIlN0cmVuZ3RoQWRkIiwgRWZmZWN0U3ByaXRlKTsKICAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQ",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANQCAAAAAAAAZgAAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "using System.Collections;\nusing System.Collections.Generic;\nusing System.Text;\nusing CreatorKitCode;\nusing UnityEngine;\n\npublic class StatChangeEquipEffect : EffectData\n{\n    \n    public StatSystem.StatModifier StatModifierEquip;\n    public override void OnEquip(CharacterData user)\n    {\n        user.Stats.AddModifier(StatModifierEquip);\n    }\n\n    public override void OnUnEquip(CharacterData user)\n    {\n        user.Stats.RemoveModifier(StatModifierEquip);\n    }\n\n    public override string GetDescription()\n    {\n        string desc = base.GetDescription() + \"\\n\";\n\n        string unit = StatModifierEquip.ModifierMode == StatSystem.StatModifier.Mode.Percentage ? \"%\" : \"\";\n\n        if (StatModifierEquip.Stats.strength != 0)\n            desc += $\"Str : {StatModifierEquip.Stats.strength:+0;-#}{unit}\\n\"; //format specifier to force the + sign to appear\n        if (StatModifierEquip.Stats.agility != 0)\n            desc += $\"Agi : {StatModifierEquip.Stats.agility:+0;-#}{unit}\\n\";\n        if (StatModifierEquip.Stats.defense != 0)\n            desc += $\"Def : {StatModifierEquip.Stats.defense:+0;-#}{unit}\\n\";\n        if (StatModifierEquip.Stats.health != 0)\n            desc += $\"HP : {StatModifierEquip.Stats.health:+0;-#}{unit}\\n\";\n\n        return desc;\n    }\n}\n",
			"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/StatChangeEquipEffect.cs",
			"file_size": 1312,
			"file_write_time": 133516968559839179,
			"settings":
			{
				"buffer_size": 1271,
				"line_ending": "Windows"
			}
		},
		{
			"contents": "using System.Collections;\nusing System.Collections.Generic;\nusing CreatorKitCode;\nusing UnityEngine;\n\n\n",
			"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/VampiricWeaponEffect.cs",
			"file_size": 634,
			"file_write_time": 133517517106513969,
			"settings":
			{
				"buffer_size": 103,
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					4,
					6,
					"left_delete",
					null,
					"BgAAAKUBAAAAAAAApQEAAAAAAAABAAAAZaQBAAAAAAAApAEAAAAAAAABAAAAZ6MBAAAAAAAAowEAAAAAAAABAAAAYaIBAAAAAAAAogEAAAAAAAABAAAAbaEBAAAAAAAAoQEAAAAAAAABAAAAYaABAAAAAAAAoAEAAAAAAAABAAAARA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKYBAAAAAAAApgEAAAAAAAAAAAAAAADwvw"
				],
				[
					15,
					1,
					"cut",
					null,
					"AQAAAGYAAAAAAAAAZgAAAAAAAAD8AQAAcHVibGljIGNsYXNzIFZhbXBpcmljV2VhcG9uRWZmZWN0IDogRWZmZWN0RGF0YQp7CiAgICBwdWJsaWMgaW50IFBlcmNlbnRhZ2VIZWFsdGhTdG9sZW47CiAgICAKICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQogICAgewogICAgICAgIHJldHVybiAkIkNvbnZlcnQge1BlcmNlbnRhZ2VIZWFsdGhTdG9sZW59JSBvZiBwaHlzaWNhbCBkYW1hZ2UgaW50byBIZWFsdGgiOwogICAgfQoKICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIE9uUG9zdEF0dGFjayhDaGFyYWN0ZXJEYXRhIHRhcmdldCwgQ2hhcmFjdGVyRGF0YSB1c2VyLCBFZmZlY3QgZWZmZWN0KQogICAgewogICAgICAgIGludCBhbW91bnQgPSBNYXRoZi5GbG9vclRvSW50KGVmZmVjdC5HZXREYW1hZ2UoU3RhdFN5c3RlbS5EYW1hZ2VUeXBlLlBoeXNpY2FsKSAqIChQZXJjZW50YWdlSGVhbHRoU3RvbGVuIC8gMTAwLjBmKSk7CiAgICAgICAgdXNlci5TdGF0cy5DaGFuZ2VIZWFsdGgoYW1vdW50KTsKICAgIH0KfQ",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGYAAAAAAAAAYgIAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "using System.Collections.Generic;\nusing CreatorKitCode;\nusing UnityEngine;\nusing Vector3 = UnityEngine.Vector3;\n#if UNITY_EDITOR\nusing UnityEditor;\nusing System.Linq;\n#endif\n\n\n/// <summary>\n/// Special case of EquipmentItem for weapon, as they have a whole attack system in addition. Like Equipment they\n/// can have minimum stats and equipped effect, but also have a list of WeaponAttackEffect that will have their\n/// OnAttack function called during a hit, and their OnPostAttack function called after all OnAttack of all effects\n/// are called.\n/// </summary>\npublic class Weapon : EquipmentItem\n{\n\t[System.Serializable]\n\tpublic struct Stat\n\t{\n\t\tpublic float Speed;\n\t\tpublic int MinimumDamage;\n\t\tpublic int MaximumDamage;\n\t\tpublic float MaxRange;\n\t\tpublic int AdditionalTargets;\n\t}\n\tpublic enum WeaponType\n\t{\n\t\tNone,\n\t\tSword,\n\t\tAxe,\n\t\tRake,\n\t\tMace,\n\t\tDagger,\n\t\tBow,\n\t\tMagicWeapon,\n\t\tThrownWeapon\n\t}\n\t[Header(\"WeaponStats\")]\n\tpublic Stat Stats = new Stat() { Speed = 1.0f, MaximumDamage = 1, MinimumDamage = 1, MaxRange = 1, AdditionalTargets = 0 };\n\tpublic StatSystem.DamageType damageType;\n\tpublic WeaponType weaponType;\n\tpublic List<EffectData> AttackEffects;\n\tpublic Skill WeaponSkill;\n\tpublic Bullet bulletPb;\n\n\t[Header(\"Sounds\")]\n\tpublic AudioClip[] HitSounds;\n\tpublic AudioClip[] SwingSounds;\n\n\tpublic void Attack(Character attacker, Character target)\n\t{\n\t\tDamage damage = new Damage(target, attacker);\n\t\tint damageNum = Random.Range(Stats.MinimumDamage, Stats.MaximumDamage + 1);\n\t\tdamage.AddDamage(damageType, damageNum);\n\t\tif (bulletPb != null)\n\t\t{\n\t\t\tVector3 bulletPos = attacker.WeaponRoot.bulletPos;\n\t\t\tBullet bullet = Instantiate(bulletPb, bulletPos, Quaternion.Euler(0, 180, 0));\n\t\t\tbullet.damage = damage;\n\t\t\tbullet.target = target;\n\t\t}\n\t\telse damage.TakeDamage();\n\t\t//foreach (var wae in AttackEffects)\n\t\t//wae.OnAttack(target, attacker, ref attackEffect);\n\n\t\t//target.TakeEffect(attackEffect);\n\n\t\t//foreach (var wae in AttackEffects)\n\t\t//wae.OnPostAttack(target, attacker, attackEffect);\n\t}\n\n\tpublic bool CanHit(Character attacker, Character target)\n\t{\n\t\tif (Vector3.SqrMagnitude(attacker.transform.position - target.transform.position) < Stats.MaxRange * Stats.MaxRange)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpublic override string GetDescription()\n\t{\n\t\tstring desc = base.GetDescription();\n\n\t\tint minimumDPS = Mathf.RoundToInt(Stats.MinimumDamage / Stats.Speed);\n\t\tint maximumDPS = Mathf.RoundToInt(Stats.MaximumDamage / Stats.Speed);\n\n\t\tdesc += \"\\n\";\n\t\tdesc += $\"Damage: {Stats.MinimumDamage} - {Stats.MaximumDamage}\\n\";\n\t\tdesc += $\"DPS: {minimumDPS} - {maximumDPS}\\n\";\n\t\tdesc += $\"Attack Speed : {Stats.Speed}s\\n\";\n\t\tdesc += $\"Range : {Stats.MaxRange}m\\n\";\n\n\t\treturn desc;\n\t}\n\n\tpublic AudioClip GetHitSound()\n\t{\n\t\tif (HitSounds == null || HitSounds.Length == 0)\n\t\t\treturn SFXManager.GetDefaultHit();\n\n\t\treturn HitSounds[Random.Range(0, HitSounds.Length)];\n\t}\n\n\tpublic AudioClip GetSwingSound()\n\t{\n\t\tif (SwingSounds == null || SwingSounds.Length == 0)\n\t\t\treturn SFXManager.GetDefaultSwingSound();\n\n\t\treturn SwingSounds[Random.Range(0, SwingSounds.Length)];\n\t}\n}\n\n\n// #if UNITY_EDITOR\n// [CustomEditor(typeof(Weapon))]\n// public class WeaponEditor : Editor\n// {\n//     Weapon m_Target;\n\n//     ItemEditor m_ItemEditor;\n\n//     List<string> m_AvailableEquipEffectType;\n//     SerializedProperty m_EquippedEffectListProperty;\n\n//     List<string> m_AvailableWeaponAttackEffectType;\n//     SerializedProperty m_WeaponAttackEffectListProperty;\n\n//     SerializedProperty m_HitSoundProps;\n//     SerializedProperty m_SwingSoundProps;\n\n//     SerializedProperty m_MinimumStrengthProperty;\n//     SerializedProperty m_MinimumAgilityProperty;\n//     SerializedProperty m_MinimumDefenseProperty;\n\n//     SerializedProperty m_WeaponStatProperty;\n\n//     [MenuItem(\"Assets/Create/Data/Weapon\", priority = -999)]\n//     static public void CreateWeapon()\n//     {\n//         var newWeapon = CreateInstance<Weapon>();\n//         newWeapon.Slot = (EquipmentItem.EquipmentSlot)666;\n\n//         ProjectWindowUtil.CreateAsset(newWeapon, \"weapon.asset\");\n//     }\n\n//     void OnEnable()\n//     {\n//         m_Target = target as Weapon;\n//         m_EquippedEffectListProperty = serializedObject.FindProperty(nameof(Weapon.EquippedEffects));\n//         m_WeaponAttackEffectListProperty = serializedObject.FindProperty(nameof(Weapon.AttackEffects));\n\n//         m_MinimumStrengthProperty = serializedObject.FindProperty(nameof(EquipmentItem.MinimumStrength));\n//         m_MinimumAgilityProperty = serializedObject.FindProperty(nameof(EquipmentItem.MinimumAgility));\n//         m_MinimumDefenseProperty = serializedObject.FindProperty(nameof(EquipmentItem.MinimumDefense));\n\n//         m_WeaponStatProperty = serializedObject.FindProperty(nameof(Weapon.Stats));\n\n//         m_HitSoundProps = serializedObject.FindProperty(nameof(Weapon.HitSounds));\n//         m_SwingSoundProps = serializedObject.FindProperty(nameof(Weapon.SwingSounds));\n\n//         m_ItemEditor = new ItemEditor();\n//         m_ItemEditor.Init(serializedObject);\n\n//         var lookup = typeof(EffectData);\n//         m_AvailableEquipEffectType = System.AppDomain.CurrentDomain.GetAssemblies()\n//             .SelectMany(assembly => assembly.GetTypes())\n//             .Where(x => x.IsClass && !x.IsAbstract && x.IsSubclassOf(lookup))\n//             .Select(type => type.Name)\n//             .ToList();\n\n//         lookup = typeof(EffectData);\n//         m_AvailableWeaponAttackEffectType = System.AppDomain.CurrentDomain.GetAssemblies()\n//             .SelectMany(assembly => assembly.GetTypes())\n//             .Where(x => x.IsClass && !x.IsAbstract && x.IsSubclassOf(lookup))\n//             .Select(type => type.Name)\n//             .ToList();\n//     }\n\n//     public override void OnInspectorGUI()\n//     {\n//         m_ItemEditor.GUI();\n\n//         EditorGUILayout.PropertyField(m_MinimumStrengthProperty);\n//         EditorGUILayout.PropertyField(m_MinimumAgilityProperty);\n//         EditorGUILayout.PropertyField(m_MinimumDefenseProperty);\n\n//         //EditorGUILayout.PropertyField(m_WeaponStatProperty, true);\n//         var child = m_WeaponStatProperty.Copy();\n//         var depth = child.depth;\n//         child.NextVisible(true);\n\n//         EditorGUILayout.LabelField(\"Weapon Stats\", EditorStyles.boldLabel);\n//         while (child.depth > depth)\n//         {\n//             EditorGUILayout.PropertyField(child, true);\n//             child.NextVisible(false);\n//         }\n\n//         EditorGUILayout.PropertyField(m_HitSoundProps, true);\n//         EditorGUILayout.PropertyField(m_SwingSoundProps, true);\n\n//         int choice = EditorGUILayout.Popup(\"Add new Equipment Effect\", -1, m_AvailableEquipEffectType.ToArray());\n\n//         if (choice != -1)\n//         {\n//             var newInstance = ScriptableObject.CreateInstance(m_AvailableEquipEffectType[choice]);\n\n//             AssetDatabase.AddObjectToAsset(newInstance, target);\n\n//             m_EquippedEffectListProperty.InsertArrayElementAtIndex(m_EquippedEffectListProperty.arraySize);\n//             m_EquippedEffectListProperty.GetArrayElementAtIndex(m_EquippedEffectListProperty.arraySize - 1).objectReferenceValue = newInstance;\n//         }\n\n\n//         Editor ed = null;\n//         int toDelete = -1;\n//         for (int i = 0; i < m_EquippedEffectListProperty.arraySize; ++i)\n//         {\n//             EditorGUILayout.BeginHorizontal();\n//             EditorGUILayout.BeginVertical();\n//             var item = m_EquippedEffectListProperty.GetArrayElementAtIndex(i);           \n//             SerializedObject obj = new SerializedObject(item.objectReferenceValue);\n\n//             Editor.CreateCachedEditor(item.objectReferenceValue, null, ref ed);\n\n//             ed.OnInspectorGUI();\n//             EditorGUILayout.EndVertical();\n\n//             if (GUILayout.Button(\"-\", GUILayout.Width(32)))\n//             {\n//                 toDelete = i;\n//             }\n//             EditorGUILayout.EndHorizontal();\n//         }\n\n//         if (toDelete != -1)\n//         {\n//             var item = m_EquippedEffectListProperty.GetArrayElementAtIndex(toDelete).objectReferenceValue;\n//             DestroyImmediate(item, true);\n\n//             //need to do it twice, first time just nullify the entry, second actually remove it.\n//             m_EquippedEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n//             m_EquippedEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n//         }\n\n//         //attack\n//         choice = EditorGUILayout.Popup(\"Add new Weapon Attack Effect\", -1, m_AvailableWeaponAttackEffectType.ToArray());\n\n//         if (choice != -1)\n//         {\n//             var newInstance = ScriptableObject.CreateInstance(m_AvailableWeaponAttackEffectType[choice]);\n\n//             AssetDatabase.AddObjectToAsset(newInstance, target);\n\n//             m_WeaponAttackEffectListProperty.InsertArrayElementAtIndex(m_WeaponAttackEffectListProperty.arraySize);\n//             m_WeaponAttackEffectListProperty.GetArrayElementAtIndex(m_WeaponAttackEffectListProperty.arraySize - 1).objectReferenceValue = newInstance;\n//         }\n\n//         toDelete = -1;\n//         for (int i = 0; i < m_WeaponAttackEffectListProperty.arraySize; ++i)\n//         {\n//             EditorGUILayout.BeginHorizontal();\n//             EditorGUILayout.BeginVertical();\n//             var item = m_WeaponAttackEffectListProperty.GetArrayElementAtIndex(i);           \n//             SerializedObject obj = new SerializedObject(item.objectReferenceValue);\n\n//             Editor.CreateCachedEditor(item.objectReferenceValue, null, ref ed);\n\n//             ed.OnInspectorGUI();\n//             EditorGUILayout.EndVertical();\n\n//             if (GUILayout.Button(\"-\", GUILayout.Width(32)))\n//             {\n//                 toDelete = i;\n//             }\n//             EditorGUILayout.EndHorizontal();\n//         }\n\n//         if (toDelete != -1)\n//         {\n//             var item = m_WeaponAttackEffectListProperty.GetArrayElementAtIndex(toDelete).objectReferenceValue;\n//             DestroyImmediate(item, true);\n\n//             //need to do it twice, first time just nullify the entry, second actually remove it.\n//             m_WeaponAttackEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n//             m_WeaponAttackEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n//         }\n\n//         serializedObject.ApplyModifiedProperties();\n//     }\n// }\n// #endif",
			"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/Weapon.cs",
			"file_size": 10750,
			"file_write_time": 133560031624085044,
			"settings":
			{
				"buffer_size": 10452,
				"encoding": "UTF-8 with BOM",
				"line_ending": "Windows",
				"scratch": true
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADxKAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgVmVjdG9yMyA9IFVuaXR5RW5naW5lLlZlY3RvcjM7CiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CnVzaW5nIFN5c3RlbS5MaW5xOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBjYXNlIG9mIEVxdWlwbWVudEl0ZW0gZm9yIHdlYXBvbiwgYXMgdGhleSBoYXZlIGEgd2hvbGUgYXR0YWNrIHN5c3RlbSBpbiBhZGRpdGlvbi4gTGlrZSBFcXVpcG1lbnQgdGhleQoJLy8vIGNhbiBoYXZlIG1pbmltdW0gc3RhdHMgYW5kIGVxdWlwcGVkIGVmZmVjdCwgYnV0IGFsc28gaGF2ZSBhIGxpc3Qgb2YgV2VhcG9uQXR0YWNrRWZmZWN0IHRoYXQgd2lsbCBoYXZlIHRoZWlyCgkvLy8gT25BdHRhY2sgZnVuY3Rpb24gY2FsbGVkIGR1cmluZyBhIGhpdCwgYW5kIHRoZWlyIE9uUG9zdEF0dGFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgYWxsIE9uQXR0YWNrIG9mIGFsbCBlZmZlY3RzCgkvLy8gYXJlIGNhbGxlZC4KCS8vLyA8L3N1bW1hcnk+CglwdWJsaWMgY2xhc3MgV2VhcG9uIDogRXF1aXBtZW50SXRlbQoJewoJCVtTeXN0ZW0uU2VyaWFsaXphYmxlXQoJCXB1YmxpYyBzdHJ1Y3QgU3RhdAoJCXsKCQkJcHVibGljIGZsb2F0IFNwZWVkOwoJCQlwdWJsaWMgaW50IE1pbmltdW1EYW1hZ2U7CgkJCXB1YmxpYyBpbnQgTWF4aW11bURhbWFnZTsKCQkJcHVibGljIGZsb2F0IE1heFJhbmdlOwoJCQlwdWJsaWMgaW50IEFkZGl0aW9uYWxUYXJnZXRzOwoJCX0KCQlbSGVhZGVyKCJXZWFwb25TdGF0cyIpXQoJCXB1YmxpYyBTdGF0IFN0YXRzID0gbmV3IFN0YXQoKSB7IFNwZWVkID0gMS4wZiwgTWF4aW11bURhbWFnZSA9IDEsIE1pbmltdW1EYW1hZ2UgPSAxLCBNYXhSYW5nZSA9IDEsIEFkZGl0aW9uYWxUYXJnZXRzID0gMCB9OwoJCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCQlwdWJsaWMgTGlzdDxFZmZlY3REYXRhPiBBdHRhY2tFZmZlY3RzOwoJCXB1YmxpYyBTa2lsbCBXZWFwb25Ta2lsbDsKCQlwdWJsaWMgQnVsbGV0IGJ1bGxldFBiOwoJCXB1YmxpYyBUcmFuc2Zvcm0gYnVsbGV0VHJhbnM7CgoJCVtIZWFkZXIoIlNvdW5kcyIpXQoJCXB1YmxpYyBBdWRpb0NsaXBbXSBIaXRTb3VuZHM7CgkJcHVibGljIEF1ZGlvQ2xpcFtdIFN3aW5nU291bmRzOwoKCQlwdWJsaWMgdm9pZCBBdHRhY2soQ2hhcmFjdGVyRGF0YSBhdHRhY2tlciwgQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgkJewoJCQlEYW1hZ2UgZGFtYWdlID0gbmV3IERhbWFnZSh0YXJnZXQsIGF0dGFja2VyKTsKCQkJaW50IGRhbWFnZU51bSA9IFJhbmRvbS5SYW5nZShTdGF0cy5NaW5pbXVtRGFtYWdlLCBTdGF0cy5NYXhpbXVtRGFtYWdlICsgMSk7CgkJCWRhbWFnZS5BZGREYW1hZ2UoZGFtYWdlVHlwZSwgZGFtYWdlTnVtKTsKCQkJaWYgKGJ1bGxldFBiICE9IG51bGwpCgkJCXsKCQkJCVZlY3RvcjMgYnVsbGV0UG9zID0gYXR0YWNrZXIuR2V0Q29tcG9uZW50PFJvbGVDb250cm9sPigpLldlYXBvbkxvY2F0b3IucG9zaXRpb247CgkJCQlCdWxsZXQgYnVsbGV0ID0gSW5zdGFudGlhdGUoYnVsbGV0UGIsIGJ1bGxldFBvcywgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKTsKCQkJCWJ1bGxldC5kYW1hZ2UgPSBkYW1hZ2U7CgkJCQlidWxsZXQudGFyZ2V0ID0gdGFyZ2V0OwoJCQl9CgkJCWVsc2UgZGFtYWdlLlRha2UoKTsKCQkJLy9mb3JlYWNoICh2YXIgd2FlIGluIEF0dGFja0VmZmVjdHMpCgkJCS8vd2FlLk9uQXR0YWNrKHRhcmdldCwgYXR0YWNrZXIsIHJlZiBhdHRhY2tFZmZlY3QpOwoKCQkJLy90YXJnZXQuVGFrZUVmZmVjdChhdHRhY2tFZmZlY3QpOwoKCQkJLy9mb3JlYWNoICh2YXIgd2FlIGluIEF0dGFja0VmZmVjdHMpCgkJCS8vd2FlLk9uUG9zdEF0dGFjayh0YXJnZXQsIGF0dGFja2VyLCBhdHRhY2tFZmZlY3QpOwoJCX0KCgkJcHVibGljIGJvb2wgQ2FuSGl0KENoYXJhY3RlckRhdGEgYXR0YWNrZXIsIENoYXJhY3RlckRhdGEgdGFyZ2V0KQoJCXsKCQkJaWYgKFZlY3RvcjMuU3FyTWFnbml0dWRlKGF0dGFja2VyLnRyYW5zZm9ybS5wb3NpdGlvbiAtIHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24pIDwgU3RhdHMuTWF4UmFuZ2UgKiBTdGF0cy5NYXhSYW5nZSkKCQkJewoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJCXsKCQkJc3RyaW5nIGRlc2MgPSBiYXNlLkdldERlc2NyaXB0aW9uKCk7CgoJCQlpbnQgbWluaW11bURQUyA9IE1hdGhmLlJvdW5kVG9JbnQoU3RhdHMuTWluaW11bURhbWFnZSAvIFN0YXRzLlNwZWVkKTsKCQkJaW50IG1heGltdW1EUFMgPSBNYXRoZi5Sb3VuZFRvSW50KFN0YXRzLk1heGltdW1EYW1hZ2UgLyBTdGF0cy5TcGVlZCk7CgoJCQlkZXNjICs9ICJcbiI7CgkJCWRlc2MgKz0gJCJEYW1hZ2U6IHtTdGF0cy5NaW5pbXVtRGFtYWdlfSAtIHtTdGF0cy5NYXhpbXVtRGFtYWdlfVxuIjsKCQkJZGVzYyArPSAkIkRQUzoge21pbmltdW1EUFN9IC0ge21heGltdW1EUFN9XG4iOwoJCQlkZXNjICs9ICQiQXR0YWNrIFNwZWVkIDoge1N0YXRzLlNwZWVkfXNcbiI7CgkJCWRlc2MgKz0gJCJSYW5nZSA6IHtTdGF0cy5NYXhSYW5nZX1tXG4iOwoKCQkJcmV0dXJuIGRlc2M7CgkJfQoKCQlwdWJsaWMgQXVkaW9DbGlwIEdldEhpdFNvdW5kKCkKCQl7CgkJCWlmIChIaXRTb3VuZHMgPT0gbnVsbCB8fCBIaXRTb3VuZHMuTGVuZ3RoID09IDApCgkJCQlyZXR1cm4gU0ZYTWFuYWdlci5HZXREZWZhdWx0SGl0KCk7CgoJCQlyZXR1cm4gSGl0U291bmRzW1JhbmRvbS5SYW5nZSgwLCBIaXRTb3VuZHMuTGVuZ3RoKV07CgkJfQoKCQlwdWJsaWMgQXVkaW9DbGlwIEdldFN3aW5nU291bmQoKQoJCXsKCQkJaWYgKFN3aW5nU291bmRzID09IG51bGwgfHwgU3dpbmdTb3VuZHMuTGVuZ3RoID09IDApCgkJCQlyZXR1cm4gU0ZYTWFuYWdlci5HZXREZWZhdWx0U3dpbmdTb3VuZCgpOwoKCQkJcmV0dXJuIFN3aW5nU291bmRzW1JhbmRvbS5SYW5nZSgwLCBTd2luZ1NvdW5kcy5MZW5ndGgpXTsKCQl9Cgl9Cn0KCi8vICNpZiBVTklUWV9FRElUT1IKLy8gW0N1c3RvbUVkaXRvcih0eXBlb2YoV2VhcG9uKSldCi8vIHB1YmxpYyBjbGFzcyBXZWFwb25FZGl0b3IgOiBFZGl0b3IKLy8gewovLyAgICAgV2VhcG9uIG1fVGFyZ2V0OwoKLy8gICAgIEl0ZW1FZGl0b3IgbV9JdGVtRWRpdG9yOwoKLy8gICAgIExpc3Q8c3RyaW5nPiBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5OwoKLy8gICAgIExpc3Q8c3RyaW5nPiBtX0F2YWlsYWJsZVdlYXBvbkF0dGFja0VmZmVjdFR5cGU7Ci8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHk7CgovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fSGl0U291bmRQcm9wczsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1N3aW5nU291bmRQcm9wczsKCi8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1BZ2lsaXR5UHJvcGVydHk7Ci8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5OwoKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1dlYXBvblN0YXRQcm9wZXJ0eTsKCi8vICAgICBbTWVudUl0ZW0oIkFzc2V0cy9DcmVhdGUvRGF0YS9XZWFwb24iLCBwcmlvcml0eSA9IC05OTkpXQovLyAgICAgc3RhdGljIHB1YmxpYyB2b2lkIENyZWF0ZVdlYXBvbigpCi8vICAgICB7Ci8vICAgICAgICAgdmFyIG5ld1dlYXBvbiA9IENyZWF0ZUluc3RhbmNlPFdlYXBvbj4oKTsKLy8gICAgICAgICBuZXdXZWFwb24uU2xvdCA9IChFcXVpcG1lbnRJdGVtLkVxdWlwbWVudFNsb3QpNjY2OwoKLy8gICAgICAgICBQcm9qZWN0V2luZG93VXRpbC5DcmVhdGVBc3NldChuZXdXZWFwb24sICJ3ZWFwb24uYXNzZXQiKTsKLy8gICAgIH0KCi8vICAgICB2b2lkIE9uRW5hYmxlKCkKLy8gICAgIHsKLy8gICAgICAgICBtX1RhcmdldCA9IHRhcmdldCBhcyBXZWFwb247Ci8vICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uRXF1aXBwZWRFZmZlY3RzKSk7Ci8vICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLkF0dGFja0VmZmVjdHMpKTsKCi8vICAgICAgICAgbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1TdHJlbmd0aCkpOwovLyAgICAgICAgIG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1BZ2lsaXR5KSk7Ci8vICAgICAgICAgbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bURlZmVuc2UpKTsKCi8vICAgICAgICAgbV9XZWFwb25TdGF0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLlN0YXRzKSk7CgovLyAgICAgICAgIG1fSGl0U291bmRQcm9wcyA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uSGl0U291bmRzKSk7Ci8vICAgICAgICAgbV9Td2luZ1NvdW5kUHJvcHMgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLlN3aW5nU291bmRzKSk7CgovLyAgICAgICAgIG1fSXRlbUVkaXRvciA9IG5ldyBJdGVtRWRpdG9yKCk7Ci8vICAgICAgICAgbV9JdGVtRWRpdG9yLkluaXQoc2VyaWFsaXplZE9iamVjdCk7CgovLyAgICAgICAgIHZhciBsb29rdXAgPSB0eXBlb2YoRWZmZWN0RGF0YSk7Ci8vICAgICAgICAgbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUgPSBTeXN0ZW0uQXBwRG9tYWluLkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpCi8vICAgICAgICAgICAgIC5TZWxlY3RNYW55KGFzc2VtYmx5ID0+IGFzc2VtYmx5LkdldFR5cGVzKCkpCi8vICAgICAgICAgICAgIC5XaGVyZSh4ID0+IHguSXNDbGFzcyAmJiAheC5Jc0Fic3RyYWN0ICYmIHguSXNTdWJjbGFzc09mKGxvb2t1cCkpCi8vICAgICAgICAgICAgIC5TZWxlY3QodHlwZSA9PiB0eXBlLk5hbWUpCi8vICAgICAgICAgICAgIC5Ub0xpc3QoKTsKCi8vICAgICAgICAgbG9va3VwID0gdHlwZW9mKEVmZmVjdERhdGEpOwovLyAgICAgICAgIG1fQXZhaWxhYmxlV2VhcG9uQXR0YWNrRWZmZWN0VHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gICAgICAgICAgICAgLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gICAgICAgICAgICAgLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gICAgICAgICAgICAgLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gICAgICAgICAgICAgLlRvTGlzdCgpOwovLyAgICAgfQoKLy8gICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIE9uSW5zcGVjdG9yR1VJKCkKLy8gICAgIHsKLy8gICAgICAgICBtX0l0ZW1FZGl0b3IuR1VJKCk7CgovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHkpOwovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eSk7Ci8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5KTsKCi8vICAgICAgICAgLy9FZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX1dlYXBvblN0YXRQcm9wZXJ0eSwgdHJ1ZSk7Ci8vICAgICAgICAgdmFyIGNoaWxkID0gbV9XZWFwb25TdGF0UHJvcGVydHkuQ29weSgpOwovLyAgICAgICAgIHZhciBkZXB0aCA9IGNoaWxkLmRlcHRoOwovLyAgICAgICAgIGNoaWxkLk5leHRWaXNpYmxlKHRydWUpOwoKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuTGFiZWxGaWVsZCgiV2VhcG9uIFN0YXRzIiwgRWRpdG9yU3R5bGVzLmJvbGRMYWJlbCk7Ci8vICAgICAgICAgd2hpbGUgKGNoaWxkLmRlcHRoID4gZGVwdGgpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChjaGlsZCwgdHJ1ZSk7Ci8vICAgICAgICAgICAgIGNoaWxkLk5leHRWaXNpYmxlKGZhbHNlKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fSGl0U291bmRQcm9wcywgdHJ1ZSk7Ci8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9Td2luZ1NvdW5kUHJvcHMsIHRydWUpOwoKLy8gICAgICAgICBpbnQgY2hvaWNlID0gRWRpdG9yR1VJTGF5b3V0LlBvcHVwKCJBZGQgbmV3IEVxdWlwbWVudCBFZmZlY3QiLCAtMSwgbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUuVG9BcnJheSgpKTsKCi8vICAgICAgICAgaWYgKGNob2ljZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGVbY2hvaWNlXSk7CgovLyAgICAgICAgICAgICBBc3NldERhdGFiYXNlLkFkZE9iamVjdFRvQXNzZXQobmV3SW5zdGFuY2UsIHRhcmdldCk7CgovLyAgICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5Lkluc2VydEFycmF5RWxlbWVudEF0SW5kZXgobV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAgICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgobV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUgLSAxKS5vYmplY3RSZWZlcmVuY2VWYWx1ZSA9IG5ld0luc3RhbmNlOwovLyAgICAgICAgIH0KCgovLyAgICAgICAgIEVkaXRvciBlZCA9IG51bGw7Ci8vICAgICAgICAgaW50IHRvRGVsZXRlID0gLTE7Ci8vICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZTsgKytpKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkJlZ2luSG9yaXpvbnRhbCgpOwovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5WZXJ0aWNhbCgpOwovLyAgICAgICAgICAgICB2YXIgaXRlbSA9IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChpKTsgICAgICAgICAgIAovLyAgICAgICAgICAgICBTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gICAgICAgICAgICAgRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gICAgICAgICAgICAgZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAgICAgICAgICAgICBpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAgICAgICAgICAgICB7Ci8vICAgICAgICAgICAgICAgICB0b0RlbGV0ZSA9IGk7Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIGlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKLy8gICAgICAgICAgICAgRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKCi8vICAgICAgICAgICAgIC8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgovLyAgICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgLy9hdHRhY2sKLy8gICAgICAgICBjaG9pY2UgPSBFZGl0b3JHVUlMYXlvdXQuUG9wdXAoIkFkZCBuZXcgV2VhcG9uIEF0dGFjayBFZmZlY3QiLCAtMSwgbV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlLlRvQXJyYXkoKSk7CgovLyAgICAgICAgIGlmIChjaG9pY2UgIT0gLTEpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICB2YXIgbmV3SW5zdGFuY2UgPSBTY3JpcHRhYmxlT2JqZWN0LkNyZWF0ZUluc3RhbmNlKG1fQXZhaWxhYmxlV2VhcG9uQXR0YWNrRWZmZWN0VHlwZVtjaG9pY2VdKTsKCi8vICAgICAgICAgICAgIEFzc2V0RGF0YWJhc2UuQWRkT2JqZWN0VG9Bc3NldChuZXdJbnN0YW5jZSwgdGFyZ2V0KTsKCi8vICAgICAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5Lkluc2VydEFycmF5RWxlbWVudEF0SW5kZXgobV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplKTsKLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUgLSAxKS5vYmplY3RSZWZlcmVuY2VWYWx1ZSA9IG5ld0luc3RhbmNlOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgdG9EZWxldGUgPSAtMTsKLy8gICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZTsgKytpKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkJlZ2luSG9yaXpvbnRhbCgpOwovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5WZXJ0aWNhbCgpOwovLyAgICAgICAgICAgICB2YXIgaXRlbSA9IG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgoaSk7ICAgICAgICAgICAKLy8gICAgICAgICAgICAgU2VyaWFsaXplZE9iamVjdCBvYmogPSBuZXcgU2VyaWFsaXplZE9iamVjdChpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlKTsKCi8vICAgICAgICAgICAgIEVkaXRvci5DcmVhdGVDYWNoZWRFZGl0b3IoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSwgbnVsbCwgcmVmIGVkKTsKCi8vICAgICAgICAgICAgIGVkLk9uSW5zcGVjdG9yR1VJKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5FbmRWZXJ0aWNhbCgpOwoKLy8gICAgICAgICAgICAgaWYgKEdVSUxheW91dC5CdXR0b24oIi0iLCBHVUlMYXlvdXQuV2lkdGgoMzIpKSkKLy8gICAgICAgICAgICAgewovLyAgICAgICAgICAgICAgICAgdG9EZWxldGUgPSBpOwovLyAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5FbmRIb3Jpem9udGFsKCk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICBpZiAodG9EZWxldGUgIT0gLTEpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICB2YXIgaXRlbSA9IG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpLm9iamVjdFJlZmVyZW5jZVZhbHVlOwovLyAgICAgICAgICAgICBEZXN0cm95SW1tZWRpYXRlKGl0ZW0sIHRydWUpOwoKLy8gICAgICAgICAgICAgLy9uZWVkIHRvIGRvIGl0IHR3aWNlLCBmaXJzdCB0aW1lIGp1c3QgbnVsbGlmeSB0aGUgZW50cnksIHNlY29uZCBhY3R1YWxseSByZW1vdmUgaXQuCi8vICAgICAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIHNlcmlhbGl6ZWRPYmplY3QuQXBwbHlNb2RpZmllZFByb3BlcnRpZXMoKTsKLy8gICAgIH0KLy8gfQovLyAjZW5kaWYAAAAAAAAAANUoAAAAAAAAAAAAAA",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1708771575.2307348"
					},
					"AQAAAAAAAAAAAAAA1SgAAAAAAADVKAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgVmVjdG9yMyA9IFVuaXR5RW5naW5lLlZlY3RvcjM7CiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CnVzaW5nIFN5c3RlbS5MaW5xOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBjYXNlIG9mIEVxdWlwbWVudEl0ZW0gZm9yIHdlYXBvbiwgYXMgdGhleSBoYXZlIGEgd2hvbGUgYXR0YWNrIHN5c3RlbSBpbiBhZGRpdGlvbi4gTGlrZSBFcXVpcG1lbnQgdGhleQoJLy8vIGNhbiBoYXZlIG1pbmltdW0gc3RhdHMgYW5kIGVxdWlwcGVkIGVmZmVjdCwgYnV0IGFsc28gaGF2ZSBhIGxpc3Qgb2YgV2VhcG9uQXR0YWNrRWZmZWN0IHRoYXQgd2lsbCBoYXZlIHRoZWlyCgkvLy8gT25BdHRhY2sgZnVuY3Rpb24gY2FsbGVkIGR1cmluZyBhIGhpdCwgYW5kIHRoZWlyIE9uUG9zdEF0dGFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgYWxsIE9uQXR0YWNrIG9mIGFsbCBlZmZlY3RzCgkvLy8gYXJlIGNhbGxlZC4KCS8vLyA8L3N1bW1hcnk+CglwdWJsaWMgY2xhc3MgV2VhcG9uIDogRXF1aXBtZW50SXRlbQoJewoJCVtTeXN0ZW0uU2VyaWFsaXphYmxlXQoJCXB1YmxpYyBzdHJ1Y3QgU3RhdAoJCXsKCQkJcHVibGljIGZsb2F0IFNwZWVkOwoJCQlwdWJsaWMgaW50IE1pbmltdW1EYW1hZ2U7CgkJCXB1YmxpYyBpbnQgTWF4aW11bURhbWFnZTsKCQkJcHVibGljIGZsb2F0IE1heFJhbmdlOwoJCQlwdWJsaWMgaW50IEFkZGl0aW9uYWxUYXJnZXRzOwoJCX0KCQlbSGVhZGVyKCJXZWFwb25TdGF0cyIpXQoJCXB1YmxpYyBTdGF0IFN0YXRzID0gbmV3IFN0YXQoKSB7IFNwZWVkID0gMS4wZiwgTWF4aW11bURhbWFnZSA9IDEsIE1pbmltdW1EYW1hZ2UgPSAxLCBNYXhSYW5nZSA9IDEsIEFkZGl0aW9uYWxUYXJnZXRzID0gMCB9OwoJCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCQlwdWJsaWMgTGlzdDxFZmZlY3REYXRhPiBBdHRhY2tFZmZlY3RzOwoJCXB1YmxpYyBTa2lsbCBXZWFwb25Ta2lsbDsKCQlwdWJsaWMgQnVsbGV0IGJ1bGxldFBiOwoJCXB1YmxpYyBUcmFuc2Zvcm0gYnVsbGV0VHJhbnM7CgoJCVtIZWFkZXIoIlNvdW5kcyIpXQoJCXB1YmxpYyBBdWRpb0NsaXBbXSBIaXRTb3VuZHM7CgkJcHVibGljIEF1ZGlvQ2xpcFtdIFN3aW5nU291bmRzOwoKCQlwdWJsaWMgdm9pZCBBdHRhY2soQ2hhcmFjdGVyRGF0YSBhdHRhY2tlciwgQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgkJewoJCQlEYW1hZ2UgZGFtYWdlID0gbmV3IERhbWFnZSh0YXJnZXQsIGF0dGFja2VyKTsKCQkJaW50IGRhbWFnZU51bSA9IFJhbmRvbS5SYW5nZShTdGF0cy5NaW5pbXVtRGFtYWdlLCBTdGF0cy5NYXhpbXVtRGFtYWdlICsgMSk7CgkJCWRhbWFnZS5BZGREYW1hZ2UoZGFtYWdlVHlwZSwgZGFtYWdlTnVtKTsKCQkJaWYgKGJ1bGxldFBiICE9IG51bGwpCgkJCXsKCQkJCVZlY3RvcjMgYnVsbGV0UG9zID0gYXR0YWNrZXIuV2VhcG9uTG9jYXRvci5wb3NpdGlvbjsKCQkJCUJ1bGxldCBidWxsZXQgPSBJbnN0YW50aWF0ZShidWxsZXRQYiwgYnVsbGV0UG9zLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpOwoJCQkJYnVsbGV0LmRhbWFnZSA9IGRhbWFnZTsKCQkJCWJ1bGxldC50YXJnZXQgPSB0YXJnZXQ7CgkJCX0KCQkJZWxzZSBkYW1hZ2UuVGFrZSgpOwoJCQkvL2ZvcmVhY2ggKHZhciB3YWUgaW4gQXR0YWNrRWZmZWN0cykKCQkJLy93YWUuT25BdHRhY2sodGFyZ2V0LCBhdHRhY2tlciwgcmVmIGF0dGFja0VmZmVjdCk7CgoJCQkvL3RhcmdldC5UYWtlRWZmZWN0KGF0dGFja0VmZmVjdCk7CgoJCQkvL2ZvcmVhY2ggKHZhciB3YWUgaW4gQXR0YWNrRWZmZWN0cykKCQkJLy93YWUuT25Qb3N0QXR0YWNrKHRhcmdldCwgYXR0YWNrZXIsIGF0dGFja0VmZmVjdCk7CgkJfQoKCQlwdWJsaWMgYm9vbCBDYW5IaXQoQ2hhcmFjdGVyRGF0YSBhdHRhY2tlciwgQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgkJewoJCQlpZiAoVmVjdG9yMy5TcXJNYWduaXR1ZGUoYXR0YWNrZXIudHJhbnNmb3JtLnBvc2l0aW9uIC0gdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbikgPCBTdGF0cy5NYXhSYW5nZSAqIFN0YXRzLk1heFJhbmdlKQoJCQl7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzYyA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCgkJCWludCBtaW5pbXVtRFBTID0gTWF0aGYuUm91bmRUb0ludChTdGF0cy5NaW5pbXVtRGFtYWdlIC8gU3RhdHMuU3BlZWQpOwoJCQlpbnQgbWF4aW11bURQUyA9IE1hdGhmLlJvdW5kVG9JbnQoU3RhdHMuTWF4aW11bURhbWFnZSAvIFN0YXRzLlNwZWVkKTsKCgkJCWRlc2MgKz0gIlxuIjsKCQkJZGVzYyArPSAkIkRhbWFnZToge1N0YXRzLk1pbmltdW1EYW1hZ2V9IC0ge1N0YXRzLk1heGltdW1EYW1hZ2V9XG4iOwoJCQlkZXNjICs9ICQiRFBTOiB7bWluaW11bURQU30gLSB7bWF4aW11bURQU31cbiI7CgkJCWRlc2MgKz0gJCJBdHRhY2sgU3BlZWQgOiB7U3RhdHMuU3BlZWR9c1xuIjsKCQkJZGVzYyArPSAkIlJhbmdlIDoge1N0YXRzLk1heFJhbmdlfW1cbiI7CgoJCQlyZXR1cm4gZGVzYzsKCQl9CgoJCXB1YmxpYyBBdWRpb0NsaXAgR2V0SGl0U291bmQoKQoJCXsKCQkJaWYgKEhpdFNvdW5kcyA9PSBudWxsIHx8IEhpdFNvdW5kcy5MZW5ndGggPT0gMCkKCQkJCXJldHVybiBTRlhNYW5hZ2VyLkdldERlZmF1bHRIaXQoKTsKCgkJCXJldHVybiBIaXRTb3VuZHNbUmFuZG9tLlJhbmdlKDAsIEhpdFNvdW5kcy5MZW5ndGgpXTsKCQl9CgoJCXB1YmxpYyBBdWRpb0NsaXAgR2V0U3dpbmdTb3VuZCgpCgkJewoJCQlpZiAoU3dpbmdTb3VuZHMgPT0gbnVsbCB8fCBTd2luZ1NvdW5kcy5MZW5ndGggPT0gMCkKCQkJCXJldHVybiBTRlhNYW5hZ2VyLkdldERlZmF1bHRTd2luZ1NvdW5kKCk7CgoJCQlyZXR1cm4gU3dpbmdTb3VuZHNbUmFuZG9tLlJhbmdlKDAsIFN3aW5nU291bmRzLkxlbmd0aCldOwoJCX0KCX0KfQoKLy8gI2lmIFVOSVRZX0VESVRPUgovLyBbQ3VzdG9tRWRpdG9yKHR5cGVvZihXZWFwb24pKV0KLy8gcHVibGljIGNsYXNzIFdlYXBvbkVkaXRvciA6IEVkaXRvcgovLyB7Ci8vICAgICBXZWFwb24gbV9UYXJnZXQ7CgovLyAgICAgSXRlbUVkaXRvciBtX0l0ZW1FZGl0b3I7CgovLyAgICAgTGlzdDxzdHJpbmc+IG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlOwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHk7CgovLyAgICAgTGlzdDxzdHJpbmc+IG1fQXZhaWxhYmxlV2VhcG9uQXR0YWNrRWZmZWN0VHlwZTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eTsKCi8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9IaXRTb3VuZFByb3BzOwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fU3dpbmdTb3VuZFByb3BzOwoKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1TdHJlbmd0aFByb3BlcnR5OwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1EZWZlbnNlUHJvcGVydHk7CgovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fV2VhcG9uU3RhdFByb3BlcnR5OwoKLy8gICAgIFtNZW51SXRlbSgiQXNzZXRzL0NyZWF0ZS9EYXRhL1dlYXBvbiIsIHByaW9yaXR5ID0gLTk5OSldCi8vICAgICBzdGF0aWMgcHVibGljIHZvaWQgQ3JlYXRlV2VhcG9uKCkKLy8gICAgIHsKLy8gICAgICAgICB2YXIgbmV3V2VhcG9uID0gQ3JlYXRlSW5zdGFuY2U8V2VhcG9uPigpOwovLyAgICAgICAgIG5ld1dlYXBvbi5TbG90ID0gKEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdCk2NjY7CgovLyAgICAgICAgIFByb2plY3RXaW5kb3dVdGlsLkNyZWF0ZUFzc2V0KG5ld1dlYXBvbiwgIndlYXBvbi5hc3NldCIpOwovLyAgICAgfQoKLy8gICAgIHZvaWQgT25FbmFibGUoKQovLyAgICAgewovLyAgICAgICAgIG1fVGFyZ2V0ID0gdGFyZ2V0IGFzIFdlYXBvbjsKLy8gICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5FcXVpcHBlZEVmZmVjdHMpKTsKLy8gICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uQXR0YWNrRWZmZWN0cykpOwoKLy8gICAgICAgICBtX01pbmltdW1TdHJlbmd0aFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bVN0cmVuZ3RoKSk7Ci8vICAgICAgICAgbV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bUFnaWxpdHkpKTsKLy8gICAgICAgICBtX01pbmltdW1EZWZlbnNlUHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtRGVmZW5zZSkpOwoKLy8gICAgICAgICBtX1dlYXBvblN0YXRQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uU3RhdHMpKTsKCi8vICAgICAgICAgbV9IaXRTb3VuZFByb3BzID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5IaXRTb3VuZHMpKTsKLy8gICAgICAgICBtX1N3aW5nU291bmRQcm9wcyA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uU3dpbmdTb3VuZHMpKTsKCi8vICAgICAgICAgbV9JdGVtRWRpdG9yID0gbmV3IEl0ZW1FZGl0b3IoKTsKLy8gICAgICAgICBtX0l0ZW1FZGl0b3IuSW5pdChzZXJpYWxpemVkT2JqZWN0KTsKCi8vICAgICAgICAgdmFyIGxvb2t1cCA9IHR5cGVvZihFZmZlY3REYXRhKTsKLy8gICAgICAgICBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gICAgICAgICAgICAgLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gICAgICAgICAgICAgLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gICAgICAgICAgICAgLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gICAgICAgICAgICAgLlRvTGlzdCgpOwoKLy8gICAgICAgICBsb29rdXAgPSB0eXBlb2YoRWZmZWN0RGF0YSk7Ci8vICAgICAgICAgbV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlID0gU3lzdGVtLkFwcERvbWFpbi5DdXJyZW50RG9tYWluLkdldEFzc2VtYmxpZXMoKQovLyAgICAgICAgICAgICAuU2VsZWN0TWFueShhc3NlbWJseSA9PiBhc3NlbWJseS5HZXRUeXBlcygpKQovLyAgICAgICAgICAgICAuV2hlcmUoeCA9PiB4LklzQ2xhc3MgJiYgIXguSXNBYnN0cmFjdCAmJiB4LklzU3ViY2xhc3NPZihsb29rdXApKQovLyAgICAgICAgICAgICAuU2VsZWN0KHR5cGUgPT4gdHlwZS5OYW1lKQovLyAgICAgICAgICAgICAuVG9MaXN0KCk7Ci8vICAgICB9CgovLyAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgT25JbnNwZWN0b3JHVUkoKQovLyAgICAgewovLyAgICAgICAgIG1fSXRlbUVkaXRvci5HVUkoKTsKCi8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSk7Ci8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5KTsKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX01pbmltdW1EZWZlbnNlUHJvcGVydHkpOwoKLy8gICAgICAgICAvL0VkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fV2VhcG9uU3RhdFByb3BlcnR5LCB0cnVlKTsKLy8gICAgICAgICB2YXIgY2hpbGQgPSBtX1dlYXBvblN0YXRQcm9wZXJ0eS5Db3B5KCk7Ci8vICAgICAgICAgdmFyIGRlcHRoID0gY2hpbGQuZGVwdGg7Ci8vICAgICAgICAgY2hpbGQuTmV4dFZpc2libGUodHJ1ZSk7CgovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5MYWJlbEZpZWxkKCJXZWFwb24gU3RhdHMiLCBFZGl0b3JTdHlsZXMuYm9sZExhYmVsKTsKLy8gICAgICAgICB3aGlsZSAoY2hpbGQuZGVwdGggPiBkZXB0aCkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKGNoaWxkLCB0cnVlKTsKLy8gICAgICAgICAgICAgY2hpbGQuTmV4dFZpc2libGUoZmFsc2UpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9IaXRTb3VuZFByb3BzLCB0cnVlKTsKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX1N3aW5nU291bmRQcm9wcywgdHJ1ZSk7CgovLyAgICAgICAgIGludCBjaG9pY2UgPSBFZGl0b3JHVUlMYXlvdXQuUG9wdXAoIkFkZCBuZXcgRXF1aXBtZW50IEVmZmVjdCIsIC0xLCBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZS5Ub0FycmF5KCkpOwoKLy8gICAgICAgICBpZiAoY2hvaWNlICE9IC0xKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgdmFyIG5ld0luc3RhbmNlID0gU2NyaXB0YWJsZU9iamVjdC5DcmVhdGVJbnN0YW5jZShtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZVtjaG9pY2VdKTsKCi8vICAgICAgICAgICAgIEFzc2V0RGF0YWJhc2UuQWRkT2JqZWN0VG9Bc3NldChuZXdJbnN0YW5jZSwgdGFyZ2V0KTsKCi8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuSW5zZXJ0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSk7Ci8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSAtIDEpLm9iamVjdFJlZmVyZW5jZVZhbHVlID0gbmV3SW5zdGFuY2U7Ci8vICAgICAgICAgfQoKCi8vICAgICAgICAgRWRpdG9yIGVkID0gbnVsbDsKLy8gICAgICAgICBpbnQgdG9EZWxldGUgPSAtMTsKLy8gICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KGkpOyAgICAgICAgICAgCi8vICAgICAgICAgICAgIFNlcmlhbGl6ZWRPYmplY3Qgb2JqID0gbmV3IFNlcmlhbGl6ZWRPYmplY3QoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSk7CgovLyAgICAgICAgICAgICBFZGl0b3IuQ3JlYXRlQ2FjaGVkRWRpdG9yKGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUsIG51bGwsIHJlZiBlZCk7CgovLyAgICAgICAgICAgICBlZC5Pbkluc3BlY3RvckdVSSgpOwovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuRW5kVmVydGljYWwoKTsKCi8vICAgICAgICAgICAgIGlmIChHVUlMYXlvdXQuQnV0dG9uKCItIiwgR1VJTGF5b3V0LldpZHRoKDMyKSkpCi8vICAgICAgICAgICAgIHsKLy8gICAgICAgICAgICAgICAgIHRvRGVsZXRlID0gaTsKLy8gICAgICAgICAgICAgfQovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuRW5kSG9yaXpvbnRhbCgpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgaWYgKHRvRGVsZXRlICE9IC0xKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgdmFyIGl0ZW0gPSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpLm9iamVjdFJlZmVyZW5jZVZhbHVlOwovLyAgICAgICAgICAgICBEZXN0cm95SW1tZWRpYXRlKGl0ZW0sIHRydWUpOwoKLy8gICAgICAgICAgICAgLy9uZWVkIHRvIGRvIGl0IHR3aWNlLCBmaXJzdCB0aW1lIGp1c3QgbnVsbGlmeSB0aGUgZW50cnksIHNlY29uZCBhY3R1YWxseSByZW1vdmUgaXQuCi8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICAvL2F0dGFjawovLyAgICAgICAgIGNob2ljZSA9IEVkaXRvckdVSUxheW91dC5Qb3B1cCgiQWRkIG5ldyBXZWFwb24gQXR0YWNrIEVmZmVjdCIsIC0xLCBtX0F2YWlsYWJsZVdlYXBvbkF0dGFja0VmZmVjdFR5cGUuVG9BcnJheSgpKTsKCi8vICAgICAgICAgaWYgKGNob2ljZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlW2Nob2ljZV0pOwoKLy8gICAgICAgICAgICAgQXNzZXREYXRhYmFzZS5BZGRPYmplY3RUb0Fzc2V0KG5ld0luc3RhbmNlLCB0YXJnZXQpOwoKLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuSW5zZXJ0QXJyYXlFbGVtZW50QXRJbmRleChtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAgICAgICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSAtIDEpLm9iamVjdFJlZmVyZW5jZVZhbHVlID0gbmV3SW5zdGFuY2U7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICB0b0RlbGV0ZSA9IC0xOwovLyAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChpKTsgICAgICAgICAgIAovLyAgICAgICAgICAgICBTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gICAgICAgICAgICAgRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gICAgICAgICAgICAgZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAgICAgICAgICAgICBpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAgICAgICAgICAgICB7Ci8vICAgICAgICAgICAgICAgICB0b0RlbGV0ZSA9IGk7Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIGlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSkub2JqZWN0UmVmZXJlbmNlVmFsdWU7Ci8vICAgICAgICAgICAgIERlc3Ryb3lJbW1lZGlhdGUoaXRlbSwgdHJ1ZSk7CgovLyAgICAgICAgICAgICAvL25lZWQgdG8gZG8gaXQgdHdpY2UsIGZpcnN0IHRpbWUganVzdCBudWxsaWZ5IHRoZSBlbnRyeSwgc2Vjb25kIGFjdHVhbGx5IHJlbW92ZSBpdC4KLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgc2VyaWFsaXplZE9iamVjdC5BcHBseU1vZGlmaWVkUHJvcGVydGllcygpOwovLyAgICAgfQovLyB9Ci8vICNlbmRpZg",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAADVKAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgVmVjdG9yMyA9IFVuaXR5RW5naW5lLlZlY3RvcjM7CiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CnVzaW5nIFN5c3RlbS5MaW5xOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBjYXNlIG9mIEVxdWlwbWVudEl0ZW0gZm9yIHdlYXBvbiwgYXMgdGhleSBoYXZlIGEgd2hvbGUgYXR0YWNrIHN5c3RlbSBpbiBhZGRpdGlvbi4gTGlrZSBFcXVpcG1lbnQgdGhleQoJLy8vIGNhbiBoYXZlIG1pbmltdW0gc3RhdHMgYW5kIGVxdWlwcGVkIGVmZmVjdCwgYnV0IGFsc28gaGF2ZSBhIGxpc3Qgb2YgV2VhcG9uQXR0YWNrRWZmZWN0IHRoYXQgd2lsbCBoYXZlIHRoZWlyCgkvLy8gT25BdHRhY2sgZnVuY3Rpb24gY2FsbGVkIGR1cmluZyBhIGhpdCwgYW5kIHRoZWlyIE9uUG9zdEF0dGFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgYWxsIE9uQXR0YWNrIG9mIGFsbCBlZmZlY3RzCgkvLy8gYXJlIGNhbGxlZC4KCS8vLyA8L3N1bW1hcnk+CglwdWJsaWMgY2xhc3MgV2VhcG9uIDogRXF1aXBtZW50SXRlbQoJewoJCVtTeXN0ZW0uU2VyaWFsaXphYmxlXQoJCXB1YmxpYyBzdHJ1Y3QgU3RhdAoJCXsKCQkJcHVibGljIGZsb2F0IFNwZWVkOwoJCQlwdWJsaWMgaW50IE1pbmltdW1EYW1hZ2U7CgkJCXB1YmxpYyBpbnQgTWF4aW11bURhbWFnZTsKCQkJcHVibGljIGZsb2F0IE1heFJhbmdlOwoJCQlwdWJsaWMgaW50IEFkZGl0aW9uYWxUYXJnZXRzOwoJCX0KCQlbSGVhZGVyKCJXZWFwb25TdGF0cyIpXQoJCXB1YmxpYyBTdGF0IFN0YXRzID0gbmV3IFN0YXQoKSB7IFNwZWVkID0gMS4wZiwgTWF4aW11bURhbWFnZSA9IDEsIE1pbmltdW1EYW1hZ2UgPSAxLCBNYXhSYW5nZSA9IDEsIEFkZGl0aW9uYWxUYXJnZXRzID0gMCB9OwoJCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCQlwdWJsaWMgTGlzdDxFZmZlY3REYXRhPiBBdHRhY2tFZmZlY3RzOwoJCXB1YmxpYyBTa2lsbCBXZWFwb25Ta2lsbDsKCQlwdWJsaWMgQnVsbGV0IGJ1bGxldFBiOwoJCXB1YmxpYyBUcmFuc2Zvcm0gYnVsbGV0VHJhbnM7CgoJCVtIZWFkZXIoIlNvdW5kcyIpXQoJCXB1YmxpYyBBdWRpb0NsaXBbXSBIaXRTb3VuZHM7CgkJcHVibGljIEF1ZGlvQ2xpcFtdIFN3aW5nU291bmRzOwoKCQlwdWJsaWMgdm9pZCBBdHRhY2soQ2hhcmFjdGVyRGF0YSBhdHRhY2tlciwgQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgkJewoJCQlEYW1hZ2UgZGFtYWdlID0gbmV3IERhbWFnZSh0YXJnZXQsIGF0dGFja2VyKTsKCQkJaW50IGRhbWFnZU51bSA9IFJhbmRvbS5SYW5nZShTdGF0cy5NaW5pbXVtRGFtYWdlLCBTdGF0cy5NYXhpbXVtRGFtYWdlICsgMSk7CgkJCWRhbWFnZS5BZGREYW1hZ2UoZGFtYWdlVHlwZSwgZGFtYWdlTnVtKTsKCQkJaWYgKGJ1bGxldFBiICE9IG51bGwpCgkJCXsKCQkJCVZlY3RvcjMgYnVsbGV0UG9zID0gYXR0YWNrZXIuV2VhcG9uTG9jYXRvci5wb3NpdGlvbjsKCQkJCUJ1bGxldCBidWxsZXQgPSBJbnN0YW50aWF0ZShidWxsZXRQYiwgYnVsbGV0UG9zLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpOwoJCQkJYnVsbGV0LmRhbWFnZSA9IGRhbWFnZTsKCQkJCWJ1bGxldC50YXJnZXQgPSB0YXJnZXQ7CgkJCX0KCQkJZWxzZSBkYW1hZ2UuVGFrZSgpOwoJCQkvL2ZvcmVhY2ggKHZhciB3YWUgaW4gQXR0YWNrRWZmZWN0cykKCQkJLy93YWUuT25BdHRhY2sodGFyZ2V0LCBhdHRhY2tlciwgcmVmIGF0dGFja0VmZmVjdCk7CgoJCQkvL3RhcmdldC5UYWtlRWZmZWN0KGF0dGFja0VmZmVjdCk7CgoJCQkvL2ZvcmVhY2ggKHZhciB3YWUgaW4gQXR0YWNrRWZmZWN0cykKCQkJLy93YWUuT25Qb3N0QXR0YWNrKHRhcmdldCwgYXR0YWNrZXIsIGF0dGFja0VmZmVjdCk7CgkJfQoKCQlwdWJsaWMgYm9vbCBDYW5IaXQoQ2hhcmFjdGVyRGF0YSBhdHRhY2tlciwgQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgkJewoJCQlpZiAoVmVjdG9yMy5TcXJNYWduaXR1ZGUoYXR0YWNrZXIudHJhbnNmb3JtLnBvc2l0aW9uIC0gdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbikgPCBTdGF0cy5NYXhSYW5nZSAqIFN0YXRzLk1heFJhbmdlKQoJCQl7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzYyA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCgkJCWludCBtaW5pbXVtRFBTID0gTWF0aGYuUm91bmRUb0ludChTdGF0cy5NaW5pbXVtRGFtYWdlIC8gU3RhdHMuU3BlZWQpOwoJCQlpbnQgbWF4aW11bURQUyA9IE1hdGhmLlJvdW5kVG9JbnQoU3RhdHMuTWF4aW11bURhbWFnZSAvIFN0YXRzLlNwZWVkKTsKCgkJCWRlc2MgKz0gIlxuIjsKCQkJZGVzYyArPSAkIkRhbWFnZToge1N0YXRzLk1pbmltdW1EYW1hZ2V9IC0ge1N0YXRzLk1heGltdW1EYW1hZ2V9XG4iOwoJCQlkZXNjICs9ICQiRFBTOiB7bWluaW11bURQU30gLSB7bWF4aW11bURQU31cbiI7CgkJCWRlc2MgKz0gJCJBdHRhY2sgU3BlZWQgOiB7U3RhdHMuU3BlZWR9c1xuIjsKCQkJZGVzYyArPSAkIlJhbmdlIDoge1N0YXRzLk1heFJhbmdlfW1cbiI7CgoJCQlyZXR1cm4gZGVzYzsKCQl9CgoJCXB1YmxpYyBBdWRpb0NsaXAgR2V0SGl0U291bmQoKQoJCXsKCQkJaWYgKEhpdFNvdW5kcyA9PSBudWxsIHx8IEhpdFNvdW5kcy5MZW5ndGggPT0gMCkKCQkJCXJldHVybiBTRlhNYW5hZ2VyLkdldERlZmF1bHRIaXQoKTsKCgkJCXJldHVybiBIaXRTb3VuZHNbUmFuZG9tLlJhbmdlKDAsIEhpdFNvdW5kcy5MZW5ndGgpXTsKCQl9CgoJCXB1YmxpYyBBdWRpb0NsaXAgR2V0U3dpbmdTb3VuZCgpCgkJewoJCQlpZiAoU3dpbmdTb3VuZHMgPT0gbnVsbCB8fCBTd2luZ1NvdW5kcy5MZW5ndGggPT0gMCkKCQkJCXJldHVybiBTRlhNYW5hZ2VyLkdldERlZmF1bHRTd2luZ1NvdW5kKCk7CgoJCQlyZXR1cm4gU3dpbmdTb3VuZHNbUmFuZG9tLlJhbmdlKDAsIFN3aW5nU291bmRzLkxlbmd0aCldOwoJCX0KCX0KfQoKLy8gI2lmIFVOSVRZX0VESVRPUgovLyBbQ3VzdG9tRWRpdG9yKHR5cGVvZihXZWFwb24pKV0KLy8gcHVibGljIGNsYXNzIFdlYXBvbkVkaXRvciA6IEVkaXRvcgovLyB7Ci8vICAgICBXZWFwb24gbV9UYXJnZXQ7CgovLyAgICAgSXRlbUVkaXRvciBtX0l0ZW1FZGl0b3I7CgovLyAgICAgTGlzdDxzdHJpbmc+IG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlOwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHk7CgovLyAgICAgTGlzdDxzdHJpbmc+IG1fQXZhaWxhYmxlV2VhcG9uQXR0YWNrRWZmZWN0VHlwZTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eTsKCi8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9IaXRTb3VuZFByb3BzOwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fU3dpbmdTb3VuZFByb3BzOwoKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1TdHJlbmd0aFByb3BlcnR5OwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1EZWZlbnNlUHJvcGVydHk7CgovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fV2VhcG9uU3RhdFByb3BlcnR5OwoKLy8gICAgIFtNZW51SXRlbSgiQXNzZXRzL0NyZWF0ZS9EYXRhL1dlYXBvbiIsIHByaW9yaXR5ID0gLTk5OSldCi8vICAgICBzdGF0aWMgcHVibGljIHZvaWQgQ3JlYXRlV2VhcG9uKCkKLy8gICAgIHsKLy8gICAgICAgICB2YXIgbmV3V2VhcG9uID0gQ3JlYXRlSW5zdGFuY2U8V2VhcG9uPigpOwovLyAgICAgICAgIG5ld1dlYXBvbi5TbG90ID0gKEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdCk2NjY7CgovLyAgICAgICAgIFByb2plY3RXaW5kb3dVdGlsLkNyZWF0ZUFzc2V0KG5ld1dlYXBvbiwgIndlYXBvbi5hc3NldCIpOwovLyAgICAgfQoKLy8gICAgIHZvaWQgT25FbmFibGUoKQovLyAgICAgewovLyAgICAgICAgIG1fVGFyZ2V0ID0gdGFyZ2V0IGFzIFdlYXBvbjsKLy8gICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5FcXVpcHBlZEVmZmVjdHMpKTsKLy8gICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uQXR0YWNrRWZmZWN0cykpOwoKLy8gICAgICAgICBtX01pbmltdW1TdHJlbmd0aFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bVN0cmVuZ3RoKSk7Ci8vICAgICAgICAgbV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bUFnaWxpdHkpKTsKLy8gICAgICAgICBtX01pbmltdW1EZWZlbnNlUHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtRGVmZW5zZSkpOwoKLy8gICAgICAgICBtX1dlYXBvblN0YXRQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uU3RhdHMpKTsKCi8vICAgICAgICAgbV9IaXRTb3VuZFByb3BzID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5IaXRTb3VuZHMpKTsKLy8gICAgICAgICBtX1N3aW5nU291bmRQcm9wcyA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uU3dpbmdTb3VuZHMpKTsKCi8vICAgICAgICAgbV9JdGVtRWRpdG9yID0gbmV3IEl0ZW1FZGl0b3IoKTsKLy8gICAgICAgICBtX0l0ZW1FZGl0b3IuSW5pdChzZXJpYWxpemVkT2JqZWN0KTsKCi8vICAgICAgICAgdmFyIGxvb2t1cCA9IHR5cGVvZihFZmZlY3REYXRhKTsKLy8gICAgICAgICBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gICAgICAgICAgICAgLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gICAgICAgICAgICAgLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gICAgICAgICAgICAgLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gICAgICAgICAgICAgLlRvTGlzdCgpOwoKLy8gICAgICAgICBsb29rdXAgPSB0eXBlb2YoRWZmZWN0RGF0YSk7Ci8vICAgICAgICAgbV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlID0gU3lzdGVtLkFwcERvbWFpbi5DdXJyZW50RG9tYWluLkdldEFzc2VtYmxpZXMoKQovLyAgICAgICAgICAgICAuU2VsZWN0TWFueShhc3NlbWJseSA9PiBhc3NlbWJseS5HZXRUeXBlcygpKQovLyAgICAgICAgICAgICAuV2hlcmUoeCA9PiB4LklzQ2xhc3MgJiYgIXguSXNBYnN0cmFjdCAmJiB4LklzU3ViY2xhc3NPZihsb29rdXApKQovLyAgICAgICAgICAgICAuU2VsZWN0KHR5cGUgPT4gdHlwZS5OYW1lKQovLyAgICAgICAgICAgICAuVG9MaXN0KCk7Ci8vICAgICB9CgovLyAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgT25JbnNwZWN0b3JHVUkoKQovLyAgICAgewovLyAgICAgICAgIG1fSXRlbUVkaXRvci5HVUkoKTsKCi8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSk7Ci8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5KTsKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX01pbmltdW1EZWZlbnNlUHJvcGVydHkpOwoKLy8gICAgICAgICAvL0VkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fV2VhcG9uU3RhdFByb3BlcnR5LCB0cnVlKTsKLy8gICAgICAgICB2YXIgY2hpbGQgPSBtX1dlYXBvblN0YXRQcm9wZXJ0eS5Db3B5KCk7Ci8vICAgICAgICAgdmFyIGRlcHRoID0gY2hpbGQuZGVwdGg7Ci8vICAgICAgICAgY2hpbGQuTmV4dFZpc2libGUodHJ1ZSk7CgovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5MYWJlbEZpZWxkKCJXZWFwb24gU3RhdHMiLCBFZGl0b3JTdHlsZXMuYm9sZExhYmVsKTsKLy8gICAgICAgICB3aGlsZSAoY2hpbGQuZGVwdGggPiBkZXB0aCkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKGNoaWxkLCB0cnVlKTsKLy8gICAgICAgICAgICAgY2hpbGQuTmV4dFZpc2libGUoZmFsc2UpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9IaXRTb3VuZFByb3BzLCB0cnVlKTsKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX1N3aW5nU291bmRQcm9wcywgdHJ1ZSk7CgovLyAgICAgICAgIGludCBjaG9pY2UgPSBFZGl0b3JHVUlMYXlvdXQuUG9wdXAoIkFkZCBuZXcgRXF1aXBtZW50IEVmZmVjdCIsIC0xLCBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZS5Ub0FycmF5KCkpOwoKLy8gICAgICAgICBpZiAoY2hvaWNlICE9IC0xKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgdmFyIG5ld0luc3RhbmNlID0gU2NyaXB0YWJsZU9iamVjdC5DcmVhdGVJbnN0YW5jZShtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZVtjaG9pY2VdKTsKCi8vICAgICAgICAgICAgIEFzc2V0RGF0YWJhc2UuQWRkT2JqZWN0VG9Bc3NldChuZXdJbnN0YW5jZSwgdGFyZ2V0KTsKCi8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuSW5zZXJ0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSk7Ci8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSAtIDEpLm9iamVjdFJlZmVyZW5jZVZhbHVlID0gbmV3SW5zdGFuY2U7Ci8vICAgICAgICAgfQoKCi8vICAgICAgICAgRWRpdG9yIGVkID0gbnVsbDsKLy8gICAgICAgICBpbnQgdG9EZWxldGUgPSAtMTsKLy8gICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KGkpOyAgICAgICAgICAgCi8vICAgICAgICAgICAgIFNlcmlhbGl6ZWRPYmplY3Qgb2JqID0gbmV3IFNlcmlhbGl6ZWRPYmplY3QoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSk7CgovLyAgICAgICAgICAgICBFZGl0b3IuQ3JlYXRlQ2FjaGVkRWRpdG9yKGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUsIG51bGwsIHJlZiBlZCk7CgovLyAgICAgICAgICAgICBlZC5Pbkluc3BlY3RvckdVSSgpOwovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuRW5kVmVydGljYWwoKTsKCi8vICAgICAgICAgICAgIGlmIChHVUlMYXlvdXQuQnV0dG9uKCItIiwgR1VJTGF5b3V0LldpZHRoKDMyKSkpCi8vICAgICAgICAgICAgIHsKLy8gICAgICAgICAgICAgICAgIHRvRGVsZXRlID0gaTsKLy8gICAgICAgICAgICAgfQovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuRW5kSG9yaXpvbnRhbCgpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgaWYgKHRvRGVsZXRlICE9IC0xKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgdmFyIGl0ZW0gPSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpLm9iamVjdFJlZmVyZW5jZVZhbHVlOwovLyAgICAgICAgICAgICBEZXN0cm95SW1tZWRpYXRlKGl0ZW0sIHRydWUpOwoKLy8gICAgICAgICAgICAgLy9uZWVkIHRvIGRvIGl0IHR3aWNlLCBmaXJzdCB0aW1lIGp1c3QgbnVsbGlmeSB0aGUgZW50cnksIHNlY29uZCBhY3R1YWxseSByZW1vdmUgaXQuCi8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICAvL2F0dGFjawovLyAgICAgICAgIGNob2ljZSA9IEVkaXRvckdVSUxheW91dC5Qb3B1cCgiQWRkIG5ldyBXZWFwb24gQXR0YWNrIEVmZmVjdCIsIC0xLCBtX0F2YWlsYWJsZVdlYXBvbkF0dGFja0VmZmVjdFR5cGUuVG9BcnJheSgpKTsKCi8vICAgICAgICAgaWYgKGNob2ljZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlW2Nob2ljZV0pOwoKLy8gICAgICAgICAgICAgQXNzZXREYXRhYmFzZS5BZGRPYmplY3RUb0Fzc2V0KG5ld0luc3RhbmNlLCB0YXJnZXQpOwoKLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuSW5zZXJ0QXJyYXlFbGVtZW50QXRJbmRleChtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAgICAgICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSAtIDEpLm9iamVjdFJlZmVyZW5jZVZhbHVlID0gbmV3SW5zdGFuY2U7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICB0b0RlbGV0ZSA9IC0xOwovLyAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChpKTsgICAgICAgICAgIAovLyAgICAgICAgICAgICBTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gICAgICAgICAgICAgRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gICAgICAgICAgICAgZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAgICAgICAgICAgICBpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAgICAgICAgICAgICB7Ci8vICAgICAgICAgICAgICAgICB0b0RlbGV0ZSA9IGk7Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIGlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSkub2JqZWN0UmVmZXJlbmNlVmFsdWU7Ci8vICAgICAgICAgICAgIERlc3Ryb3lJbW1lZGlhdGUoaXRlbSwgdHJ1ZSk7CgovLyAgICAgICAgICAgICAvL25lZWQgdG8gZG8gaXQgdHdpY2UsIGZpcnN0IHRpbWUganVzdCBudWxsaWZ5IHRoZSBlbnRyeSwgc2Vjb25kIGFjdHVhbGx5IHJlbW92ZSBpdC4KLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgc2VyaWFsaXplZE9iamVjdC5BcHBseU1vZGlmaWVkUHJvcGVydGllcygpOwovLyAgICAgfQovLyB9Ci8vICNlbmRpZgAAAAAAAAAA2ygAAAAAAAAAAAAAAAAAAAAAAADbKAAAAAAAAAAAAAAAAAAAAAAAANsoAAAAAAAAAAAAAA",
					"CQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAADbKAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgVmVjdG9yMyA9IFVuaXR5RW5naW5lLlZlY3RvcjM7CiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CnVzaW5nIFN5c3RlbS5MaW5xOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBjYXNlIG9mIEVxdWlwbWVudEl0ZW0gZm9yIHdlYXBvbiwgYXMgdGhleSBoYXZlIGEgd2hvbGUgYXR0YWNrIHN5c3RlbSBpbiBhZGRpdGlvbi4gTGlrZSBFcXVpcG1lbnQgdGhleQoJLy8vIGNhbiBoYXZlIG1pbmltdW0gc3RhdHMgYW5kIGVxdWlwcGVkIGVmZmVjdCwgYnV0IGFsc28gaGF2ZSBhIGxpc3Qgb2YgV2VhcG9uQXR0YWNrRWZmZWN0IHRoYXQgd2lsbCBoYXZlIHRoZWlyCgkvLy8gT25BdHRhY2sgZnVuY3Rpb24gY2FsbGVkIGR1cmluZyBhIGhpdCwgYW5kIHRoZWlyIE9uUG9zdEF0dGFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgYWxsIE9uQXR0YWNrIG9mIGFsbCBlZmZlY3RzCgkvLy8gYXJlIGNhbGxlZC4KCS8vLyA8L3N1bW1hcnk+CglwdWJsaWMgY2xhc3MgV2VhcG9uIDogRXF1aXBtZW50SXRlbQoJewoJCVtTeXN0ZW0uU2VyaWFsaXphYmxlXQoJCXB1YmxpYyBzdHJ1Y3QgU3RhdAoJCXsKCQkJcHVibGljIGZsb2F0IFNwZWVkOwoJCQlwdWJsaWMgaW50IE1pbmltdW1EYW1hZ2U7CgkJCXB1YmxpYyBpbnQgTWF4aW11bURhbWFnZTsKCQkJcHVibGljIGZsb2F0IE1heFJhbmdlOwoJCQlwdWJsaWMgaW50IEFkZGl0aW9uYWxUYXJnZXRzOwoJCX0KCQlbSGVhZGVyKCJXZWFwb25TdGF0cyIpXQoJCXB1YmxpYyBTdGF0IFN0YXRzID0gbmV3IFN0YXQoKSB7IFNwZWVkID0gMS4wZiwgTWF4aW11bURhbWFnZSA9IDEsIE1pbmltdW1EYW1hZ2UgPSAxLCBNYXhSYW5nZSA9IDEsIEFkZGl0aW9uYWxUYXJnZXRzID0gMCB9OwoJCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCQlwdWJsaWMgTGlzdDxFZmZlY3REYXRhPiBBdHRhY2tFZmZlY3RzOwoJCXB1YmxpYyBTa2lsbCBXZWFwb25Ta2lsbDsKCQlwdWJsaWMgQnVsbGV0IGJ1bGxldFBiOwoJCXB1YmxpYyBUcmFuc2Zvcm0gYnVsbGV0VHJhbnM7CgoJCVtIZWFkZXIoIlNvdW5kcyIpXQoJCXB1YmxpYyBBdWRpb0NsaXBbXSBIaXRTb3VuZHM7CgkJcHVibGljIEF1ZGlvQ2xpcFtdIFN3aW5nU291bmRzOwoKCQlwdWJsaWMgdm9pZCBBdHRhY2soQ2hhcmFjdGVyRGF0YSBhdHRhY2tlciwgQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgkJewoJCQlEYW1hZ2UgZGFtYWdlID0gbmV3IERhbWFnZSh0YXJnZXQsIGF0dGFja2VyKTsKCQkJaW50IGRhbWFnZU51bSA9IFJhbmRvbS5SYW5nZShTdGF0cy5NaW5pbXVtRGFtYWdlLCBTdGF0cy5NYXhpbXVtRGFtYWdlICsgMSk7CgkJCWRhbWFnZS5BZGREYW1hZ2UoZGFtYWdlVHlwZSwgZGFtYWdlTnVtKTsKCQkJaWYgKGJ1bGxldFBiICE9IG51bGwpCgkJCXsKCQkJCVZlY3RvcjMgYnVsbGV0UG9zID0gYXR0YWNrZXIuV2VhcG9uTG9jYXRvci5wb3NpdGlvbjsKCQkJCUJ1bGxldCBidWxsZXQgPSBJbnN0YW50aWF0ZShidWxsZXRQYiwgYnVsbGV0UG9zLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpOwoJCQkJYnVsbGV0LmRhbWFnZSA9IGRhbWFnZTsKCQkJCWJ1bGxldC50YXJnZXQgPSB0YXJnZXQ7CgkJCX0KCQkJZWxzZSBkYW1hZ2UuVGFrZURhbWFnZSgpOwoJCQkvL2ZvcmVhY2ggKHZhciB3YWUgaW4gQXR0YWNrRWZmZWN0cykKCQkJLy93YWUuT25BdHRhY2sodGFyZ2V0LCBhdHRhY2tlciwgcmVmIGF0dGFja0VmZmVjdCk7CgoJCQkvL3RhcmdldC5UYWtlRWZmZWN0KGF0dGFja0VmZmVjdCk7CgoJCQkvL2ZvcmVhY2ggKHZhciB3YWUgaW4gQXR0YWNrRWZmZWN0cykKCQkJLy93YWUuT25Qb3N0QXR0YWNrKHRhcmdldCwgYXR0YWNrZXIsIGF0dGFja0VmZmVjdCk7CgkJfQoKCQlwdWJsaWMgYm9vbCBDYW5IaXQoQ2hhcmFjdGVyRGF0YSBhdHRhY2tlciwgQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgkJewoJCQlpZiAoVmVjdG9yMy5TcXJNYWduaXR1ZGUoYXR0YWNrZXIudHJhbnNmb3JtLnBvc2l0aW9uIC0gdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbikgPCBTdGF0cy5NYXhSYW5nZSAqIFN0YXRzLk1heFJhbmdlKQoJCQl7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzYyA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCgkJCWludCBtaW5pbXVtRFBTID0gTWF0aGYuUm91bmRUb0ludChTdGF0cy5NaW5pbXVtRGFtYWdlIC8gU3RhdHMuU3BlZWQpOwoJCQlpbnQgbWF4aW11bURQUyA9IE1hdGhmLlJvdW5kVG9JbnQoU3RhdHMuTWF4aW11bURhbWFnZSAvIFN0YXRzLlNwZWVkKTsKCgkJCWRlc2MgKz0gIlxuIjsKCQkJZGVzYyArPSAkIkRhbWFnZToge1N0YXRzLk1pbmltdW1EYW1hZ2V9IC0ge1N0YXRzLk1heGltdW1EYW1hZ2V9XG4iOwoJCQlkZXNjICs9ICQiRFBTOiB7bWluaW11bURQU30gLSB7bWF4aW11bURQU31cbiI7CgkJCWRlc2MgKz0gJCJBdHRhY2sgU3BlZWQgOiB7U3RhdHMuU3BlZWR9c1xuIjsKCQkJZGVzYyArPSAkIlJhbmdlIDoge1N0YXRzLk1heFJhbmdlfW1cbiI7CgoJCQlyZXR1cm4gZGVzYzsKCQl9CgoJCXB1YmxpYyBBdWRpb0NsaXAgR2V0SGl0U291bmQoKQoJCXsKCQkJaWYgKEhpdFNvdW5kcyA9PSBudWxsIHx8IEhpdFNvdW5kcy5MZW5ndGggPT0gMCkKCQkJCXJldHVybiBTRlhNYW5hZ2VyLkdldERlZmF1bHRIaXQoKTsKCgkJCXJldHVybiBIaXRTb3VuZHNbUmFuZG9tLlJhbmdlKDAsIEhpdFNvdW5kcy5MZW5ndGgpXTsKCQl9CgoJCXB1YmxpYyBBdWRpb0NsaXAgR2V0U3dpbmdTb3VuZCgpCgkJewoJCQlpZiAoU3dpbmdTb3VuZHMgPT0gbnVsbCB8fCBTd2luZ1NvdW5kcy5MZW5ndGggPT0gMCkKCQkJCXJldHVybiBTRlhNYW5hZ2VyLkdldERlZmF1bHRTd2luZ1NvdW5kKCk7CgoJCQlyZXR1cm4gU3dpbmdTb3VuZHNbUmFuZG9tLlJhbmdlKDAsIFN3aW5nU291bmRzLkxlbmd0aCldOwoJCX0KCX0KfQoKLy8gI2lmIFVOSVRZX0VESVRPUgovLyBbQ3VzdG9tRWRpdG9yKHR5cGVvZihXZWFwb24pKV0KLy8gcHVibGljIGNsYXNzIFdlYXBvbkVkaXRvciA6IEVkaXRvcgovLyB7Ci8vICAgICBXZWFwb24gbV9UYXJnZXQ7CgovLyAgICAgSXRlbUVkaXRvciBtX0l0ZW1FZGl0b3I7CgovLyAgICAgTGlzdDxzdHJpbmc+IG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlOwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHk7CgovLyAgICAgTGlzdDxzdHJpbmc+IG1fQXZhaWxhYmxlV2VhcG9uQXR0YWNrRWZmZWN0VHlwZTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eTsKCi8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9IaXRTb3VuZFByb3BzOwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fU3dpbmdTb3VuZFByb3BzOwoKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1TdHJlbmd0aFByb3BlcnR5OwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1EZWZlbnNlUHJvcGVydHk7CgovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fV2VhcG9uU3RhdFByb3BlcnR5OwoKLy8gICAgIFtNZW51SXRlbSgiQXNzZXRzL0NyZWF0ZS9EYXRhL1dlYXBvbiIsIHByaW9yaXR5ID0gLTk5OSldCi8vICAgICBzdGF0aWMgcHVibGljIHZvaWQgQ3JlYXRlV2VhcG9uKCkKLy8gICAgIHsKLy8gICAgICAgICB2YXIgbmV3V2VhcG9uID0gQ3JlYXRlSW5zdGFuY2U8V2VhcG9uPigpOwovLyAgICAgICAgIG5ld1dlYXBvbi5TbG90ID0gKEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdCk2NjY7CgovLyAgICAgICAgIFByb2plY3RXaW5kb3dVdGlsLkNyZWF0ZUFzc2V0KG5ld1dlYXBvbiwgIndlYXBvbi5hc3NldCIpOwovLyAgICAgfQoKLy8gICAgIHZvaWQgT25FbmFibGUoKQovLyAgICAgewovLyAgICAgICAgIG1fVGFyZ2V0ID0gdGFyZ2V0IGFzIFdlYXBvbjsKLy8gICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5FcXVpcHBlZEVmZmVjdHMpKTsKLy8gICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uQXR0YWNrRWZmZWN0cykpOwoKLy8gICAgICAgICBtX01pbmltdW1TdHJlbmd0aFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bVN0cmVuZ3RoKSk7Ci8vICAgICAgICAgbV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bUFnaWxpdHkpKTsKLy8gICAgICAgICBtX01pbmltdW1EZWZlbnNlUHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtRGVmZW5zZSkpOwoKLy8gICAgICAgICBtX1dlYXBvblN0YXRQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uU3RhdHMpKTsKCi8vICAgICAgICAgbV9IaXRTb3VuZFByb3BzID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5IaXRTb3VuZHMpKTsKLy8gICAgICAgICBtX1N3aW5nU291bmRQcm9wcyA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uU3dpbmdTb3VuZHMpKTsKCi8vICAgICAgICAgbV9JdGVtRWRpdG9yID0gbmV3IEl0ZW1FZGl0b3IoKTsKLy8gICAgICAgICBtX0l0ZW1FZGl0b3IuSW5pdChzZXJpYWxpemVkT2JqZWN0KTsKCi8vICAgICAgICAgdmFyIGxvb2t1cCA9IHR5cGVvZihFZmZlY3REYXRhKTsKLy8gICAgICAgICBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gICAgICAgICAgICAgLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gICAgICAgICAgICAgLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gICAgICAgICAgICAgLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gICAgICAgICAgICAgLlRvTGlzdCgpOwoKLy8gICAgICAgICBsb29rdXAgPSB0eXBlb2YoRWZmZWN0RGF0YSk7Ci8vICAgICAgICAgbV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlID0gU3lzdGVtLkFwcERvbWFpbi5DdXJyZW50RG9tYWluLkdldEFzc2VtYmxpZXMoKQovLyAgICAgICAgICAgICAuU2VsZWN0TWFueShhc3NlbWJseSA9PiBhc3NlbWJseS5HZXRUeXBlcygpKQovLyAgICAgICAgICAgICAuV2hlcmUoeCA9PiB4LklzQ2xhc3MgJiYgIXguSXNBYnN0cmFjdCAmJiB4LklzU3ViY2xhc3NPZihsb29rdXApKQovLyAgICAgICAgICAgICAuU2VsZWN0KHR5cGUgPT4gdHlwZS5OYW1lKQovLyAgICAgICAgICAgICAuVG9MaXN0KCk7Ci8vICAgICB9CgovLyAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgT25JbnNwZWN0b3JHVUkoKQovLyAgICAgewovLyAgICAgICAgIG1fSXRlbUVkaXRvci5HVUkoKTsKCi8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSk7Ci8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5KTsKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX01pbmltdW1EZWZlbnNlUHJvcGVydHkpOwoKLy8gICAgICAgICAvL0VkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fV2VhcG9uU3RhdFByb3BlcnR5LCB0cnVlKTsKLy8gICAgICAgICB2YXIgY2hpbGQgPSBtX1dlYXBvblN0YXRQcm9wZXJ0eS5Db3B5KCk7Ci8vICAgICAgICAgdmFyIGRlcHRoID0gY2hpbGQuZGVwdGg7Ci8vICAgICAgICAgY2hpbGQuTmV4dFZpc2libGUodHJ1ZSk7CgovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5MYWJlbEZpZWxkKCJXZWFwb24gU3RhdHMiLCBFZGl0b3JTdHlsZXMuYm9sZExhYmVsKTsKLy8gICAgICAgICB3aGlsZSAoY2hpbGQuZGVwdGggPiBkZXB0aCkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKGNoaWxkLCB0cnVlKTsKLy8gICAgICAgICAgICAgY2hpbGQuTmV4dFZpc2libGUoZmFsc2UpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9IaXRTb3VuZFByb3BzLCB0cnVlKTsKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX1N3aW5nU291bmRQcm9wcywgdHJ1ZSk7CgovLyAgICAgICAgIGludCBjaG9pY2UgPSBFZGl0b3JHVUlMYXlvdXQuUG9wdXAoIkFkZCBuZXcgRXF1aXBtZW50IEVmZmVjdCIsIC0xLCBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZS5Ub0FycmF5KCkpOwoKLy8gICAgICAgICBpZiAoY2hvaWNlICE9IC0xKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgdmFyIG5ld0luc3RhbmNlID0gU2NyaXB0YWJsZU9iamVjdC5DcmVhdGVJbnN0YW5jZShtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZVtjaG9pY2VdKTsKCi8vICAgICAgICAgICAgIEFzc2V0RGF0YWJhc2UuQWRkT2JqZWN0VG9Bc3NldChuZXdJbnN0YW5jZSwgdGFyZ2V0KTsKCi8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuSW5zZXJ0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSk7Ci8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSAtIDEpLm9iamVjdFJlZmVyZW5jZVZhbHVlID0gbmV3SW5zdGFuY2U7Ci8vICAgICAgICAgfQoKCi8vICAgICAgICAgRWRpdG9yIGVkID0gbnVsbDsKLy8gICAgICAgICBpbnQgdG9EZWxldGUgPSAtMTsKLy8gICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KGkpOyAgICAgICAgICAgCi8vICAgICAgICAgICAgIFNlcmlhbGl6ZWRPYmplY3Qgb2JqID0gbmV3IFNlcmlhbGl6ZWRPYmplY3QoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSk7CgovLyAgICAgICAgICAgICBFZGl0b3IuQ3JlYXRlQ2FjaGVkRWRpdG9yKGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUsIG51bGwsIHJlZiBlZCk7CgovLyAgICAgICAgICAgICBlZC5Pbkluc3BlY3RvckdVSSgpOwovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuRW5kVmVydGljYWwoKTsKCi8vICAgICAgICAgICAgIGlmIChHVUlMYXlvdXQuQnV0dG9uKCItIiwgR1VJTGF5b3V0LldpZHRoKDMyKSkpCi8vICAgICAgICAgICAgIHsKLy8gICAgICAgICAgICAgICAgIHRvRGVsZXRlID0gaTsKLy8gICAgICAgICAgICAgfQovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuRW5kSG9yaXpvbnRhbCgpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgaWYgKHRvRGVsZXRlICE9IC0xKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgdmFyIGl0ZW0gPSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpLm9iamVjdFJlZmVyZW5jZVZhbHVlOwovLyAgICAgICAgICAgICBEZXN0cm95SW1tZWRpYXRlKGl0ZW0sIHRydWUpOwoKLy8gICAgICAgICAgICAgLy9uZWVkIHRvIGRvIGl0IHR3aWNlLCBmaXJzdCB0aW1lIGp1c3QgbnVsbGlmeSB0aGUgZW50cnksIHNlY29uZCBhY3R1YWxseSByZW1vdmUgaXQuCi8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICAvL2F0dGFjawovLyAgICAgICAgIGNob2ljZSA9IEVkaXRvckdVSUxheW91dC5Qb3B1cCgiQWRkIG5ldyBXZWFwb24gQXR0YWNrIEVmZmVjdCIsIC0xLCBtX0F2YWlsYWJsZVdlYXBvbkF0dGFja0VmZmVjdFR5cGUuVG9BcnJheSgpKTsKCi8vICAgICAgICAgaWYgKGNob2ljZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlW2Nob2ljZV0pOwoKLy8gICAgICAgICAgICAgQXNzZXREYXRhYmFzZS5BZGRPYmplY3RUb0Fzc2V0KG5ld0luc3RhbmNlLCB0YXJnZXQpOwoKLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuSW5zZXJ0QXJyYXlFbGVtZW50QXRJbmRleChtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAgICAgICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSAtIDEpLm9iamVjdFJlZmVyZW5jZVZhbHVlID0gbmV3SW5zdGFuY2U7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICB0b0RlbGV0ZSA9IC0xOwovLyAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChpKTsgICAgICAgICAgIAovLyAgICAgICAgICAgICBTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gICAgICAgICAgICAgRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gICAgICAgICAgICAgZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAgICAgICAgICAgICBpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAgICAgICAgICAgICB7Ci8vICAgICAgICAgICAgICAgICB0b0RlbGV0ZSA9IGk7Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIGlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSkub2JqZWN0UmVmZXJlbmNlVmFsdWU7Ci8vICAgICAgICAgICAgIERlc3Ryb3lJbW1lZGlhdGUoaXRlbSwgdHJ1ZSk7CgovLyAgICAgICAgICAgICAvL25lZWQgdG8gZG8gaXQgdHdpY2UsIGZpcnN0IHRpbWUganVzdCBudWxsaWZ5IHRoZSBlbnRyeSwgc2Vjb25kIGFjdHVhbGx5IHJlbW92ZSBpdC4KLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgc2VyaWFsaXplZE9iamVjdC5BcHBseU1vZGlmaWVkUHJvcGVydGllcygpOwovLyAgICAgfQovLyB9Ci8vICNlbmRpZgAAAAAAAAAAfCkAAAAAAAAAAAAAAAAAAAAAAAB8KQAAAAAAAAAAAAA",
					"BwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB8KQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgVmVjdG9yMyA9IFVuaXR5RW5naW5lLlZlY3RvcjM7CiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CnVzaW5nIFN5c3RlbS5MaW5xOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBjYXNlIG9mIEVxdWlwbWVudEl0ZW0gZm9yIHdlYXBvbiwgYXMgdGhleSBoYXZlIGEgd2hvbGUgYXR0YWNrIHN5c3RlbSBpbiBhZGRpdGlvbi4gTGlrZSBFcXVpcG1lbnQgdGhleQoJLy8vIGNhbiBoYXZlIG1pbmltdW0gc3RhdHMgYW5kIGVxdWlwcGVkIGVmZmVjdCwgYnV0IGFsc28gaGF2ZSBhIGxpc3Qgb2YgV2VhcG9uQXR0YWNrRWZmZWN0IHRoYXQgd2lsbCBoYXZlIHRoZWlyCgkvLy8gT25BdHRhY2sgZnVuY3Rpb24gY2FsbGVkIGR1cmluZyBhIGhpdCwgYW5kIHRoZWlyIE9uUG9zdEF0dGFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgYWxsIE9uQXR0YWNrIG9mIGFsbCBlZmZlY3RzCgkvLy8gYXJlIGNhbGxlZC4KCS8vLyA8L3N1bW1hcnk+CglwdWJsaWMgY2xhc3MgV2VhcG9uIDogRXF1aXBtZW50SXRlbQoJewoJCVtTeXN0ZW0uU2VyaWFsaXphYmxlXQoJCXB1YmxpYyBzdHJ1Y3QgU3RhdAoJCXsKCQkJcHVibGljIGZsb2F0IFNwZWVkOwoJCQlwdWJsaWMgaW50IE1pbmltdW1EYW1hZ2U7CgkJCXB1YmxpYyBpbnQgTWF4aW11bURhbWFnZTsKCQkJcHVibGljIGZsb2F0IE1heFJhbmdlOwoJCQlwdWJsaWMgaW50IEFkZGl0aW9uYWxUYXJnZXRzOwoJCX0KCQlwdWJsaWMgZW51bSBXZWFwb25UeXBlCgkJewoJCQlOb25lLAoJCQlTd29yZCwKCQkJQXhlLAoJCQlSYWtlLAoJCQlNYWNlLAoJCQlEYWdnZXIsCgkJCUJvdywKCQkJTWFnaWNXZWFwb24sCgkJCVRocm93bldlYXBvbgoJCX0KCQlbSGVhZGVyKCJXZWFwb25TdGF0cyIpXQoJCXB1YmxpYyBTdGF0IFN0YXRzID0gbmV3IFN0YXQoKSB7IFNwZWVkID0gMS4wZiwgTWF4aW11bURhbWFnZSA9IDEsIE1pbmltdW1EYW1hZ2UgPSAxLCBNYXhSYW5nZSA9IDEsIEFkZGl0aW9uYWxUYXJnZXRzID0gMCB9OwoJCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCQlwdWJsaWMgV2VhcG9uVHlwZSB3ZWFwb25UeXBlOwoJCXB1YmxpYyBMaXN0PEVmZmVjdERhdGE+IEF0dGFja0VmZmVjdHM7CgkJcHVibGljIFNraWxsIFdlYXBvblNraWxsOwoJCXB1YmxpYyBCdWxsZXQgYnVsbGV0UGI7CgkJcHVibGljIFRyYW5zZm9ybSBidWxsZXRUcmFuczsKCgkJW0hlYWRlcigiU291bmRzIildCgkJcHVibGljIEF1ZGlvQ2xpcFtdIEhpdFNvdW5kczsKCQlwdWJsaWMgQXVkaW9DbGlwW10gU3dpbmdTb3VuZHM7CgoJCXB1YmxpYyB2b2lkIEF0dGFjayhDaGFyYWN0ZXJEYXRhIGF0dGFja2VyLCBDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCQl7CgkJCURhbWFnZSBkYW1hZ2UgPSBuZXcgRGFtYWdlKHRhcmdldCwgYXR0YWNrZXIpOwoJCQlpbnQgZGFtYWdlTnVtID0gUmFuZG9tLlJhbmdlKFN0YXRzLk1pbmltdW1EYW1hZ2UsIFN0YXRzLk1heGltdW1EYW1hZ2UgKyAxKTsKCQkJZGFtYWdlLkFkZERhbWFnZShkYW1hZ2VUeXBlLCBkYW1hZ2VOdW0pOwoJCQlpZiAoYnVsbGV0UGIgIT0gbnVsbCkKCQkJewoJCQkJVmVjdG9yMyBidWxsZXRQb3MgPSBhdHRhY2tlci5XZWFwb25Mb2NhdG9yLnBvc2l0aW9uOwoJCQkJQnVsbGV0IGJ1bGxldCA9IEluc3RhbnRpYXRlKGJ1bGxldFBiLCBidWxsZXRQb3MsIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSk7CgkJCQlidWxsZXQuZGFtYWdlID0gZGFtYWdlOwoJCQkJYnVsbGV0LnRhcmdldCA9IHRhcmdldDsKCQkJfQoJCQllbHNlIGRhbWFnZS5UYWtlRGFtYWdlKCk7CgkJCS8vZm9yZWFjaCAodmFyIHdhZSBpbiBBdHRhY2tFZmZlY3RzKQoJCQkvL3dhZS5PbkF0dGFjayh0YXJnZXQsIGF0dGFja2VyLCByZWYgYXR0YWNrRWZmZWN0KTsKCgkJCS8vdGFyZ2V0LlRha2VFZmZlY3QoYXR0YWNrRWZmZWN0KTsKCgkJCS8vZm9yZWFjaCAodmFyIHdhZSBpbiBBdHRhY2tFZmZlY3RzKQoJCQkvL3dhZS5PblBvc3RBdHRhY2sodGFyZ2V0LCBhdHRhY2tlciwgYXR0YWNrRWZmZWN0KTsKCQl9CgoJCXB1YmxpYyBib29sIENhbkhpdChDaGFyYWN0ZXJEYXRhIGF0dGFja2VyLCBDaGFyYWN0ZXJEYXRhIHRhcmdldCkKCQl7CgkJCWlmIChWZWN0b3IzLlNxck1hZ25pdHVkZShhdHRhY2tlci50cmFuc2Zvcm0ucG9zaXRpb24gLSB0YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uKSA8IFN0YXRzLk1heFJhbmdlICogU3RhdHMuTWF4UmFuZ2UpCgkJCXsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCQl7CgkJCXN0cmluZyBkZXNjID0gYmFzZS5HZXREZXNjcmlwdGlvbigpOwoKCQkJaW50IG1pbmltdW1EUFMgPSBNYXRoZi5Sb3VuZFRvSW50KFN0YXRzLk1pbmltdW1EYW1hZ2UgLyBTdGF0cy5TcGVlZCk7CgkJCWludCBtYXhpbXVtRFBTID0gTWF0aGYuUm91bmRUb0ludChTdGF0cy5NYXhpbXVtRGFtYWdlIC8gU3RhdHMuU3BlZWQpOwoKCQkJZGVzYyArPSAiXG4iOwoJCQlkZXNjICs9ICQiRGFtYWdlOiB7U3RhdHMuTWluaW11bURhbWFnZX0gLSB7U3RhdHMuTWF4aW11bURhbWFnZX1cbiI7CgkJCWRlc2MgKz0gJCJEUFM6IHttaW5pbXVtRFBTfSAtIHttYXhpbXVtRFBTfVxuIjsKCQkJZGVzYyArPSAkIkF0dGFjayBTcGVlZCA6IHtTdGF0cy5TcGVlZH1zXG4iOwoJCQlkZXNjICs9ICQiUmFuZ2UgOiB7U3RhdHMuTWF4UmFuZ2V9bVxuIjsKCgkJCXJldHVybiBkZXNjOwoJCX0KCgkJcHVibGljIEF1ZGlvQ2xpcCBHZXRIaXRTb3VuZCgpCgkJewoJCQlpZiAoSGl0U291bmRzID09IG51bGwgfHwgSGl0U291bmRzLkxlbmd0aCA9PSAwKQoJCQkJcmV0dXJuIFNGWE1hbmFnZXIuR2V0RGVmYXVsdEhpdCgpOwoKCQkJcmV0dXJuIEhpdFNvdW5kc1tSYW5kb20uUmFuZ2UoMCwgSGl0U291bmRzLkxlbmd0aCldOwoJCX0KCgkJcHVibGljIEF1ZGlvQ2xpcCBHZXRTd2luZ1NvdW5kKCkKCQl7CgkJCWlmIChTd2luZ1NvdW5kcyA9PSBudWxsIHx8IFN3aW5nU291bmRzLkxlbmd0aCA9PSAwKQoJCQkJcmV0dXJuIFNGWE1hbmFnZXIuR2V0RGVmYXVsdFN3aW5nU291bmQoKTsKCgkJCXJldHVybiBTd2luZ1NvdW5kc1tSYW5kb20uUmFuZ2UoMCwgU3dpbmdTb3VuZHMuTGVuZ3RoKV07CgkJfQoJfQp9CgovLyAjaWYgVU5JVFlfRURJVE9SCi8vIFtDdXN0b21FZGl0b3IodHlwZW9mKFdlYXBvbikpXQovLyBwdWJsaWMgY2xhc3MgV2VhcG9uRWRpdG9yIDogRWRpdG9yCi8vIHsKLy8gICAgIFdlYXBvbiBtX1RhcmdldDsKCi8vICAgICBJdGVtRWRpdG9yIG1fSXRlbUVkaXRvcjsKCi8vICAgICBMaXN0PHN0cmluZz4gbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGU7Ci8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eTsKCi8vICAgICBMaXN0PHN0cmluZz4gbV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlOwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5OwoKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX0hpdFNvdW5kUHJvcHM7Ci8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9Td2luZ1NvdW5kUHJvcHM7CgovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHk7Ci8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5OwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bURlZmVuc2VQcm9wZXJ0eTsKCi8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9XZWFwb25TdGF0UHJvcGVydHk7CgovLyAgICAgW01lbnVJdGVtKCJBc3NldHMvQ3JlYXRlL0RhdGEvV2VhcG9uIiwgcHJpb3JpdHkgPSAtOTk5KV0KLy8gICAgIHN0YXRpYyBwdWJsaWMgdm9pZCBDcmVhdGVXZWFwb24oKQovLyAgICAgewovLyAgICAgICAgIHZhciBuZXdXZWFwb24gPSBDcmVhdGVJbnN0YW5jZTxXZWFwb24+KCk7Ci8vICAgICAgICAgbmV3V2VhcG9uLlNsb3QgPSAoRXF1aXBtZW50SXRlbS5FcXVpcG1lbnRTbG90KTY2NjsKCi8vICAgICAgICAgUHJvamVjdFdpbmRvd1V0aWwuQ3JlYXRlQXNzZXQobmV3V2VhcG9uLCAid2VhcG9uLmFzc2V0Iik7Ci8vICAgICB9CgovLyAgICAgdm9pZCBPbkVuYWJsZSgpCi8vICAgICB7Ci8vICAgICAgICAgbV9UYXJnZXQgPSB0YXJnZXQgYXMgV2VhcG9uOwovLyAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLkVxdWlwcGVkRWZmZWN0cykpOwovLyAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5BdHRhY2tFZmZlY3RzKSk7CgovLyAgICAgICAgIG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtU3RyZW5ndGgpKTsKLy8gICAgICAgICBtX01pbmltdW1BZ2lsaXR5UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtQWdpbGl0eSkpOwovLyAgICAgICAgIG1fTWluaW11bURlZmVuc2VQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1EZWZlbnNlKSk7CgovLyAgICAgICAgIG1fV2VhcG9uU3RhdFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5TdGF0cykpOwoKLy8gICAgICAgICBtX0hpdFNvdW5kUHJvcHMgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLkhpdFNvdW5kcykpOwovLyAgICAgICAgIG1fU3dpbmdTb3VuZFByb3BzID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5Td2luZ1NvdW5kcykpOwoKLy8gICAgICAgICBtX0l0ZW1FZGl0b3IgPSBuZXcgSXRlbUVkaXRvcigpOwovLyAgICAgICAgIG1fSXRlbUVkaXRvci5Jbml0KHNlcmlhbGl6ZWRPYmplY3QpOwoKLy8gICAgICAgICB2YXIgbG9va3VwID0gdHlwZW9mKEVmZmVjdERhdGEpOwovLyAgICAgICAgIG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlID0gU3lzdGVtLkFwcERvbWFpbi5DdXJyZW50RG9tYWluLkdldEFzc2VtYmxpZXMoKQovLyAgICAgICAgICAgICAuU2VsZWN0TWFueShhc3NlbWJseSA9PiBhc3NlbWJseS5HZXRUeXBlcygpKQovLyAgICAgICAgICAgICAuV2hlcmUoeCA9PiB4LklzQ2xhc3MgJiYgIXguSXNBYnN0cmFjdCAmJiB4LklzU3ViY2xhc3NPZihsb29rdXApKQovLyAgICAgICAgICAgICAuU2VsZWN0KHR5cGUgPT4gdHlwZS5OYW1lKQovLyAgICAgICAgICAgICAuVG9MaXN0KCk7CgovLyAgICAgICAgIGxvb2t1cCA9IHR5cGVvZihFZmZlY3REYXRhKTsKLy8gICAgICAgICBtX0F2YWlsYWJsZVdlYXBvbkF0dGFja0VmZmVjdFR5cGUgPSBTeXN0ZW0uQXBwRG9tYWluLkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpCi8vICAgICAgICAgICAgIC5TZWxlY3RNYW55KGFzc2VtYmx5ID0+IGFzc2VtYmx5LkdldFR5cGVzKCkpCi8vICAgICAgICAgICAgIC5XaGVyZSh4ID0+IHguSXNDbGFzcyAmJiAheC5Jc0Fic3RyYWN0ICYmIHguSXNTdWJjbGFzc09mKGxvb2t1cCkpCi8vICAgICAgICAgICAgIC5TZWxlY3QodHlwZSA9PiB0eXBlLk5hbWUpCi8vICAgICAgICAgICAgIC5Ub0xpc3QoKTsKLy8gICAgIH0KCi8vICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBPbkluc3BlY3RvckdVSSgpCi8vICAgICB7Ci8vICAgICAgICAgbV9JdGVtRWRpdG9yLkdVSSgpOwoKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX01pbmltdW1TdHJlbmd0aFByb3BlcnR5KTsKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX01pbmltdW1BZ2lsaXR5UHJvcGVydHkpOwovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bURlZmVuc2VQcm9wZXJ0eSk7CgovLyAgICAgICAgIC8vRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9XZWFwb25TdGF0UHJvcGVydHksIHRydWUpOwovLyAgICAgICAgIHZhciBjaGlsZCA9IG1fV2VhcG9uU3RhdFByb3BlcnR5LkNvcHkoKTsKLy8gICAgICAgICB2YXIgZGVwdGggPSBjaGlsZC5kZXB0aDsKLy8gICAgICAgICBjaGlsZC5OZXh0VmlzaWJsZSh0cnVlKTsKCi8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkxhYmVsRmllbGQoIldlYXBvbiBTdGF0cyIsIEVkaXRvclN0eWxlcy5ib2xkTGFiZWwpOwovLyAgICAgICAgIHdoaWxlIChjaGlsZC5kZXB0aCA+IGRlcHRoKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQoY2hpbGQsIHRydWUpOwovLyAgICAgICAgICAgICBjaGlsZC5OZXh0VmlzaWJsZShmYWxzZSk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX0hpdFNvdW5kUHJvcHMsIHRydWUpOwovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fU3dpbmdTb3VuZFByb3BzLCB0cnVlKTsKCi8vICAgICAgICAgaW50IGNob2ljZSA9IEVkaXRvckdVSUxheW91dC5Qb3B1cCgiQWRkIG5ldyBFcXVpcG1lbnQgRWZmZWN0IiwgLTEsIG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlLlRvQXJyYXkoKSk7CgovLyAgICAgICAgIGlmIChjaG9pY2UgIT0gLTEpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICB2YXIgbmV3SW5zdGFuY2UgPSBTY3JpcHRhYmxlT2JqZWN0LkNyZWF0ZUluc3RhbmNlKG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlW2Nob2ljZV0pOwoKLy8gICAgICAgICAgICAgQXNzZXREYXRhYmFzZS5BZGRPYmplY3RUb0Fzc2V0KG5ld0luc3RhbmNlLCB0YXJnZXQpOwoKLy8gICAgICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5JbnNlcnRBcnJheUVsZW1lbnRBdEluZGV4KG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplKTsKLy8gICAgICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplIC0gMSkub2JqZWN0UmVmZXJlbmNlVmFsdWUgPSBuZXdJbnN0YW5jZTsKLy8gICAgICAgICB9CgoKLy8gICAgICAgICBFZGl0b3IgZWQgPSBudWxsOwovLyAgICAgICAgIGludCB0b0RlbGV0ZSA9IC0xOwovLyAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemU7ICsraSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5CZWdpbkhvcml6b250YWwoKTsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkJlZ2luVmVydGljYWwoKTsKLy8gICAgICAgICAgICAgdmFyIGl0ZW0gPSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgoaSk7ICAgICAgICAgICAKLy8gICAgICAgICAgICAgU2VyaWFsaXplZE9iamVjdCBvYmogPSBuZXcgU2VyaWFsaXplZE9iamVjdChpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlKTsKCi8vICAgICAgICAgICAgIEVkaXRvci5DcmVhdGVDYWNoZWRFZGl0b3IoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSwgbnVsbCwgcmVmIGVkKTsKCi8vICAgICAgICAgICAgIGVkLk9uSW5zcGVjdG9yR1VJKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5FbmRWZXJ0aWNhbCgpOwoKLy8gICAgICAgICAgICAgaWYgKEdVSUxheW91dC5CdXR0b24oIi0iLCBHVUlMYXlvdXQuV2lkdGgoMzIpKSkKLy8gICAgICAgICAgICAgewovLyAgICAgICAgICAgICAgICAgdG9EZWxldGUgPSBpOwovLyAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5FbmRIb3Jpem9udGFsKCk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICBpZiAodG9EZWxldGUgIT0gLTEpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICB2YXIgaXRlbSA9IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSkub2JqZWN0UmVmZXJlbmNlVmFsdWU7Ci8vICAgICAgICAgICAgIERlc3Ryb3lJbW1lZGlhdGUoaXRlbSwgdHJ1ZSk7CgovLyAgICAgICAgICAgICAvL25lZWQgdG8gZG8gaXQgdHdpY2UsIGZpcnN0IHRpbWUganVzdCBudWxsaWZ5IHRoZSBlbnRyeSwgc2Vjb25kIGFjdHVhbGx5IHJlbW92ZSBpdC4KLy8gICAgICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gICAgICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIC8vYXR0YWNrCi8vICAgICAgICAgY2hvaWNlID0gRWRpdG9yR1VJTGF5b3V0LlBvcHVwKCJBZGQgbmV3IFdlYXBvbiBBdHRhY2sgRWZmZWN0IiwgLTEsIG1fQXZhaWxhYmxlV2VhcG9uQXR0YWNrRWZmZWN0VHlwZS5Ub0FycmF5KCkpOwoKLy8gICAgICAgICBpZiAoY2hvaWNlICE9IC0xKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgdmFyIG5ld0luc3RhbmNlID0gU2NyaXB0YWJsZU9iamVjdC5DcmVhdGVJbnN0YW5jZShtX0F2YWlsYWJsZVdlYXBvbkF0dGFja0VmZmVjdFR5cGVbY2hvaWNlXSk7CgovLyAgICAgICAgICAgICBBc3NldERhdGFiYXNlLkFkZE9iamVjdFRvQXNzZXQobmV3SW5zdGFuY2UsIHRhcmdldCk7CgovLyAgICAgICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5JbnNlcnRBcnJheUVsZW1lbnRBdEluZGV4KG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSk7Ci8vICAgICAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgobV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplIC0gMSkub2JqZWN0UmVmZXJlbmNlVmFsdWUgPSBuZXdJbnN0YW5jZTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIHRvRGVsZXRlID0gLTE7Ci8vICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemU7ICsraSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5CZWdpbkhvcml6b250YWwoKTsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkJlZ2luVmVydGljYWwoKTsKLy8gICAgICAgICAgICAgdmFyIGl0ZW0gPSBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KGkpOyAgICAgICAgICAgCi8vICAgICAgICAgICAgIFNlcmlhbGl6ZWRPYmplY3Qgb2JqID0gbmV3IFNlcmlhbGl6ZWRPYmplY3QoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSk7CgovLyAgICAgICAgICAgICBFZGl0b3IuQ3JlYXRlQ2FjaGVkRWRpdG9yKGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUsIG51bGwsIHJlZiBlZCk7CgovLyAgICAgICAgICAgICBlZC5Pbkluc3BlY3RvckdVSSgpOwovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuRW5kVmVydGljYWwoKTsKCi8vICAgICAgICAgICAgIGlmIChHVUlMYXlvdXQuQnV0dG9uKCItIiwgR1VJTGF5b3V0LldpZHRoKDMyKSkpCi8vICAgICAgICAgICAgIHsKLy8gICAgICAgICAgICAgICAgIHRvRGVsZXRlID0gaTsKLy8gICAgICAgICAgICAgfQovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuRW5kSG9yaXpvbnRhbCgpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgaWYgKHRvRGVsZXRlICE9IC0xKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgdmFyIGl0ZW0gPSBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKLy8gICAgICAgICAgICAgRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKCi8vICAgICAgICAgICAgIC8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgovLyAgICAgICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICBzZXJpYWxpemVkT2JqZWN0LkFwcGx5TW9kaWZpZWRQcm9wZXJ0aWVzKCk7Ci8vICAgICB9Ci8vIH0KLy8gI2VuZGlmAAAAAAAAAABsKQAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1710496596.8545654"
					},
					"AQAAAAAAAAAAAAAAbCkAAAAAAABsKQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgVmVjdG9yMyA9IFVuaXR5RW5naW5lLlZlY3RvcjM7CiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CnVzaW5nIFN5c3RlbS5MaW5xOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBjYXNlIG9mIEVxdWlwbWVudEl0ZW0gZm9yIHdlYXBvbiwgYXMgdGhleSBoYXZlIGEgd2hvbGUgYXR0YWNrIHN5c3RlbSBpbiBhZGRpdGlvbi4gTGlrZSBFcXVpcG1lbnQgdGhleQoJLy8vIGNhbiBoYXZlIG1pbmltdW0gc3RhdHMgYW5kIGVxdWlwcGVkIGVmZmVjdCwgYnV0IGFsc28gaGF2ZSBhIGxpc3Qgb2YgV2VhcG9uQXR0YWNrRWZmZWN0IHRoYXQgd2lsbCBoYXZlIHRoZWlyCgkvLy8gT25BdHRhY2sgZnVuY3Rpb24gY2FsbGVkIGR1cmluZyBhIGhpdCwgYW5kIHRoZWlyIE9uUG9zdEF0dGFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgYWxsIE9uQXR0YWNrIG9mIGFsbCBlZmZlY3RzCgkvLy8gYXJlIGNhbGxlZC4KCS8vLyA8L3N1bW1hcnk+CglwdWJsaWMgY2xhc3MgV2VhcG9uIDogRXF1aXBtZW50SXRlbQoJewoJCVtTeXN0ZW0uU2VyaWFsaXphYmxlXQoJCXB1YmxpYyBzdHJ1Y3QgU3RhdAoJCXsKCQkJcHVibGljIGZsb2F0IFNwZWVkOwoJCQlwdWJsaWMgaW50IE1pbmltdW1EYW1hZ2U7CgkJCXB1YmxpYyBpbnQgTWF4aW11bURhbWFnZTsKCQkJcHVibGljIGZsb2F0IE1heFJhbmdlOwoJCQlwdWJsaWMgaW50IEFkZGl0aW9uYWxUYXJnZXRzOwoJCX0KCQlwdWJsaWMgZW51bSBXZWFwb25UeXBlCgkJewoJCQlOb25lLAoJCQlTd29yZCwKCQkJQXhlLAoJCQlSYWtlLAoJCQlNYWNlLAoJCQlEYWdnZXIsCgkJCUJvdywKCQkJTWFnaWNXZWFwb24sCgkJCVRocm93bldlYXBvbgoJCX0KCQlbSGVhZGVyKCJXZWFwb25TdGF0cyIpXQoJCXB1YmxpYyBTdGF0IFN0YXRzID0gbmV3IFN0YXQoKSB7IFNwZWVkID0gMS4wZiwgTWF4aW11bURhbWFnZSA9IDEsIE1pbmltdW1EYW1hZ2UgPSAxLCBNYXhSYW5nZSA9IDEsIEFkZGl0aW9uYWxUYXJnZXRzID0gMCB9OwoJCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCQlwdWJsaWMgV2VhcG9uVHlwZSB3ZWFwb25UeXBlOwoJCXB1YmxpYyBMaXN0PEVmZmVjdERhdGE+IEF0dGFja0VmZmVjdHM7CgkJcHVibGljIFNraWxsIFdlYXBvblNraWxsOwoJCXB1YmxpYyBCdWxsZXQgYnVsbGV0UGI7CgkJcHVibGljIFRyYW5zZm9ybSBidWxsZXRUcmFuczsKCgkJW0hlYWRlcigiU291bmRzIildCgkJcHVibGljIEF1ZGlvQ2xpcFtdIEhpdFNvdW5kczsKCQlwdWJsaWMgQXVkaW9DbGlwW10gU3dpbmdTb3VuZHM7CgoJCXB1YmxpYyB2b2lkIEF0dGFjayhDaGFyYWN0ZXIgYXR0YWNrZXIsIENoYXJhY3RlciB0YXJnZXQpCgkJewoJCQlEYW1hZ2UgZGFtYWdlID0gbmV3IERhbWFnZSh0YXJnZXQsIGF0dGFja2VyKTsKCQkJaW50IGRhbWFnZU51bSA9IFJhbmRvbS5SYW5nZShTdGF0cy5NaW5pbXVtRGFtYWdlLCBTdGF0cy5NYXhpbXVtRGFtYWdlICsgMSk7CgkJCWRhbWFnZS5BZGREYW1hZ2UoZGFtYWdlVHlwZSwgZGFtYWdlTnVtKTsKCQkJaWYgKGJ1bGxldFBiICE9IG51bGwpCgkJCXsKCQkJCVZlY3RvcjMgYnVsbGV0UG9zID0gYXR0YWNrZXIuV2VhcG9uTG9jYXRvci5wb3NpdGlvbjsKCQkJCUJ1bGxldCBidWxsZXQgPSBJbnN0YW50aWF0ZShidWxsZXRQYiwgYnVsbGV0UG9zLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpOwoJCQkJYnVsbGV0LmRhbWFnZSA9IGRhbWFnZTsKCQkJCWJ1bGxldC50YXJnZXQgPSB0YXJnZXQ7CgkJCX0KCQkJZWxzZSBkYW1hZ2UuVGFrZURhbWFnZSgpOwoJCQkvL2ZvcmVhY2ggKHZhciB3YWUgaW4gQXR0YWNrRWZmZWN0cykKCQkJLy93YWUuT25BdHRhY2sodGFyZ2V0LCBhdHRhY2tlciwgcmVmIGF0dGFja0VmZmVjdCk7CgoJCQkvL3RhcmdldC5UYWtlRWZmZWN0KGF0dGFja0VmZmVjdCk7CgoJCQkvL2ZvcmVhY2ggKHZhciB3YWUgaW4gQXR0YWNrRWZmZWN0cykKCQkJLy93YWUuT25Qb3N0QXR0YWNrKHRhcmdldCwgYXR0YWNrZXIsIGF0dGFja0VmZmVjdCk7CgkJfQoKCQlwdWJsaWMgYm9vbCBDYW5IaXQoQ2hhcmFjdGVyIGF0dGFja2VyLCBDaGFyYWN0ZXIgdGFyZ2V0KQoJCXsKCQkJaWYgKFZlY3RvcjMuU3FyTWFnbml0dWRlKGF0dGFja2VyLnRyYW5zZm9ybS5wb3NpdGlvbiAtIHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24pIDwgU3RhdHMuTWF4UmFuZ2UgKiBTdGF0cy5NYXhSYW5nZSkKCQkJewoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJCXsKCQkJc3RyaW5nIGRlc2MgPSBiYXNlLkdldERlc2NyaXB0aW9uKCk7CgoJCQlpbnQgbWluaW11bURQUyA9IE1hdGhmLlJvdW5kVG9JbnQoU3RhdHMuTWluaW11bURhbWFnZSAvIFN0YXRzLlNwZWVkKTsKCQkJaW50IG1heGltdW1EUFMgPSBNYXRoZi5Sb3VuZFRvSW50KFN0YXRzLk1heGltdW1EYW1hZ2UgLyBTdGF0cy5TcGVlZCk7CgoJCQlkZXNjICs9ICJcbiI7CgkJCWRlc2MgKz0gJCJEYW1hZ2U6IHtTdGF0cy5NaW5pbXVtRGFtYWdlfSAtIHtTdGF0cy5NYXhpbXVtRGFtYWdlfVxuIjsKCQkJZGVzYyArPSAkIkRQUzoge21pbmltdW1EUFN9IC0ge21heGltdW1EUFN9XG4iOwoJCQlkZXNjICs9ICQiQXR0YWNrIFNwZWVkIDoge1N0YXRzLlNwZWVkfXNcbiI7CgkJCWRlc2MgKz0gJCJSYW5nZSA6IHtTdGF0cy5NYXhSYW5nZX1tXG4iOwoKCQkJcmV0dXJuIGRlc2M7CgkJfQoKCQlwdWJsaWMgQXVkaW9DbGlwIEdldEhpdFNvdW5kKCkKCQl7CgkJCWlmIChIaXRTb3VuZHMgPT0gbnVsbCB8fCBIaXRTb3VuZHMuTGVuZ3RoID09IDApCgkJCQlyZXR1cm4gU0ZYTWFuYWdlci5HZXREZWZhdWx0SGl0KCk7CgoJCQlyZXR1cm4gSGl0U291bmRzW1JhbmRvbS5SYW5nZSgwLCBIaXRTb3VuZHMuTGVuZ3RoKV07CgkJfQoKCQlwdWJsaWMgQXVkaW9DbGlwIEdldFN3aW5nU291bmQoKQoJCXsKCQkJaWYgKFN3aW5nU291bmRzID09IG51bGwgfHwgU3dpbmdTb3VuZHMuTGVuZ3RoID09IDApCgkJCQlyZXR1cm4gU0ZYTWFuYWdlci5HZXREZWZhdWx0U3dpbmdTb3VuZCgpOwoKCQkJcmV0dXJuIFN3aW5nU291bmRzW1JhbmRvbS5SYW5nZSgwLCBTd2luZ1NvdW5kcy5MZW5ndGgpXTsKCQl9Cgl9Cn0KCi8vICNpZiBVTklUWV9FRElUT1IKLy8gW0N1c3RvbUVkaXRvcih0eXBlb2YoV2VhcG9uKSldCi8vIHB1YmxpYyBjbGFzcyBXZWFwb25FZGl0b3IgOiBFZGl0b3IKLy8gewovLyAgICAgV2VhcG9uIG1fVGFyZ2V0OwoKLy8gICAgIEl0ZW1FZGl0b3IgbV9JdGVtRWRpdG9yOwoKLy8gICAgIExpc3Q8c3RyaW5nPiBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5OwoKLy8gICAgIExpc3Q8c3RyaW5nPiBtX0F2YWlsYWJsZVdlYXBvbkF0dGFja0VmZmVjdFR5cGU7Ci8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHk7CgovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fSGl0U291bmRQcm9wczsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1N3aW5nU291bmRQcm9wczsKCi8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1BZ2lsaXR5UHJvcGVydHk7Ci8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5OwoKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1dlYXBvblN0YXRQcm9wZXJ0eTsKCi8vICAgICBbTWVudUl0ZW0oIkFzc2V0cy9DcmVhdGUvRGF0YS9XZWFwb24iLCBwcmlvcml0eSA9IC05OTkpXQovLyAgICAgc3RhdGljIHB1YmxpYyB2b2lkIENyZWF0ZVdlYXBvbigpCi8vICAgICB7Ci8vICAgICAgICAgdmFyIG5ld1dlYXBvbiA9IENyZWF0ZUluc3RhbmNlPFdlYXBvbj4oKTsKLy8gICAgICAgICBuZXdXZWFwb24uU2xvdCA9IChFcXVpcG1lbnRJdGVtLkVxdWlwbWVudFNsb3QpNjY2OwoKLy8gICAgICAgICBQcm9qZWN0V2luZG93VXRpbC5DcmVhdGVBc3NldChuZXdXZWFwb24sICJ3ZWFwb24uYXNzZXQiKTsKLy8gICAgIH0KCi8vICAgICB2b2lkIE9uRW5hYmxlKCkKLy8gICAgIHsKLy8gICAgICAgICBtX1RhcmdldCA9IHRhcmdldCBhcyBXZWFwb247Ci8vICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uRXF1aXBwZWRFZmZlY3RzKSk7Ci8vICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLkF0dGFja0VmZmVjdHMpKTsKCi8vICAgICAgICAgbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1TdHJlbmd0aCkpOwovLyAgICAgICAgIG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1BZ2lsaXR5KSk7Ci8vICAgICAgICAgbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bURlZmVuc2UpKTsKCi8vICAgICAgICAgbV9XZWFwb25TdGF0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLlN0YXRzKSk7CgovLyAgICAgICAgIG1fSGl0U291bmRQcm9wcyA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uSGl0U291bmRzKSk7Ci8vICAgICAgICAgbV9Td2luZ1NvdW5kUHJvcHMgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLlN3aW5nU291bmRzKSk7CgovLyAgICAgICAgIG1fSXRlbUVkaXRvciA9IG5ldyBJdGVtRWRpdG9yKCk7Ci8vICAgICAgICAgbV9JdGVtRWRpdG9yLkluaXQoc2VyaWFsaXplZE9iamVjdCk7CgovLyAgICAgICAgIHZhciBsb29rdXAgPSB0eXBlb2YoRWZmZWN0RGF0YSk7Ci8vICAgICAgICAgbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUgPSBTeXN0ZW0uQXBwRG9tYWluLkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpCi8vICAgICAgICAgICAgIC5TZWxlY3RNYW55KGFzc2VtYmx5ID0+IGFzc2VtYmx5LkdldFR5cGVzKCkpCi8vICAgICAgICAgICAgIC5XaGVyZSh4ID0+IHguSXNDbGFzcyAmJiAheC5Jc0Fic3RyYWN0ICYmIHguSXNTdWJjbGFzc09mKGxvb2t1cCkpCi8vICAgICAgICAgICAgIC5TZWxlY3QodHlwZSA9PiB0eXBlLk5hbWUpCi8vICAgICAgICAgICAgIC5Ub0xpc3QoKTsKCi8vICAgICAgICAgbG9va3VwID0gdHlwZW9mKEVmZmVjdERhdGEpOwovLyAgICAgICAgIG1fQXZhaWxhYmxlV2VhcG9uQXR0YWNrRWZmZWN0VHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gICAgICAgICAgICAgLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gICAgICAgICAgICAgLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gICAgICAgICAgICAgLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gICAgICAgICAgICAgLlRvTGlzdCgpOwovLyAgICAgfQoKLy8gICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIE9uSW5zcGVjdG9yR1VJKCkKLy8gICAgIHsKLy8gICAgICAgICBtX0l0ZW1FZGl0b3IuR1VJKCk7CgovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHkpOwovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eSk7Ci8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5KTsKCi8vICAgICAgICAgLy9FZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX1dlYXBvblN0YXRQcm9wZXJ0eSwgdHJ1ZSk7Ci8vICAgICAgICAgdmFyIGNoaWxkID0gbV9XZWFwb25TdGF0UHJvcGVydHkuQ29weSgpOwovLyAgICAgICAgIHZhciBkZXB0aCA9IGNoaWxkLmRlcHRoOwovLyAgICAgICAgIGNoaWxkLk5leHRWaXNpYmxlKHRydWUpOwoKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuTGFiZWxGaWVsZCgiV2VhcG9uIFN0YXRzIiwgRWRpdG9yU3R5bGVzLmJvbGRMYWJlbCk7Ci8vICAgICAgICAgd2hpbGUgKGNoaWxkLmRlcHRoID4gZGVwdGgpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChjaGlsZCwgdHJ1ZSk7Ci8vICAgICAgICAgICAgIGNoaWxkLk5leHRWaXNpYmxlKGZhbHNlKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fSGl0U291bmRQcm9wcywgdHJ1ZSk7Ci8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9Td2luZ1NvdW5kUHJvcHMsIHRydWUpOwoKLy8gICAgICAgICBpbnQgY2hvaWNlID0gRWRpdG9yR1VJTGF5b3V0LlBvcHVwKCJBZGQgbmV3IEVxdWlwbWVudCBFZmZlY3QiLCAtMSwgbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUuVG9BcnJheSgpKTsKCi8vICAgICAgICAgaWYgKGNob2ljZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGVbY2hvaWNlXSk7CgovLyAgICAgICAgICAgICBBc3NldERhdGFiYXNlLkFkZE9iamVjdFRvQXNzZXQobmV3SW5zdGFuY2UsIHRhcmdldCk7CgovLyAgICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5Lkluc2VydEFycmF5RWxlbWVudEF0SW5kZXgobV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAgICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgobV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUgLSAxKS5vYmplY3RSZWZlcmVuY2VWYWx1ZSA9IG5ld0luc3RhbmNlOwovLyAgICAgICAgIH0KCgovLyAgICAgICAgIEVkaXRvciBlZCA9IG51bGw7Ci8vICAgICAgICAgaW50IHRvRGVsZXRlID0gLTE7Ci8vICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZTsgKytpKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkJlZ2luSG9yaXpvbnRhbCgpOwovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5WZXJ0aWNhbCgpOwovLyAgICAgICAgICAgICB2YXIgaXRlbSA9IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChpKTsgICAgICAgICAgIAovLyAgICAgICAgICAgICBTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gICAgICAgICAgICAgRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gICAgICAgICAgICAgZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAgICAgICAgICAgICBpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAgICAgICAgICAgICB7Ci8vICAgICAgICAgICAgICAgICB0b0RlbGV0ZSA9IGk7Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIGlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKLy8gICAgICAgICAgICAgRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKCi8vICAgICAgICAgICAgIC8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgovLyAgICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgLy9hdHRhY2sKLy8gICAgICAgICBjaG9pY2UgPSBFZGl0b3JHVUlMYXlvdXQuUG9wdXAoIkFkZCBuZXcgV2VhcG9uIEF0dGFjayBFZmZlY3QiLCAtMSwgbV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlLlRvQXJyYXkoKSk7CgovLyAgICAgICAgIGlmIChjaG9pY2UgIT0gLTEpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICB2YXIgbmV3SW5zdGFuY2UgPSBTY3JpcHRhYmxlT2JqZWN0LkNyZWF0ZUluc3RhbmNlKG1fQXZhaWxhYmxlV2VhcG9uQXR0YWNrRWZmZWN0VHlwZVtjaG9pY2VdKTsKCi8vICAgICAgICAgICAgIEFzc2V0RGF0YWJhc2UuQWRkT2JqZWN0VG9Bc3NldChuZXdJbnN0YW5jZSwgdGFyZ2V0KTsKCi8vICAgICAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5Lkluc2VydEFycmF5RWxlbWVudEF0SW5kZXgobV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplKTsKLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUgLSAxKS5vYmplY3RSZWZlcmVuY2VWYWx1ZSA9IG5ld0luc3RhbmNlOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgdG9EZWxldGUgPSAtMTsKLy8gICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZTsgKytpKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkJlZ2luSG9yaXpvbnRhbCgpOwovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5WZXJ0aWNhbCgpOwovLyAgICAgICAgICAgICB2YXIgaXRlbSA9IG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgoaSk7ICAgICAgICAgICAKLy8gICAgICAgICAgICAgU2VyaWFsaXplZE9iamVjdCBvYmogPSBuZXcgU2VyaWFsaXplZE9iamVjdChpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlKTsKCi8vICAgICAgICAgICAgIEVkaXRvci5DcmVhdGVDYWNoZWRFZGl0b3IoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSwgbnVsbCwgcmVmIGVkKTsKCi8vICAgICAgICAgICAgIGVkLk9uSW5zcGVjdG9yR1VJKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5FbmRWZXJ0aWNhbCgpOwoKLy8gICAgICAgICAgICAgaWYgKEdVSUxheW91dC5CdXR0b24oIi0iLCBHVUlMYXlvdXQuV2lkdGgoMzIpKSkKLy8gICAgICAgICAgICAgewovLyAgICAgICAgICAgICAgICAgdG9EZWxldGUgPSBpOwovLyAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5FbmRIb3Jpem9udGFsKCk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICBpZiAodG9EZWxldGUgIT0gLTEpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICB2YXIgaXRlbSA9IG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpLm9iamVjdFJlZmVyZW5jZVZhbHVlOwovLyAgICAgICAgICAgICBEZXN0cm95SW1tZWRpYXRlKGl0ZW0sIHRydWUpOwoKLy8gICAgICAgICAgICAgLy9uZWVkIHRvIGRvIGl0IHR3aWNlLCBmaXJzdCB0aW1lIGp1c3QgbnVsbGlmeSB0aGUgZW50cnksIHNlY29uZCBhY3R1YWxseSByZW1vdmUgaXQuCi8vICAgICAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIHNlcmlhbGl6ZWRPYmplY3QuQXBwbHlNb2RpZmllZFByb3BlcnRpZXMoKTsKLy8gICAgIH0KLy8gfQovLyAjZW5kaWY",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"BQAAAAAAAAAAAAAAAAAAAAAAAABsKQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgVmVjdG9yMyA9IFVuaXR5RW5naW5lLlZlY3RvcjM7CiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CnVzaW5nIFN5c3RlbS5MaW5xOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBjYXNlIG9mIEVxdWlwbWVudEl0ZW0gZm9yIHdlYXBvbiwgYXMgdGhleSBoYXZlIGEgd2hvbGUgYXR0YWNrIHN5c3RlbSBpbiBhZGRpdGlvbi4gTGlrZSBFcXVpcG1lbnQgdGhleQoJLy8vIGNhbiBoYXZlIG1pbmltdW0gc3RhdHMgYW5kIGVxdWlwcGVkIGVmZmVjdCwgYnV0IGFsc28gaGF2ZSBhIGxpc3Qgb2YgV2VhcG9uQXR0YWNrRWZmZWN0IHRoYXQgd2lsbCBoYXZlIHRoZWlyCgkvLy8gT25BdHRhY2sgZnVuY3Rpb24gY2FsbGVkIGR1cmluZyBhIGhpdCwgYW5kIHRoZWlyIE9uUG9zdEF0dGFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgYWxsIE9uQXR0YWNrIG9mIGFsbCBlZmZlY3RzCgkvLy8gYXJlIGNhbGxlZC4KCS8vLyA8L3N1bW1hcnk+CglwdWJsaWMgY2xhc3MgV2VhcG9uIDogRXF1aXBtZW50SXRlbQoJewoJCVtTeXN0ZW0uU2VyaWFsaXphYmxlXQoJCXB1YmxpYyBzdHJ1Y3QgU3RhdAoJCXsKCQkJcHVibGljIGZsb2F0IFNwZWVkOwoJCQlwdWJsaWMgaW50IE1pbmltdW1EYW1hZ2U7CgkJCXB1YmxpYyBpbnQgTWF4aW11bURhbWFnZTsKCQkJcHVibGljIGZsb2F0IE1heFJhbmdlOwoJCQlwdWJsaWMgaW50IEFkZGl0aW9uYWxUYXJnZXRzOwoJCX0KCQlwdWJsaWMgZW51bSBXZWFwb25UeXBlCgkJewoJCQlOb25lLAoJCQlTd29yZCwKCQkJQXhlLAoJCQlSYWtlLAoJCQlNYWNlLAoJCQlEYWdnZXIsCgkJCUJvdywKCQkJTWFnaWNXZWFwb24sCgkJCVRocm93bldlYXBvbgoJCX0KCQlbSGVhZGVyKCJXZWFwb25TdGF0cyIpXQoJCXB1YmxpYyBTdGF0IFN0YXRzID0gbmV3IFN0YXQoKSB7IFNwZWVkID0gMS4wZiwgTWF4aW11bURhbWFnZSA9IDEsIE1pbmltdW1EYW1hZ2UgPSAxLCBNYXhSYW5nZSA9IDEsIEFkZGl0aW9uYWxUYXJnZXRzID0gMCB9OwoJCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCQlwdWJsaWMgV2VhcG9uVHlwZSB3ZWFwb25UeXBlOwoJCXB1YmxpYyBMaXN0PEVmZmVjdERhdGE+IEF0dGFja0VmZmVjdHM7CgkJcHVibGljIFNraWxsIFdlYXBvblNraWxsOwoJCXB1YmxpYyBCdWxsZXQgYnVsbGV0UGI7CgkJcHVibGljIFRyYW5zZm9ybSBidWxsZXRUcmFuczsKCgkJW0hlYWRlcigiU291bmRzIildCgkJcHVibGljIEF1ZGlvQ2xpcFtdIEhpdFNvdW5kczsKCQlwdWJsaWMgQXVkaW9DbGlwW10gU3dpbmdTb3VuZHM7CgoJCXB1YmxpYyB2b2lkIEF0dGFjayhDaGFyYWN0ZXIgYXR0YWNrZXIsIENoYXJhY3RlciB0YXJnZXQpCgkJewoJCQlEYW1hZ2UgZGFtYWdlID0gbmV3IERhbWFnZSh0YXJnZXQsIGF0dGFja2VyKTsKCQkJaW50IGRhbWFnZU51bSA9IFJhbmRvbS5SYW5nZShTdGF0cy5NaW5pbXVtRGFtYWdlLCBTdGF0cy5NYXhpbXVtRGFtYWdlICsgMSk7CgkJCWRhbWFnZS5BZGREYW1hZ2UoZGFtYWdlVHlwZSwgZGFtYWdlTnVtKTsKCQkJaWYgKGJ1bGxldFBiICE9IG51bGwpCgkJCXsKCQkJCVZlY3RvcjMgYnVsbGV0UG9zID0gYXR0YWNrZXIuV2VhcG9uTG9jYXRvci5wb3NpdGlvbjsKCQkJCUJ1bGxldCBidWxsZXQgPSBJbnN0YW50aWF0ZShidWxsZXRQYiwgYnVsbGV0UG9zLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpOwoJCQkJYnVsbGV0LmRhbWFnZSA9IGRhbWFnZTsKCQkJCWJ1bGxldC50YXJnZXQgPSB0YXJnZXQ7CgkJCX0KCQkJZWxzZSBkYW1hZ2UuVGFrZURhbWFnZSgpOwoJCQkvL2ZvcmVhY2ggKHZhciB3YWUgaW4gQXR0YWNrRWZmZWN0cykKCQkJLy93YWUuT25BdHRhY2sodGFyZ2V0LCBhdHRhY2tlciwgcmVmIGF0dGFja0VmZmVjdCk7CgoJCQkvL3RhcmdldC5UYWtlRWZmZWN0KGF0dGFja0VmZmVjdCk7CgoJCQkvL2ZvcmVhY2ggKHZhciB3YWUgaW4gQXR0YWNrRWZmZWN0cykKCQkJLy93YWUuT25Qb3N0QXR0YWNrKHRhcmdldCwgYXR0YWNrZXIsIGF0dGFja0VmZmVjdCk7CgkJfQoKCQlwdWJsaWMgYm9vbCBDYW5IaXQoQ2hhcmFjdGVyIGF0dGFja2VyLCBDaGFyYWN0ZXIgdGFyZ2V0KQoJCXsKCQkJaWYgKFZlY3RvcjMuU3FyTWFnbml0dWRlKGF0dGFja2VyLnRyYW5zZm9ybS5wb3NpdGlvbiAtIHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24pIDwgU3RhdHMuTWF4UmFuZ2UgKiBTdGF0cy5NYXhSYW5nZSkKCQkJewoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJCXsKCQkJc3RyaW5nIGRlc2MgPSBiYXNlLkdldERlc2NyaXB0aW9uKCk7CgoJCQlpbnQgbWluaW11bURQUyA9IE1hdGhmLlJvdW5kVG9JbnQoU3RhdHMuTWluaW11bURhbWFnZSAvIFN0YXRzLlNwZWVkKTsKCQkJaW50IG1heGltdW1EUFMgPSBNYXRoZi5Sb3VuZFRvSW50KFN0YXRzLk1heGltdW1EYW1hZ2UgLyBTdGF0cy5TcGVlZCk7CgoJCQlkZXNjICs9ICJcbiI7CgkJCWRlc2MgKz0gJCJEYW1hZ2U6IHtTdGF0cy5NaW5pbXVtRGFtYWdlfSAtIHtTdGF0cy5NYXhpbXVtRGFtYWdlfVxuIjsKCQkJZGVzYyArPSAkIkRQUzoge21pbmltdW1EUFN9IC0ge21heGltdW1EUFN9XG4iOwoJCQlkZXNjICs9ICQiQXR0YWNrIFNwZWVkIDoge1N0YXRzLlNwZWVkfXNcbiI7CgkJCWRlc2MgKz0gJCJSYW5nZSA6IHtTdGF0cy5NYXhSYW5nZX1tXG4iOwoKCQkJcmV0dXJuIGRlc2M7CgkJfQoKCQlwdWJsaWMgQXVkaW9DbGlwIEdldEhpdFNvdW5kKCkKCQl7CgkJCWlmIChIaXRTb3VuZHMgPT0gbnVsbCB8fCBIaXRTb3VuZHMuTGVuZ3RoID09IDApCgkJCQlyZXR1cm4gU0ZYTWFuYWdlci5HZXREZWZhdWx0SGl0KCk7CgoJCQlyZXR1cm4gSGl0U291bmRzW1JhbmRvbS5SYW5nZSgwLCBIaXRTb3VuZHMuTGVuZ3RoKV07CgkJfQoKCQlwdWJsaWMgQXVkaW9DbGlwIEdldFN3aW5nU291bmQoKQoJCXsKCQkJaWYgKFN3aW5nU291bmRzID09IG51bGwgfHwgU3dpbmdTb3VuZHMuTGVuZ3RoID09IDApCgkJCQlyZXR1cm4gU0ZYTWFuYWdlci5HZXREZWZhdWx0U3dpbmdTb3VuZCgpOwoKCQkJcmV0dXJuIFN3aW5nU291bmRzW1JhbmRvbS5SYW5nZSgwLCBTd2luZ1NvdW5kcy5MZW5ndGgpXTsKCQl9Cgl9Cn0KCi8vICNpZiBVTklUWV9FRElUT1IKLy8gW0N1c3RvbUVkaXRvcih0eXBlb2YoV2VhcG9uKSldCi8vIHB1YmxpYyBjbGFzcyBXZWFwb25FZGl0b3IgOiBFZGl0b3IKLy8gewovLyAgICAgV2VhcG9uIG1fVGFyZ2V0OwoKLy8gICAgIEl0ZW1FZGl0b3IgbV9JdGVtRWRpdG9yOwoKLy8gICAgIExpc3Q8c3RyaW5nPiBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5OwoKLy8gICAgIExpc3Q8c3RyaW5nPiBtX0F2YWlsYWJsZVdlYXBvbkF0dGFja0VmZmVjdFR5cGU7Ci8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHk7CgovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fSGl0U291bmRQcm9wczsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1N3aW5nU291bmRQcm9wczsKCi8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1BZ2lsaXR5UHJvcGVydHk7Ci8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5OwoKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1dlYXBvblN0YXRQcm9wZXJ0eTsKCi8vICAgICBbTWVudUl0ZW0oIkFzc2V0cy9DcmVhdGUvRGF0YS9XZWFwb24iLCBwcmlvcml0eSA9IC05OTkpXQovLyAgICAgc3RhdGljIHB1YmxpYyB2b2lkIENyZWF0ZVdlYXBvbigpCi8vICAgICB7Ci8vICAgICAgICAgdmFyIG5ld1dlYXBvbiA9IENyZWF0ZUluc3RhbmNlPFdlYXBvbj4oKTsKLy8gICAgICAgICBuZXdXZWFwb24uU2xvdCA9IChFcXVpcG1lbnRJdGVtLkVxdWlwbWVudFNsb3QpNjY2OwoKLy8gICAgICAgICBQcm9qZWN0V2luZG93VXRpbC5DcmVhdGVBc3NldChuZXdXZWFwb24sICJ3ZWFwb24uYXNzZXQiKTsKLy8gICAgIH0KCi8vICAgICB2b2lkIE9uRW5hYmxlKCkKLy8gICAgIHsKLy8gICAgICAgICBtX1RhcmdldCA9IHRhcmdldCBhcyBXZWFwb247Ci8vICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uRXF1aXBwZWRFZmZlY3RzKSk7Ci8vICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLkF0dGFja0VmZmVjdHMpKTsKCi8vICAgICAgICAgbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1TdHJlbmd0aCkpOwovLyAgICAgICAgIG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1BZ2lsaXR5KSk7Ci8vICAgICAgICAgbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bURlZmVuc2UpKTsKCi8vICAgICAgICAgbV9XZWFwb25TdGF0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLlN0YXRzKSk7CgovLyAgICAgICAgIG1fSGl0U291bmRQcm9wcyA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uSGl0U291bmRzKSk7Ci8vICAgICAgICAgbV9Td2luZ1NvdW5kUHJvcHMgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLlN3aW5nU291bmRzKSk7CgovLyAgICAgICAgIG1fSXRlbUVkaXRvciA9IG5ldyBJdGVtRWRpdG9yKCk7Ci8vICAgICAgICAgbV9JdGVtRWRpdG9yLkluaXQoc2VyaWFsaXplZE9iamVjdCk7CgovLyAgICAgICAgIHZhciBsb29rdXAgPSB0eXBlb2YoRWZmZWN0RGF0YSk7Ci8vICAgICAgICAgbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUgPSBTeXN0ZW0uQXBwRG9tYWluLkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpCi8vICAgICAgICAgICAgIC5TZWxlY3RNYW55KGFzc2VtYmx5ID0+IGFzc2VtYmx5LkdldFR5cGVzKCkpCi8vICAgICAgICAgICAgIC5XaGVyZSh4ID0+IHguSXNDbGFzcyAmJiAheC5Jc0Fic3RyYWN0ICYmIHguSXNTdWJjbGFzc09mKGxvb2t1cCkpCi8vICAgICAgICAgICAgIC5TZWxlY3QodHlwZSA9PiB0eXBlLk5hbWUpCi8vICAgICAgICAgICAgIC5Ub0xpc3QoKTsKCi8vICAgICAgICAgbG9va3VwID0gdHlwZW9mKEVmZmVjdERhdGEpOwovLyAgICAgICAgIG1fQXZhaWxhYmxlV2VhcG9uQXR0YWNrRWZmZWN0VHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gICAgICAgICAgICAgLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gICAgICAgICAgICAgLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gICAgICAgICAgICAgLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gICAgICAgICAgICAgLlRvTGlzdCgpOwovLyAgICAgfQoKLy8gICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIE9uSW5zcGVjdG9yR1VJKCkKLy8gICAgIHsKLy8gICAgICAgICBtX0l0ZW1FZGl0b3IuR1VJKCk7CgovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHkpOwovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eSk7Ci8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5KTsKCi8vICAgICAgICAgLy9FZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX1dlYXBvblN0YXRQcm9wZXJ0eSwgdHJ1ZSk7Ci8vICAgICAgICAgdmFyIGNoaWxkID0gbV9XZWFwb25TdGF0UHJvcGVydHkuQ29weSgpOwovLyAgICAgICAgIHZhciBkZXB0aCA9IGNoaWxkLmRlcHRoOwovLyAgICAgICAgIGNoaWxkLk5leHRWaXNpYmxlKHRydWUpOwoKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuTGFiZWxGaWVsZCgiV2VhcG9uIFN0YXRzIiwgRWRpdG9yU3R5bGVzLmJvbGRMYWJlbCk7Ci8vICAgICAgICAgd2hpbGUgKGNoaWxkLmRlcHRoID4gZGVwdGgpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChjaGlsZCwgdHJ1ZSk7Ci8vICAgICAgICAgICAgIGNoaWxkLk5leHRWaXNpYmxlKGZhbHNlKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fSGl0U291bmRQcm9wcywgdHJ1ZSk7Ci8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9Td2luZ1NvdW5kUHJvcHMsIHRydWUpOwoKLy8gICAgICAgICBpbnQgY2hvaWNlID0gRWRpdG9yR1VJTGF5b3V0LlBvcHVwKCJBZGQgbmV3IEVxdWlwbWVudCBFZmZlY3QiLCAtMSwgbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUuVG9BcnJheSgpKTsKCi8vICAgICAgICAgaWYgKGNob2ljZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGVbY2hvaWNlXSk7CgovLyAgICAgICAgICAgICBBc3NldERhdGFiYXNlLkFkZE9iamVjdFRvQXNzZXQobmV3SW5zdGFuY2UsIHRhcmdldCk7CgovLyAgICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5Lkluc2VydEFycmF5RWxlbWVudEF0SW5kZXgobV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAgICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgobV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUgLSAxKS5vYmplY3RSZWZlcmVuY2VWYWx1ZSA9IG5ld0luc3RhbmNlOwovLyAgICAgICAgIH0KCgovLyAgICAgICAgIEVkaXRvciBlZCA9IG51bGw7Ci8vICAgICAgICAgaW50IHRvRGVsZXRlID0gLTE7Ci8vICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZTsgKytpKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkJlZ2luSG9yaXpvbnRhbCgpOwovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5WZXJ0aWNhbCgpOwovLyAgICAgICAgICAgICB2YXIgaXRlbSA9IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChpKTsgICAgICAgICAgIAovLyAgICAgICAgICAgICBTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gICAgICAgICAgICAgRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gICAgICAgICAgICAgZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAgICAgICAgICAgICBpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAgICAgICAgICAgICB7Ci8vICAgICAgICAgICAgICAgICB0b0RlbGV0ZSA9IGk7Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIGlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKLy8gICAgICAgICAgICAgRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKCi8vICAgICAgICAgICAgIC8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgovLyAgICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgLy9hdHRhY2sKLy8gICAgICAgICBjaG9pY2UgPSBFZGl0b3JHVUlMYXlvdXQuUG9wdXAoIkFkZCBuZXcgV2VhcG9uIEF0dGFjayBFZmZlY3QiLCAtMSwgbV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlLlRvQXJyYXkoKSk7CgovLyAgICAgICAgIGlmIChjaG9pY2UgIT0gLTEpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICB2YXIgbmV3SW5zdGFuY2UgPSBTY3JpcHRhYmxlT2JqZWN0LkNyZWF0ZUluc3RhbmNlKG1fQXZhaWxhYmxlV2VhcG9uQXR0YWNrRWZmZWN0VHlwZVtjaG9pY2VdKTsKCi8vICAgICAgICAgICAgIEFzc2V0RGF0YWJhc2UuQWRkT2JqZWN0VG9Bc3NldChuZXdJbnN0YW5jZSwgdGFyZ2V0KTsKCi8vICAgICAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5Lkluc2VydEFycmF5RWxlbWVudEF0SW5kZXgobV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplKTsKLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUgLSAxKS5vYmplY3RSZWZlcmVuY2VWYWx1ZSA9IG5ld0luc3RhbmNlOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgdG9EZWxldGUgPSAtMTsKLy8gICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZTsgKytpKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkJlZ2luSG9yaXpvbnRhbCgpOwovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5WZXJ0aWNhbCgpOwovLyAgICAgICAgICAgICB2YXIgaXRlbSA9IG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgoaSk7ICAgICAgICAgICAKLy8gICAgICAgICAgICAgU2VyaWFsaXplZE9iamVjdCBvYmogPSBuZXcgU2VyaWFsaXplZE9iamVjdChpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlKTsKCi8vICAgICAgICAgICAgIEVkaXRvci5DcmVhdGVDYWNoZWRFZGl0b3IoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSwgbnVsbCwgcmVmIGVkKTsKCi8vICAgICAgICAgICAgIGVkLk9uSW5zcGVjdG9yR1VJKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5FbmRWZXJ0aWNhbCgpOwoKLy8gICAgICAgICAgICAgaWYgKEdVSUxheW91dC5CdXR0b24oIi0iLCBHVUlMYXlvdXQuV2lkdGgoMzIpKSkKLy8gICAgICAgICAgICAgewovLyAgICAgICAgICAgICAgICAgdG9EZWxldGUgPSBpOwovLyAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5FbmRIb3Jpem9udGFsKCk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICBpZiAodG9EZWxldGUgIT0gLTEpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICB2YXIgaXRlbSA9IG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpLm9iamVjdFJlZmVyZW5jZVZhbHVlOwovLyAgICAgICAgICAgICBEZXN0cm95SW1tZWRpYXRlKGl0ZW0sIHRydWUpOwoKLy8gICAgICAgICAgICAgLy9uZWVkIHRvIGRvIGl0IHR3aWNlLCBmaXJzdCB0aW1lIGp1c3QgbnVsbGlmeSB0aGUgZW50cnksIHNlY29uZCBhY3R1YWxseSByZW1vdmUgaXQuCi8vICAgICAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIHNlcmlhbGl6ZWRPYmplY3QuQXBwbHlNb2RpZmllZFByb3BlcnRpZXMoKTsKLy8gICAgIH0KLy8gfQovLyAjZW5kaWYAAAAAAAAAAEopAAAAAAAAAAAAAAAAAAAAAAAASikAAAAAAAAAAAAAAAAAAAAAAABKKQAAAAAAAAAAAAAAAAAAAAAAAEopAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABKKQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgVmVjdG9yMyA9IFVuaXR5RW5naW5lLlZlY3RvcjM7CiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CnVzaW5nIFN5c3RlbS5MaW5xOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBjYXNlIG9mIEVxdWlwbWVudEl0ZW0gZm9yIHdlYXBvbiwgYXMgdGhleSBoYXZlIGEgd2hvbGUgYXR0YWNrIHN5c3RlbSBpbiBhZGRpdGlvbi4gTGlrZSBFcXVpcG1lbnQgdGhleQoJLy8vIGNhbiBoYXZlIG1pbmltdW0gc3RhdHMgYW5kIGVxdWlwcGVkIGVmZmVjdCwgYnV0IGFsc28gaGF2ZSBhIGxpc3Qgb2YgV2VhcG9uQXR0YWNrRWZmZWN0IHRoYXQgd2lsbCBoYXZlIHRoZWlyCgkvLy8gT25BdHRhY2sgZnVuY3Rpb24gY2FsbGVkIGR1cmluZyBhIGhpdCwgYW5kIHRoZWlyIE9uUG9zdEF0dGFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgYWxsIE9uQXR0YWNrIG9mIGFsbCBlZmZlY3RzCgkvLy8gYXJlIGNhbGxlZC4KCS8vLyA8L3N1bW1hcnk+CglwdWJsaWMgY2xhc3MgV2VhcG9uIDogRXF1aXBtZW50SXRlbQoJewoJCVtTeXN0ZW0uU2VyaWFsaXphYmxlXQoJCXB1YmxpYyBzdHJ1Y3QgU3RhdAoJCXsKCQkJcHVibGljIGZsb2F0IFNwZWVkOwoJCQlwdWJsaWMgaW50IE1pbmltdW1EYW1hZ2U7CgkJCXB1YmxpYyBpbnQgTWF4aW11bURhbWFnZTsKCQkJcHVibGljIGZsb2F0IE1heFJhbmdlOwoJCQlwdWJsaWMgaW50IEFkZGl0aW9uYWxUYXJnZXRzOwoJCX0KCQlwdWJsaWMgZW51bSBXZWFwb25UeXBlCgkJewoJCQlOb25lLAoJCQlTd29yZCwKCQkJQXhlLAoJCQlSYWtlLAoJCQlNYWNlLAoJCQlEYWdnZXIsCgkJCUJvdywKCQkJTWFnaWNXZWFwb24sCgkJCVRocm93bldlYXBvbgoJCX0KCQlbSGVhZGVyKCJXZWFwb25TdGF0cyIpXQoJCXB1YmxpYyBTdGF0IFN0YXRzID0gbmV3IFN0YXQoKSB7IFNwZWVkID0gMS4wZiwgTWF4aW11bURhbWFnZSA9IDEsIE1pbmltdW1EYW1hZ2UgPSAxLCBNYXhSYW5nZSA9IDEsIEFkZGl0aW9uYWxUYXJnZXRzID0gMCB9OwoJCXB1YmxpYyBTdGF0U3lzdGVtLkRhbWFnZVR5cGUgZGFtYWdlVHlwZTsKCQlwdWJsaWMgV2VhcG9uVHlwZSB3ZWFwb25UeXBlOwoJCXB1YmxpYyBMaXN0PEVmZmVjdERhdGE+IEF0dGFja0VmZmVjdHM7CgkJcHVibGljIFNraWxsIFdlYXBvblNraWxsOwoJCXB1YmxpYyBCdWxsZXQgYnVsbGV0UGI7CgoJCVtIZWFkZXIoIlNvdW5kcyIpXQoJCXB1YmxpYyBBdWRpb0NsaXBbXSBIaXRTb3VuZHM7CgkJcHVibGljIEF1ZGlvQ2xpcFtdIFN3aW5nU291bmRzOwoKCQlwdWJsaWMgdm9pZCBBdHRhY2soQ2hhcmFjdGVyIGF0dGFja2VyLCBDaGFyYWN0ZXIgdGFyZ2V0KQoJCXsKCQkJRGFtYWdlIGRhbWFnZSA9IG5ldyBEYW1hZ2UodGFyZ2V0LCBhdHRhY2tlcik7CgkJCWludCBkYW1hZ2VOdW0gPSBSYW5kb20uUmFuZ2UoU3RhdHMuTWluaW11bURhbWFnZSwgU3RhdHMuTWF4aW11bURhbWFnZSArIDEpOwoJCQlkYW1hZ2UuQWRkRGFtYWdlKGRhbWFnZVR5cGUsIGRhbWFnZU51bSk7CgkJCWlmIChidWxsZXRQYiAhPSBudWxsKQoJCQl7CgkJCQlWZWN0b3IzIGJ1bGxldFBvcyA9IGF0dGFja2VyLldlYXBvblJvb3QuYnVsbGV0UG9zOwoJCQkJQnVsbGV0IGJ1bGxldCA9IEluc3RhbnRpYXRlKGJ1bGxldFBiLCBidWxsZXRQb3MsIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSk7CgkJCQlidWxsZXQuZGFtYWdlID0gZGFtYWdlOwoJCQkJYnVsbGV0LnRhcmdldCA9IHRhcmdldDsKCQkJfQoJCQllbHNlIGRhbWFnZS5UYWtlRGFtYWdlKCk7CgkJCS8vZm9yZWFjaCAodmFyIHdhZSBpbiBBdHRhY2tFZmZlY3RzKQoJCQkvL3dhZS5PbkF0dGFjayh0YXJnZXQsIGF0dGFja2VyLCByZWYgYXR0YWNrRWZmZWN0KTsKCgkJCS8vdGFyZ2V0LlRha2VFZmZlY3QoYXR0YWNrRWZmZWN0KTsKCgkJCS8vZm9yZWFjaCAodmFyIHdhZSBpbiBBdHRhY2tFZmZlY3RzKQoJCQkvL3dhZS5PblBvc3RBdHRhY2sodGFyZ2V0LCBhdHRhY2tlciwgYXR0YWNrRWZmZWN0KTsKCQl9CgoJCXB1YmxpYyBib29sIENhbkhpdChDaGFyYWN0ZXIgYXR0YWNrZXIsIENoYXJhY3RlciB0YXJnZXQpCgkJewoJCQlpZiAoVmVjdG9yMy5TcXJNYWduaXR1ZGUoYXR0YWNrZXIudHJhbnNmb3JtLnBvc2l0aW9uIC0gdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbikgPCBTdGF0cy5NYXhSYW5nZSAqIFN0YXRzLk1heFJhbmdlKQoJCQl7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzYyA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCgkJCWludCBtaW5pbXVtRFBTID0gTWF0aGYuUm91bmRUb0ludChTdGF0cy5NaW5pbXVtRGFtYWdlIC8gU3RhdHMuU3BlZWQpOwoJCQlpbnQgbWF4aW11bURQUyA9IE1hdGhmLlJvdW5kVG9JbnQoU3RhdHMuTWF4aW11bURhbWFnZSAvIFN0YXRzLlNwZWVkKTsKCgkJCWRlc2MgKz0gIlxuIjsKCQkJZGVzYyArPSAkIkRhbWFnZToge1N0YXRzLk1pbmltdW1EYW1hZ2V9IC0ge1N0YXRzLk1heGltdW1EYW1hZ2V9XG4iOwoJCQlkZXNjICs9ICQiRFBTOiB7bWluaW11bURQU30gLSB7bWF4aW11bURQU31cbiI7CgkJCWRlc2MgKz0gJCJBdHRhY2sgU3BlZWQgOiB7U3RhdHMuU3BlZWR9c1xuIjsKCQkJZGVzYyArPSAkIlJhbmdlIDoge1N0YXRzLk1heFJhbmdlfW1cbiI7CgoJCQlyZXR1cm4gZGVzYzsKCQl9CgoJCXB1YmxpYyBBdWRpb0NsaXAgR2V0SGl0U291bmQoKQoJCXsKCQkJaWYgKEhpdFNvdW5kcyA9PSBudWxsIHx8IEhpdFNvdW5kcy5MZW5ndGggPT0gMCkKCQkJCXJldHVybiBTRlhNYW5hZ2VyLkdldERlZmF1bHRIaXQoKTsKCgkJCXJldHVybiBIaXRTb3VuZHNbUmFuZG9tLlJhbmdlKDAsIEhpdFNvdW5kcy5MZW5ndGgpXTsKCQl9CgoJCXB1YmxpYyBBdWRpb0NsaXAgR2V0U3dpbmdTb3VuZCgpCgkJewoJCQlpZiAoU3dpbmdTb3VuZHMgPT0gbnVsbCB8fCBTd2luZ1NvdW5kcy5MZW5ndGggPT0gMCkKCQkJCXJldHVybiBTRlhNYW5hZ2VyLkdldERlZmF1bHRTd2luZ1NvdW5kKCk7CgoJCQlyZXR1cm4gU3dpbmdTb3VuZHNbUmFuZG9tLlJhbmdlKDAsIFN3aW5nU291bmRzLkxlbmd0aCldOwoJCX0KCX0KfQoKLy8gI2lmIFVOSVRZX0VESVRPUgovLyBbQ3VzdG9tRWRpdG9yKHR5cGVvZihXZWFwb24pKV0KLy8gcHVibGljIGNsYXNzIFdlYXBvbkVkaXRvciA6IEVkaXRvcgovLyB7Ci8vICAgICBXZWFwb24gbV9UYXJnZXQ7CgovLyAgICAgSXRlbUVkaXRvciBtX0l0ZW1FZGl0b3I7CgovLyAgICAgTGlzdDxzdHJpbmc+IG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlOwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHk7CgovLyAgICAgTGlzdDxzdHJpbmc+IG1fQXZhaWxhYmxlV2VhcG9uQXR0YWNrRWZmZWN0VHlwZTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eTsKCi8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9IaXRTb3VuZFByb3BzOwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fU3dpbmdTb3VuZFByb3BzOwoKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1TdHJlbmd0aFByb3BlcnR5OwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eTsKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1EZWZlbnNlUHJvcGVydHk7CgovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fV2VhcG9uU3RhdFByb3BlcnR5OwoKLy8gICAgIFtNZW51SXRlbSgiQXNzZXRzL0NyZWF0ZS9EYXRhL1dlYXBvbiIsIHByaW9yaXR5ID0gLTk5OSldCi8vICAgICBzdGF0aWMgcHVibGljIHZvaWQgQ3JlYXRlV2VhcG9uKCkKLy8gICAgIHsKLy8gICAgICAgICB2YXIgbmV3V2VhcG9uID0gQ3JlYXRlSW5zdGFuY2U8V2VhcG9uPigpOwovLyAgICAgICAgIG5ld1dlYXBvbi5TbG90ID0gKEVxdWlwbWVudEl0ZW0uRXF1aXBtZW50U2xvdCk2NjY7CgovLyAgICAgICAgIFByb2plY3RXaW5kb3dVdGlsLkNyZWF0ZUFzc2V0KG5ld1dlYXBvbiwgIndlYXBvbi5hc3NldCIpOwovLyAgICAgfQoKLy8gICAgIHZvaWQgT25FbmFibGUoKQovLyAgICAgewovLyAgICAgICAgIG1fVGFyZ2V0ID0gdGFyZ2V0IGFzIFdlYXBvbjsKLy8gICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5FcXVpcHBlZEVmZmVjdHMpKTsKLy8gICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uQXR0YWNrRWZmZWN0cykpOwoKLy8gICAgICAgICBtX01pbmltdW1TdHJlbmd0aFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bVN0cmVuZ3RoKSk7Ci8vICAgICAgICAgbV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bUFnaWxpdHkpKTsKLy8gICAgICAgICBtX01pbmltdW1EZWZlbnNlUHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtRGVmZW5zZSkpOwoKLy8gICAgICAgICBtX1dlYXBvblN0YXRQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uU3RhdHMpKTsKCi8vICAgICAgICAgbV9IaXRTb3VuZFByb3BzID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5IaXRTb3VuZHMpKTsKLy8gICAgICAgICBtX1N3aW5nU291bmRQcm9wcyA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihXZWFwb24uU3dpbmdTb3VuZHMpKTsKCi8vICAgICAgICAgbV9JdGVtRWRpdG9yID0gbmV3IEl0ZW1FZGl0b3IoKTsKLy8gICAgICAgICBtX0l0ZW1FZGl0b3IuSW5pdChzZXJpYWxpemVkT2JqZWN0KTsKCi8vICAgICAgICAgdmFyIGxvb2t1cCA9IHR5cGVvZihFZmZlY3REYXRhKTsKLy8gICAgICAgICBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gICAgICAgICAgICAgLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gICAgICAgICAgICAgLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gICAgICAgICAgICAgLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gICAgICAgICAgICAgLlRvTGlzdCgpOwoKLy8gICAgICAgICBsb29rdXAgPSB0eXBlb2YoRWZmZWN0RGF0YSk7Ci8vICAgICAgICAgbV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlID0gU3lzdGVtLkFwcERvbWFpbi5DdXJyZW50RG9tYWluLkdldEFzc2VtYmxpZXMoKQovLyAgICAgICAgICAgICAuU2VsZWN0TWFueShhc3NlbWJseSA9PiBhc3NlbWJseS5HZXRUeXBlcygpKQovLyAgICAgICAgICAgICAuV2hlcmUoeCA9PiB4LklzQ2xhc3MgJiYgIXguSXNBYnN0cmFjdCAmJiB4LklzU3ViY2xhc3NPZihsb29rdXApKQovLyAgICAgICAgICAgICAuU2VsZWN0KHR5cGUgPT4gdHlwZS5OYW1lKQovLyAgICAgICAgICAgICAuVG9MaXN0KCk7Ci8vICAgICB9CgovLyAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgT25JbnNwZWN0b3JHVUkoKQovLyAgICAgewovLyAgICAgICAgIG1fSXRlbUVkaXRvci5HVUkoKTsKCi8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSk7Ci8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5KTsKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX01pbmltdW1EZWZlbnNlUHJvcGVydHkpOwoKLy8gICAgICAgICAvL0VkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fV2VhcG9uU3RhdFByb3BlcnR5LCB0cnVlKTsKLy8gICAgICAgICB2YXIgY2hpbGQgPSBtX1dlYXBvblN0YXRQcm9wZXJ0eS5Db3B5KCk7Ci8vICAgICAgICAgdmFyIGRlcHRoID0gY2hpbGQuZGVwdGg7Ci8vICAgICAgICAgY2hpbGQuTmV4dFZpc2libGUodHJ1ZSk7CgovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5MYWJlbEZpZWxkKCJXZWFwb24gU3RhdHMiLCBFZGl0b3JTdHlsZXMuYm9sZExhYmVsKTsKLy8gICAgICAgICB3aGlsZSAoY2hpbGQuZGVwdGggPiBkZXB0aCkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKGNoaWxkLCB0cnVlKTsKLy8gICAgICAgICAgICAgY2hpbGQuTmV4dFZpc2libGUoZmFsc2UpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9IaXRTb3VuZFByb3BzLCB0cnVlKTsKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX1N3aW5nU291bmRQcm9wcywgdHJ1ZSk7CgovLyAgICAgICAgIGludCBjaG9pY2UgPSBFZGl0b3JHVUlMYXlvdXQuUG9wdXAoIkFkZCBuZXcgRXF1aXBtZW50IEVmZmVjdCIsIC0xLCBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZS5Ub0FycmF5KCkpOwoKLy8gICAgICAgICBpZiAoY2hvaWNlICE9IC0xKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgdmFyIG5ld0luc3RhbmNlID0gU2NyaXB0YWJsZU9iamVjdC5DcmVhdGVJbnN0YW5jZShtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZVtjaG9pY2VdKTsKCi8vICAgICAgICAgICAgIEFzc2V0RGF0YWJhc2UuQWRkT2JqZWN0VG9Bc3NldChuZXdJbnN0YW5jZSwgdGFyZ2V0KTsKCi8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuSW5zZXJ0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSk7Ci8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSAtIDEpLm9iamVjdFJlZmVyZW5jZVZhbHVlID0gbmV3SW5zdGFuY2U7Ci8vICAgICAgICAgfQoKCi8vICAgICAgICAgRWRpdG9yIGVkID0gbnVsbDsKLy8gICAgICAgICBpbnQgdG9EZWxldGUgPSAtMTsKLy8gICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KGkpOyAgICAgICAgICAgCi8vICAgICAgICAgICAgIFNlcmlhbGl6ZWRPYmplY3Qgb2JqID0gbmV3IFNlcmlhbGl6ZWRPYmplY3QoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSk7CgovLyAgICAgICAgICAgICBFZGl0b3IuQ3JlYXRlQ2FjaGVkRWRpdG9yKGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUsIG51bGwsIHJlZiBlZCk7CgovLyAgICAgICAgICAgICBlZC5Pbkluc3BlY3RvckdVSSgpOwovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuRW5kVmVydGljYWwoKTsKCi8vICAgICAgICAgICAgIGlmIChHVUlMYXlvdXQuQnV0dG9uKCItIiwgR1VJTGF5b3V0LldpZHRoKDMyKSkpCi8vICAgICAgICAgICAgIHsKLy8gICAgICAgICAgICAgICAgIHRvRGVsZXRlID0gaTsKLy8gICAgICAgICAgICAgfQovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuRW5kSG9yaXpvbnRhbCgpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgaWYgKHRvRGVsZXRlICE9IC0xKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgdmFyIGl0ZW0gPSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpLm9iamVjdFJlZmVyZW5jZVZhbHVlOwovLyAgICAgICAgICAgICBEZXN0cm95SW1tZWRpYXRlKGl0ZW0sIHRydWUpOwoKLy8gICAgICAgICAgICAgLy9uZWVkIHRvIGRvIGl0IHR3aWNlLCBmaXJzdCB0aW1lIGp1c3QgbnVsbGlmeSB0aGUgZW50cnksIHNlY29uZCBhY3R1YWxseSByZW1vdmUgaXQuCi8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICAvL2F0dGFjawovLyAgICAgICAgIGNob2ljZSA9IEVkaXRvckdVSUxheW91dC5Qb3B1cCgiQWRkIG5ldyBXZWFwb24gQXR0YWNrIEVmZmVjdCIsIC0xLCBtX0F2YWlsYWJsZVdlYXBvbkF0dGFja0VmZmVjdFR5cGUuVG9BcnJheSgpKTsKCi8vICAgICAgICAgaWYgKGNob2ljZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlW2Nob2ljZV0pOwoKLy8gICAgICAgICAgICAgQXNzZXREYXRhYmFzZS5BZGRPYmplY3RUb0Fzc2V0KG5ld0luc3RhbmNlLCB0YXJnZXQpOwoKLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuSW5zZXJ0QXJyYXlFbGVtZW50QXRJbmRleChtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAgICAgICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSAtIDEpLm9iamVjdFJlZmVyZW5jZVZhbHVlID0gbmV3SW5zdGFuY2U7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICB0b0RlbGV0ZSA9IC0xOwovLyAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChpKTsgICAgICAgICAgIAovLyAgICAgICAgICAgICBTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gICAgICAgICAgICAgRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gICAgICAgICAgICAgZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAgICAgICAgICAgICBpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAgICAgICAgICAgICB7Ci8vICAgICAgICAgICAgICAgICB0b0RlbGV0ZSA9IGk7Ci8vICAgICAgICAgICAgIH0KLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIGlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIHZhciBpdGVtID0gbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSkub2JqZWN0UmVmZXJlbmNlVmFsdWU7Ci8vICAgICAgICAgICAgIERlc3Ryb3lJbW1lZGlhdGUoaXRlbSwgdHJ1ZSk7CgovLyAgICAgICAgICAgICAvL25lZWQgdG8gZG8gaXQgdHdpY2UsIGZpcnN0IHRpbWUganVzdCBudWxsaWZ5IHRoZSBlbnRyeSwgc2Vjb25kIGFjdHVhbGx5IHJlbW92ZSBpdC4KLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgc2VyaWFsaXplZE9iamVjdC5BcHBseU1vZGlmaWVkUHJvcGVydGllcygpOwovLyAgICAgfQovLyB9Ci8vICNlbmRpZgAAAAAAAAAA1CgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1711529589.9404235"
					},
					"AQAAAAAAAAAAAAAA1CgAAAAAAADUKAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgVmVjdG9yMyA9IFVuaXR5RW5naW5lLlZlY3RvcjM7CiNpZiBVTklUWV9FRElUT1IKdXNpbmcgVW5pdHlFZGl0b3I7CnVzaW5nIFN5c3RlbS5MaW5xOwojZW5kaWYKCgovLy8gPHN1bW1hcnk+Ci8vLyBTcGVjaWFsIGNhc2Ugb2YgRXF1aXBtZW50SXRlbSBmb3Igd2VhcG9uLCBhcyB0aGV5IGhhdmUgYSB3aG9sZSBhdHRhY2sgc3lzdGVtIGluIGFkZGl0aW9uLiBMaWtlIEVxdWlwbWVudCB0aGV5Ci8vLyBjYW4gaGF2ZSBtaW5pbXVtIHN0YXRzIGFuZCBlcXVpcHBlZCBlZmZlY3QsIGJ1dCBhbHNvIGhhdmUgYSBsaXN0IG9mIFdlYXBvbkF0dGFja0VmZmVjdCB0aGF0IHdpbGwgaGF2ZSB0aGVpcgovLy8gT25BdHRhY2sgZnVuY3Rpb24gY2FsbGVkIGR1cmluZyBhIGhpdCwgYW5kIHRoZWlyIE9uUG9zdEF0dGFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgYWxsIE9uQXR0YWNrIG9mIGFsbCBlZmZlY3RzCi8vLyBhcmUgY2FsbGVkLgovLy8gPC9zdW1tYXJ5PgpwdWJsaWMgY2xhc3MgV2VhcG9uIDogRXF1aXBtZW50SXRlbQp7CglbU3lzdGVtLlNlcmlhbGl6YWJsZV0KCXB1YmxpYyBzdHJ1Y3QgU3RhdAoJewoJCXB1YmxpYyBmbG9hdCBTcGVlZDsKCQlwdWJsaWMgaW50IE1pbmltdW1EYW1hZ2U7CgkJcHVibGljIGludCBNYXhpbXVtRGFtYWdlOwoJCXB1YmxpYyBmbG9hdCBNYXhSYW5nZTsKCQlwdWJsaWMgaW50IEFkZGl0aW9uYWxUYXJnZXRzOwoJfQoJcHVibGljIGVudW0gV2VhcG9uVHlwZQoJewoJCU5vbmUsCgkJU3dvcmQsCgkJQXhlLAoJCVJha2UsCgkJTWFjZSwKCQlEYWdnZXIsCgkJQm93LAoJCU1hZ2ljV2VhcG9uLAoJCVRocm93bldlYXBvbgoJfQoJW0hlYWRlcigiV2VhcG9uU3RhdHMiKV0KCXB1YmxpYyBTdGF0IFN0YXRzID0gbmV3IFN0YXQoKSB7IFNwZWVkID0gMS4wZiwgTWF4aW11bURhbWFnZSA9IDEsIE1pbmltdW1EYW1hZ2UgPSAxLCBNYXhSYW5nZSA9IDEsIEFkZGl0aW9uYWxUYXJnZXRzID0gMCB9OwoJcHVibGljIFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSBkYW1hZ2VUeXBlOwoJcHVibGljIFdlYXBvblR5cGUgd2VhcG9uVHlwZTsKCXB1YmxpYyBMaXN0PEVmZmVjdERhdGE+IEF0dGFja0VmZmVjdHM7CglwdWJsaWMgU2tpbGwgV2VhcG9uU2tpbGw7CglwdWJsaWMgQnVsbGV0IGJ1bGxldFBiOwoKCVtIZWFkZXIoIlNvdW5kcyIpXQoJcHVibGljIEF1ZGlvQ2xpcFtdIEhpdFNvdW5kczsKCXB1YmxpYyBBdWRpb0NsaXBbXSBTd2luZ1NvdW5kczsKCglwdWJsaWMgdm9pZCBBdHRhY2soQ2hhcmFjdGVyIGF0dGFja2VyLCBDaGFyYWN0ZXIgdGFyZ2V0KQoJewoJCURhbWFnZSBkYW1hZ2UgPSBuZXcgRGFtYWdlKHRhcmdldCwgYXR0YWNrZXIpOwoJCWludCBkYW1hZ2VOdW0gPSBSYW5kb20uUmFuZ2UoU3RhdHMuTWluaW11bURhbWFnZSwgU3RhdHMuTWF4aW11bURhbWFnZSArIDEpOwoJCWRhbWFnZS5BZGREYW1hZ2UoZGFtYWdlVHlwZSwgZGFtYWdlTnVtKTsKCQlpZiAoYnVsbGV0UGIgIT0gbnVsbCkKCQl7CgkJCVZlY3RvcjMgYnVsbGV0UG9zID0gYXR0YWNrZXIuV2VhcG9uUm9vdC5idWxsZXRQb3M7CgkJCUJ1bGxldCBidWxsZXQgPSBJbnN0YW50aWF0ZShidWxsZXRQYiwgYnVsbGV0UG9zLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpOwoJCQlidWxsZXQuZGFtYWdlID0gZGFtYWdlOwoJCQlidWxsZXQudGFyZ2V0ID0gdGFyZ2V0OwoJCX0KCQllbHNlIGRhbWFnZS5UYWtlRGFtYWdlKCk7CgkJLy9mb3JlYWNoICh2YXIgd2FlIGluIEF0dGFja0VmZmVjdHMpCgkJLy93YWUuT25BdHRhY2sodGFyZ2V0LCBhdHRhY2tlciwgcmVmIGF0dGFja0VmZmVjdCk7CgoJCS8vdGFyZ2V0LlRha2VFZmZlY3QoYXR0YWNrRWZmZWN0KTsKCgkJLy9mb3JlYWNoICh2YXIgd2FlIGluIEF0dGFja0VmZmVjdHMpCgkJLy93YWUuT25Qb3N0QXR0YWNrKHRhcmdldCwgYXR0YWNrZXIsIGF0dGFja0VmZmVjdCk7Cgl9CgoJcHVibGljIGJvb2wgQ2FuSGl0KENoYXJhY3RlciBhdHRhY2tlciwgQ2hhcmFjdGVyIHRhcmdldCkKCXsKCQlpZiAoVmVjdG9yMy5TcXJNYWduaXR1ZGUoYXR0YWNrZXIudHJhbnNmb3JtLnBvc2l0aW9uIC0gdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbikgPCBTdGF0cy5NYXhSYW5nZSAqIFN0YXRzLk1heFJhbmdlKQoJCXsKCQkJcmV0dXJuIHRydWU7CgkJfQoKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgl7CgkJc3RyaW5nIGRlc2MgPSBiYXNlLkdldERlc2NyaXB0aW9uKCk7CgoJCWludCBtaW5pbXVtRFBTID0gTWF0aGYuUm91bmRUb0ludChTdGF0cy5NaW5pbXVtRGFtYWdlIC8gU3RhdHMuU3BlZWQpOwoJCWludCBtYXhpbXVtRFBTID0gTWF0aGYuUm91bmRUb0ludChTdGF0cy5NYXhpbXVtRGFtYWdlIC8gU3RhdHMuU3BlZWQpOwoKCQlkZXNjICs9ICJcbiI7CgkJZGVzYyArPSAkIkRhbWFnZToge1N0YXRzLk1pbmltdW1EYW1hZ2V9IC0ge1N0YXRzLk1heGltdW1EYW1hZ2V9XG4iOwoJCWRlc2MgKz0gJCJEUFM6IHttaW5pbXVtRFBTfSAtIHttYXhpbXVtRFBTfVxuIjsKCQlkZXNjICs9ICQiQXR0YWNrIFNwZWVkIDoge1N0YXRzLlNwZWVkfXNcbiI7CgkJZGVzYyArPSAkIlJhbmdlIDoge1N0YXRzLk1heFJhbmdlfW1cbiI7CgoJCXJldHVybiBkZXNjOwoJfQoKCXB1YmxpYyBBdWRpb0NsaXAgR2V0SGl0U291bmQoKQoJewoJCWlmIChIaXRTb3VuZHMgPT0gbnVsbCB8fCBIaXRTb3VuZHMuTGVuZ3RoID09IDApCgkJCXJldHVybiBTRlhNYW5hZ2VyLkdldERlZmF1bHRIaXQoKTsKCgkJcmV0dXJuIEhpdFNvdW5kc1tSYW5kb20uUmFuZ2UoMCwgSGl0U291bmRzLkxlbmd0aCldOwoJfQoKCXB1YmxpYyBBdWRpb0NsaXAgR2V0U3dpbmdTb3VuZCgpCgl7CgkJaWYgKFN3aW5nU291bmRzID09IG51bGwgfHwgU3dpbmdTb3VuZHMuTGVuZ3RoID09IDApCgkJCXJldHVybiBTRlhNYW5hZ2VyLkdldERlZmF1bHRTd2luZ1NvdW5kKCk7CgoJCXJldHVybiBTd2luZ1NvdW5kc1tSYW5kb20uUmFuZ2UoMCwgU3dpbmdTb3VuZHMuTGVuZ3RoKV07Cgl9Cn0KCgovLyAjaWYgVU5JVFlfRURJVE9SCi8vIFtDdXN0b21FZGl0b3IodHlwZW9mKFdlYXBvbikpXQovLyBwdWJsaWMgY2xhc3MgV2VhcG9uRWRpdG9yIDogRWRpdG9yCi8vIHsKLy8gICAgIFdlYXBvbiBtX1RhcmdldDsKCi8vICAgICBJdGVtRWRpdG9yIG1fSXRlbUVkaXRvcjsKCi8vICAgICBMaXN0PHN0cmluZz4gbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGU7Ci8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eTsKCi8vICAgICBMaXN0PHN0cmluZz4gbV9BdmFpbGFibGVXZWFwb25BdHRhY2tFZmZlY3RUeXBlOwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5OwoKLy8gICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX0hpdFNvdW5kUHJvcHM7Ci8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9Td2luZ1NvdW5kUHJvcHM7CgovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHk7Ci8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5OwovLyAgICAgU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bURlZmVuc2VQcm9wZXJ0eTsKCi8vICAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9XZWFwb25TdGF0UHJvcGVydHk7CgovLyAgICAgW01lbnVJdGVtKCJBc3NldHMvQ3JlYXRlL0RhdGEvV2VhcG9uIiwgcHJpb3JpdHkgPSAtOTk5KV0KLy8gICAgIHN0YXRpYyBwdWJsaWMgdm9pZCBDcmVhdGVXZWFwb24oKQovLyAgICAgewovLyAgICAgICAgIHZhciBuZXdXZWFwb24gPSBDcmVhdGVJbnN0YW5jZTxXZWFwb24+KCk7Ci8vICAgICAgICAgbmV3V2VhcG9uLlNsb3QgPSAoRXF1aXBtZW50SXRlbS5FcXVpcG1lbnRTbG90KTY2NjsKCi8vICAgICAgICAgUHJvamVjdFdpbmRvd1V0aWwuQ3JlYXRlQXNzZXQobmV3V2VhcG9uLCAid2VhcG9uLmFzc2V0Iik7Ci8vICAgICB9CgovLyAgICAgdm9pZCBPbkVuYWJsZSgpCi8vICAgICB7Ci8vICAgICAgICAgbV9UYXJnZXQgPSB0YXJnZXQgYXMgV2VhcG9uOwovLyAgICAgICAgIG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLkVxdWlwcGVkRWZmZWN0cykpOwovLyAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5BdHRhY2tFZmZlY3RzKSk7CgovLyAgICAgICAgIG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtU3RyZW5ndGgpKTsKLy8gICAgICAgICBtX01pbmltdW1BZ2lsaXR5UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtQWdpbGl0eSkpOwovLyAgICAgICAgIG1fTWluaW11bURlZmVuc2VQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1EZWZlbnNlKSk7CgovLyAgICAgICAgIG1fV2VhcG9uU3RhdFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5TdGF0cykpOwoKLy8gICAgICAgICBtX0hpdFNvdW5kUHJvcHMgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoV2VhcG9uLkhpdFNvdW5kcykpOwovLyAgICAgICAgIG1fU3dpbmdTb3VuZFByb3BzID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKFdlYXBvbi5Td2luZ1NvdW5kcykpOwoKLy8gICAgICAgICBtX0l0ZW1FZGl0b3IgPSBuZXcgSXRlbUVkaXRvcigpOwovLyAgICAgICAgIG1fSXRlbUVkaXRvci5Jbml0KHNlcmlhbGl6ZWRPYmplY3QpOwoKLy8gICAgICAgICB2YXIgbG9va3VwID0gdHlwZW9mKEVmZmVjdERhdGEpOwovLyAgICAgICAgIG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlID0gU3lzdGVtLkFwcERvbWFpbi5DdXJyZW50RG9tYWluLkdldEFzc2VtYmxpZXMoKQovLyAgICAgICAgICAgICAuU2VsZWN0TWFueShhc3NlbWJseSA9PiBhc3NlbWJseS5HZXRUeXBlcygpKQovLyAgICAgICAgICAgICAuV2hlcmUoeCA9PiB4LklzQ2xhc3MgJiYgIXguSXNBYnN0cmFjdCAmJiB4LklzU3ViY2xhc3NPZihsb29rdXApKQovLyAgICAgICAgICAgICAuU2VsZWN0KHR5cGUgPT4gdHlwZS5OYW1lKQovLyAgICAgICAgICAgICAuVG9MaXN0KCk7CgovLyAgICAgICAgIGxvb2t1cCA9IHR5cGVvZihFZmZlY3REYXRhKTsKLy8gICAgICAgICBtX0F2YWlsYWJsZVdlYXBvbkF0dGFja0VmZmVjdFR5cGUgPSBTeXN0ZW0uQXBwRG9tYWluLkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpCi8vICAgICAgICAgICAgIC5TZWxlY3RNYW55KGFzc2VtYmx5ID0+IGFzc2VtYmx5LkdldFR5cGVzKCkpCi8vICAgICAgICAgICAgIC5XaGVyZSh4ID0+IHguSXNDbGFzcyAmJiAheC5Jc0Fic3RyYWN0ICYmIHguSXNTdWJjbGFzc09mKGxvb2t1cCkpCi8vICAgICAgICAgICAgIC5TZWxlY3QodHlwZSA9PiB0eXBlLk5hbWUpCi8vICAgICAgICAgICAgIC5Ub0xpc3QoKTsKLy8gICAgIH0KCi8vICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBPbkluc3BlY3RvckdVSSgpCi8vICAgICB7Ci8vICAgICAgICAgbV9JdGVtRWRpdG9yLkdVSSgpOwoKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX01pbmltdW1TdHJlbmd0aFByb3BlcnR5KTsKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX01pbmltdW1BZ2lsaXR5UHJvcGVydHkpOwovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bURlZmVuc2VQcm9wZXJ0eSk7CgovLyAgICAgICAgIC8vRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9XZWFwb25TdGF0UHJvcGVydHksIHRydWUpOwovLyAgICAgICAgIHZhciBjaGlsZCA9IG1fV2VhcG9uU3RhdFByb3BlcnR5LkNvcHkoKTsKLy8gICAgICAgICB2YXIgZGVwdGggPSBjaGlsZC5kZXB0aDsKLy8gICAgICAgICBjaGlsZC5OZXh0VmlzaWJsZSh0cnVlKTsKCi8vICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkxhYmVsRmllbGQoIldlYXBvbiBTdGF0cyIsIEVkaXRvclN0eWxlcy5ib2xkTGFiZWwpOwovLyAgICAgICAgIHdoaWxlIChjaGlsZC5kZXB0aCA+IGRlcHRoKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQoY2hpbGQsIHRydWUpOwovLyAgICAgICAgICAgICBjaGlsZC5OZXh0VmlzaWJsZShmYWxzZSk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX0hpdFNvdW5kUHJvcHMsIHRydWUpOwovLyAgICAgICAgIEVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fU3dpbmdTb3VuZFByb3BzLCB0cnVlKTsKCi8vICAgICAgICAgaW50IGNob2ljZSA9IEVkaXRvckdVSUxheW91dC5Qb3B1cCgiQWRkIG5ldyBFcXVpcG1lbnQgRWZmZWN0IiwgLTEsIG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlLlRvQXJyYXkoKSk7CgovLyAgICAgICAgIGlmIChjaG9pY2UgIT0gLTEpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICB2YXIgbmV3SW5zdGFuY2UgPSBTY3JpcHRhYmxlT2JqZWN0LkNyZWF0ZUluc3RhbmNlKG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlW2Nob2ljZV0pOwoKLy8gICAgICAgICAgICAgQXNzZXREYXRhYmFzZS5BZGRPYmplY3RUb0Fzc2V0KG5ld0luc3RhbmNlLCB0YXJnZXQpOwoKLy8gICAgICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5JbnNlcnRBcnJheUVsZW1lbnRBdEluZGV4KG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplKTsKLy8gICAgICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplIC0gMSkub2JqZWN0UmVmZXJlbmNlVmFsdWUgPSBuZXdJbnN0YW5jZTsKLy8gICAgICAgICB9CgoKLy8gICAgICAgICBFZGl0b3IgZWQgPSBudWxsOwovLyAgICAgICAgIGludCB0b0RlbGV0ZSA9IC0xOwovLyAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemU7ICsraSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5CZWdpbkhvcml6b250YWwoKTsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkJlZ2luVmVydGljYWwoKTsKLy8gICAgICAgICAgICAgdmFyIGl0ZW0gPSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgoaSk7ICAgICAgICAgICAKLy8gICAgICAgICAgICAgU2VyaWFsaXplZE9iamVjdCBvYmogPSBuZXcgU2VyaWFsaXplZE9iamVjdChpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlKTsKCi8vICAgICAgICAgICAgIEVkaXRvci5DcmVhdGVDYWNoZWRFZGl0b3IoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSwgbnVsbCwgcmVmIGVkKTsKCi8vICAgICAgICAgICAgIGVkLk9uSW5zcGVjdG9yR1VJKCk7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5FbmRWZXJ0aWNhbCgpOwoKLy8gICAgICAgICAgICAgaWYgKEdVSUxheW91dC5CdXR0b24oIi0iLCBHVUlMYXlvdXQuV2lkdGgoMzIpKSkKLy8gICAgICAgICAgICAgewovLyAgICAgICAgICAgICAgICAgdG9EZWxldGUgPSBpOwovLyAgICAgICAgICAgICB9Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5FbmRIb3Jpem9udGFsKCk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICBpZiAodG9EZWxldGUgIT0gLTEpCi8vICAgICAgICAgewovLyAgICAgICAgICAgICB2YXIgaXRlbSA9IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSkub2JqZWN0UmVmZXJlbmNlVmFsdWU7Ci8vICAgICAgICAgICAgIERlc3Ryb3lJbW1lZGlhdGUoaXRlbSwgdHJ1ZSk7CgovLyAgICAgICAgICAgICAvL25lZWQgdG8gZG8gaXQgdHdpY2UsIGZpcnN0IHRpbWUganVzdCBudWxsaWZ5IHRoZSBlbnRyeSwgc2Vjb25kIGFjdHVhbGx5IHJlbW92ZSBpdC4KLy8gICAgICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gICAgICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIC8vYXR0YWNrCi8vICAgICAgICAgY2hvaWNlID0gRWRpdG9yR1VJTGF5b3V0LlBvcHVwKCJBZGQgbmV3IFdlYXBvbiBBdHRhY2sgRWZmZWN0IiwgLTEsIG1fQXZhaWxhYmxlV2VhcG9uQXR0YWNrRWZmZWN0VHlwZS5Ub0FycmF5KCkpOwoKLy8gICAgICAgICBpZiAoY2hvaWNlICE9IC0xKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgdmFyIG5ld0luc3RhbmNlID0gU2NyaXB0YWJsZU9iamVjdC5DcmVhdGVJbnN0YW5jZShtX0F2YWlsYWJsZVdlYXBvbkF0dGFja0VmZmVjdFR5cGVbY2hvaWNlXSk7CgovLyAgICAgICAgICAgICBBc3NldERhdGFiYXNlLkFkZE9iamVjdFRvQXNzZXQobmV3SW5zdGFuY2UsIHRhcmdldCk7CgovLyAgICAgICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5JbnNlcnRBcnJheUVsZW1lbnRBdEluZGV4KG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSk7Ci8vICAgICAgICAgICAgIG1fV2VhcG9uQXR0YWNrRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgobV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplIC0gMSkub2JqZWN0UmVmZXJlbmNlVmFsdWUgPSBuZXdJbnN0YW5jZTsKLy8gICAgICAgICB9CgovLyAgICAgICAgIHRvRGVsZXRlID0gLTE7Ci8vICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemU7ICsraSkKLy8gICAgICAgICB7Ci8vICAgICAgICAgICAgIEVkaXRvckdVSUxheW91dC5CZWdpbkhvcml6b250YWwoKTsKLy8gICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkJlZ2luVmVydGljYWwoKTsKLy8gICAgICAgICAgICAgdmFyIGl0ZW0gPSBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KGkpOyAgICAgICAgICAgCi8vICAgICAgICAgICAgIFNlcmlhbGl6ZWRPYmplY3Qgb2JqID0gbmV3IFNlcmlhbGl6ZWRPYmplY3QoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSk7CgovLyAgICAgICAgICAgICBFZGl0b3IuQ3JlYXRlQ2FjaGVkRWRpdG9yKGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUsIG51bGwsIHJlZiBlZCk7CgovLyAgICAgICAgICAgICBlZC5Pbkluc3BlY3RvckdVSSgpOwovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuRW5kVmVydGljYWwoKTsKCi8vICAgICAgICAgICAgIGlmIChHVUlMYXlvdXQuQnV0dG9uKCItIiwgR1VJTGF5b3V0LldpZHRoKDMyKSkpCi8vICAgICAgICAgICAgIHsKLy8gICAgICAgICAgICAgICAgIHRvRGVsZXRlID0gaTsKLy8gICAgICAgICAgICAgfQovLyAgICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuRW5kSG9yaXpvbnRhbCgpOwovLyAgICAgICAgIH0KCi8vICAgICAgICAgaWYgKHRvRGVsZXRlICE9IC0xKQovLyAgICAgICAgIHsKLy8gICAgICAgICAgICAgdmFyIGl0ZW0gPSBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKLy8gICAgICAgICAgICAgRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKCi8vICAgICAgICAgICAgIC8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgovLyAgICAgICAgICAgICBtX1dlYXBvbkF0dGFja0VmZmVjdExpc3RQcm9wZXJ0eS5EZWxldGVBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKTsKLy8gICAgICAgICAgICAgbV9XZWFwb25BdHRhY2tFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vICAgICAgICAgfQoKLy8gICAgICAgICBzZXJpYWxpemVkT2JqZWN0LkFwcGx5TW9kaWZpZWRQcm9wZXJ0aWVzKCk7Ci8vICAgICB9Ci8vIH0KLy8gI2VuZGlm",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "Assets/Standard Assets/Scripts/RoleAI.cs",
			"settings":
			{
				"buffer_size": 1865,
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABpFgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBDcmVhdG9yS2l0Q29kZUludGVybmFsOwp1c2luZyBNeUJveDsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihSb2xlQ29udHJvbCkpXQpwdWJsaWMgY2xhc3MgUm9sZUFJIDogTW9ub0JlaGF2aW91cgp7CglwdWJsaWMgZW51bSBDYW1wCgl7CgkJUExBWUVSLAoJCUVORU1ZLAoJCU5FVVRSQUwKCX0KCXB1YmxpYyBDYW1wIGNhbXA7CglwdWJsaWMgSW50ZXJhY3RPblRyaWdnZXIgRW5lbXlEZXRlY3RvcjsKCXB1YmxpYyBJbnRlcmFjdE9uVHJpZ2dlciBJbnRlcmFjdERldGVjdG9yOwoJcHVibGljIEludGVyYWN0T25UcmlnZ2VyIFNjZW5lRGV0ZWN0b3I7CglwdWJsaWMgYm9vbCBPZmZlbnNpdmUgeyBnZXQgeyByZXR1cm4gbV9PZmZlbnNpdmU7IH0gc2V0IHsgfSB9CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKGNhbXApLCBmYWxzZSwgQ2FtcC5FTkVNWSldCglbU2VyaWFsaXplRmllbGRdIGJvb2wgbV9PZmZlbnNpdmU7CglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoY2FtcCksIHRydWUsIENhbXAuUExBWUVSKV0KCVtTZXJpYWxpemVGaWVsZF0gZmxvYXQgbV9XYW5kZXJSYWRpdXM7CglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoY2FtcCksIHRydWUsIENhbXAuUExBWUVSKV0KCVtTZXJpYWxpemVGaWVsZF0gZmxvYXQgbV9XYW5kZXJCZWF0ID0gMy4wZjsKCWZsb2F0IG1fSWRsZUR1cmluZzsKCVJvbGVDb250cm9sIG1fcm9sZTsKCUdhbWVPYmplY3QgbV9pbnRlcmFjdFRhcmdldDsKCglSZW5kZXJlciBtX1JlbmRlcmVyOwoJYm9vbCBtX2J1aWxkbW9kZWwgPSB0cnVlOwoJcHVibGljIFJlbmRlcmVyIEJ1aWxkUmVuZGVyCgl7CgkJZ2V0IHsgcmV0dXJuIG1fUmVuZGVyZXI7IH0KCX0KCglwdWJsaWMgdm9pZCBJbml0KFJvbGVDb250cm9sIHJvbGUpCgl7CgkJbV9yb2xlID0gcm9sZTsKCQltX3JvbGUuZXZlbnRTZW5kZXIuZXZlbnRzLkFkZExpc3RlbmVyKE9uUm9sZUV2ZW50KTsKCQlFbmVteURldGVjdG9yLk9uRW50ZXIuQWRkTGlzdGVuZXIoT25FbmVteUVudGVyKTsKCQlFbmVteURldGVjdG9yLk9uRXhpdC5BZGRMaXN0ZW5lcihPbkVuZW15RXhpdCk7CgkJRW5lbXlEZXRlY3Rvci5PbkV2ZW50LkFkZExpc3RlbmVyKE9uRW5lbXlFdmVudCk7CgkJSW50ZXJhY3REZXRlY3Rvci5PbkVudGVyLkFkZExpc3RlbmVyKE9uSW50ZXJhY3RlckVudGVyKTsKCQlJbnRlcmFjdERldGVjdG9yLk9uRXhpdC5BZGRMaXN0ZW5lcihPbkludGVyYWN0ZXJFeGl0KTsKCQlJbnRlcmFjdERldGVjdG9yLk9uRXZlbnQuQWRkTGlzdGVuZXIoT25JbnRlcmFjdGVyRXZlbnQpOwoJCW1fUmVuZGVyZXIgPSBTY2VuZURldGVjdG9yLkdldENvbXBvbmVudDxNZXNoUmVuZGVyZXI+KCk7CgkJLy8gbV9yb2xlID0gcm9sZTsKCQlTY2VuZURldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJTY2VuZSIpOwoJCXN3aXRjaCAobV9yb2xlLkJhc2VBSS5jYW1wKQoJCXsKCQkJY2FzZSBSb2xlQUkuQ2FtcC5QTEFZRVI6CgkJCQltX3JvbGUuZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyIik7CgkJCQlFbmVteURldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJFbmVteSIpOwoJCQkJSW50ZXJhY3REZXRlY3Rvci5sYXllcnMgPSBMYXllck1hc2suR2V0TWFzaygiSW50ZXJhY3RhYmxlIik7CgkJCQltX09mZmVuc2l2ZSA9IHRydWU7CgkJCQltX1dhbmRlclJhZGl1cyA9IDA7CgkJCQlicmVhazsKCQkJY2FzZSBSb2xlQUkuQ2FtcC5FTkVNWToKCQkJCW1fcm9sZS5nYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJRW5lbXlEZXRlY3Rvci5sYXllcnMgPSBMYXllck1hc2suR2V0TWFzaygiUGxheWVyIik7CgkJCQlJbnRlcmFjdERldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJJbnRlcmFjdGFibGUiKTsKCQkJCWJyZWFrOwoJCQljYXNlIFJvbGVBSS5DYW1wLk5FVVRSQUw6CgkJCQltX3JvbGUuZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiSW50ZXJhY3RhYmxlIik7CgkJCQlFbmVteURldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJOb3RpbmciKTsKCQkJCUludGVyYWN0RGV0ZWN0b3IubGF5ZXJzID0gTGF5ZXJNYXNrLkdldE1hc2soIkludGVyYWN0YWJsZSIsICJQbGF5ZXIiKTsKCQkJCW1fT2ZmZW5zaXZlID0gZmFsc2U7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCWJyZWFrOwoJCX0KCX0KCgl2b2lkIE9uUm9sZUV2ZW50KEdhbWVPYmplY3Qgb2JqLCBzdHJpbmcgZXZlbnROYW1lKQoJewoJCWlmIChldmVudE5hbWUgPT0gInJvbGVFdmVudF9PbklkbGluZyIpCgkJewoJCQltX0lkbGVEdXJpbmcgKz0gVGltZS5kZWx0YVRpbWU7CgkJCWlmIChtX0lkbGVEdXJpbmcgPiBtX1dhbmRlckJlYXQgJiYgbV9XYW5kZXJSYWRpdXMgPiAwKQoJCQl7CgkJCQlXYW5kZXJpbmcoKTsKCQkJCW1fSWRsZUR1cmluZyA9IDA7CgkJCX0KCQl9CgkJaWYgKGV2ZW50TmFtZSA9PSAicm9sZUV2ZW50X09uRGFtYWdlIikKCQl7CgkJCWlmICghbV9PZmZlbnNpdmUpIG1fT2ZmZW5zaXZlID0gdHJ1ZTsKCQkJaWYgKCFtX3JvbGUuQ3VycmVudEVuZW15KSBtX3JvbGUuQ3VycmVudEVuZW15ID0gRW5lbXlEZXRlY3Rvci5HZXROZWFyZXN0KCk/LkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCX0KCQlVSVJvbGVIdWQgaHVkID0gbV9yb2xlLkdldENvbXBvbmVudEluQ2hpbGRyZW48VUlSb2xlSHVkPigpOwoJCWlmIChodWQgIT0gbnVsbCkgaHVkLkJ1YmJsZShldmVudE5hbWUpOwoJfQoKCXZvaWQgT25FbmVteUVudGVyKEdhbWVPYmplY3QgZW50ZXIpCgl7CgkJaWYgKG1fcm9sZS5DdXJyZW50RW5lbXkgPT0gbnVsbCkgbV9yb2xlLkN1cnJlbnRFbmVteSA9IGVudGVyLkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCWlmIChtX3JvbGUuU2tpbGxVc2VyLkN1clNraWxsICE9IG51bGwpIG1fcm9sZS5Ta2lsbFVzZXIuQWRkVGFyZ2V0KGVudGVyKTsKCQkvL2VudGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLkFkZExpc3RlbmVyKE9uRW5lbXlFdmVudCk7CgkJLy9tX2V2ZW50U2VuZGVyLlNlbmQoZW50ZXIsICJyb2xlRXZlbnRfT25FbmVteUVudGVyIik7Cgl9CgoJdm9pZCBPbkVuZW15RXhpdChHYW1lT2JqZWN0IGV4aXRlcikKCXsKCQlpZiAobV9yb2xlLkN1cnJlbnRFbmVteSAmJiBtX3JvbGUuQ3VycmVudEVuZW15LmdhbWVPYmplY3QgPT0gZXhpdGVyKQoJCXsKCQkJbV9yb2xlLkN1cnJlbnRFbmVteSA9IEVuZW15RGV0ZWN0b3IuR2V0TmVhcmVzdCgpPy5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKTsKCQkJLy9tX2V2ZW50U2VuZGVyLlNlbmQoZXhpdGVyLCAicm9sZUV2ZW50X09uRW5lbXlFeGl0Iik7CgkJfQoJCWlmIChtX3JvbGUuU2tpbGxVc2VyLkN1clNraWxsICE9IG51bGwpIG1fcm9sZS5Ta2lsbFVzZXIuUmVtb3ZlVGFyZ2V0KGV4aXRlcik7Cgl9Cgl2b2lkIE9uRW5lbXlFdmVudChHYW1lT2JqZWN0IHNlbmRlciwgc3RyaW5nIGV2ZW50TWVzc2FnZSkKCXsKCQlpZiAoZXZlbnRNZXNzYWdlID09ICJyb2xlRXZlbnRfT25TdGF0ZV9ERUFEIikKCQl7CgkJCS8vbV9yb2xlLkN1clN0YXRlID0gUm9sZUNvbnRyb2wuU3RhdGUuSURMRTsKCQkJRGVidWcuTG9nKCJPbkVuZW15RXZlbnQ6IHRhcmdldD0gIiArIHNlbmRlciArICJldmVudD0gIiArIGV2ZW50TWVzc2FnZSk7CgkJfQoJfQoKCXZvaWQgT25JbnRlcmFjdGVyRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCgl9CgoJdm9pZCBPbkludGVyYWN0ZXJFeGl0KEdhbWVPYmplY3QgZXhpdGVyKQoJewoJCWlmIChtX2ludGVyYWN0VGFyZ2V0ICYmIG1faW50ZXJhY3RUYXJnZXQgPT0gZXhpdGVyKSBtX2ludGVyYWN0VGFyZ2V0ID0gSW50ZXJhY3REZXRlY3Rvci5HZXROZWFyZXN0KCk7Cgl9CgoJdm9pZCBPbkludGVyYWN0ZXJFdmVudChHYW1lT2JqZWN0IHNlbmRlciwgc3RyaW5nIGV2ZW50TWVzc2FnZSkKCXsKCQlpZiAoZXZlbnRNZXNzYWdlID09ICJyb2xlRXZlbnRfT25TdGF0ZV9ERUFEIiAmJiBtX2ludGVyYWN0VGFyZ2V0ID09IHNlbmRlcikKCQl7CgkJCW1faW50ZXJhY3RUYXJnZXQgPSBJbnRlcmFjdERldGVjdG9yLkdldE5lYXJlc3QoKTsKCQl9CgkJaWYgKGV2ZW50TWVzc2FnZSA9PSAicm9sZUV2ZW50X09uU3RhdGVfSURMRSIgJiYgbV9pbnRlcmFjdFRhcmdldCA9PSBudWxsICYmIG1fcm9sZS5pc0lkbGUpCgkJewoJCQltX2ludGVyYWN0VGFyZ2V0ID0gc2VuZGVyOwoJCQlHZXRDb21wb25lbnRJbkNoaWxkcmVuPFVJUm9sZUh1ZD4oKT8uQnViYmxlKHNlbmRlci5HZXRDb21wb25lbnQ8Um9sZUNvbnRyb2w+KCk/LkRhdGEuQ2hhcmFjdGVyTmFtZSk7CgkJCW1fcm9sZS5Mb29rQXQoc2VuZGVyLnRyYW5zZm9ybSk7CgkJfQoJCS8vRGVidWcuTG9nKCJPbkludGVyYWN0ZXJFdmVudDogSW50ZXJhY3RlclRhcmdldD0gIiArIHNlbmRlciArICJldmVudD0gIiArIGV2ZW50TWVzc2FnZSk7Cgl9CgoJdm9pZCBXYW5kZXJpbmcoKQoJewoJCWZsb2F0IHJhbmRvbVggPSBSYW5kb20uUmFuZ2UoMGYsIG1fV2FuZGVyUmFkaXVzKTsKCQlmbG9hdCByYW5kb21aID0gUmFuZG9tLlJhbmdlKDBmLCBtX1dhbmRlclJhZGl1cyk7CgoJCVZlY3RvcjMgcmFuZG9tUG9zID0gbmV3IFZlY3RvcjMobV9yb2xlLkJpcnRoUG9zLnggKyByYW5kb21YLCBtX3JvbGUuQmlydGhQb3MueSwgbV9yb2xlLkJpcnRoUG9zLnogKyByYW5kb21aKTsKCQltX3JvbGUuTW92ZVRvKHJhbmRvbVBvcyk7CgkJLy9EZWJ1Zy5Mb2coJCJ7bV9yb2xlfS1XYW5kZXJpbmcgPT4ge3JhbmRvbVBvc30iKTsKCX0KCgl2b2lkIEhpZ2hsaWdodFRhcmdldChHYW1lT2JqZWN0IG9iaiwgYm9vbCBhY3RpdmUpCgl7CgkJSGlnaGxpZ2h0YWJsZU9iamVjdCB0YXJnZXQgPSBvYmouR2V0Q29tcG9uZW50PEhpZ2hsaWdodGFibGVPYmplY3Q+KCk7CgkJaWYgKHRhcmdldCkKCQl7CgkJCWlmIChhY3RpdmUpIHRhcmdldC5IaWdobGlnaHQoKTsKCQkJZWxzZSB0YXJnZXQuRGVoaWdobGlnaHQoKTsKCQl9Cgl9Cn0KCi8vICNpZiBVTklUWV9FRElUT1IKLy8gW0N1c3RvbUVkaXRvcih0eXBlb2YoUm9sZUFJKSldCi8vIHB1YmxpYyBjbGFzcyBSb2xlQUlJbnNwZWN0b3IgOiBFZGl0b3IgIAovLyB7Ci8vIAlTZXJpYWxpemVkT2JqZWN0IG9iajsgIAovLyAJUm9sZUFJIHJvbGVBaTsgIAovLyAJU2VyaWFsaXplZFByb3BlcnR5IGNhbXA7ICAKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX09mZmVuc2l2ZTsgCgovLyAJdm9pZCBPbkVuYWJsZSgpCi8vIAl7ICAKLy8gICAgIAlvYmogPSBuZXcgU2VyaWFsaXplZE9iamVjdCh0YXJnZXQpOyAgCi8vICAgICAJbV9PZmZlbnNpdmUgPSBvYmouRmluZFByb3BlcnR5KCJtX09mZmVuc2l2ZSIpOwovLyAJfQoKLy8gCXB1YmxpYyBvdmVycmlkZSB2b2lkIE9uSW5zcGVjdG9yR1VJKCkKLy8gCXsKLy8gCQliYXNlLk9uSW5zcGVjdG9yR1VJKCk7Ci8vIAkJcm9sZUFpID0gKFJvbGVBSSl0YXJnZXQ7Ci8vIAkJaWYgKHJvbGVBaS5jYW1wID09IFJvbGVBSS5DYW1wLkVORU1ZKQovLyAJCXsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9PZmZlbnNpdmUpOwovLyAJCX0KLy8gCX0KLy8gfSAKLy8gI2VuZGlmCgAAAAAAAAAAkRYAAAAAAAAAAAAA",
					"DQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA1QsAAAAAAADVCwAAAAAAAAAAAAAAAPC/"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACRFgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBDcmVhdG9yS2l0Q29kZUludGVybmFsOwp1c2luZyBNeUJveDsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihSb2xlQ29udHJvbCkpXQpwdWJsaWMgY2xhc3MgUm9sZUFJIDogTW9ub0JlaGF2aW91cgp7CglwdWJsaWMgZW51bSBDYW1wCgl7CgkJUExBWUVSLAoJCUVORU1ZLAoJCU5FVVRSQUwKCX0KCXB1YmxpYyBDYW1wIGNhbXA7CglwdWJsaWMgSW50ZXJhY3RPblRyaWdnZXIgRW5lbXlEZXRlY3RvcjsKCXB1YmxpYyBJbnRlcmFjdE9uVHJpZ2dlciBJbnRlcmFjdERldGVjdG9yOwoJcHVibGljIEludGVyYWN0T25UcmlnZ2VyIFNjZW5lRGV0ZWN0b3I7CglwdWJsaWMgYm9vbCBPZmZlbnNpdmUgeyBnZXQgeyByZXR1cm4gbV9PZmZlbnNpdmU7IH0gc2V0IHsgfSB9CgoJW0NvbmRpdGlvbmFsRmllbGQobmFtZW9mKGNhbXApLCBmYWxzZSwgQ2FtcC5FTkVNWSldCglbU2VyaWFsaXplRmllbGRdIGJvb2wgbV9PZmZlbnNpdmU7CglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoY2FtcCksIHRydWUsIENhbXAuUExBWUVSKV0KCVtTZXJpYWxpemVGaWVsZF0gZmxvYXQgbV9XYW5kZXJSYWRpdXM7CglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoY2FtcCksIHRydWUsIENhbXAuUExBWUVSKV0KCVtTZXJpYWxpemVGaWVsZF0gZmxvYXQgbV9XYW5kZXJCZWF0ID0gMy4wZjsKCWZsb2F0IG1fSWRsZUR1cmluZzsKCVJvbGVDb250cm9sIG1fcm9sZTsKCUdhbWVPYmplY3QgbV9pbnRlcmFjdFRhcmdldDsKCglSZW5kZXJlciBtX1JlbmRlcmVyOwoJYm9vbCBtX2J1aWxkbW9kZWwgPSB0cnVlOwoJcHVibGljIFJlbmRlcmVyIEJ1aWxkUmVuZGVyCgl7CgkJZ2V0IHsgcmV0dXJuIG1fUmVuZGVyZXI7IH0KCX0KCglwdWJsaWMgdm9pZCBJbml0KFJvbGVDb250cm9sIHJvbGUpCgl7CgkJbV9yb2xlID0gcm9sZTsKCQltX3JvbGUuZXZlbnRTZW5kZXIuZXZlbnRzLkFkZExpc3RlbmVyKE9uUm9sZUV2ZW50KTsKCQlFbmVteURldGVjdG9yLk9uRW50ZXIuQWRkTGlzdGVuZXIoT25FbmVteUVudGVyKTsKCQlFbmVteURldGVjdG9yLk9uRXhpdC5BZGRMaXN0ZW5lcihPbkVuZW15RXhpdCk7CgkJRW5lbXlEZXRlY3Rvci5PbkV2ZW50LkFkZExpc3RlbmVyKE9uRW5lbXlFdmVudCk7CgkJSW50ZXJhY3REZXRlY3Rvci5PbkVudGVyLkFkZExpc3RlbmVyKE9uSW50ZXJhY3RlckVudGVyKTsKCQlJbnRlcmFjdERldGVjdG9yLk9uRXhpdC5BZGRMaXN0ZW5lcihPbkludGVyYWN0ZXJFeGl0KTsKCQlJbnRlcmFjdERldGVjdG9yLk9uRXZlbnQuQWRkTGlzdGVuZXIoT25JbnRlcmFjdGVyRXZlbnQpOwoJCW1fUmVuZGVyZXIgPSBTY2VuZURldGVjdG9yLkdldENvbXBvbmVudDxNZXNoUmVuZGVyZXI+KCk7CgkJLy8gbV9yb2xlID0gcm9sZTsKCQlTY2VuZURldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJTY2VuZSIpOwoJCXN3aXRjaCAobV9yb2xlLkJhc2VBSS5jYW1wKQoJCXsKCQkJY2FzZSBSb2xlQUkuQ2FtcC5QTEFZRVI6CgkJCQltX3JvbGUuZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyIik7CgkJCQlFbmVteURldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJFbmVteSIpOwoJCQkJSW50ZXJhY3REZXRlY3Rvci5sYXllcnMgPSBMYXllck1hc2suR2V0TWFzaygiSW50ZXJhY3RhYmxlIik7CgkJCQltX09mZmVuc2l2ZSA9IHRydWU7CgkJCQltX1dhbmRlclJhZGl1cyA9IDA7CgkJCQlicmVhazsKCQkJY2FzZSBSb2xlQUkuQ2FtcC5FTkVNWToKCQkJCW1fcm9sZS5nYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJRW5lbXlEZXRlY3Rvci5sYXllcnMgPSBMYXllck1hc2suR2V0TWFzaygiUGxheWVyIik7CgkJCQlJbnRlcmFjdERldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJJbnRlcmFjdGFibGUiKTsKCQkJCWJyZWFrOwoJCQljYXNlIFJvbGVBSS5DYW1wLk5FVVRSQUw6CgkJCQltX3JvbGUuZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiSW50ZXJhY3RhYmxlIik7CgkJCQlFbmVteURldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJOb3RpbmciKTsKCQkJCUludGVyYWN0RGV0ZWN0b3IubGF5ZXJzID0gTGF5ZXJNYXNrLkdldE1hc2soIkludGVyYWN0YWJsZSIsICJQbGF5ZXIiKTsKCQkJCW1fT2ZmZW5zaXZlID0gZmFsc2U7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCWJyZWFrOwoJCX0KCX0KCgl2b2lkIE9uUm9sZUV2ZW50KEdhbWVPYmplY3Qgb2JqLCBzdHJpbmcgZXZlbnROYW1lKQoJewoJCWlmIChldmVudE5hbWUgPT0gInJvbGVFdmVudF9PbklkbGluZyIpCgkJewoJCQltX0lkbGVEdXJpbmcgKz0gVGltZS5kZWx0YVRpbWU7CgkJCWlmIChtX0lkbGVEdXJpbmcgPiBtX1dhbmRlckJlYXQgJiYgbV9XYW5kZXJSYWRpdXMgPiAwKQoJCQl7CgkJCQlXYW5kZXJpbmcoKTsKCQkJCW1fSWRsZUR1cmluZyA9IDA7CgkJCX0KCQl9CgkJaWYgKGV2ZW50TmFtZSA9PSAicm9sZUV2ZW50X09uRGFtYWdlIikKCQl7CgkJCWlmICghbV9PZmZlbnNpdmUpIG1fT2ZmZW5zaXZlID0gdHJ1ZTsKCQkJaWYgKCFtX3JvbGUuQ3VycmVudEVuZW15KSBtX3JvbGUuQ3VycmVudEVuZW15ID0gRW5lbXlEZXRlY3Rvci5HZXROZWFyZXN0KCk/LkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCX0KCQlVSVJvbGVIdWQgaHVkID0gbV9yb2xlLkdldENvbXBvbmVudEluQ2hpbGRyZW48VUlSb2xlSHVkPigpOwoJCWlmIChodWQgIT0gbnVsbCkgaHVkLkJ1YmJsZShldmVudE5hbWUpOwoJfQoKCXZvaWQgT25FbmVteUVudGVyKEdhbWVPYmplY3QgZW50ZXIpCgl7CgkJaWYgKG1fcm9sZS5DdXJyZW50RW5lbXkgPT0gbnVsbCkgbV9yb2xlLkN1cnJlbnRFbmVteSA9IGVudGVyLkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCWlmIChtX3JvbGUuU2tpbGxVc2VyICYmIG1fcm9sZS5Ta2lsbFVzZXIuQ3VyU2tpbGwgIT0gbnVsbCkgbV9yb2xlLlNraWxsVXNlci5BZGRUYXJnZXQoZW50ZXIpOwoJCS8vZW50ZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuQWRkTGlzdGVuZXIoT25FbmVteUV2ZW50KTsKCQkvL21fZXZlbnRTZW5kZXIuU2VuZChlbnRlciwgInJvbGVFdmVudF9PbkVuZW15RW50ZXIiKTsKCX0KCgl2b2lkIE9uRW5lbXlFeGl0KEdhbWVPYmplY3QgZXhpdGVyKQoJewoJCWlmIChtX3JvbGUuQ3VycmVudEVuZW15ICYmIG1fcm9sZS5DdXJyZW50RW5lbXkuZ2FtZU9iamVjdCA9PSBleGl0ZXIpCgkJewoJCQltX3JvbGUuQ3VycmVudEVuZW15ID0gRW5lbXlEZXRlY3Rvci5HZXROZWFyZXN0KCk/LkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCQkvL21fZXZlbnRTZW5kZXIuU2VuZChleGl0ZXIsICJyb2xlRXZlbnRfT25FbmVteUV4aXQiKTsKCQl9CgkJaWYgKG1fcm9sZS5Ta2lsbFVzZXIgJiYgbV9yb2xlLlNraWxsVXNlci5DdXJTa2lsbCAhPSBudWxsKSBtX3JvbGUuU2tpbGxVc2VyLlJlbW92ZVRhcmdldChleGl0ZXIpOwoJfQoJdm9pZCBPbkVuZW15RXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJaWYgKGV2ZW50TWVzc2FnZSA9PSAicm9sZUV2ZW50X09uU3RhdGVfREVBRCIpCgkJewoJCQkvL21fcm9sZS5DdXJTdGF0ZSA9IFJvbGVDb250cm9sLlN0YXRlLklETEU7CgkJCURlYnVnLkxvZygiT25FbmVteUV2ZW50OiB0YXJnZXQ9ICIgKyBzZW5kZXIgKyAiZXZlbnQ9ICIgKyBldmVudE1lc3NhZ2UpOwoJCX0KCX0KCgl2b2lkIE9uSW50ZXJhY3RlckVudGVyKEdhbWVPYmplY3QgZW50ZXIpCgl7CgoJfQoKCXZvaWQgT25JbnRlcmFjdGVyRXhpdChHYW1lT2JqZWN0IGV4aXRlcikKCXsKCQlpZiAobV9pbnRlcmFjdFRhcmdldCAmJiBtX2ludGVyYWN0VGFyZ2V0ID09IGV4aXRlcikgbV9pbnRlcmFjdFRhcmdldCA9IEludGVyYWN0RGV0ZWN0b3IuR2V0TmVhcmVzdCgpOwoJfQoKCXZvaWQgT25JbnRlcmFjdGVyRXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJaWYgKGV2ZW50TWVzc2FnZSA9PSAicm9sZUV2ZW50X09uU3RhdGVfREVBRCIgJiYgbV9pbnRlcmFjdFRhcmdldCA9PSBzZW5kZXIpCgkJewoJCQltX2ludGVyYWN0VGFyZ2V0ID0gSW50ZXJhY3REZXRlY3Rvci5HZXROZWFyZXN0KCk7CgkJfQoJCWlmIChldmVudE1lc3NhZ2UgPT0gInJvbGVFdmVudF9PblN0YXRlX0lETEUiICYmIG1faW50ZXJhY3RUYXJnZXQgPT0gbnVsbCAmJiBtX3JvbGUuaXNJZGxlKQoJCXsKCQkJbV9pbnRlcmFjdFRhcmdldCA9IHNlbmRlcjsKCQkJR2V0Q29tcG9uZW50SW5DaGlsZHJlbjxVSVJvbGVIdWQ+KCk/LkJ1YmJsZShzZW5kZXIuR2V0Q29tcG9uZW50PFJvbGVDb250cm9sPigpPy5EYXRhLkNoYXJhY3Rlck5hbWUpOwoJCQltX3JvbGUuTG9va0F0KHNlbmRlci50cmFuc2Zvcm0pOwoJCX0KCQkvL0RlYnVnLkxvZygiT25JbnRlcmFjdGVyRXZlbnQ6IEludGVyYWN0ZXJUYXJnZXQ9ICIgKyBzZW5kZXIgKyAiZXZlbnQ9ICIgKyBldmVudE1lc3NhZ2UpOwoJfQoKCXZvaWQgV2FuZGVyaW5nKCkKCXsKCQlmbG9hdCByYW5kb21YID0gUmFuZG9tLlJhbmdlKDBmLCBtX1dhbmRlclJhZGl1cyk7CgkJZmxvYXQgcmFuZG9tWiA9IFJhbmRvbS5SYW5nZSgwZiwgbV9XYW5kZXJSYWRpdXMpOwoKCQlWZWN0b3IzIHJhbmRvbVBvcyA9IG5ldyBWZWN0b3IzKG1fcm9sZS5CaXJ0aFBvcy54ICsgcmFuZG9tWCwgbV9yb2xlLkJpcnRoUG9zLnksIG1fcm9sZS5CaXJ0aFBvcy56ICsgcmFuZG9tWik7CgkJbV9yb2xlLk1vdmVUbyhyYW5kb21Qb3MpOwoJCS8vRGVidWcuTG9nKCQie21fcm9sZX0tV2FuZGVyaW5nID0+IHtyYW5kb21Qb3N9Iik7Cgl9CgoJdm9pZCBIaWdobGlnaHRUYXJnZXQoR2FtZU9iamVjdCBvYmosIGJvb2wgYWN0aXZlKQoJewoJCUhpZ2hsaWdodGFibGVPYmplY3QgdGFyZ2V0ID0gb2JqLkdldENvbXBvbmVudDxIaWdobGlnaHRhYmxlT2JqZWN0PigpOwoJCWlmICh0YXJnZXQpCgkJewoJCQlpZiAoYWN0aXZlKSB0YXJnZXQuSGlnaGxpZ2h0KCk7CgkJCWVsc2UgdGFyZ2V0LkRlaGlnaGxpZ2h0KCk7CgkJfQoJfQp9CgovLyAjaWYgVU5JVFlfRURJVE9SCi8vIFtDdXN0b21FZGl0b3IodHlwZW9mKFJvbGVBSSkpXQovLyBwdWJsaWMgY2xhc3MgUm9sZUFJSW5zcGVjdG9yIDogRWRpdG9yICAKLy8gewovLyAJU2VyaWFsaXplZE9iamVjdCBvYmo7ICAKLy8gCVJvbGVBSSByb2xlQWk7ICAKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBjYW1wOyAgCi8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9PZmZlbnNpdmU7IAoKLy8gCXZvaWQgT25FbmFibGUoKQovLyAJeyAgCi8vICAgICAJb2JqID0gbmV3IFNlcmlhbGl6ZWRPYmplY3QodGFyZ2V0KTsgIAovLyAgICAgCW1fT2ZmZW5zaXZlID0gb2JqLkZpbmRQcm9wZXJ0eSgibV9PZmZlbnNpdmUiKTsKLy8gCX0KCi8vIAlwdWJsaWMgb3ZlcnJpZGUgdm9pZCBPbkluc3BlY3RvckdVSSgpCi8vIAl7Ci8vIAkJYmFzZS5Pbkluc3BlY3RvckdVSSgpOwovLyAJCXJvbGVBaSA9IChSb2xlQUkpdGFyZ2V0OwovLyAJCWlmIChyb2xlQWkuY2FtcCA9PSBSb2xlQUkuQ2FtcC5FTkVNWSkKLy8gCQl7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fT2ZmZW5zaXZlKTsKLy8gCQl9Ci8vIAl9Ci8vIH0gCi8vICNlbmRpZgoAAAAAAAAAAAAZAAAAAAAAAAAAAA",
					"DQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA1QsAAAAAAADVCwAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAAGQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBDcmVhdG9yS2l0Q29kZUludGVybmFsOwp1c2luZyBNeUJveDsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihSb2xlQ29udHJvbCkpXQpwdWJsaWMgY2xhc3MgUm9sZUFJIDogTW9ub0JlaGF2aW91cgp7CglwdWJsaWMgZW51bSBDYW1wCgl7CgkJUExBWUVSLAoJCUVORU1ZLAoJCU5FVVRSQUwKCX0KCXB1YmxpYyBDYW1wIGNhbXA7CglwdWJsaWMgSW50ZXJhY3RPblRyaWdnZXIgRW5lbXlEZXRlY3RvcjsKCXB1YmxpYyBJbnRlcmFjdE9uVHJpZ2dlciBJbnRlcmFjdERldGVjdG9yOwoJcHVibGljIEludGVyYWN0T25UcmlnZ2VyIFNjZW5lRGV0ZWN0b3I7CglwdWJsaWMgSW50ZXJhY3RPblRyaWdnZXIgU2tpbGxEZXRlY3RvcjsKCXB1YmxpYyBib29sIE9mZmVuc2l2ZSB7IGdldCB7IHJldHVybiBtX09mZmVuc2l2ZTsgfSBzZXQgeyB9IH0KCglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoY2FtcCksIGZhbHNlLCBDYW1wLkVORU1ZKV0KCVtTZXJpYWxpemVGaWVsZF0gYm9vbCBtX09mZmVuc2l2ZTsKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihjYW1wKSwgdHJ1ZSwgQ2FtcC5QTEFZRVIpXQoJW1NlcmlhbGl6ZUZpZWxkXSBmbG9hdCBtX1dhbmRlclJhZGl1czsKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihjYW1wKSwgdHJ1ZSwgQ2FtcC5QTEFZRVIpXQoJW1NlcmlhbGl6ZUZpZWxkXSBmbG9hdCBtX1dhbmRlckJlYXQgPSAzLjBmOwoJZmxvYXQgbV9JZGxlRHVyaW5nOwoJUm9sZUNvbnRyb2wgbV9yb2xlOwoJR2FtZU9iamVjdCBtX2ludGVyYWN0VGFyZ2V0OwoKCVJlbmRlcmVyIG1fUmVuZGVyZXI7Cglib29sIG1fYnVpbGRtb2RlbCA9IHRydWU7CglwdWJsaWMgUmVuZGVyZXIgQnVpbGRSZW5kZXIKCXsKCQlnZXQgeyByZXR1cm4gbV9SZW5kZXJlcjsgfQoJfQoKCXB1YmxpYyB2b2lkIEluaXQoUm9sZUNvbnRyb2wgcm9sZSkKCXsKCQltX3JvbGUgPSByb2xlOwoJCW1fcm9sZS5ldmVudFNlbmRlci5ldmVudHMuQWRkTGlzdGVuZXIoT25Sb2xlRXZlbnQpOwoJCUVuZW15RGV0ZWN0b3IuT25FbnRlci5BZGRMaXN0ZW5lcihPbkVuZW15RW50ZXIpOwoJCUVuZW15RGV0ZWN0b3IuT25FeGl0LkFkZExpc3RlbmVyKE9uRW5lbXlFeGl0KTsKCQlFbmVteURldGVjdG9yLk9uRXZlbnQuQWRkTGlzdGVuZXIoT25FbmVteUV2ZW50KTsKCQlJbnRlcmFjdERldGVjdG9yLk9uRW50ZXIuQWRkTGlzdGVuZXIoT25JbnRlcmFjdGVyRW50ZXIpOwoJCUludGVyYWN0RGV0ZWN0b3IuT25FeGl0LkFkZExpc3RlbmVyKE9uSW50ZXJhY3RlckV4aXQpOwoJCUludGVyYWN0RGV0ZWN0b3IuT25FdmVudC5BZGRMaXN0ZW5lcihPbkludGVyYWN0ZXJFdmVudCk7CgkJU2tpbGxEZXRlY3Rvci5PbkVudGVyLkFkZExpc3RlbmVyKE9uU2tpbGxUYXJnZXRFbnRlcik7CgkJU2tpbGxEZXRlY3Rvci5PbkV4aXQuQWRkTGlzdGVuZXIoT25Ta2lsbFRhcmdldEV4aXQpOwoJCVNraWxsRGV0ZWN0b3IuT25FdmVudC5BZGRMaXN0ZW5lcihPblNraWxsVGFyZ2V0RXZlbnQpOwoJCW1fUmVuZGVyZXIgPSBTY2VuZURldGVjdG9yLkdldENvbXBvbmVudDxNZXNoUmVuZGVyZXI+KCk7CgkJLy8gbV9yb2xlID0gcm9sZTsKCQlTY2VuZURldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJTY2VuZSIpOwoJCXN3aXRjaCAobV9yb2xlLkJhc2VBSS5jYW1wKQoJCXsKCQkJY2FzZSBSb2xlQUkuQ2FtcC5QTEFZRVI6CgkJCQltX3JvbGUuZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiUGxheWVyIik7CgkJCQlFbmVteURldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJFbmVteSIpOwoJCQkJSW50ZXJhY3REZXRlY3Rvci5sYXllcnMgPSBMYXllck1hc2suR2V0TWFzaygiSW50ZXJhY3RhYmxlIik7CgkJCQltX09mZmVuc2l2ZSA9IHRydWU7CgkJCQltX1dhbmRlclJhZGl1cyA9IDA7CgkJCQlicmVhazsKCQkJY2FzZSBSb2xlQUkuQ2FtcC5FTkVNWToKCQkJCW1fcm9sZS5nYW1lT2JqZWN0LmxheWVyID0gTGF5ZXJNYXNrLk5hbWVUb0xheWVyKCJFbmVteSIpOwoJCQkJRW5lbXlEZXRlY3Rvci5sYXllcnMgPSBMYXllck1hc2suR2V0TWFzaygiUGxheWVyIik7CgkJCQlJbnRlcmFjdERldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJJbnRlcmFjdGFibGUiKTsKCQkJCWJyZWFrOwoJCQljYXNlIFJvbGVBSS5DYW1wLk5FVVRSQUw6CgkJCQltX3JvbGUuZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiSW50ZXJhY3RhYmxlIik7CgkJCQlFbmVteURldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJOb3RpbmciKTsKCQkJCUludGVyYWN0RGV0ZWN0b3IubGF5ZXJzID0gTGF5ZXJNYXNrLkdldE1hc2soIkludGVyYWN0YWJsZSIsICJQbGF5ZXIiKTsKCQkJCW1fT2ZmZW5zaXZlID0gZmFsc2U7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCWJyZWFrOwoJCX0KCX0KCgl2b2lkIE9uUm9sZUV2ZW50KEdhbWVPYmplY3Qgb2JqLCBzdHJpbmcgZXZlbnROYW1lKQoJewoJCWlmIChldmVudE5hbWUgPT0gInJvbGVFdmVudF9PbklkbGluZyIpCgkJewoJCQltX0lkbGVEdXJpbmcgKz0gVGltZS5kZWx0YVRpbWU7CgkJCWlmIChtX0lkbGVEdXJpbmcgPiBtX1dhbmRlckJlYXQgJiYgbV9XYW5kZXJSYWRpdXMgPiAwKQoJCQl7CgkJCQlXYW5kZXJpbmcoKTsKCQkJCW1fSWRsZUR1cmluZyA9IDA7CgkJCX0KCQl9CgkJaWYgKGV2ZW50TmFtZSA9PSAicm9sZUV2ZW50X09uRGFtYWdlIikKCQl7CgkJCWlmICghbV9PZmZlbnNpdmUpIG1fT2ZmZW5zaXZlID0gdHJ1ZTsKCQkJaWYgKCFtX3JvbGUuQ3VycmVudEVuZW15KSBtX3JvbGUuQ3VycmVudEVuZW15ID0gRW5lbXlEZXRlY3Rvci5HZXROZWFyZXN0KCk/LkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCX0KCQlVSVJvbGVIdWQgaHVkID0gbV9yb2xlLkdldENvbXBvbmVudEluQ2hpbGRyZW48VUlSb2xlSHVkPigpOwoJCWlmIChodWQgIT0gbnVsbCkgaHVkLkJ1YmJsZShldmVudE5hbWUpOwoJfQoKCXZvaWQgT25FbmVteUVudGVyKEdhbWVPYmplY3QgZW50ZXIpCgl7CgkJaWYgKG1fcm9sZS5DdXJyZW50RW5lbXkgPT0gbnVsbCkgbV9yb2xlLkN1cnJlbnRFbmVteSA9IGVudGVyLkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCS8vZW50ZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuQWRkTGlzdGVuZXIoT25FbmVteUV2ZW50KTsKCQkvL21fZXZlbnRTZW5kZXIuU2VuZChlbnRlciwgInJvbGVFdmVudF9PbkVuZW15RW50ZXIiKTsKCX0KCgl2b2lkIE9uRW5lbXlFeGl0KEdhbWVPYmplY3QgZXhpdGVyKQoJewoJCWlmIChtX3JvbGUuQ3VycmVudEVuZW15ICYmIG1fcm9sZS5DdXJyZW50RW5lbXkuZ2FtZU9iamVjdCA9PSBleGl0ZXIpCgkJewoJCQltX3JvbGUuQ3VycmVudEVuZW15ID0gRW5lbXlEZXRlY3Rvci5HZXROZWFyZXN0KCk/LkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCQkvL21fZXZlbnRTZW5kZXIuU2VuZChleGl0ZXIsICJyb2xlRXZlbnRfT25FbmVteUV4aXQiKTsKCQl9Cgl9Cgl2b2lkIE9uRW5lbXlFdmVudChHYW1lT2JqZWN0IHNlbmRlciwgc3RyaW5nIGV2ZW50TWVzc2FnZSkKCXsKCQlpZiAoZXZlbnRNZXNzYWdlID09ICJyb2xlRXZlbnRfT25TdGF0ZV9ERUFEIikKCQl7CgkJCS8vbV9yb2xlLkN1clN0YXRlID0gUm9sZUNvbnRyb2wuU3RhdGUuSURMRTsKCQkJRGVidWcuTG9nKCJPbkVuZW15RXZlbnQ6IHRhcmdldD0gIiArIHNlbmRlciArICJldmVudD0gIiArIGV2ZW50TWVzc2FnZSk7CgkJfQoJfQoKCXZvaWQgT25JbnRlcmFjdGVyRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCgl9CgoJdm9pZCBPbkludGVyYWN0ZXJFeGl0KEdhbWVPYmplY3QgZXhpdGVyKQoJewoJCWlmIChtX2ludGVyYWN0VGFyZ2V0ICYmIG1faW50ZXJhY3RUYXJnZXQgPT0gZXhpdGVyKSBtX2ludGVyYWN0VGFyZ2V0ID0gSW50ZXJhY3REZXRlY3Rvci5HZXROZWFyZXN0KCk7Cgl9CgoJdm9pZCBPbkludGVyYWN0ZXJFdmVudChHYW1lT2JqZWN0IHNlbmRlciwgc3RyaW5nIGV2ZW50TWVzc2FnZSkKCXsKCQlpZiAoZXZlbnRNZXNzYWdlID09ICJyb2xlRXZlbnRfT25TdGF0ZV9ERUFEIiAmJiBtX2ludGVyYWN0VGFyZ2V0ID09IHNlbmRlcikKCQl7CgkJCW1faW50ZXJhY3RUYXJnZXQgPSBJbnRlcmFjdERldGVjdG9yLkdldE5lYXJlc3QoKTsKCQl9CgkJaWYgKGV2ZW50TWVzc2FnZSA9PSAicm9sZUV2ZW50X09uU3RhdGVfSURMRSIgJiYgbV9pbnRlcmFjdFRhcmdldCA9PSBudWxsICYmIG1fcm9sZS5pc0lkbGUpCgkJewoJCQltX2ludGVyYWN0VGFyZ2V0ID0gc2VuZGVyOwoJCQlHZXRDb21wb25lbnRJbkNoaWxkcmVuPFVJUm9sZUh1ZD4oKT8uQnViYmxlKHNlbmRlci5HZXRDb21wb25lbnQ8Um9sZUNvbnRyb2w+KCk/LkRhdGEuQ2hhcmFjdGVyTmFtZSk7CgkJCW1fcm9sZS5Mb29rQXQoc2VuZGVyLnRyYW5zZm9ybSk7CgkJfQoJCS8vRGVidWcuTG9nKCJPbkludGVyYWN0ZXJFdmVudDogSW50ZXJhY3RlclRhcmdldD0gIiArIHNlbmRlciArICJldmVudD0gIiArIGV2ZW50TWVzc2FnZSk7Cgl9CgoJdm9pZCBPblNraWxsVGFyZ2V0RW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlpZiAobV9yb2xlLlNraWxsVXNlciAmJiBtX3JvbGUuU2tpbGxVc2VyLkN1clNraWxsICE9IG51bGwpIG1fcm9sZS5Ta2lsbFVzZXIuQWRkVGFyZ2V0KGVudGVyKTsKCQlEZWJ1Zy5Mb2coIk9uU2tpbGxUYXJnZXRFbnRlcjogZW50ZXI9ICIgKyBlbnRlcik7Cgl9CgoJdm9pZCBPblNraWxsVGFyZ2V0RXhpdChHYW1lT2JqZWN0IGV4aXRlcikKCXsKCQlpZiAobV9yb2xlLlNraWxsVXNlciAmJiBtX3JvbGUuU2tpbGxVc2VyLkN1clNraWxsICE9IG51bGwpIG1fcm9sZS5Ta2lsbFVzZXIuUmVtb3ZlVGFyZ2V0KGV4aXRlcik7CgkJRGVidWcuTG9nKCJPblNraWxsVGFyZ2V0RXhpdDogZXhpdGVyPSAiICsgZXhpdGVyKTsKCX0KCXZvaWQgT25Ta2lsbFRhcmdldEV2ZW50KEdhbWVPYmplY3Qgc2VuZGVyLCBzdHJpbmcgZXZlbnRNZXNzYWdlKQoJewoJCWlmIChldmVudE1lc3NhZ2UgPT0gInJvbGVFdmVudF9PblN0YXRlX0RFQUQiKQoJCXsKCQkJRGVidWcuTG9nKCJPblNraWxsVGFyZ2V0RXZlbnQ6IHRhcmdldD0gIiArIHNlbmRlciArICJldmVudD0gIiArIGV2ZW50TWVzc2FnZSk7CgkJfQoJfQoJdm9pZCBXYW5kZXJpbmcoKQoJewoJCWZsb2F0IHJhbmRvbVggPSBSYW5kb20uUmFuZ2UoMGYsIG1fV2FuZGVyUmFkaXVzKTsKCQlmbG9hdCByYW5kb21aID0gUmFuZG9tLlJhbmdlKDBmLCBtX1dhbmRlclJhZGl1cyk7CgoJCVZlY3RvcjMgcmFuZG9tUG9zID0gbmV3IFZlY3RvcjMobV9yb2xlLkJpcnRoUG9zLnggKyByYW5kb21YLCBtX3JvbGUuQmlydGhQb3MueSwgbV9yb2xlLkJpcnRoUG9zLnogKyByYW5kb21aKTsKCQltX3JvbGUuTW92ZVRvKHJhbmRvbVBvcyk7CgkJLy9EZWJ1Zy5Mb2coJCJ7bV9yb2xlfS1XYW5kZXJpbmcgPT4ge3JhbmRvbVBvc30iKTsKCX0KCgl2b2lkIEhpZ2hsaWdodFRhcmdldChHYW1lT2JqZWN0IG9iaiwgYm9vbCBhY3RpdmUpCgl7CgkJSGlnaGxpZ2h0YWJsZU9iamVjdCB0YXJnZXQgPSBvYmouR2V0Q29tcG9uZW50PEhpZ2hsaWdodGFibGVPYmplY3Q+KCk7CgkJaWYgKHRhcmdldCkKCQl7CgkJCWlmIChhY3RpdmUpIHRhcmdldC5IaWdobGlnaHQoKTsKCQkJZWxzZSB0YXJnZXQuRGVoaWdobGlnaHQoKTsKCQl9Cgl9Cn0KCi8vICNpZiBVTklUWV9FRElUT1IKLy8gW0N1c3RvbUVkaXRvcih0eXBlb2YoUm9sZUFJKSldCi8vIHB1YmxpYyBjbGFzcyBSb2xlQUlJbnNwZWN0b3IgOiBFZGl0b3IgIAovLyB7Ci8vIAlTZXJpYWxpemVkT2JqZWN0IG9iajsgIAovLyAJUm9sZUFJIHJvbGVBaTsgIAovLyAJU2VyaWFsaXplZFByb3BlcnR5IGNhbXA7ICAKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX09mZmVuc2l2ZTsgCgovLyAJdm9pZCBPbkVuYWJsZSgpCi8vIAl7ICAKLy8gICAgIAlvYmogPSBuZXcgU2VyaWFsaXplZE9iamVjdCh0YXJnZXQpOyAgCi8vICAgICAJbV9PZmZlbnNpdmUgPSBvYmouRmluZFByb3BlcnR5KCJtX09mZmVuc2l2ZSIpOwovLyAJfQoKLy8gCXB1YmxpYyBvdmVycmlkZSB2b2lkIE9uSW5zcGVjdG9yR1VJKCkKLy8gCXsKLy8gCQliYXNlLk9uSW5zcGVjdG9yR1VJKCk7Ci8vIAkJcm9sZUFpID0gKFJvbGVBSSl0YXJnZXQ7Ci8vIAkJaWYgKHJvbGVBaS5jYW1wID09IFJvbGVBSS5DYW1wLkVORU1ZKQovLyAJCXsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9PZmZlbnNpdmUpOwovLyAJCX0KLy8gCX0KLy8gfSAKLy8gI2VuZGlmCgAAAAAAAAAAZhkAAAAAAAAAAAAA",
					"DQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA1QsAAAAAAADVCwAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAABmGQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBDcmVhdG9yS2l0Q29kZUludGVybmFsOwp1c2luZyBNeUJveDsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihSb2xlQ29udHJvbCkpXQpwdWJsaWMgY2xhc3MgUm9sZUFJIDogTW9ub0JlaGF2aW91cgp7CglwdWJsaWMgZW51bSBDYW1wCgl7CgkJUExBWUVSLAoJCUVORU1ZLAoJCU5FVVRSQUwKCX0KCXB1YmxpYyBDYW1wIGNhbXA7CglwdWJsaWMgSW50ZXJhY3RPblRyaWdnZXIgRW5lbXlEZXRlY3RvcjsKCXB1YmxpYyBJbnRlcmFjdE9uVHJpZ2dlciBJbnRlcmFjdERldGVjdG9yOwoJcHVibGljIEludGVyYWN0T25UcmlnZ2VyIFNjZW5lRGV0ZWN0b3I7CglwdWJsaWMgSW50ZXJhY3RPblRyaWdnZXIgU2tpbGxEZXRlY3RvcjsKCXB1YmxpYyBib29sIE9mZmVuc2l2ZSB7IGdldCB7IHJldHVybiBtX09mZmVuc2l2ZTsgfSBzZXQgeyB9IH0KCglbQ29uZGl0aW9uYWxGaWVsZChuYW1lb2YoY2FtcCksIGZhbHNlLCBDYW1wLkVORU1ZKV0KCVtTZXJpYWxpemVGaWVsZF0gYm9vbCBtX09mZmVuc2l2ZTsKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihjYW1wKSwgdHJ1ZSwgQ2FtcC5QTEFZRVIpXQoJW1NlcmlhbGl6ZUZpZWxkXSBmbG9hdCBtX1dhbmRlclJhZGl1czsKCVtDb25kaXRpb25hbEZpZWxkKG5hbWVvZihjYW1wKSwgdHJ1ZSwgQ2FtcC5QTEFZRVIpXQoJW1NlcmlhbGl6ZUZpZWxkXSBmbG9hdCBtX1dhbmRlckJlYXQgPSAzLjBmOwoJZmxvYXQgbV9JZGxlRHVyaW5nOwoJUm9sZUNvbnRyb2wgbV9yb2xlOwoJR2FtZU9iamVjdCBtX2ludGVyYWN0VGFyZ2V0OwoKCVJlbmRlcmVyIG1fUmVuZGVyZXI7Cglib29sIG1fYnVpbGRtb2RlbCA9IHRydWU7CglwdWJsaWMgUmVuZGVyZXIgQnVpbGRSZW5kZXIKCXsKCQlnZXQgeyByZXR1cm4gbV9SZW5kZXJlcjsgfQoJfQoKCXB1YmxpYyB2b2lkIEluaXQoUm9sZUNvbnRyb2wgcm9sZSkKCXsKCQltX3JvbGUgPSByb2xlOwoJCW1fcm9sZS5ldmVudFNlbmRlci5ldmVudHMuQWRkTGlzdGVuZXIoT25Sb2xlRXZlbnQpOwoJCWlmIChFbmVteURldGVjdG9yKQoJCXsKCQkJRW5lbXlEZXRlY3Rvci5PbkVudGVyLkFkZExpc3RlbmVyKE9uRW5lbXlFbnRlcik7CgkJCUVuZW15RGV0ZWN0b3IuT25FeGl0LkFkZExpc3RlbmVyKE9uRW5lbXlFeGl0KTsKCQkJRW5lbXlEZXRlY3Rvci5PbkV2ZW50LkFkZExpc3RlbmVyKE9uRW5lbXlFdmVudCk7CgoJCX0KCQlpZiAoSW50ZXJhY3REZXRlY3RvcikKCQl7CgkJCUludGVyYWN0RGV0ZWN0b3IuT25FbnRlci5BZGRMaXN0ZW5lcihPbkludGVyYWN0ZXJFbnRlcik7CgkJCUludGVyYWN0RGV0ZWN0b3IuT25FeGl0LkFkZExpc3RlbmVyKE9uSW50ZXJhY3RlckV4aXQpOwoJCQlJbnRlcmFjdERldGVjdG9yLk9uRXZlbnQuQWRkTGlzdGVuZXIoT25JbnRlcmFjdGVyRXZlbnQpOwoJCX0KCQlpZiAoU2tpbGxEZXRlY3RvcikKCQl7CgkJCVNraWxsRGV0ZWN0b3IuT25FbnRlci5BZGRMaXN0ZW5lcihPblNraWxsVGFyZ2V0RW50ZXIpOwoJCQlTa2lsbERldGVjdG9yLk9uRXhpdC5BZGRMaXN0ZW5lcihPblNraWxsVGFyZ2V0RXhpdCk7CgkJCVNraWxsRGV0ZWN0b3IuT25FdmVudC5BZGRMaXN0ZW5lcihPblNraWxsVGFyZ2V0RXZlbnQpOwoJCX0KCQltX1JlbmRlcmVyID0gU2NlbmVEZXRlY3Rvci5HZXRDb21wb25lbnQ8TWVzaFJlbmRlcmVyPigpOwoJCS8vIG1fcm9sZSA9IHJvbGU7CgkJU2NlbmVEZXRlY3Rvci5sYXllcnMgPSBMYXllck1hc2suR2V0TWFzaygiU2NlbmUiKTsKCQlzd2l0Y2ggKG1fcm9sZS5CYXNlQUkuY2FtcCkKCQl7CgkJCWNhc2UgUm9sZUFJLkNhbXAuUExBWUVSOgoJCQkJbV9yb2xlLmdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIlBsYXllciIpOwoJCQkJRW5lbXlEZXRlY3Rvci5sYXllcnMgPSBMYXllck1hc2suR2V0TWFzaygiRW5lbXkiKTsKCQkJCUludGVyYWN0RGV0ZWN0b3IubGF5ZXJzID0gTGF5ZXJNYXNrLkdldE1hc2soIkludGVyYWN0YWJsZSIpOwoJCQkJbV9PZmZlbnNpdmUgPSB0cnVlOwoJCQkJbV9XYW5kZXJSYWRpdXMgPSAwOwoJCQkJYnJlYWs7CgkJCWNhc2UgUm9sZUFJLkNhbXAuRU5FTVk6CgkJCQltX3JvbGUuZ2FtZU9iamVjdC5sYXllciA9IExheWVyTWFzay5OYW1lVG9MYXllcigiRW5lbXkiKTsKCQkJCUVuZW15RGV0ZWN0b3IubGF5ZXJzID0gTGF5ZXJNYXNrLkdldE1hc2soIlBsYXllciIpOwoJCQkJSW50ZXJhY3REZXRlY3Rvci5sYXllcnMgPSBMYXllck1hc2suR2V0TWFzaygiSW50ZXJhY3RhYmxlIik7CgkJCQlicmVhazsKCQkJY2FzZSBSb2xlQUkuQ2FtcC5ORVVUUkFMOgoJCQkJbV9yb2xlLmdhbWVPYmplY3QubGF5ZXIgPSBMYXllck1hc2suTmFtZVRvTGF5ZXIoIkludGVyYWN0YWJsZSIpOwoJCQkJRW5lbXlEZXRlY3Rvci5sYXllcnMgPSBMYXllck1hc2suR2V0TWFzaygiTm90aW5nIik7CgkJCQlJbnRlcmFjdERldGVjdG9yLmxheWVycyA9IExheWVyTWFzay5HZXRNYXNrKCJJbnRlcmFjdGFibGUiLCAiUGxheWVyIik7CgkJCQltX09mZmVuc2l2ZSA9IGZhbHNlOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9Cgl9CgoJdm9pZCBPblJvbGVFdmVudChHYW1lT2JqZWN0IG9iaiwgc3RyaW5nIGV2ZW50TmFtZSkKCXsKCQlpZiAoZXZlbnROYW1lID09ICJyb2xlRXZlbnRfT25JZGxpbmciKQoJCXsKCQkJbV9JZGxlRHVyaW5nICs9IFRpbWUuZGVsdGFUaW1lOwoJCQlpZiAobV9JZGxlRHVyaW5nID4gbV9XYW5kZXJCZWF0ICYmIG1fV2FuZGVyUmFkaXVzID4gMCkKCQkJewoJCQkJV2FuZGVyaW5nKCk7CgkJCQltX0lkbGVEdXJpbmcgPSAwOwoJCQl9CgkJfQoJCWlmIChldmVudE5hbWUgPT0gInJvbGVFdmVudF9PbkRhbWFnZSIpCgkJewoJCQlpZiAoIW1fT2ZmZW5zaXZlKSBtX09mZmVuc2l2ZSA9IHRydWU7CgkJCWlmICghbV9yb2xlLkN1cnJlbnRFbmVteSkgbV9yb2xlLkN1cnJlbnRFbmVteSA9IEVuZW15RGV0ZWN0b3IuR2V0TmVhcmVzdCgpPy5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKTsKCQl9CgkJVUlSb2xlSHVkIGh1ZCA9IG1fcm9sZS5HZXRDb21wb25lbnRJbkNoaWxkcmVuPFVJUm9sZUh1ZD4oKTsKCQlpZiAoaHVkICE9IG51bGwpIGh1ZC5CdWJibGUoZXZlbnROYW1lKTsKCX0KCgl2b2lkIE9uRW5lbXlFbnRlcihHYW1lT2JqZWN0IGVudGVyKQoJewoJCWlmIChtX3JvbGUuQ3VycmVudEVuZW15ID09IG51bGwpIG1fcm9sZS5DdXJyZW50RW5lbXkgPSBlbnRlci5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKTsKCQkvL2VudGVyLkdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uZXZlbnRzLkFkZExpc3RlbmVyKE9uRW5lbXlFdmVudCk7CgkJLy9tX2V2ZW50U2VuZGVyLlNlbmQoZW50ZXIsICJyb2xlRXZlbnRfT25FbmVteUVudGVyIik7Cgl9CgoJdm9pZCBPbkVuZW15RXhpdChHYW1lT2JqZWN0IGV4aXRlcikKCXsKCQlpZiAobV9yb2xlLkN1cnJlbnRFbmVteSAmJiBtX3JvbGUuQ3VycmVudEVuZW15LmdhbWVPYmplY3QgPT0gZXhpdGVyKQoJCXsKCQkJbV9yb2xlLkN1cnJlbnRFbmVteSA9IEVuZW15RGV0ZWN0b3IuR2V0TmVhcmVzdCgpPy5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKTsKCQkJLy9tX2V2ZW50U2VuZGVyLlNlbmQoZXhpdGVyLCAicm9sZUV2ZW50X09uRW5lbXlFeGl0Iik7CgkJfQoJfQoJdm9pZCBPbkVuZW15RXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJaWYgKGV2ZW50TWVzc2FnZSA9PSAicm9sZUV2ZW50X09uU3RhdGVfREVBRCIpCgkJewoJCQkvL21fcm9sZS5DdXJTdGF0ZSA9IFJvbGVDb250cm9sLlN0YXRlLklETEU7CgkJCS8vRGVidWcuTG9nKCJPbkVuZW15RXZlbnQ6IHRhcmdldD0gIiArIHNlbmRlciArICJldmVudD0gIiArIGV2ZW50TWVzc2FnZSk7CgkJfQoJfQoKCXZvaWQgT25JbnRlcmFjdGVyRW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCgl9CgoJdm9pZCBPbkludGVyYWN0ZXJFeGl0KEdhbWVPYmplY3QgZXhpdGVyKQoJewoJCWlmIChtX2ludGVyYWN0VGFyZ2V0ICYmIG1faW50ZXJhY3RUYXJnZXQgPT0gZXhpdGVyKSBtX2ludGVyYWN0VGFyZ2V0ID0gSW50ZXJhY3REZXRlY3Rvci5HZXROZWFyZXN0KCk7Cgl9CgoJdm9pZCBPbkludGVyYWN0ZXJFdmVudChHYW1lT2JqZWN0IHNlbmRlciwgc3RyaW5nIGV2ZW50TWVzc2FnZSkKCXsKCQlpZiAoZXZlbnRNZXNzYWdlID09ICJyb2xlRXZlbnRfT25TdGF0ZV9ERUFEIiAmJiBtX2ludGVyYWN0VGFyZ2V0ID09IHNlbmRlcikKCQl7CgkJCW1faW50ZXJhY3RUYXJnZXQgPSBJbnRlcmFjdERldGVjdG9yLkdldE5lYXJlc3QoKTsKCQl9CgkJaWYgKGV2ZW50TWVzc2FnZSA9PSAicm9sZUV2ZW50X09uU3RhdGVfSURMRSIgJiYgbV9pbnRlcmFjdFRhcmdldCA9PSBudWxsICYmIG1fcm9sZS5pc0lkbGUpCgkJewoJCQltX2ludGVyYWN0VGFyZ2V0ID0gc2VuZGVyOwoJCQlHZXRDb21wb25lbnRJbkNoaWxkcmVuPFVJUm9sZUh1ZD4oKT8uQnViYmxlKHNlbmRlci5HZXRDb21wb25lbnQ8Um9sZUNvbnRyb2w+KCk/LkRhdGEuQ2hhcmFjdGVyTmFtZSk7CgkJCW1fcm9sZS5Mb29rQXQoc2VuZGVyLnRyYW5zZm9ybSk7CgkJfQoJCS8vRGVidWcuTG9nKCJPbkludGVyYWN0ZXJFdmVudDogSW50ZXJhY3RlclRhcmdldD0gIiArIHNlbmRlciArICJldmVudD0gIiArIGV2ZW50TWVzc2FnZSk7Cgl9CgoJdm9pZCBPblNraWxsVGFyZ2V0RW50ZXIoR2FtZU9iamVjdCBlbnRlcikKCXsKCQlpZiAobV9yb2xlLlNraWxsVXNlciAmJiBtX3JvbGUuU2tpbGxVc2VyLkN1clNraWxsICE9IG51bGwpIG1fcm9sZS5Ta2lsbFVzZXIuQWRkVGFyZ2V0KGVudGVyKTsKCQlEZWJ1Zy5Mb2coIk9uU2tpbGxUYXJnZXRFbnRlcjogZW50ZXI9ICIgKyBlbnRlcik7Cgl9CgoJdm9pZCBPblNraWxsVGFyZ2V0RXhpdChHYW1lT2JqZWN0IGV4aXRlcikKCXsKCQlpZiAobV9yb2xlLlNraWxsVXNlciAmJiBtX3JvbGUuU2tpbGxVc2VyLkN1clNraWxsICE9IG51bGwpIG1fcm9sZS5Ta2lsbFVzZXIuUmVtb3ZlVGFyZ2V0KGV4aXRlcik7CgkJRGVidWcuTG9nKCJPblNraWxsVGFyZ2V0RXhpdDogZXhpdGVyPSAiICsgZXhpdGVyKTsKCX0KCXZvaWQgT25Ta2lsbFRhcmdldEV2ZW50KEdhbWVPYmplY3Qgc2VuZGVyLCBzdHJpbmcgZXZlbnRNZXNzYWdlKQoJewoJCWlmIChldmVudE1lc3NhZ2UgPT0gInJvbGVFdmVudF9PblN0YXRlX0RFQUQiKQoJCXsKCQkJRGVidWcuTG9nKCJPblNraWxsVGFyZ2V0RXZlbnQ6IHRhcmdldD0gIiArIHNlbmRlciArICJldmVudD0gIiArIGV2ZW50TWVzc2FnZSk7CgkJfQoJfQoJdm9pZCBXYW5kZXJpbmcoKQoJewoJCWZsb2F0IHJhbmRvbVggPSBSYW5kb20uUmFuZ2UoMGYsIG1fV2FuZGVyUmFkaXVzKTsKCQlmbG9hdCByYW5kb21aID0gUmFuZG9tLlJhbmdlKDBmLCBtX1dhbmRlclJhZGl1cyk7CgoJCVZlY3RvcjMgcmFuZG9tUG9zID0gbmV3IFZlY3RvcjMobV9yb2xlLkJpcnRoUG9zLnggKyByYW5kb21YLCBtX3JvbGUuQmlydGhQb3MueSwgbV9yb2xlLkJpcnRoUG9zLnogKyByYW5kb21aKTsKCQltX3JvbGUuTW92ZVRvKHJhbmRvbVBvcyk7CgkJLy9EZWJ1Zy5Mb2coJCJ7bV9yb2xlfS1XYW5kZXJpbmcgPT4ge3JhbmRvbVBvc30iKTsKCX0KCgl2b2lkIEhpZ2hsaWdodFRhcmdldChHYW1lT2JqZWN0IG9iaiwgYm9vbCBhY3RpdmUpCgl7CgkJSGlnaGxpZ2h0YWJsZU9iamVjdCB0YXJnZXQgPSBvYmouR2V0Q29tcG9uZW50PEhpZ2hsaWdodGFibGVPYmplY3Q+KCk7CgkJaWYgKHRhcmdldCkKCQl7CgkJCWlmIChhY3RpdmUpIHRhcmdldC5IaWdobGlnaHQoKTsKCQkJZWxzZSB0YXJnZXQuRGVoaWdobGlnaHQoKTsKCQl9Cgl9Cn0KCi8vICNpZiBVTklUWV9FRElUT1IKLy8gW0N1c3RvbUVkaXRvcih0eXBlb2YoUm9sZUFJKSldCi8vIHB1YmxpYyBjbGFzcyBSb2xlQUlJbnNwZWN0b3IgOiBFZGl0b3IgIAovLyB7Ci8vIAlTZXJpYWxpemVkT2JqZWN0IG9iajsgIAovLyAJUm9sZUFJIHJvbGVBaTsgIAovLyAJU2VyaWFsaXplZFByb3BlcnR5IGNhbXA7ICAKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX09mZmVuc2l2ZTsgCgovLyAJdm9pZCBPbkVuYWJsZSgpCi8vIAl7ICAKLy8gICAgIAlvYmogPSBuZXcgU2VyaWFsaXplZE9iamVjdCh0YXJnZXQpOyAgCi8vICAgICAJbV9PZmZlbnNpdmUgPSBvYmouRmluZFByb3BlcnR5KCJtX09mZmVuc2l2ZSIpOwovLyAJfQoKLy8gCXB1YmxpYyBvdmVycmlkZSB2b2lkIE9uSW5zcGVjdG9yR1VJKCkKLy8gCXsKLy8gCQliYXNlLk9uSW5zcGVjdG9yR1VJKCk7Ci8vIAkJcm9sZUFpID0gKFJvbGVBSSl0YXJnZXQ7Ci8vIAkJaWYgKHJvbGVBaS5jYW1wID09IFJvbGVBSS5DYW1wLkVORU1ZKQovLyAJCXsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9PZmZlbnNpdmUpOwovLyAJCX0KLy8gCX0KLy8gfSAKLy8gI2VuZGlmCgAAAAAAAAAAhRkAAAAAAAAAAAAAAAAAAAAAAAD+DgAAAAAAAAAAAAAAAAAAAAAAAEcQAAAAAAAAAAAAAA",
					"DQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA1QsAAAAAAADVCwAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABHEAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBDcmVhdG9yS2l0Q29kZUludGVybmFsOwp1c2luZyBNeUJveDsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihSb2xlQ29udHJvbCkpXQpwdWJsaWMgY2xhc3MgUm9sZUFJIDogTW9ub0JlaGF2aW91cgp7Cglwcm90ZWN0ZWQgUm9sZUNvbnRyb2wgbV9yb2xlOwoJcHVibGljIHN0cmluZyBTY2VuZUJveCB7IGdldCB7IHJldHVybiBHYW1lTWFuYWdlci5TY2VuZUJveEluZm8obV9yb2xlLlNjZW5lRGV0ZWN0b3IubGFzdElubmVyLCBmYWxzZSk7IH0gfQoJcHVibGljIHN0cmluZyBTY2VuZUJveE5hbWUgeyBnZXQgeyByZXR1cm4gR2FtZU1hbmFnZXIuU2NlbmVCb3hJbmZvKG1fcm9sZS5TY2VuZURldGVjdG9yLmxhc3RJbm5lciwgdHJ1ZSk7IH0gfQoJcHVibGljIHZpcnR1YWwgdm9pZCBJbml0KCkKCXsKCQltX3JvbGUgPSBHZXRDb21wb25lbnQ8Um9sZUNvbnRyb2w+KCk7CgkJbV9yb2xlLmV2ZW50U2VuZGVyLmV2ZW50cy5BZGRMaXN0ZW5lcihPblJvbGVFdmVudCk7CgoJCWlmIChtX3JvbGUuRW5lbXlEZXRlY3RvcikKCQl7CgkJCW1fcm9sZS5FbmVteURldGVjdG9yLk9uRW50ZXIuQWRkTGlzdGVuZXIoT25FbmVteUVudGVyKTsKCQkJbV9yb2xlLkVuZW15RGV0ZWN0b3IuT25FeGl0LkFkZExpc3RlbmVyKE9uRW5lbXlFeGl0KTsKCQkJbV9yb2xlLkVuZW15RGV0ZWN0b3IuT25FdmVudC5BZGRMaXN0ZW5lcihPbkVuZW15RXZlbnQpOwoJCX0KCQlpZiAobV9yb2xlLlNraWxsRGV0ZWN0b3IpCgkJewoJCQltX3JvbGUuU2tpbGxEZXRlY3Rvci5PbkVudGVyLkFkZExpc3RlbmVyKE9uU2tpbGxUYXJnZXRFbnRlcik7CgkJCW1fcm9sZS5Ta2lsbERldGVjdG9yLk9uRXhpdC5BZGRMaXN0ZW5lcihPblNraWxsVGFyZ2V0RXhpdCk7CgkJCW1fcm9sZS5Ta2lsbERldGVjdG9yLk9uRXZlbnQuQWRkTGlzdGVuZXIoT25Ta2lsbFRhcmdldEV2ZW50KTsKCQl9CgkJaWYgKG1fcm9sZS5JbnRlcmFjdERldGVjdG9yKQoJCXsKCQkJbV9yb2xlLkludGVyYWN0RGV0ZWN0b3IuT25TdGF5LkFkZExpc3RlbmVyKE9uSW50ZXJhY3RTdGF5KTsKCQkJLy8gbV9yb2xlLkludGVyYWN0RGV0ZWN0b3IuT25FeGl0LkFkZExpc3RlbmVyKE9uSW50ZXJhY3RlckV4aXQpOwoJCQkvLyBtX3JvbGUuSW50ZXJhY3REZXRlY3Rvci5PbkV2ZW50LkFkZExpc3RlbmVyKE9uSW50ZXJhY3RvckV2ZW50KTsKCQl9Cgl9CgoJdm9pZCBVcGRhdGUoKQoJewoJCWlmIChtX3JvbGUuaXNJZGxlICYmIG1fcm9sZS5FbmVteURldGVjdG9yLklubmVycy5Db3VudCA+IDApCgkJCW1fcm9sZS5DdXJyZW50RW5lbXkgPSBtX3JvbGUuRW5lbXlEZXRlY3Rvci5HZXROZWFyZXN0KCkuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCk7Cgl9CgoJcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPblJvbGVFdmVudChHYW1lT2JqZWN0IG9iaiwgc3RyaW5nIGV2ZW50TmFtZSkKCXsKCQkvLyBVSVJvbGVIdWQgaHVkID0gbV9yb2xlLkdldENvbXBvbmVudEluQ2hpbGRyZW48VUlSb2xlSHVkPigpOwoJCS8vIGlmIChodWQgIT0gbnVsbCkgaHVkLkJ1YmJsZShldmVudE5hbWUpOwoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgT25FbmVteUVudGVyKEdhbWVPYmplY3QgZW50ZXIpCgl7CgkJaWYgKG1fcm9sZS5DdXJyZW50RW5lbXkgPT0gbnVsbCkgbV9yb2xlLkN1cnJlbnRFbmVteSA9IGVudGVyLkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCS8vZW50ZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuQWRkTGlzdGVuZXIoT25FbmVteUV2ZW50KTsKCQkvL21fZXZlbnRTZW5kZXIuU2VuZChlbnRlciwgInJvbGVFdmVudF9PbkVuZW15RW50ZXIiKTsKCX0KCglwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIE9uRW5lbXlFeGl0KEdhbWVPYmplY3QgZXhpdGVyKQoJewoJCWlmIChtX3JvbGUuQ3VycmVudEVuZW15ICYmIG1fcm9sZS5DdXJyZW50RW5lbXkuZ2FtZU9iamVjdCA9PSBleGl0ZXIpCgkJewoJCQltX3JvbGUuQ3VycmVudEVuZW15ID0gbV9yb2xlLkVuZW15RGV0ZWN0b3IuR2V0TmVhcmVzdCgpPy5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKTsKCQkJLy9tX2V2ZW50U2VuZGVyLlNlbmQoZXhpdGVyLCAicm9sZUV2ZW50X09uRW5lbXlFeGl0Iik7CgkJfQoJfQoJcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPbkVuZW15RXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJaWYgKGV2ZW50TWVzc2FnZSA9PSAicm9sZUV2ZW50X09uU3RhdGVfREVBRCIpCgkJewoJCQkvL21fcm9sZS5DdXJTdGF0ZSA9IFJvbGVDb250cm9sLlN0YXRlLklETEU7CgkJCS8vRGVidWcuTG9nKCJPbkVuZW15RXZlbnQ6IHRhcmdldD0gIiArIHNlbmRlciArICJldmVudD0gIiArIGV2ZW50TWVzc2FnZSk7CgkJfQoJfQoKCXZvaWQgT25Ta2lsbFRhcmdldEVudGVyKEdhbWVPYmplY3QgZW50ZXIpCgl7CgkJaWYgKG1fcm9sZS5Ta2lsbFVzZXIgJiYgbV9yb2xlLlNraWxsVXNlci5DdXJTa2lsbCAhPSBudWxsKSBtX3JvbGUuU2tpbGxVc2VyLkFkZFRhcmdldChlbnRlcik7CgkJLy9EZWJ1Zy5Mb2coIk9uU2tpbGxUYXJnZXRFbnRlcjogZW50ZXI9ICIgKyBlbnRlcik7Cgl9CgoJdm9pZCBPblNraWxsVGFyZ2V0RXhpdChHYW1lT2JqZWN0IGV4aXRlcikKCXsKCQlpZiAobV9yb2xlLlNraWxsVXNlciAmJiBtX3JvbGUuU2tpbGxVc2VyLkN1clNraWxsICE9IG51bGwpIG1fcm9sZS5Ta2lsbFVzZXIuUmVtb3ZlVGFyZ2V0KGV4aXRlcik7CgkJLy9EZWJ1Zy5Mb2coIk9uU2tpbGxUYXJnZXRFeGl0OiBleGl0ZXI9ICIgKyBleGl0ZXIpOwoJfQoJdm9pZCBPblNraWxsVGFyZ2V0RXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJaWYgKGV2ZW50TWVzc2FnZSA9PSAicm9sZUV2ZW50X09uU3RhdGVfREVBRCIpCgkJewoJCQlEZWJ1Zy5Mb2coIk9uU2tpbGxUYXJnZXRFdmVudDogdGFyZ2V0PSAiICsgc2VuZGVyICsgImV2ZW50PSAiICsgZXZlbnRNZXNzYWdlKTsKCQl9Cgl9CgoJcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPbkludGVyYWN0U3RheShHYW1lT2JqZWN0IGludGVyYWN0b3IsIGZsb2F0IGR1cmluZykKCXsKCQltX3JvbGUuTG9va0F0KGludGVyYWN0b3IudHJhbnNmb3JtKTsKCQkvL0hpZ2hsaWdodFRhcmdldChpbnRlcmFjdG9yLmdhbWVPYmplY3QsIHRydWUpOwoJCS8vRGVidWcuTG9nKCJbUm9sZUFJLSIgKyBtX3JvbGUgKyAiXSBPbkludGVyYWN0aW5nIHdpdGggOiAiICsgaW50ZXJhY3Rvci5nYW1lT2JqZWN0KTsKCX0KCXZvaWQgSGlnaGxpZ2h0VGFyZ2V0KEdhbWVPYmplY3Qgb2JqLCBib29sIGFjdGl2ZSkKCXsKCQlIaWdobGlnaHRhYmxlT2JqZWN0IHRhcmdldCA9IG9iai5HZXRDb21wb25lbnQ8SGlnaGxpZ2h0YWJsZU9iamVjdD4oKTsKCQlpZiAodGFyZ2V0KQoJCXsKCQkJaWYgKGFjdGl2ZSkgdGFyZ2V0LkhpZ2hsaWdodCgpOwoJCQllbHNlIHRhcmdldC5EZWhpZ2hsaWdodCgpOwoJCX0KCX0KfQoKLy8gI2lmIFVOSVRZX0VESVRPUgovLyBbQ3VzdG9tRWRpdG9yKHR5cGVvZihSb2xlQUkpKV0KLy8gcHVibGljIGNsYXNzIFJvbGVBSUluc3BlY3RvciA6IEVkaXRvciAgCi8vIHsKLy8gCVNlcmlhbGl6ZWRPYmplY3Qgb2JqOyAgCi8vIAlSb2xlQUkgcm9sZUFpOyAgCi8vIAlTZXJpYWxpemVkUHJvcGVydHkgY2FtcDsgIAovLyAJU2VyaWFsaXplZFByb3BlcnR5IG1fT2ZmZW5zaXZlOyAKCi8vIAl2b2lkIE9uRW5hYmxlKCkKLy8gCXsgIAovLyAgICAgCW9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KHRhcmdldCk7ICAKLy8gICAgIAltX09mZmVuc2l2ZSA9IG9iai5GaW5kUHJvcGVydHkoIm1fT2ZmZW5zaXZlIik7Ci8vIAl9CgovLyAJcHVibGljIG92ZXJyaWRlIHZvaWQgT25JbnNwZWN0b3JHVUkoKQovLyAJewovLyAJCWJhc2UuT25JbnNwZWN0b3JHVUkoKTsKLy8gCQlyb2xlQWkgPSAoUm9sZUFJKXRhcmdldDsKLy8gCQlpZiAocm9sZUFpLmNhbXAgPT0gUm9sZUFJLkNhbXAuRU5FTVkpCi8vIAkJewovLyAJCQlFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX09mZmVuc2l2ZSk7Ci8vIAkJfQovLyAJfQovLyB9IAovLyAjZW5kaWYKAAAAAAAAAABlEAAAAAAAAAAAAAA",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABlEAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBDcmVhdG9yS2l0Q29kZUludGVybmFsOwp1c2luZyBNeUJveDsKCltSZXF1aXJlQ29tcG9uZW50KHR5cGVvZihSb2xlQ29udHJvbCkpXQpwdWJsaWMgY2xhc3MgUm9sZUFJIDogTW9ub0JlaGF2aW91cgp7Cglwcm90ZWN0ZWQgUm9sZUNvbnRyb2wgbV9yb2xlOwoJcHVibGljIHN0cmluZyBTY2VuZUJveCB7IGdldCB7IHJldHVybiBHYW1lTWFuYWdlci5TY2VuZUJveEluZm8obV9yb2xlLlNjZW5lRGV0ZWN0b3IubGFzdElubmVyLCBmYWxzZSk7IH0gfQoJcHVibGljIHN0cmluZyBTY2VuZUJveE5hbWUgeyBnZXQgeyByZXR1cm4gR2FtZU1hbmFnZXIuU2NlbmVCb3hJbmZvKG1fcm9sZS5TY2VuZURldGVjdG9yLmxhc3RJbm5lciwgdHJ1ZSk7IH0gfQoJcHVibGljIHZpcnR1YWwgdm9pZCBJbml0KCkKCXsKCQltX3JvbGUgPSBHZXRDb21wb25lbnQ8Um9sZUNvbnRyb2w+KCk7CgkJbV9yb2xlLmV2ZW50U2VuZGVyLmV2ZW50cy5BZGRMaXN0ZW5lcihPblJvbGVFdmVudCk7CgoJCWlmIChtX3JvbGUuRW5lbXlEZXRlY3RvcikKCQl7CgkJCW1fcm9sZS5FbmVteURldGVjdG9yLk9uRW50ZXIuQWRkTGlzdGVuZXIoT25FbmVteUVudGVyKTsKCQkJbV9yb2xlLkVuZW15RGV0ZWN0b3IuT25FeGl0LkFkZExpc3RlbmVyKE9uRW5lbXlFeGl0KTsKCQkJbV9yb2xlLkVuZW15RGV0ZWN0b3IuT25FdmVudC5BZGRMaXN0ZW5lcihPbkVuZW15RXZlbnQpOwoJCX0KCQlpZiAobV9yb2xlLlNraWxsRGV0ZWN0b3IpCgkJewoJCQltX3JvbGUuU2tpbGxEZXRlY3Rvci5PbkVudGVyLkFkZExpc3RlbmVyKE9uU2tpbGxUYXJnZXRFbnRlcik7CgkJCW1fcm9sZS5Ta2lsbERldGVjdG9yLk9uRXhpdC5BZGRMaXN0ZW5lcihPblNraWxsVGFyZ2V0RXhpdCk7CgkJCW1fcm9sZS5Ta2lsbERldGVjdG9yLk9uRXZlbnQuQWRkTGlzdGVuZXIoT25Ta2lsbFRhcmdldEV2ZW50KTsKCQl9CgkJaWYgKG1fcm9sZS5JbnRlcmFjdERldGVjdG9yKQoJCXsKCQkJbV9yb2xlLkludGVyYWN0RGV0ZWN0b3IuT25TdGF5LkFkZExpc3RlbmVyKE9uSW50ZXJhY3RTdGF5KTsKCQkJLy8gbV9yb2xlLkludGVyYWN0RGV0ZWN0b3IuT25FeGl0LkFkZExpc3RlbmVyKE9uSW50ZXJhY3RlckV4aXQpOwoJCQkvLyBtX3JvbGUuSW50ZXJhY3REZXRlY3Rvci5PbkV2ZW50LkFkZExpc3RlbmVyKE9uSW50ZXJhY3RvckV2ZW50KTsKCQl9Cgl9CgoJdm9pZCBVcGRhdGUoKQoJewoJCWlmIChtX3JvbGUuaXNJZGxlICYmIG1fcm9sZS5FbmVteURldGVjdG9yLklubmVycy5Db3VudCA+IDApCgkJCW1fcm9sZS5DdXJyZW50RW5lbXkgPSBtX3JvbGUuRW5lbXlEZXRlY3Rvci5HZXROZWFyZXN0KCkuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCk7Cgl9CgoJcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPblJvbGVFdmVudChHYW1lT2JqZWN0IG9iaiwgc3RyaW5nIGV2ZW50TmFtZSkKCXsKCQkvLyBVSVJvbGVIdWQgaHVkID0gbV9yb2xlLkdldENvbXBvbmVudEluQ2hpbGRyZW48VUlSb2xlSHVkPigpOwoJCS8vIGlmIChodWQgIT0gbnVsbCkgaHVkLkJ1YmJsZShldmVudE5hbWUpOwoJfQoKCXByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgT25FbmVteUVudGVyKEdhbWVPYmplY3QgZW50ZXIpCgl7CgkJaWYgKG1fcm9sZS5DdXJyZW50RW5lbXkgPT0gbnVsbCkgbV9yb2xlLkN1cnJlbnRFbmVteSA9IGVudGVyLkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCS8vZW50ZXIuR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5ldmVudHMuQWRkTGlzdGVuZXIoT25FbmVteUV2ZW50KTsKCQkvL21fZXZlbnRTZW5kZXIuU2VuZChlbnRlciwgInJvbGVFdmVudF9PbkVuZW15RW50ZXIiKTsKCX0KCglwcm90ZWN0ZWQgdmlydHVhbCB2b2lkIE9uRW5lbXlFeGl0KEdhbWVPYmplY3QgZXhpdGVyKQoJewoJCWlmIChtX3JvbGUuQ3VycmVudEVuZW15ICYmIG1fcm9sZS5DdXJyZW50RW5lbXkuZ2FtZU9iamVjdCA9PSBleGl0ZXIpCgkJewoJCQltX3JvbGUuQ3VycmVudEVuZW15ID0gbV9yb2xlLkVuZW15RGV0ZWN0b3IuR2V0TmVhcmVzdCgpPy5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKTsKCQkJLy9tX2V2ZW50U2VuZGVyLlNlbmQoZXhpdGVyLCAicm9sZUV2ZW50X09uRW5lbXlFeGl0Iik7CgkJfQoJfQoJcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPbkVuZW15RXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJaWYgKGV2ZW50TWVzc2FnZSA9PSAicm9sZUV2ZW50X09uU3RhdGVfREVBRCIpCgkJewoJCQkvL21fcm9sZS5DdXJTdGF0ZSA9IFJvbGVDb250cm9sLlN0YXRlLklETEU7CgkJCS8vRGVidWcuTG9nKCJPbkVuZW15RXZlbnQ6IHRhcmdldD0gIiArIHNlbmRlciArICJldmVudD0gIiArIGV2ZW50TWVzc2FnZSk7CgkJfQoJfQoKCXZvaWQgT25Ta2lsbFRhcmdldEVudGVyKEdhbWVPYmplY3QgZW50ZXIpCgl7CgkJaWYgKG1fcm9sZS5Ta2lsbFVzZXIgJiYgbV9yb2xlLlNraWxsVXNlci5DdXJTa2lsbCAhPSBudWxsKSBtX3JvbGUuU2tpbGxVc2VyLkFkZFRhcmdldChlbnRlcik7CgkJLy9EZWJ1Zy5Mb2coIk9uU2tpbGxUYXJnZXRFbnRlcjogZW50ZXI9ICIgKyBlbnRlcik7Cgl9CgoJdm9pZCBPblNraWxsVGFyZ2V0RXhpdChHYW1lT2JqZWN0IGV4aXRlcikKCXsKCQlpZiAobV9yb2xlLlNraWxsVXNlciAmJiBtX3JvbGUuU2tpbGxVc2VyLkN1clNraWxsICE9IG51bGwpIG1fcm9sZS5Ta2lsbFVzZXIuUmVtb3ZlVGFyZ2V0KGV4aXRlcik7CgkJLy9EZWJ1Zy5Mb2coIk9uU2tpbGxUYXJnZXRFeGl0OiBleGl0ZXI9ICIgKyBleGl0ZXIpOwoJfQoJdm9pZCBPblNraWxsVGFyZ2V0RXZlbnQoR2FtZU9iamVjdCBzZW5kZXIsIHN0cmluZyBldmVudE1lc3NhZ2UpCgl7CgkJaWYgKGV2ZW50TWVzc2FnZSA9PSAicm9sZUV2ZW50X09uU3RhdGVfREVBRCIpCgkJewoJCQlEZWJ1Zy5Mb2coIk9uU2tpbGxUYXJnZXRFdmVudDogdGFyZ2V0PSAiICsgc2VuZGVyICsgImV2ZW50PSAiICsgZXZlbnRNZXNzYWdlKTsKCQl9Cgl9CgoJcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPbkludGVyYWN0U3RheShHYW1lT2JqZWN0IGludGVyYWN0b3IsIGZsb2F0IGR1cmluZykKCXsKCQlpZiAoaW50ZXJhY3Rvci50YWcgIT0gIml0ZW0iKSBtX3JvbGUuTG9va0F0KGludGVyYWN0b3IudHJhbnNmb3JtKTsKCQkvL0hpZ2hsaWdodFRhcmdldChpbnRlcmFjdG9yLmdhbWVPYmplY3QsIHRydWUpOwoJCS8vRGVidWcuTG9nKCJbUm9sZUFJLSIgKyBtX3JvbGUgKyAiXSBPbkludGVyYWN0aW5nIHdpdGggOiAiICsgaW50ZXJhY3Rvci5nYW1lT2JqZWN0KTsKCX0KCXZvaWQgSGlnaGxpZ2h0VGFyZ2V0KEdhbWVPYmplY3Qgb2JqLCBib29sIGFjdGl2ZSkKCXsKCQlIaWdobGlnaHRhYmxlT2JqZWN0IHRhcmdldCA9IG9iai5HZXRDb21wb25lbnQ8SGlnaGxpZ2h0YWJsZU9iamVjdD4oKTsKCQlpZiAodGFyZ2V0KQoJCXsKCQkJaWYgKGFjdGl2ZSkgdGFyZ2V0LkhpZ2hsaWdodCgpOwoJCQllbHNlIHRhcmdldC5EZWhpZ2hsaWdodCgpOwoJCX0KCX0KfQoKLy8gI2lmIFVOSVRZX0VESVRPUgovLyBbQ3VzdG9tRWRpdG9yKHR5cGVvZihSb2xlQUkpKV0KLy8gcHVibGljIGNsYXNzIFJvbGVBSUluc3BlY3RvciA6IEVkaXRvciAgCi8vIHsKLy8gCVNlcmlhbGl6ZWRPYmplY3Qgb2JqOyAgCi8vIAlSb2xlQUkgcm9sZUFpOyAgCi8vIAlTZXJpYWxpemVkUHJvcGVydHkgY2FtcDsgIAovLyAJU2VyaWFsaXplZFByb3BlcnR5IG1fT2ZmZW5zaXZlOyAKCi8vIAl2b2lkIE9uRW5hYmxlKCkKLy8gCXsgIAovLyAgICAgCW9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KHRhcmdldCk7ICAKLy8gICAgIAltX09mZmVuc2l2ZSA9IG9iai5GaW5kUHJvcGVydHkoIm1fT2ZmZW5zaXZlIik7Ci8vIAl9CgovLyAJcHVibGljIG92ZXJyaWRlIHZvaWQgT25JbnNwZWN0b3JHVUkoKQovLyAJewovLyAJCWJhc2UuT25JbnNwZWN0b3JHVUkoKTsKLy8gCQlyb2xlQWkgPSAoUm9sZUFJKXRhcmdldDsKLy8gCQlpZiAocm9sZUFpLmNhbXAgPT0gUm9sZUFJLkNhbXAuRU5FTVkpCi8vIAkJewovLyAJCQlFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX09mZmVuc2l2ZSk7Ci8vIAkJfQovLyAJfQovLyB9IAovLyAjZW5kaWYKAAAAAAAAAABzBgAAAAAAAAAAAAA",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABzBgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZS5BSTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgTXlCb3g7CgpbUmVxdWlyZUNvbXBvbmVudCh0eXBlb2YoUm9sZUNvbnRyb2wpKV0KcHVibGljIGNsYXNzIFJvbGVBSSA6IEFJQmFzZQp7CglwdWJsaWMgZmxvYXQgTW92ZVNwZWVkID0gNi4wZjsKCXB1YmxpYyBOYXZNZXNoQWdlbnQgQWdlbnQgPT4gbV9BZ2VudDsKCXByb3RlY3RlZCBOYXZNZXNoQWdlbnQgbV9BZ2VudDsKCXB1YmxpYyBmbG9hdCBTcGVlZFNjYWxlIHsgZ2V0IHsgcmV0dXJuIEFnZW50LnZlbG9jaXR5Lm1hZ25pdHVkZSAvIE1vdmVTcGVlZDsgfSB9Cglwcm90ZWN0ZWQgVmVjdG9yMyBtX0Rlc3RpbmF0aW9uID0gVmVjdG9yMy56ZXJvOwoJTmF2TWVzaFBhdGggbV9DYWxjdWxhdGVkUGF0aDsKCglwdWJsaWMgb3ZlcnJpZGUgdm9pZCBJbml0KCkKCXsKCQliYXNlLkluaXQoKTsKCQltX0FnZW50ID0gR2V0Q29tcG9uZW50PE5hdk1lc2hBZ2VudD4oKTsKCQltX0FnZW50LnNwZWVkID0gTW92ZVNwZWVkOwoJCW1fQWdlbnQuYW5ndWxhclNwZWVkID0gMzYwLjBmOwoJCW1fQ2FsY3VsYXRlZFBhdGggPSBuZXcgTmF2TWVzaFBhdGgoKTsKCX0KCglwdWJsaWMgdm9pZCBNb3ZlKFZlY3RvcjMgZGlyZWN0aW9uKQoJewoJCWlmIChkaXJlY3Rpb24ubWFnbml0dWRlID4gMCkKCQl7CgkJCUFnZW50LkNhbGN1bGF0ZVBhdGgodHJhbnNmb3JtLnBvc2l0aW9uICsgZGlyZWN0aW9uLCBtX0NhbGN1bGF0ZWRQYXRoKTsKCQkJaWYgKG1fQ2FsY3VsYXRlZFBhdGguc3RhdHVzID09IE5hdk1lc2hQYXRoU3RhdHVzLlBhdGhDb21wbGV0ZSkKCQkJewoJCQkJQWdlbnQuU2V0UGF0aChtX0NhbGN1bGF0ZWRQYXRoKTsKCQkJCW1fQ2FsY3VsYXRlZFBhdGguQ2xlYXJDb3JuZXJzKCk7CgkJCQltX3JvbGUuQ3VyU3RhdGUgPSBSb2xlQ29udHJvbC5TdGF0ZS5NT1ZFOwoJCQl9CgkJfQoJfQoKCXB1YmxpYyB2b2lkIE1vdmVUbyhWZWN0b3IzIHBvcykKCXsKCQltX0Rlc3RpbmF0aW9uID0gcG9zOwoJCW1fQWdlbnQuU2V0RGVzdGluYXRpb24ocG9zKTsKCQltX3JvbGUuQ3VyU3RhdGUgPSBSb2xlQ29udHJvbC5TdGF0ZS5NT1ZFOwoJfQoJcHVibGljIHZvaWQgU3RvcCgpCgl7CgkJQWdlbnQuUmVzZXRQYXRoKCk7CgkJQWdlbnQudmVsb2NpdHkgPSBWZWN0b3IzLnplcm87Cgl9Cglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbk1vdmluZ0FJKCkKCXsKCQlpZiAobV9EZXN0aW5hdGlvbiAhPSBWZWN0b3IzLnplcm8gJiYgVmVjdG9yMy5TcXJNYWduaXR1ZGUobV9EZXN0aW5hdGlvbiAtIHRyYW5zZm9ybS5wb3NpdGlvbikgPD0gMSkKCQl7CgkJCUdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uU2VuZChnYW1lT2JqZWN0LCAicm9sZUFJRXZlbnRfT25Nb3ZlRW5kIik7CgkJCW1fcm9sZS5DdXJTdGF0ZSA9IFJvbGVDb250cm9sLlN0YXRlLklETEU7CgkJCXJldHVybjsKCQl9Cgl9CgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25EZWFkQUkoKQoJewoJCUFnZW50LmlzU3RvcHBlZCA9IHRydWU7CgkJQWdlbnQuZW5hYmxlZCA9IGZhbHNlOwoJfQp9CgAAAAAAAAAAZQYAAAAAAAAAAAAA",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABlBgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZS5BSTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgTXlCb3g7CgpbUmVxdWlyZUNvbXBvbmVudCh0eXBlb2YoUm9sZUNvbnRyb2wpKV0KcHVibGljIGNsYXNzIFJvbGVBSSA6IEFJQmFzZQp7CglwdWJsaWMgTmF2TWVzaEFnZW50IEFnZW50ID0+IG1fQWdlbnQ7Cglwcm90ZWN0ZWQgTmF2TWVzaEFnZW50IG1fQWdlbnQ7CglwdWJsaWMgb3ZlcnJpZGUgZmxvYXQgU3BlZWRTY2FsZSB7IGdldCB7IHJldHVybiBBZ2VudC52ZWxvY2l0eS5tYWduaXR1ZGUgLyBNb3ZlU3BlZWQ7IH0gfQoJcHJvdGVjdGVkIFZlY3RvcjMgbV9EZXN0aW5hdGlvbiA9IFZlY3RvcjMuemVybzsKCU5hdk1lc2hQYXRoIG1fQ2FsY3VsYXRlZFBhdGg7CgoJcHVibGljIG92ZXJyaWRlIHZvaWQgSW5pdCgpCgl7CgkJYmFzZS5Jbml0KCk7CgkJbV9BZ2VudCA9IEdldENvbXBvbmVudDxOYXZNZXNoQWdlbnQ+KCk7CgkJbV9BZ2VudC5zcGVlZCA9IE1vdmVTcGVlZDsKCQltX0FnZW50LmFuZ3VsYXJTcGVlZCA9IDM2MC4wZjsKCQltX0NhbGN1bGF0ZWRQYXRoID0gbmV3IE5hdk1lc2hQYXRoKCk7Cgl9CgoJcHVibGljIHZvaWQgTW92ZShWZWN0b3IzIGRpcmVjdGlvbikKCXsKCQlpZiAoZGlyZWN0aW9uLm1hZ25pdHVkZSA+IDApCgkJewoJCQlBZ2VudC5DYWxjdWxhdGVQYXRoKHRyYW5zZm9ybS5wb3NpdGlvbiArIGRpcmVjdGlvbiwgbV9DYWxjdWxhdGVkUGF0aCk7CgkJCWlmIChtX0NhbGN1bGF0ZWRQYXRoLnN0YXR1cyA9PSBOYXZNZXNoUGF0aFN0YXR1cy5QYXRoQ29tcGxldGUpCgkJCXsKCQkJCUFnZW50LlNldFBhdGgobV9DYWxjdWxhdGVkUGF0aCk7CgkJCQltX0NhbGN1bGF0ZWRQYXRoLkNsZWFyQ29ybmVycygpOwoJCQkJbV9yb2xlLkN1clN0YXRlID0gUm9sZUNvbnRyb2wuU3RhdGUuTU9WRTsKCQkJfQoJCX0KCX0KCglwdWJsaWMgdm9pZCBNb3ZlVG8oVmVjdG9yMyBwb3MpCgl7CgkJbV9EZXN0aW5hdGlvbiA9IHBvczsKCQltX0FnZW50LlNldERlc3RpbmF0aW9uKHBvcyk7CgkJbV9yb2xlLkN1clN0YXRlID0gUm9sZUNvbnRyb2wuU3RhdGUuTU9WRTsKCX0KCXB1YmxpYyBvdmVycmlkZSB2b2lkIFN0b3AoKQoJewoJCUFnZW50LlJlc2V0UGF0aCgpOwoJCUFnZW50LnZlbG9jaXR5ID0gVmVjdG9yMy56ZXJvOwoJfQoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25Nb3ZpbmdBSSgpCgl7CgkJaWYgKG1fRGVzdGluYXRpb24gIT0gVmVjdG9yMy56ZXJvICYmIFZlY3RvcjMuU3FyTWFnbml0dWRlKG1fRGVzdGluYXRpb24gLSB0cmFuc2Zvcm0ucG9zaXRpb24pIDw9IDEpCgkJewoJCQlHZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LlNlbmQoZ2FtZU9iamVjdCwgInJvbGVBSUV2ZW50X09uTW92ZUVuZCIpOwoJCQltX3JvbGUuQ3VyU3RhdGUgPSBSb2xlQ29udHJvbC5TdGF0ZS5JRExFOwoJCQlyZXR1cm47CgkJfQoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uRGVhZEFJKCkKCXsKCQlBZ2VudC5pc1N0b3BwZWQgPSB0cnVlOwoJCUFnZW50LmVuYWJsZWQgPSBmYWxzZTsKCX0KfQoAAAAAAAAAAJwGAAAAAAAAAAAAAA",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAACcBgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZS5BSTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgTXlCb3g7CgpbUmVxdWlyZUNvbXBvbmVudCh0eXBlb2YoUm9sZUNvbnRyb2wpKV0KcHVibGljIGNsYXNzIFJvbGVBSSA6IEFJQmFzZQp7CglwdWJsaWMgTmF2TWVzaEFnZW50IEFnZW50ID0+IG1fQWdlbnQ7Cglwcm90ZWN0ZWQgTmF2TWVzaEFnZW50IG1fQWdlbnQ7CglwdWJsaWMgb3ZlcnJpZGUgZmxvYXQgU3BlZWRTY2FsZSB7IGdldCB7IHJldHVybiBBZ2VudC52ZWxvY2l0eS5tYWduaXR1ZGUgLyBNb3ZlU3BlZWQ7IH0gfQoJcHJvdGVjdGVkIFZlY3RvcjMgbV9EZXN0aW5hdGlvbiA9IFZlY3RvcjMuemVybzsKCU5hdk1lc2hQYXRoIG1fQ2FsY3VsYXRlZFBhdGg7CgoJcHVibGljIG92ZXJyaWRlIHZvaWQgSW5pdCgpCgl7CgkJYmFzZS5Jbml0KCk7CgkJbV9BZ2VudCA9IEdldENvbXBvbmVudDxOYXZNZXNoQWdlbnQ+KCk7CgkJbV9BZ2VudC5zcGVlZCA9IE1vdmVTcGVlZDsKCQltX0FnZW50LmFuZ3VsYXJTcGVlZCA9IDM2MC4wZjsKCQltX0NhbGN1bGF0ZWRQYXRoID0gbmV3IE5hdk1lc2hQYXRoKCk7Cgl9CgoJcHVibGljIHZvaWQgTW92ZShWZWN0b3IzIGRpcmVjdGlvbikKCXsKCQlpZiAoZGlyZWN0aW9uLm1hZ25pdHVkZSA+IDApCgkJewoJCQlBZ2VudC5DYWxjdWxhdGVQYXRoKHRyYW5zZm9ybS5wb3NpdGlvbiArIGRpcmVjdGlvbiwgbV9DYWxjdWxhdGVkUGF0aCk7CgkJCWlmIChtX0NhbGN1bGF0ZWRQYXRoLnN0YXR1cyA9PSBOYXZNZXNoUGF0aFN0YXR1cy5QYXRoQ29tcGxldGUpCgkJCXsKCQkJCUFnZW50LlNldFBhdGgobV9DYWxjdWxhdGVkUGF0aCk7CgkJCQltX0NhbGN1bGF0ZWRQYXRoLkNsZWFyQ29ybmVycygpOwoJCQkJbV9yb2xlLkN1clN0YXRlID0gUm9sZUNvbnRyb2wuU3RhdGUuTU9WRTsKCQkJCUFnZW50LmlzU3RvcHBlZCA9IGZhbHNlOwoJCQl9CgkJfQoJfQoKCXB1YmxpYyB2b2lkIE1vdmVUbyhWZWN0b3IzIHBvcykKCXsKCQltX0Rlc3RpbmF0aW9uID0gcG9zOwoJCW1fQWdlbnQuU2V0RGVzdGluYXRpb24ocG9zKTsKCQltX3JvbGUuQ3VyU3RhdGUgPSBSb2xlQ29udHJvbC5TdGF0ZS5NT1ZFOwoJfQoJcHVibGljIG92ZXJyaWRlIHZvaWQgU3RvcCgpCgl7CgkJQWdlbnQuUmVzZXRQYXRoKCk7CgkJQWdlbnQudmVsb2NpdHkgPSBWZWN0b3IzLnplcm87CgkJQWdlbnQuaXNTdG9wcGVkID0gdHJ1ZTsKCX0KCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uTW92aW5nQUkoKQoJewoJCWlmIChtX0Rlc3RpbmF0aW9uICE9IFZlY3RvcjMuemVybyAmJiBWZWN0b3IzLlNxck1hZ25pdHVkZShtX0Rlc3RpbmF0aW9uIC0gdHJhbnNmb3JtLnBvc2l0aW9uKSA8PSAxKQoJCXsKCQkJR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5TZW5kKGdhbWVPYmplY3QsICJyb2xlQUlFdmVudF9Pbk1vdmVFbmQiKTsKCQkJbV9yb2xlLkN1clN0YXRlID0gUm9sZUNvbnRyb2wuU3RhdGUuSURMRTsKCQkJcmV0dXJuOwoJCX0KCX0KCglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkRlYWRBSSgpCgl7CgkJQWdlbnQuaXNTdG9wcGVkID0gdHJ1ZTsKCQlBZ2VudC5lbmFibGVkID0gZmFsc2U7Cgl9Cn0KAAAAAAAAAAC3BgAAAAAAAAAAAAAAAAAAAAAAALcGAAAAAAAAAAAAAA",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAAC3BgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZS5BSTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgTXlCb3g7CgpbUmVxdWlyZUNvbXBvbmVudCh0eXBlb2YoUm9sZUNvbnRyb2wpKV0KcHVibGljIGNsYXNzIFJvbGVBSSA6IEFJQmFzZQp7CglwdWJsaWMgTmF2TWVzaEFnZW50IEFnZW50ID0+IG1fQWdlbnQ7Cglwcm90ZWN0ZWQgTmF2TWVzaEFnZW50IG1fQWdlbnQ7CglwdWJsaWMgb3ZlcnJpZGUgZmxvYXQgU3BlZWRTY2FsZSB7IGdldCB7IHJldHVybiBBZ2VudC52ZWxvY2l0eS5tYWduaXR1ZGUgLyBNb3ZlU3BlZWQ7IH0gfQoJcHJvdGVjdGVkIFZlY3RvcjMgbV9EZXN0aW5hdGlvbiA9IFZlY3RvcjMuemVybzsKCU5hdk1lc2hQYXRoIG1fQ2FsY3VsYXRlZFBhdGg7CgoJcHVibGljIG92ZXJyaWRlIHZvaWQgSW5pdCgpCgl7CgkJYmFzZS5Jbml0KCk7CgkJbV9BZ2VudCA9IEdldENvbXBvbmVudDxOYXZNZXNoQWdlbnQ+KCk7CgkJbV9BZ2VudC5zcGVlZCA9IE1vdmVTcGVlZDsKCQltX0FnZW50LmFuZ3VsYXJTcGVlZCA9IDM2MC4wZjsKCQltX0NhbGN1bGF0ZWRQYXRoID0gbmV3IE5hdk1lc2hQYXRoKCk7Cgl9CgoJcHVibGljIHZvaWQgTW92ZShWZWN0b3IzIGRpcmVjdGlvbikKCXsKCQlpZiAoZGlyZWN0aW9uLm1hZ25pdHVkZSA+IDApCgkJewoJCQlBZ2VudC5DYWxjdWxhdGVQYXRoKHRyYW5zZm9ybS5wb3NpdGlvbiArIGRpcmVjdGlvbiwgbV9DYWxjdWxhdGVkUGF0aCk7CgkJCWlmIChtX0NhbGN1bGF0ZWRQYXRoLnN0YXR1cyA9PSBOYXZNZXNoUGF0aFN0YXR1cy5QYXRoQ29tcGxldGUpCgkJCXsKCQkJCUFnZW50LlNldFBhdGgobV9DYWxjdWxhdGVkUGF0aCk7CgkJCQltX0NhbGN1bGF0ZWRQYXRoLkNsZWFyQ29ybmVycygpOwoJCQkJQWdlbnQuaXNTdG9wcGVkID0gZmFsc2U7CgkJCQltX3JvbGUuQ3VyU3RhdGUgPSBSb2xlQ29udHJvbC5TdGF0ZS5NT1ZFOwoJCQl9CgkJfQoJfQoKCXB1YmxpYyB2b2lkIE1vdmVUbyhWZWN0b3IzIHBvcykKCXsKCQltX0Rlc3RpbmF0aW9uID0gcG9zOwoJCW1fQWdlbnQuU2V0RGVzdGluYXRpb24ocG9zKTsKCQlBZ2VudC5pc1N0b3BwZWQgPSBmYWxzZTsKCQltX3JvbGUuQ3VyU3RhdGUgPSBSb2xlQ29udHJvbC5TdGF0ZS5NT1ZFOwoJfQoJcHVibGljIG92ZXJyaWRlIHZvaWQgU3RvcCgpCgl7CgkJQWdlbnQudmVsb2NpdHkgPSBWZWN0b3IzLnplcm87CgkJQWdlbnQuaXNTdG9wcGVkID0gdHJ1ZTsKCQlBZ2VudC5SZXNldFBhdGgoKTsKCX0KCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uTW92aW5nQUkoKQoJewoJCWlmIChtX0Rlc3RpbmF0aW9uICE9IFZlY3RvcjMuemVybyAmJiBWZWN0b3IzLlNxck1hZ25pdHVkZShtX0Rlc3RpbmF0aW9uIC0gdHJhbnNmb3JtLnBvc2l0aW9uKSA8PSAxKQoJCXsKCQkJR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5TZW5kKGdhbWVPYmplY3QsICJyb2xlQUlFdmVudF9Pbk1vdmVFbmQiKTsKCQkJbV9yb2xlLkN1clN0YXRlID0gUm9sZUNvbnRyb2wuU3RhdGUuSURMRTsKCQkJcmV0dXJuOwoJCX0KCX0KCglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkRlYWRBSSgpCgl7CgkJQWdlbnQuaXNTdG9wcGVkID0gdHJ1ZTsKCQlBZ2VudC5lbmFibGVkID0gZmFsc2U7Cgl9Cn0KAAAAAAAAAAAOCAAAAAAAAAAAAAAAAAAAAAAAAB8IAAAAAAAAAAAAAAAAAAAAAAAAHwgAAAAAAAAAAAAA",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAfCAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZS5BSTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgTXlCb3g7CgpwdWJsaWMgY2xhc3MgUm9sZUFJIDogQUlCYXNlCnsKCXB1YmxpYyBOYXZNZXNoQWdlbnQgQWdlbnQgPT4gbV9BZ2VudDsKCXByb3RlY3RlZCBOYXZNZXNoQWdlbnQgbV9BZ2VudDsKCXB1YmxpYyBvdmVycmlkZSBmbG9hdCBTcGVlZFNjYWxlIHsgZ2V0IHsgcmV0dXJuIEFnZW50LnZlbG9jaXR5Lm1hZ25pdHVkZSAvIG1fY2hhcmFjdGVyLk1vdmVTcGVlZDsgfSB9Cglwcm90ZWN0ZWQgVmVjdG9yMyBtX0Rlc3RpbmF0aW9uID0gVmVjdG9yMy56ZXJvOwoJTmF2TWVzaFBhdGggbV9DYWxjdWxhdGVkUGF0aDsKCgoJcHVibGljIG92ZXJyaWRlIHZvaWQgSW5pdChDaGFyYWN0ZXJEYXRhIGRhdGEpCgl7CgkJYmFzZS5Jbml0KGRhdGEpOwoJCW1fQWdlbnQgPSBHZXRDb21wb25lbnQ8TmF2TWVzaEFnZW50PigpOwoJCW1fQWdlbnQuc3BlZWQgPSBtX2NoYXJhY3Rlci5Nb3ZlU3BlZWQ7CgkJbV9BZ2VudC5hbmd1bGFyU3BlZWQgPSAzNjAuMGY7CgkJbV9DYWxjdWxhdGVkUGF0aCA9IG5ldyBOYXZNZXNoUGF0aCgpOwoJfQoJcHVibGljIHZvaWQgTW92ZShWZWN0b3IzIGRpcmVjdGlvbikKCXsKCQlpZiAoZGlyZWN0aW9uLm1hZ25pdHVkZSA+IDApCgkJewoJCQlBZ2VudC5DYWxjdWxhdGVQYXRoKHRyYW5zZm9ybS5wb3NpdGlvbiArIGRpcmVjdGlvbiwgbV9DYWxjdWxhdGVkUGF0aCk7CgkJCWlmIChtX0NhbGN1bGF0ZWRQYXRoLnN0YXR1cyA9PSBOYXZNZXNoUGF0aFN0YXR1cy5QYXRoQ29tcGxldGUpCgkJCXsKCQkJCUFnZW50LlNldFBhdGgobV9DYWxjdWxhdGVkUGF0aCk7CgkJCQltX0NhbGN1bGF0ZWRQYXRoLkNsZWFyQ29ybmVycygpOwoJCQkJQWdlbnQuaXNTdG9wcGVkID0gZmFsc2U7CgkJCQlTZXRTdGF0ZShTdGF0ZS5NT1ZFKTsKCQkJfQoJCX0KCX0KCglwdWJsaWMgdm9pZCBNb3ZlVG8oVmVjdG9yMyBwb3MpCgl7CgkJbV9EZXN0aW5hdGlvbiA9IHBvczsKCQltX0FnZW50LlNldERlc3RpbmF0aW9uKHBvcyk7CgkJQWdlbnQuaXNTdG9wcGVkID0gZmFsc2U7CgkJU2V0U3RhdGUoU3RhdGUuTU9WRSk7Cgl9CglwdWJsaWMgb3ZlcnJpZGUgdm9pZCBTdG9wKCkKCXsKCQlBZ2VudC52ZWxvY2l0eSA9IFZlY3RvcjMuemVybzsKCQlBZ2VudC5pc1N0b3BwZWQgPSB0cnVlOwoJCUFnZW50LlJlc2V0UGF0aCgpOwoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uSWRsaW5nQUkoKQoJewoJCWlmIChDdXJyZW50RW5lbXkgIT0gbnVsbCkgeyBTZXRTdGF0ZShTdGF0ZS5QVVJTVUlORyk7IHJldHVybjsgfQoJCWVsc2UgaWYgKEVuZW15RGV0ZWN0b3IuSW5uZXJzLkNvdW50ID4gMCkKCQl7CgkJCW1fY2hhcmFjdGVyLlNldEVuZW15KEVuZW15RGV0ZWN0b3IuR2V0TmVhcmVzdCgpLkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpKTsKCQkJU2V0U3RhdGUoU3RhdGUuUFVSU1VJTkcpOwoJCQlyZXR1cm47CgkJfQoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uUHVyc3VpbmdBSSgpCgl7CgkJaWYgKEN1cnJlbnRFbmVteSkgTG9va0F0KEN1cnJlbnRFbmVteS50cmFuc2Zvcm0pOwoJCWVsc2UgU2V0U3RhdGUoU3RhdGUuSURMRSk7Cgl9Cglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbk1vdmluZ0FJKCkKCXsKCQlpZiAobV9EZXN0aW5hdGlvbiAhPSBWZWN0b3IzLnplcm8gJiYgVmVjdG9yMy5TcXJNYWduaXR1ZGUobV9EZXN0aW5hdGlvbiAtIHRyYW5zZm9ybS5wb3NpdGlvbikgPD0gMSkKCQl7CgkJCUdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uU2VuZChnYW1lT2JqZWN0LCAicm9sZUFJRXZlbnRfT25Nb3ZlRW5kIik7CgkJCVNldFN0YXRlKFN0YXRlLklETEUpOwoJCQlyZXR1cm47CgkJfQoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uRGVhdGhBSSgpCgl7CgkJQWdlbnQuaXNTdG9wcGVkID0gdHJ1ZTsKCQlBZ2VudC5lbmFibGVkID0gZmFsc2U7Cgl9Cn0KAAAAAAAAAAAfCAAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAfCAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZS5BSTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgTXlCb3g7CgpwdWJsaWMgY2xhc3MgUm9sZUFJIDogQUlCYXNlCnsKCXB1YmxpYyBOYXZNZXNoQWdlbnQgQWdlbnQgPT4gbV9BZ2VudDsKCXByb3RlY3RlZCBOYXZNZXNoQWdlbnQgbV9BZ2VudDsKCXB1YmxpYyBvdmVycmlkZSBmbG9hdCBTcGVlZFNjYWxlIHsgZ2V0IHsgcmV0dXJuIEFnZW50LnZlbG9jaXR5Lm1hZ25pdHVkZSAvIG1fY2hhcmFjdGVyLk1vdmVTcGVlZDsgfSB9Cglwcm90ZWN0ZWQgVmVjdG9yMyBtX0Rlc3RpbmF0aW9uID0gVmVjdG9yMy56ZXJvOwoJTmF2TWVzaFBhdGggbV9DYWxjdWxhdGVkUGF0aDsKCgoJcHVibGljIG92ZXJyaWRlIHZvaWQgSW5pdChDaGFyYWN0ZXJEYXRhIGRhdGEpCgl7CgkJYmFzZS5Jbml0KGRhdGEpOwoJCW1fQWdlbnQgPSBHZXRDb21wb25lbnQ8TmF2TWVzaEFnZW50PigpOwoJCW1fQWdlbnQuc3BlZWQgPSBtX2NoYXJhY3Rlci5Nb3ZlU3BlZWQ7CgkJbV9BZ2VudC5hbmd1bGFyU3BlZWQgPSAzNjAuMGY7CgkJbV9DYWxjdWxhdGVkUGF0aCA9IG5ldyBOYXZNZXNoUGF0aCgpOwoJfQoJcHVibGljIHZvaWQgTW92ZShWZWN0b3IzIGRpcmVjdGlvbikKCXsKCQlpZiAoZGlyZWN0aW9uLm1hZ25pdHVkZSA+IDApCgkJewoJCQlBZ2VudC5DYWxjdWxhdGVQYXRoKHRyYW5zZm9ybS5wb3NpdGlvbiArIGRpcmVjdGlvbiwgbV9DYWxjdWxhdGVkUGF0aCk7CgkJCWlmIChtX0NhbGN1bGF0ZWRQYXRoLnN0YXR1cyA9PSBOYXZNZXNoUGF0aFN0YXR1cy5QYXRoQ29tcGxldGUpCgkJCXsKCQkJCUFnZW50LlNldFBhdGgobV9DYWxjdWxhdGVkUGF0aCk7CgkJCQltX0NhbGN1bGF0ZWRQYXRoLkNsZWFyQ29ybmVycygpOwoJCQkJQWdlbnQuaXNTdG9wcGVkID0gZmFsc2U7CgkJCQlTZXRTdGF0ZShTdGF0ZS5NT1ZFKTsKCQkJfQoJCX0KCX0KCglwdWJsaWMgdm9pZCBNb3ZlVG8oVmVjdG9yMyBwb3MpCgl7CgkJbV9EZXN0aW5hdGlvbiA9IHBvczsKCQltX0FnZW50LlNldERlc3RpbmF0aW9uKHBvcyk7CgkJQWdlbnQuaXNTdG9wcGVkID0gZmFsc2U7CgkJU2V0U3RhdGUoU3RhdGUuTU9WRSk7Cgl9CglwdWJsaWMgb3ZlcnJpZGUgdm9pZCBTdG9wKCkKCXsKCQlBZ2VudC52ZWxvY2l0eSA9IFZlY3RvcjMuemVybzsKCQlBZ2VudC5pc1N0b3BwZWQgPSB0cnVlOwoJCUFnZW50LlJlc2V0UGF0aCgpOwoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uSWRsaW5nQUkoKQoJewoJCWlmIChDdXJyZW50RW5lbXkgIT0gbnVsbCkgeyBTZXRTdGF0ZShTdGF0ZS5QVVJTVUlORyk7IHJldHVybjsgfQoJCWVsc2UgaWYgKEVuZW15RGV0ZWN0b3IuSW5uZXJzLkNvdW50ID4gMCkKCQl7CgkJCW1fY2hhcmFjdGVyLlNldEVuZW15KEVuZW15RGV0ZWN0b3IuR2V0TmVhcmVzdCgpLkdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpKTsKCQkJU2V0U3RhdGUoU3RhdGUuUFVSU1VJTkcpOwoJCQlyZXR1cm47CgkJfQoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uUHVyc3VpbmdBSSgpCgl7CgkJaWYgKEN1cnJlbnRFbmVteSkgTG9va0F0KEN1cnJlbnRFbmVteS50cmFuc2Zvcm0pOwoJCWVsc2UgU2V0U3RhdGUoU3RhdGUuSURMRSk7Cgl9Cglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbk1vdmluZ0FJKCkKCXsKCQlpZiAobV9EZXN0aW5hdGlvbiAhPSBWZWN0b3IzLnplcm8gJiYgVmVjdG9yMy5TcXJNYWduaXR1ZGUobV9EZXN0aW5hdGlvbiAtIHRyYW5zZm9ybS5wb3NpdGlvbikgPD0gMSkKCQl7CgkJCUdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uU2VuZChnYW1lT2JqZWN0LCAicm9sZUFJRXZlbnRfT25Nb3ZlRW5kIik7CgkJCVNldFN0YXRlKFN0YXRlLklETEUpOwoJCQlyZXR1cm47CgkJfQoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uRGVhdGhBSSgpCgl7CgkJQWdlbnQuaXNTdG9wcGVkID0gdHJ1ZTsKCQlBZ2VudC5lbmFibGVkID0gZmFsc2U7Cgl9Cn0KAAAAAAAAAABACQAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABACQAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZS5BSTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgTXlCb3g7CgpwdWJsaWMgY2xhc3MgUm9sZUFJIDogQUlCYXNlCnsKCXB1YmxpYyBOYXZNZXNoQWdlbnQgQWdlbnQgPT4gbV9BZ2VudDsKCXByb3RlY3RlZCBOYXZNZXNoQWdlbnQgbV9BZ2VudDsKCXB1YmxpYyBvdmVycmlkZSBmbG9hdCBTcGVlZFNjYWxlIHsgZ2V0IHsgcmV0dXJuIEFnZW50LnZlbG9jaXR5Lm1hZ25pdHVkZSAvIG1fY2hhcmFjdGVyLk1vdmVTcGVlZDsgfSB9Cglwcm90ZWN0ZWQgVmVjdG9yMyBtX0Rlc3RpbmF0aW9uID0gVmVjdG9yMy56ZXJvOwoJTmF2TWVzaFBhdGggbV9DYWxjdWxhdGVkUGF0aDsKCgoJcHVibGljIG92ZXJyaWRlIHZvaWQgSW5pdChDaGFyYWN0ZXJEYXRhIGRhdGEpCgl7CgkJYmFzZS5Jbml0KGRhdGEpOwoJCW1fQWdlbnQgPSBHZXRDb21wb25lbnQ8TmF2TWVzaEFnZW50PigpOwoJCW1fQWdlbnQuc3BlZWQgPSBtX2NoYXJhY3Rlci5Nb3ZlU3BlZWQ7CgkJbV9BZ2VudC5hbmd1bGFyU3BlZWQgPSAzNjAuMGY7CgkJbV9DYWxjdWxhdGVkUGF0aCA9IG5ldyBOYXZNZXNoUGF0aCgpOwoJfQoJcHVibGljIHZvaWQgTW92ZShWZWN0b3IzIGRpcmVjdGlvbikKCXsKCQlpZiAoZGlyZWN0aW9uLm1hZ25pdHVkZSA+IDApCgkJewoJCQlBZ2VudC5DYWxjdWxhdGVQYXRoKHRyYW5zZm9ybS5wb3NpdGlvbiArIGRpcmVjdGlvbiwgbV9DYWxjdWxhdGVkUGF0aCk7CgkJCWlmIChtX0NhbGN1bGF0ZWRQYXRoLnN0YXR1cyA9PSBOYXZNZXNoUGF0aFN0YXR1cy5QYXRoQ29tcGxldGUpCgkJCXsKCQkJCUFnZW50LlNldFBhdGgobV9DYWxjdWxhdGVkUGF0aCk7CgkJCQltX0NhbGN1bGF0ZWRQYXRoLkNsZWFyQ29ybmVycygpOwoJCQkJQWdlbnQuaXNTdG9wcGVkID0gZmFsc2U7CgkJCQlTZXRTdGF0ZShTdGF0ZS5NT1ZFKTsKCQkJfQoJCX0KCX0KCglwdWJsaWMgdm9pZCBNb3ZlVG8oVmVjdG9yMyBwb3MpCgl7CgkJbV9EZXN0aW5hdGlvbiA9IHBvczsKCQltX0FnZW50LlNldERlc3RpbmF0aW9uKHBvcyk7CgkJQWdlbnQuaXNTdG9wcGVkID0gZmFsc2U7CgkJU2V0U3RhdGUoU3RhdGUuTU9WRSk7Cgl9CglwdWJsaWMgb3ZlcnJpZGUgdm9pZCBTdG9wKCkKCXsKCQlBZ2VudC52ZWxvY2l0eSA9IFZlY3RvcjMuemVybzsKCQlBZ2VudC5pc1N0b3BwZWQgPSB0cnVlOwoJCUFnZW50LlJlc2V0UGF0aCgpOwoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU3RhdGVVcGRhdGUoU3RhdGUgY3VyU3RhdGUpCgl7CgkJaWYgKGN1clN0YXRlID09IFN0YXRlLklETEUpCgkJewoJCQlpZiAoQ3VycmVudEVuZW15ICE9IG51bGwpIHsgU2V0U3RhdGUoU3RhdGUuUFVSU1VJTkcpOyByZXR1cm47IH0KCQkJZWxzZSBpZiAoRW5lbXlEZXRlY3Rvci5Jbm5lcnMuQ291bnQgPiAwKQoJCQl7CgkJCQltX2NoYXJhY3Rlci5TZXRFbmVteShFbmVteURldGVjdG9yLkdldE5lYXJlc3QoKS5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKSk7CgkJCQlTZXRTdGF0ZShTdGF0ZS5QVVJTVUlORyk7CgkJCQlyZXR1cm47CgkJCX0KCQkJR2V0Q29tcG9uZW50PEV2ZW50U2VuZGVyPigpPy5TZW5kKGdhbWVPYmplY3QsICJyb2xlRXZlbnRfT25JZGxpbmciKTsKCQl9CgkJaWYgKGN1clN0YXRlID09IFN0YXRlLlBVUlNVSU5HKQoJCXsKCQkJaWYgKEN1cnJlbnRFbmVteSkgTG9va0F0KEN1cnJlbnRFbmVteS50cmFuc2Zvcm0pOwoJCQllbHNlIHsgU2V0U3RhdGUoU3RhdGUuSURMRSk7IHJldHVybjsgfQoJCQlHZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LlNlbmQoZ2FtZU9iamVjdCwgInJvbGVFdmVudF9PblB1cnN1aW5nIik7CgkJfQoJCWlmIChjdXJTdGF0ZSA9PSBTdGF0ZS5NT1ZFKQoJCXsKCQkJaWYgKG1fRGVzdGluYXRpb24gIT0gVmVjdG9yMy56ZXJvICYmIFZlY3RvcjMuU3FyTWFnbml0dWRlKG1fRGVzdGluYXRpb24gLSB0cmFuc2Zvcm0ucG9zaXRpb24pIDw9IDEpCgkJCXsKCQkJCUdldENvbXBvbmVudDxFdmVudFNlbmRlcj4oKT8uU2VuZChnYW1lT2JqZWN0LCAicm9sZUFJRXZlbnRfT25Nb3ZlRW5kIik7CgkJCQlTZXRTdGF0ZShTdGF0ZS5JRExFKTsKCQkJCXJldHVybjsKCQkJfQoJCQlHZXRDb21wb25lbnQ8RXZlbnRTZW5kZXI+KCk/LlNlbmQoZ2FtZU9iamVjdCwgInJvbGVFdmVudF9Pbk1vdmluZyIpOwoJCX0KCgl9Cglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkRlYXRoQUkoKQoJewoJCUFnZW50LmlzU3RvcHBlZCA9IHRydWU7CgkJQWdlbnQuZW5hYmxlZCA9IGZhbHNlOwoJfQp9CgAAAAAAAAAAxgcAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAADGBwAAdXNpbmcgU3lzdGVtOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgVW5pdHlFbmdpbmUuQUk7CgpwdWJsaWMgY2xhc3MgUm9sZUFJIDogQUlCYXNlCnsKCXB1YmxpYyBOYXZNZXNoQWdlbnQgQWdlbnQgPT4gbV9BZ2VudDsKCXByb3RlY3RlZCBOYXZNZXNoQWdlbnQgbV9BZ2VudDsKCXB1YmxpYyBBY3Rpb24gTW92ZUVuZEFjdGlvbjsKCXB1YmxpYyBvdmVycmlkZSBmbG9hdCBTcGVlZFNjYWxlIHsgZ2V0IHsgcmV0dXJuIEFnZW50LnZlbG9jaXR5Lm1hZ25pdHVkZSAvIG1fY2hhcmFjdGVyLk1vdmVTcGVlZDsgfSB9Cglwcm90ZWN0ZWQgVmVjdG9yMyBtX0Rlc3RpbmF0aW9uID0gVmVjdG9yMy56ZXJvOwoJTmF2TWVzaFBhdGggbV9DYWxjdWxhdGVkUGF0aDsKCgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TdGFydCgpCgl7CgkJbV9BZ2VudCA9IEdldENvbXBvbmVudDxOYXZNZXNoQWdlbnQ+KCk7CgkJbV9BZ2VudC5zcGVlZCA9IG1fY2hhcmFjdGVyLk1vdmVTcGVlZDsKCQltX0FnZW50LmFuZ3VsYXJTcGVlZCA9IDM2MC4wZjsKCQltX0NhbGN1bGF0ZWRQYXRoID0gbmV3IE5hdk1lc2hQYXRoKCk7Cgl9CglwdWJsaWMgdm9pZCBNb3ZlKFZlY3RvcjMgZGlyZWN0aW9uKQoJewoJCWlmIChkaXJlY3Rpb24ubWFnbml0dWRlID4gMCkKCQl7CgkJCUFnZW50LkNhbGN1bGF0ZVBhdGgodHJhbnNmb3JtLnBvc2l0aW9uICsgZGlyZWN0aW9uLCBtX0NhbGN1bGF0ZWRQYXRoKTsKCQkJaWYgKG1fQ2FsY3VsYXRlZFBhdGguc3RhdHVzID09IE5hdk1lc2hQYXRoU3RhdHVzLlBhdGhDb21wbGV0ZSkKCQkJewoJCQkJQWdlbnQuU2V0UGF0aChtX0NhbGN1bGF0ZWRQYXRoKTsKCQkJCW1fQ2FsY3VsYXRlZFBhdGguQ2xlYXJDb3JuZXJzKCk7CgkJCQlBZ2VudC5pc1N0b3BwZWQgPSBmYWxzZTsKCQkJCVNldFN0YXRlKFN0YXRlLk1PVkUpOwoJCQl9CgkJfQoJfQoJcHVibGljIHZvaWQgTW92ZVRvKFZlY3RvcjMgcG9zKQoJewoJCW1fRGVzdGluYXRpb24gPSBwb3M7CgkJbV9BZ2VudC5TZXREZXN0aW5hdGlvbihwb3MpOwoJCUFnZW50LmlzU3RvcHBlZCA9IGZhbHNlOwoJCVNldFN0YXRlKFN0YXRlLk1PVkUpOwoJfQoJcHVibGljIG92ZXJyaWRlIHZvaWQgU3RvcCgpCgl7CgkJQWdlbnQudmVsb2NpdHkgPSBWZWN0b3IzLnplcm87CgkJQWdlbnQuaXNTdG9wcGVkID0gdHJ1ZTsKCQlBZ2VudC5SZXNldFBhdGgoKTsKCX0KCglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblN0YXRlVXBkYXRlKFN0YXRlIGN1clN0YXRlKQoJewoJCWlmIChjdXJTdGF0ZSA9PSBTdGF0ZS5JRExFKQoJCXsKCQkJaWYgKEN1cnJlbnRFbmVteSAhPSBudWxsKSB7IFNldFN0YXRlKFN0YXRlLlBVUlNVSU5HKTsgcmV0dXJuOyB9CgkJCWVsc2UgaWYgKEVuZW15RGV0ZWN0b3IuSW5uZXJzLkNvdW50ID4gMCkKCQkJewoJCQkJbV9jaGFyYWN0ZXIuU2V0RW5lbXkoRW5lbXlEZXRlY3Rvci5HZXROZWFyZXN0KCkuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCkpOwoJCQkJU2V0U3RhdGUoU3RhdGUuUFVSU1VJTkcpOwoJCQkJcmV0dXJuOwoJCQl9CgkJfQoJCWlmIChjdXJTdGF0ZSA9PSBTdGF0ZS5QVVJTVUlORykKCQl7CgkJCWlmIChDdXJyZW50RW5lbXkpIExvb2tBdChDdXJyZW50RW5lbXkudHJhbnNmb3JtKTsKCQkJZWxzZSB7IFNldFN0YXRlKFN0YXRlLklETEUpOyByZXR1cm47IH0KCQl9CgkJaWYgKGN1clN0YXRlID09IFN0YXRlLk1PVkUpCgkJewoJCQlpZiAobV9EZXN0aW5hdGlvbiAhPSBWZWN0b3IzLnplcm8gJiYgVmVjdG9yMy5TcXJNYWduaXR1ZGUobV9EZXN0aW5hdGlvbiAtIHRyYW5zZm9ybS5wb3NpdGlvbikgPD0gMSkKCQkJewoJCQkJTW92ZUVuZEFjdGlvbj8uSW52b2tlKCk7CgkJCQlTZXRTdGF0ZShTdGF0ZS5JRExFKTsKCQkJCXJldHVybjsKCQkJfQoJCX0KCgl9Cglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPbkRlYXRoQUkoKQoJewoJCUFnZW50LmlzU3RvcHBlZCA9IHRydWU7CgkJQWdlbnQuZW5hYmxlZCA9IGZhbHNlOwoJfQp9CgAAAAAAAAAABwgAAAAAAAAAAAAAAAAAAAAAAAAqCAAAAAAAAAAAAAAAAAAAAAAAACoIAAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"BwAAAAAAAAAAAAAAAAAAAAAAAAAqCAAAdXNpbmcgU3lzdGVtOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgVW5pdHlFbmdpbmUuQUk7CgpwdWJsaWMgY2xhc3MgUm9sZUFJIDogQUlCYXNlCnsKCXB1YmxpYyBOYXZNZXNoQWdlbnQgQWdlbnQgPT4gbV9BZ2VudDsKCXByb3RlY3RlZCBOYXZNZXNoQWdlbnQgbV9BZ2VudDsKCXB1YmxpYyBBY3Rpb24gTW92ZUVuZEFjdGlvbjsKCXB1YmxpYyBvdmVycmlkZSBmbG9hdCBTcGVlZFNjYWxlIHsgZ2V0IHsgcmV0dXJuIEFnZW50LnZlbG9jaXR5Lm1hZ25pdHVkZSAvIG1fY2hhcmFjdGVyLk1vdmVTcGVlZDsgfSB9Cglwcm90ZWN0ZWQgVmVjdG9yMyBtX0Rlc3RpbmF0aW9uID0gVmVjdG9yMy56ZXJvOwoJTmF2TWVzaFBhdGggbV9DYWxjdWxhdGVkUGF0aDsKCgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TdGFydCgpCgl7CgkJbV9BZ2VudCA9IEdldENvbXBvbmVudDxOYXZNZXNoQWdlbnQ+KCk7CgkJbV9BZ2VudC5zcGVlZCA9IG1fY2hhcmFjdGVyLk1vdmVTcGVlZDsKCQltX0FnZW50LmFuZ3VsYXJTcGVlZCA9IDM2MC4wZjsKCQltX0NhbGN1bGF0ZWRQYXRoID0gbmV3IE5hdk1lc2hQYXRoKCk7Cgl9CglwdWJsaWMgdm9pZCBNb3ZlKFZlY3RvcjMgZGlyZWN0aW9uKQoJewoJCWlmIChkaXJlY3Rpb24ubWFnbml0dWRlID4gMCkKCQl7CgkJCUFnZW50LkNhbGN1bGF0ZVBhdGgodHJhbnNmb3JtLnBvc2l0aW9uICsgZGlyZWN0aW9uLCBtX0NhbGN1bGF0ZWRQYXRoKTsKCQkJaWYgKG1fQ2FsY3VsYXRlZFBhdGguc3RhdHVzID09IE5hdk1lc2hQYXRoU3RhdHVzLlBhdGhDb21wbGV0ZSkKCQkJewoJCQkJQWdlbnQuU2V0UGF0aChtX0NhbGN1bGF0ZWRQYXRoKTsKCQkJCW1fQ2FsY3VsYXRlZFBhdGguQ2xlYXJDb3JuZXJzKCk7CgkJCQlBZ2VudC5pc1N0b3BwZWQgPSBmYWxzZTsKCQkJCVNldFN0YXRlKFN0YXRlLk1PVkUpOwoJCQl9CgkJfQoJfQoJcHVibGljIHZvaWQgTW92ZVRvKFZlY3RvcjMgcG9zKQoJewoJCW1fRGVzdGluYXRpb24gPSBwb3M7CgkJbV9BZ2VudC5TZXREZXN0aW5hdGlvbihwb3MpOwoJCUFnZW50LmlzU3RvcHBlZCA9IGZhbHNlOwoJCVNldFN0YXRlKFN0YXRlLk1PVkUpOwoJfQoJcHVibGljIG92ZXJyaWRlIHZvaWQgU3RvcCgpCgl7CgkJQWdlbnQudmVsb2NpdHkgPSBWZWN0b3IzLnplcm87CgkJQWdlbnQuaXNTdG9wcGVkID0gdHJ1ZTsKCQlBZ2VudC5SZXNldFBhdGgoKTsKCX0KCglwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblN0YXRlVXBkYXRlKFN0YXRlIGN1clN0YXRlKQoJewoJCWlmIChjdXJTdGF0ZSA9PSBTdGF0ZS5JRExFIHx8IGN1clN0YXRlID09IFN0YXRlLklOVEVSQUNUSU5HKQoJCXsKCQkJaWYgKEN1cnJlbnRFbmVteSAhPSBudWxsKSB7IFNldFN0YXRlKFN0YXRlLlBVUlNVSU5HKTsgcmV0dXJuOyB9CgkJCWVsc2UgaWYgKEVuZW15RGV0ZWN0b3IuSW5uZXJzLkNvdW50ID4gMCkKCQkJewoJCQkJbV9jaGFyYWN0ZXIuU2V0RW5lbXkoRW5lbXlEZXRlY3Rvci5HZXROZWFyZXN0KCkuR2V0Q29tcG9uZW50PENoYXJhY3RlckRhdGE+KCkpOwoJCQkJU2V0U3RhdGUoU3RhdGUuUFVSU1VJTkcpOwoJCQkJcmV0dXJuOwoJCQl9CgkJfQoJCWlmIChjdXJTdGF0ZSA9PSBTdGF0ZS5QVVJTVUlORykKCQl7CgkJCWlmIChDdXJyZW50RW5lbXkpIExvb2tBdChDdXJyZW50RW5lbXkudHJhbnNmb3JtKTsKCQkJZWxzZSB7IFNldFN0YXRlKFN0YXRlLklETEUpOyByZXR1cm47IH0KCQl9CgkJaWYgKGN1clN0YXRlID09IFN0YXRlLk1PVkUpCgkJewoJCQlpZiAobV9EZXN0aW5hdGlvbiAhPSBWZWN0b3IzLnplcm8gJiYgVmVjdG9yMy5TcXJNYWduaXR1ZGUobV9EZXN0aW5hdGlvbiAtIHRyYW5zZm9ybS5wb3NpdGlvbikgPD0gMSkKCQkJewoJCQkJTW92ZUVuZEFjdGlvbj8uSW52b2tlKCk7CgkJCQlpZiAobV9jaGFyYWN0ZXIuQ3VycmVudEVuZW15KSBTZXRTdGF0ZShTdGF0ZS5QVVJTVUlORyk7CgkJCQllbHNlIFNldFN0YXRlKFN0YXRlLklETEUpOwoJCQkJcmV0dXJuOwoJCQl9CgkJfQoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uRGVhdGhBSSgpCgl7CgkJLy9BZ2VudC5pc1N0b3BwZWQgPSB0cnVlOwoJCUFnZW50LmVuYWJsZWQgPSBmYWxzZTsKCX0KfQoAAAAAAAAAACYIAAAAAAAAAAAAAAAAAAAAAAAAJggAAAAAAAAAAAAAAAAAAAAAAABjBgAAAAAAAAAAAAAAAAAAAAAAAGMGAAAAAAAAAAAAAAAAAAAAAAAASQcAAAAAAAAAAAAAAAAAAAAAAABJBwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "Assets/Standard Assets/Scripts/UIDigButton.cs",
			"settings":
			{
				"buffer_size": 730,
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					10,
					1,
					"revert",
					null,
					"BQAAAAAAAAAAAAAAAAAAAAAAAABBBAAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLlVJOwoKcHVibGljIGNsYXNzIFVJRGlnQnV0dG9uIDogVUlFdmVudFNlbmRlcgp7CglwdWJsaWMgU2tpbGwgZGlnU2tpbGw7CglwdWJsaWMgSW1hZ2UgYmc7CglwdWJsaWMgSW1hZ2UgYnVpbGRUb2dnbGU7Cglib29sIG1fYnVpbGRUb2dnbGU7CgoJdm9pZCBTdGFydCgpCgl7CgkJU2V0QnVpbGRUb2dnbGUoZmFsc2UpOwoJCUdhbWVNYW5hZ2VyLlBsYXllci5Ta2lsbFVzZXIuQWRkU2tpbGwoZGlnU2tpbGwpOwoJCU9uTG9uZVByZXNzLkFkZExpc3RlbmVyKCgpID0+IFNldEJ1aWxkVG9nZ2xlKCFtX2J1aWxkVG9nZ2xlKSk7CgkJT25DbGljay5BZGRMaXN0ZW5lcigoKSA9PgoJCQkJewoJCQkJCWlmIChHYW1lTWFuYWdlci5TY2VuZUJveEluZm8oZmFsc2UpID09ICJibGFuayIpCgkJCQkJewoJCQkJCQlHYW1lTWFuYWdlci5QbGF5ZXIuU2tpbGxVc2VyLlVzZVNraWxsKGRpZ1NraWxsLCBHYW1lTWFuYWdlci5QbGF5ZXIuQmFzZUFJLlNjZW5lRGV0ZWN0b3IuZ2FtZU9iamVjdCk7CgkJCQkJCVNldEJ1aWxkVG9nZ2xlKGZhbHNlKTsKCQkJCQl9CgkJCQl9KTsKCX0KCXZvaWQgRml4ZWRVcGRhdGUoKQoJewoJCXN3aXRjaCAoR2FtZU1hbmFnZXIuU2NlbmVCb3hJbmZvKGZhbHNlKSkKCQl7CgkJCWNhc2UgImJsYW5rIjoKCQkJCWJnLmNvbG9yID0gR2FtZU1hbmFnZXIuUGxheWVyLkJhc2VBSS5CdWlsZFJlbmRlci5tYXRlcmlhbC5jb2xvciA9IENvbG9yLmdyZWVuOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQliZy5jb2xvciA9IEdhbWVNYW5hZ2VyLlBsYXllci5CYXNlQUkuQnVpbGRSZW5kZXIubWF0ZXJpYWwuY29sb3IgPSBDb2xvci5yZWQ7CgkJCQlicmVhazsKCQl9Cgl9CgoJdm9pZCBTZXRCdWlsZFRvZ2dsZShib29sIHZhbHVlKQoJewoJCW1fYnVpbGRUb2dnbGUgPSB2YWx1ZTsKCQlidWlsZFRvZ2dsZS5lbmFibGVkID0gdmFsdWU7CgkJR2FtZU1hbmFnZXIuUGxheWVyLkJhc2VBSS5CdWlsZFJlbmRlci5lbmFibGVkID0gdmFsdWU7Cgl9Cn0KAAAAAAAAAAANBAAAAAAAAAAAAAAAAAAAAAAAANwCAAAAAAAAAAAAAAAAAAAAAAAA2AIAAAAAAAAAAAAAAAAAAAAAAADYAgAAAAAAAAAAAAA",
					"DQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAgMAAAAAAAANAwAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"CwAAAAAAAAAAAAAAAAAAAAAAAADYAgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIFVuaXR5RW5naW5lLlVJOwoKcHVibGljIGNsYXNzIFVJRGlnQnV0dG9uIDogVUlTa2lsbEJ1dHRvbgp7CglwdWJsaWMgSW1hZ2UgYmc7CglwdWJsaWMgSW1hZ2UgYnVpbGRUb2dnbGU7Cglib29sIG1fYnVpbGRUb2dnbGU7CgoJcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25TdGFydCgpCgl7CgkJU2V0QnVpbGRUb2dnbGUoZmFsc2UpOwoJfQoKCXByb3RlY3RlZCBvdmVycmlkZSB2b2lkIFNob3dTa2lsbFRpcHMoKQoJewoJCVNldEJ1aWxkVG9nZ2xlKCFtX2J1aWxkVG9nZ2xlKTsKCQliYXNlLlNob3dTa2lsbFRpcHMoKTsKCX0KCgoJdm9pZCBGaXhlZFVwZGF0ZSgpCgl7CgkJc3dpdGNoIChHYW1lTWFuYWdlci5QbGF5ZXIuQmFzZUFJLlNjZW5lQm94KQoJCXsKCQkJY2FzZSAiYmxhbmsiOgoJCQkJYmcuY29sb3IgPSBDb2xvci53aGl0ZTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJYmcuY29sb3IgPSBDb2xvci5yZWQ7CgkJCQlicmVhazsKCQl9Cgl9CgoJdm9pZCBTZXRCdWlsZFRvZ2dsZShib29sIHZhbHVlKQoJewoJCW1fYnVpbGRUb2dnbGUgPSB2YWx1ZTsKCQlidWlsZFRvZ2dsZS5lbmFibGVkID0gdmFsdWU7CgkJLy9HYW1lTWFuYWdlci5QbGF5ZXIuQmFzZUFJLkJ1aWxkUmVuZGVyLmVuYWJsZWQgPSB2YWx1ZTsKCX0KfQoAAAAAAAAAANgCAAAAAAAAAAAAAAAAAAAAAAAA2gIAAAAAAAAAAAAAAAAAAAAAAADaAgAAAAAAAAAAAAAAAAAAAAAAANoCAAAAAAAAAAAAAAAAAAAAAAAA2gIAAAAAAAAAAAAAAAAAAAAAAADaAgAAAAAAAAAAAAAAAAAAAAAAANoCAAAAAAAAAAAAAAAAAAAAAAAA2gIAAAAAAAAAAAAAAAAAAAAAAADaAgAAAAAAAAAAAAAAAAAAAAAAANoCAAAAAAAAAAAAAA",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "using System.Collections;\nusing System.Collections.Generic;\nusing CreatorKitCode;\nusing UnityEngine;\n\nnamespace CreatorKitCodeInternal\n{\n\tpublic class TrainingDummy : MonoBehaviour\n\t{\n\t\tCharacter m_CharData;\n\n\t\tfloat m_HealTimer = 0.0f;\n\n\t\t// Start is called before the first frame update\n\t\tvoid Start()\n\t\t{\n\t\t\tm_CharData = GetComponent<Character>();\n\n\t\t\tm_CharData.DamageEvent.AddListener((damage) =>\n\t\t\t{\n\t\t\t\tm_HealTimer = 3.0f;\n\t\t\t});\n\t\t}\n\n\t\t// Update is called once per frame\n\t\tvoid Update()\n\t\t{\n\t\t\tif (m_HealTimer > 0.0f)\n\t\t\t\tm_HealTimer -= Time.deltaTime;\n\t\t\telse if (m_CharData.Stats.CurrentHealth != m_CharData.Stats.stats.health)\n\t\t\t{\n\t\t\t}\n\t\t}\n\t}\n}",
			"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Characters/TrainingDummy.cs",
			"file_size": 694,
			"file_write_time": 133549493965072754,
			"settings":
			{
				"buffer_size": 657,
				"line_ending": "Windows",
				"scratch": true
			},
			"undo_stack":
			[
				[
					6,
					1,
					"insert",
					{
						"characters": "OnDamage"
					},
					"CQAAAM8BAAAAAAAA0AEAAAAAAAAAAAAA0AEAAAAAAADQAQAAAAAAAAwAAABPbkVmZmVjdFRha2XQAQAAAAAAANEBAAAAAAAAAAAAANEBAAAAAAAA0gEAAAAAAAAAAAAA0gEAAAAAAADTAQAAAAAAAAAAAADTAQAAAAAAANQBAAAAAAAAAAAAANQBAAAAAAAA1QEAAAAAAAAAAAAA1QEAAAAAAADWAQAAAAAAAAAAAADWAQAAAAAAANcBAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAM8BAAAAAAAA2wEAAAAAAAAAAAAAAADwvw"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "damage"
					},
					"BwAAANwBAAAAAAAA3QEAAAAAAAAAAAAA3QEAAAAAAADdAQAAAAAAAAYAAABlZmZlY3TdAQAAAAAAAN4BAAAAAAAAAAAAAN4BAAAAAAAA3wEAAAAAAAAAAAAA3wEAAAAAAADgAQAAAAAAAAAAAADgAQAAAAAAAOEBAAAAAAAAAAAAAOEBAAAAAAAA4gEAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANwBAAAAAAAA4gEAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1707381146.6559236"
					},
					"AQAAAAAAAAAAAAAAjQMAAAAAAACNAwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlSW50ZXJuYWwgewogICAgcHVibGljIGNsYXNzIFRyYWluaW5nRHVtbXkgOiBNb25vQmVoYXZpb3VyCiAgICB7CiAgICAgICAgQ2hhcmFjdGVyRGF0YSBtX0NoYXJEYXRhOwoKICAgICAgICBmbG9hdCBtX0hlYWxUaW1lciA9IDAuMGY7CiAgICAKICAgICAgICAvLyBTdGFydCBpcyBjYWxsZWQgYmVmb3JlIHRoZSBmaXJzdCBmcmFtZSB1cGRhdGUKICAgICAgICB2b2lkIFN0YXJ0KCkKICAgICAgICB7CiAgICAgICAgICAgIG1fQ2hhckRhdGEgPSBHZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKTsKICAgICAgICAgICAgbV9DaGFyRGF0YS5Jbml0KCk7CgogICAgICAgICAgICBtX0NoYXJEYXRhLk9uRGFtYWdlICs9IChkYW1hZ2UpID0+CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1fSGVhbFRpbWVyID0gMy4wZjsKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIC8vIFVwZGF0ZSBpcyBjYWxsZWQgb25jZSBwZXIgZnJhbWUKICAgICAgICB2b2lkIFVwZGF0ZSgpCiAgICAgICAgewogICAgICAgICAgICBpZiAobV9IZWFsVGltZXIgPiAwLjBmKQogICAgICAgICAgICAgICAgbV9IZWFsVGltZXIgLT0gVGltZS5kZWx0YVRpbWU7CiAgICAgICAgICAgIGVsc2UgaWYgKG1fQ2hhckRhdGEuU3RhdHMuQ3VycmVudEhlYWx0aCAhPSBtX0NoYXJEYXRhLlN0YXRzLnN0YXRzLmhlYWx0aCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbV9DaGFyRGF0YS5TdGF0cy5DaGFuZ2VIZWFsdGgoMTAwMDAwMDApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9",
					"DgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiAQAAAAAAAOIBAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACNAwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlSW50ZXJuYWwgewogICAgcHVibGljIGNsYXNzIFRyYWluaW5nRHVtbXkgOiBNb25vQmVoYXZpb3VyCiAgICB7CiAgICAgICAgQ2hhcmFjdGVyRGF0YSBtX0NoYXJEYXRhOwoKICAgICAgICBmbG9hdCBtX0hlYWxUaW1lciA9IDAuMGY7CiAgICAKICAgICAgICAvLyBTdGFydCBpcyBjYWxsZWQgYmVmb3JlIHRoZSBmaXJzdCBmcmFtZSB1cGRhdGUKICAgICAgICB2b2lkIFN0YXJ0KCkKICAgICAgICB7CiAgICAgICAgICAgIG1fQ2hhckRhdGEgPSBHZXRDb21wb25lbnQ8Q2hhcmFjdGVyRGF0YT4oKTsKICAgICAgICAgICAgbV9DaGFyRGF0YS5Jbml0KCk7CgogICAgICAgICAgICBtX0NoYXJEYXRhLk9uRGFtYWdlICs9IChkYW1hZ2UpID0+CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1fSGVhbFRpbWVyID0gMy4wZjsKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIC8vIFVwZGF0ZSBpcyBjYWxsZWQgb25jZSBwZXIgZnJhbWUKICAgICAgICB2b2lkIFVwZGF0ZSgpCiAgICAgICAgewogICAgICAgICAgICBpZiAobV9IZWFsVGltZXIgPiAwLjBmKQogICAgICAgICAgICAgICAgbV9IZWFsVGltZXIgLT0gVGltZS5kZWx0YVRpbWU7CiAgICAgICAgICAgIGVsc2UgaWYgKG1fQ2hhckRhdGEuU3RhdHMuQ3VycmVudEhlYWx0aCAhPSBtX0NoYXJEYXRhLlN0YXRzLnN0YXRzLmhlYWx0aCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbV9DaGFyRGF0YS5TdGF0cy5DaGFuZ2VIZWFsdGgoMTAwMDAwMDApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9AAAAAAAAAADRAgAAAAAAAAAAAAA",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA4gEAAAAAAADiAQAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1708771575.2466908"
					},
					"AQAAAAAAAAAAAAAA0QIAAAAAAADRAgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlSW50ZXJuYWwKewoJcHVibGljIGNsYXNzIFRyYWluaW5nRHVtbXkgOiBNb25vQmVoYXZpb3VyCgl7CgkJQ2hhcmFjdGVyRGF0YSBtX0NoYXJEYXRhOwoKCQlmbG9hdCBtX0hlYWxUaW1lciA9IDAuMGY7CgoJCS8vIFN0YXJ0IGlzIGNhbGxlZCBiZWZvcmUgdGhlIGZpcnN0IGZyYW1lIHVwZGF0ZQoJCXZvaWQgU3RhcnQoKQoJCXsKCQkJbV9DaGFyRGF0YSA9IEdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCQltX0NoYXJEYXRhLkFjdGl2ZSgpOwoKCQkJbV9DaGFyRGF0YS5PbkRhbWFnZSArPSAoZGFtYWdlKSA9PgoJCQl7CgkJCQltX0hlYWxUaW1lciA9IDMuMGY7CgkJCX07CgkJfQoKCQkvLyBVcGRhdGUgaXMgY2FsbGVkIG9uY2UgcGVyIGZyYW1lCgkJdm9pZCBVcGRhdGUoKQoJCXsKCQkJaWYgKG1fSGVhbFRpbWVyID4gMC4wZikKCQkJCW1fSGVhbFRpbWVyIC09IFRpbWUuZGVsdGFUaW1lOwoJCQllbHNlIGlmIChtX0NoYXJEYXRhLlN0YXRzLkN1cnJlbnRIZWFsdGggIT0gbV9DaGFyRGF0YS5TdGF0cy5zdGF0cy5oZWFsdGgpCgkJCXsKCQkJCW1fQ2hhckRhdGEuU3RhdHMuQ2hhbmdlSGVhbHRoKDEwMDAwMDAwKTsKCQkJfQoJCX0KCX0KfQ",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAA4gEAAAAAAADiAQAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAADRAgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlSW50ZXJuYWwKewoJcHVibGljIGNsYXNzIFRyYWluaW5nRHVtbXkgOiBNb25vQmVoYXZpb3VyCgl7CgkJQ2hhcmFjdGVyRGF0YSBtX0NoYXJEYXRhOwoKCQlmbG9hdCBtX0hlYWxUaW1lciA9IDAuMGY7CgoJCS8vIFN0YXJ0IGlzIGNhbGxlZCBiZWZvcmUgdGhlIGZpcnN0IGZyYW1lIHVwZGF0ZQoJCXZvaWQgU3RhcnQoKQoJCXsKCQkJbV9DaGFyRGF0YSA9IEdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCQltX0NoYXJEYXRhLkFjdGl2ZSgpOwoKCQkJbV9DaGFyRGF0YS5PbkRhbWFnZSArPSAoZGFtYWdlKSA9PgoJCQl7CgkJCQltX0hlYWxUaW1lciA9IDMuMGY7CgkJCX07CgkJfQoKCQkvLyBVcGRhdGUgaXMgY2FsbGVkIG9uY2UgcGVyIGZyYW1lCgkJdm9pZCBVcGRhdGUoKQoJCXsKCQkJaWYgKG1fSGVhbFRpbWVyID4gMC4wZikKCQkJCW1fSGVhbFRpbWVyIC09IFRpbWUuZGVsdGFUaW1lOwoJCQllbHNlIGlmIChtX0NoYXJEYXRhLlN0YXRzLkN1cnJlbnRIZWFsdGggIT0gbV9DaGFyRGF0YS5TdGF0cy5zdGF0cy5oZWFsdGgpCgkJCXsKCQkJCW1fQ2hhckRhdGEuU3RhdHMuQ2hhbmdlSGVhbHRoKDEwMDAwMDAwKTsKCQkJfQoJCX0KCX0KfQAAAAAAAAAApAIAAAAAAAAAAAAAAAAAAAAAAACkAgAAAAAAAAAAAAA",
					"CQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOIBAAAAAAAA4gEAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACkAgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlSW50ZXJuYWwKewoJcHVibGljIGNsYXNzIFRyYWluaW5nRHVtbXkgOiBNb25vQmVoYXZpb3VyCgl7CgkJQ2hhcmFjdGVyRGF0YSBtX0NoYXJEYXRhOwoKCQlmbG9hdCBtX0hlYWxUaW1lciA9IDAuMGY7CgoJCS8vIFN0YXJ0IGlzIGNhbGxlZCBiZWZvcmUgdGhlIGZpcnN0IGZyYW1lIHVwZGF0ZQoJCXZvaWQgU3RhcnQoKQoJCXsKCQkJbV9DaGFyRGF0YSA9IEdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCQltX0NoYXJEYXRhLkFjdGl2ZSgpOwoKCQkJbV9DaGFyRGF0YS5PbkRhbWFnZSArPSAoZGFtYWdlKSA9PgoJCQl7CgkJCQltX0hlYWxUaW1lciA9IDMuMGY7CgkJCX07CgkJfQoKCQkvLyBVcGRhdGUgaXMgY2FsbGVkIG9uY2UgcGVyIGZyYW1lCgkJdm9pZCBVcGRhdGUoKQoJCXsKCQkJaWYgKG1fSGVhbFRpbWVyID4gMC4wZikKCQkJCW1fSGVhbFRpbWVyIC09IFRpbWUuZGVsdGFUaW1lOwoJCQllbHNlIGlmIChtX0NoYXJEYXRhLlN0YXRzLkN1cnJlbnRIZWFsdGggIT0gbV9DaGFyRGF0YS5TdGF0cy5zdGF0cy5oZWFsdGgpCgkJCXsKCQkJfQoJCX0KCX0KfQAAAAAAAAAArgIAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiAQAAAAAAAOIBAAAAAAAAAAAAAAAA8L8"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1709200151.7957203"
					},
					"AQAAAAAAAAAAAAAArgIAAAAAAACuAgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlSW50ZXJuYWwKewoJcHVibGljIGNsYXNzIFRyYWluaW5nRHVtbXkgOiBNb25vQmVoYXZpb3VyCgl7CgkJQ2hhcmFjdGVyRGF0YSBtX0NoYXJEYXRhOwoKCQlmbG9hdCBtX0hlYWxUaW1lciA9IDAuMGY7CgoJCS8vIFN0YXJ0IGlzIGNhbGxlZCBiZWZvcmUgdGhlIGZpcnN0IGZyYW1lIHVwZGF0ZQoJCXZvaWQgU3RhcnQoKQoJCXsKCQkJbV9DaGFyRGF0YSA9IEdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCQltX0NoYXJEYXRhLkFjdGl2ZSgpOwoKCQkJbV9DaGFyRGF0YS5PbkRhbWFnZS5BZGRMaXN0ZW5lcigoZGFtYWdlKSA9PgoJCQl7CgkJCQltX0hlYWxUaW1lciA9IDMuMGY7CgkJCX0pOwoJCX0KCgkJLy8gVXBkYXRlIGlzIGNhbGxlZCBvbmNlIHBlciBmcmFtZQoJCXZvaWQgVXBkYXRlKCkKCQl7CgkJCWlmIChtX0hlYWxUaW1lciA+IDAuMGYpCgkJCQltX0hlYWxUaW1lciAtPSBUaW1lLmRlbHRhVGltZTsKCQkJZWxzZSBpZiAobV9DaGFyRGF0YS5TdGF0cy5DdXJyZW50SGVhbHRoICE9IG1fQ2hhckRhdGEuU3RhdHMuc3RhdHMuaGVhbHRoKQoJCQl7CgkJCX0KCQl9Cgl9Cn0",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiAQAAAAAAAOIBAAAAAAAAAAAAAAAA8L8"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACuAgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlSW50ZXJuYWwKewoJcHVibGljIGNsYXNzIFRyYWluaW5nRHVtbXkgOiBNb25vQmVoYXZpb3VyCgl7CgkJQ2hhcmFjdGVyRGF0YSBtX0NoYXJEYXRhOwoKCQlmbG9hdCBtX0hlYWxUaW1lciA9IDAuMGY7CgoJCS8vIFN0YXJ0IGlzIGNhbGxlZCBiZWZvcmUgdGhlIGZpcnN0IGZyYW1lIHVwZGF0ZQoJCXZvaWQgU3RhcnQoKQoJCXsKCQkJbV9DaGFyRGF0YSA9IEdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoJCQltX0NoYXJEYXRhLkFjdGl2ZSgpOwoKCQkJbV9DaGFyRGF0YS5PbkRhbWFnZS5BZGRMaXN0ZW5lcigoZGFtYWdlKSA9PgoJCQl7CgkJCQltX0hlYWxUaW1lciA9IDMuMGY7CgkJCX0pOwoJCX0KCgkJLy8gVXBkYXRlIGlzIGNhbGxlZCBvbmNlIHBlciBmcmFtZQoJCXZvaWQgVXBkYXRlKCkKCQl7CgkJCWlmIChtX0hlYWxUaW1lciA+IDAuMGYpCgkJCQltX0hlYWxUaW1lciAtPSBUaW1lLmRlbHRhVGltZTsKCQkJZWxzZSBpZiAobV9DaGFyRGF0YS5TdGF0cy5DdXJyZW50SGVhbHRoICE9IG1fQ2hhckRhdGEuU3RhdHMuc3RhdHMuaGVhbHRoKQoJCQl7CgkJCX0KCQl9Cgl9Cn0AAAAAAAAAAJkCAAAAAAAAAAAAAA",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiAQAAAAAAAOIBAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1709374073.1905732"
					},
					"AQAAAAAAAAAAAAAAmQIAAAAAAACZAgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlSW50ZXJuYWwKewoJcHVibGljIGNsYXNzIFRyYWluaW5nRHVtbXkgOiBNb25vQmVoYXZpb3VyCgl7CgkJQ2hhcmFjdGVyRGF0YSBtX0NoYXJEYXRhOwoKCQlmbG9hdCBtX0hlYWxUaW1lciA9IDAuMGY7CgoJCS8vIFN0YXJ0IGlzIGNhbGxlZCBiZWZvcmUgdGhlIGZpcnN0IGZyYW1lIHVwZGF0ZQoJCXZvaWQgU3RhcnQoKQoJCXsKCQkJbV9DaGFyRGF0YSA9IEdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoKCQkJbV9DaGFyRGF0YS5EYW1hZ2VFdmVudC5BZGRMaXN0ZW5lcigoZGFtYWdlKSA9PgoJCQl7CgkJCQltX0hlYWxUaW1lciA9IDMuMGY7CgkJCX0pOwoJCX0KCgkJLy8gVXBkYXRlIGlzIGNhbGxlZCBvbmNlIHBlciBmcmFtZQoJCXZvaWQgVXBkYXRlKCkKCQl7CgkJCWlmIChtX0hlYWxUaW1lciA+IDAuMGYpCgkJCQltX0hlYWxUaW1lciAtPSBUaW1lLmRlbHRhVGltZTsKCQkJZWxzZSBpZiAobV9DaGFyRGF0YS5TdGF0cy5DdXJyZW50SGVhbHRoICE9IG1fQ2hhckRhdGEuU3RhdHMuc3RhdHMuaGVhbHRoKQoJCQl7CgkJCX0KCQl9Cgl9Cn0",
					"CAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAADiAQAAAAAAAOIBAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACZAgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlSW50ZXJuYWwKewoJcHVibGljIGNsYXNzIFRyYWluaW5nRHVtbXkgOiBNb25vQmVoYXZpb3VyCgl7CgkJQ2hhcmFjdGVyRGF0YSBtX0NoYXJEYXRhOwoKCQlmbG9hdCBtX0hlYWxUaW1lciA9IDAuMGY7CgoJCS8vIFN0YXJ0IGlzIGNhbGxlZCBiZWZvcmUgdGhlIGZpcnN0IGZyYW1lIHVwZGF0ZQoJCXZvaWQgU3RhcnQoKQoJCXsKCQkJbV9DaGFyRGF0YSA9IEdldENvbXBvbmVudDxDaGFyYWN0ZXJEYXRhPigpOwoKCQkJbV9DaGFyRGF0YS5EYW1hZ2VFdmVudC5BZGRMaXN0ZW5lcigoZGFtYWdlKSA9PgoJCQl7CgkJCQltX0hlYWxUaW1lciA9IDMuMGY7CgkJCX0pOwoJCX0KCgkJLy8gVXBkYXRlIGlzIGNhbGxlZCBvbmNlIHBlciBmcmFtZQoJCXZvaWQgVXBkYXRlKCkKCQl7CgkJCWlmIChtX0hlYWxUaW1lciA+IDAuMGYpCgkJCQltX0hlYWxUaW1lciAtPSBUaW1lLmRlbHRhVGltZTsKCQkJZWxzZSBpZiAobV9DaGFyRGF0YS5TdGF0cy5DdXJyZW50SGVhbHRoICE9IG1fQ2hhckRhdGEuU3RhdHMuc3RhdHMuaGVhbHRoKQoJCQl7CgkJCX0KCQl9Cgl9Cn0AAAAAAAAAAJECAAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOIBAAAAAAAA4gEAAAAAAAAAAAAAAADwvw"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1710496596.8735425"
					},
					"AQAAAAAAAAAAAAAAkQIAAAAAAACRAgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlSW50ZXJuYWwKewoJcHVibGljIGNsYXNzIFRyYWluaW5nRHVtbXkgOiBNb25vQmVoYXZpb3VyCgl7CgkJQ2hhcmFjdGVyIG1fQ2hhckRhdGE7CgoJCWZsb2F0IG1fSGVhbFRpbWVyID0gMC4wZjsKCgkJLy8gU3RhcnQgaXMgY2FsbGVkIGJlZm9yZSB0aGUgZmlyc3QgZnJhbWUgdXBkYXRlCgkJdm9pZCBTdGFydCgpCgkJewoJCQltX0NoYXJEYXRhID0gR2V0Q29tcG9uZW50PENoYXJhY3Rlcj4oKTsKCgkJCW1fQ2hhckRhdGEuRGFtYWdlRXZlbnQuQWRkTGlzdGVuZXIoKGRhbWFnZSkgPT4KCQkJewoJCQkJbV9IZWFsVGltZXIgPSAzLjBmOwoJCQl9KTsKCQl9CgoJCS8vIFVwZGF0ZSBpcyBjYWxsZWQgb25jZSBwZXIgZnJhbWUKCQl2b2lkIFVwZGF0ZSgpCgkJewoJCQlpZiAobV9IZWFsVGltZXIgPiAwLjBmKQoJCQkJbV9IZWFsVGltZXIgLT0gVGltZS5kZWx0YVRpbWU7CgkJCWVsc2UgaWYgKG1fQ2hhckRhdGEuU3RhdHMuQ3VycmVudEhlYWx0aCAhPSBtX0NoYXJEYXRhLlN0YXRzLnN0YXRzLmhlYWx0aCkKCQkJewoJCQl9CgkJfQoJfQp9",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOIBAAAAAAAA4gEAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"file": "Assets/Standard Assets/Scripts/KeyValueData.cs",
			"settings":
			{
				"buffer_size": 2162,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					5,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAALsBAAAAAAAAvAEAAAAAAAAAAAAAvAEAAAAAAAC9AQAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAALsBAAAAAAAAuwEAAAAAAAAAAAAAAADwvw"
				],
				[
					6,
					1,
					"paste",
					null,
					"AQAAAL0BAAAAAAAA5gEAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAL0BAAAAAAAAvQEAAAAAAAAAAAAAAADwvw"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "EffectDa"
					},
					"CQAAANoBAAAAAAAA2wEAAAAAAAAAAAAA2wEAAAAAAADbAQAAAAAAAAQAAABJdGVt2wEAAAAAAADcAQAAAAAAAAAAAADcAQAAAAAAAN0BAAAAAAAAAAAAAN0BAAAAAAAA3gEAAAAAAAAAAAAA3gEAAAAAAADfAQAAAAAAAAAAAADfAQAAAAAAAOABAAAAAAAAAAAAAOABAAAAAAAA4QEAAAAAAAAAAAAA4QEAAAAAAADiAQAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANoBAAAAAAAA3gEAAAAAAAAAAAAAAADwvw"
				],
				[
					12,
					1,
					"insert",
					{
						"characters": "ta"
					},
					"AgAAAOIBAAAAAAAA4wEAAAAAAAAAAAAA4wEAAAAAAADkAQAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOIBAAAAAAAA4gEAAAAAAAAAAAAAAADwvw"
				],
				[
					17,
					1,
					"insert",
					{
						"characters": "Effect"
					},
					"BwAAAOcBAAAAAAAA6AEAAAAAAAAAAAAA6AEAAAAAAADoAQAAAAAAAAQAAABJdGVt6AEAAAAAAADpAQAAAAAAAAAAAADpAQAAAAAAAOoBAAAAAAAAAAAAAOoBAAAAAAAA6wEAAAAAAAAAAAAA6wEAAAAAAADsAQAAAAAAAAAAAADsAQAAAAAAAO0BAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOcBAAAAAAAA6wEAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACyAwAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFRNUHJvOwoKW0NyZWF0ZUFzc2V0TWVudShmaWxlTmFtZSA9ICJEZW1vRGF0YSIsIG1lbnVOYW1lID0gIkRhdGEvS2V5VmFsdWVEYXRhIiwgb3JkZXIgPSAxKV0KcHVibGljIGNsYXNzIEtleVZhbHVlRGF0YSA6IFNjcmlwdGFibGVPYmplY3QKewoJW1NlcmlhbGl6YWJsZV0KCXB1YmxpYyBjbGFzcyBLZXlWYWx1ZTxUS2V5LCBUVmFsdWU+Cgl7CgkJcHVibGljIFRLZXkgS2V5OwoJCXB1YmxpYyBUVmFsdWUgVmFsdWU7Cgl9CgoJcHVibGljIExpc3Q8S2V5VmFsdWU8c3RyaW5nLCBBdWRpb0NsaXA+PiBBdWRpb0RpYzsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgSXRlbT4+IEl0ZW07CglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIEVmZmVjdERhdGE+PiBFZmZlY3Q7CglwdWJsaWMgc3RhdGljIFQgR2V0VmFsdWU8VD4oTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIFQ+PiBkaWMsIHN0cmluZyBrZXkpCgl7CgkJZm9yZWFjaCAoS2V5VmFsdWU8c3RyaW5nLCBUPiBkYXRhIGluIGRpYykKCQl7CgkJCWlmIChkYXRhLktleSA9PSBrZXkpIHJldHVybiBkYXRhLlZhbHVlOwoJCX0KCQlyZXR1cm4gZGVmYXVsdChUKTsKCX0KCglwdWJsaWMgc3RhdGljIERpY3Rpb25hcnk8c3RyaW5nLCBpbnQ+IFRvRGljKExpc3Q8S2V5VmFsdWU8SXRlbSwgaW50Pj4gZGF0YSkKCXsKCQlEaWN0aW9uYXJ5PHN0cmluZywgaW50PiByZXN1bHQgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIGludD4oKTsKCQlmb3JlYWNoICh2YXIgZGEgaW4gZGF0YSkKCQl7CgkJCXJlc3VsdFtkYS5LZXkuSXRlbU5hbWVdID0gZGEuVmFsdWU7CgkJfQoJCXJldHVybiByZXN1bHQ7Cgl9Cgp9CgAAAAAAAAAAzwMAAAAAAAAAAAAA",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					2,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAADPAwAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFRNUHJvOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpbQ3JlYXRlQXNzZXRNZW51KGZpbGVOYW1lID0gIkRlbW9EYXRhIiwgbWVudU5hbWUgPSAiRGF0YS9LZXlWYWx1ZURhdGEiLCBvcmRlciA9IDEpXQpwdWJsaWMgY2xhc3MgS2V5VmFsdWVEYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglbU2VyaWFsaXphYmxlXQoJcHVibGljIGNsYXNzIEtleVZhbHVlPFRLZXksIFRWYWx1ZT4KCXsKCQlwdWJsaWMgVEtleSBLZXk7CgkJcHVibGljIFRWYWx1ZSBWYWx1ZTsKCX0KCglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIEF1ZGlvQ2xpcD4+IEF1ZGlvRGljOwoJcHVibGljIExpc3Q8S2V5VmFsdWU8c3RyaW5nLCBJdGVtPj4gSXRlbTsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgRWZmZWN0RGF0YT4+IEVmZmVjdDsKCXB1YmxpYyBzdGF0aWMgVCBHZXRWYWx1ZTxUPihMaXN0PEtleVZhbHVlPHN0cmluZywgVD4+IGRpYywgc3RyaW5nIGtleSkKCXsKCQlmb3JlYWNoIChLZXlWYWx1ZTxzdHJpbmcsIFQ+IGRhdGEgaW4gZGljKQoJCXsKCQkJaWYgKGRhdGEuS2V5ID09IGtleSkgcmV0dXJuIGRhdGEuVmFsdWU7CgkJfQoJCXJldHVybiBkZWZhdWx0KFQpOwoJfQoKCXB1YmxpYyBzdGF0aWMgRGljdGlvbmFyeTxzdHJpbmcsIGludD4gVG9EaWMoTGlzdDxLZXlWYWx1ZTxJdGVtLCBpbnQ+PiBkYXRhKQoJewoJCURpY3Rpb25hcnk8c3RyaW5nLCBpbnQ+IHJlc3VsdCA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgaW50PigpOwoJCWZvcmVhY2ggKHZhciBkYSBpbiBkYXRhKQoJCXsKCQkJcmVzdWx0W2RhLktleS5JdGVtTmFtZV0gPSBkYS5WYWx1ZTsKCQl9CgkJcmV0dXJuIHJlc3VsdDsKCX0KCn0KAAAAAAAAAADPAwAAAAAAAAAAAAAAAAAAAAAAAM8DAAAAAAAAAAAAAA",
					"CwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADPAwAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFRNUHJvOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpbQ3JlYXRlQXNzZXRNZW51KGZpbGVOYW1lID0gIkRlbW9EYXRhIiwgbWVudU5hbWUgPSAiRGF0YS9LZXlWYWx1ZURhdGEiLCBvcmRlciA9IDEpXQpwdWJsaWMgY2xhc3MgS2V5VmFsdWVEYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglbU2VyaWFsaXphYmxlXQoJcHVibGljIGNsYXNzIEtleVZhbHVlPFRLZXksIFRWYWx1ZT4KCXsKCQlwdWJsaWMgVEtleSBLZXk7CgkJcHVibGljIFRWYWx1ZSBWYWx1ZTsKCX0KCglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIEF1ZGlvQ2xpcD4+IEF1ZGlvRGljOwoJcHVibGljIExpc3Q8S2V5VmFsdWU8c3RyaW5nLCBJdGVtPj4gSXRlbTsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgRWZmZWN0RGF0YT4+IEVmZmVjdDsKCXB1YmxpYyBzdGF0aWMgVCBHZXRWYWx1ZTxUPihMaXN0PEtleVZhbHVlPHN0cmluZywgVD4+IGRpYywgc3RyaW5nIGtleSkKCXsKCQlmb3JlYWNoIChLZXlWYWx1ZTxzdHJpbmcsIFQ+IGRhdGEgaW4gZGljKQoJCXsKCQkJaWYgKGRhdGEuS2V5ID09IGtleSkgcmV0dXJuIGRhdGEuVmFsdWU7CgkJfQoJCXJldHVybiBkZWZhdWx0KFQpOwoJfQoKCXB1YmxpYyBzdGF0aWMgRGljdGlvbmFyeTxzdHJpbmcsIGludD4gVG9EaWMoTGlzdDxLZXlWYWx1ZTxJdGVtLCBpbnQ+PiBkYXRhKQoJewoJCURpY3Rpb25hcnk8c3RyaW5nLCBpbnQ+IHJlc3VsdCA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgaW50PigpOwoJCWZvcmVhY2ggKHZhciBkYSBpbiBkYXRhKQoJCXsKCQkJcmVzdWx0W2RhLktleS5JdGVtTmFtZV0gPSBkYS5WYWx1ZTsKCQl9CgkJcmV0dXJuIHJlc3VsdDsKCX0KCn0KAAAAAAAAAAACBAAAAAAAAAAAAAA",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAACBAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFRNUHJvOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpbQ3JlYXRlQXNzZXRNZW51KGZpbGVOYW1lID0gIkRlbW9EYXRhIiwgbWVudU5hbWUgPSAiRGF0YS9LZXlWYWx1ZURhdGEiLCBvcmRlciA9IDEpXQpwdWJsaWMgY2xhc3MgS2V5VmFsdWVEYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglbU2VyaWFsaXphYmxlXQoJcHVibGljIGNsYXNzIEtleVZhbHVlPFRLZXksIFRWYWx1ZT4KCXsKCQlwdWJsaWMgVEtleSBLZXk7CgkJcHVibGljIFRWYWx1ZSBWYWx1ZTsKCX0KCglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIEF1ZGlvQ2xpcD4+IEF1ZGlvRGljOwoJcHVibGljIExpc3Q8S2V5VmFsdWU8c3RyaW5nLCBJdGVtPj4gSXRlbTsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgRWZmZWN0RGF0YT4+IEVmZmVjdDsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgR29hbERhdGE+PiBHYW1lR29hbDsKCXB1YmxpYyBzdGF0aWMgVCBHZXRWYWx1ZTxUPihMaXN0PEtleVZhbHVlPHN0cmluZywgVD4+IGRpYywgc3RyaW5nIGtleSkKCXsKCQlmb3JlYWNoIChLZXlWYWx1ZTxzdHJpbmcsIFQ+IGRhdGEgaW4gZGljKQoJCXsKCQkJaWYgKGRhdGEuS2V5ID09IGtleSkgcmV0dXJuIGRhdGEuVmFsdWU7CgkJfQoJCXJldHVybiBkZWZhdWx0KFQpOwoJfQoKCXB1YmxpYyBzdGF0aWMgRGljdGlvbmFyeTxzdHJpbmcsIGludD4gVG9EaWMoTGlzdDxLZXlWYWx1ZTxJdGVtLCBpbnQ+PiBkYXRhKQoJewoJCURpY3Rpb25hcnk8c3RyaW5nLCBpbnQ+IHJlc3VsdCA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgaW50PigpOwoJCWZvcmVhY2ggKHZhciBkYSBpbiBkYXRhKQoJCXsKCQkJcmVzdWx0W2RhLktleS5JdGVtTmFtZV0gPSBkYS5WYWx1ZTsKCQl9CgkJcmV0dXJuIHJlc3VsdDsKCX0KCn0KAAAAAAAAAAADBAAAAAAAAAAAAAA",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					3,
					1,
					"revert",
					null,
					"BgAAAAAAAAAAAAAAAAAAAAAAAAADBAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFRNUHJvOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpbQ3JlYXRlQXNzZXRNZW51KGZpbGVOYW1lID0gIkRlbW9EYXRhIiwgbWVudU5hbWUgPSAiRGF0YS9LZXlWYWx1ZURhdGEiLCBvcmRlciA9IDEpXQpwdWJsaWMgY2xhc3MgS2V5VmFsdWVEYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglbU2VyaWFsaXphYmxlXQoJcHVibGljIGNsYXNzIEtleVZhbHVlPFRLZXksIFRWYWx1ZT4KCXsKCQlwdWJsaWMgVEtleSBLZXk7CgkJcHVibGljIFRWYWx1ZSBWYWx1ZTsKCX0KCglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIEF1ZGlvQ2xpcD4+IEF1ZGlvRGljOwoJcHVibGljIExpc3Q8S2V5VmFsdWU8c3RyaW5nLCBJdGVtPj4gSXRlbTsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgRWZmZWN0RGF0YT4+IEVmZmVjdDsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgR29hbERhdGE+PiBHYW1lR29hbDsKCglwdWJsaWMgc3RhdGljIFQgR2V0VmFsdWU8VD4oTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIFQ+PiBkaWMsIHN0cmluZyBrZXkpCgl7CgkJZm9yZWFjaCAoS2V5VmFsdWU8c3RyaW5nLCBUPiBkYXRhIGluIGRpYykKCQl7CgkJCWlmIChkYXRhLktleSA9PSBrZXkpIHJldHVybiBkYXRhLlZhbHVlOwoJCX0KCQlyZXR1cm4gZGVmYXVsdChUKTsKCX0KCglwdWJsaWMgc3RhdGljIERpY3Rpb25hcnk8c3RyaW5nLCBpbnQ+IFRvRGljKExpc3Q8S2V5VmFsdWU8SXRlbSwgaW50Pj4gZGF0YSkKCXsKCQlEaWN0aW9uYXJ5PHN0cmluZywgaW50PiByZXN1bHQgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIGludD4oKTsKCQlmb3JlYWNoICh2YXIgZGEgaW4gZGF0YSkKCQl7CgkJCXJlc3VsdFtkYS5LZXkuSXRlbU5hbWVdID0gZGEuVmFsdWU7CgkJfQoJCXJldHVybiByZXN1bHQ7Cgl9Cgp9CgAAAAAAAAAAaQQAAAAAAAAAAAAAAAAAAAAAAACaBAAAAAAAAAAAAAAAAAAAAAAAAJoEAAAAAAAAAAAAAAAAAAAAAAAA7AQAAAAAAAAAAAAAAAAAAAAAAADsBAAAAAAAAAAAAAA",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAADsBAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFRNUHJvOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpbQ3JlYXRlQXNzZXRNZW51KGZpbGVOYW1lID0gIkRlbW9EYXRhIiwgbWVudU5hbWUgPSAiRGF0YS9LZXlWYWx1ZURhdGEiLCBvcmRlciA9IDEpXQpwdWJsaWMgY2xhc3MgS2V5VmFsdWVEYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglbU2VyaWFsaXphYmxlXQoJcHVibGljIGNsYXNzIEtleVZhbHVlPFRLZXksIFRWYWx1ZT4KCXsKCQlwdWJsaWMgVEtleSBLZXk7CgkJcHVibGljIFRWYWx1ZSBWYWx1ZTsKCX0KCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgc3RyaW5nW10+PiBTdHJpbmdDb25maWc7CglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIGJvb2w+PiBMb2dDb25maWc7CglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIEF1ZGlvQ2xpcD4+IEF1ZGlvRGljOwoJcHVibGljIExpc3Q8S2V5VmFsdWU8c3RyaW5nLCBJdGVtPj4gSXRlbTsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgRWZmZWN0RGF0YT4+IEVmZmVjdDsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgR29hbERhdGE+PiBHYW1lR29hbDsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgRHJvcEJveD4+IERyb3BCb3g7CglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIExpc3Q8S2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+Pj4+IEVmZmVjdEdyb3VwOwoKCXB1YmxpYyBzdGF0aWMgVCBHZXRWYWx1ZTxUPihMaXN0PEtleVZhbHVlPHN0cmluZywgVD4+IGRpYywgc3RyaW5nIGtleSkKCXsKCQlmb3JlYWNoIChLZXlWYWx1ZTxzdHJpbmcsIFQ+IGRhdGEgaW4gZGljKQoJCXsKCQkJaWYgKGRhdGEuS2V5ID09IGtleSkgcmV0dXJuIGRhdGEuVmFsdWU7CgkJfQoJCXJldHVybiBkZWZhdWx0KFQpOwoJfQoKCXB1YmxpYyBzdGF0aWMgRGljdGlvbmFyeTxzdHJpbmcsIGludD4gVG9EaWMoTGlzdDxLZXlWYWx1ZTxJdGVtLCBpbnQ+PiBkYXRhKQoJewoJCURpY3Rpb25hcnk8c3RyaW5nLCBpbnQ+IHJlc3VsdCA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgaW50PigpOwoJCWZvcmVhY2ggKHZhciBkYSBpbiBkYXRhKQoJCXsKCQkJcmVzdWx0W2RhLktleS5JdGVtTmFtZV0gPSBkYS5WYWx1ZTsKCQl9CgkJcmV0dXJuIHJlc3VsdDsKCX0KCn0KAAAAAAAAAAAlBQAAAAAAAAAAAAAAAAAAAAAAACUFAAAAAAAAAAAAAAAAAAAAAAAAJQUAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAlBQAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFRNUHJvOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpbQ3JlYXRlQXNzZXRNZW51KGZpbGVOYW1lID0gIkRlbW9EYXRhIiwgbWVudU5hbWUgPSAiRGF0YS9LZXlWYWx1ZURhdGEiLCBvcmRlciA9IDEpXQpwdWJsaWMgY2xhc3MgS2V5VmFsdWVEYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglbU2VyaWFsaXphYmxlXQoJcHVibGljIGNsYXNzIEtleVZhbHVlPFRLZXksIFRWYWx1ZT4KCXsKCQlwdWJsaWMgVEtleSBLZXk7CgkJcHVibGljIFRWYWx1ZSBWYWx1ZTsKCX0KCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgc3RyaW5nW10+PiBTdHJpbmdDb25maWc7CglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIGJvb2w+PiBMb2dDb25maWc7CglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIEF1ZGlvQ2xpcD4+IEF1ZGlvRGljOwoJcHVibGljIExpc3Q8S2V5VmFsdWU8c3RyaW5nLCBJdGVtPj4gSXRlbTsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgRWZmZWN0RGF0YT4+IEVmZmVjdDsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgR29hbERhdGE+PiBHYW1lR29hbDsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgRHJvcEJveD4+IERyb3BCb3g7CglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIEludGVyYWN0RGF0YT4+IEludGVyYWN0b3I7CglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIExpc3Q8S2V5VmFsdWU8RWZmZWN0RGF0YSwgc3RyaW5nW10+Pj4+IEVmZmVjdEdyb3VwOwoKCXB1YmxpYyBzdGF0aWMgVCBHZXRWYWx1ZTxUPihMaXN0PEtleVZhbHVlPHN0cmluZywgVD4+IGRpYywgc3RyaW5nIGtleSkKCXsKCQlmb3JlYWNoIChLZXlWYWx1ZTxzdHJpbmcsIFQ+IGRhdGEgaW4gZGljKQoJCXsKCQkJaWYgKGRhdGEuS2V5ID09IGtleSkgcmV0dXJuIGRhdGEuVmFsdWU7CgkJfQoJCXJldHVybiBkZWZhdWx0KFQpOwoJfQoKCXB1YmxpYyBzdGF0aWMgRGljdGlvbmFyeTxzdHJpbmcsIGludD4gVG9EaWMoTGlzdDxLZXlWYWx1ZTxJdGVtLCBpbnQ+PiBkYXRhKQoJewoJCURpY3Rpb25hcnk8c3RyaW5nLCBpbnQ+IHJlc3VsdCA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgaW50PigpOwoJCWZvcmVhY2ggKHZhciBkYSBpbiBkYXRhKQoJCXsKCQkJcmVzdWx0W2RhLktleS5JdGVtTmFtZV0gPSBkYS5WYWx1ZTsKCQl9CgkJcmV0dXJuIHJlc3VsdDsKCX0KCn0KAAAAAAAAAAAnBQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"revert",
					null,
					"BQAAAAAAAAAAAAAAAAAAAAAAAAAnBQAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ3JlYXRvcktpdENvZGU7CnVzaW5nIFRNUHJvOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpbQ3JlYXRlQXNzZXRNZW51KGZpbGVOYW1lID0gIkRlbW9EYXRhIiwgbWVudU5hbWUgPSAiRGF0YS9LZXlWYWx1ZURhdGEiLCBvcmRlciA9IDEpXQpwdWJsaWMgY2xhc3MgS2V5VmFsdWVEYXRhIDogU2NyaXB0YWJsZU9iamVjdAp7CglbU2VyaWFsaXphYmxlXQoJcHVibGljIGNsYXNzIEtleVZhbHVlPFRLZXksIFRWYWx1ZT4KCXsKCQlwdWJsaWMgVEtleSBLZXk7CgkJcHVibGljIFRWYWx1ZSBWYWx1ZTsKCX0KCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgR2FtZU9iamVjdD4+IFByZWZhYkNvbmZpZzsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgYm9vbD4+IExvZ0NvbmZpZzsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgQXVkaW9DbGlwPj4gQXVkaW9EaWM7CglwdWJsaWMgTGlzdDxLZXlWYWx1ZTxzdHJpbmcsIEl0ZW0+PiBJdGVtOwoJcHVibGljIExpc3Q8S2V5VmFsdWU8c3RyaW5nLCBFZmZlY3REYXRhPj4gRWZmZWN0OwoJcHVibGljIExpc3Q8S2V5VmFsdWU8c3RyaW5nLCBHb2FsRGF0YT4+IEdhbWVHb2FsOwoJcHVibGljIExpc3Q8S2V5VmFsdWU8c3RyaW5nLCBEcm9wQm94Pj4gRHJvcEJveDsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgSW50ZXJhY3REYXRhPj4gSW50ZXJhY3RvcjsKCXB1YmxpYyBMaXN0PEtleVZhbHVlPHN0cmluZywgTGlzdDxLZXlWYWx1ZTxFZmZlY3REYXRhLCBzdHJpbmdbXT4+Pj4gRWZmZWN0R3JvdXA7CgoJcHVibGljIHN0YXRpYyBUIEdldFZhbHVlPFQ+KExpc3Q8S2V5VmFsdWU8c3RyaW5nLCBUPj4gZGljLCBzdHJpbmcga2V5KQoJewoJCWZvcmVhY2ggKEtleVZhbHVlPHN0cmluZywgVD4gZGF0YSBpbiBkaWMpCgkJewoJCQlpZiAoZGF0YS5LZXkgPT0ga2V5KSByZXR1cm4gZGF0YS5WYWx1ZTsKCQl9CgkJcmV0dXJuIGRlZmF1bHQoVCk7Cgl9CgoJcHVibGljIHN0YXRpYyBEaWN0aW9uYXJ5PHN0cmluZywgaW50PiBUb0RpYyhMaXN0PEtleVZhbHVlPEl0ZW0sIGludD4+IGRhdGEpCgl7CgkJRGljdGlvbmFyeTxzdHJpbmcsIGludD4gcmVzdWx0ID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBpbnQ+KCk7CgkJZm9yZWFjaCAodmFyIGRhIGluIGRhdGEpCgkJewoJCQlyZXN1bHRbZGEuS2V5Lkl0ZW1OYW1lXSA9IGRhLlZhbHVlOwoJCX0KCQlyZXR1cm4gcmVzdWx0OwoJfQoKfQoAAAAAAAAAAFUFAAAAAAAAAAAAAAAAAAAAAAAAcggAAAAAAAAAAAAAAAAAAAAAAAByCAAAAAAAAAAAAAAAAAAAAAAAAHIIAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "Assets/Standard Assets/Scripts/GameManager.cs",
			"settings":
			{
				"buffer_size": 5227,
				"encoding": "UTF-8",
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACIHQAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENpbmVtYWNoaW5lOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpwdWJsaWMgY2xhc3MgR2FtZU1hbmFnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgR2FtZU1hbmFnZXIgSW5zdGFuY2U7CglwdWJsaWMgc3RhdGljIExvcmREYXRhIExvcmQgPT4gSW5zdGFuY2UuR2V0Q29tcG9uZW50PExvcmREYXRhPigpOwoJcHVibGljIHN0YXRpYyBDaGFyYWN0ZXIgQ3VySGVybzsKCXB1YmxpYyBzdGF0aWMgU3RvcnlMaXN0ZW5lciBTdG9yeUxpc3RlbmVyID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxTdG9yeUxpc3RlbmVyPigpOwoJcHVibGljIHN0YXRpYyBHYW1lR29hbFN5c3RlbSBHYW1lR29hbCA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8R2FtZUdvYWxTeXN0ZW0+KCk7CglwdWJsaWMgc3RhdGljIFVJTWFuYWdlciBHYW1lVUk7CglwdWJsaWMgc3RhdGljIEtleVZhbHVlRGF0YSBDb25maWcgPT4gSW5zdGFuY2UuRGVtb0RhdGE7CglwdWJsaWMgTGlnaHRNYW5hZ2VyIERheU5pZ2h0OwoJcHVibGljIENpbmVtYWNoaW5lVmlydHVhbENhbWVyYSBWQ2FtZXJhOwoJcHVibGljIENhbWVyYUNvbnRyb2xsZXIgQ2FtZXJhQ3RybDsKCXB1YmxpYyBTRlhNYW5hZ2VyIFNGWE1hbmFnZXI7CglwdWJsaWMgVGVycmFpblRvb2wgVGVycmFpblRvb2w7CglwdWJsaWMgVHJhbnNmb3JtIGJ1aWxkTW9kZUZvbGxvdzsKCXB1YmxpYyBzdGF0aWMgR2FtZU9iamVjdCBDdXJyZW50U2xlY3RlZAoJewoJCWdldCB7IHJldHVybiBtX0N1cnJlbnRTZWxlY3RlZDsgfQoJCXNldAoJCXsKCQkJbV9DdXJyZW50U2VsZWN0ZWQ/LkdldENvbXBvbmVudDxIaWdobGlnaHRhYmxlT2JqZWN0PigpPy5EZWhpZ2hsaWdodCgpOwoJCQltX0N1cnJlbnRTZWxlY3RlZCA9IHZhbHVlOwoJCQltX0N1cnJlbnRTZWxlY3RlZD8uR2V0Q29tcG9uZW50PEhpZ2hsaWdodGFibGVPYmplY3Q+KCk/LkhpZ2hsaWdodCgpOwoJCQlIZWxwZXJzLkxvZyhJbnN0YW5jZSwgIlBpY2tPYmplY3QiLCAidGFyZ2V0PSAiICsgbV9DdXJyZW50U2VsZWN0ZWQubmFtZSk7CgkJfQoJfQoJcHVibGljIExpc3Q8Rm9ybXVsYURhdGE+IGZvcm11bGFzOwoJcHVibGljIExpc3Q8U3Bhd25lclNhbXBsZT4gc3Bhd25lcnM7CglzdGF0aWMgR2FtZU9iamVjdCBtX0N1cnJlbnRTZWxlY3RlZDsKCglwdWJsaWMgc3RhdGljIGJvb2wgQnVpbGRNb2RlCgl7CgkJZ2V0IHsgcmV0dXJuIG1fYnVpbGRNb2RlOyB9CgkJc2V0CgkJewoJCQltX2J1aWxkTW9kZSA9IHZhbHVlOwoJCQlHYW1lTWFuYWdlci5HYW1lVUkuSm95U3RpY2suZW5hYmxlZCA9ICF2YWx1ZTsKCQkJSW5zdGFuY2UuYnVpbGRNb2RlRm9sbG93LnBvc2l0aW9uID0gQ3VySGVyby50cmFuc2Zvcm0ucG9zaXRpb247CgkJCWlmICh2YWx1ZSkKCQkJewoJCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5CVUlMRCk7CgkJCQlHYW1lTWFuYWdlci5DdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSU5BQ1RJVkUpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5SUEcpOwoJCQkJR2FtZU1hbmFnZXIuQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklETEUpOwoJCQl9CgkJfQoJfQoJcHVibGljIHN0YXRpYyBib29sIG1fYnVpbGRNb2RlOwoJcHVibGljIHN0YXRpYyBib29sIFN0b3J5TW9kZQoJewoJCWdldCB7IHJldHVybiBtX3N0b3J5TW9kZTsgfQoJCXNldAoJCXsKCQkJbV9zdG9yeU1vZGUgPSB2YWx1ZTsKCQkJR2FtZU1hbmFnZXIuR2FtZVVJLkpveVN0aWNrLmVuYWJsZWQgPSAhdmFsdWU7CgkJCWlmICh2YWx1ZSkKCQkJewoJCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5TVE9SWSk7CgkJCQlHYW1lTWFuYWdlci5DdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSU5BQ1RJVkUpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5SUEcpOwoJCQkJR2FtZU1hbmFnZXIuQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklETEUpOwoJCQl9CgkJfQoJfQoJcHVibGljIHN0YXRpYyBib29sIG1fc3RvcnlNb2RlOwoKCVtTZXJpYWxpemVGaWVsZF0KCVRyYW5zZm9ybSB1aV90cmFuczsKCVtTZXJpYWxpemVGaWVsZF0KCVRyYW5zZm9ybSBwb3NpdGlvbl9ib3JuOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVmVjdG9yMiBiYXNlQm91bmRhcnlfTEI7CglbU2VyaWFsaXplRmllbGRdCglWZWN0b3IyIGJhc2VCb3VuZGFyeV9SVDsKCVtTZXJpYWxpemVGaWVsZF0KCUdhbWVPYmplY3QgcHJlZmFiX2NoYXJhY3RlcjsKCVtTZXJpYWxpemVGaWVsZF0KCUdhbWVPYmplY3QgcHJlZmFiX2dhbWV1aTsKCglbU2VyaWFsaXplRmllbGRdCglLZXlWYWx1ZURhdGEgRGVtb0RhdGE7CglJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZCB0ZXN0RGVtYW5kOwoJVmVjdG9yMyBtX2RyYWdNb3VzZVBvcyA9IFZlY3RvcjMuemVybzsKCVZlY3RvcjMgbV9yZXZpc0NhbXBvcyA9IFZlY3RvcjMuemVybzsKCXByaXZhdGUgdm9pZCBBd2FrZSgpCgl7CgkJSW5zdGFuY2UgPSB0aGlzOwoJCUxvcmQuSW5pdCgpOwoJCUN1ckhlcm8gPSBJbnN0YW50aWF0ZShwcmVmYWJfY2hhcmFjdGVyLCBwb3NpdGlvbl9ib3JuLnBvc2l0aW9uLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpLkdldENvbXBvbmVudDxDaGFyYWN0ZXI+KCk7CgkJR2FtZUdvYWwuSW5pdCgpOwoJCVNGWE1hbmFnZXIuTGlzdGVuZXJUYXJnZXQgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoJCUdhbWVVSSA9IEluc3RhbnRpYXRlKHByZWZhYl9nYW1ldWkpLkdldENvbXBvbmVudDxVSU1hbmFnZXI+KCk7CgkJR2FtZVVJLnRyYW5zZm9ybS5TZXRQYXJlbnQodWlfdHJhbnMpOwoJCVZDYW1lcmEuRm9sbG93ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCQlWQ2FtZXJhLkxvb2tBdCA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgoKCQkvLyDms6jlhozlupTnlKjpgIDlh7rkuovku7YKCQlBcHBsaWNhdGlvbi5xdWl0dGluZyArPSBPbkFwcGxpY2F0aW9uUXVpdDsKCQlRdWFsaXR5U2V0dGluZ3MudlN5bmNDb3VudCA9IDA7CgkJQXBwbGljYXRpb24udGFyZ2V0RnJhbWVSYXRlID0gNjA7Cgl9CgoJdm9pZCBTdGFydCgpCgl7CgkJR2FtZVVJLk9wZW5XaW5kb3coIndpbk1haW4iKTsKCX0KCgl2b2lkIE9uQXBwbGljYXRpb25RdWl0KCkKCXsKCQlIZWxwZXJzLkxvZyh0aGlzLCAiQXBwbGljYXRpb25RdWl0Iik7CgkJVGVycmFpblRvb2wuUmVzZXRUZXJyYWluRGF0YSgpOwoJfQoKCXByaXZhdGUgdm9pZCBVcGRhdGUoKQoJewoJCWlmIChtX2J1aWxkTW9kZSkKCQl7CgkJCWlmIChJbnB1dC5HZXRNb3VzZUJ1dHRvbkRvd24oMCkpCgkJCXsKCQkJCW1fZHJhZ01vdXNlUG9zID0gSW5wdXQubW91c2VQb3NpdGlvbjsKCQkJCVJheSByYXkgPSBDYW1lcmEubWFpbi5TY3JlZW5Qb2ludFRvUmF5KElucHV0Lm1vdXNlUG9zaXRpb24pOwoJCQkJUmF5Y2FzdEhpdCBoaXQ7CgoJCQkJLy8g5aaC5p6c5bCE57q/5LiO54mp5L2T56Kw5pKeCgkJCQlpZiAoUGh5c2ljcy5SYXljYXN0KHJheSwgb3V0IGhpdCwgTWF0aGYuSW5maW5pdHksIExheWVyTWFzay5HZXRNYXNrKG5ldyBzdHJpbmdbXSB7ICJDdXJIZXJvIiwgIkVuZW15IiwgIk5ldXRyYWwiLCAiSW50ZXJhY3RhYmxlIiB9KSkpCgkJCQl7CgkJCQkJQ3VycmVudFNsZWN0ZWQgPSBoaXQuY29sbGlkZXIuZ2FtZU9iamVjdDsKCQkJCX0KCQkJfQoJCQllbHNlIGlmIChJbnB1dC5HZXRNb3VzZUJ1dHRvblVwKDApKQoJCQl7CgkJCQltX2RyYWdNb3VzZVBvcyA9IFZlY3RvcjMuemVybzsKCQkJfQoJCQllbHNlIGlmIChJbnB1dC5HZXRNb3VzZUJ1dHRvbigwKSkKCQkJewoJCQkJVmVjdG9yMyBkaXJlY3Rpb24gPSBJbnB1dC5tb3VzZVBvc2l0aW9uIC0gbV9kcmFnTW91c2VQb3M7CgkJCQlpZiAoZGlyZWN0aW9uLm1hZ25pdHVkZSA+IDApCgkJCQl7CgkJCQkJVmVjdG9yMyB0cmFuc1BvcyA9IGJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24gLSBuZXcgVmVjdG9yMyhkaXJlY3Rpb24ueCwgMCwgZGlyZWN0aW9uLnkpICogMS4wZiAqIFRpbWUuZGVsdGFUaW1lOwoJCQkJCWlmICghSW5CYXNlQm91bmRhcnkodHJhbnNQb3MpKSB0cmFuc1BvcyA9IGJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24gLSBuZXcgVmVjdG9yMyhkaXJlY3Rpb24ueCwgMCwgZGlyZWN0aW9uLnkpICogMC4xZiAqIFRpbWUuZGVsdGFUaW1lOwoJCQkJCWJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24gPSB0cmFuc1BvczsKCQkJCQltX2RyYWdNb3VzZVBvcyA9IElucHV0Lm1vdXNlUG9zaXRpb247CgkJCQkJLy9IZWxwZXJzLkxvZyh0aGlzLCAiTW91c2VEcmFnIiwgJCJmcm9te21fZHJhZ01vdXNlUG9zfVRve0lucHV0Lm1vdXNlUG9zaXRpb259LT57ZGlyZWN0aW9uLm1hZ25pdHVkZX0iKTsKCQkJCX0KCQkJfQoJCQllbHNlIGlmICghSW5CYXNlQm91bmRhcnkoYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbikpCgkJCXsKCQkJCWJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24gPSBWZWN0b3IzLkxlcnAoYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbiwgQ29uc3RyYWludFBvcyhidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uKSwgMy4wZik7CgkJCQlpZiAoSW5CYXNlQm91bmRhcnkoYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbikpIG1fcmV2aXNDYW1wb3MgPSBWZWN0b3IzLnplcm87CgkJCX0KCgkJfQoKCQlpZiAoSW5wdXQuR2V0S2V5RG93bigic3BhY2UiKSkKCQl7CgkJCUJ1aWxkTW9kZSA9ICFtX2J1aWxkTW9kZTsKCQkJLy9VSUh1ZENhbnZhcy5JbnN0YW5jZS5idXR0b24udHJhbnNmb3JtLnBvc2l0aW9uID0gQ2FtZXJhLm1haW4uV29ybGRUb1NjcmVlblBvaW50KEN1ckhlcm8udHJhbnNmb3JtLnBvc2l0aW9uKTsKCQl9CgoJCS8vIGlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQkvLyB7CgkJLy8gCUxvY2FsTmF2TWVzaEJ1aWxkZXIgYnVpbGRlciA9IEdldENvbXBvbmVudDxMb2NhbE5hdk1lc2hCdWlsZGVyPigpOwoKCQkvLyAJR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShSZXNvdXJjZXMuTG9hZCgiYnVpbGRpbmdfaG90ZWwiKSwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCS8vR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShwcmVmYWIsIGJ1aWxkZXIuR2V0TmF2TWVzaFJhbmRvbVBvcyhnYW1lT2JqZWN0KSwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKSBhcyBHYW1lT2JqZWN0OwoJCS8vIAlEZWJ1Zy5Mb2coImJ1aWxkIGF0IDoiICsgb2JqLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJLy8gfQoJCWlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQl7CgkJCS8vRWZmZWN0QWN0aW9uKCJUZXN0IiwgbmV3IHN0cmluZ1tdIHsgIkVmZmVjdEFjaW9uIFRlc3QhIiB9KTsKCQl9CgoJCWZsb2F0IG1vdXNlV2hlZWwgPSBJbnB1dC5HZXRBeGlzKCJNb3VzZSBTY3JvbGxXaGVlbCIpOwoJCWlmICghTWF0aGYuQXBwcm94aW1hdGVseShtb3VzZVdoZWVsLCAwLjBmKSkKCQl7CgkJCVZlY3RvcjMgdmlldyA9IENhbWVyYS5tYWluLlNjcmVlblRvVmlld3BvcnRQb2ludChJbnB1dC5tb3VzZVBvc2l0aW9uKTsKCQkJaWYgKHZpZXcueCA+IDBmICYmIHZpZXcueCA8IDFmICYmIHZpZXcueSA+IDBmICYmIHZpZXcueSA8IDFmKQoJCQkJQ2FtZXJhQ3RybC5ab29tKC1tb3VzZVdoZWVsICogVGltZS5kZWx0YVRpbWUgKiAyMC4wZik7CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTdGFydFdhaXRBY3Rpb24oZmxvYXQgd2FpdFRpbWUsIEFjdGlvbiBhY3Rpb24pCgl7CgkJSW5zdGFuY2UuU3RhcnRDb3JvdXRpbmUoSW5zdGFuY2UuV2FpdEFjdGlvbih3YWl0VGltZSwgYWN0aW9uKSk7Cgl9CglJRW51bWVyYXRvciBXYWl0QWN0aW9uKGZsb2F0IHdhaXRUaW1lLCBBY3Rpb24gYWN0aW9uKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMod2FpdFRpbWUpOwoJCWFjdGlvbj8uSW52b2tlKCk7Cgl9CgoJYm9vbCBJbkJhc2VCb3VuZGFyeShWZWN0b3IzIHBvcykKCXsKCQlyZXR1cm4gcG9zLnggPiBiYXNlQm91bmRhcnlfTEIueCAmJiBwb3MueCA8IGJhc2VCb3VuZGFyeV9SVC54CgkJCQkmJiBwb3MueiA+IGJhc2VCb3VuZGFyeV9MQi55ICYmIHBvcy56IDwgYmFzZUJvdW5kYXJ5X1JULnk7Cgl9CgoJVmVjdG9yMyBDb25zdHJhaW50UG9zKFZlY3RvcjMgc291cmNlUG9zKQoJewoJCVZlY3RvcjMgcG9zID0gc291cmNlUG9zOwoJCWlmIChwb3MueCA8IGJhc2VCb3VuZGFyeV9MQi54KSBwb3MueCA9IGJhc2VCb3VuZGFyeV9MQi54OwoJCWlmIChwb3MueCA+IGJhc2VCb3VuZGFyeV9SVC54KSBwb3MueCA9IGJhc2VCb3VuZGFyeV9SVC54OwoJCWlmIChwb3MueiA8IGJhc2VCb3VuZGFyeV9MQi55KSBwb3MueiA9IGJhc2VCb3VuZGFyeV9MQi55OwoJCWlmIChwb3MueiA+IGJhc2VCb3VuZGFyeV9SVC55KSBwb3MueiA9IGJhc2VCb3VuZGFyeV9SVC55OwoJCXJldHVybiBwb3M7Cgl9CglwdWJsaWMgc3RhdGljIHN0cmluZyBTY2VuZUJveEluZm8oR2FtZU9iamVjdCBzY2VuZUJveCwgYm9vbCBkaXNwbGF5KQoJewoJCWlmICghc2NlbmVCb3gpIHJldHVybiBkaXNwbGF5ID8gIuepuuWcsCIgOiAiYmxhbmsiOwoJCXN0cmluZyBzY2VuZVRhZyA9IHNjZW5lQm94LnRhZzsKCQlzd2l0Y2ggKHNjZW5lVGFnKQoJCXsKCQkJY2FzZSAicm9hZCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLpgZPot68iIDogc2NlbmVUYWc7CgkJCWNhc2UgImJ1aWxkaW5nIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuW7uuetkToiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAicGl0IjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuWdkToiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAibW91bnQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bGx5L2TOiIgOiBzY2VuZVRhZzsKCQkJY2FzZSAibnBjIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIm5wYzoiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAiY3JlYXRlciI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlu7rpgKDkuK0uLi4iIDogc2NlbmVUYWc7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9CgkJcmV0dXJuIGRpc3BsYXkgPyAi56m65ZywIiA6ICJibGFuayI7Cgl9Cn0KAAAAAAAAAABEHQAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"revert",
					null,
					"BAAAAAAAAAAAAAAAAAAAAAAAAACCHQAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENpbmVtYWNoaW5lOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpwdWJsaWMgY2xhc3MgR2FtZU1hbmFnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgR2FtZU1hbmFnZXIgSW5zdGFuY2U7CglwdWJsaWMgc3RhdGljIExvcmREYXRhIExvcmQgPT4gSW5zdGFuY2UuR2V0Q29tcG9uZW50PExvcmREYXRhPigpOwoJcHVibGljIHN0YXRpYyBDaGFyYWN0ZXIgQ3VySGVybzsKCXB1YmxpYyBzdGF0aWMgU3RvcnlMaXN0ZW5lciBTdG9yeUxpc3RlbmVyID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxTdG9yeUxpc3RlbmVyPigpOwoJcHVibGljIHN0YXRpYyBHYW1lR29hbFN5c3RlbSBHYW1lR29hbCA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8R2FtZUdvYWxTeXN0ZW0+KCk7CglwdWJsaWMgc3RhdGljIFVJTWFuYWdlciBHYW1lVUk7CglwdWJsaWMgc3RhdGljIEtleVZhbHVlRGF0YSBDb25maWcgPT4gSW5zdGFuY2UuRGVtb0RhdGE7CglwdWJsaWMgTGlnaHRNYW5hZ2VyIERheU5pZ2h0OwoJcHVibGljIENpbmVtYWNoaW5lVmlydHVhbENhbWVyYSBWQ2FtZXJhOwoJcHVibGljIENhbWVyYUNvbnRyb2xsZXIgQ2FtZXJhQ3RybDsKCXB1YmxpYyBTRlhNYW5hZ2VyIFNGWE1hbmFnZXI7CglwdWJsaWMgVGVycmFpblRvb2wgVGVycmFpblRvb2w7CglwdWJsaWMgVHJhbnNmb3JtIGJ1aWxkTW9kZUZvbGxvdzsKCXB1YmxpYyBzdGF0aWMgR2FtZU9iamVjdCBDdXJyZW50U2xlY3RlZAoJewoJCWdldCB7IHJldHVybiBtX0N1cnJlbnRTZWxlY3RlZDsgfQoJCXNldAoJCXsKCQkJbV9DdXJyZW50U2VsZWN0ZWQ/LkdldENvbXBvbmVudDxIaWdobGlnaHRhYmxlT2JqZWN0PigpPy5EZWhpZ2hsaWdodCgpOwoJCQltX0N1cnJlbnRTZWxlY3RlZCA9IHZhbHVlOwoJCQltX0N1cnJlbnRTZWxlY3RlZD8uR2V0Q29tcG9uZW50PEhpZ2hsaWdodGFibGVPYmplY3Q+KCk/LkhpZ2hsaWdodCgpOwoJCQlIZWxwZXJzLkxvZyhJbnN0YW5jZSwgIlBpY2tPYmplY3QiLCAidGFyZ2V0PSAiICsgbV9DdXJyZW50U2VsZWN0ZWQubmFtZSk7CgkJfQoJfQoJcHVibGljIExpc3Q8Rm9ybXVsYURhdGE+IGZvcm11bGFzOwoJcHVibGljIExpc3Q8U3Bhd25lcj4gc3Bhd25lcnM7CglzdGF0aWMgR2FtZU9iamVjdCBtX0N1cnJlbnRTZWxlY3RlZDsKCglwdWJsaWMgc3RhdGljIGJvb2wgQnVpbGRNb2RlCgl7CgkJZ2V0IHsgcmV0dXJuIG1fYnVpbGRNb2RlOyB9CgkJc2V0CgkJewoJCQltX2J1aWxkTW9kZSA9IHZhbHVlOwoJCQlHYW1lTWFuYWdlci5HYW1lVUkuSm95U3RpY2suZW5hYmxlZCA9ICF2YWx1ZTsKCQkJSW5zdGFuY2UuYnVpbGRNb2RlRm9sbG93LnBvc2l0aW9uID0gQ3VySGVyby50cmFuc2Zvcm0ucG9zaXRpb247CgkJCWlmICh2YWx1ZSkKCQkJewoJCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5CVUlMRCk7CgkJCQlHYW1lTWFuYWdlci5DdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSU5BQ1RJVkUpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5SUEcpOwoJCQkJR2FtZU1hbmFnZXIuQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklETEUpOwoJCQl9CgkJfQoJfQoJcHVibGljIHN0YXRpYyBib29sIG1fYnVpbGRNb2RlOwoJcHVibGljIHN0YXRpYyBib29sIFN0b3J5TW9kZQoJewoJCWdldCB7IHJldHVybiBtX3N0b3J5TW9kZTsgfQoJCXNldAoJCXsKCQkJbV9zdG9yeU1vZGUgPSB2YWx1ZTsKCQkJR2FtZU1hbmFnZXIuR2FtZVVJLkpveVN0aWNrLmVuYWJsZWQgPSAhdmFsdWU7CgkJCWlmICh2YWx1ZSkKCQkJewoJCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5TVE9SWSk7CgkJCQlHYW1lTWFuYWdlci5DdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSU5BQ1RJVkUpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5SUEcpOwoJCQkJR2FtZU1hbmFnZXIuQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklETEUpOwoJCQl9CgkJfQoJfQoJcHVibGljIHN0YXRpYyBib29sIG1fc3RvcnlNb2RlOwoKCVtTZXJpYWxpemVGaWVsZF0KCVRyYW5zZm9ybSB1aV90cmFuczsKCVtTZXJpYWxpemVGaWVsZF0KCVRyYW5zZm9ybSBwb3NpdGlvbl9ib3JuOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVmVjdG9yMiBiYXNlQm91bmRhcnlfTEI7CglbU2VyaWFsaXplRmllbGRdCglWZWN0b3IyIGJhc2VCb3VuZGFyeV9SVDsKCVtTZXJpYWxpemVGaWVsZF0KCUdhbWVPYmplY3QgcHJlZmFiX2NoYXJhY3RlcjsKCVtTZXJpYWxpemVGaWVsZF0KCUdhbWVPYmplY3QgcHJlZmFiX2dhbWV1aTsKCglbU2VyaWFsaXplRmllbGRdCglLZXlWYWx1ZURhdGEgRGVtb0RhdGE7CglJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZCB0ZXN0RGVtYW5kOwoJVmVjdG9yMyBtX2RyYWdNb3VzZVBvcyA9IFZlY3RvcjMuemVybzsKCVZlY3RvcjMgbV9yZXZpc0NhbXBvcyA9IFZlY3RvcjMuemVybzsKCXByaXZhdGUgdm9pZCBBd2FrZSgpCgl7CgkJSW5zdGFuY2UgPSB0aGlzOwoJCUxvcmQuSW5pdCgpOwoJCUN1ckhlcm8gPSBJbnN0YW50aWF0ZShwcmVmYWJfY2hhcmFjdGVyLCBwb3NpdGlvbl9ib3JuLnBvc2l0aW9uLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpLkdldENvbXBvbmVudDxDaGFyYWN0ZXI+KCk7CgkJR2FtZUdvYWwuSW5pdCgpOwoJCVNGWE1hbmFnZXIuTGlzdGVuZXJUYXJnZXQgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoJCUdhbWVVSSA9IEluc3RhbnRpYXRlKHByZWZhYl9nYW1ldWkpLkdldENvbXBvbmVudDxVSU1hbmFnZXI+KCk7CgkJR2FtZVVJLnRyYW5zZm9ybS5TZXRQYXJlbnQodWlfdHJhbnMpOwoJCVZDYW1lcmEuRm9sbG93ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCQlWQ2FtZXJhLkxvb2tBdCA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgoKCQkvLyDms6jlhozlupTnlKjpgIDlh7rkuovku7YKCQlBcHBsaWNhdGlvbi5xdWl0dGluZyArPSBPbkFwcGxpY2F0aW9uUXVpdDsKCQlRdWFsaXR5U2V0dGluZ3MudlN5bmNDb3VudCA9IDA7CgkJQXBwbGljYXRpb24udGFyZ2V0RnJhbWVSYXRlID0gNjA7Cgl9CgoJdm9pZCBTdGFydCgpCgl7CgkJR2FtZVVJLk9wZW5XaW5kb3coIndpbk1haW4iKTsKCX0KCgl2b2lkIE9uQXBwbGljYXRpb25RdWl0KCkKCXsKCQlIZWxwZXJzLkxvZyh0aGlzLCAiQXBwbGljYXRpb25RdWl0Iik7CgkJVGVycmFpblRvb2wuUmVzZXRUZXJyYWluRGF0YSgpOwoJfQoKCXByaXZhdGUgdm9pZCBVcGRhdGUoKQoJewoJCWlmIChtX2J1aWxkTW9kZSkKCQl7CgkJCWlmIChJbnB1dC5HZXRNb3VzZUJ1dHRvbkRvd24oMCkpCgkJCXsKCQkJCW1fZHJhZ01vdXNlUG9zID0gSW5wdXQubW91c2VQb3NpdGlvbjsKCQkJCVJheSByYXkgPSBDYW1lcmEubWFpbi5TY3JlZW5Qb2ludFRvUmF5KElucHV0Lm1vdXNlUG9zaXRpb24pOwoJCQkJUmF5Y2FzdEhpdCBoaXQ7CgoJCQkJLy8g5aaC5p6c5bCE57q/5LiO54mp5L2T56Kw5pKeCgkJCQlpZiAoUGh5c2ljcy5SYXljYXN0KHJheSwgb3V0IGhpdCwgTWF0aGYuSW5maW5pdHksIExheWVyTWFzay5HZXRNYXNrKG5ldyBzdHJpbmdbXSB7ICJDdXJIZXJvIiwgIkVuZW15IiwgIk5ldXRyYWwiLCAiSW50ZXJhY3RhYmxlIiB9KSkpCgkJCQl7CgkJCQkJQ3VycmVudFNsZWN0ZWQgPSBoaXQuY29sbGlkZXIuZ2FtZU9iamVjdDsKCQkJCX0KCQkJfQoJCQllbHNlIGlmIChJbnB1dC5HZXRNb3VzZUJ1dHRvblVwKDApKQoJCQl7CgkJCQltX2RyYWdNb3VzZVBvcyA9IFZlY3RvcjMuemVybzsKCQkJfQoJCQllbHNlIGlmIChJbnB1dC5HZXRNb3VzZUJ1dHRvbigwKSkKCQkJewoJCQkJVmVjdG9yMyBkaXJlY3Rpb24gPSBJbnB1dC5tb3VzZVBvc2l0aW9uIC0gbV9kcmFnTW91c2VQb3M7CgkJCQlpZiAoZGlyZWN0aW9uLm1hZ25pdHVkZSA+IDApCgkJCQl7CgkJCQkJVmVjdG9yMyB0cmFuc1BvcyA9IGJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24gLSBuZXcgVmVjdG9yMyhkaXJlY3Rpb24ueCwgMCwgZGlyZWN0aW9uLnkpICogMS4wZiAqIFRpbWUuZGVsdGFUaW1lOwoJCQkJCWlmICghSW5CYXNlQm91bmRhcnkodHJhbnNQb3MpKSB0cmFuc1BvcyA9IGJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24gLSBuZXcgVmVjdG9yMyhkaXJlY3Rpb24ueCwgMCwgZGlyZWN0aW9uLnkpICogMC4xZiAqIFRpbWUuZGVsdGFUaW1lOwoJCQkJCWJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24gPSB0cmFuc1BvczsKCQkJCQltX2RyYWdNb3VzZVBvcyA9IElucHV0Lm1vdXNlUG9zaXRpb247CgkJCQkJLy9IZWxwZXJzLkxvZyh0aGlzLCAiTW91c2VEcmFnIiwgJCJmcm9te21fZHJhZ01vdXNlUG9zfVRve0lucHV0Lm1vdXNlUG9zaXRpb259LT57ZGlyZWN0aW9uLm1hZ25pdHVkZX0iKTsKCQkJCX0KCQkJfQoJCQllbHNlIGlmICghSW5CYXNlQm91bmRhcnkoYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbikpCgkJCXsKCQkJCWJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24gPSBWZWN0b3IzLkxlcnAoYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbiwgQ29uc3RyYWludFBvcyhidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uKSwgMy4wZik7CgkJCQlpZiAoSW5CYXNlQm91bmRhcnkoYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbikpIG1fcmV2aXNDYW1wb3MgPSBWZWN0b3IzLnplcm87CgkJCX0KCgkJfQoKCQlpZiAoSW5wdXQuR2V0S2V5RG93bigic3BhY2UiKSkKCQl7CgkJCUJ1aWxkTW9kZSA9ICFtX2J1aWxkTW9kZTsKCQkJLy9VSUh1ZENhbnZhcy5JbnN0YW5jZS5idXR0b24udHJhbnNmb3JtLnBvc2l0aW9uID0gQ2FtZXJhLm1haW4uV29ybGRUb1NjcmVlblBvaW50KEN1ckhlcm8udHJhbnNmb3JtLnBvc2l0aW9uKTsKCQl9CgoJCS8vIGlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQkvLyB7CgkJLy8gCUxvY2FsTmF2TWVzaEJ1aWxkZXIgYnVpbGRlciA9IEdldENvbXBvbmVudDxMb2NhbE5hdk1lc2hCdWlsZGVyPigpOwoKCQkvLyAJR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShSZXNvdXJjZXMuTG9hZCgiYnVpbGRpbmdfaG90ZWwiKSwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCS8vR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShwcmVmYWIsIGJ1aWxkZXIuR2V0TmF2TWVzaFJhbmRvbVBvcyhnYW1lT2JqZWN0KSwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKSBhcyBHYW1lT2JqZWN0OwoJCS8vIAlEZWJ1Zy5Mb2coImJ1aWxkIGF0IDoiICsgb2JqLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJLy8gfQoJCWlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQl7CgkJCS8vRWZmZWN0QWN0aW9uKCJUZXN0IiwgbmV3IHN0cmluZ1tdIHsgIkVmZmVjdEFjaW9uIFRlc3QhIiB9KTsKCQl9CgoJCWZsb2F0IG1vdXNlV2hlZWwgPSBJbnB1dC5HZXRBeGlzKCJNb3VzZSBTY3JvbGxXaGVlbCIpOwoJCWlmICghTWF0aGYuQXBwcm94aW1hdGVseShtb3VzZVdoZWVsLCAwLjBmKSkKCQl7CgkJCVZlY3RvcjMgdmlldyA9IENhbWVyYS5tYWluLlNjcmVlblRvVmlld3BvcnRQb2ludChJbnB1dC5tb3VzZVBvc2l0aW9uKTsKCQkJaWYgKHZpZXcueCA+IDBmICYmIHZpZXcueCA8IDFmICYmIHZpZXcueSA+IDBmICYmIHZpZXcueSA8IDFmKQoJCQkJQ2FtZXJhQ3RybC5ab29tKC1tb3VzZVdoZWVsICogVGltZS5kZWx0YVRpbWUgKiAyMC4wZik7CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTdGFydFdhaXRBY3Rpb24oZmxvYXQgd2FpdFRpbWUsIEFjdGlvbiBhY3Rpb24pCgl7CgkJSW5zdGFuY2UuU3RhcnRDb3JvdXRpbmUoSW5zdGFuY2UuV2FpdEFjdGlvbih3YWl0VGltZSwgYWN0aW9uKSk7Cgl9CglJRW51bWVyYXRvciBXYWl0QWN0aW9uKGZsb2F0IHdhaXRUaW1lLCBBY3Rpb24gYWN0aW9uKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMod2FpdFRpbWUpOwoJCWFjdGlvbj8uSW52b2tlKCk7Cgl9CgoJYm9vbCBJbkJhc2VCb3VuZGFyeShWZWN0b3IzIHBvcykKCXsKCQlyZXR1cm4gcG9zLnggPiBiYXNlQm91bmRhcnlfTEIueCAmJiBwb3MueCA8IGJhc2VCb3VuZGFyeV9SVC54CgkJCQkmJiBwb3MueiA+IGJhc2VCb3VuZGFyeV9MQi55ICYmIHBvcy56IDwgYmFzZUJvdW5kYXJ5X1JULnk7Cgl9CgoJVmVjdG9yMyBDb25zdHJhaW50UG9zKFZlY3RvcjMgc291cmNlUG9zKQoJewoJCVZlY3RvcjMgcG9zID0gc291cmNlUG9zOwoJCWlmIChwb3MueCA8IGJhc2VCb3VuZGFyeV9MQi54KSBwb3MueCA9IGJhc2VCb3VuZGFyeV9MQi54OwoJCWlmIChwb3MueCA+IGJhc2VCb3VuZGFyeV9SVC54KSBwb3MueCA9IGJhc2VCb3VuZGFyeV9SVC54OwoJCWlmIChwb3MueiA8IGJhc2VCb3VuZGFyeV9MQi55KSBwb3MueiA9IGJhc2VCb3VuZGFyeV9MQi55OwoJCWlmIChwb3MueiA+IGJhc2VCb3VuZGFyeV9SVC55KSBwb3MueiA9IGJhc2VCb3VuZGFyeV9SVC55OwoJCXJldHVybiBwb3M7Cgl9CglwdWJsaWMgc3RhdGljIHN0cmluZyBTY2VuZUJveEluZm8oR2FtZU9iamVjdCBzY2VuZUJveCwgYm9vbCBkaXNwbGF5KQoJewoJCWlmICghc2NlbmVCb3gpIHJldHVybiBkaXNwbGF5ID8gIuepuuWcsCIgOiAiYmxhbmsiOwoJCXN0cmluZyBzY2VuZVRhZyA9IHNjZW5lQm94LnRhZzsKCQlzd2l0Y2ggKHNjZW5lVGFnKQoJCXsKCQkJY2FzZSAicm9hZCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLpgZPot68iIDogc2NlbmVUYWc7CgkJCWNhc2UgImJ1aWxkaW5nIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuW7uuetkToiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAicGl0IjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuWdkToiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAibW91bnQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bGx5L2TOiIgOiBzY2VuZVRhZzsKCQkJY2FzZSAibnBjIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIm5wYzoiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAiY3JlYXRlciI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlu7rpgKDkuK0uLi4iIDogc2NlbmVUYWc7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9CgkJcmV0dXJuIGRpc3BsYXkgPyAi56m65ZywIiA6ICJibGFuayI7Cgl9Cn0KAAAAAAAAAACAHQAAAAAAAAAAAAAAAAAAAAAAACIeAAAAAAAAAAAAAAAAAAAAAAAAICAAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABeIAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENpbmVtYWNoaW5lOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpwdWJsaWMgY2xhc3MgR2FtZU1hbmFnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgR2FtZU1hbmFnZXIgSW5zdGFuY2U7CglwdWJsaWMgc3RhdGljIExvcmREYXRhIExvcmQgPT4gSW5zdGFuY2UuR2V0Q29tcG9uZW50PExvcmREYXRhPigpOwoJcHVibGljIHN0YXRpYyBDaGFyYWN0ZXIgQ3VySGVybzsKCXB1YmxpYyBzdGF0aWMgU3RvcnlMaXN0ZW5lciBTdG9yeUxpc3RlbmVyID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxTdG9yeUxpc3RlbmVyPigpOwoJcHVibGljIHN0YXRpYyBHYW1lR29hbFN5c3RlbSBHYW1lR29hbCA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8R2FtZUdvYWxTeXN0ZW0+KCk7CglwdWJsaWMgc3RhdGljIExldmVsU3lzdGVtIEdhbWVMZXZlbCA9PiBJbnN0YW5jZS5tX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBVSU1hbmFnZXIgR2FtZVVJOwoJcHVibGljIHN0YXRpYyBLZXlWYWx1ZURhdGEgQ29uZmlnID0+IEluc3RhbmNlLkRlbW9EYXRhOwoJcHVibGljIExpZ2h0TWFuYWdlciBEYXlOaWdodDsKCXB1YmxpYyBDaW5lbWFjaGluZVZpcnR1YWxDYW1lcmEgVkNhbWVyYTsKCXB1YmxpYyBDYW1lcmFDb250cm9sbGVyIENhbWVyYUN0cmw7CglwdWJsaWMgU0ZYTWFuYWdlciBTRlhNYW5hZ2VyOwoJcHVibGljIFRlcnJhaW5Ub29sIFRlcnJhaW5Ub29sOwoJcHVibGljIFRyYW5zZm9ybSBidWlsZE1vZGVGb2xsb3c7CglMZXZlbFN5c3RlbSBtX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBHYW1lT2JqZWN0IEN1cnJlbnRTbGVjdGVkCgl7CgkJZ2V0IHsgcmV0dXJuIG1fQ3VycmVudFNlbGVjdGVkOyB9CgkJc2V0CgkJewoJCQltX0N1cnJlbnRTZWxlY3RlZD8uR2V0Q29tcG9uZW50PEhpZ2hsaWdodGFibGVPYmplY3Q+KCk/LkRlaGlnaGxpZ2h0KCk7CgkJCW1fQ3VycmVudFNlbGVjdGVkID0gdmFsdWU7CgkJCW1fQ3VycmVudFNlbGVjdGVkPy5HZXRDb21wb25lbnQ8SGlnaGxpZ2h0YWJsZU9iamVjdD4oKT8uSGlnaGxpZ2h0KCk7CgkJCUhlbHBlcnMuTG9nKEluc3RhbmNlLCAiUGlja09iamVjdCIsICJ0YXJnZXQ9ICIgKyBtX0N1cnJlbnRTZWxlY3RlZC5uYW1lKTsKCQl9Cgl9CglwdWJsaWMgTGlzdDxGb3JtdWxhRGF0YT4gZm9ybXVsYXM7CglwdWJsaWMgTGlzdDxTcGF3bmVyPiBzcGF3bmVyczsKCXB1YmxpYyBMaXN0PExldmVsRGF0YT4gbGV2ZWxzOwoJc3RhdGljIEdhbWVPYmplY3QgbV9DdXJyZW50U2VsZWN0ZWQ7CgoJcHVibGljIHN0YXRpYyBib29sIEJ1aWxkTW9kZQoJewoJCWdldCB7IHJldHVybiBidWlsZE1vZGU7IH0KCQlzZXQKCQl7CgkJCWJ1aWxkTW9kZSA9IHZhbHVlOwoJCQlHYW1lTWFuYWdlci5HYW1lVUkuSm95U3RpY2suZW5hYmxlZCA9ICF2YWx1ZTsKCQkJSW5zdGFuY2UuYnVpbGRNb2RlRm9sbG93LnBvc2l0aW9uID0gQ3VySGVyby50cmFuc2Zvcm0ucG9zaXRpb247CgkJCWlmICh2YWx1ZSkKCQkJewoJCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5CVUlMRCk7CgkJCQlHYW1lTWFuYWdlci5DdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSU5BQ1RJVkUpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5SUEcpOwoJCQkJR2FtZU1hbmFnZXIuQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklETEUpOwoJCQl9CgkJfQoJfQoJcHVibGljIHN0YXRpYyBib29sIGJ1aWxkTW9kZTsKCglwdWJsaWMgc3RhdGljIHZvaWQgU2V0U3RvcnlNb2RlbChib29sIGFjdGl2ZSwgQWN0aW9uIGFjdGlvbiA9IG51bGwpCgl7CgkJaWYgKHN0b3J5TW9kZSA9PSBhY3RpdmUpIHsgYWN0aW9uPy5JbnZva2UoKTsgcmV0dXJuOyB9CgkJc3RvcnlNb2RlID0gYWN0aXZlOwoJCUdhbWVVSS5Kb3lTdGljay5lbmFibGVkID0gIWFjdGl2ZTsKCQlpZiAoYWN0aXZlKQoJCXsKCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5TVE9SWSwgYWN0aW9uKTsKCQkJQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklOQUNUSVZFKTsKCQl9CgkJZWxzZQoJCXsKCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5SUEcsIGFjdGlvbik7CgkJCUN1ckhlcm8uQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JRExFKTsKCQl9Cgl9CglwdWJsaWMgc3RhdGljIGJvb2wgc3RvcnlNb2RlIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCVRyYW5zZm9ybSB1aV90cmFuczsKCVtTZXJpYWxpemVGaWVsZF0KCVRyYW5zZm9ybSBwb3NpdGlvbl9ib3JuOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVmVjdG9yMiBiYXNlQm91bmRhcnlfTEI7CglbU2VyaWFsaXplRmllbGRdCglWZWN0b3IyIGJhc2VCb3VuZGFyeV9SVDsKCVtTZXJpYWxpemVGaWVsZF0KCUdhbWVPYmplY3QgcHJlZmFiX2NoYXJhY3RlcjsKCVtTZXJpYWxpemVGaWVsZF0KCUdhbWVPYmplY3QgcHJlZmFiX2dhbWV1aTsKCglbU2VyaWFsaXplRmllbGRdCglLZXlWYWx1ZURhdGEgRGVtb0RhdGE7CglJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZCB0ZXN0RGVtYW5kOwoJVmVjdG9yMyBtX2RyYWdNb3VzZVBvcyA9IFZlY3RvcjMuemVybzsKCVZlY3RvcjMgbV9yZXZpc0NhbXBvcyA9IFZlY3RvcjMuemVybzsKCXByaXZhdGUgdm9pZCBBd2FrZSgpCgl7CgkJSW5zdGFuY2UgPSB0aGlzOwoJCUxvcmQuSW5pdCgpOwoJCUN1ckhlcm8gPSBJbnN0YW50aWF0ZShwcmVmYWJfY2hhcmFjdGVyLCBwb3NpdGlvbl9ib3JuLnBvc2l0aW9uLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpLkdldENvbXBvbmVudDxDaGFyYWN0ZXI+KCk7CgkJR2FtZUdvYWwuSW5pdCgpOwoJCVNGWE1hbmFnZXIuTGlzdGVuZXJUYXJnZXQgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoJCUdhbWVVSSA9IEluc3RhbnRpYXRlKHByZWZhYl9nYW1ldWkpLkdldENvbXBvbmVudDxVSU1hbmFnZXI+KCk7CgkJR2FtZVVJLnRyYW5zZm9ybS5TZXRQYXJlbnQodWlfdHJhbnMpOwoJCVZDYW1lcmEuRm9sbG93ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCQlWQ2FtZXJhLkxvb2tBdCA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgoJCW1fbGV2ZWxTeXN0ZW0gPSBuZXcgTGV2ZWxTeXN0ZW0oKTsKCgoJCS8vIOazqOWGjOW6lOeUqOmAgOWHuuS6i+S7tgoJCUFwcGxpY2F0aW9uLnF1aXR0aW5nICs9IE9uQXBwbGljYXRpb25RdWl0OwoJCVF1YWxpdHlTZXR0aW5ncy52U3luY0NvdW50ID0gMDsKCQlBcHBsaWNhdGlvbi50YXJnZXRGcmFtZVJhdGUgPSA2MDsKCX0KCgl2b2lkIFN0YXJ0KCkKCXsKCQlSZXNJbnZlbnRvcnlJdGVtIG1vbmV5SW52ZW50b3J5ID0gS2V5VmFsdWVEYXRhLkdldFZhbHVlPEl0ZW0+KEdhbWVNYW5hZ2VyLkNvbmZpZy5JdGVtLCAiUmVzSW52ZW50b3J5X01vbmV5IikgYXMgUmVzSW52ZW50b3J5SXRlbTsKCQlpZiAobW9uZXlJbnZlbnRvcnkpIEdhbWVNYW5hZ2VyLkN1ckhlcm8uSW52ZW50b3J5LlJlc0ludmVudG9yaWVzLkFkZChSZXNJdGVtLlJlc1R5cGUuTW9uZXksIG5ldyBJbnZlbnRvcnlTeXN0ZW0uUmVzSW52ZW50b3J5KG1vbmV5SW52ZW50b3J5KSk7CgkJR2FtZVVJLk9wZW5XaW5kb3coIndpbk1haW4iKTsKCQltX2xldmVsU3lzdGVtLlN0YXJ0TGV2ZWwobGV2ZWxzWzBdLCBHYW1lTWFuYWdlci5DdXJIZXJvKTsKCX0KCgl2b2lkIE9uQXBwbGljYXRpb25RdWl0KCkKCXsKCQlIZWxwZXJzLkxvZyh0aGlzLCAiQXBwbGljYXRpb25RdWl0Iik7CgkJVGVycmFpblRvb2wuUmVzZXRUZXJyYWluRGF0YSgpOwoJfQoKCXByaXZhdGUgdm9pZCBVcGRhdGUoKQoJewoJCWlmIChidWlsZE1vZGUpCgkJewoJCQlpZiAoSW5wdXQuR2V0TW91c2VCdXR0b25Eb3duKDApKQoJCQl7CgkJCQltX2RyYWdNb3VzZVBvcyA9IElucHV0Lm1vdXNlUG9zaXRpb247CgkJCQlSYXkgcmF5ID0gQ2FtZXJhLm1haW4uU2NyZWVuUG9pbnRUb1JheShJbnB1dC5tb3VzZVBvc2l0aW9uKTsKCQkJCVJheWNhc3RIaXQgaGl0OwoKCQkJCS8vIOWmguaenOWwhOe6v+S4jueJqeS9k+eisOaSngoJCQkJaWYgKFBoeXNpY3MuUmF5Y2FzdChyYXksIG91dCBoaXQsIE1hdGhmLkluZmluaXR5LCBMYXllck1hc2suR2V0TWFzayhuZXcgc3RyaW5nW10geyAiQ3VySGVybyIsICJFbmVteSIsICJOZXV0cmFsIiwgIkludGVyYWN0YWJsZSIgfSkpKQoJCQkJewoJCQkJCUN1cnJlbnRTbGVjdGVkID0gaGl0LmNvbGxpZGVyLmdhbWVPYmplY3Q7CgkJCQl9CgkJCX0KCQkJZWxzZSBpZiAoSW5wdXQuR2V0TW91c2VCdXR0b25VcCgwKSkKCQkJewoJCQkJbV9kcmFnTW91c2VQb3MgPSBWZWN0b3IzLnplcm87CgkJCX0KCQkJZWxzZSBpZiAoSW5wdXQuR2V0TW91c2VCdXR0b24oMCkpCgkJCXsKCQkJCVZlY3RvcjMgZGlyZWN0aW9uID0gSW5wdXQubW91c2VQb3NpdGlvbiAtIG1fZHJhZ01vdXNlUG9zOwoJCQkJaWYgKGRpcmVjdGlvbi5tYWduaXR1ZGUgPiAwKQoJCQkJewoJCQkJCVZlY3RvcjMgdHJhbnNQb3MgPSBidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uIC0gbmV3IFZlY3RvcjMoZGlyZWN0aW9uLngsIDAsIGRpcmVjdGlvbi55KSAqIDEuMGYgKiBUaW1lLmRlbHRhVGltZTsKCQkJCQlpZiAoIUluQmFzZUJvdW5kYXJ5KHRyYW5zUG9zKSkgdHJhbnNQb3MgPSBidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uIC0gbmV3IFZlY3RvcjMoZGlyZWN0aW9uLngsIDAsIGRpcmVjdGlvbi55KSAqIDAuMWYgKiBUaW1lLmRlbHRhVGltZTsKCQkJCQlidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uID0gdHJhbnNQb3M7CgkJCQkJbV9kcmFnTW91c2VQb3MgPSBJbnB1dC5tb3VzZVBvc2l0aW9uOwoJCQkJCS8vSGVscGVycy5Mb2codGhpcywgIk1vdXNlRHJhZyIsICQiZnJvbXttX2RyYWdNb3VzZVBvc31Ub3tJbnB1dC5tb3VzZVBvc2l0aW9ufS0+e2RpcmVjdGlvbi5tYWduaXR1ZGV9Iik7CgkJCQl9CgkJCX0KCQkJZWxzZSBpZiAoIUluQmFzZUJvdW5kYXJ5KGJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24pKQoJCQl7CgkJCQlidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uID0gVmVjdG9yMy5MZXJwKGJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24sIENvbnN0cmFpbnRQb3MoYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbiksIDMuMGYpOwoJCQkJaWYgKEluQmFzZUJvdW5kYXJ5KGJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24pKSBtX3JldmlzQ2FtcG9zID0gVmVjdG9yMy56ZXJvOwoJCQl9CgoJCX0KCgkJaWYgKElucHV0LkdldEtleURvd24oInNwYWNlIikpCgkJewoJCQlCdWlsZE1vZGUgPSAhYnVpbGRNb2RlOwoJCQkvL1VJSHVkQ2FudmFzLkluc3RhbmNlLmJ1dHRvbi50cmFuc2Zvcm0ucG9zaXRpb24gPSBDYW1lcmEubWFpbi5Xb3JsZFRvU2NyZWVuUG9pbnQoQ3VySGVyby50cmFuc2Zvcm0ucG9zaXRpb24pOwoJCX0KCgkJLy8gaWYgKElucHV0LkdldEtleURvd24oS2V5Q29kZS5SZXR1cm4pKQoJCS8vIHsKCQkvLyAJTG9jYWxOYXZNZXNoQnVpbGRlciBidWlsZGVyID0gR2V0Q29tcG9uZW50PExvY2FsTmF2TWVzaEJ1aWxkZXI+KCk7CgoJCS8vIAlHYW1lT2JqZWN0IG9iaiA9IEluc3RhbnRpYXRlKFJlc291cmNlcy5Mb2FkKCJidWlsZGluZ19ob3RlbCIpLCBidWlsZGVyLkdldE5hdk1lc2hSYW5kb21Qb3MoZ2FtZU9iamVjdCksIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSkgYXMgR2FtZU9iamVjdDsKCQkvLyAJLy9HYW1lT2JqZWN0IG9iaiA9IEluc3RhbnRpYXRlKHByZWZhYiwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCURlYnVnLkxvZygiYnVpbGQgYXQgOiIgKyBvYmoudHJhbnNmb3JtLnBvc2l0aW9uKTsKCQkvLyB9CgkJaWYgKElucHV0LkdldEtleURvd24oS2V5Q29kZS5SZXR1cm4pKQoJCXsKCQkJQ3VySGVyby5CYXNlQUkuQmFjayg1LjBmKTsKCQl9CgoJCWZsb2F0IG1vdXNlV2hlZWwgPSBJbnB1dC5HZXRBeGlzKCJNb3VzZSBTY3JvbGxXaGVlbCIpOwoJCWlmICghTWF0aGYuQXBwcm94aW1hdGVseShtb3VzZVdoZWVsLCAwLjBmKSkKCQl7CgkJCVZlY3RvcjMgdmlldyA9IENhbWVyYS5tYWluLlNjcmVlblRvVmlld3BvcnRQb2ludChJbnB1dC5tb3VzZVBvc2l0aW9uKTsKCQkJaWYgKHZpZXcueCA+IDBmICYmIHZpZXcueCA8IDFmICYmIHZpZXcueSA+IDBmICYmIHZpZXcueSA8IDFmKQoJCQkJQ2FtZXJhQ3RybC5ab29tKC1tb3VzZVdoZWVsICogVGltZS5kZWx0YVRpbWUgKiAyMC4wZik7CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTdGFydFdhaXRBY3Rpb24oZmxvYXQgd2FpdFRpbWUsIEFjdGlvbiBhY3Rpb24pCgl7CgkJSW5zdGFuY2UuU3RhcnRDb3JvdXRpbmUoSW5zdGFuY2UuV2FpdEFjdGlvbih3YWl0VGltZSwgYWN0aW9uKSk7Cgl9CglJRW51bWVyYXRvciBXYWl0QWN0aW9uKGZsb2F0IHdhaXRUaW1lLCBBY3Rpb24gYWN0aW9uKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMod2FpdFRpbWUpOwoJCWFjdGlvbj8uSW52b2tlKCk7Cgl9CgoJcHVibGljIHN0YXRpYyB2b2lkIFN0YXJ0TmV4dEZyYW1lQWN0aW9uKEFjdGlvbiBhY3Rpb24pCgl7CgkJSW5zdGFuY2UuU3RhcnRDb3JvdXRpbmUoSW5zdGFuY2UuTmV4dEZyYW1lQWN0aW9uKGFjdGlvbikpOwoJfQoJSUVudW1lcmF0b3IgTmV4dEZyYW1lQWN0aW9uKEFjdGlvbiBhY3Rpb24pCgl7CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yTmV4dEZyYW1lVW5pdCgpOwoJCWFjdGlvbj8uSW52b2tlKCk7Cgl9CgoJYm9vbCBJbkJhc2VCb3VuZGFyeShWZWN0b3IzIHBvcykKCXsKCQlyZXR1cm4gcG9zLnggPiBiYXNlQm91bmRhcnlfTEIueCAmJiBwb3MueCA8IGJhc2VCb3VuZGFyeV9SVC54CgkJCQkmJiBwb3MueiA+IGJhc2VCb3VuZGFyeV9MQi55ICYmIHBvcy56IDwgYmFzZUJvdW5kYXJ5X1JULnk7Cgl9CgoJVmVjdG9yMyBDb25zdHJhaW50UG9zKFZlY3RvcjMgc291cmNlUG9zKQoJewoJCVZlY3RvcjMgcG9zID0gc291cmNlUG9zOwoJCWlmIChwb3MueCA8IGJhc2VCb3VuZGFyeV9MQi54KSBwb3MueCA9IGJhc2VCb3VuZGFyeV9MQi54OwoJCWlmIChwb3MueCA+IGJhc2VCb3VuZGFyeV9SVC54KSBwb3MueCA9IGJhc2VCb3VuZGFyeV9SVC54OwoJCWlmIChwb3MueiA8IGJhc2VCb3VuZGFyeV9MQi55KSBwb3MueiA9IGJhc2VCb3VuZGFyeV9MQi55OwoJCWlmIChwb3MueiA+IGJhc2VCb3VuZGFyeV9SVC55KSBwb3MueiA9IGJhc2VCb3VuZGFyeV9SVC55OwoJCXJldHVybiBwb3M7Cgl9CglwdWJsaWMgc3RhdGljIHN0cmluZyBTY2VuZUJveEluZm8oR2FtZU9iamVjdCBzY2VuZUJveCwgYm9vbCBkaXNwbGF5KQoJewoJCWlmICghc2NlbmVCb3gpIHJldHVybiBkaXNwbGF5ID8gIuepuuWcsCIgOiAiYmxhbmsiOwoJCXN0cmluZyBzY2VuZVRhZyA9IHNjZW5lQm94LnRhZzsKCQlzd2l0Y2ggKHNjZW5lVGFnKQoJCXsKCQkJY2FzZSAicm9hZCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLpgZPot68iIDogc2NlbmVUYWc7CgkJCWNhc2UgImJ1aWxkaW5nIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuW7uuetkToiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAicGl0IjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuWdkToiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAibW91bnQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bGx5L2TOiIgOiBzY2VuZVRhZzsKCQkJY2FzZSAibnBjIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIm5wYzoiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAiY3JlYXRlciI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlu7rpgKDkuK0uLi4iIDogc2NlbmVUYWc7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9CgkJcmV0dXJuIGRpc3BsYXkgPyAi56m65ZywIiA6ICJibGFuayI7Cgl9Cn0KAAAAAAAAAAAfIAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABdIAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENpbmVtYWNoaW5lOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpwdWJsaWMgY2xhc3MgR2FtZU1hbmFnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgR2FtZU1hbmFnZXIgSW5zdGFuY2U7CglwdWJsaWMgc3RhdGljIExvcmREYXRhIExvcmQgPT4gSW5zdGFuY2UuR2V0Q29tcG9uZW50PExvcmREYXRhPigpOwoJcHVibGljIHN0YXRpYyBDaGFyYWN0ZXIgQ3VySGVybzsKCXB1YmxpYyBzdGF0aWMgU3RvcnlMaXN0ZW5lciBTdG9yeUxpc3RlbmVyID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxTdG9yeUxpc3RlbmVyPigpOwoJcHVibGljIHN0YXRpYyBHYW1lR29hbFN5c3RlbSBHYW1lR29hbCA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8R2FtZUdvYWxTeXN0ZW0+KCk7CglwdWJsaWMgc3RhdGljIExldmVsU3lzdGVtIEdhbWVMZXZlbCA9PiBJbnN0YW5jZS5tX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBVSU1hbmFnZXIgR2FtZVVJOwoJcHVibGljIHN0YXRpYyBLZXlWYWx1ZURhdGEgQ29uZmlnID0+IEluc3RhbmNlLkRlbW9EYXRhOwoJcHVibGljIExpZ2h0TWFuYWdlciBEYXlOaWdodDsKCXB1YmxpYyBDaW5lbWFjaGluZVZpcnR1YWxDYW1lcmEgVkNhbWVyYTsKCXB1YmxpYyBDYW1lcmFDb250cm9sbGVyIENhbWVyYUN0cmw7CglwdWJsaWMgU0ZYTWFuYWdlciBTRlhNYW5hZ2VyOwoJcHVibGljIFRlcnJhaW5Ub29sIFRlcnJhaW5Ub29sOwoJcHVibGljIFRyYW5zZm9ybSBidWlsZE1vZGVGb2xsb3c7CglMZXZlbFN5c3RlbSBtX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBHYW1lT2JqZWN0IEN1cnJlbnRTbGVjdGVkCgl7CgkJZ2V0IHsgcmV0dXJuIG1fQ3VycmVudFNlbGVjdGVkOyB9CgkJc2V0CgkJewoJCQltX0N1cnJlbnRTZWxlY3RlZD8uR2V0Q29tcG9uZW50PEhpZ2hsaWdodGFibGVPYmplY3Q+KCk/LkRlaGlnaGxpZ2h0KCk7CgkJCW1fQ3VycmVudFNlbGVjdGVkID0gdmFsdWU7CgkJCW1fQ3VycmVudFNlbGVjdGVkPy5HZXRDb21wb25lbnQ8SGlnaGxpZ2h0YWJsZU9iamVjdD4oKT8uSGlnaGxpZ2h0KCk7CgkJCUhlbHBlcnMuTG9nKEluc3RhbmNlLCAiUGlja09iamVjdCIsICJ0YXJnZXQ9ICIgKyBtX0N1cnJlbnRTZWxlY3RlZC5uYW1lKTsKCQl9Cgl9CglwdWJsaWMgTGlzdDxGb3JtdWxhRGF0YT4gZm9ybXVsYXM7CglwdWJsaWMgTGlzdDxTcGF3bmVyPiBzcGF3bmVyczsKCXB1YmxpYyBMZXZlbERhdGEgc3RhcnRMZXZlbDsKCXN0YXRpYyBHYW1lT2JqZWN0IG1fQ3VycmVudFNlbGVjdGVkOwoKCXB1YmxpYyBzdGF0aWMgYm9vbCBCdWlsZE1vZGUKCXsKCQlnZXQgeyByZXR1cm4gYnVpbGRNb2RlOyB9CgkJc2V0CgkJewoJCQlidWlsZE1vZGUgPSB2YWx1ZTsKCQkJR2FtZU1hbmFnZXIuR2FtZVVJLkpveVN0aWNrLmVuYWJsZWQgPSAhdmFsdWU7CgkJCUluc3RhbmNlLmJ1aWxkTW9kZUZvbGxvdy5wb3NpdGlvbiA9IEN1ckhlcm8udHJhbnNmb3JtLnBvc2l0aW9uOwoJCQlpZiAodmFsdWUpCgkJCXsKCQkJCUluc3RhbmNlLkNhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuQlVJTEQpOwoJCQkJR2FtZU1hbmFnZXIuQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklOQUNUSVZFKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCUluc3RhbmNlLkNhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuUlBHKTsKCQkJCUdhbWVNYW5hZ2VyLkN1ckhlcm8uQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JRExFKTsKCQkJfQoJCX0KCX0KCXB1YmxpYyBzdGF0aWMgYm9vbCBidWlsZE1vZGU7CgoJcHVibGljIHN0YXRpYyB2b2lkIFNldFN0b3J5TW9kZWwoYm9vbCBhY3RpdmUsIEFjdGlvbiBhY3Rpb24gPSBudWxsKQoJewoJCWlmIChzdG9yeU1vZGUgPT0gYWN0aXZlKSB7IGFjdGlvbj8uSW52b2tlKCk7IHJldHVybjsgfQoJCXN0b3J5TW9kZSA9IGFjdGl2ZTsKCQlHYW1lVUkuSm95U3RpY2suZW5hYmxlZCA9ICFhY3RpdmU7CgkJaWYgKGFjdGl2ZSkKCQl7CgkJCUluc3RhbmNlLkNhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuU1RPUlksIGFjdGlvbik7CgkJCUN1ckhlcm8uQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JTkFDVElWRSk7CgkJfQoJCWVsc2UKCQl7CgkJCUluc3RhbmNlLkNhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuUlBHLCBhY3Rpb24pOwoJCQlDdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSURMRSk7CgkJfQoJfQoJcHVibGljIHN0YXRpYyBib29sIHN0b3J5TW9kZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH0KCglbU2VyaWFsaXplRmllbGRdCglUcmFuc2Zvcm0gdWlfdHJhbnM7CglbU2VyaWFsaXplRmllbGRdCglUcmFuc2Zvcm0gcG9zaXRpb25fYm9ybjsKCVtTZXJpYWxpemVGaWVsZF0KCVZlY3RvcjIgYmFzZUJvdW5kYXJ5X0xCOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVmVjdG9yMiBiYXNlQm91bmRhcnlfUlQ7CglbU2VyaWFsaXplRmllbGRdCglHYW1lT2JqZWN0IHByZWZhYl9jaGFyYWN0ZXI7CglbU2VyaWFsaXplRmllbGRdCglHYW1lT2JqZWN0IHByZWZhYl9nYW1ldWk7CgoJW1NlcmlhbGl6ZUZpZWxkXQoJS2V5VmFsdWVEYXRhIERlbW9EYXRhOwoJSW52ZW50b3J5U3lzdGVtLkl0ZW1EZW1hbmQgdGVzdERlbWFuZDsKCVZlY3RvcjMgbV9kcmFnTW91c2VQb3MgPSBWZWN0b3IzLnplcm87CglWZWN0b3IzIG1fcmV2aXNDYW1wb3MgPSBWZWN0b3IzLnplcm87Cglwcml2YXRlIHZvaWQgQXdha2UoKQoJewoJCUluc3RhbmNlID0gdGhpczsKCQlMb3JkLkluaXQoKTsKCQlDdXJIZXJvID0gSW5zdGFudGlhdGUocHJlZmFiX2NoYXJhY3RlciwgcG9zaXRpb25fYm9ybi5wb3NpdGlvbiwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKS5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpOwoJCUdhbWVHb2FsLkluaXQoKTsKCQlTRlhNYW5hZ2VyLkxpc3RlbmVyVGFyZ2V0ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCQlHYW1lVUkgPSBJbnN0YW50aWF0ZShwcmVmYWJfZ2FtZXVpKS5HZXRDb21wb25lbnQ8VUlNYW5hZ2VyPigpOwoJCUdhbWVVSS50cmFuc2Zvcm0uU2V0UGFyZW50KHVpX3RyYW5zKTsKCQlWQ2FtZXJhLkZvbGxvdyA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgkJVkNhbWVyYS5Mb29rQXQgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoKCQltX2xldmVsU3lzdGVtID0gbmV3IExldmVsU3lzdGVtKCk7CgoKCQkvLyDms6jlhozlupTnlKjpgIDlh7rkuovku7YKCQlBcHBsaWNhdGlvbi5xdWl0dGluZyArPSBPbkFwcGxpY2F0aW9uUXVpdDsKCQlRdWFsaXR5U2V0dGluZ3MudlN5bmNDb3VudCA9IDA7CgkJQXBwbGljYXRpb24udGFyZ2V0RnJhbWVSYXRlID0gNjA7Cgl9CgoJdm9pZCBTdGFydCgpCgl7CgkJUmVzSW52ZW50b3J5SXRlbSBtb25leUludmVudG9yeSA9IEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxJdGVtPihHYW1lTWFuYWdlci5Db25maWcuSXRlbSwgIlJlc0ludmVudG9yeV9Nb25leSIpIGFzIFJlc0ludmVudG9yeUl0ZW07CgkJaWYgKG1vbmV5SW52ZW50b3J5KSBHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeS5SZXNJbnZlbnRvcmllcy5BZGQoUmVzSXRlbS5SZXNUeXBlLk1vbmV5LCBuZXcgSW52ZW50b3J5U3lzdGVtLlJlc0ludmVudG9yeShtb25leUludmVudG9yeSkpOwoJCUdhbWVVSS5PcGVuV2luZG93KCJ3aW5NYWluIik7CgkJbV9sZXZlbFN5c3RlbS5TdGFydExldmVsKHN0YXJ0TGV2ZWwsIEdhbWVNYW5hZ2VyLkN1ckhlcm8pOwoJfQoKCXZvaWQgT25BcHBsaWNhdGlvblF1aXQoKQoJewoJCUhlbHBlcnMuTG9nKHRoaXMsICJBcHBsaWNhdGlvblF1aXQiKTsKCQlUZXJyYWluVG9vbC5SZXNldFRlcnJhaW5EYXRhKCk7Cgl9CgoJcHJpdmF0ZSB2b2lkIFVwZGF0ZSgpCgl7CgkJaWYgKGJ1aWxkTW9kZSkKCQl7CgkJCWlmIChJbnB1dC5HZXRNb3VzZUJ1dHRvbkRvd24oMCkpCgkJCXsKCQkJCW1fZHJhZ01vdXNlUG9zID0gSW5wdXQubW91c2VQb3NpdGlvbjsKCQkJCVJheSByYXkgPSBDYW1lcmEubWFpbi5TY3JlZW5Qb2ludFRvUmF5KElucHV0Lm1vdXNlUG9zaXRpb24pOwoJCQkJUmF5Y2FzdEhpdCBoaXQ7CgoJCQkJLy8g5aaC5p6c5bCE57q/5LiO54mp5L2T56Kw5pKeCgkJCQlpZiAoUGh5c2ljcy5SYXljYXN0KHJheSwgb3V0IGhpdCwgTWF0aGYuSW5maW5pdHksIExheWVyTWFzay5HZXRNYXNrKG5ldyBzdHJpbmdbXSB7ICJDdXJIZXJvIiwgIkVuZW15IiwgIk5ldXRyYWwiLCAiSW50ZXJhY3RhYmxlIiB9KSkpCgkJCQl7CgkJCQkJQ3VycmVudFNsZWN0ZWQgPSBoaXQuY29sbGlkZXIuZ2FtZU9iamVjdDsKCQkJCX0KCQkJfQoJCQllbHNlIGlmIChJbnB1dC5HZXRNb3VzZUJ1dHRvblVwKDApKQoJCQl7CgkJCQltX2RyYWdNb3VzZVBvcyA9IFZlY3RvcjMuemVybzsKCQkJfQoJCQllbHNlIGlmIChJbnB1dC5HZXRNb3VzZUJ1dHRvbigwKSkKCQkJewoJCQkJVmVjdG9yMyBkaXJlY3Rpb24gPSBJbnB1dC5tb3VzZVBvc2l0aW9uIC0gbV9kcmFnTW91c2VQb3M7CgkJCQlpZiAoZGlyZWN0aW9uLm1hZ25pdHVkZSA+IDApCgkJCQl7CgkJCQkJVmVjdG9yMyB0cmFuc1BvcyA9IGJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24gLSBuZXcgVmVjdG9yMyhkaXJlY3Rpb24ueCwgMCwgZGlyZWN0aW9uLnkpICogMS4wZiAqIFRpbWUuZGVsdGFUaW1lOwoJCQkJCWlmICghSW5CYXNlQm91bmRhcnkodHJhbnNQb3MpKSB0cmFuc1BvcyA9IGJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24gLSBuZXcgVmVjdG9yMyhkaXJlY3Rpb24ueCwgMCwgZGlyZWN0aW9uLnkpICogMC4xZiAqIFRpbWUuZGVsdGFUaW1lOwoJCQkJCWJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24gPSB0cmFuc1BvczsKCQkJCQltX2RyYWdNb3VzZVBvcyA9IElucHV0Lm1vdXNlUG9zaXRpb247CgkJCQkJLy9IZWxwZXJzLkxvZyh0aGlzLCAiTW91c2VEcmFnIiwgJCJmcm9te21fZHJhZ01vdXNlUG9zfVRve0lucHV0Lm1vdXNlUG9zaXRpb259LT57ZGlyZWN0aW9uLm1hZ25pdHVkZX0iKTsKCQkJCX0KCQkJfQoJCQllbHNlIGlmICghSW5CYXNlQm91bmRhcnkoYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbikpCgkJCXsKCQkJCWJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24gPSBWZWN0b3IzLkxlcnAoYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbiwgQ29uc3RyYWludFBvcyhidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uKSwgMy4wZik7CgkJCQlpZiAoSW5CYXNlQm91bmRhcnkoYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbikpIG1fcmV2aXNDYW1wb3MgPSBWZWN0b3IzLnplcm87CgkJCX0KCgkJfQoKCQlpZiAoSW5wdXQuR2V0S2V5RG93bigic3BhY2UiKSkKCQl7CgkJCUJ1aWxkTW9kZSA9ICFidWlsZE1vZGU7CgkJCS8vVUlIdWRDYW52YXMuSW5zdGFuY2UuYnV0dG9uLnRyYW5zZm9ybS5wb3NpdGlvbiA9IENhbWVyYS5tYWluLldvcmxkVG9TY3JlZW5Qb2ludChDdXJIZXJvLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJfQoKCQkvLyBpZiAoSW5wdXQuR2V0S2V5RG93bihLZXlDb2RlLlJldHVybikpCgkJLy8gewoJCS8vIAlMb2NhbE5hdk1lc2hCdWlsZGVyIGJ1aWxkZXIgPSBHZXRDb21wb25lbnQ8TG9jYWxOYXZNZXNoQnVpbGRlcj4oKTsKCgkJLy8gCUdhbWVPYmplY3Qgb2JqID0gSW5zdGFudGlhdGUoUmVzb3VyY2VzLkxvYWQoImJ1aWxkaW5nX2hvdGVsIiksIGJ1aWxkZXIuR2V0TmF2TWVzaFJhbmRvbVBvcyhnYW1lT2JqZWN0KSwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKSBhcyBHYW1lT2JqZWN0OwoJCS8vIAkvL0dhbWVPYmplY3Qgb2JqID0gSW5zdGFudGlhdGUocHJlZmFiLCBidWlsZGVyLkdldE5hdk1lc2hSYW5kb21Qb3MoZ2FtZU9iamVjdCksIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSkgYXMgR2FtZU9iamVjdDsKCQkvLyAJRGVidWcuTG9nKCJidWlsZCBhdCA6IiArIG9iai50cmFuc2Zvcm0ucG9zaXRpb24pOwoJCS8vIH0KCQlpZiAoSW5wdXQuR2V0S2V5RG93bihLZXlDb2RlLlJldHVybikpCgkJewoJCQlDdXJIZXJvLkJhc2VBSS5CYWNrKDUuMGYpOwoJCX0KCgkJZmxvYXQgbW91c2VXaGVlbCA9IElucHV0LkdldEF4aXMoIk1vdXNlIFNjcm9sbFdoZWVsIik7CgkJaWYgKCFNYXRoZi5BcHByb3hpbWF0ZWx5KG1vdXNlV2hlZWwsIDAuMGYpKQoJCXsKCQkJVmVjdG9yMyB2aWV3ID0gQ2FtZXJhLm1haW4uU2NyZWVuVG9WaWV3cG9ydFBvaW50KElucHV0Lm1vdXNlUG9zaXRpb24pOwoJCQlpZiAodmlldy54ID4gMGYgJiYgdmlldy54IDwgMWYgJiYgdmlldy55ID4gMGYgJiYgdmlldy55IDwgMWYpCgkJCQlDYW1lcmFDdHJsLlpvb20oLW1vdXNlV2hlZWwgKiBUaW1lLmRlbHRhVGltZSAqIDIwLjBmKTsKCQl9Cgl9CgoJcHVibGljIHN0YXRpYyB2b2lkIFN0YXJ0V2FpdEFjdGlvbihmbG9hdCB3YWl0VGltZSwgQWN0aW9uIGFjdGlvbikKCXsKCQlJbnN0YW5jZS5TdGFydENvcm91dGluZShJbnN0YW5jZS5XYWl0QWN0aW9uKHdhaXRUaW1lLCBhY3Rpb24pKTsKCX0KCUlFbnVtZXJhdG9yIFdhaXRBY3Rpb24oZmxvYXQgd2FpdFRpbWUsIEFjdGlvbiBhY3Rpb24pCgl7CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcyh3YWl0VGltZSk7CgkJYWN0aW9uPy5JbnZva2UoKTsKCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgU3RhcnROZXh0RnJhbWVBY3Rpb24oQWN0aW9uIGFjdGlvbikKCXsKCQlJbnN0YW5jZS5TdGFydENvcm91dGluZShJbnN0YW5jZS5OZXh0RnJhbWVBY3Rpb24oYWN0aW9uKSk7Cgl9CglJRW51bWVyYXRvciBOZXh0RnJhbWVBY3Rpb24oQWN0aW9uIGFjdGlvbikKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JOZXh0RnJhbWVVbml0KCk7CgkJYWN0aW9uPy5JbnZva2UoKTsKCX0KCglib29sIEluQmFzZUJvdW5kYXJ5KFZlY3RvcjMgcG9zKQoJewoJCXJldHVybiBwb3MueCA+IGJhc2VCb3VuZGFyeV9MQi54ICYmIHBvcy54IDwgYmFzZUJvdW5kYXJ5X1JULngKCQkJCSYmIHBvcy56ID4gYmFzZUJvdW5kYXJ5X0xCLnkgJiYgcG9zLnogPCBiYXNlQm91bmRhcnlfUlQueTsKCX0KCglWZWN0b3IzIENvbnN0cmFpbnRQb3MoVmVjdG9yMyBzb3VyY2VQb3MpCgl7CgkJVmVjdG9yMyBwb3MgPSBzb3VyY2VQb3M7CgkJaWYgKHBvcy54IDwgYmFzZUJvdW5kYXJ5X0xCLngpIHBvcy54ID0gYmFzZUJvdW5kYXJ5X0xCLng7CgkJaWYgKHBvcy54ID4gYmFzZUJvdW5kYXJ5X1JULngpIHBvcy54ID0gYmFzZUJvdW5kYXJ5X1JULng7CgkJaWYgKHBvcy56IDwgYmFzZUJvdW5kYXJ5X0xCLnkpIHBvcy56ID0gYmFzZUJvdW5kYXJ5X0xCLnk7CgkJaWYgKHBvcy56ID4gYmFzZUJvdW5kYXJ5X1JULnkpIHBvcy56ID0gYmFzZUJvdW5kYXJ5X1JULnk7CgkJcmV0dXJuIHBvczsKCX0KCXB1YmxpYyBzdGF0aWMgc3RyaW5nIFNjZW5lQm94SW5mbyhHYW1lT2JqZWN0IHNjZW5lQm94LCBib29sIGRpc3BsYXkpCgl7CgkJaWYgKCFzY2VuZUJveCkgcmV0dXJuIGRpc3BsYXkgPyAi56m65ZywIiA6ICJibGFuayI7CgkJc3RyaW5nIHNjZW5lVGFnID0gc2NlbmVCb3gudGFnOwoJCXN3aXRjaCAoc2NlbmVUYWcpCgkJewoJCQljYXNlICJyb2FkIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIumBk+i3ryIgOiBzY2VuZVRhZzsKCQkJY2FzZSAiYnVpbGRpbmciOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bu6562ROiIgKyBzY2VuZUJveCA6IHNjZW5lVGFnOwoJCQljYXNlICJwaXQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5Z2ROiIgKyBzY2VuZUJveCA6IHNjZW5lVGFnOwoJCQljYXNlICJtb3VudCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlsbHkvZM6IiA6IHNjZW5lVGFnOwoJCQljYXNlICJucGMiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAibnBjOiIgKyBzY2VuZUJveCA6IHNjZW5lVGFnOwoJCQljYXNlICJjcmVhdGVyIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuW7uumAoOS4rS4uLiIgOiBzY2VuZVRhZzsKCQkJZGVmYXVsdDoKCQkJCWJyZWFrOwoJCX0KCQlyZXR1cm4gZGlzcGxheSA/ICLnqbrlnLAiIDogImJsYW5rIjsKCX0KfQoAAAAAAAAAAOIfAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAgIAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENpbmVtYWNoaW5lOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpwdWJsaWMgY2xhc3MgR2FtZU1hbmFnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgR2FtZU1hbmFnZXIgSW5zdGFuY2U7CglwdWJsaWMgc3RhdGljIExvcmREYXRhIExvcmQgPT4gSW5zdGFuY2UuR2V0Q29tcG9uZW50PExvcmREYXRhPigpOwoJcHVibGljIHN0YXRpYyBDaGFyYWN0ZXIgQ3VySGVybzsKCXB1YmxpYyBzdGF0aWMgU3RvcnlMaXN0ZW5lciBTdG9yeUxpc3RlbmVyID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxTdG9yeUxpc3RlbmVyPigpOwoJcHVibGljIHN0YXRpYyBHYW1lR29hbFN5c3RlbSBHYW1lR29hbCA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8R2FtZUdvYWxTeXN0ZW0+KCk7CglwdWJsaWMgc3RhdGljIExldmVsU3lzdGVtIEdhbWVMZXZlbCA9PiBJbnN0YW5jZS5tX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBVSU1hbmFnZXIgR2FtZVVJOwoJcHVibGljIHN0YXRpYyBLZXlWYWx1ZURhdGEgQ29uZmlnID0+IEluc3RhbmNlLkRlbW9EYXRhOwoJcHVibGljIExpZ2h0TWFuYWdlciBEYXlOaWdodDsKCXB1YmxpYyBDaW5lbWFjaGluZVZpcnR1YWxDYW1lcmEgVkNhbWVyYTsKCXB1YmxpYyBDYW1lcmFDb250cm9sbGVyIENhbWVyYUN0cmw7CglwdWJsaWMgU0ZYTWFuYWdlciBTRlhNYW5hZ2VyOwoJcHVibGljIFRlcnJhaW5Ub29sIFRlcnJhaW5Ub29sOwoJcHVibGljIFRyYW5zZm9ybSBidWlsZE1vZGVGb2xsb3c7CglMZXZlbFN5c3RlbSBtX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBHYW1lT2JqZWN0IEN1cnJlbnRTbGVjdGVkCgl7CgkJZ2V0IHsgcmV0dXJuIG1fQ3VycmVudFNlbGVjdGVkOyB9CgkJc2V0CgkJewoJCQltX0N1cnJlbnRTZWxlY3RlZD8uR2V0Q29tcG9uZW50PEhpZ2hsaWdodGFibGVPYmplY3Q+KCk/LkRlaGlnaGxpZ2h0KCk7CgkJCW1fQ3VycmVudFNlbGVjdGVkID0gdmFsdWU7CgkJCW1fQ3VycmVudFNlbGVjdGVkPy5HZXRDb21wb25lbnQ8SGlnaGxpZ2h0YWJsZU9iamVjdD4oKT8uSGlnaGxpZ2h0KCk7CgkJCUhlbHBlcnMuTG9nKEluc3RhbmNlLCAiUGlja09iamVjdCIsICJ0YXJnZXQ9ICIgKyBtX0N1cnJlbnRTZWxlY3RlZC5uYW1lKTsKCQl9Cgl9CglwdWJsaWMgTGlzdDxGb3JtdWxhRGF0YT4gZm9ybXVsYXM7CglwdWJsaWMgTGlzdDxTcGF3bmVyPiBzcGF3bmVyczsKCXB1YmxpYyBMZXZlbERhdGEgc3RhcnRMZXZlbDsKCXN0YXRpYyBHYW1lT2JqZWN0IG1fQ3VycmVudFNlbGVjdGVkOwoKCXB1YmxpYyBzdGF0aWMgYm9vbCBCdWlsZE1vZGUKCXsKCQlnZXQgeyByZXR1cm4gYnVpbGRNb2RlOyB9CgkJc2V0CgkJewoJCQlidWlsZE1vZGUgPSB2YWx1ZTsKCQkJR2FtZU1hbmFnZXIuR2FtZVVJLkpveVN0aWNrLmVuYWJsZWQgPSAhdmFsdWU7CgkJCUluc3RhbmNlLmJ1aWxkTW9kZUZvbGxvdy5wb3NpdGlvbiA9IEN1ckhlcm8udHJhbnNmb3JtLnBvc2l0aW9uOwoJCQlpZiAodmFsdWUpCgkJCXsKCQkJCUluc3RhbmNlLkNhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuQlVJTEQpOwoJCQkJR2FtZU1hbmFnZXIuQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklOQUNUSVZFKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCUluc3RhbmNlLkNhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuUlBHKTsKCQkJCUdhbWVNYW5hZ2VyLkN1ckhlcm8uQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JRExFKTsKCQkJfQoJCX0KCX0KCXB1YmxpYyBzdGF0aWMgYm9vbCBidWlsZE1vZGU7CgoJcHVibGljIHN0YXRpYyB2b2lkIFNldFN0b3J5TW9kZWwoYm9vbCBhY3RpdmUsIEFjdGlvbiBhY3Rpb24gPSBudWxsKQoJewoJCWlmIChzdG9yeU1vZGUgPT0gYWN0aXZlKSB7IGFjdGlvbj8uSW52b2tlKCk7IHJldHVybjsgfQoJCXN0b3J5TW9kZSA9IGFjdGl2ZTsKCQlHYW1lVUkuSm95U3RpY2suZW5hYmxlZCA9ICFhY3RpdmU7CgkJaWYgKGFjdGl2ZSkKCQl7CgkJCUluc3RhbmNlLkNhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuU1RPUlksIGFjdGlvbik7CgkJCUN1ckhlcm8uQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JTkFDVElWRSk7CgkJfQoJCWVsc2UKCQl7CgkJCUluc3RhbmNlLkNhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuUlBHLCBhY3Rpb24pOwoJCQlDdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSURMRSk7CgkJfQoJfQoJcHVibGljIHN0YXRpYyBib29sIHN0b3J5TW9kZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH0KCglbU2VyaWFsaXplRmllbGRdCglUcmFuc2Zvcm0gdWlfdHJhbnM7CglbU2VyaWFsaXplRmllbGRdCglUcmFuc2Zvcm0gcG9zaXRpb25fYm9ybjsKCVtTZXJpYWxpemVGaWVsZF0KCVZlY3RvcjIgYmFzZUJvdW5kYXJ5X0xCOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVmVjdG9yMiBiYXNlQm91bmRhcnlfUlQ7CglbU2VyaWFsaXplRmllbGRdCglHYW1lT2JqZWN0IHByZWZhYl9jaGFyYWN0ZXI7CglbU2VyaWFsaXplRmllbGRdCglHYW1lT2JqZWN0IHByZWZhYl9nYW1ldWk7CgoJW1NlcmlhbGl6ZUZpZWxkXQoJS2V5VmFsdWVEYXRhIERlbW9EYXRhOwoJSW52ZW50b3J5U3lzdGVtLkl0ZW1EZW1hbmQgdGVzdERlbWFuZDsKCVZlY3RvcjMgbV9kcmFnTW91c2VQb3MgPSBWZWN0b3IzLnplcm87CglWZWN0b3IzIG1fcmV2aXNDYW1wb3MgPSBWZWN0b3IzLnplcm87Cglwcml2YXRlIHZvaWQgQXdha2UoKQoJewoJCUluc3RhbmNlID0gdGhpczsKCQlMb3JkLkluaXQoKTsKCQlDdXJIZXJvID0gSW5zdGFudGlhdGUocHJlZmFiX2NoYXJhY3RlciwgcG9zaXRpb25fYm9ybi5wb3NpdGlvbiwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKS5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpOwoJCUdhbWVHb2FsLkluaXQoKTsKCQlTRlhNYW5hZ2VyLkxpc3RlbmVyVGFyZ2V0ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCQlHYW1lVUkgPSBJbnN0YW50aWF0ZShwcmVmYWJfZ2FtZXVpKS5HZXRDb21wb25lbnQ8VUlNYW5hZ2VyPigpOwoJCUdhbWVVSS50cmFuc2Zvcm0uU2V0UGFyZW50KHVpX3RyYW5zKTsKCQlWQ2FtZXJhLkZvbGxvdyA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgkJVkNhbWVyYS5Mb29rQXQgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoKCQltX2xldmVsU3lzdGVtID0gbmV3IExldmVsU3lzdGVtKCk7CgoKCQkvLyDms6jlhozlupTnlKjpgIDlh7rkuovku7YKCQlBcHBsaWNhdGlvbi5xdWl0dGluZyArPSBPbkFwcGxpY2F0aW9uUXVpdDsKCQlRdWFsaXR5U2V0dGluZ3MudlN5bmNDb3VudCA9IDA7CgkJQXBwbGljYXRpb24udGFyZ2V0RnJhbWVSYXRlID0gNjA7Cgl9CgoJdm9pZCBTdGFydCgpCgl7CgkJUmVzSW52ZW50b3J5SXRlbSBtb25leUludmVudG9yeSA9IEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxJdGVtPihHYW1lTWFuYWdlci5Db25maWcuSXRlbSwgIlJlc0ludmVudG9yeV9Nb25leSIpIGFzIFJlc0ludmVudG9yeUl0ZW07CgkJaWYgKG1vbmV5SW52ZW50b3J5KSBHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeS5SZXNJbnZlbnRvcmllcy5BZGQoUmVzSXRlbS5SZXNUeXBlLk1vbmV5LCBuZXcgSW52ZW50b3J5U3lzdGVtLlJlc0ludmVudG9yeShtb25leUludmVudG9yeSkpOwoJCUdhbWVVSS5PcGVuV2luZG93KCJ3aW5NYWluIik7Cgl9CgoJdm9pZCBPbkFwcGxpY2F0aW9uUXVpdCgpCgl7CgkJSGVscGVycy5Mb2codGhpcywgIkFwcGxpY2F0aW9uUXVpdCIpOwoJCVRlcnJhaW5Ub29sLlJlc2V0VGVycmFpbkRhdGEoKTsKCX0KCglwcml2YXRlIHZvaWQgVXBkYXRlKCkKCXsKCQlpZiAoYnVpbGRNb2RlKQoJCXsKCQkJaWYgKElucHV0LkdldE1vdXNlQnV0dG9uRG93bigwKSkKCQkJewoJCQkJbV9kcmFnTW91c2VQb3MgPSBJbnB1dC5tb3VzZVBvc2l0aW9uOwoJCQkJUmF5IHJheSA9IENhbWVyYS5tYWluLlNjcmVlblBvaW50VG9SYXkoSW5wdXQubW91c2VQb3NpdGlvbik7CgkJCQlSYXljYXN0SGl0IGhpdDsKCgkJCQkvLyDlpoLmnpzlsITnur/kuI7niankvZPnorDmkp4KCQkJCWlmIChQaHlzaWNzLlJheWNhc3QocmF5LCBvdXQgaGl0LCBNYXRoZi5JbmZpbml0eSwgTGF5ZXJNYXNrLkdldE1hc2sobmV3IHN0cmluZ1tdIHsgIkN1ckhlcm8iLCAiRW5lbXkiLCAiTmV1dHJhbCIsICJJbnRlcmFjdGFibGUiIH0pKSkKCQkJCXsKCQkJCQlDdXJyZW50U2xlY3RlZCA9IGhpdC5jb2xsaWRlci5nYW1lT2JqZWN0OwoJCQkJfQoJCQl9CgkJCWVsc2UgaWYgKElucHV0LkdldE1vdXNlQnV0dG9uVXAoMCkpCgkJCXsKCQkJCW1fZHJhZ01vdXNlUG9zID0gVmVjdG9yMy56ZXJvOwoJCQl9CgkJCWVsc2UgaWYgKElucHV0LkdldE1vdXNlQnV0dG9uKDApKQoJCQl7CgkJCQlWZWN0b3IzIGRpcmVjdGlvbiA9IElucHV0Lm1vdXNlUG9zaXRpb24gLSBtX2RyYWdNb3VzZVBvczsKCQkJCWlmIChkaXJlY3Rpb24ubWFnbml0dWRlID4gMCkKCQkJCXsKCQkJCQlWZWN0b3IzIHRyYW5zUG9zID0gYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbiAtIG5ldyBWZWN0b3IzKGRpcmVjdGlvbi54LCAwLCBkaXJlY3Rpb24ueSkgKiAxLjBmICogVGltZS5kZWx0YVRpbWU7CgkJCQkJaWYgKCFJbkJhc2VCb3VuZGFyeSh0cmFuc1BvcykpIHRyYW5zUG9zID0gYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbiAtIG5ldyBWZWN0b3IzKGRpcmVjdGlvbi54LCAwLCBkaXJlY3Rpb24ueSkgKiAwLjFmICogVGltZS5kZWx0YVRpbWU7CgkJCQkJYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbiA9IHRyYW5zUG9zOwoJCQkJCW1fZHJhZ01vdXNlUG9zID0gSW5wdXQubW91c2VQb3NpdGlvbjsKCQkJCQkvL0hlbHBlcnMuTG9nKHRoaXMsICJNb3VzZURyYWciLCAkImZyb217bV9kcmFnTW91c2VQb3N9VG97SW5wdXQubW91c2VQb3NpdGlvbn0tPntkaXJlY3Rpb24ubWFnbml0dWRlfSIpOwoJCQkJfQoJCQl9CgkJCWVsc2UgaWYgKCFJbkJhc2VCb3VuZGFyeShidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uKSkKCQkJewoJCQkJYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbiA9IFZlY3RvcjMuTGVycChidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uLCBDb25zdHJhaW50UG9zKGJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24pLCAzLjBmKTsKCQkJCWlmIChJbkJhc2VCb3VuZGFyeShidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uKSkgbV9yZXZpc0NhbXBvcyA9IFZlY3RvcjMuemVybzsKCQkJfQoKCQl9CgoJCWlmIChJbnB1dC5HZXRLZXlEb3duKCJzcGFjZSIpKQoJCXsKCQkJQnVpbGRNb2RlID0gIWJ1aWxkTW9kZTsKCQkJLy9VSUh1ZENhbnZhcy5JbnN0YW5jZS5idXR0b24udHJhbnNmb3JtLnBvc2l0aW9uID0gQ2FtZXJhLm1haW4uV29ybGRUb1NjcmVlblBvaW50KEN1ckhlcm8udHJhbnNmb3JtLnBvc2l0aW9uKTsKCQl9CgoJCS8vIGlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQkvLyB7CgkJLy8gCUxvY2FsTmF2TWVzaEJ1aWxkZXIgYnVpbGRlciA9IEdldENvbXBvbmVudDxMb2NhbE5hdk1lc2hCdWlsZGVyPigpOwoKCQkvLyAJR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShSZXNvdXJjZXMuTG9hZCgiYnVpbGRpbmdfaG90ZWwiKSwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCS8vR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShwcmVmYWIsIGJ1aWxkZXIuR2V0TmF2TWVzaFJhbmRvbVBvcyhnYW1lT2JqZWN0KSwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKSBhcyBHYW1lT2JqZWN0OwoJCS8vIAlEZWJ1Zy5Mb2coImJ1aWxkIGF0IDoiICsgb2JqLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJLy8gfQoJCWlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQl7CgkJCUN1ckhlcm8uQmFzZUFJLkJhY2soNS4wZik7CgkJfQoKCQlmbG9hdCBtb3VzZVdoZWVsID0gSW5wdXQuR2V0QXhpcygiTW91c2UgU2Nyb2xsV2hlZWwiKTsKCQlpZiAoIU1hdGhmLkFwcHJveGltYXRlbHkobW91c2VXaGVlbCwgMC4wZikpCgkJewoJCQlWZWN0b3IzIHZpZXcgPSBDYW1lcmEubWFpbi5TY3JlZW5Ub1ZpZXdwb3J0UG9pbnQoSW5wdXQubW91c2VQb3NpdGlvbik7CgkJCWlmICh2aWV3LnggPiAwZiAmJiB2aWV3LnggPCAxZiAmJiB2aWV3LnkgPiAwZiAmJiB2aWV3LnkgPCAxZikKCQkJCUNhbWVyYUN0cmwuWm9vbSgtbW91c2VXaGVlbCAqIFRpbWUuZGVsdGFUaW1lICogMjAuMGYpOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgU3RhcnRXYWl0QWN0aW9uKGZsb2F0IHdhaXRUaW1lLCBBY3Rpb24gYWN0aW9uKQoJewoJCUluc3RhbmNlLlN0YXJ0Q29yb3V0aW5lKEluc3RhbmNlLldhaXRBY3Rpb24od2FpdFRpbWUsIGFjdGlvbikpOwoJfQoJSUVudW1lcmF0b3IgV2FpdEFjdGlvbihmbG9hdCB3YWl0VGltZSwgQWN0aW9uIGFjdGlvbikKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHdhaXRUaW1lKTsKCQlhY3Rpb24/Lkludm9rZSgpOwoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTdGFydE5leHRGcmFtZUFjdGlvbihBY3Rpb24gYWN0aW9uKQoJewoJCUluc3RhbmNlLlN0YXJ0Q29yb3V0aW5lKEluc3RhbmNlLk5leHRGcmFtZUFjdGlvbihhY3Rpb24pKTsKCX0KCUlFbnVtZXJhdG9yIE5leHRGcmFtZUFjdGlvbihBY3Rpb24gYWN0aW9uKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvck5leHRGcmFtZVVuaXQoKTsKCQlhY3Rpb24/Lkludm9rZSgpOwoJfQoKCWJvb2wgSW5CYXNlQm91bmRhcnkoVmVjdG9yMyBwb3MpCgl7CgkJcmV0dXJuIHBvcy54ID4gYmFzZUJvdW5kYXJ5X0xCLnggJiYgcG9zLnggPCBiYXNlQm91bmRhcnlfUlQueAoJCQkJJiYgcG9zLnogPiBiYXNlQm91bmRhcnlfTEIueSAmJiBwb3MueiA8IGJhc2VCb3VuZGFyeV9SVC55OwoJfQoKCVZlY3RvcjMgQ29uc3RyYWludFBvcyhWZWN0b3IzIHNvdXJjZVBvcykKCXsKCQlWZWN0b3IzIHBvcyA9IHNvdXJjZVBvczsKCQlpZiAocG9zLnggPCBiYXNlQm91bmRhcnlfTEIueCkgcG9zLnggPSBiYXNlQm91bmRhcnlfTEIueDsKCQlpZiAocG9zLnggPiBiYXNlQm91bmRhcnlfUlQueCkgcG9zLnggPSBiYXNlQm91bmRhcnlfUlQueDsKCQlpZiAocG9zLnogPCBiYXNlQm91bmRhcnlfTEIueSkgcG9zLnogPSBiYXNlQm91bmRhcnlfTEIueTsKCQlpZiAocG9zLnogPiBiYXNlQm91bmRhcnlfUlQueSkgcG9zLnogPSBiYXNlQm91bmRhcnlfUlQueTsKCQlyZXR1cm4gcG9zOwoJfQoJcHVibGljIHN0YXRpYyBzdHJpbmcgU2NlbmVCb3hJbmZvKEdhbWVPYmplY3Qgc2NlbmVCb3gsIGJvb2wgZGlzcGxheSkKCXsKCQlpZiAoIXNjZW5lQm94KSByZXR1cm4gZGlzcGxheSA/ICLnqbrlnLAiIDogImJsYW5rIjsKCQlzdHJpbmcgc2NlbmVUYWcgPSBzY2VuZUJveC50YWc7CgkJc3dpdGNoIChzY2VuZVRhZykKCQl7CgkJCWNhc2UgInJvYWQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi6YGT6LevIiA6IHNjZW5lVGFnOwoJCQljYXNlICJidWlsZGluZyI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlu7rnrZE6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgInBpdCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlnZE6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgIm1vdW50IjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuWxseS9kzoiIDogc2NlbmVUYWc7CgkJCWNhc2UgIm5wYyI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICJucGM6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgImNyZWF0ZXIiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bu66YCg5LitLi4uIiA6IHNjZW5lVGFnOwoJCQlkZWZhdWx0OgoJCQkJYnJlYWs7CgkJfQoJCXJldHVybiBkaXNwbGF5ID8gIuepuuWcsCIgOiAiYmxhbmsiOwoJfQp9CgAAAAAAAAAACSAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABHIAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENpbmVtYWNoaW5lOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpwdWJsaWMgY2xhc3MgR2FtZU1hbmFnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgR2FtZU1hbmFnZXIgSW5zdGFuY2U7CglwdWJsaWMgc3RhdGljIExvcmREYXRhIExvcmQgPT4gSW5zdGFuY2UuR2V0Q29tcG9uZW50PExvcmREYXRhPigpOwoJcHVibGljIHN0YXRpYyBDaGFyYWN0ZXIgQ3VySGVybzsKCXB1YmxpYyBzdGF0aWMgU3RvcnlMaXN0ZW5lciBTdG9yeUxpc3RlbmVyID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxTdG9yeUxpc3RlbmVyPigpOwoJcHVibGljIHN0YXRpYyBHYW1lR29hbFN5c3RlbSBHYW1lR29hbCA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8R2FtZUdvYWxTeXN0ZW0+KCk7CglwdWJsaWMgc3RhdGljIExldmVsU3lzdGVtIEdhbWVMZXZlbCA9PiBJbnN0YW5jZS5tX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBVSU1hbmFnZXIgR2FtZVVJOwoJcHVibGljIHN0YXRpYyBLZXlWYWx1ZURhdGEgQ29uZmlnID0+IEluc3RhbmNlLkRlbW9EYXRhOwoJcHVibGljIExpZ2h0TWFuYWdlciBEYXlOaWdodDsKCXB1YmxpYyBDaW5lbWFjaGluZVZpcnR1YWxDYW1lcmEgVkNhbWVyYTsKCXB1YmxpYyBDYW1lcmFDb250cm9sbGVyIENhbWVyYUN0cmw7CglwdWJsaWMgU0ZYTWFuYWdlciBTRlhNYW5hZ2VyOwoJcHVibGljIFRlcnJhaW5Ub29sIFRlcnJhaW5Ub29sOwoJcHVibGljIFRyYW5zZm9ybSBidWlsZE1vZGVGb2xsb3c7CglMZXZlbFN5c3RlbSBtX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBHYW1lT2JqZWN0IEN1cnJlbnRTbGVjdGVkCgl7CgkJZ2V0IHsgcmV0dXJuIG1fQ3VycmVudFNlbGVjdGVkOyB9CgkJc2V0CgkJewoJCQltX0N1cnJlbnRTZWxlY3RlZD8uR2V0Q29tcG9uZW50PEhpZ2hsaWdodGFibGVPYmplY3Q+KCk/LkRlaGlnaGxpZ2h0KCk7CgkJCW1fQ3VycmVudFNlbGVjdGVkID0gdmFsdWU7CgkJCW1fQ3VycmVudFNlbGVjdGVkPy5HZXRDb21wb25lbnQ8SGlnaGxpZ2h0YWJsZU9iamVjdD4oKT8uSGlnaGxpZ2h0KCk7CgkJCUhlbHBlcnMuTG9nKEluc3RhbmNlLCAiUGlja09iamVjdCIsICJ0YXJnZXQ9ICIgKyBtX0N1cnJlbnRTZWxlY3RlZC5uYW1lKTsKCQl9Cgl9CglwdWJsaWMgTGlzdDxGb3JtdWxhRGF0YT4gZm9ybXVsYXM7CglwdWJsaWMgTGlzdDxTcGF3bmVyPiBzcGF3bmVyczsKCXB1YmxpYyBMZXZlbERhdGEgc3RhcnRMZXZlbDsKCXN0YXRpYyBHYW1lT2JqZWN0IG1fQ3VycmVudFNlbGVjdGVkOwoKCXB1YmxpYyBzdGF0aWMgYm9vbCBCdWlsZE1vZGUKCXsKCQlnZXQgeyByZXR1cm4gYnVpbGRNb2RlOyB9CgkJc2V0CgkJewoJCQlidWlsZE1vZGUgPSB2YWx1ZTsKCQkJR2FtZU1hbmFnZXIuR2FtZVVJLkpveVN0aWNrLmVuYWJsZWQgPSAhdmFsdWU7CgkJCUluc3RhbmNlLmJ1aWxkTW9kZUZvbGxvdy5wb3NpdGlvbiA9IEN1ckhlcm8udHJhbnNmb3JtLnBvc2l0aW9uOwoJCQlpZiAodmFsdWUpCgkJCXsKCQkJCUluc3RhbmNlLkNhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuQlVJTEQpOwoJCQkJR2FtZU1hbmFnZXIuQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklOQUNUSVZFKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCUluc3RhbmNlLkNhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuUlBHKTsKCQkJCUdhbWVNYW5hZ2VyLkN1ckhlcm8uQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JRExFKTsKCQkJfQoJCX0KCX0KCXB1YmxpYyBzdGF0aWMgYm9vbCBidWlsZE1vZGU7CgoJcHVibGljIHN0YXRpYyB2b2lkIFNldFN0b3J5TW9kZWwoYm9vbCBhY3RpdmUsIEFjdGlvbiBhY3Rpb24gPSBudWxsKQoJewoJCWlmIChzdG9yeU1vZGUgPT0gYWN0aXZlKSB7IGFjdGlvbj8uSW52b2tlKCk7IHJldHVybjsgfQoJCXN0b3J5TW9kZSA9IGFjdGl2ZTsKCQlHYW1lVUkuSm95U3RpY2suZW5hYmxlZCA9ICFhY3RpdmU7CgkJaWYgKGFjdGl2ZSkKCQl7CgkJCUluc3RhbmNlLkNhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuU1RPUlksIGFjdGlvbik7CgkJCUN1ckhlcm8uQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JTkFDVElWRSk7CgkJfQoJCWVsc2UKCQl7CgkJCUluc3RhbmNlLkNhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuUlBHLCBhY3Rpb24pOwoJCQlDdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSURMRSk7CgkJfQoJfQoJcHVibGljIHN0YXRpYyBib29sIHN0b3J5TW9kZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH0KCglbU2VyaWFsaXplRmllbGRdCglUcmFuc2Zvcm0gdWlfdHJhbnM7CglbU2VyaWFsaXplRmllbGRdCglUcmFuc2Zvcm0gcG9zaXRpb25fYm9ybjsKCVtTZXJpYWxpemVGaWVsZF0KCVZlY3RvcjIgYmFzZUJvdW5kYXJ5X0xCOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVmVjdG9yMiBiYXNlQm91bmRhcnlfUlQ7CglbU2VyaWFsaXplRmllbGRdCglHYW1lT2JqZWN0IHByZWZhYl9jaGFyYWN0ZXI7CglbU2VyaWFsaXplRmllbGRdCglHYW1lT2JqZWN0IHByZWZhYl9nYW1ldWk7CgoJW1NlcmlhbGl6ZUZpZWxkXQoJS2V5VmFsdWVEYXRhIERlbW9EYXRhOwoJSW52ZW50b3J5U3lzdGVtLkl0ZW1EZW1hbmQgdGVzdERlbWFuZDsKCVZlY3RvcjMgbV9kcmFnTW91c2VQb3MgPSBWZWN0b3IzLnplcm87CglWZWN0b3IzIG1fcmV2aXNDYW1wb3MgPSBWZWN0b3IzLnplcm87Cglwcml2YXRlIHZvaWQgQXdha2UoKQoJewoJCUluc3RhbmNlID0gdGhpczsKCQlMb3JkLkluaXQoKTsKCQlDdXJIZXJvID0gSW5zdGFudGlhdGUocHJlZmFiX2NoYXJhY3RlciwgcG9zaXRpb25fYm9ybi5wb3NpdGlvbiwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKS5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpOwoJCUdhbWVHb2FsLkluaXQoKTsKCQlTRlhNYW5hZ2VyLkxpc3RlbmVyVGFyZ2V0ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCQlHYW1lVUkgPSBJbnN0YW50aWF0ZShwcmVmYWJfZ2FtZXVpKS5HZXRDb21wb25lbnQ8VUlNYW5hZ2VyPigpOwoJCUdhbWVVSS50cmFuc2Zvcm0uU2V0UGFyZW50KHVpX3RyYW5zKTsKCQlWQ2FtZXJhLkZvbGxvdyA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgkJVkNhbWVyYS5Mb29rQXQgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoKCQltX2xldmVsU3lzdGVtID0gbmV3IExldmVsU3lzdGVtKCk7CgoKCQkvLyDms6jlhozlupTnlKjpgIDlh7rkuovku7YKCQlBcHBsaWNhdGlvbi5xdWl0dGluZyArPSBPbkFwcGxpY2F0aW9uUXVpdDsKCQlRdWFsaXR5U2V0dGluZ3MudlN5bmNDb3VudCA9IDA7CgkJQXBwbGljYXRpb24udGFyZ2V0RnJhbWVSYXRlID0gNjA7Cgl9CgoJdm9pZCBTdGFydCgpCgl7CgkJUmVzSW52ZW50b3J5SXRlbSBtb25leUludmVudG9yeSA9IEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxJdGVtPihHYW1lTWFuYWdlci5Db25maWcuSXRlbSwgIlJlc0ludmVudG9yeV9Nb25leSIpIGFzIFJlc0ludmVudG9yeUl0ZW07CgkJaWYgKG1vbmV5SW52ZW50b3J5KSBHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeS5SZXNJbnZlbnRvcmllcy5BZGQoUmVzSXRlbS5SZXNUeXBlLk1vbmV5LCBuZXcgSW52ZW50b3J5U3lzdGVtLlJlc0ludmVudG9yeShtb25leUludmVudG9yeSkpOwoJCUdhbWVVSS5PcGVuV2luZG93KCJ3aW5NYWluIik7CgkJR2FtZVVJLk9wZW5XaW5kb3coIndpbkxldmVsU2VsZWN0Iik7Cgl9CgoJdm9pZCBPbkFwcGxpY2F0aW9uUXVpdCgpCgl7CgkJSGVscGVycy5Mb2codGhpcywgIkFwcGxpY2F0aW9uUXVpdCIpOwoJCVRlcnJhaW5Ub29sLlJlc2V0VGVycmFpbkRhdGEoKTsKCX0KCglwcml2YXRlIHZvaWQgVXBkYXRlKCkKCXsKCQlpZiAoYnVpbGRNb2RlKQoJCXsKCQkJaWYgKElucHV0LkdldE1vdXNlQnV0dG9uRG93bigwKSkKCQkJewoJCQkJbV9kcmFnTW91c2VQb3MgPSBJbnB1dC5tb3VzZVBvc2l0aW9uOwoJCQkJUmF5IHJheSA9IENhbWVyYS5tYWluLlNjcmVlblBvaW50VG9SYXkoSW5wdXQubW91c2VQb3NpdGlvbik7CgkJCQlSYXljYXN0SGl0IGhpdDsKCgkJCQkvLyDlpoLmnpzlsITnur/kuI7niankvZPnorDmkp4KCQkJCWlmIChQaHlzaWNzLlJheWNhc3QocmF5LCBvdXQgaGl0LCBNYXRoZi5JbmZpbml0eSwgTGF5ZXJNYXNrLkdldE1hc2sobmV3IHN0cmluZ1tdIHsgIkN1ckhlcm8iLCAiRW5lbXkiLCAiTmV1dHJhbCIsICJJbnRlcmFjdGFibGUiIH0pKSkKCQkJCXsKCQkJCQlDdXJyZW50U2xlY3RlZCA9IGhpdC5jb2xsaWRlci5nYW1lT2JqZWN0OwoJCQkJfQoJCQl9CgkJCWVsc2UgaWYgKElucHV0LkdldE1vdXNlQnV0dG9uVXAoMCkpCgkJCXsKCQkJCW1fZHJhZ01vdXNlUG9zID0gVmVjdG9yMy56ZXJvOwoJCQl9CgkJCWVsc2UgaWYgKElucHV0LkdldE1vdXNlQnV0dG9uKDApKQoJCQl7CgkJCQlWZWN0b3IzIGRpcmVjdGlvbiA9IElucHV0Lm1vdXNlUG9zaXRpb24gLSBtX2RyYWdNb3VzZVBvczsKCQkJCWlmIChkaXJlY3Rpb24ubWFnbml0dWRlID4gMCkKCQkJCXsKCQkJCQlWZWN0b3IzIHRyYW5zUG9zID0gYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbiAtIG5ldyBWZWN0b3IzKGRpcmVjdGlvbi54LCAwLCBkaXJlY3Rpb24ueSkgKiAxLjBmICogVGltZS5kZWx0YVRpbWU7CgkJCQkJaWYgKCFJbkJhc2VCb3VuZGFyeSh0cmFuc1BvcykpIHRyYW5zUG9zID0gYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbiAtIG5ldyBWZWN0b3IzKGRpcmVjdGlvbi54LCAwLCBkaXJlY3Rpb24ueSkgKiAwLjFmICogVGltZS5kZWx0YVRpbWU7CgkJCQkJYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbiA9IHRyYW5zUG9zOwoJCQkJCW1fZHJhZ01vdXNlUG9zID0gSW5wdXQubW91c2VQb3NpdGlvbjsKCQkJCQkvL0hlbHBlcnMuTG9nKHRoaXMsICJNb3VzZURyYWciLCAkImZyb217bV9kcmFnTW91c2VQb3N9VG97SW5wdXQubW91c2VQb3NpdGlvbn0tPntkaXJlY3Rpb24ubWFnbml0dWRlfSIpOwoJCQkJfQoJCQl9CgkJCWVsc2UgaWYgKCFJbkJhc2VCb3VuZGFyeShidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uKSkKCQkJewoJCQkJYnVpbGRNb2RlRm9sbG93LnRyYW5zZm9ybS5wb3NpdGlvbiA9IFZlY3RvcjMuTGVycChidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uLCBDb25zdHJhaW50UG9zKGJ1aWxkTW9kZUZvbGxvdy50cmFuc2Zvcm0ucG9zaXRpb24pLCAzLjBmKTsKCQkJCWlmIChJbkJhc2VCb3VuZGFyeShidWlsZE1vZGVGb2xsb3cudHJhbnNmb3JtLnBvc2l0aW9uKSkgbV9yZXZpc0NhbXBvcyA9IFZlY3RvcjMuemVybzsKCQkJfQoKCQl9CgoJCWlmIChJbnB1dC5HZXRLZXlEb3duKCJzcGFjZSIpKQoJCXsKCQkJQnVpbGRNb2RlID0gIWJ1aWxkTW9kZTsKCQkJLy9VSUh1ZENhbnZhcy5JbnN0YW5jZS5idXR0b24udHJhbnNmb3JtLnBvc2l0aW9uID0gQ2FtZXJhLm1haW4uV29ybGRUb1NjcmVlblBvaW50KEN1ckhlcm8udHJhbnNmb3JtLnBvc2l0aW9uKTsKCQl9CgoJCS8vIGlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQkvLyB7CgkJLy8gCUxvY2FsTmF2TWVzaEJ1aWxkZXIgYnVpbGRlciA9IEdldENvbXBvbmVudDxMb2NhbE5hdk1lc2hCdWlsZGVyPigpOwoKCQkvLyAJR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShSZXNvdXJjZXMuTG9hZCgiYnVpbGRpbmdfaG90ZWwiKSwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCS8vR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShwcmVmYWIsIGJ1aWxkZXIuR2V0TmF2TWVzaFJhbmRvbVBvcyhnYW1lT2JqZWN0KSwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKSBhcyBHYW1lT2JqZWN0OwoJCS8vIAlEZWJ1Zy5Mb2coImJ1aWxkIGF0IDoiICsgb2JqLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJLy8gfQoJCWlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQl7CgkJCUN1ckhlcm8uQmFzZUFJLkJhY2soNS4wZik7CgkJfQoKCQlmbG9hdCBtb3VzZVdoZWVsID0gSW5wdXQuR2V0QXhpcygiTW91c2UgU2Nyb2xsV2hlZWwiKTsKCQlpZiAoIU1hdGhmLkFwcHJveGltYXRlbHkobW91c2VXaGVlbCwgMC4wZikpCgkJewoJCQlWZWN0b3IzIHZpZXcgPSBDYW1lcmEubWFpbi5TY3JlZW5Ub1ZpZXdwb3J0UG9pbnQoSW5wdXQubW91c2VQb3NpdGlvbik7CgkJCWlmICh2aWV3LnggPiAwZiAmJiB2aWV3LnggPCAxZiAmJiB2aWV3LnkgPiAwZiAmJiB2aWV3LnkgPCAxZikKCQkJCUNhbWVyYUN0cmwuWm9vbSgtbW91c2VXaGVlbCAqIFRpbWUuZGVsdGFUaW1lICogMjAuMGYpOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgU3RhcnRXYWl0QWN0aW9uKGZsb2F0IHdhaXRUaW1lLCBBY3Rpb24gYWN0aW9uKQoJewoJCUluc3RhbmNlLlN0YXJ0Q29yb3V0aW5lKEluc3RhbmNlLldhaXRBY3Rpb24od2FpdFRpbWUsIGFjdGlvbikpOwoJfQoJSUVudW1lcmF0b3IgV2FpdEFjdGlvbihmbG9hdCB3YWl0VGltZSwgQWN0aW9uIGFjdGlvbikKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHdhaXRUaW1lKTsKCQlhY3Rpb24/Lkludm9rZSgpOwoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTdGFydE5leHRGcmFtZUFjdGlvbihBY3Rpb24gYWN0aW9uKQoJewoJCUluc3RhbmNlLlN0YXJ0Q29yb3V0aW5lKEluc3RhbmNlLk5leHRGcmFtZUFjdGlvbihhY3Rpb24pKTsKCX0KCUlFbnVtZXJhdG9yIE5leHRGcmFtZUFjdGlvbihBY3Rpb24gYWN0aW9uKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvck5leHRGcmFtZVVuaXQoKTsKCQlhY3Rpb24/Lkludm9rZSgpOwoJfQoKCWJvb2wgSW5CYXNlQm91bmRhcnkoVmVjdG9yMyBwb3MpCgl7CgkJcmV0dXJuIHBvcy54ID4gYmFzZUJvdW5kYXJ5X0xCLnggJiYgcG9zLnggPCBiYXNlQm91bmRhcnlfUlQueAoJCQkJJiYgcG9zLnogPiBiYXNlQm91bmRhcnlfTEIueSAmJiBwb3MueiA8IGJhc2VCb3VuZGFyeV9SVC55OwoJfQoKCVZlY3RvcjMgQ29uc3RyYWludFBvcyhWZWN0b3IzIHNvdXJjZVBvcykKCXsKCQlWZWN0b3IzIHBvcyA9IHNvdXJjZVBvczsKCQlpZiAocG9zLnggPCBiYXNlQm91bmRhcnlfTEIueCkgcG9zLnggPSBiYXNlQm91bmRhcnlfTEIueDsKCQlpZiAocG9zLnggPiBiYXNlQm91bmRhcnlfUlQueCkgcG9zLnggPSBiYXNlQm91bmRhcnlfUlQueDsKCQlpZiAocG9zLnogPCBiYXNlQm91bmRhcnlfTEIueSkgcG9zLnogPSBiYXNlQm91bmRhcnlfTEIueTsKCQlpZiAocG9zLnogPiBiYXNlQm91bmRhcnlfUlQueSkgcG9zLnogPSBiYXNlQm91bmRhcnlfUlQueTsKCQlyZXR1cm4gcG9zOwoJfQoJcHVibGljIHN0YXRpYyBzdHJpbmcgU2NlbmVCb3hJbmZvKEdhbWVPYmplY3Qgc2NlbmVCb3gsIGJvb2wgZGlzcGxheSkKCXsKCQlpZiAoIXNjZW5lQm94KSByZXR1cm4gZGlzcGxheSA/ICLnqbrlnLAiIDogImJsYW5rIjsKCQlzdHJpbmcgc2NlbmVUYWcgPSBzY2VuZUJveC50YWc7CgkJc3dpdGNoIChzY2VuZVRhZykKCQl7CgkJCWNhc2UgInJvYWQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi6YGT6LevIiA6IHNjZW5lVGFnOwoJCQljYXNlICJidWlsZGluZyI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlu7rnrZE6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgInBpdCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlnZE6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgIm1vdW50IjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuWxseS9kzoiIDogc2NlbmVUYWc7CgkJCWNhc2UgIm5wYyI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICJucGM6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgImNyZWF0ZXIiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bu66YCg5LitLi4uIiA6IHNjZW5lVGFnOwoJCQlkZWZhdWx0OgoJCQkJYnJlYWs7CgkJfQoJCXJldHVybiBkaXNwbGF5ID8gIuepuuWcsCIgOiAiYmxhbmsiOwoJfQp9CgAAAAAAAAAA6BQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					5,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAUFQAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENpbmVtYWNoaW5lOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpwdWJsaWMgY2xhc3MgR2FtZU1hbmFnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgR2FtZU1hbmFnZXIgSW5zdGFuY2U7CglwdWJsaWMgc3RhdGljIExvcmREYXRhIExvcmQgPT4gSW5zdGFuY2UuR2V0Q29tcG9uZW50PExvcmREYXRhPigpOwoJcHVibGljIHN0YXRpYyBDaGFyYWN0ZXIgQ3VySGVybzsKCXB1YmxpYyBzdGF0aWMgU3RvcnlMaXN0ZW5lciBTdG9yeUxpc3RlbmVyID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxTdG9yeUxpc3RlbmVyPigpOwoJcHVibGljIHN0YXRpYyBHYW1lR29hbFN5c3RlbSBHYW1lR29hbCA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8R2FtZUdvYWxTeXN0ZW0+KCk7CglwdWJsaWMgc3RhdGljIExldmVsU3lzdGVtIEdhbWVMZXZlbCA9PiBJbnN0YW5jZS5tX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBVSU1hbmFnZXIgR2FtZVVJOwoJcHVibGljIHN0YXRpYyBLZXlWYWx1ZURhdGEgQ29uZmlnID0+IEluc3RhbmNlLkRlbW9EYXRhOwoJcHVibGljIExpZ2h0TWFuYWdlciBEYXlOaWdodDsKCXB1YmxpYyBDaW5lbWFjaGluZVZpcnR1YWxDYW1lcmEgVkNhbWVyYTsKCXB1YmxpYyBDYW1lcmFDb250cm9sbGVyIENhbWVyYUN0cmw7CglwdWJsaWMgU0ZYTWFuYWdlciBTRlhNYW5hZ2VyOwoJcHVibGljIFRlcnJhaW5Ub29sIFRlcnJhaW5Ub29sOwoJTGV2ZWxTeXN0ZW0gbV9sZXZlbFN5c3RlbTsKCXB1YmxpYyBMaXN0PEZvcm11bGFEYXRhPiBmb3JtdWxhczsKCXB1YmxpYyBMaXN0PFNwYXduZXI+IHNwYXduZXJzOwoJcHVibGljIExldmVsRGF0YSBzdGFydExldmVsOwoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTZXRTdG9yeU1vZGVsKGJvb2wgYWN0aXZlLCBBY3Rpb24gYWN0aW9uID0gbnVsbCkKCXsKCQlpZiAoc3RvcnlNb2RlID09IGFjdGl2ZSkgeyBhY3Rpb24/Lkludm9rZSgpOyByZXR1cm47IH0KCQlzdG9yeU1vZGUgPSBhY3RpdmU7CgkJR2FtZVVJLkpveVN0aWNrLmVuYWJsZWQgPSAhYWN0aXZlOwoJCWlmIChhY3RpdmUpCgkJewoJCQlJbnN0YW5jZS5DYW1lcmFDdHJsLlNldE1vZGUoQ2FtZXJhQ29udHJvbGxlci5Nb2RlLlNUT1JZLCBhY3Rpb24pOwoJCQlDdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSU5BQ1RJVkUpOwoJCX0KCQllbHNlCgkJewoJCQlJbnN0YW5jZS5DYW1lcmFDdHJsLlNldE1vZGUoQ2FtZXJhQ29udHJvbGxlci5Nb2RlLlJQRywgYWN0aW9uKTsKCQkJQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklETEUpOwoJCX0KCX0KCXB1YmxpYyBzdGF0aWMgYm9vbCBzdG9yeU1vZGUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CgoJW1NlcmlhbGl6ZUZpZWxkXQoJVHJhbnNmb3JtIHVpX3RyYW5zOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVHJhbnNmb3JtIHBvc2l0aW9uX2Jvcm47CglbU2VyaWFsaXplRmllbGRdCglWZWN0b3IyIGJhc2VCb3VuZGFyeV9MQjsKCVtTZXJpYWxpemVGaWVsZF0KCVZlY3RvcjIgYmFzZUJvdW5kYXJ5X1JUOwoJW1NlcmlhbGl6ZUZpZWxkXQoJR2FtZU9iamVjdCBwcmVmYWJfY2hhcmFjdGVyOwoJW1NlcmlhbGl6ZUZpZWxkXQoJR2FtZU9iamVjdCBwcmVmYWJfZ2FtZXVpOwoKCVtTZXJpYWxpemVGaWVsZF0KCUtleVZhbHVlRGF0YSBEZW1vRGF0YTsKCUludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIHRlc3REZW1hbmQ7Cglwcml2YXRlIHZvaWQgQXdha2UoKQoJewoJCUluc3RhbmNlID0gdGhpczsKCQlMb3JkLkluaXQoKTsKCQlDdXJIZXJvID0gSW5zdGFudGlhdGUocHJlZmFiX2NoYXJhY3RlciwgcG9zaXRpb25fYm9ybi5wb3NpdGlvbiwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKS5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpOwoJCUdhbWVHb2FsLkluaXQoKTsKCQlTRlhNYW5hZ2VyLkxpc3RlbmVyVGFyZ2V0ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCQlHYW1lVUkgPSBJbnN0YW50aWF0ZShwcmVmYWJfZ2FtZXVpKS5HZXRDb21wb25lbnQ8VUlNYW5hZ2VyPigpOwoJCUdhbWVVSS50cmFuc2Zvcm0uU2V0UGFyZW50KHVpX3RyYW5zKTsKCQlWQ2FtZXJhLkZvbGxvdyA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgkJVkNhbWVyYS5Mb29rQXQgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoKCQltX2xldmVsU3lzdGVtID0gbmV3IExldmVsU3lzdGVtKCk7CgoKCQkvLyDms6jlhozlupTnlKjpgIDlh7rkuovku7YKCQlBcHBsaWNhdGlvbi5xdWl0dGluZyArPSBPbkFwcGxpY2F0aW9uUXVpdDsKCQlRdWFsaXR5U2V0dGluZ3MudlN5bmNDb3VudCA9IDA7CgkJQXBwbGljYXRpb24udGFyZ2V0RnJhbWVSYXRlID0gNjA7Cgl9CgoJdm9pZCBTdGFydCgpCgl7CgkJUmVzSW52ZW50b3J5SXRlbSBtb25leUludmVudG9yeSA9IEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxJdGVtPihHYW1lTWFuYWdlci5Db25maWcuSXRlbSwgIlJlc0ludmVudG9yeV9Nb25leSIpIGFzIFJlc0ludmVudG9yeUl0ZW07CgkJaWYgKG1vbmV5SW52ZW50b3J5KSBHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeS5SZXNJbnZlbnRvcmllcy5BZGQoUmVzSXRlbS5SZXNUeXBlLk1vbmV5LCBuZXcgSW52ZW50b3J5U3lzdGVtLlJlc0ludmVudG9yeShtb25leUludmVudG9yeSkpOwoJCUdhbWVVSS5PcGVuV2luZG93KCJ3aW5NYWluIik7CgkJR2FtZVVJLk9wZW5XaW5kb3coIndpbkxldmVsU2VsZWN0Iik7Cgl9CgoJdm9pZCBPbkFwcGxpY2F0aW9uUXVpdCgpCgl7CgkJSGVscGVycy5Mb2codGhpcywgIkFwcGxpY2F0aW9uUXVpdCIpOwoJCVRlcnJhaW5Ub29sLlJlc2V0VGVycmFpbkRhdGEoKTsKCX0KCglwcml2YXRlIHZvaWQgVXBkYXRlKCkKCXsKCQlpZiAoSW5wdXQuR2V0S2V5RG93bigic3BhY2UiKSkKCQl7CgkJCWlmIChDYW1lcmFDdHJsLkN1ck1vZGUgIT0gQ2FtZXJhQ29udHJvbGxlci5Nb2RlLkJVSUxEKSBDYW1lcmFDdHJsLlNldE1vZGUoQ2FtZXJhQ29udHJvbGxlci5Nb2RlLkJVSUxEKTsKCQkJZWxzZSBDYW1lcmFDdHJsLlNldE1vZGUoQ2FtZXJhQ29udHJvbGxlci5Nb2RlLlJQRyk7CgkJCS8vVUlIdWRDYW52YXMuSW5zdGFuY2UuYnV0dG9uLnRyYW5zZm9ybS5wb3NpdGlvbiA9IENhbWVyYS5tYWluLldvcmxkVG9TY3JlZW5Qb2ludChDdXJIZXJvLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJfQoKCQkvLyBpZiAoSW5wdXQuR2V0S2V5RG93bihLZXlDb2RlLlJldHVybikpCgkJLy8gewoJCS8vIAlMb2NhbE5hdk1lc2hCdWlsZGVyIGJ1aWxkZXIgPSBHZXRDb21wb25lbnQ8TG9jYWxOYXZNZXNoQnVpbGRlcj4oKTsKCgkJLy8gCUdhbWVPYmplY3Qgb2JqID0gSW5zdGFudGlhdGUoUmVzb3VyY2VzLkxvYWQoImJ1aWxkaW5nX2hvdGVsIiksIGJ1aWxkZXIuR2V0TmF2TWVzaFJhbmRvbVBvcyhnYW1lT2JqZWN0KSwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKSBhcyBHYW1lT2JqZWN0OwoJCS8vIAkvL0dhbWVPYmplY3Qgb2JqID0gSW5zdGFudGlhdGUocHJlZmFiLCBidWlsZGVyLkdldE5hdk1lc2hSYW5kb21Qb3MoZ2FtZU9iamVjdCksIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSkgYXMgR2FtZU9iamVjdDsKCQkvLyAJRGVidWcuTG9nKCJidWlsZCBhdCA6IiArIG9iai50cmFuc2Zvcm0ucG9zaXRpb24pOwoJCS8vIH0KCQlpZiAoSW5wdXQuR2V0S2V5RG93bihLZXlDb2RlLlJldHVybikpCgkJewoJCQlDdXJIZXJvLkJhc2VBSS5CYWNrKDUuMGYpOwoJCX0KCgkJZmxvYXQgbW91c2VXaGVlbCA9IElucHV0LkdldEF4aXMoIk1vdXNlIFNjcm9sbFdoZWVsIik7CgkJaWYgKCFNYXRoZi5BcHByb3hpbWF0ZWx5KG1vdXNlV2hlZWwsIDAuMGYpKQoJCXsKCQkJVmVjdG9yMyB2aWV3ID0gQ2FtZXJhLm1haW4uU2NyZWVuVG9WaWV3cG9ydFBvaW50KElucHV0Lm1vdXNlUG9zaXRpb24pOwoJCQlpZiAodmlldy54ID4gMGYgJiYgdmlldy54IDwgMWYgJiYgdmlldy55ID4gMGYgJiYgdmlldy55IDwgMWYpCgkJCQlDYW1lcmFDdHJsLlpvb20oLW1vdXNlV2hlZWwgKiBUaW1lLmRlbHRhVGltZSAqIDIwLjBmKTsKCQl9Cgl9CgoJcHVibGljIHN0YXRpYyB2b2lkIFN0YXJ0V2FpdEFjdGlvbihmbG9hdCB3YWl0VGltZSwgQWN0aW9uIGFjdGlvbikKCXsKCQlJbnN0YW5jZS5TdGFydENvcm91dGluZShJbnN0YW5jZS5XYWl0QWN0aW9uKHdhaXRUaW1lLCBhY3Rpb24pKTsKCX0KCUlFbnVtZXJhdG9yIFdhaXRBY3Rpb24oZmxvYXQgd2FpdFRpbWUsIEFjdGlvbiBhY3Rpb24pCgl7CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yU2Vjb25kcyh3YWl0VGltZSk7CgkJYWN0aW9uPy5JbnZva2UoKTsKCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgU3RhcnROZXh0RnJhbWVBY3Rpb24oQWN0aW9uIGFjdGlvbikKCXsKCQlJbnN0YW5jZS5TdGFydENvcm91dGluZShJbnN0YW5jZS5OZXh0RnJhbWVBY3Rpb24oYWN0aW9uKSk7Cgl9CglJRW51bWVyYXRvciBOZXh0RnJhbWVBY3Rpb24oQWN0aW9uIGFjdGlvbikKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JOZXh0RnJhbWVVbml0KCk7CgkJYWN0aW9uPy5JbnZva2UoKTsKCX0KCXB1YmxpYyBzdGF0aWMgc3RyaW5nIFNjZW5lQm94SW5mbyhHYW1lT2JqZWN0IHNjZW5lQm94LCBib29sIGRpc3BsYXkpCgl7CgkJaWYgKCFzY2VuZUJveCkgcmV0dXJuIGRpc3BsYXkgPyAi56m65ZywIiA6ICJibGFuayI7CgkJc3RyaW5nIHNjZW5lVGFnID0gc2NlbmVCb3gudGFnOwoJCXN3aXRjaCAoc2NlbmVUYWcpCgkJewoJCQljYXNlICJyb2FkIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIumBk+i3ryIgOiBzY2VuZVRhZzsKCQkJY2FzZSAiYnVpbGRpbmciOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bu6562ROiIgKyBzY2VuZUJveCA6IHNjZW5lVGFnOwoJCQljYXNlICJwaXQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5Z2ROiIgKyBzY2VuZUJveCA6IHNjZW5lVGFnOwoJCQljYXNlICJtb3VudCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlsbHkvZM6IiA6IHNjZW5lVGFnOwoJCQljYXNlICJucGMiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAibnBjOiIgKyBzY2VuZUJveCA6IHNjZW5lVGFnOwoJCQljYXNlICJjcmVhdGVyIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuW7uumAoOS4rS4uLiIgOiBzY2VuZVRhZzsKCQkJZGVmYXVsdDoKCQkJCWJyZWFrOwoJCX0KCQlyZXR1cm4gZGlzcGxheSA/ICLnqbrlnLAiIDogImJsYW5rIjsKCX0KfQoAAAAAAAAAAOcUAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					6,
					1,
					"revert",
					null,
					"AwAAAAAAAAAAAAAAAAAAAAAAAAATFQAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENpbmVtYWNoaW5lOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpwdWJsaWMgY2xhc3MgR2FtZU1hbmFnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgR2FtZU1hbmFnZXIgSW5zdGFuY2U7CglwdWJsaWMgc3RhdGljIExvcmREYXRhIExvcmQgPT4gSW5zdGFuY2UuR2V0Q29tcG9uZW50PExvcmREYXRhPigpOwoJcHVibGljIHN0YXRpYyBDaGFyYWN0ZXIgQ3VySGVybzsKCXB1YmxpYyBzdGF0aWMgU3RvcnlMaXN0ZW5lciBTdG9yeUxpc3RlbmVyID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxTdG9yeUxpc3RlbmVyPigpOwoJcHVibGljIHN0YXRpYyBHYW1lR29hbFN5c3RlbSBHYW1lR29hbCA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8R2FtZUdvYWxTeXN0ZW0+KCk7CglwdWJsaWMgc3RhdGljIExldmVsU3lzdGVtIEdhbWVMZXZlbCA9PiBJbnN0YW5jZS5tX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBVSU1hbmFnZXIgR2FtZVVJOwoJcHVibGljIHN0YXRpYyBLZXlWYWx1ZURhdGEgQ29uZmlnID0+IEluc3RhbmNlLkRlbW9EYXRhOwoJcHVibGljIExpZ2h0TWFuYWdlciBEYXlOaWdodDsKCXB1YmxpYyBDaW5lbWFjaGluZVZpcnR1YWxDYW1lcmEgVkNhbWVyYTsKCXB1YmxpYyBDYW1lcmFDb250cm9sbGVyIENhbWVyYUN0cmw7CglwdWJsaWMgU0ZYTWFuYWdlciBTRlhNYW5hZ2VyOwoJcHVibGljIFRlcnJhaW5Ub29sIFRlcnJhaW5Ub29sOwoJTGV2ZWxTeXN0ZW0gbV9sZXZlbFN5c3RlbTsKCXB1YmxpYyBMaXN0PEZvcm11bGFEYXRhPiBmb3JtdWxhczsKCXB1YmxpYyBMaXN0PFNwYXduZXI+IHNwYXduZXJzOwoJcHVibGljIExldmVsRGF0YSBzdGFydExldmVsOwoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTZXRTdG9yeU1vZGVsKGJvb2wgYWN0aXZlLCBBY3Rpb24gYWN0aW9uID0gbnVsbCkKCXsKCQlpZiAoc3RvcnlNb2RlID09IGFjdGl2ZSkgeyBhY3Rpb24/Lkludm9rZSgpOyByZXR1cm47IH0KCQlzdG9yeU1vZGUgPSBhY3RpdmU7CgkJR2FtZVVJLkpveVN0aWNrLmVuYWJsZWQgPSAhYWN0aXZlOwoJCWlmIChhY3RpdmUpCgkJewoJCQlJbnN0YW5jZS5DYW1lcmFDdHJsLlNldE1vZGUoQ2FtZXJhQ29udHJvbGxlci5Nb2RlLlNUT1JZLCBhY3Rpb24pOwoJCQlDdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSU5BQ1RJVkUpOwoJCX0KCQllbHNlCgkJewoJCQlJbnN0YW5jZS5DYW1lcmFDdHJsLlNldE1vZGUoQ2FtZXJhQ29udHJvbGxlci5Nb2RlLlJQRywgYWN0aW9uKTsKCQkJQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklETEUpOwoJCX0KCX0KCXB1YmxpYyBzdGF0aWMgYm9vbCBzdG9yeU1vZGUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CgoJW1NlcmlhbGl6ZUZpZWxkXQoJVHJhbnNmb3JtIHVpX3RyYW5zOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVHJhbnNmb3JtIHBvc2l0aW9uX2Jvcm47CglbU2VyaWFsaXplRmllbGRdCglWZWN0b3IyIGJhc2VCb3VuZGFyeV9MQjsKCVtTZXJpYWxpemVGaWVsZF0KCVZlY3RvcjIgYmFzZUJvdW5kYXJ5X1JUOwoJW1NlcmlhbGl6ZUZpZWxkXQoJR2FtZU9iamVjdCBwcmVmYWJfY2hhcmFjdGVyOwoJW1NlcmlhbGl6ZUZpZWxkXQoJR2FtZU9iamVjdCBwcmVmYWJfZ2FtZXVpOwoKCVtTZXJpYWxpemVGaWVsZF0KCUtleVZhbHVlRGF0YSBEZW1vRGF0YTsKCUludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIHRlc3REZW1hbmQ7Cglwcml2YXRlIHZvaWQgQXdha2UoKQoJewoJCUluc3RhbmNlID0gdGhpczsKCQlMb3JkLkluaXQoKTsKCQlDdXJIZXJvID0gSW5zdGFudGlhdGUocHJlZmFiX2NoYXJhY3RlciwgcG9zaXRpb25fYm9ybi5wb3NpdGlvbiwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKS5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpOwoJCUdhbWVHb2FsLkluaXQoKTsKCQlTRlhNYW5hZ2VyLkxpc3RlbmVyVGFyZ2V0ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCQlHYW1lVUkgPSBJbnN0YW50aWF0ZShwcmVmYWJfZ2FtZXVpKS5HZXRDb21wb25lbnQ8VUlNYW5hZ2VyPigpOwoJCUdhbWVVSS50cmFuc2Zvcm0uU2V0UGFyZW50KHVpX3RyYW5zKTsKCQlWQ2FtZXJhLkZvbGxvdyA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgkJVkNhbWVyYS5Mb29rQXQgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoKCQltX2xldmVsU3lzdGVtID0gbmV3IExldmVsU3lzdGVtKCk7CgoKCQkvLyDms6jlhozlupTnlKjpgIDlh7rkuovku7YKCQlBcHBsaWNhdGlvbi5xdWl0dGluZyArPSBPbkFwcGxpY2F0aW9uUXVpdDsKCQlRdWFsaXR5U2V0dGluZ3MudlN5bmNDb3VudCA9IDA7CgkJQXBwbGljYXRpb24udGFyZ2V0RnJhbWVSYXRlID0gNjA7Cgl9CgoJdm9pZCBTdGFydCgpCgl7CgkJUmVzSW52ZW50b3J5SXRlbSBtb25leUludmVudG9yeSA9IEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxJdGVtPihHYW1lTWFuYWdlci5Db25maWcuSXRlbSwgIlJlc0ludmVudG9yeV9Nb25leSIpIGFzIFJlc0ludmVudG9yeUl0ZW07CgkJaWYgKG1vbmV5SW52ZW50b3J5KSBHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeS5SZXNJbnZlbnRvcmllcy5BZGQoUmVzSXRlbS5SZXNUeXBlLk1vbmV5LCBuZXcgSW52ZW50b3J5U3lzdGVtLlJlc0ludmVudG9yeShtb25leUludmVudG9yeSkpOwoJCUdhbWVVSS5PcGVuV2luZG93KCJ3aW5ScGciKTsKCQlHYW1lVUkuT3BlbldpbmRvdygid2luTGV2ZWxTZWxlY3QiKTsKCX0KCgl2b2lkIE9uQXBwbGljYXRpb25RdWl0KCkKCXsKCQlIZWxwZXJzLkxvZyh0aGlzLCAiQXBwbGljYXRpb25RdWl0Iik7CgkJVGVycmFpblRvb2wuUmVzZXRUZXJyYWluRGF0YSgpOwoJfQoKCXByaXZhdGUgdm9pZCBVcGRhdGUoKQoJewoJCWlmIChJbnB1dC5HZXRLZXlEb3duKCJzcGFjZSIpKQoJCXsKCQkJaWYgKENhbWVyYUN0cmwuQ3VyTW9kZSAhPSBDYW1lcmFDb250cm9sbGVyLk1vZGUuQlVJTEQpIENhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuQlVJTEQpOwoJCQllbHNlIENhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuUlBHKTsKCQkJLy9VSUh1ZENhbnZhcy5JbnN0YW5jZS5idXR0b24udHJhbnNmb3JtLnBvc2l0aW9uID0gQ2FtZXJhLm1haW4uV29ybGRUb1NjcmVlblBvaW50KEN1ckhlcm8udHJhbnNmb3JtLnBvc2l0aW9uKTsKCQl9CgoJCS8vIGlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQkvLyB7CgkJLy8gCUxvY2FsTmF2TWVzaEJ1aWxkZXIgYnVpbGRlciA9IEdldENvbXBvbmVudDxMb2NhbE5hdk1lc2hCdWlsZGVyPigpOwoKCQkvLyAJR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShSZXNvdXJjZXMuTG9hZCgiYnVpbGRpbmdfaG90ZWwiKSwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCS8vR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShwcmVmYWIsIGJ1aWxkZXIuR2V0TmF2TWVzaFJhbmRvbVBvcyhnYW1lT2JqZWN0KSwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKSBhcyBHYW1lT2JqZWN0OwoJCS8vIAlEZWJ1Zy5Mb2coImJ1aWxkIGF0IDoiICsgb2JqLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJLy8gfQoJCWlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQl7CgkJCUN1ckhlcm8uQmFzZUFJLkJhY2soNS4wZik7CgkJfQoKCQlmbG9hdCBtb3VzZVdoZWVsID0gSW5wdXQuR2V0QXhpcygiTW91c2UgU2Nyb2xsV2hlZWwiKTsKCQlpZiAoIU1hdGhmLkFwcHJveGltYXRlbHkobW91c2VXaGVlbCwgMC4wZikpCgkJewoJCQlWZWN0b3IzIHZpZXcgPSBDYW1lcmEubWFpbi5TY3JlZW5Ub1ZpZXdwb3J0UG9pbnQoSW5wdXQubW91c2VQb3NpdGlvbik7CgkJCWlmICh2aWV3LnggPiAwZiAmJiB2aWV3LnggPCAxZiAmJiB2aWV3LnkgPiAwZiAmJiB2aWV3LnkgPCAxZikKCQkJCUNhbWVyYUN0cmwuWm9vbSgtbW91c2VXaGVlbCAqIFRpbWUuZGVsdGFUaW1lICogMjAuMGYpOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgU3RhcnRXYWl0QWN0aW9uKGZsb2F0IHdhaXRUaW1lLCBBY3Rpb24gYWN0aW9uKQoJewoJCUluc3RhbmNlLlN0YXJ0Q29yb3V0aW5lKEluc3RhbmNlLldhaXRBY3Rpb24od2FpdFRpbWUsIGFjdGlvbikpOwoJfQoJSUVudW1lcmF0b3IgV2FpdEFjdGlvbihmbG9hdCB3YWl0VGltZSwgQWN0aW9uIGFjdGlvbikKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHdhaXRUaW1lKTsKCQlhY3Rpb24/Lkludm9rZSgpOwoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTdGFydE5leHRGcmFtZUFjdGlvbihBY3Rpb24gYWN0aW9uKQoJewoJCUluc3RhbmNlLlN0YXJ0Q29yb3V0aW5lKEluc3RhbmNlLk5leHRGcmFtZUFjdGlvbihhY3Rpb24pKTsKCX0KCUlFbnVtZXJhdG9yIE5leHRGcmFtZUFjdGlvbihBY3Rpb24gYWN0aW9uKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvck5leHRGcmFtZVVuaXQoKTsKCQlhY3Rpb24/Lkludm9rZSgpOwoJfQoJcHVibGljIHN0YXRpYyBzdHJpbmcgU2NlbmVCb3hJbmZvKEdhbWVPYmplY3Qgc2NlbmVCb3gsIGJvb2wgZGlzcGxheSkKCXsKCQlpZiAoIXNjZW5lQm94KSByZXR1cm4gZGlzcGxheSA/ICLnqbrlnLAiIDogImJsYW5rIjsKCQlzdHJpbmcgc2NlbmVUYWcgPSBzY2VuZUJveC50YWc7CgkJc3dpdGNoIChzY2VuZVRhZykKCQl7CgkJCWNhc2UgInJvYWQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi6YGT6LevIiA6IHNjZW5lVGFnOwoJCQljYXNlICJidWlsZGluZyI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlu7rnrZE6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgInBpdCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlnZE6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgIm1vdW50IjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuWxseS9kzoiIDogc2NlbmVUYWc7CgkJCWNhc2UgIm5wYyI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICJucGM6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgImNyZWF0ZXIiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bu66YCg5LitLi4uIiA6IHNjZW5lVGFnOwoJCQlkZWZhdWx0OgoJCQkJYnJlYWs7CgkJfQoJCXJldHVybiBkaXNwbGF5ID8gIuepuuWcsCIgOiAiYmxhbmsiOwoJfQp9CgAAAAAAAAAAyBQAAAAAAAAAAAAAAAAAAAAAAADIFAAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD0FAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENpbmVtYWNoaW5lOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpwdWJsaWMgY2xhc3MgR2FtZU1hbmFnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgR2FtZU1hbmFnZXIgSW5zdGFuY2U7CglwdWJsaWMgc3RhdGljIExvcmREYXRhIExvcmQgPT4gSW5zdGFuY2UuR2V0Q29tcG9uZW50PExvcmREYXRhPigpOwoJcHVibGljIHN0YXRpYyBDaGFyYWN0ZXIgQ3VySGVybzsKCXB1YmxpYyBzdGF0aWMgU3RvcnlMaXN0ZW5lciBTdG9yeUxpc3RlbmVyID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxTdG9yeUxpc3RlbmVyPigpOwoJcHVibGljIHN0YXRpYyBHYW1lR29hbFN5c3RlbSBHYW1lR29hbCA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8R2FtZUdvYWxTeXN0ZW0+KCk7CglwdWJsaWMgc3RhdGljIExldmVsU3lzdGVtIEdhbWVMZXZlbCA9PiBJbnN0YW5jZS5tX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBVSU1hbmFnZXIgR2FtZVVJOwoJcHVibGljIHN0YXRpYyBLZXlWYWx1ZURhdGEgQ29uZmlnID0+IEluc3RhbmNlLkRlbW9EYXRhOwoJcHVibGljIExpZ2h0TWFuYWdlciBEYXlOaWdodDsKCXB1YmxpYyBDaW5lbWFjaGluZVZpcnR1YWxDYW1lcmEgVkNhbWVyYTsKCXB1YmxpYyBDYW1lcmFDb250cm9sbGVyIENhbWVyYUN0cmw7CglwdWJsaWMgU0ZYTWFuYWdlciBTRlhNYW5hZ2VyOwoJcHVibGljIFRlcnJhaW5Ub29sIFRlcnJhaW5Ub29sOwoJTGV2ZWxTeXN0ZW0gbV9sZXZlbFN5c3RlbTsKCXB1YmxpYyBMaXN0PEZvcm11bGFEYXRhPiBmb3JtdWxhczsKCXB1YmxpYyBMaXN0PFNwYXduZXI+IHNwYXduZXJzOwoJcHVibGljIExldmVsRGF0YSBzdGFydExldmVsOwoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTZXRTdG9yeU1vZGVsKGJvb2wgYWN0aXZlLCBBY3Rpb24gYWN0aW9uID0gbnVsbCkKCXsKCQlpZiAoc3RvcnlNb2RlID09IGFjdGl2ZSkgeyBhY3Rpb24/Lkludm9rZSgpOyByZXR1cm47IH0KCQlzdG9yeU1vZGUgPSBhY3RpdmU7CgkJR2FtZVVJLkpveVN0aWNrLmVuYWJsZWQgPSAhYWN0aXZlOwoJCWlmIChhY3RpdmUpCgkJewoJCQlJbnN0YW5jZS5DYW1lcmFDdHJsLlNldE1vZGUoQ2FtZXJhQ29udHJvbGxlci5Nb2RlLlNUT1JZLCBhY3Rpb24pOwoJCQlDdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSU5BQ1RJVkUpOwoJCX0KCQllbHNlCgkJewoJCQlJbnN0YW5jZS5DYW1lcmFDdHJsLlNldE1vZGUoQ2FtZXJhQ29udHJvbGxlci5Nb2RlLlJQRywgYWN0aW9uKTsKCQkJQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklETEUpOwoJCX0KCX0KCXB1YmxpYyBzdGF0aWMgYm9vbCBzdG9yeU1vZGUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CgoJW1NlcmlhbGl6ZUZpZWxkXQoJVHJhbnNmb3JtIHVpX3RyYW5zOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVHJhbnNmb3JtIHBvc2l0aW9uX2Jvcm47CglbU2VyaWFsaXplRmllbGRdCglWZWN0b3IyIGJhc2VCb3VuZGFyeV9MQjsKCVtTZXJpYWxpemVGaWVsZF0KCVZlY3RvcjIgYmFzZUJvdW5kYXJ5X1JUOwoJW1NlcmlhbGl6ZUZpZWxkXQoJR2FtZU9iamVjdCBwcmVmYWJfY2hhcmFjdGVyOwoJW1NlcmlhbGl6ZUZpZWxkXQoJR2FtZU9iamVjdCBwcmVmYWJfZ2FtZXVpOwoKCVtTZXJpYWxpemVGaWVsZF0KCUtleVZhbHVlRGF0YSBEZW1vRGF0YTsKCUludmVudG9yeVN5c3RlbS5JdGVtRGVtYW5kIHRlc3REZW1hbmQ7Cglwcml2YXRlIHZvaWQgQXdha2UoKQoJewoJCUluc3RhbmNlID0gdGhpczsKCQlMb3JkLkluaXQoKTsKCQlDdXJIZXJvID0gSW5zdGFudGlhdGUocHJlZmFiX2NoYXJhY3RlciwgcG9zaXRpb25fYm9ybi5wb3NpdGlvbiwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKS5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpOwoJCUdhbWVHb2FsLkluaXQoKTsKCQlTRlhNYW5hZ2VyLkxpc3RlbmVyVGFyZ2V0ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCQlHYW1lVUkgPSBJbnN0YW50aWF0ZShwcmVmYWJfZ2FtZXVpKS5HZXRDb21wb25lbnQ8VUlNYW5hZ2VyPigpOwoJCUdhbWVVSS50cmFuc2Zvcm0uU2V0UGFyZW50KHVpX3RyYW5zKTsKCQlWQ2FtZXJhLkZvbGxvdyA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgkJVkNhbWVyYS5Mb29rQXQgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoKCQltX2xldmVsU3lzdGVtID0gbmV3IExldmVsU3lzdGVtKCk7CgoKCQkvLyDms6jlhozlupTnlKjpgIDlh7rkuovku7YKCQlBcHBsaWNhdGlvbi5xdWl0dGluZyArPSBPbkFwcGxpY2F0aW9uUXVpdDsKCQlRdWFsaXR5U2V0dGluZ3MudlN5bmNDb3VudCA9IDA7CgkJQXBwbGljYXRpb24udGFyZ2V0RnJhbWVSYXRlID0gNjA7Cgl9CgoJdm9pZCBTdGFydCgpCgl7CgkJUmVzSW52ZW50b3J5SXRlbSBtb25leUludmVudG9yeSA9IEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxJdGVtPihHYW1lTWFuYWdlci5Db25maWcuSXRlbSwgIlJlc0ludmVudG9yeV9Nb25leSIpIGFzIFJlc0ludmVudG9yeUl0ZW07CgkJaWYgKG1vbmV5SW52ZW50b3J5KSBHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeS5SZXNJbnZlbnRvcmllcy5BZGQoUmVzSXRlbS5SZXNUeXBlLk1vbmV5LCBuZXcgSW52ZW50b3J5U3lzdGVtLlJlc0ludmVudG9yeShtb25leUludmVudG9yeSkpOwoJCUdhbWVVSS5PcGVuV2luZG93KCJ3aW5MZXZlbFNlbGVjdCIpOwoJfQoKCXZvaWQgT25BcHBsaWNhdGlvblF1aXQoKQoJewoJCUhlbHBlcnMuTG9nKHRoaXMsICJBcHBsaWNhdGlvblF1aXQiKTsKCQlUZXJyYWluVG9vbC5SZXNldFRlcnJhaW5EYXRhKCk7Cgl9CgoJcHJpdmF0ZSB2b2lkIFVwZGF0ZSgpCgl7CgkJaWYgKElucHV0LkdldEtleURvd24oInNwYWNlIikpCgkJewoJCQlpZiAoQ2FtZXJhQ3RybC5DdXJNb2RlICE9IENhbWVyYUNvbnRyb2xsZXIuTW9kZS5CVUlMRCkgQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5CVUlMRCk7CgkJCWVsc2UgQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5SUEcpOwoJCQkvL1VJSHVkQ2FudmFzLkluc3RhbmNlLmJ1dHRvbi50cmFuc2Zvcm0ucG9zaXRpb24gPSBDYW1lcmEubWFpbi5Xb3JsZFRvU2NyZWVuUG9pbnQoQ3VySGVyby50cmFuc2Zvcm0ucG9zaXRpb24pOwoJCX0KCgkJLy8gaWYgKElucHV0LkdldEtleURvd24oS2V5Q29kZS5SZXR1cm4pKQoJCS8vIHsKCQkvLyAJTG9jYWxOYXZNZXNoQnVpbGRlciBidWlsZGVyID0gR2V0Q29tcG9uZW50PExvY2FsTmF2TWVzaEJ1aWxkZXI+KCk7CgoJCS8vIAlHYW1lT2JqZWN0IG9iaiA9IEluc3RhbnRpYXRlKFJlc291cmNlcy5Mb2FkKCJidWlsZGluZ19ob3RlbCIpLCBidWlsZGVyLkdldE5hdk1lc2hSYW5kb21Qb3MoZ2FtZU9iamVjdCksIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSkgYXMgR2FtZU9iamVjdDsKCQkvLyAJLy9HYW1lT2JqZWN0IG9iaiA9IEluc3RhbnRpYXRlKHByZWZhYiwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCURlYnVnLkxvZygiYnVpbGQgYXQgOiIgKyBvYmoudHJhbnNmb3JtLnBvc2l0aW9uKTsKCQkvLyB9CgkJaWYgKElucHV0LkdldEtleURvd24oS2V5Q29kZS5SZXR1cm4pKQoJCXsKCQkJQ3VySGVyby5CYXNlQUkuQmFjayg1LjBmKTsKCQl9CgoJCWZsb2F0IG1vdXNlV2hlZWwgPSBJbnB1dC5HZXRBeGlzKCJNb3VzZSBTY3JvbGxXaGVlbCIpOwoJCWlmICghTWF0aGYuQXBwcm94aW1hdGVseShtb3VzZVdoZWVsLCAwLjBmKSkKCQl7CgkJCVZlY3RvcjMgdmlldyA9IENhbWVyYS5tYWluLlNjcmVlblRvVmlld3BvcnRQb2ludChJbnB1dC5tb3VzZVBvc2l0aW9uKTsKCQkJaWYgKHZpZXcueCA+IDBmICYmIHZpZXcueCA8IDFmICYmIHZpZXcueSA+IDBmICYmIHZpZXcueSA8IDFmKQoJCQkJQ2FtZXJhQ3RybC5ab29tKC1tb3VzZVdoZWVsICogVGltZS5kZWx0YVRpbWUgKiAyMC4wZik7CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTdGFydFdhaXRBY3Rpb24oZmxvYXQgd2FpdFRpbWUsIEFjdGlvbiBhY3Rpb24pCgl7CgkJSW5zdGFuY2UuU3RhcnRDb3JvdXRpbmUoSW5zdGFuY2UuV2FpdEFjdGlvbih3YWl0VGltZSwgYWN0aW9uKSk7Cgl9CglJRW51bWVyYXRvciBXYWl0QWN0aW9uKGZsb2F0IHdhaXRUaW1lLCBBY3Rpb24gYWN0aW9uKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMod2FpdFRpbWUpOwoJCWFjdGlvbj8uSW52b2tlKCk7Cgl9CgoJcHVibGljIHN0YXRpYyB2b2lkIFN0YXJ0TmV4dEZyYW1lQWN0aW9uKEFjdGlvbiBhY3Rpb24pCgl7CgkJSW5zdGFuY2UuU3RhcnRDb3JvdXRpbmUoSW5zdGFuY2UuTmV4dEZyYW1lQWN0aW9uKGFjdGlvbikpOwoJfQoJSUVudW1lcmF0b3IgTmV4dEZyYW1lQWN0aW9uKEFjdGlvbiBhY3Rpb24pCgl7CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yTmV4dEZyYW1lVW5pdCgpOwoJCWFjdGlvbj8uSW52b2tlKCk7Cgl9CglwdWJsaWMgc3RhdGljIHN0cmluZyBTY2VuZUJveEluZm8oR2FtZU9iamVjdCBzY2VuZUJveCwgYm9vbCBkaXNwbGF5KQoJewoJCWlmICghc2NlbmVCb3gpIHJldHVybiBkaXNwbGF5ID8gIuepuuWcsCIgOiAiYmxhbmsiOwoJCXN0cmluZyBzY2VuZVRhZyA9IHNjZW5lQm94LnRhZzsKCQlzd2l0Y2ggKHNjZW5lVGFnKQoJCXsKCQkJY2FzZSAicm9hZCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLpgZPot68iIDogc2NlbmVUYWc7CgkJCWNhc2UgImJ1aWxkaW5nIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuW7uuetkToiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAicGl0IjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuWdkToiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAibW91bnQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bGx5L2TOiIgOiBzY2VuZVRhZzsKCQkJY2FzZSAibnBjIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIm5wYzoiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAiY3JlYXRlciI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlu7rpgKDkuK0uLi4iIDogc2NlbmVUYWc7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9CgkJcmV0dXJuIGRpc3BsYXkgPyAi56m65ZywIiA6ICJibGFuayI7Cgl9Cn0KAAAAAAAAAADMFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD4FAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENpbmVtYWNoaW5lOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpwdWJsaWMgY2xhc3MgR2FtZU1hbmFnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgR2FtZU1hbmFnZXIgSW5zdGFuY2U7CglwdWJsaWMgc3RhdGljIExvcmRTeXN0ZW0gTG9yZCA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8TG9yZFN5c3RlbT4oKTsKCXB1YmxpYyBzdGF0aWMgQ2hhcmFjdGVyIEN1ckhlcm87CglwdWJsaWMgc3RhdGljIFN0b3J5TGlzdGVuZXIgU3RvcnlMaXN0ZW5lciA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8U3RvcnlMaXN0ZW5lcj4oKTsKCXB1YmxpYyBzdGF0aWMgR2FtZUdvYWxTeXN0ZW0gR2FtZUdvYWwgPT4gSW5zdGFuY2UuR2V0Q29tcG9uZW50PEdhbWVHb2FsU3lzdGVtPigpOwoJcHVibGljIHN0YXRpYyBMZXZlbFN5c3RlbSBHYW1lTGV2ZWwgPT4gSW5zdGFuY2UubV9sZXZlbFN5c3RlbTsKCXB1YmxpYyBzdGF0aWMgVUlNYW5hZ2VyIEdhbWVVSTsKCXB1YmxpYyBzdGF0aWMgS2V5VmFsdWVEYXRhIENvbmZpZyA9PiBJbnN0YW5jZS5EZW1vRGF0YTsKCXB1YmxpYyBMaWdodE1hbmFnZXIgRGF5TmlnaHQ7CglwdWJsaWMgQ2luZW1hY2hpbmVWaXJ0dWFsQ2FtZXJhIFZDYW1lcmE7CglwdWJsaWMgQ2FtZXJhQ29udHJvbGxlciBDYW1lcmFDdHJsOwoJcHVibGljIFNGWE1hbmFnZXIgU0ZYTWFuYWdlcjsKCXB1YmxpYyBUZXJyYWluVG9vbCBUZXJyYWluVG9vbDsKCUxldmVsU3lzdGVtIG1fbGV2ZWxTeXN0ZW07CglwdWJsaWMgTGlzdDxGb3JtdWxhRGF0YT4gZm9ybXVsYXM7CglwdWJsaWMgTGlzdDxTcGF3bmVyPiBzcGF3bmVyczsKCXB1YmxpYyBMZXZlbERhdGEgc3RhcnRMZXZlbDsKCglwdWJsaWMgc3RhdGljIHZvaWQgU2V0U3RvcnlNb2RlbChib29sIGFjdGl2ZSwgQWN0aW9uIGFjdGlvbiA9IG51bGwpCgl7CgkJaWYgKHN0b3J5TW9kZSA9PSBhY3RpdmUpIHsgYWN0aW9uPy5JbnZva2UoKTsgcmV0dXJuOyB9CgkJc3RvcnlNb2RlID0gYWN0aXZlOwoJCUdhbWVVSS5Kb3lTdGljay5lbmFibGVkID0gIWFjdGl2ZTsKCQlpZiAoYWN0aXZlKQoJCXsKCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5TVE9SWSwgYWN0aW9uKTsKCQkJQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklOQUNUSVZFKTsKCQl9CgkJZWxzZQoJCXsKCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5SUEcsIGFjdGlvbik7CgkJCUN1ckhlcm8uQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JRExFKTsKCQl9Cgl9CglwdWJsaWMgc3RhdGljIGJvb2wgc3RvcnlNb2RlIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCVRyYW5zZm9ybSB1aV90cmFuczsKCVtTZXJpYWxpemVGaWVsZF0KCVRyYW5zZm9ybSBwb3NpdGlvbl9ib3JuOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVmVjdG9yMiBiYXNlQm91bmRhcnlfTEI7CglbU2VyaWFsaXplRmllbGRdCglWZWN0b3IyIGJhc2VCb3VuZGFyeV9SVDsKCVtTZXJpYWxpemVGaWVsZF0KCUdhbWVPYmplY3QgcHJlZmFiX2NoYXJhY3RlcjsKCVtTZXJpYWxpemVGaWVsZF0KCUdhbWVPYmplY3QgcHJlZmFiX2dhbWV1aTsKCglbU2VyaWFsaXplRmllbGRdCglLZXlWYWx1ZURhdGEgRGVtb0RhdGE7CglJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZCB0ZXN0RGVtYW5kOwoJcHJpdmF0ZSB2b2lkIEF3YWtlKCkKCXsKCQlJbnN0YW5jZSA9IHRoaXM7CgkJTG9yZC5Jbml0KCk7CgkJQ3VySGVybyA9IEluc3RhbnRpYXRlKHByZWZhYl9jaGFyYWN0ZXIsIHBvc2l0aW9uX2Jvcm4ucG9zaXRpb24sIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSkuR2V0Q29tcG9uZW50PENoYXJhY3Rlcj4oKTsKCQlHYW1lR29hbC5Jbml0KCk7CgkJU0ZYTWFuYWdlci5MaXN0ZW5lclRhcmdldCA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgkJR2FtZVVJID0gSW5zdGFudGlhdGUocHJlZmFiX2dhbWV1aSkuR2V0Q29tcG9uZW50PFVJTWFuYWdlcj4oKTsKCQlHYW1lVUkudHJhbnNmb3JtLlNldFBhcmVudCh1aV90cmFucyk7CgkJVkNhbWVyYS5Gb2xsb3cgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoJCVZDYW1lcmEuTG9va0F0ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCgkJbV9sZXZlbFN5c3RlbSA9IG5ldyBMZXZlbFN5c3RlbSgpOwoKCgkJLy8g5rOo5YaM5bqU55So6YCA5Ye65LqL5Lu2CgkJQXBwbGljYXRpb24ucXVpdHRpbmcgKz0gT25BcHBsaWNhdGlvblF1aXQ7CgkJUXVhbGl0eVNldHRpbmdzLnZTeW5jQ291bnQgPSAwOwoJCUFwcGxpY2F0aW9uLnRhcmdldEZyYW1lUmF0ZSA9IDYwOwoJfQoKCXZvaWQgU3RhcnQoKQoJewoJCVJlc0ludmVudG9yeUl0ZW0gbW9uZXlJbnZlbnRvcnkgPSBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8SXRlbT4oR2FtZU1hbmFnZXIuQ29uZmlnLkl0ZW0sICJSZXNJbnZlbnRvcnlfTW9uZXkiKSBhcyBSZXNJbnZlbnRvcnlJdGVtOwoJCWlmIChtb25leUludmVudG9yeSkgR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkuUmVzSW52ZW50b3JpZXMuQWRkKFJlc0l0ZW0uUmVzVHlwZS5Nb25leSwgbmV3IEludmVudG9yeVN5c3RlbS5SZXNJbnZlbnRvcnkobW9uZXlJbnZlbnRvcnkpKTsKCQlHYW1lVUkuT3BlbldpbmRvdygid2luTGV2ZWxTZWxlY3QiKTsKCX0KCgl2b2lkIE9uQXBwbGljYXRpb25RdWl0KCkKCXsKCQlIZWxwZXJzLkxvZyh0aGlzLCAiQXBwbGljYXRpb25RdWl0Iik7CgkJVGVycmFpblRvb2wuUmVzZXRUZXJyYWluRGF0YSgpOwoJfQoKCXByaXZhdGUgdm9pZCBVcGRhdGUoKQoJewoJCWlmIChJbnB1dC5HZXRLZXlEb3duKCJzcGFjZSIpKQoJCXsKCQkJaWYgKENhbWVyYUN0cmwuQ3VyTW9kZSAhPSBDYW1lcmFDb250cm9sbGVyLk1vZGUuQlVJTEQpIENhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuQlVJTEQpOwoJCQllbHNlIENhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuUlBHKTsKCQkJLy9VSUh1ZENhbnZhcy5JbnN0YW5jZS5idXR0b24udHJhbnNmb3JtLnBvc2l0aW9uID0gQ2FtZXJhLm1haW4uV29ybGRUb1NjcmVlblBvaW50KEN1ckhlcm8udHJhbnNmb3JtLnBvc2l0aW9uKTsKCQl9CgoJCS8vIGlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQkvLyB7CgkJLy8gCUxvY2FsTmF2TWVzaEJ1aWxkZXIgYnVpbGRlciA9IEdldENvbXBvbmVudDxMb2NhbE5hdk1lc2hCdWlsZGVyPigpOwoKCQkvLyAJR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShSZXNvdXJjZXMuTG9hZCgiYnVpbGRpbmdfaG90ZWwiKSwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCS8vR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShwcmVmYWIsIGJ1aWxkZXIuR2V0TmF2TWVzaFJhbmRvbVBvcyhnYW1lT2JqZWN0KSwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKSBhcyBHYW1lT2JqZWN0OwoJCS8vIAlEZWJ1Zy5Mb2coImJ1aWxkIGF0IDoiICsgb2JqLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJLy8gfQoJCWlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQl7CgkJCUN1ckhlcm8uQmFzZUFJLkJhY2soNS4wZik7CgkJfQoKCQlmbG9hdCBtb3VzZVdoZWVsID0gSW5wdXQuR2V0QXhpcygiTW91c2UgU2Nyb2xsV2hlZWwiKTsKCQlpZiAoIU1hdGhmLkFwcHJveGltYXRlbHkobW91c2VXaGVlbCwgMC4wZikpCgkJewoJCQlWZWN0b3IzIHZpZXcgPSBDYW1lcmEubWFpbi5TY3JlZW5Ub1ZpZXdwb3J0UG9pbnQoSW5wdXQubW91c2VQb3NpdGlvbik7CgkJCWlmICh2aWV3LnggPiAwZiAmJiB2aWV3LnggPCAxZiAmJiB2aWV3LnkgPiAwZiAmJiB2aWV3LnkgPCAxZikKCQkJCUNhbWVyYUN0cmwuWm9vbSgtbW91c2VXaGVlbCAqIFRpbWUuZGVsdGFUaW1lICogMjAuMGYpOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgU3RhcnRXYWl0QWN0aW9uKGZsb2F0IHdhaXRUaW1lLCBBY3Rpb24gYWN0aW9uKQoJewoJCUluc3RhbmNlLlN0YXJ0Q29yb3V0aW5lKEluc3RhbmNlLldhaXRBY3Rpb24od2FpdFRpbWUsIGFjdGlvbikpOwoJfQoJSUVudW1lcmF0b3IgV2FpdEFjdGlvbihmbG9hdCB3YWl0VGltZSwgQWN0aW9uIGFjdGlvbikKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHdhaXRUaW1lKTsKCQlhY3Rpb24/Lkludm9rZSgpOwoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTdGFydE5leHRGcmFtZUFjdGlvbihBY3Rpb24gYWN0aW9uKQoJewoJCUluc3RhbmNlLlN0YXJ0Q29yb3V0aW5lKEluc3RhbmNlLk5leHRGcmFtZUFjdGlvbihhY3Rpb24pKTsKCX0KCUlFbnVtZXJhdG9yIE5leHRGcmFtZUFjdGlvbihBY3Rpb24gYWN0aW9uKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvck5leHRGcmFtZVVuaXQoKTsKCQlhY3Rpb24/Lkludm9rZSgpOwoJfQoJcHVibGljIHN0YXRpYyBzdHJpbmcgU2NlbmVCb3hJbmZvKEdhbWVPYmplY3Qgc2NlbmVCb3gsIGJvb2wgZGlzcGxheSkKCXsKCQlpZiAoIXNjZW5lQm94KSByZXR1cm4gZGlzcGxheSA/ICLnqbrlnLAiIDogImJsYW5rIjsKCQlzdHJpbmcgc2NlbmVUYWcgPSBzY2VuZUJveC50YWc7CgkJc3dpdGNoIChzY2VuZVRhZykKCQl7CgkJCWNhc2UgInJvYWQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi6YGT6LevIiA6IHNjZW5lVGFnOwoJCQljYXNlICJidWlsZGluZyI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlu7rnrZE6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgInBpdCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlnZE6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgIm1vdW50IjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuWxseS9kzoiIDogc2NlbmVUYWc7CgkJCWNhc2UgIm5wYyI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICJucGM6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgImNyZWF0ZXIiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bu66YCg5LitLi4uIiA6IHNjZW5lVGFnOwoJCQlkZWZhdWx0OgoJCQkJYnJlYWs7CgkJfQoJCXJldHVybiBkaXNwbGF5ID8gIuepuuWcsCIgOiAiYmxhbmsiOwoJfQp9CgAAAAAAAAAAOxUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					3,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABnFQAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENpbmVtYWNoaW5lOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpwdWJsaWMgY2xhc3MgR2FtZU1hbmFnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgR2FtZU1hbmFnZXIgSW5zdGFuY2U7CglwdWJsaWMgc3RhdGljIExvcmRTeXN0ZW0uTG9yZCBMb3JkID0+IEluc3RhbmNlLm1fbG9yZDsKCXB1YmxpYyBzdGF0aWMgQ2hhcmFjdGVyIEN1ckhlcm8gPT4gSW5zdGFuY2UubV9sb3JkLmN1clRyb29wLmxlYWRlcjsKCXB1YmxpYyBzdGF0aWMgU3RvcnlMaXN0ZW5lciBTdG9yeUxpc3RlbmVyID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxTdG9yeUxpc3RlbmVyPigpOwoJcHVibGljIHN0YXRpYyBHYW1lR29hbFN5c3RlbSBHYW1lR29hbCA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8R2FtZUdvYWxTeXN0ZW0+KCk7CglwdWJsaWMgc3RhdGljIExldmVsU3lzdGVtIEdhbWVMZXZlbCA9PiBJbnN0YW5jZS5tX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBVSU1hbmFnZXIgR2FtZVVJOwoJcHVibGljIHN0YXRpYyBLZXlWYWx1ZURhdGEgQ29uZmlnID0+IEluc3RhbmNlLkRlbW9EYXRhOwoJcHVibGljIExpZ2h0TWFuYWdlciBEYXlOaWdodDsKCXB1YmxpYyBDaW5lbWFjaGluZVZpcnR1YWxDYW1lcmEgVkNhbWVyYTsKCXB1YmxpYyBDYW1lcmFDb250cm9sbGVyIENhbWVyYUN0cmw7CglwdWJsaWMgU0ZYTWFuYWdlciBTRlhNYW5hZ2VyOwoJcHVibGljIFRlcnJhaW5Ub29sIFRlcnJhaW5Ub29sOwoJTGV2ZWxTeXN0ZW0gbV9sZXZlbFN5c3RlbTsKCXB1YmxpYyBMaXN0PEZvcm11bGFEYXRhPiBmb3JtdWxhczsKCXB1YmxpYyBMaXN0PFNwYXduZXI+IHNwYXduZXJzOwoJcHVibGljIExldmVsRGF0YSBzdGFydExldmVsOwoJTG9yZFN5c3RlbS5Mb3JkIG1fbG9yZDsKCglwdWJsaWMgc3RhdGljIHZvaWQgU2V0U3RvcnlNb2RlbChib29sIGFjdGl2ZSwgQWN0aW9uIGFjdGlvbiA9IG51bGwpCgl7CgkJaWYgKHN0b3J5TW9kZSA9PSBhY3RpdmUpIHsgYWN0aW9uPy5JbnZva2UoKTsgcmV0dXJuOyB9CgkJc3RvcnlNb2RlID0gYWN0aXZlOwoJCUdhbWVVSS5Kb3lTdGljay5lbmFibGVkID0gIWFjdGl2ZTsKCQlpZiAoYWN0aXZlKQoJCXsKCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5TVE9SWSwgYWN0aW9uKTsKCQkJQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklOQUNUSVZFKTsKCQl9CgkJZWxzZQoJCXsKCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5SUEcsIGFjdGlvbik7CgkJCUN1ckhlcm8uQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JRExFKTsKCQl9Cgl9CglwdWJsaWMgc3RhdGljIGJvb2wgc3RvcnlNb2RlIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCVRyYW5zZm9ybSB1aV90cmFuczsKCVtTZXJpYWxpemVGaWVsZF0KCVRyYW5zZm9ybSBwb3NpdGlvbl9ib3JuOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVmVjdG9yMiBiYXNlQm91bmRhcnlfTEI7CglbU2VyaWFsaXplRmllbGRdCglWZWN0b3IyIGJhc2VCb3VuZGFyeV9SVDsKCVtTZXJpYWxpemVGaWVsZF0KCUdhbWVPYmplY3QgcHJlZmFiX2NoYXJhY3RlcjsKCVtTZXJpYWxpemVGaWVsZF0KCUdhbWVPYmplY3QgcHJlZmFiX2dhbWV1aTsKCglbU2VyaWFsaXplRmllbGRdCglLZXlWYWx1ZURhdGEgRGVtb0RhdGE7CglJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZCB0ZXN0RGVtYW5kOwoJcHJpdmF0ZSB2b2lkIEF3YWtlKCkKCXsKCQlJbnN0YW5jZSA9IHRoaXM7CgkJbV9sb3JkID0gbmV3IExvcmRTeXN0ZW0uTG9yZChuZXcgaW50WzNdIHsgMSwgMiwgMyB9KTsKCQltX2xvcmQuY3VyVHJvb3AgPSBtX2xvcmQuQWRkVHJvb3AoSW5zdGFudGlhdGUocHJlZmFiX2NoYXJhY3RlciwgcG9zaXRpb25fYm9ybi5wb3NpdGlvbiwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKS5HZXRDb21wb25lbnQ8Q2hhcmFjdGVyPigpKTsKCQlHYW1lR29hbC5Jbml0KCk7CgkJU0ZYTWFuYWdlci5MaXN0ZW5lclRhcmdldCA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgkJR2FtZVVJID0gSW5zdGFudGlhdGUocHJlZmFiX2dhbWV1aSkuR2V0Q29tcG9uZW50PFVJTWFuYWdlcj4oKTsKCQlHYW1lVUkudHJhbnNmb3JtLlNldFBhcmVudCh1aV90cmFucyk7CgkJVkNhbWVyYS5Gb2xsb3cgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoJCVZDYW1lcmEuTG9va0F0ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCgkJbV9sZXZlbFN5c3RlbSA9IG5ldyBMZXZlbFN5c3RlbSgpOwoKCgkJLy8g5rOo5YaM5bqU55So6YCA5Ye65LqL5Lu2CgkJQXBwbGljYXRpb24ucXVpdHRpbmcgKz0gT25BcHBsaWNhdGlvblF1aXQ7CgkJUXVhbGl0eVNldHRpbmdzLnZTeW5jQ291bnQgPSAwOwoJCUFwcGxpY2F0aW9uLnRhcmdldEZyYW1lUmF0ZSA9IDYwOwoJfQoKCXZvaWQgU3RhcnQoKQoJewoJCVJlc0ludmVudG9yeUl0ZW0gbW9uZXlJbnZlbnRvcnkgPSBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8SXRlbT4oR2FtZU1hbmFnZXIuQ29uZmlnLkl0ZW0sICJSZXNJbnZlbnRvcnlfTW9uZXkiKSBhcyBSZXNJbnZlbnRvcnlJdGVtOwoJCWlmIChtb25leUludmVudG9yeSkgR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkuUmVzSW52ZW50b3JpZXMuQWRkKFJlc0l0ZW0uUmVzVHlwZS5Nb25leSwgbmV3IEludmVudG9yeVN5c3RlbS5SZXNJbnZlbnRvcnkobW9uZXlJbnZlbnRvcnkpKTsKCQlHYW1lVUkuT3BlbldpbmRvdygid2luTGV2ZWxTZWxlY3QiKTsKCX0KCgl2b2lkIE9uQXBwbGljYXRpb25RdWl0KCkKCXsKCQlIZWxwZXJzLkxvZyh0aGlzLCAiQXBwbGljYXRpb25RdWl0Iik7CgkJVGVycmFpblRvb2wuUmVzZXRUZXJyYWluRGF0YSgpOwoJfQoKCXByaXZhdGUgdm9pZCBVcGRhdGUoKQoJewoJCWlmIChJbnB1dC5HZXRLZXlEb3duKCJzcGFjZSIpKQoJCXsKCQkJaWYgKENhbWVyYUN0cmwuQ3VyTW9kZSAhPSBDYW1lcmFDb250cm9sbGVyLk1vZGUuQlVJTEQpIENhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuQlVJTEQpOwoJCQllbHNlIENhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuUlBHKTsKCQkJLy9VSUh1ZENhbnZhcy5JbnN0YW5jZS5idXR0b24udHJhbnNmb3JtLnBvc2l0aW9uID0gQ2FtZXJhLm1haW4uV29ybGRUb1NjcmVlblBvaW50KEN1ckhlcm8udHJhbnNmb3JtLnBvc2l0aW9uKTsKCQl9CgoJCS8vIGlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQkvLyB7CgkJLy8gCUxvY2FsTmF2TWVzaEJ1aWxkZXIgYnVpbGRlciA9IEdldENvbXBvbmVudDxMb2NhbE5hdk1lc2hCdWlsZGVyPigpOwoKCQkvLyAJR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShSZXNvdXJjZXMuTG9hZCgiYnVpbGRpbmdfaG90ZWwiKSwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCS8vR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShwcmVmYWIsIGJ1aWxkZXIuR2V0TmF2TWVzaFJhbmRvbVBvcyhnYW1lT2JqZWN0KSwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKSBhcyBHYW1lT2JqZWN0OwoJCS8vIAlEZWJ1Zy5Mb2coImJ1aWxkIGF0IDoiICsgb2JqLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJLy8gfQoJCWlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQl7CgkJCUN1ckhlcm8uQmFzZUFJLkJhY2soNS4wZik7CgkJfQoKCQlmbG9hdCBtb3VzZVdoZWVsID0gSW5wdXQuR2V0QXhpcygiTW91c2UgU2Nyb2xsV2hlZWwiKTsKCQlpZiAoIU1hdGhmLkFwcHJveGltYXRlbHkobW91c2VXaGVlbCwgMC4wZikpCgkJewoJCQlWZWN0b3IzIHZpZXcgPSBDYW1lcmEubWFpbi5TY3JlZW5Ub1ZpZXdwb3J0UG9pbnQoSW5wdXQubW91c2VQb3NpdGlvbik7CgkJCWlmICh2aWV3LnggPiAwZiAmJiB2aWV3LnggPCAxZiAmJiB2aWV3LnkgPiAwZiAmJiB2aWV3LnkgPCAxZikKCQkJCUNhbWVyYUN0cmwuWm9vbSgtbW91c2VXaGVlbCAqIFRpbWUuZGVsdGFUaW1lICogMjAuMGYpOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgU3RhcnRXYWl0QWN0aW9uKGZsb2F0IHdhaXRUaW1lLCBBY3Rpb24gYWN0aW9uKQoJewoJCUluc3RhbmNlLlN0YXJ0Q29yb3V0aW5lKEluc3RhbmNlLldhaXRBY3Rpb24od2FpdFRpbWUsIGFjdGlvbikpOwoJfQoJSUVudW1lcmF0b3IgV2FpdEFjdGlvbihmbG9hdCB3YWl0VGltZSwgQWN0aW9uIGFjdGlvbikKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHdhaXRUaW1lKTsKCQlhY3Rpb24/Lkludm9rZSgpOwoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTdGFydE5leHRGcmFtZUFjdGlvbihBY3Rpb24gYWN0aW9uKQoJewoJCUluc3RhbmNlLlN0YXJ0Q29yb3V0aW5lKEluc3RhbmNlLk5leHRGcmFtZUFjdGlvbihhY3Rpb24pKTsKCX0KCUlFbnVtZXJhdG9yIE5leHRGcmFtZUFjdGlvbihBY3Rpb24gYWN0aW9uKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvck5leHRGcmFtZVVuaXQoKTsKCQlhY3Rpb24/Lkludm9rZSgpOwoJfQoJcHVibGljIHN0YXRpYyBzdHJpbmcgU2NlbmVCb3hJbmZvKEdhbWVPYmplY3Qgc2NlbmVCb3gsIGJvb2wgZGlzcGxheSkKCXsKCQlpZiAoIXNjZW5lQm94KSByZXR1cm4gZGlzcGxheSA/ICLnqbrlnLAiIDogImJsYW5rIjsKCQlzdHJpbmcgc2NlbmVUYWcgPSBzY2VuZUJveC50YWc7CgkJc3dpdGNoIChzY2VuZVRhZykKCQl7CgkJCWNhc2UgInJvYWQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi6YGT6LevIiA6IHNjZW5lVGFnOwoJCQljYXNlICJidWlsZGluZyI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlu7rnrZE6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgInBpdCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlnZE6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgIm1vdW50IjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuWxseS9kzoiIDogc2NlbmVUYWc7CgkJCWNhc2UgIm5wYyI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICJucGM6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgImNyZWF0ZXIiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bu66YCg5LitLi4uIiA6IHNjZW5lVGFnOwoJCQlkZWZhdWx0OgoJCQkJYnJlYWs7CgkJfQoJCXJldHVybiBkaXNwbGF5ID8gIuepuuWcsCIgOiAiYmxhbmsiOwoJfQp9CgAAAAAAAAAAPRUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABpFQAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBTeXN0ZW0uUmVmbGVjdGlvbjsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENpbmVtYWNoaW5lOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgQ3JlYXRvcktpdENvZGVJbnRlcm5hbDsKdXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzOwp1c2luZyBVbml0eS5WaXN1YWxTY3JpcHRpbmc7CgpwdWJsaWMgY2xhc3MgR2FtZU1hbmFnZXIgOiBNb25vQmVoYXZpb3VyCnsKCXB1YmxpYyBzdGF0aWMgR2FtZU1hbmFnZXIgSW5zdGFuY2U7CglwdWJsaWMgc3RhdGljIExvcmRTeXN0ZW0uTG9yZCBMb3JkID0+IEluc3RhbmNlLm1fbG9yZDsKCXB1YmxpYyBzdGF0aWMgQ2hhcmFjdGVyIEN1ckhlcm8gPT4gSW5zdGFuY2UubV9sb3JkLnJwZ1Ryb29wLmxlYWRlcjsKCXB1YmxpYyBzdGF0aWMgU3RvcnlMaXN0ZW5lciBTdG9yeUxpc3RlbmVyID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxTdG9yeUxpc3RlbmVyPigpOwoJcHVibGljIHN0YXRpYyBHYW1lR29hbFN5c3RlbSBHYW1lR29hbCA9PiBJbnN0YW5jZS5HZXRDb21wb25lbnQ8R2FtZUdvYWxTeXN0ZW0+KCk7CglwdWJsaWMgc3RhdGljIExldmVsU3lzdGVtIEdhbWVMZXZlbCA9PiBJbnN0YW5jZS5tX2xldmVsU3lzdGVtOwoJcHVibGljIHN0YXRpYyBVSU1hbmFnZXIgR2FtZVVJOwoJcHVibGljIHN0YXRpYyBLZXlWYWx1ZURhdGEgQ29uZmlnID0+IEluc3RhbmNlLkRlbW9EYXRhOwoJcHVibGljIExpZ2h0TWFuYWdlciBEYXlOaWdodDsKCXB1YmxpYyBDaW5lbWFjaGluZVZpcnR1YWxDYW1lcmEgVkNhbWVyYTsKCXB1YmxpYyBDYW1lcmFDb250cm9sbGVyIENhbWVyYUN0cmw7CglwdWJsaWMgU0ZYTWFuYWdlciBTRlhNYW5hZ2VyOwoJcHVibGljIFRlcnJhaW5Ub29sIFRlcnJhaW5Ub29sOwoJTGV2ZWxTeXN0ZW0gbV9sZXZlbFN5c3RlbTsKCXB1YmxpYyBMaXN0PEZvcm11bGFEYXRhPiBmb3JtdWxhczsKCXB1YmxpYyBMaXN0PFNwYXduZXI+IHNwYXduZXJzOwoJcHVibGljIExldmVsRGF0YSBzdGFydExldmVsOwoJTG9yZFN5c3RlbS5Mb3JkIG1fbG9yZDsKCglwdWJsaWMgc3RhdGljIHZvaWQgU2V0U3RvcnlNb2RlbChib29sIGFjdGl2ZSwgQWN0aW9uIGFjdGlvbiA9IG51bGwpCgl7CgkJaWYgKHN0b3J5TW9kZSA9PSBhY3RpdmUpIHsgYWN0aW9uPy5JbnZva2UoKTsgcmV0dXJuOyB9CgkJc3RvcnlNb2RlID0gYWN0aXZlOwoJCUdhbWVVSS5Kb3lTdGljay5lbmFibGVkID0gIWFjdGl2ZTsKCQlpZiAoYWN0aXZlKQoJCXsKCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5TVE9SWSwgYWN0aW9uKTsKCQkJQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklOQUNUSVZFKTsKCQl9CgkJZWxzZQoJCXsKCQkJSW5zdGFuY2UuQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5SUEcsIGFjdGlvbik7CgkJCUN1ckhlcm8uQmFzZUFJLlNldFN0YXRlKEFJQmFzZS5TdGF0ZS5JRExFKTsKCQl9Cgl9CglwdWJsaWMgc3RhdGljIGJvb2wgc3RvcnlNb2RlIHsgZ2V0OyBwcml2YXRlIHNldDsgfQoKCVtTZXJpYWxpemVGaWVsZF0KCVRyYW5zZm9ybSB1aV90cmFuczsKCVtTZXJpYWxpemVGaWVsZF0KCVRyYW5zZm9ybSBwb3NpdGlvbl9ib3JuOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVmVjdG9yMiBiYXNlQm91bmRhcnlfTEI7CglbU2VyaWFsaXplRmllbGRdCglWZWN0b3IyIGJhc2VCb3VuZGFyeV9SVDsKCVtTZXJpYWxpemVGaWVsZF0KCUdhbWVPYmplY3QgcHJlZmFiX2NoYXJhY3RlcjsKCVtTZXJpYWxpemVGaWVsZF0KCUdhbWVPYmplY3QgcHJlZmFiX2dhbWV1aTsKCglbU2VyaWFsaXplRmllbGRdCglLZXlWYWx1ZURhdGEgRGVtb0RhdGE7CglJbnZlbnRvcnlTeXN0ZW0uSXRlbURlbWFuZCB0ZXN0RGVtYW5kOwoJcHJpdmF0ZSB2b2lkIEF3YWtlKCkKCXsKCQlJbnN0YW5jZSA9IHRoaXM7CgkJbV9sb3JkID0gbmV3IExvcmRTeXN0ZW0uTG9yZChuZXcgaW50WzNdIHsgMSwgMiwgMyB9KTsKCQltX2xvcmQuU2V0UnBnVHJvb3AobV9sb3JkLkFkZFRyb29wKEluc3RhbnRpYXRlKHByZWZhYl9jaGFyYWN0ZXIsIHBvc2l0aW9uX2Jvcm4ucG9zaXRpb24sIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSkuR2V0Q29tcG9uZW50PENoYXJhY3Rlcj4oKSkpOwoJCUdhbWVHb2FsLkluaXQoKTsKCQlTRlhNYW5hZ2VyLkxpc3RlbmVyVGFyZ2V0ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCQlHYW1lVUkgPSBJbnN0YW50aWF0ZShwcmVmYWJfZ2FtZXVpKS5HZXRDb21wb25lbnQ8VUlNYW5hZ2VyPigpOwoJCUdhbWVVSS50cmFuc2Zvcm0uU2V0UGFyZW50KHVpX3RyYW5zKTsKCQlWQ2FtZXJhLkZvbGxvdyA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgkJVkNhbWVyYS5Mb29rQXQgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoKCQltX2xldmVsU3lzdGVtID0gbmV3IExldmVsU3lzdGVtKCk7CgoKCQkvLyDms6jlhozlupTnlKjpgIDlh7rkuovku7YKCQlBcHBsaWNhdGlvbi5xdWl0dGluZyArPSBPbkFwcGxpY2F0aW9uUXVpdDsKCQlRdWFsaXR5U2V0dGluZ3MudlN5bmNDb3VudCA9IDA7CgkJQXBwbGljYXRpb24udGFyZ2V0RnJhbWVSYXRlID0gNjA7Cgl9CgoJdm9pZCBTdGFydCgpCgl7CgkJUmVzSW52ZW50b3J5SXRlbSBtb25leUludmVudG9yeSA9IEtleVZhbHVlRGF0YS5HZXRWYWx1ZTxJdGVtPihHYW1lTWFuYWdlci5Db25maWcuSXRlbSwgIlJlc0ludmVudG9yeV9Nb25leSIpIGFzIFJlc0ludmVudG9yeUl0ZW07CgkJaWYgKG1vbmV5SW52ZW50b3J5KSBHYW1lTWFuYWdlci5DdXJIZXJvLkludmVudG9yeS5SZXNJbnZlbnRvcmllcy5BZGQoUmVzSXRlbS5SZXNUeXBlLk1vbmV5LCBuZXcgSW52ZW50b3J5U3lzdGVtLlJlc0ludmVudG9yeShtb25leUludmVudG9yeSkpOwoJCUdhbWVVSS5PcGVuV2luZG93KCJ3aW5MZXZlbFNlbGVjdCIpOwoJfQoKCXZvaWQgT25BcHBsaWNhdGlvblF1aXQoKQoJewoJCUhlbHBlcnMuTG9nKHRoaXMsICJBcHBsaWNhdGlvblF1aXQiKTsKCQlUZXJyYWluVG9vbC5SZXNldFRlcnJhaW5EYXRhKCk7Cgl9CgoJcHJpdmF0ZSB2b2lkIFVwZGF0ZSgpCgl7CgkJaWYgKElucHV0LkdldEtleURvd24oInNwYWNlIikpCgkJewoJCQlpZiAoQ2FtZXJhQ3RybC5DdXJNb2RlICE9IENhbWVyYUNvbnRyb2xsZXIuTW9kZS5CVUlMRCkgQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5CVUlMRCk7CgkJCWVsc2UgQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5SUEcpOwoJCQkvL1VJSHVkQ2FudmFzLkluc3RhbmNlLmJ1dHRvbi50cmFuc2Zvcm0ucG9zaXRpb24gPSBDYW1lcmEubWFpbi5Xb3JsZFRvU2NyZWVuUG9pbnQoQ3VySGVyby50cmFuc2Zvcm0ucG9zaXRpb24pOwoJCX0KCgkJLy8gaWYgKElucHV0LkdldEtleURvd24oS2V5Q29kZS5SZXR1cm4pKQoJCS8vIHsKCQkvLyAJTG9jYWxOYXZNZXNoQnVpbGRlciBidWlsZGVyID0gR2V0Q29tcG9uZW50PExvY2FsTmF2TWVzaEJ1aWxkZXI+KCk7CgoJCS8vIAlHYW1lT2JqZWN0IG9iaiA9IEluc3RhbnRpYXRlKFJlc291cmNlcy5Mb2FkKCJidWlsZGluZ19ob3RlbCIpLCBidWlsZGVyLkdldE5hdk1lc2hSYW5kb21Qb3MoZ2FtZU9iamVjdCksIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSkgYXMgR2FtZU9iamVjdDsKCQkvLyAJLy9HYW1lT2JqZWN0IG9iaiA9IEluc3RhbnRpYXRlKHByZWZhYiwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCURlYnVnLkxvZygiYnVpbGQgYXQgOiIgKyBvYmoudHJhbnNmb3JtLnBvc2l0aW9uKTsKCQkvLyB9CgkJaWYgKElucHV0LkdldEtleURvd24oS2V5Q29kZS5SZXR1cm4pKQoJCXsKCQkJQ3VySGVyby5CYXNlQUkuQmFjayg1LjBmKTsKCQl9CgoJCWZsb2F0IG1vdXNlV2hlZWwgPSBJbnB1dC5HZXRBeGlzKCJNb3VzZSBTY3JvbGxXaGVlbCIpOwoJCWlmICghTWF0aGYuQXBwcm94aW1hdGVseShtb3VzZVdoZWVsLCAwLjBmKSkKCQl7CgkJCVZlY3RvcjMgdmlldyA9IENhbWVyYS5tYWluLlNjcmVlblRvVmlld3BvcnRQb2ludChJbnB1dC5tb3VzZVBvc2l0aW9uKTsKCQkJaWYgKHZpZXcueCA+IDBmICYmIHZpZXcueCA8IDFmICYmIHZpZXcueSA+IDBmICYmIHZpZXcueSA8IDFmKQoJCQkJQ2FtZXJhQ3RybC5ab29tKC1tb3VzZVdoZWVsICogVGltZS5kZWx0YVRpbWUgKiAyMC4wZik7CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTdGFydFdhaXRBY3Rpb24oZmxvYXQgd2FpdFRpbWUsIEFjdGlvbiBhY3Rpb24pCgl7CgkJSW5zdGFuY2UuU3RhcnRDb3JvdXRpbmUoSW5zdGFuY2UuV2FpdEFjdGlvbih3YWl0VGltZSwgYWN0aW9uKSk7Cgl9CglJRW51bWVyYXRvciBXYWl0QWN0aW9uKGZsb2F0IHdhaXRUaW1lLCBBY3Rpb24gYWN0aW9uKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMod2FpdFRpbWUpOwoJCWFjdGlvbj8uSW52b2tlKCk7Cgl9CgoJcHVibGljIHN0YXRpYyB2b2lkIFN0YXJ0TmV4dEZyYW1lQWN0aW9uKEFjdGlvbiBhY3Rpb24pCgl7CgkJSW5zdGFuY2UuU3RhcnRDb3JvdXRpbmUoSW5zdGFuY2UuTmV4dEZyYW1lQWN0aW9uKGFjdGlvbikpOwoJfQoJSUVudW1lcmF0b3IgTmV4dEZyYW1lQWN0aW9uKEFjdGlvbiBhY3Rpb24pCgl7CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yTmV4dEZyYW1lVW5pdCgpOwoJCWFjdGlvbj8uSW52b2tlKCk7Cgl9CglwdWJsaWMgc3RhdGljIHN0cmluZyBTY2VuZUJveEluZm8oR2FtZU9iamVjdCBzY2VuZUJveCwgYm9vbCBkaXNwbGF5KQoJewoJCWlmICghc2NlbmVCb3gpIHJldHVybiBkaXNwbGF5ID8gIuepuuWcsCIgOiAiYmxhbmsiOwoJCXN0cmluZyBzY2VuZVRhZyA9IHNjZW5lQm94LnRhZzsKCQlzd2l0Y2ggKHNjZW5lVGFnKQoJCXsKCQkJY2FzZSAicm9hZCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLpgZPot68iIDogc2NlbmVUYWc7CgkJCWNhc2UgImJ1aWxkaW5nIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuW7uuetkToiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAicGl0IjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuWdkToiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAibW91bnQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bGx5L2TOiIgOiBzY2VuZVRhZzsKCQkJY2FzZSAibnBjIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIm5wYzoiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAiY3JlYXRlciI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlu7rpgKDkuK0uLi4iIDogc2NlbmVUYWc7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9CgkJcmV0dXJuIGRpc3BsYXkgPyAi56m65ZywIiA6ICJibGFuayI7Cgl9Cn0KAAAAAAAAAABXFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACDFAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ2luZW1hY2hpbmU7CnVzaW5nIFVuaXR5LlZpc3VhbFNjcmlwdGluZzsKCnB1YmxpYyBjbGFzcyBHYW1lTWFuYWdlciA6IE1vbm9CZWhhdmlvdXIKewoJcHVibGljIHN0YXRpYyBHYW1lTWFuYWdlciBJbnN0YW5jZTsKCXB1YmxpYyBzdGF0aWMgTG9yZFN5c3RlbS5Mb3JkIExvcmQgPT4gSW5zdGFuY2UubV9sb3JkOwoJcHVibGljIHN0YXRpYyBDaGFyYWN0ZXIgQ3VySGVybyA9PiBJbnN0YW5jZS5tX2xvcmQucnBnVHJvb3AubGVhZGVyOwoJcHVibGljIHN0YXRpYyBTdG9yeUxpc3RlbmVyIFN0b3J5TGlzdGVuZXIgPT4gSW5zdGFuY2UuR2V0Q29tcG9uZW50PFN0b3J5TGlzdGVuZXI+KCk7CglwdWJsaWMgc3RhdGljIEdhbWVHb2FsU3lzdGVtIEdhbWVHb2FsID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxHYW1lR29hbFN5c3RlbT4oKTsKCXB1YmxpYyBzdGF0aWMgTGV2ZWxTeXN0ZW0gR2FtZUxldmVsID0+IEluc3RhbmNlLm1fbGV2ZWxTeXN0ZW07CglwdWJsaWMgc3RhdGljIFVJTWFuYWdlciBHYW1lVUk7CglwdWJsaWMgc3RhdGljIEtleVZhbHVlRGF0YSBDb25maWcgPT4gSW5zdGFuY2UuRGVtb0RhdGE7CglwdWJsaWMgTGlnaHRNYW5hZ2VyIERheU5pZ2h0OwoJcHVibGljIENpbmVtYWNoaW5lVmlydHVhbENhbWVyYSBWQ2FtZXJhOwoJcHVibGljIENhbWVyYUNvbnRyb2xsZXIgQ2FtZXJhQ3RybDsKCXB1YmxpYyBTRlhNYW5hZ2VyIFNGWE1hbmFnZXI7CglwdWJsaWMgVGVycmFpblRvb2wgVGVycmFpblRvb2w7CglMZXZlbFN5c3RlbSBtX2xldmVsU3lzdGVtOwoJcHVibGljIExpc3Q8Rm9ybXVsYURhdGE+IGZvcm11bGFzOwoJcHVibGljIExpc3Q8U3Bhd25lcj4gc3Bhd25lcnM7CglwdWJsaWMgTGV2ZWxEYXRhIHN0YXJ0TGV2ZWw7CglMb3JkU3lzdGVtLkxvcmQgbV9sb3JkOwoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTZXRTdG9yeU1vZGVsKGJvb2wgYWN0aXZlLCBBY3Rpb24gYWN0aW9uID0gbnVsbCkKCXsKCQlpZiAoc3RvcnlNb2RlID09IGFjdGl2ZSkgeyBhY3Rpb24/Lkludm9rZSgpOyByZXR1cm47IH0KCQlzdG9yeU1vZGUgPSBhY3RpdmU7CgkJR2FtZVVJLkpveVN0aWNrLmVuYWJsZWQgPSAhYWN0aXZlOwoJCWlmIChhY3RpdmUpCgkJewoJCQlJbnN0YW5jZS5DYW1lcmFDdHJsLlNldE1vZGUoQ2FtZXJhQ29udHJvbGxlci5Nb2RlLlNUT1JZLCBhY3Rpb24pOwoJCQlDdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSU5BQ1RJVkUpOwoJCX0KCQllbHNlCgkJewoJCQlJbnN0YW5jZS5DYW1lcmFDdHJsLlNldE1vZGUoQ2FtZXJhQ29udHJvbGxlci5Nb2RlLlJQRywgYWN0aW9uKTsKCQkJQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklETEUpOwoJCX0KCX0KCXB1YmxpYyBzdGF0aWMgYm9vbCBzdG9yeU1vZGUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CgoJW1NlcmlhbGl6ZUZpZWxkXQoJVHJhbnNmb3JtIHVpX3RyYW5zOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVHJhbnNmb3JtIHBvc2l0aW9uX2Jvcm47CglbU2VyaWFsaXplRmllbGRdCglHYW1lT2JqZWN0IHByZWZhYl9jaGFyYWN0ZXI7CglbU2VyaWFsaXplRmllbGRdCglHYW1lT2JqZWN0IHByZWZhYl9nYW1ldWk7CgoJW1NlcmlhbGl6ZUZpZWxkXQoJS2V5VmFsdWVEYXRhIERlbW9EYXRhOwoKCXByaXZhdGUgdm9pZCBBd2FrZSgpCgl7CgkJSW5zdGFuY2UgPSB0aGlzOwoJCW1fbG9yZCA9IG5ldyBMb3JkU3lzdGVtLkxvcmQobmV3IGludFszXSB7IDEsIDIsIDMgfSk7CgkJbV9sb3JkLlNldFJwZ1Ryb29wKG1fbG9yZC5BZGRUcm9vcChJbnN0YW50aWF0ZShwcmVmYWJfY2hhcmFjdGVyLCBwb3NpdGlvbl9ib3JuLnBvc2l0aW9uLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpLkdldENvbXBvbmVudDxDaGFyYWN0ZXI+KCkpKTsKCQlHYW1lR29hbC5Jbml0KCk7CgkJU0ZYTWFuYWdlci5MaXN0ZW5lclRhcmdldCA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgkJR2FtZVVJID0gSW5zdGFudGlhdGUocHJlZmFiX2dhbWV1aSkuR2V0Q29tcG9uZW50PFVJTWFuYWdlcj4oKTsKCQlHYW1lVUkudHJhbnNmb3JtLlNldFBhcmVudCh1aV90cmFucyk7CgkJVkNhbWVyYS5Gb2xsb3cgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoJCVZDYW1lcmEuTG9va0F0ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCgkJbV9sZXZlbFN5c3RlbSA9IG5ldyBMZXZlbFN5c3RlbSgpOwoKCgkJLy8g5rOo5YaM5bqU55So6YCA5Ye65LqL5Lu2CgkJQXBwbGljYXRpb24ucXVpdHRpbmcgKz0gT25BcHBsaWNhdGlvblF1aXQ7CgkJUXVhbGl0eVNldHRpbmdzLnZTeW5jQ291bnQgPSAwOwoJCUFwcGxpY2F0aW9uLnRhcmdldEZyYW1lUmF0ZSA9IDYwOwoJfQoKCXZvaWQgU3RhcnQoKQoJewoJCVJlc0ludmVudG9yeUl0ZW0gbW9uZXlJbnZlbnRvcnkgPSBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8SXRlbT4oR2FtZU1hbmFnZXIuQ29uZmlnLkl0ZW0sICJSZXNJbnZlbnRvcnlfTW9uZXkiKSBhcyBSZXNJbnZlbnRvcnlJdGVtOwoJCWlmIChtb25leUludmVudG9yeSkgR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkuUmVzSW52ZW50b3JpZXMuQWRkKFJlc0l0ZW0uUmVzVHlwZS5Nb25leSwgbmV3IEludmVudG9yeVN5c3RlbS5SZXNJbnZlbnRvcnkobW9uZXlJbnZlbnRvcnkpKTsKCQlHYW1lVUkuT3BlbldpbmRvdygid2luTGV2ZWxTZWxlY3QiKTsKCX0KCgl2b2lkIE9uQXBwbGljYXRpb25RdWl0KCkKCXsKCQlIZWxwZXJzLkxvZyh0aGlzLCAiQXBwbGljYXRpb25RdWl0Iik7CgkJVGVycmFpblRvb2wuUmVzZXRUZXJyYWluRGF0YSgpOwoJfQoKCXByaXZhdGUgdm9pZCBVcGRhdGUoKQoJewoJCWlmIChJbnB1dC5HZXRLZXlEb3duKCJzcGFjZSIpKQoJCXsKCQkJaWYgKENhbWVyYUN0cmwuQ3VyTW9kZSAhPSBDYW1lcmFDb250cm9sbGVyLk1vZGUuQlVJTEQpIENhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuQlVJTEQpOwoJCQllbHNlIENhbWVyYUN0cmwuU2V0TW9kZShDYW1lcmFDb250cm9sbGVyLk1vZGUuUlBHKTsKCQkJLy9VSUh1ZENhbnZhcy5JbnN0YW5jZS5idXR0b24udHJhbnNmb3JtLnBvc2l0aW9uID0gQ2FtZXJhLm1haW4uV29ybGRUb1NjcmVlblBvaW50KEN1ckhlcm8udHJhbnNmb3JtLnBvc2l0aW9uKTsKCQl9CgoJCS8vIGlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQkvLyB7CgkJLy8gCUxvY2FsTmF2TWVzaEJ1aWxkZXIgYnVpbGRlciA9IEdldENvbXBvbmVudDxMb2NhbE5hdk1lc2hCdWlsZGVyPigpOwoKCQkvLyAJR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShSZXNvdXJjZXMuTG9hZCgiYnVpbGRpbmdfaG90ZWwiKSwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCS8vR2FtZU9iamVjdCBvYmogPSBJbnN0YW50aWF0ZShwcmVmYWIsIGJ1aWxkZXIuR2V0TmF2TWVzaFJhbmRvbVBvcyhnYW1lT2JqZWN0KSwgUXVhdGVybmlvbi5FdWxlcigwLCAxODAsIDApKSBhcyBHYW1lT2JqZWN0OwoJCS8vIAlEZWJ1Zy5Mb2coImJ1aWxkIGF0IDoiICsgb2JqLnRyYW5zZm9ybS5wb3NpdGlvbik7CgkJLy8gfQoJCWlmIChJbnB1dC5HZXRLZXlEb3duKEtleUNvZGUuUmV0dXJuKSkKCQl7CgkJCUN1ckhlcm8uQmFzZUFJLkJhY2soNS4wZik7CgkJfQoKCQlmbG9hdCBtb3VzZVdoZWVsID0gSW5wdXQuR2V0QXhpcygiTW91c2UgU2Nyb2xsV2hlZWwiKTsKCQlpZiAoIU1hdGhmLkFwcHJveGltYXRlbHkobW91c2VXaGVlbCwgMC4wZikpCgkJewoJCQlWZWN0b3IzIHZpZXcgPSBDYW1lcmEubWFpbi5TY3JlZW5Ub1ZpZXdwb3J0UG9pbnQoSW5wdXQubW91c2VQb3NpdGlvbik7CgkJCWlmICh2aWV3LnggPiAwZiAmJiB2aWV3LnggPCAxZiAmJiB2aWV3LnkgPiAwZiAmJiB2aWV3LnkgPCAxZikKCQkJCUNhbWVyYUN0cmwuWm9vbSgtbW91c2VXaGVlbCAqIFRpbWUuZGVsdGFUaW1lICogMjAuMGYpOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgU3RhcnRXYWl0QWN0aW9uKGZsb2F0IHdhaXRUaW1lLCBBY3Rpb24gYWN0aW9uKQoJewoJCUluc3RhbmNlLlN0YXJ0Q29yb3V0aW5lKEluc3RhbmNlLldhaXRBY3Rpb24od2FpdFRpbWUsIGFjdGlvbikpOwoJfQoJSUVudW1lcmF0b3IgV2FpdEFjdGlvbihmbG9hdCB3YWl0VGltZSwgQWN0aW9uIGFjdGlvbikKCXsKCQl5aWVsZCByZXR1cm4gbmV3IFdhaXRGb3JTZWNvbmRzKHdhaXRUaW1lKTsKCQlhY3Rpb24/Lkludm9rZSgpOwoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTdGFydE5leHRGcmFtZUFjdGlvbihBY3Rpb24gYWN0aW9uKQoJewoJCUluc3RhbmNlLlN0YXJ0Q29yb3V0aW5lKEluc3RhbmNlLk5leHRGcmFtZUFjdGlvbihhY3Rpb24pKTsKCX0KCUlFbnVtZXJhdG9yIE5leHRGcmFtZUFjdGlvbihBY3Rpb24gYWN0aW9uKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvck5leHRGcmFtZVVuaXQoKTsKCQlhY3Rpb24/Lkludm9rZSgpOwoJfQoJcHVibGljIHN0YXRpYyBzdHJpbmcgU2NlbmVCb3hJbmZvKEdhbWVPYmplY3Qgc2NlbmVCb3gsIGJvb2wgZGlzcGxheSkKCXsKCQlpZiAoIXNjZW5lQm94KSByZXR1cm4gZGlzcGxheSA/ICLnqbrlnLAiIDogImJsYW5rIjsKCQlzdHJpbmcgc2NlbmVUYWcgPSBzY2VuZUJveC50YWc7CgkJc3dpdGNoIChzY2VuZVRhZykKCQl7CgkJCWNhc2UgInJvYWQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi6YGT6LevIiA6IHNjZW5lVGFnOwoJCQljYXNlICJidWlsZGluZyI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlu7rnrZE6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgInBpdCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlnZE6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgIm1vdW50IjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuWxseS9kzoiIDogc2NlbmVUYWc7CgkJCWNhc2UgIm5wYyI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICJucGM6IiArIHNjZW5lQm94IDogc2NlbmVUYWc7CgkJCWNhc2UgImNyZWF0ZXIiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bu66YCg5LitLi4uIiA6IHNjZW5lVGFnOwoJCQlkZWZhdWx0OgoJCQkJYnJlYWs7CgkJfQoJCXJldHVybiBkaXNwbGF5ID8gIuepuuWcsCIgOiAiYmxhbmsiOwoJfQp9CgAAAAAAAAAAXBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACIFAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgQ2luZW1hY2hpbmU7CnVzaW5nIFVuaXR5LlZpc3VhbFNjcmlwdGluZzsKCnB1YmxpYyBjbGFzcyBHYW1lTWFuYWdlciA6IE1vbm9CZWhhdmlvdXIKewoJcHVibGljIHN0YXRpYyBHYW1lTWFuYWdlciBJbnN0YW5jZTsKCXB1YmxpYyBzdGF0aWMgTG9yZFN5c3RlbS5Mb3JkIExvcmQgPT4gSW5zdGFuY2UubV9sb3JkOwoJcHVibGljIHN0YXRpYyBDaGFyYWN0ZXIgQ3VySGVybyA9PiBJbnN0YW5jZS5tX2xvcmQucnBnVHJvb3AubGVhZGVyOwoJcHVibGljIHN0YXRpYyBTdG9yeUxpc3RlbmVyIFN0b3J5TGlzdGVuZXIgPT4gSW5zdGFuY2UuR2V0Q29tcG9uZW50PFN0b3J5TGlzdGVuZXI+KCk7CglwdWJsaWMgc3RhdGljIEdhbWVHb2FsU3lzdGVtIEdhbWVHb2FsID0+IEluc3RhbmNlLkdldENvbXBvbmVudDxHYW1lR29hbFN5c3RlbT4oKTsKCXB1YmxpYyBzdGF0aWMgTGV2ZWxTeXN0ZW0gR2FtZUxldmVsID0+IEluc3RhbmNlLm1fbGV2ZWxTeXN0ZW07CglwdWJsaWMgc3RhdGljIFVJTWFuYWdlciBHYW1lVUk7CglwdWJsaWMgc3RhdGljIEtleVZhbHVlRGF0YSBDb25maWcgPT4gSW5zdGFuY2UuRGVtb0RhdGE7CglwdWJsaWMgTGlnaHRNYW5hZ2VyIERheU5pZ2h0OwoJcHVibGljIENpbmVtYWNoaW5lVmlydHVhbENhbWVyYSBWQ2FtZXJhOwoJcHVibGljIENhbWVyYUNvbnRyb2xsZXIgQ2FtZXJhQ3RybDsKCXB1YmxpYyBTRlhNYW5hZ2VyIFNGWE1hbmFnZXI7CglwdWJsaWMgVGVycmFpblRvb2wgVGVycmFpblRvb2w7CglMZXZlbFN5c3RlbSBtX2xldmVsU3lzdGVtOwoJcHVibGljIExpc3Q8Rm9ybXVsYURhdGE+IGZvcm11bGFzOwoJcHVibGljIExpc3Q8U3Bhd25lcj4gc3Bhd25lcnM7CglwdWJsaWMgTGV2ZWxEYXRhIHN0YXJ0TGV2ZWw7CglMb3JkU3lzdGVtLkxvcmQgbV9sb3JkOwoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTZXRTdG9yeU1vZGVsKGJvb2wgYWN0aXZlLCBBY3Rpb24gYWN0aW9uID0gbnVsbCkKCXsKCQlpZiAoc3RvcnlNb2RlID09IGFjdGl2ZSkgeyBhY3Rpb24/Lkludm9rZSgpOyByZXR1cm47IH0KCQlzdG9yeU1vZGUgPSBhY3RpdmU7CgkJR2FtZVVJLkpveVN0aWNrLmVuYWJsZWQgPSAhYWN0aXZlOwoJCWlmIChhY3RpdmUpCgkJewoJCQlJbnN0YW5jZS5DYW1lcmFDdHJsLlNldE1vZGUoQ2FtZXJhQ29udHJvbGxlci5Nb2RlLlNUT1JZLCBhY3Rpb24pOwoJCQlDdXJIZXJvLkJhc2VBSS5TZXRTdGF0ZShBSUJhc2UuU3RhdGUuSU5BQ1RJVkUpOwoJCX0KCQllbHNlCgkJewoJCQlJbnN0YW5jZS5DYW1lcmFDdHJsLlNldE1vZGUoQ2FtZXJhQ29udHJvbGxlci5Nb2RlLlJQRywgYWN0aW9uKTsKCQkJQ3VySGVyby5CYXNlQUkuU2V0U3RhdGUoQUlCYXNlLlN0YXRlLklETEUpOwoJCX0KCX0KCXB1YmxpYyBzdGF0aWMgYm9vbCBzdG9yeU1vZGUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9CgoJW1NlcmlhbGl6ZUZpZWxkXQoJVHJhbnNmb3JtIHVpX3RyYW5zOwoJW1NlcmlhbGl6ZUZpZWxkXQoJVHJhbnNmb3JtIHBvc2l0aW9uX2Jvcm47CglbU2VyaWFsaXplRmllbGRdCglHYW1lT2JqZWN0IHByZWZhYl9jaGFyYWN0ZXI7CglbU2VyaWFsaXplRmllbGRdCglHYW1lT2JqZWN0IHByZWZhYl9nYW1ldWk7CgoJW1NlcmlhbGl6ZUZpZWxkXQoJS2V5VmFsdWVEYXRhIERlbW9EYXRhOwoKCXByaXZhdGUgdm9pZCBBd2FrZSgpCgl7CgkJSW5zdGFuY2UgPSB0aGlzOwoJCW1fbG9yZCA9IG5ldyBMb3JkU3lzdGVtLkxvcmQobmV3IGludFszXSB7IDEsIDIsIDMgfSk7CgkJbV9sb3JkLlNldFJwZ1Ryb29wKG1fbG9yZC5BZGRUcm9vcChJbnN0YW50aWF0ZShwcmVmYWJfY2hhcmFjdGVyLCBwb3NpdGlvbl9ib3JuLnBvc2l0aW9uLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpLkdldENvbXBvbmVudDxDaGFyYWN0ZXI+KCkpKTsKCQlHYW1lR29hbC5Jbml0KCk7CgkJU0ZYTWFuYWdlci5MaXN0ZW5lclRhcmdldCA9IEN1ckhlcm8uZ2FtZU9iamVjdC50cmFuc2Zvcm07CgkJR2FtZVVJID0gSW5zdGFudGlhdGUocHJlZmFiX2dhbWV1aSkuR2V0Q29tcG9uZW50PFVJTWFuYWdlcj4oKTsKCQlHYW1lVUkudHJhbnNmb3JtLlNldFBhcmVudCh1aV90cmFucyk7CgkJVkNhbWVyYS5Gb2xsb3cgPSBDdXJIZXJvLmdhbWVPYmplY3QudHJhbnNmb3JtOwoJCVZDYW1lcmEuTG9va0F0ID0gQ3VySGVyby5nYW1lT2JqZWN0LnRyYW5zZm9ybTsKCgkJbV9sZXZlbFN5c3RlbSA9IG5ldyBMZXZlbFN5c3RlbSgpOwoKCgkJLy8g5rOo5YaM5bqU55So6YCA5Ye65LqL5Lu2CgkJQXBwbGljYXRpb24ucXVpdHRpbmcgKz0gT25BcHBsaWNhdGlvblF1aXQ7CgkJUXVhbGl0eVNldHRpbmdzLnZTeW5jQ291bnQgPSAwOwoJCUFwcGxpY2F0aW9uLnRhcmdldEZyYW1lUmF0ZSA9IDYwOwoJfQoKCXZvaWQgU3RhcnQoKQoJewoJCVJlc0ludmVudG9yeUl0ZW0gbW9uZXlJbnZlbnRvcnkgPSBLZXlWYWx1ZURhdGEuR2V0VmFsdWU8SXRlbT4oR2FtZU1hbmFnZXIuQ29uZmlnLkl0ZW0sICJSZXNJbnZlbnRvcnlfTW9uZXkiKSBhcyBSZXNJbnZlbnRvcnlJdGVtOwoJCWlmIChtb25leUludmVudG9yeSkgR2FtZU1hbmFnZXIuQ3VySGVyby5JbnZlbnRvcnkuUmVzSW52ZW50b3JpZXMuQWRkKFJlc0l0ZW0uUmVzVHlwZS5Nb25leSwgbmV3IEludmVudG9yeVN5c3RlbS5SZXNJbnZlbnRvcnkobW9uZXlJbnZlbnRvcnkpKTsKCQlHYW1lVUkuR2V0V2luZG93PFVJTGV2ZWxTZWxlY3Q+KCkuT3BlbigpOwoJfQoKCXZvaWQgT25BcHBsaWNhdGlvblF1aXQoKQoJewoJCUhlbHBlcnMuTG9nKHRoaXMsICJBcHBsaWNhdGlvblF1aXQiKTsKCQlUZXJyYWluVG9vbC5SZXNldFRlcnJhaW5EYXRhKCk7Cgl9CgoJcHJpdmF0ZSB2b2lkIFVwZGF0ZSgpCgl7CgkJaWYgKElucHV0LkdldEtleURvd24oInNwYWNlIikpCgkJewoJCQlpZiAoQ2FtZXJhQ3RybC5DdXJNb2RlICE9IENhbWVyYUNvbnRyb2xsZXIuTW9kZS5CVUlMRCkgQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5CVUlMRCk7CgkJCWVsc2UgQ2FtZXJhQ3RybC5TZXRNb2RlKENhbWVyYUNvbnRyb2xsZXIuTW9kZS5SUEcpOwoJCQkvL1VJSHVkQ2FudmFzLkluc3RhbmNlLmJ1dHRvbi50cmFuc2Zvcm0ucG9zaXRpb24gPSBDYW1lcmEubWFpbi5Xb3JsZFRvU2NyZWVuUG9pbnQoQ3VySGVyby50cmFuc2Zvcm0ucG9zaXRpb24pOwoJCX0KCgkJLy8gaWYgKElucHV0LkdldEtleURvd24oS2V5Q29kZS5SZXR1cm4pKQoJCS8vIHsKCQkvLyAJTG9jYWxOYXZNZXNoQnVpbGRlciBidWlsZGVyID0gR2V0Q29tcG9uZW50PExvY2FsTmF2TWVzaEJ1aWxkZXI+KCk7CgoJCS8vIAlHYW1lT2JqZWN0IG9iaiA9IEluc3RhbnRpYXRlKFJlc291cmNlcy5Mb2FkKCJidWlsZGluZ19ob3RlbCIpLCBidWlsZGVyLkdldE5hdk1lc2hSYW5kb21Qb3MoZ2FtZU9iamVjdCksIFF1YXRlcm5pb24uRXVsZXIoMCwgMTgwLCAwKSkgYXMgR2FtZU9iamVjdDsKCQkvLyAJLy9HYW1lT2JqZWN0IG9iaiA9IEluc3RhbnRpYXRlKHByZWZhYiwgYnVpbGRlci5HZXROYXZNZXNoUmFuZG9tUG9zKGdhbWVPYmplY3QpLCBRdWF0ZXJuaW9uLkV1bGVyKDAsIDE4MCwgMCkpIGFzIEdhbWVPYmplY3Q7CgkJLy8gCURlYnVnLkxvZygiYnVpbGQgYXQgOiIgKyBvYmoudHJhbnNmb3JtLnBvc2l0aW9uKTsKCQkvLyB9CgkJaWYgKElucHV0LkdldEtleURvd24oS2V5Q29kZS5SZXR1cm4pKQoJCXsKCQkJQ3VySGVyby5CYXNlQUkuQmFjayg1LjBmKTsKCQl9CgoJCWZsb2F0IG1vdXNlV2hlZWwgPSBJbnB1dC5HZXRBeGlzKCJNb3VzZSBTY3JvbGxXaGVlbCIpOwoJCWlmICghTWF0aGYuQXBwcm94aW1hdGVseShtb3VzZVdoZWVsLCAwLjBmKSkKCQl7CgkJCVZlY3RvcjMgdmlldyA9IENhbWVyYS5tYWluLlNjcmVlblRvVmlld3BvcnRQb2ludChJbnB1dC5tb3VzZVBvc2l0aW9uKTsKCQkJaWYgKHZpZXcueCA+IDBmICYmIHZpZXcueCA8IDFmICYmIHZpZXcueSA+IDBmICYmIHZpZXcueSA8IDFmKQoJCQkJQ2FtZXJhQ3RybC5ab29tKC1tb3VzZVdoZWVsICogVGltZS5kZWx0YVRpbWUgKiAyMC4wZik7CgkJfQoJfQoKCXB1YmxpYyBzdGF0aWMgdm9pZCBTdGFydFdhaXRBY3Rpb24oZmxvYXQgd2FpdFRpbWUsIEFjdGlvbiBhY3Rpb24pCgl7CgkJSW5zdGFuY2UuU3RhcnRDb3JvdXRpbmUoSW5zdGFuY2UuV2FpdEFjdGlvbih3YWl0VGltZSwgYWN0aW9uKSk7Cgl9CglJRW51bWVyYXRvciBXYWl0QWN0aW9uKGZsb2F0IHdhaXRUaW1lLCBBY3Rpb24gYWN0aW9uKQoJewoJCXlpZWxkIHJldHVybiBuZXcgV2FpdEZvclNlY29uZHMod2FpdFRpbWUpOwoJCWFjdGlvbj8uSW52b2tlKCk7Cgl9CgoJcHVibGljIHN0YXRpYyB2b2lkIFN0YXJ0TmV4dEZyYW1lQWN0aW9uKEFjdGlvbiBhY3Rpb24pCgl7CgkJSW5zdGFuY2UuU3RhcnRDb3JvdXRpbmUoSW5zdGFuY2UuTmV4dEZyYW1lQWN0aW9uKGFjdGlvbikpOwoJfQoJSUVudW1lcmF0b3IgTmV4dEZyYW1lQWN0aW9uKEFjdGlvbiBhY3Rpb24pCgl7CgkJeWllbGQgcmV0dXJuIG5ldyBXYWl0Rm9yTmV4dEZyYW1lVW5pdCgpOwoJCWFjdGlvbj8uSW52b2tlKCk7Cgl9CglwdWJsaWMgc3RhdGljIHN0cmluZyBTY2VuZUJveEluZm8oR2FtZU9iamVjdCBzY2VuZUJveCwgYm9vbCBkaXNwbGF5KQoJewoJCWlmICghc2NlbmVCb3gpIHJldHVybiBkaXNwbGF5ID8gIuepuuWcsCIgOiAiYmxhbmsiOwoJCXN0cmluZyBzY2VuZVRhZyA9IHNjZW5lQm94LnRhZzsKCQlzd2l0Y2ggKHNjZW5lVGFnKQoJCXsKCQkJY2FzZSAicm9hZCI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLpgZPot68iIDogc2NlbmVUYWc7CgkJCWNhc2UgImJ1aWxkaW5nIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuW7uuetkToiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAicGl0IjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIuWdkToiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAibW91bnQiOgoJCQkJcmV0dXJuIGRpc3BsYXkgPyAi5bGx5L2TOiIgOiBzY2VuZVRhZzsKCQkJY2FzZSAibnBjIjoKCQkJCXJldHVybiBkaXNwbGF5ID8gIm5wYzoiICsgc2NlbmVCb3ggOiBzY2VuZVRhZzsKCQkJY2FzZSAiY3JlYXRlciI6CgkJCQlyZXR1cm4gZGlzcGxheSA/ICLlu7rpgKDkuK0uLi4iIDogc2NlbmVUYWc7CgkJCWRlZmF1bHQ6CgkJCQlicmVhazsKCQl9CgkJcmV0dXJuIGRpc3BsYXkgPyAi56m65ZywIiA6ICJibGFuayI7Cgl9Cn0KAAAAAAAAAABrFAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "using System;\nusing System.Collections;\nusing System.Collections.Generic;\nusing CreatorKitCode;\nusing TMPro;\nusing UnityEngine;\n\nnamespace CreatorKitCode\n{\n\t/// <summary>\n\t/// The base class to derive from to write you own custom Elemental effect that can be added to a StatsSystem. There\n\t/// is a default implementation called ElementalEffect that can be used to make Physical/Fire/Electrical/Cold damage\n\t/// across time.\n\t///\n\t/// A derived class *must* implement the Equals function so we can check if 2 effects are the same (e.g. the default\n\t/// implementation ElementalEffect will consider 2 effect equal if they do the same DamageType).\n\t/// </summary>\n\tpublic abstract class BaseElementalEffect : IEquatable<BaseElementalEffect>\n\t{\n\t\tpublic bool Done => m_Timer <= 0.0f;\n\t\tpublic float CurrentTime => m_Timer;\n\t\tpublic float Duration => m_Duration;\n\n\t\tprotected float m_Duration;\n\t\tprotected float m_Timer;\n\t\tprotected Character m_Target;\n\n\t\tpublic BaseElementalEffect(float duration)\n\t\t{\n\t\t\tm_Duration = duration;\n\t\t}\n\n\t\tpublic virtual void Applied(Character target)\n\t\t{\n\t\t\tm_Timer = m_Duration;\n\t\t\tm_Target = target;\n\t\t}\n\n\t\tpublic virtual void Removed()\n\t\t{\n\n\t\t}\n\n\t\tpublic virtual void Update(StatSystem statSystem)\n\t\t{\n\t\t\tm_Timer -= Time.deltaTime;\n\t\t}\n\n\t\tpublic abstract bool Equals(BaseElementalEffect other);\n\t}\n\n\t/// <summary>\n\t/// Default implementation of the BaseElementalEffect. The constructor allows the caller to specify what type of\n\t/// damage is done, how much is done and the speed (time) between each instance of damage (default 1 = every second).\n\t/// </summary>\n\tpublic class ElementalEffect : BaseElementalEffect\n\t{\n\t\tEffectData m_EffectData;\n\t\tfloat m_DamageSpeed;\n\t\tfloat m_SinceLastDamage = 0.0f;\n\n\t\tVFXManager.VFXInstance m_FireInstance;\n\n\t\tpublic ElementalEffect(float duration, EffectData data, float speed = 1.0f) :\n\t\t\tbase(duration)\n\t\t{\n\t\t\tm_EffectData = data;\n\t\t\tm_DamageSpeed = speed;\n\t\t}\n\n\t\tpublic override void Update(StatSystem statSystem)\n\t\t{\n\t\t\tbase.Update(statSystem);\n\n\t\t\tm_SinceLastDamage += Time.deltaTime;\n\n\t\t\tif (m_SinceLastDamage > m_DamageSpeed)\n\t\t\t{\n\t\t\t\tm_SinceLastDamage = 0;\n\n\t\t\t\tDamage damage = new Damage(m_Target);\n\t\t\t\tdamage.TakeDamage();\n\t\t\t}\n\n\t\t\t//we do not parent as if the original object is destroy it would destroy the instance\n\t\t\tm_FireInstance.Effect.transform.position = m_Target.transform.position + Vector3.up;\n\t\t}\n\n\t\tpublic override bool Equals(BaseElementalEffect other)\n\t\t{\n\t\t\tElementalEffect eff = other as ElementalEffect;\n\n\t\t\tif (other == null)\n\t\t\t\treturn false;\n\n\t\t\treturn eff.m_EffectData == m_EffectData;\n\t\t}\n\n\t\tpublic override void Applied(Character target)\n\t\t{\n\t\t\tbase.Applied(target);\n\n\t\t\t//We use the fire effect as it's the only one existing in the project.\n\t\t\t//You can add new VFX and use an if or switch statement to use the right VFXType\n\t\t\t//depending on this effect m_DamageType\n\t\t\tm_FireInstance = VFXManager.GetVFX(VFXType.FireEffect);\n\t\t\tm_FireInstance.Effect.transform.position = target.transform.position + Vector3.up;\n\t\t}\n\n\t\tpublic override void Removed()\n\t\t{\n\t\t\tbase.Removed();\n\n\t\t\tm_FireInstance.Effect.SetActive(false);\n\t\t}\n\t}\n}",
			"file": "Assets/Standard Assets/Scripts/CreatorKitCode/CharacterSystem/BaseElementalEffect.cs",
			"file_size": 3249,
			"file_write_time": 133549493965262249,
			"settings":
			{
				"buffer_size": 3130,
				"line_ending": "Windows",
				"scratch": true
			},
			"undo_stack":
			[
				[
					9,
					1,
					"insert",
					{
						"characters": "Dama"
					},
					"BQAAADQKAAAAAAAANQoAAAAAAAAAAAAANQoAAAAAAAA1CgAAAAAAAAYAAABFZmZlY3Q1CgAAAAAAADYKAAAAAAAAAAAAADYKAAAAAAAANwoAAAAAAAAAAAAANwoAAAAAAAA4CgAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADQKAAAAAAAAOgoAAAAAAAAAAAAAAADwvw"
				],
				[
					10,
					1,
					"insert",
					{
						"characters": "geEffe"
					},
					"BgAAADgKAAAAAAAAOQoAAAAAAAAAAAAAOQoAAAAAAAA6CgAAAAAAAAAAAAA6CgAAAAAAADsKAAAAAAAAAAAAADsKAAAAAAAAPAoAAAAAAAAAAAAAPAoAAAAAAAA9CgAAAAAAAAAAAAA9CgAAAAAAAD4KAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADgKAAAAAAAAOAoAAAAAAAAAAAAAAADwvw"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "ct"
					},
					"AgAAAD4KAAAAAAAAPwoAAAAAAAAAAAAAPwoAAAAAAABACgAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAD4KAAAAAAAAPgoAAAAAAAAAAAAAAADwvw"
				],
				[
					21,
					1,
					"paste",
					null,
					"AgAAAE4KAAAAAAAAWgoAAAAAAAAAAAAAWgoAAAAAAABaCgAAAAAAAAYAAABFZmZlY3Q",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAE4KAAAAAAAAVAoAAAAAAAAAAAAAAADwvw"
				],
				[
					27,
					6,
					"left_delete",
					null,
					"BgAAADkKAAAAAAAAOQoAAAAAAAABAAAAZTgKAAAAAAAAOAoAAAAAAAABAAAAZzcKAAAAAAAANwoAAAAAAAABAAAAYTYKAAAAAAAANgoAAAAAAAABAAAAbTUKAAAAAAAANQoAAAAAAAABAAAAYTQKAAAAAAAANAoAAAAAAAABAAAARA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADoKAAAAAAAAOgoAAAAAAAAAAAAAAADwvw"
				],
				[
					30,
					6,
					"left_delete",
					null,
					"BgAAAE0KAAAAAAAATQoAAAAAAAABAAAAZUwKAAAAAAAATAoAAAAAAAABAAAAZ0sKAAAAAAAASwoAAAAAAAABAAAAYUoKAAAAAAAASgoAAAAAAAABAAAAbUkKAAAAAAAASQoAAAAAAAABAAAAYUgKAAAAAAAASAoAAAAAAAABAAAARA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAE4KAAAAAAAATgoAAAAAAAAAAAAAAADwvw"
				],
				[
					42,
					1,
					"right_delete",
					null,
					"AQAAADkIAAAAAAAAOQgAAAAAAAAsAAAAU3RhdFN5c3RlbS5EYW1hZ2VUeXBlIGRhbWFnZVR5cGUsIGludCBkYW1hZ2U",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADkIAAAAAAAAZQgAAAAAAAAAAAAAAADwvw"
				],
				[
					43,
					1,
					"insert",
					{
						"characters": "Effect"
					},
					"BgAAADkIAAAAAAAAOggAAAAAAAAAAAAAOggAAAAAAAA7CAAAAAAAAAAAAAA7CAAAAAAAADwIAAAAAAAAAAAAADwIAAAAAAAAPQgAAAAAAAAAAAAAPQgAAAAAAAA+CAAAAAAAAAAAAAA+CAAAAAAAAD8IAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADkIAAAAAAAAOQgAAAAAAAAAAAAAAADwvw"
				],
				[
					44,
					1,
					"insert",
					{
						"characters": " effect"
					},
					"BwAAAD8IAAAAAAAAQAgAAAAAAAAAAAAAQAgAAAAAAABBCAAAAAAAAAAAAABBCAAAAAAAAEIIAAAAAAAAAAAAAEIIAAAAAAAAQwgAAAAAAAAAAAAAQwgAAAAAAABECAAAAAAAAAAAAABECAAAAAAAAEUIAAAAAAAAAAAAAEUIAAAAAAAARggAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAD8IAAAAAAAAPwgAAAAAAAAAAAAAAADwvw"
				],
				[
					47,
					1,
					"insert",
					{
						"characters": "Data"
					},
					"BAAAAD8IAAAAAAAAQAgAAAAAAAAAAAAAQAgAAAAAAABBCAAAAAAAAAAAAABBCAAAAAAAAEIIAAAAAAAAAAAAAEIIAAAAAAAAQwgAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAD8IAAAAAAAAPwgAAAAAAAAAAAAAAADwvw"
				],
				[
					52,
					1,
					"insert",
					{
						"characters": "data"
					},
					"BQAAAEQIAAAAAAAARQgAAAAAAAAAAAAARQgAAAAAAABFCAAAAAAAAAYAAABlZmZlY3RFCAAAAAAAAEYIAAAAAAAAAAAAAEYIAAAAAAAARwgAAAAAAAAAAAAARwgAAAAAAABICAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAEQIAAAAAAAASggAAAAAAAAAAAAAAADwvw"
				],
				[
					60,
					1,
					"insert",
					{
						"characters": "data."
					},
					"BgAAAJwIAAAAAAAAnQgAAAAAAAAAAAAAnQgAAAAAAACdCAAAAAAAAAYAAABkYW1hZ2WdCAAAAAAAAJ4IAAAAAAAAAAAAAJ4IAAAAAAAAnwgAAAAAAAAAAAAAnwgAAAAAAACgCAAAAAAAAAAAAACgCAAAAAAAAKEIAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJwIAAAAAAAAoggAAAAAAAAAAAAAAADwvw"
				],
				[
					61,
					1,
					"insert",
					{
						"characters": "DamageMou"
					},
					"CQAAAKEIAAAAAAAAoggAAAAAAAAAAAAAoggAAAAAAACjCAAAAAAAAAAAAACjCAAAAAAAAKQIAAAAAAAAAAAAAKQIAAAAAAAApQgAAAAAAAAAAAAApQgAAAAAAACmCAAAAAAAAAAAAACmCAAAAAAAAKcIAAAAAAAAAAAAAKcIAAAAAAAAqAgAAAAAAAAAAAAAqAgAAAAAAACpCAAAAAAAAAAAAACpCAAAAAAAAKoIAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKEIAAAAAAAAoQgAAAAAAAAAAAAAAADwvw"
				],
				[
					62,
					1,
					"insert",
					{
						"characters": "nt"
					},
					"AgAAAKoIAAAAAAAAqwgAAAAAAAAAAAAAqwgAAAAAAACsCAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKoIAAAAAAAAqggAAAAAAAAAAAAAAADwvw"
				],
				[
					67,
					1,
					"paste",
					null,
					"AgAAAKEIAAAAAAAArAgAAAAAAAAAAAAArAgAAAAAAACsCAAAAAAAAAsAAABEYW1hZ2VNb3VudA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAKEIAAAAAAAArAgAAAAAAAAAAAAAAADwvw"
				],
				[
					72,
					1,
					"paste",
					null,
					"AgAAAMkIAAAAAAAA0wgAAAAAAAAAAAAA0wgAAAAAAADTCAAAAAAAAAoAAABkYW1hZ2VUeXBl",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMkIAAAAAAAA0wgAAAAAAAAAAAAAAADwvw"
				],
				[
					78,
					1,
					"paste",
					null,
					"AQAAAMkIAAAAAAAAzggAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAMkIAAAAAAAAyQgAAAAAAAAAAAAAAADwvw"
				],
				[
					83,
					2,
					"left_delete",
					null,
					"AgAAAK4IAAAAAAAArggAAAAAAAArAAAAICAgICAgICAgICAgbV9EYW1hZ2VUeXBlID0gZGF0YS5kYW1hZ2VUeXBlO60IAAAAAAAArQgAAAAAAAABAAAACg",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANkIAAAAAAAArggAAAAAAAAAAAAAAADwvw"
				],
				[
					95,
					1,
					"paste",
					null,
					"AgAAAAoKAAAAAAAADgoAAAAAAAAAAAAADgoAAAAAAAAOCgAAAAAAAAoAAABuZXcgRWZmZWN0",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABQKAAAAAAAACgoAAAAAAAAAAAAAAADwvw"
				],
				[
					96,
					1,
					"insert",
					{
						"characters": ".ins"
					},
					"BAAAAA4KAAAAAAAADwoAAAAAAAAAAAAADwoAAAAAAAAQCgAAAAAAAAAAAAAQCgAAAAAAABEKAAAAAAAAAAAAABEKAAAAAAAAEgoAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAA4KAAAAAAAADgoAAAAAAAAAAAAAAADwvw"
				],
				[
					97,
					1,
					"insert_completion",
					{
						"completion": "instance",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "instance"
					},
					"AgAAAA8KAAAAAAAADwoAAAAAAAADAAAAaW5zDwoAAAAAAAAXCgAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABIKAAAAAAAAEgoAAAAAAAAAAAAAAADwvw"
				],
				[
					100,
					1,
					"right_delete",
					null,
					"AQAAAEUKAAAAAAAARQoAAAAAAAAOAAAAbV9EYW1hZ2VUeXBlLCA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFMKAAAAAAAARQoAAAAAAAAAAAAAAADwvw"
				],
				[
					111,
					1,
					"paste",
					null,
					"AgAAAHAHAAAAAAAAegcAAAAAAAAAAAAAegcAAAAAAAB6BwAAAAAAABUAAABTdGF0U3lzdGVtLkRhbWFnZVR5cGU",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIUHAAAAAAAAcAcAAAAAAAAAAAAAAADwvw"
				],
				[
					120,
					1,
					"insert",
					{
						"characters": "Effect"
					},
					"BwAAAH0HAAAAAAAAfgcAAAAAAAAAAAAAfgcAAAAAAAB+BwAAAAAAAAYAAABEYW1hZ2V+BwAAAAAAAH8HAAAAAAAAAAAAAH8HAAAAAAAAgAcAAAAAAAAAAAAAgAcAAAAAAACBBwAAAAAAAAAAAACBBwAAAAAAAIIHAAAAAAAAAAAAAIIHAAAAAAAAgwcAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAH0HAAAAAAAAgwcAAAAAAAAAAAAAAADwvw"
				],
				[
					123,
					1,
					"insert",
					{
						"characters": "Data"
					},
					"BQAAAIMHAAAAAAAAhAcAAAAAAAAAAAAAhAcAAAAAAACEBwAAAAAAAAQAAABUeXBlhAcAAAAAAACFBwAAAAAAAAAAAACFBwAAAAAAAIYHAAAAAAAAAAAAAIYHAAAAAAAAhwcAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIMHAAAAAAAAhwcAAAAAAAAAAAAAAADwvw"
				],
				[
					135,
					1,
					"paste",
					null,
					"AgAAAIYIAAAAAAAAkggAAAAAAAAAAAAAkggAAAAAAACSCAAAAAAAAAgAAABtX0RhbWFnZQ",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAIYIAAAAAAAAjggAAAAAAAAAAAAAAADwvw"
				],
				[
					138,
					1,
					"right_delete",
					null,
					"AQAAAJkIAAAAAAAAmQgAAAAAAAAMAAAALmRhbWFnZU1vdW50",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAJkIAAAAAAAApQgAAAAAAAAAAAAAAADwvw"
				],
				[
					145,
					2,
					"left_delete",
					null,
					"AgAAAFIHAAAAAAAAUgcAAAAAAAAVAAAAICAgICAgICBpbnQgbV9EYW1hZ2U7UQcAAAAAAABRBwAAAAAAAAEAAAAK",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGcHAAAAAAAAUgcAAAAAAAAAAAAAAADwvw"
				],
				[
					156,
					4,
					"left_delete",
					null,
					"BAAAAP4JAAAAAAAA/gkAAAAAAAAoAAAAICAgICAgICAgICAgIGVmZmVjdC5BZGREYW1hZ2UobV9EYW1hZ2UpO/sJAAAAAAAA+wkAAAAAAAADAAAAICAg+gkAAAAAAAD6CQAAAAAAAAEAAAAK+QkAAAAAAAD5CQAAAAAAAAEAAAAK",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACYKAAAAAAAA/gkAAAAAAAAAAAAAAADwvw"
				],
				[
					167,
					1,
					"paste",
					null,
					"AgAAAOEJAAAAAAAA7QkAAAAAAAAAAAAA7QkAAAAAAADtCQAAAAAAAAQAAABkYXRh",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOEJAAAAAAAA5QkAAAAAAAAAAAAAAADwvw"
				],
				[
					173,
					1,
					"insert",
					{
						"characters": "Effect"
					},
					"BwAAAPgLAAAAAAAA+QsAAAAAAAAAAAAA+QsAAAAAAAD5CwAAAAAAAAoAAABEYW1hZ2VUeXBl+QsAAAAAAAD6CwAAAAAAAAAAAAD6CwAAAAAAAPsLAAAAAAAAAAAAAPsLAAAAAAAA/AsAAAAAAAAAAAAA/AsAAAAAAAD9CwAAAAAAAAAAAAD9CwAAAAAAAP4LAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPgLAAAAAAAAAgwAAAAAAAAAAAAAAADwvw"
				],
				[
					174,
					1,
					"insert_completion",
					{
						"completion": "m_EffectData",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "m_EffectData"
					},
					"AgAAAPYLAAAAAAAA9gsAAAAAAAAIAAAAbV9FZmZlY3T2CwAAAAAAAAIMAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAP4LAAAAAAAA/gsAAAAAAAAAAAAAAADwvw"
				],
				[
					184,
					1,
					"paste",
					null,
					"AgAAAAYMAAAAAAAAEgwAAAAAAAAAAAAAEgwAAAAAAAASDAAAAAAAAAwAAABtX0RhbWFnZVR5cGU",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAYMAAAAAAAAEgwAAAAAAAAAAAAAAADwvw"
				],
				[
					188,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AgAAAOEJAAAAAAAA4gkAAAAAAAAAAAAA4gkAAAAAAADyCQAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOEJAAAAAAAA4QkAAAAAAAAAAAAAAADwvw"
				],
				[
					191,
					1,
					"insert",
					{
						"characters": "E"
					},
					"AQAAAOEJAAAAAAAA4gkAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOEJAAAAAAAA4QkAAAAAAAAAAAAAAADwvw"
				],
				[
					192,
					1,
					"left_delete",
					null,
					"AQAAAOEJAAAAAAAA4QkAAAAAAAABAAAARQ",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOIJAAAAAAAA4gkAAAAAAAAAAAAAAADwvw"
				],
				[
					193,
					1,
					"insert",
					{
						"characters": "new"
					},
					"AwAAAOEJAAAAAAAA4gkAAAAAAAAAAAAA4gkAAAAAAADjCQAAAAAAAAAAAADjCQAAAAAAAOQJAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOEJAAAAAAAA4QkAAAAAAAAAAAAAAADwvw"
				],
				[
					194,
					1,
					"insert",
					{
						"characters": " Effect"
					},
					"BwAAAOQJAAAAAAAA5QkAAAAAAAAAAAAA5QkAAAAAAADmCQAAAAAAAAAAAADmCQAAAAAAAOcJAAAAAAAAAAAAAOcJAAAAAAAA6AkAAAAAAAAAAAAA6AkAAAAAAADpCQAAAAAAAAAAAADpCQAAAAAAAOoJAAAAAAAAAAAAAOoJAAAAAAAA6wkAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOQJAAAAAAAA5AkAAAAAAAAAAAAAAADwvw"
				],
				[
					195,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAOsJAAAAAAAA7QkAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOsJAAAAAAAA6wkAAAAAAAAAAAAAAADwvw"
				],
				[
					203,
					1,
					"paste",
					null,
					"AQAAAOwJAAAAAAAA9AkAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOwJAAAAAAAA7AkAAAAAAAAAAAAAAADwvw"
				],
				[
					206,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAPUJAAAAAAAA9gkAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAPUJAAAAAAAA9QkAAAAAAAAAAAAAAADwvw"
				],
				[
					216,
					1,
					"paste",
					null,
					"AgAAAAcKAAAAAAAADQoAAAAAAAAAAAAADQoAAAAAAAANCgAAAAAAACAAAABtX0VmZmVjdERhdGEuaW5zdGFuY2UobV9UYXJnZXQpOw",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACcKAAAAAAAABwoAAAAAAAAAAAAAAADwvw"
				],
				[
					217,
					1,
					"insert",
					{
						"characters": ".Data"
					},
					"BQAAAA0KAAAAAAAADgoAAAAAAAAAAAAADgoAAAAAAAAPCgAAAAAAAAAAAAAPCgAAAAAAABAKAAAAAAAAAAAAABAKAAAAAAAAEQoAAAAAAAAAAAAAEQoAAAAAAAASCgAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAA0KAAAAAAAADQoAAAAAAAAAAAAAAADwvw"
				],
				[
					218,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAABIKAAAAAAAAEwoAAAAAAAAAAAAAEwoAAAAAAAAUCgAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABIKAAAAAAAAEgoAAAAAAAAAAAAAAADwvw"
				],
				[
					219,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAABQKAAAAAAAAFQoAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABQKAAAAAAAAFAoAAAAAAAAAAAAAAADwvw"
				],
				[
					227,
					1,
					"paste",
					null,
					"AQAAABUKAAAAAAAAIQoAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAABUKAAAAAAAAFQoAAAAAAAAAAAAAAADwvw"
				],
				[
					228,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAACEKAAAAAAAAIgoAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACEKAAAAAAAAIQoAAAAAAAAAAAAAAADwvw"
				],
				[
					231,
					5,
					"left_delete",
					null,
					"BQAAAC8KAAAAAAAALwoAAAAAAAAEAAAAICAgICsKAAAAAAAAKwoAAAAAAAAEAAAAICAgICcKAAAAAAAAJwoAAAAAAAAEAAAAICAgICMKAAAAAAAAIwoAAAAAAAAEAAAAICAgICIKAAAAAAAAIgoAAAAAAAABAAAACg",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAADMKAAAAAAAAMwoAAAAAAAAAAAAAAADwvw"
				],
				[
					245,
					1,
					"insert",
					{
						"characters": "Damage"
					},
					"BwAAANEJAAAAAAAA0gkAAAAAAAAAAAAA0gkAAAAAAADSCQAAAAAAAAYAAABFZmZlY3TSCQAAAAAAANMJAAAAAAAAAAAAANMJAAAAAAAA1AkAAAAAAAAAAAAA1AkAAAAAAADVCQAAAAAAAAAAAADVCQAAAAAAANYJAAAAAAAAAAAAANYJAAAAAAAA1wkAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANEJAAAAAAAA1wkAAAAAAAAAAAAAAADwvw"
				],
				[
					250,
					1,
					"insert",
					{
						"characters": "damage"
					},
					"BwAAANgJAAAAAAAA2QkAAAAAAAAAAAAA2QkAAAAAAADZCQAAAAAAAAYAAABlZmZlY3TZCQAAAAAAANoJAAAAAAAAAAAAANoJAAAAAAAA2wkAAAAAAAAAAAAA2wkAAAAAAADcCQAAAAAAAAAAAADcCQAAAAAAAN0JAAAAAAAAAAAAAN0JAAAAAAAA3gkAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANgJAAAAAAAA3gkAAAAAAAAAAAAAAADwvw"
				],
				[
					260,
					1,
					"paste",
					null,
					"AgAAAOUJAAAAAAAA6wkAAAAAAAAAAAAA6wkAAAAAAADrCQAAAAAAAAYAAABFZmZlY3Q",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAOUJAAAAAAAA6wkAAAAAAAAAAAAAAADwvw"
				],
				[
					272,
					2,
					"left_delete",
					null,
					"AgAAAPcJAAAAAAAA9wkAAAAAAAArAAAAICAgICAgICAgICAgICAgIGVmZmVjdC5EYXRhID0gbV9FZmZlY3REYXRhO/YJAAAAAAAA9gkAAAAAAAABAAAACg",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAACIKAAAAAAAA9wkAAAAAAAAAAAAAAADwvw"
				],
				[
					283,
					1,
					"paste",
					null,
					"AgAAAAcKAAAAAAAADQoAAAAAAAAAAAAADQoAAAAAAAANCgAAAAAAAAYAAABlZmZlY3Q",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAcKAAAAAAAADQoAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1707381146.668889"
					},
					"AQAAAAAAAAAAAAAAnA4AAAAAAACcDgAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgVE1Qcm87CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlIAp7CiAgICAvLy8gPHN1bW1hcnk+CiAgICAvLy8gVGhlIGJhc2UgY2xhc3MgdG8gZGVyaXZlIGZyb20gdG8gd3JpdGUgeW91IG93biBjdXN0b20gRWxlbWVudGFsIGVmZmVjdCB0aGF0IGNhbiBiZSBhZGRlZCB0byBhIFN0YXRzU3lzdGVtLiBUaGVyZQogICAgLy8vIGlzIGEgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBjYWxsZWQgRWxlbWVudGFsRWZmZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gbWFrZSBQaHlzaWNhbC9GaXJlL0VsZWN0cmljYWwvQ29sZCBkYW1hZ2UKICAgIC8vLyBhY3Jvc3MgdGltZS4KICAgIC8vLwogICAgLy8vIEEgZGVyaXZlZCBjbGFzcyAqbXVzdCogaW1wbGVtZW50IHRoZSBFcXVhbHMgZnVuY3Rpb24gc28gd2UgY2FuIGNoZWNrIGlmIDIgZWZmZWN0cyBhcmUgdGhlIHNhbWUgKGUuZy4gdGhlIGRlZmF1bHQKICAgIC8vLyBpbXBsZW1lbnRhdGlvbiBFbGVtZW50YWxFZmZlY3Qgd2lsbCBjb25zaWRlciAyIGVmZmVjdCBlcXVhbCBpZiB0aGV5IGRvIHRoZSBzYW1lIERhbWFnZVR5cGUpLgogICAgLy8vIDwvc3VtbWFyeT4KICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBCYXNlRWxlbWVudGFsRWZmZWN0IDogSUVxdWF0YWJsZTxCYXNlRWxlbWVudGFsRWZmZWN0PgogICAgewogICAgICAgIHB1YmxpYyBib29sIERvbmUgPT4gbV9UaW1lciA8PSAwLjBmOwogICAgICAgIHB1YmxpYyBmbG9hdCBDdXJyZW50VGltZSA9PiBtX1RpbWVyOwogICAgICAgIHB1YmxpYyBmbG9hdCBEdXJhdGlvbiA9PiBtX0R1cmF0aW9uOwogICAgICAgIAogICAgICAgIHByb3RlY3RlZCBmbG9hdCBtX0R1cmF0aW9uOwogICAgICAgIHByb3RlY3RlZCBmbG9hdCBtX1RpbWVyOwogICAgICAgIHByb3RlY3RlZCBDaGFyYWN0ZXJEYXRhIG1fVGFyZ2V0OwoKICAgICAgICBwdWJsaWMgQmFzZUVsZW1lbnRhbEVmZmVjdChmbG9hdCBkdXJhdGlvbikKICAgICAgICB7CiAgICAgICAgICAgIG1fRHVyYXRpb24gPSBkdXJhdGlvbjsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgQXBwbGllZChDaGFyYWN0ZXJEYXRhIHRhcmdldCkKICAgICAgICB7CiAgICAgICAgICAgIG1fVGltZXIgPSBtX0R1cmF0aW9uOwogICAgICAgICAgICBtX1RhcmdldCA9IHRhcmdldDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgUmVtb3ZlZCgpCiAgICAgICAgewogICAgICAgIAogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBVcGRhdGUoU3RhdFN5c3RlbSBzdGF0U3lzdGVtKQogICAgICAgIHsKICAgICAgICAgICAgbV9UaW1lciAtPSBUaW1lLmRlbHRhVGltZTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBhYnN0cmFjdCBib29sIEVxdWFscyhCYXNlRWxlbWVudGFsRWZmZWN0IG90aGVyKTsKICAgIH0KCiAgICAvLy8gPHN1bW1hcnk+CiAgICAvLy8gRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgQmFzZUVsZW1lbnRhbEVmZmVjdC4gVGhlIGNvbnN0cnVjdG9yIGFsbG93cyB0aGUgY2FsbGVyIHRvIHNwZWNpZnkgd2hhdCB0eXBlIG9mCiAgICAvLy8gZGFtYWdlIGlzIGRvbmUsIGhvdyBtdWNoIGlzIGRvbmUgYW5kIHRoZSBzcGVlZCAodGltZSkgYmV0d2VlbiBlYWNoIGluc3RhbmNlIG9mIGRhbWFnZSAoZGVmYXVsdCAxID0gZXZlcnkgc2Vjb25kKS4KICAgIC8vLyA8L3N1bW1hcnk+CiAgICBwdWJsaWMgY2xhc3MgRWxlbWVudGFsRWZmZWN0IDogQmFzZUVsZW1lbnRhbEVmZmVjdAogICAgewogICAgICAgIEVmZmVjdERhdGEgbV9FZmZlY3REYXRhOwogICAgICAgIGZsb2F0IG1fRGFtYWdlU3BlZWQ7CiAgICAgICAgZmxvYXQgbV9TaW5jZUxhc3REYW1hZ2UgPSAwLjBmOwoKICAgICAgICBWRlhNYW5hZ2VyLlZGWEluc3RhbmNlIG1fRmlyZUluc3RhbmNlOwoKICAgICAgICBwdWJsaWMgRWxlbWVudGFsRWZmZWN0KGZsb2F0IGR1cmF0aW9uLCBFZmZlY3REYXRhIGRhdGEsIGZsb2F0IHNwZWVkID0gMS4wZikgOgogICAgICAgICAgICBiYXNlKGR1cmF0aW9uKQogICAgICAgIHsKICAgICAgICAgICAgbV9FZmZlY3REYXRhID0gZGF0YTsKICAgICAgICAgICAgbV9EYW1hZ2VTcGVlZCA9IHNwZWVkOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBVcGRhdGUoU3RhdFN5c3RlbSBzdGF0U3lzdGVtKQogICAgICAgIHsKICAgICAgICAgICAgYmFzZS5VcGRhdGUoc3RhdFN5c3RlbSk7CgogICAgICAgICAgICBtX1NpbmNlTGFzdERhbWFnZSArPSBUaW1lLmRlbHRhVGltZTsKCiAgICAgICAgICAgIGlmIChtX1NpbmNlTGFzdERhbWFnZSA+IG1fRGFtYWdlU3BlZWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1fU2luY2VMYXN0RGFtYWdlID0gMDsKCiAgICAgICAgICAgICAgICBEYW1hZ2UgZGFtYWdlID0gbmV3IERhbWFnZShtX1RhcmdldCk7CiAgICAgICAgICAgICAgICBkYW1hZ2UuVGFrZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvL3dlIGRvIG5vdCBwYXJlbnQgYXMgaWYgdGhlIG9yaWdpbmFsIG9iamVjdCBpcyBkZXN0cm95IGl0IHdvdWxkIGRlc3Ryb3kgdGhlIGluc3RhbmNlCiAgICAgICAgICAgIG1fRmlyZUluc3RhbmNlLkVmZmVjdC50cmFuc2Zvcm0ucG9zaXRpb24gPSBtX1RhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gKyBWZWN0b3IzLnVwOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKEJhc2VFbGVtZW50YWxFZmZlY3Qgb3RoZXIpCiAgICAgICAgewogICAgICAgICAgICBFbGVtZW50YWxFZmZlY3QgZWZmID0gb3RoZXIgYXMgRWxlbWVudGFsRWZmZWN0OwoKICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICByZXR1cm4gZWZmLm1fRWZmZWN0RGF0YSA9PSBtX0VmZmVjdERhdGE7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBBcHBsaWVkKENoYXJhY3RlckRhdGEgdGFyZ2V0KQogICAgICAgIHsKICAgICAgICAgICAgYmFzZS5BcHBsaWVkKHRhcmdldCk7CgogICAgICAgICAgICAvL1dlIHVzZSB0aGUgZmlyZSBlZmZlY3QgYXMgaXQncyB0aGUgb25seSBvbmUgZXhpc3RpbmcgaW4gdGhlIHByb2plY3QuCiAgICAgICAgICAgIC8vWW91IGNhbiBhZGQgbmV3IFZGWCBhbmQgdXNlIGFuIGlmIG9yIHN3aXRjaCBzdGF0ZW1lbnQgdG8gdXNlIHRoZSByaWdodCBWRlhUeXBlCiAgICAgICAgICAgIC8vZGVwZW5kaW5nIG9uIHRoaXMgZWZmZWN0IG1fRGFtYWdlVHlwZQogICAgICAgICAgICBtX0ZpcmVJbnN0YW5jZSA9IFZGWE1hbmFnZXIuR2V0VkZYKFZGWFR5cGUuRmlyZUVmZmVjdCk7CiAgICAgICAgICAgIG1fRmlyZUluc3RhbmNlLkVmZmVjdC50cmFuc2Zvcm0ucG9zaXRpb24gPSB0YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uICsgVmVjdG9yMy51cDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFJlbW92ZWQoKQogICAgICAgIHsKICAgICAgICAgICAgYmFzZS5SZW1vdmVkKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBtX0ZpcmVJbnN0YW5jZS5FZmZlY3QuU2V0QWN0aXZlKGZhbHNlKTsKICAgICAgICB9CiAgICB9Cn0",
					"DgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAANCgAAAAAAAA0KAAAAAAAAAAAAAAAA8L8"
				],
				[
					1,
					1,
					"revert",
					null,
					"BQAAAAAAAAAAAAAAAAAAAAAAAACcDgAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgVE1Qcm87CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlIAp7CiAgICAvLy8gPHN1bW1hcnk+CiAgICAvLy8gVGhlIGJhc2UgY2xhc3MgdG8gZGVyaXZlIGZyb20gdG8gd3JpdGUgeW91IG93biBjdXN0b20gRWxlbWVudGFsIGVmZmVjdCB0aGF0IGNhbiBiZSBhZGRlZCB0byBhIFN0YXRzU3lzdGVtLiBUaGVyZQogICAgLy8vIGlzIGEgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBjYWxsZWQgRWxlbWVudGFsRWZmZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gbWFrZSBQaHlzaWNhbC9GaXJlL0VsZWN0cmljYWwvQ29sZCBkYW1hZ2UKICAgIC8vLyBhY3Jvc3MgdGltZS4KICAgIC8vLwogICAgLy8vIEEgZGVyaXZlZCBjbGFzcyAqbXVzdCogaW1wbGVtZW50IHRoZSBFcXVhbHMgZnVuY3Rpb24gc28gd2UgY2FuIGNoZWNrIGlmIDIgZWZmZWN0cyBhcmUgdGhlIHNhbWUgKGUuZy4gdGhlIGRlZmF1bHQKICAgIC8vLyBpbXBsZW1lbnRhdGlvbiBFbGVtZW50YWxFZmZlY3Qgd2lsbCBjb25zaWRlciAyIGVmZmVjdCBlcXVhbCBpZiB0aGV5IGRvIHRoZSBzYW1lIERhbWFnZVR5cGUpLgogICAgLy8vIDwvc3VtbWFyeT4KICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBCYXNlRWxlbWVudGFsRWZmZWN0IDogSUVxdWF0YWJsZTxCYXNlRWxlbWVudGFsRWZmZWN0PgogICAgewogICAgICAgIHB1YmxpYyBib29sIERvbmUgPT4gbV9UaW1lciA8PSAwLjBmOwogICAgICAgIHB1YmxpYyBmbG9hdCBDdXJyZW50VGltZSA9PiBtX1RpbWVyOwogICAgICAgIHB1YmxpYyBmbG9hdCBEdXJhdGlvbiA9PiBtX0R1cmF0aW9uOwogICAgICAgIAogICAgICAgIHByb3RlY3RlZCBmbG9hdCBtX0R1cmF0aW9uOwogICAgICAgIHByb3RlY3RlZCBmbG9hdCBtX1RpbWVyOwogICAgICAgIHByb3RlY3RlZCBDaGFyYWN0ZXJEYXRhIG1fVGFyZ2V0OwoKICAgICAgICBwdWJsaWMgQmFzZUVsZW1lbnRhbEVmZmVjdChmbG9hdCBkdXJhdGlvbikKICAgICAgICB7CiAgICAgICAgICAgIG1fRHVyYXRpb24gPSBkdXJhdGlvbjsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgQXBwbGllZChDaGFyYWN0ZXJEYXRhIHRhcmdldCkKICAgICAgICB7CiAgICAgICAgICAgIG1fVGltZXIgPSBtX0R1cmF0aW9uOwogICAgICAgICAgICBtX1RhcmdldCA9IHRhcmdldDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgUmVtb3ZlZCgpCiAgICAgICAgewogICAgICAgIAogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBVcGRhdGUoU3RhdFN5c3RlbSBzdGF0U3lzdGVtKQogICAgICAgIHsKICAgICAgICAgICAgbV9UaW1lciAtPSBUaW1lLmRlbHRhVGltZTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBhYnN0cmFjdCBib29sIEVxdWFscyhCYXNlRWxlbWVudGFsRWZmZWN0IG90aGVyKTsKICAgIH0KCiAgICAvLy8gPHN1bW1hcnk+CiAgICAvLy8gRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgQmFzZUVsZW1lbnRhbEVmZmVjdC4gVGhlIGNvbnN0cnVjdG9yIGFsbG93cyB0aGUgY2FsbGVyIHRvIHNwZWNpZnkgd2hhdCB0eXBlIG9mCiAgICAvLy8gZGFtYWdlIGlzIGRvbmUsIGhvdyBtdWNoIGlzIGRvbmUgYW5kIHRoZSBzcGVlZCAodGltZSkgYmV0d2VlbiBlYWNoIGluc3RhbmNlIG9mIGRhbWFnZSAoZGVmYXVsdCAxID0gZXZlcnkgc2Vjb25kKS4KICAgIC8vLyA8L3N1bW1hcnk+CiAgICBwdWJsaWMgY2xhc3MgRWxlbWVudGFsRWZmZWN0IDogQmFzZUVsZW1lbnRhbEVmZmVjdAogICAgewogICAgICAgIEVmZmVjdERhdGEgbV9FZmZlY3REYXRhOwogICAgICAgIGZsb2F0IG1fRGFtYWdlU3BlZWQ7CiAgICAgICAgZmxvYXQgbV9TaW5jZUxhc3REYW1hZ2UgPSAwLjBmOwoKICAgICAgICBWRlhNYW5hZ2VyLlZGWEluc3RhbmNlIG1fRmlyZUluc3RhbmNlOwoKICAgICAgICBwdWJsaWMgRWxlbWVudGFsRWZmZWN0KGZsb2F0IGR1cmF0aW9uLCBFZmZlY3REYXRhIGRhdGEsIGZsb2F0IHNwZWVkID0gMS4wZikgOgogICAgICAgICAgICBiYXNlKGR1cmF0aW9uKQogICAgICAgIHsKICAgICAgICAgICAgbV9FZmZlY3REYXRhID0gZGF0YTsKICAgICAgICAgICAgbV9EYW1hZ2VTcGVlZCA9IHNwZWVkOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBVcGRhdGUoU3RhdFN5c3RlbSBzdGF0U3lzdGVtKQogICAgICAgIHsKICAgICAgICAgICAgYmFzZS5VcGRhdGUoc3RhdFN5c3RlbSk7CgogICAgICAgICAgICBtX1NpbmNlTGFzdERhbWFnZSArPSBUaW1lLmRlbHRhVGltZTsKCiAgICAgICAgICAgIGlmIChtX1NpbmNlTGFzdERhbWFnZSA+IG1fRGFtYWdlU3BlZWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1fU2luY2VMYXN0RGFtYWdlID0gMDsKCiAgICAgICAgICAgICAgICBEYW1hZ2UgZGFtYWdlID0gbmV3IERhbWFnZShtX1RhcmdldCk7CiAgICAgICAgICAgICAgICBkYW1hZ2UuVGFrZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvL3dlIGRvIG5vdCBwYXJlbnQgYXMgaWYgdGhlIG9yaWdpbmFsIG9iamVjdCBpcyBkZXN0cm95IGl0IHdvdWxkIGRlc3Ryb3kgdGhlIGluc3RhbmNlCiAgICAgICAgICAgIG1fRmlyZUluc3RhbmNlLkVmZmVjdC50cmFuc2Zvcm0ucG9zaXRpb24gPSBtX1RhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gKyBWZWN0b3IzLnVwOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKEJhc2VFbGVtZW50YWxFZmZlY3Qgb3RoZXIpCiAgICAgICAgewogICAgICAgICAgICBFbGVtZW50YWxFZmZlY3QgZWZmID0gb3RoZXIgYXMgRWxlbWVudGFsRWZmZWN0OwoKICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICByZXR1cm4gZWZmLm1fRWZmZWN0RGF0YSA9PSBtX0VmZmVjdERhdGE7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBBcHBsaWVkKENoYXJhY3RlckRhdGEgdGFyZ2V0KQogICAgICAgIHsKICAgICAgICAgICAgYmFzZS5BcHBsaWVkKHRhcmdldCk7CgogICAgICAgICAgICAvL1dlIHVzZSB0aGUgZmlyZSBlZmZlY3QgYXMgaXQncyB0aGUgb25seSBvbmUgZXhpc3RpbmcgaW4gdGhlIHByb2plY3QuCiAgICAgICAgICAgIC8vWW91IGNhbiBhZGQgbmV3IFZGWCBhbmQgdXNlIGFuIGlmIG9yIHN3aXRjaCBzdGF0ZW1lbnQgdG8gdXNlIHRoZSByaWdodCBWRlhUeXBlCiAgICAgICAgICAgIC8vZGVwZW5kaW5nIG9uIHRoaXMgZWZmZWN0IG1fRGFtYWdlVHlwZQogICAgICAgICAgICBtX0ZpcmVJbnN0YW5jZSA9IFZGWE1hbmFnZXIuR2V0VkZYKFZGWFR5cGUuRmlyZUVmZmVjdCk7CiAgICAgICAgICAgIG1fRmlyZUluc3RhbmNlLkVmZmVjdC50cmFuc2Zvcm0ucG9zaXRpb24gPSB0YXJnZXQudHJhbnNmb3JtLnBvc2l0aW9uICsgVmVjdG9yMy51cDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFJlbW92ZWQoKQogICAgICAgIHsKICAgICAgICAgICAgYmFzZS5SZW1vdmVkKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBtX0ZpcmVJbnN0YW5jZS5FZmZlY3QuU2V0QWN0aXZlKGZhbHNlKTsKICAgICAgICB9CiAgICB9Cn0AAAAAAAAAAHEOAAAAAAAAAAAAAAAAAAAAAAAAcQ4AAAAAAAAAAAAAAAAAAAAAAABxDgAAAAAAAAAAAAAAAAAAAAAAAHEOAAAAAAAAAAAAAA",
					"CQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAA0KAAAAAAAADQoAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABxDgAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgVE1Qcm87CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlCnsKICAgIC8vLyA8c3VtbWFyeT4KICAgIC8vLyBUaGUgYmFzZSBjbGFzcyB0byBkZXJpdmUgZnJvbSB0byB3cml0ZSB5b3Ugb3duIGN1c3RvbSBFbGVtZW50YWwgZWZmZWN0IHRoYXQgY2FuIGJlIGFkZGVkIHRvIGEgU3RhdHNTeXN0ZW0uIFRoZXJlCiAgICAvLy8gaXMgYSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGNhbGxlZCBFbGVtZW50YWxFZmZlY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBtYWtlIFBoeXNpY2FsL0ZpcmUvRWxlY3RyaWNhbC9Db2xkIGRhbWFnZQogICAgLy8vIGFjcm9zcyB0aW1lLgogICAgLy8vCiAgICAvLy8gQSBkZXJpdmVkIGNsYXNzICptdXN0KiBpbXBsZW1lbnQgdGhlIEVxdWFscyBmdW5jdGlvbiBzbyB3ZSBjYW4gY2hlY2sgaWYgMiBlZmZlY3RzIGFyZSB0aGUgc2FtZSAoZS5nLiB0aGUgZGVmYXVsdAogICAgLy8vIGltcGxlbWVudGF0aW9uIEVsZW1lbnRhbEVmZmVjdCB3aWxsIGNvbnNpZGVyIDIgZWZmZWN0IGVxdWFsIGlmIHRoZXkgZG8gdGhlIHNhbWUgRGFtYWdlVHlwZSkuCiAgICAvLy8gPC9zdW1tYXJ5PgogICAgcHVibGljIGFic3RyYWN0IGNsYXNzIEJhc2VFbGVtZW50YWxFZmZlY3QgOiBJRXF1YXRhYmxlPEJhc2VFbGVtZW50YWxFZmZlY3Q+CiAgICB7CiAgICAgICAgcHVibGljIGJvb2wgRG9uZSA9PiBtX1RpbWVyIDw9IDAuMGY7CiAgICAgICAgcHVibGljIGZsb2F0IEN1cnJlbnRUaW1lID0+IG1fVGltZXI7CiAgICAgICAgcHVibGljIGZsb2F0IER1cmF0aW9uID0+IG1fRHVyYXRpb247CgogICAgICAgIHByb3RlY3RlZCBmbG9hdCBtX0R1cmF0aW9uOwogICAgICAgIHByb3RlY3RlZCBmbG9hdCBtX1RpbWVyOwogICAgICAgIHByb3RlY3RlZCBDaGFyYWN0ZXJEYXRhIG1fVGFyZ2V0OwoKICAgICAgICBwdWJsaWMgQmFzZUVsZW1lbnRhbEVmZmVjdChmbG9hdCBkdXJhdGlvbikKICAgICAgICB7CiAgICAgICAgICAgIG1fRHVyYXRpb24gPSBkdXJhdGlvbjsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgQXBwbGllZChDaGFyYWN0ZXJEYXRhIHRhcmdldCkKICAgICAgICB7CiAgICAgICAgICAgIG1fVGltZXIgPSBtX0R1cmF0aW9uOwogICAgICAgICAgICBtX1RhcmdldCA9IHRhcmdldDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgUmVtb3ZlZCgpCiAgICAgICAgewoKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2aXJ0dWFsIHZvaWQgVXBkYXRlKFN0YXRTeXN0ZW0gc3RhdFN5c3RlbSkKICAgICAgICB7CiAgICAgICAgICAgIG1fVGltZXIgLT0gVGltZS5kZWx0YVRpbWU7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYWJzdHJhY3QgYm9vbCBFcXVhbHMoQmFzZUVsZW1lbnRhbEVmZmVjdCBvdGhlcik7CiAgICB9CgogICAgLy8vIDxzdW1tYXJ5PgogICAgLy8vIERlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIEJhc2VFbGVtZW50YWxFZmZlY3QuIFRoZSBjb25zdHJ1Y3RvciBhbGxvd3MgdGhlIGNhbGxlciB0byBzcGVjaWZ5IHdoYXQgdHlwZSBvZgogICAgLy8vIGRhbWFnZSBpcyBkb25lLCBob3cgbXVjaCBpcyBkb25lIGFuZCB0aGUgc3BlZWQgKHRpbWUpIGJldHdlZW4gZWFjaCBpbnN0YW5jZSBvZiBkYW1hZ2UgKGRlZmF1bHQgMSA9IGV2ZXJ5IHNlY29uZCkuCiAgICAvLy8gPC9zdW1tYXJ5PgogICAgcHVibGljIGNsYXNzIEVsZW1lbnRhbEVmZmVjdCA6IEJhc2VFbGVtZW50YWxFZmZlY3QKICAgIHsKICAgICAgICBFZmZlY3REYXRhIG1fRWZmZWN0RGF0YTsKICAgICAgICBmbG9hdCBtX0RhbWFnZVNwZWVkOwogICAgICAgIGZsb2F0IG1fU2luY2VMYXN0RGFtYWdlID0gMC4wZjsKCiAgICAgICAgVkZYTWFuYWdlci5WRlhJbnN0YW5jZSBtX0ZpcmVJbnN0YW5jZTsKCiAgICAgICAgcHVibGljIEVsZW1lbnRhbEVmZmVjdChmbG9hdCBkdXJhdGlvbiwgRWZmZWN0RGF0YSBkYXRhLCBmbG9hdCBzcGVlZCA9IDEuMGYpIDoKICAgICAgICAgICAgYmFzZShkdXJhdGlvbikKICAgICAgICB7CiAgICAgICAgICAgIG1fRWZmZWN0RGF0YSA9IGRhdGE7CiAgICAgICAgICAgIG1fRGFtYWdlU3BlZWQgPSBzcGVlZDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIFVwZGF0ZShTdGF0U3lzdGVtIHN0YXRTeXN0ZW0pCiAgICAgICAgewogICAgICAgICAgICBiYXNlLlVwZGF0ZShzdGF0U3lzdGVtKTsKCiAgICAgICAgICAgIG1fU2luY2VMYXN0RGFtYWdlICs9IFRpbWUuZGVsdGFUaW1lOwoKICAgICAgICAgICAgaWYgKG1fU2luY2VMYXN0RGFtYWdlID4gbV9EYW1hZ2VTcGVlZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbV9TaW5jZUxhc3REYW1hZ2UgPSAwOwoKICAgICAgICAgICAgICAgIERhbWFnZSBkYW1hZ2UgPSBuZXcgRGFtYWdlKG1fVGFyZ2V0KTsKICAgICAgICAgICAgICAgIGRhbWFnZS5UYWtlRGFtYWdlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vd2UgZG8gbm90IHBhcmVudCBhcyBpZiB0aGUgb3JpZ2luYWwgb2JqZWN0IGlzIGRlc3Ryb3kgaXQgd291bGQgZGVzdHJveSB0aGUgaW5zdGFuY2UKICAgICAgICAgICAgbV9GaXJlSW5zdGFuY2UuRWZmZWN0LnRyYW5zZm9ybS5wb3NpdGlvbiA9IG1fVGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbiArIFZlY3RvcjMudXA7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMoQmFzZUVsZW1lbnRhbEVmZmVjdCBvdGhlcikKICAgICAgICB7CiAgICAgICAgICAgIEVsZW1lbnRhbEVmZmVjdCBlZmYgPSBvdGhlciBhcyBFbGVtZW50YWxFZmZlY3Q7CgogICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgICAgIHJldHVybiBlZmYubV9FZmZlY3REYXRhID09IG1fRWZmZWN0RGF0YTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIEFwcGxpZWQoQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCiAgICAgICAgewogICAgICAgICAgICBiYXNlLkFwcGxpZWQodGFyZ2V0KTsKCiAgICAgICAgICAgIC8vV2UgdXNlIHRoZSBmaXJlIGVmZmVjdCBhcyBpdCdzIHRoZSBvbmx5IG9uZSBleGlzdGluZyBpbiB0aGUgcHJvamVjdC4KICAgICAgICAgICAgLy9Zb3UgY2FuIGFkZCBuZXcgVkZYIGFuZCB1c2UgYW4gaWYgb3Igc3dpdGNoIHN0YXRlbWVudCB0byB1c2UgdGhlIHJpZ2h0IFZGWFR5cGUKICAgICAgICAgICAgLy9kZXBlbmRpbmcgb24gdGhpcyBlZmZlY3QgbV9EYW1hZ2VUeXBlCiAgICAgICAgICAgIG1fRmlyZUluc3RhbmNlID0gVkZYTWFuYWdlci5HZXRWRlgoVkZYVHlwZS5GaXJlRWZmZWN0KTsKICAgICAgICAgICAgbV9GaXJlSW5zdGFuY2UuRWZmZWN0LnRyYW5zZm9ybS5wb3NpdGlvbiA9IHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gKyBWZWN0b3IzLnVwOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgUmVtb3ZlZCgpCiAgICAgICAgewogICAgICAgICAgICBiYXNlLlJlbW92ZWQoKTsKCiAgICAgICAgICAgIG1fRmlyZUluc3RhbmNlLkVmZmVjdC5TZXRBY3RpdmUoZmFsc2UpOwogICAgICAgIH0KICAgIH0KfQAAAAAAAAAAOgwAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAA0KAAAAAAAADQoAAAAAAAAAAAAAAADwvw"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1710496596.8884761"
					},
					"AQAAAAAAAAAAAAAAOgwAAAAAAAA6DAAAdXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnM7CnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOwp1c2luZyBDcmVhdG9yS2l0Q29kZTsKdXNpbmcgVE1Qcm87CnVzaW5nIFVuaXR5RW5naW5lOwoKbmFtZXNwYWNlIENyZWF0b3JLaXRDb2RlCnsKCS8vLyA8c3VtbWFyeT4KCS8vLyBUaGUgYmFzZSBjbGFzcyB0byBkZXJpdmUgZnJvbSB0byB3cml0ZSB5b3Ugb3duIGN1c3RvbSBFbGVtZW50YWwgZWZmZWN0IHRoYXQgY2FuIGJlIGFkZGVkIHRvIGEgU3RhdHNTeXN0ZW0uIFRoZXJlCgkvLy8gaXMgYSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGNhbGxlZCBFbGVtZW50YWxFZmZlY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBtYWtlIFBoeXNpY2FsL0ZpcmUvRWxlY3RyaWNhbC9Db2xkIGRhbWFnZQoJLy8vIGFjcm9zcyB0aW1lLgoJLy8vCgkvLy8gQSBkZXJpdmVkIGNsYXNzICptdXN0KiBpbXBsZW1lbnQgdGhlIEVxdWFscyBmdW5jdGlvbiBzbyB3ZSBjYW4gY2hlY2sgaWYgMiBlZmZlY3RzIGFyZSB0aGUgc2FtZSAoZS5nLiB0aGUgZGVmYXVsdAoJLy8vIGltcGxlbWVudGF0aW9uIEVsZW1lbnRhbEVmZmVjdCB3aWxsIGNvbnNpZGVyIDIgZWZmZWN0IGVxdWFsIGlmIHRoZXkgZG8gdGhlIHNhbWUgRGFtYWdlVHlwZSkuCgkvLy8gPC9zdW1tYXJ5PgoJcHVibGljIGFic3RyYWN0IGNsYXNzIEJhc2VFbGVtZW50YWxFZmZlY3QgOiBJRXF1YXRhYmxlPEJhc2VFbGVtZW50YWxFZmZlY3Q+Cgl7CgkJcHVibGljIGJvb2wgRG9uZSA9PiBtX1RpbWVyIDw9IDAuMGY7CgkJcHVibGljIGZsb2F0IEN1cnJlbnRUaW1lID0+IG1fVGltZXI7CgkJcHVibGljIGZsb2F0IER1cmF0aW9uID0+IG1fRHVyYXRpb247CgoJCXByb3RlY3RlZCBmbG9hdCBtX0R1cmF0aW9uOwoJCXByb3RlY3RlZCBmbG9hdCBtX1RpbWVyOwoJCXByb3RlY3RlZCBDaGFyYWN0ZXIgbV9UYXJnZXQ7CgoJCXB1YmxpYyBCYXNlRWxlbWVudGFsRWZmZWN0KGZsb2F0IGR1cmF0aW9uKQoJCXsKCQkJbV9EdXJhdGlvbiA9IGR1cmF0aW9uOwoJCX0KCgkJcHVibGljIHZpcnR1YWwgdm9pZCBBcHBsaWVkKENoYXJhY3RlciB0YXJnZXQpCgkJewoJCQltX1RpbWVyID0gbV9EdXJhdGlvbjsKCQkJbV9UYXJnZXQgPSB0YXJnZXQ7CgkJfQoKCQlwdWJsaWMgdmlydHVhbCB2b2lkIFJlbW92ZWQoKQoJCXsKCgkJfQoKCQlwdWJsaWMgdmlydHVhbCB2b2lkIFVwZGF0ZShTdGF0U3lzdGVtIHN0YXRTeXN0ZW0pCgkJewoJCQltX1RpbWVyIC09IFRpbWUuZGVsdGFUaW1lOwoJCX0KCgkJcHVibGljIGFic3RyYWN0IGJvb2wgRXF1YWxzKEJhc2VFbGVtZW50YWxFZmZlY3Qgb3RoZXIpOwoJfQoKCS8vLyA8c3VtbWFyeT4KCS8vLyBEZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBCYXNlRWxlbWVudGFsRWZmZWN0LiBUaGUgY29uc3RydWN0b3IgYWxsb3dzIHRoZSBjYWxsZXIgdG8gc3BlY2lmeSB3aGF0IHR5cGUgb2YKCS8vLyBkYW1hZ2UgaXMgZG9uZSwgaG93IG11Y2ggaXMgZG9uZSBhbmQgdGhlIHNwZWVkICh0aW1lKSBiZXR3ZWVuIGVhY2ggaW5zdGFuY2Ugb2YgZGFtYWdlIChkZWZhdWx0IDEgPSBldmVyeSBzZWNvbmQpLgoJLy8vIDwvc3VtbWFyeT4KCXB1YmxpYyBjbGFzcyBFbGVtZW50YWxFZmZlY3QgOiBCYXNlRWxlbWVudGFsRWZmZWN0Cgl7CgkJRWZmZWN0RGF0YSBtX0VmZmVjdERhdGE7CgkJZmxvYXQgbV9EYW1hZ2VTcGVlZDsKCQlmbG9hdCBtX1NpbmNlTGFzdERhbWFnZSA9IDAuMGY7CgoJCVZGWE1hbmFnZXIuVkZYSW5zdGFuY2UgbV9GaXJlSW5zdGFuY2U7CgoJCXB1YmxpYyBFbGVtZW50YWxFZmZlY3QoZmxvYXQgZHVyYXRpb24sIEVmZmVjdERhdGEgZGF0YSwgZmxvYXQgc3BlZWQgPSAxLjBmKSA6CgkJCWJhc2UoZHVyYXRpb24pCgkJewoJCQltX0VmZmVjdERhdGEgPSBkYXRhOwoJCQltX0RhbWFnZVNwZWVkID0gc3BlZWQ7CgkJfQoKCQlwdWJsaWMgb3ZlcnJpZGUgdm9pZCBVcGRhdGUoU3RhdFN5c3RlbSBzdGF0U3lzdGVtKQoJCXsKCQkJYmFzZS5VcGRhdGUoc3RhdFN5c3RlbSk7CgoJCQltX1NpbmNlTGFzdERhbWFnZSArPSBUaW1lLmRlbHRhVGltZTsKCgkJCWlmIChtX1NpbmNlTGFzdERhbWFnZSA+IG1fRGFtYWdlU3BlZWQpCgkJCXsKCQkJCW1fU2luY2VMYXN0RGFtYWdlID0gMDsKCgkJCQlEYW1hZ2UgZGFtYWdlID0gbmV3IERhbWFnZShtX1RhcmdldCk7CgkJCQlkYW1hZ2UuVGFrZURhbWFnZSgpOwoJCQl9CgoJCQkvL3dlIGRvIG5vdCBwYXJlbnQgYXMgaWYgdGhlIG9yaWdpbmFsIG9iamVjdCBpcyBkZXN0cm95IGl0IHdvdWxkIGRlc3Ryb3kgdGhlIGluc3RhbmNlCgkJCW1fRmlyZUluc3RhbmNlLkVmZmVjdC50cmFuc2Zvcm0ucG9zaXRpb24gPSBtX1RhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gKyBWZWN0b3IzLnVwOwoJCX0KCgkJcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKEJhc2VFbGVtZW50YWxFZmZlY3Qgb3RoZXIpCgkJewoJCQlFbGVtZW50YWxFZmZlY3QgZWZmID0gb3RoZXIgYXMgRWxlbWVudGFsRWZmZWN0OwoKCQkJaWYgKG90aGVyID09IG51bGwpCgkJCQlyZXR1cm4gZmFsc2U7CgoJCQlyZXR1cm4gZWZmLm1fRWZmZWN0RGF0YSA9PSBtX0VmZmVjdERhdGE7CgkJfQoKCQlwdWJsaWMgb3ZlcnJpZGUgdm9pZCBBcHBsaWVkKENoYXJhY3RlciB0YXJnZXQpCgkJewoJCQliYXNlLkFwcGxpZWQodGFyZ2V0KTsKCgkJCS8vV2UgdXNlIHRoZSBmaXJlIGVmZmVjdCBhcyBpdCdzIHRoZSBvbmx5IG9uZSBleGlzdGluZyBpbiB0aGUgcHJvamVjdC4KCQkJLy9Zb3UgY2FuIGFkZCBuZXcgVkZYIGFuZCB1c2UgYW4gaWYgb3Igc3dpdGNoIHN0YXRlbWVudCB0byB1c2UgdGhlIHJpZ2h0IFZGWFR5cGUKCQkJLy9kZXBlbmRpbmcgb24gdGhpcyBlZmZlY3QgbV9EYW1hZ2VUeXBlCgkJCW1fRmlyZUluc3RhbmNlID0gVkZYTWFuYWdlci5HZXRWRlgoVkZYVHlwZS5GaXJlRWZmZWN0KTsKCQkJbV9GaXJlSW5zdGFuY2UuRWZmZWN0LnRyYW5zZm9ybS5wb3NpdGlvbiA9IHRhcmdldC50cmFuc2Zvcm0ucG9zaXRpb24gKyBWZWN0b3IzLnVwOwoJCX0KCgkJcHVibGljIG92ZXJyaWRlIHZvaWQgUmVtb3ZlZCgpCgkJewoJCQliYXNlLlJlbW92ZWQoKTsKCgkJCW1fRmlyZUluc3RhbmNlLkVmZmVjdC5TZXRBY3RpdmUoZmFsc2UpOwoJCX0KCX0KfQ",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAA0KAAAAAAAADQoAAAAAAAAAAAAAAADwvw"
				]
			]
		},
		{
			"contents": "using System.Collections.Generic;\nusing CreatorKitCode;\nusing UnityEngine;\nusing System.Linq;\n\n#if UNITY_EDITOR\nusing UnityEditor;\n#endif\n\n\n/// <summary>\n/// Special Item than can be equipped. They can have a minimum stats value needed to equip them, and you can add\n/// EquippedEffect which will be executed when the object is equipped and unequipped, allowing to code special\n/// behaviour when the player equipped those object, like raising stats.\n/// </summary>\n[CreateAssetMenu(fileName = \"EquipmentItem\", menuName = \"Data/Equipment Item\", order = -999)]\npublic class EquipmentItem : Item\n{\n\tpublic enum EquipmentSlot\n\t{\n\t\tHead,\n\t\tTorso,\n\t\tLegs,\n\t\tFeet,\n\t\tAccessory,\n\t\tWeapon,\n\t\tViceWeapon\n\t}\n\n\tpublic EquipmentSlot Slot;\n\tpublic StatSystem.StatModifier EquippedStat;\n\n\tpublic override string GetDescription()\n\t{\n\t\tstring desc = base.GetDescription();\n\t\tdesc += StatsDescription();\n\t\t// foreach (var effect in EquippedEffects)\n\t\t// \tdesc += \"\\n\" + effect.GetDescription();\n\n\t\t// bool requireStrength = MinimumStrength > 0;\n\t\t// bool requireDefense = MinimumDefense > 0;\n\t\t// bool requireAgility = MinimumAgility > 0;\n\n\t\t// if (requireStrength || requireAgility || requireDefense)\n\t\t// {\n\t\t// \tdesc += \"\\nRequire : \\n\";\n\n\t\t// \tif (requireStrength)\n\t\t// \t\tdesc += $\"Strength : {MinimumStrength}\";\n\n\t\t// \tif (requireAgility)\n\t\t// \t{\n\t\t// \t\tif (requireStrength) desc += \" & \";\n\t\t// \t\tdesc += $\"Defense : {MinimumDefense}\";\n\t\t// \t}\n\n\t\t// \tif (requireDefense)\n\t\t// \t{\n\t\t// \t\tif (requireStrength || requireAgility) desc += \" & \";\n\t\t// \t\tdesc += $\"Agility : {MinimumAgility}\";\n\t\t// \t}\n\t\t// }\n\t\treturn desc;\n\t}\n\tpublic void EquippedBy(Character user)\n\t{\n\t\tuser.Stats.AddModifier(EquippedStat);\n\t}\n\n\tpublic void UnequippedBy(Character user)\n\t{\n\t\tuser.Stats.RemoveModifier(EquippedStat);\n\t}\n\n\tstring StatsDescription()\n\t{\n\t\tstring desc = \"\\n\";\n\t\tstring unit = EquippedStat.ModifierMode == StatSystem.StatModifier.Mode.Percentage ? \"%\" : \"\";\n\n\t\tif (EquippedStat.Stats.strength != 0)\n\t\t\tdesc += $\"Str : {EquippedStat.Stats.strength:+0;-#}{unit}\\n\"; //format specifier to force the + sign to appear\n\t\tif (EquippedStat.Stats.agility != 0)\n\t\t\tdesc += $\"Agi : {EquippedStat.Stats.agility:+0;-#}{unit}\\n\";\n\t\tif (EquippedStat.Stats.defense != 0)\n\t\t\tdesc += $\"Def : {EquippedStat.Stats.defense:+0;-#}{unit}\\n\";\n\t\tif (EquippedStat.Stats.health != 0)\n\t\t\tdesc += $\"HP : {EquippedStat.Stats.health:+0;-#}{unit}\\n\";\n\n\t\treturn desc;\n\t}\n}\n\n\n// #if UNITY_EDITOR\n// [CustomEditor(typeof(EquipmentItem))]\n// public class EquipmentItemEditor : Editor\n// {\n// \tEquipmentItem m_Target;\n\n// \tItemEditor m_ItemEditor;\n\n// \tList<string> m_AvailableEquipEffectType;\n// \tSerializedProperty m_EquippedEffectListProperty;\n\n// \tSerializedProperty m_SlotProperty;\n\n// \tSerializedProperty m_MinimumStrengthProperty;\n// \tSerializedProperty m_MinimumAgilityProperty;\n// \tSerializedProperty m_MinimumDefenseProperty;\n\n// \tvoid OnEnable()\n// \t{\n// \t\tm_Target = target as EquipmentItem;\n// \t\tm_EquippedEffectListProperty = serializedObject.FindProperty(nameof(EquipmentItem.EquippedEffects));\n\n// \t\tm_SlotProperty = serializedObject.FindProperty(nameof(EquipmentItem.Slot));\n\n// \t\tm_MinimumStrengthProperty = serializedObject.FindProperty(nameof(EquipmentItem.MinimumStrength));\n// \t\tm_MinimumAgilityProperty = serializedObject.FindProperty(nameof(EquipmentItem.MinimumAgility));\n// \t\tm_MinimumDefenseProperty = serializedObject.FindProperty(nameof(EquipmentItem.MinimumDefense));\n\n// \t\tm_ItemEditor = new ItemEditor();\n// \t\tm_ItemEditor.Init(serializedObject);\n\n// \t\tvar lookup = typeof(EffectData);\n// \t\tm_AvailableEquipEffectType = System.AppDomain.CurrentDomain.GetAssemblies()\n// \t\t\t.SelectMany(assembly => assembly.GetTypes())\n// \t\t\t.Where(x => x.IsClass && !x.IsAbstract && x.IsSubclassOf(lookup))\n// \t\t\t.Select(type => type.Name)\n// \t\t\t.ToList();\n// \t}\n\n// \tpublic override void OnInspectorGUI()\n// \t{\n// \t\tm_ItemEditor.GUI();\n\n// \t\tEditorGUILayout.PropertyField(m_SlotProperty);\n\n// \t\tEditorGUILayout.PropertyField(m_MinimumStrengthProperty);\n// \t\tEditorGUILayout.PropertyField(m_MinimumAgilityProperty);\n// \t\tEditorGUILayout.PropertyField(m_MinimumDefenseProperty);\n\n// \t\tint choice = EditorGUILayout.Popup(\"Add new Effect\", -1, m_AvailableEquipEffectType.ToArray());\n\n// \t\tif (choice != -1)\n// \t\t{\n// \t\t\tvar newInstance = ScriptableObject.CreateInstance(m_AvailableEquipEffectType[choice]);\n\n// \t\t\tAssetDatabase.AddObjectToAsset(newInstance, target);\n\n// \t\t\tm_EquippedEffectListProperty.InsertArrayElementAtIndex(m_EquippedEffectListProperty.arraySize);\n// \t\t\tm_EquippedEffectListProperty.GetArrayElementAtIndex(m_EquippedEffectListProperty.arraySize - 1).objectReferenceValue = newInstance;\n// \t\t}\n\n// \t\tEditor ed = null;\n// \t\tint toDelete = -1;\n// \t\tfor (int i = 0; i < m_EquippedEffectListProperty.arraySize; ++i)\n// \t\t{\n// \t\t\tEditorGUILayout.BeginHorizontal();\n// \t\t\tEditorGUILayout.BeginVertical();\n// \t\t\tvar item = m_EquippedEffectListProperty.GetArrayElementAtIndex(i);\n// \t\t\tSerializedObject obj = new SerializedObject(item.objectReferenceValue);\n\n// \t\t\tEditor.CreateCachedEditor(item.objectReferenceValue, null, ref ed);\n\n// \t\t\ted.OnInspectorGUI();\n// \t\t\tEditorGUILayout.EndVertical();\n\n// \t\t\tif (GUILayout.Button(\"-\", GUILayout.Width(32)))\n// \t\t\t{\n// \t\t\t\ttoDelete = i;\n// \t\t\t}\n// \t\t\tEditorGUILayout.EndHorizontal();\n// \t\t}\n\n// \t\tif (toDelete != -1)\n// \t\t{\n// \t\t\tvar item = m_EquippedEffectListProperty.GetArrayElementAtIndex(toDelete).objectReferenceValue;\n// \t\t\tDestroyImmediate(item, true);\n\n// \t\t\t//need to do it twice, first time just nullify the entry, second actually remove it.\n// \t\t\tm_EquippedEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n// \t\t\tm_EquippedEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n// \t\t}\n\n// \t\tserializedObject.ApplyModifiedProperties();\n// \t}\n// }\n// #endif",
			"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/EquipmentItem.cs",
			"file_size": 5975,
			"file_write_time": 133560031940239889,
			"settings":
			{
				"buffer_size": 5784,
				"encoding": "UTF-8 with BOM",
				"line_ending": "Windows",
				"scratch": true
			},
			"undo_stack":
			[
				[
					6,
					1,
					"insert",
					{
						"characters": "Equip"
					},
					"BgAAANIEAAAAAAAA0wQAAAAAAAAAAAAA0wQAAAAAAADTBAAAAAAAAAoAAABFZmZlY3REYXRh0wQAAAAAAADUBAAAAAAAAAAAAADUBAAAAAAAANUEAAAAAAAAAAAAANUEAAAAAAAA1gQAAAAAAAAAAAAA1gQAAAAAAADXBAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANIEAAAAAAAA3AQAAAAAAAAAAAAAAADwvw"
				],
				[
					7,
					1,
					"insert",
					{
						"characters": "Effect"
					},
					"BgAAANcEAAAAAAAA2AQAAAAAAAAAAAAA2AQAAAAAAADZBAAAAAAAAAAAAADZBAAAAAAAANoEAAAAAAAAAAAAANoEAAAAAAAA2wQAAAAAAAAAAAAA2wQAAAAAAADcBAAAAAAAAAAAAADcBAAAAAAAAN0EAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANcEAAAAAAAA1wQAAAAAAAAAAAAAAADwvw"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "EffectD"
					},
					"BwAAANIEAAAAAAAA0wQAAAAAAAAAAAAA0wQAAAAAAADUBAAAAAAAAAAAAADUBAAAAAAAANUEAAAAAAAAAAAAANUEAAAAAAAA1gQAAAAAAAAAAAAA1gQAAAAAAADXBAAAAAAAAAAAAADXBAAAAAAAANgEAAAAAAAAAAAAANgEAAAAAAAA2QQAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANIEAAAAAAAA0gQAAAAAAAAAAAAAAADwvw"
				],
				[
					12,
					1,
					"insert",
					{
						"characters": "ata."
					},
					"BAAAANkEAAAAAAAA2gQAAAAAAAAAAAAA2gQAAAAAAADbBAAAAAAAAAAAAADbBAAAAAAAANwEAAAAAAAAAAAAANwEAAAAAAAA3QQAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAANkEAAAAAAAA2QQAAAAAAAAAAAAAAADwvw"
				],
				[
					13,
					1,
					"revert",
					null,
					"BwAAAAAAAAAAAAAAAAAAAAAAAACGFwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkxpbnE7CgojaWYgVU5JVFlfRURJVE9SCnVzaW5nIFVuaXR5RWRpdG9yOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBJdGVtIHRoYW4gY2FuIGJlIGVxdWlwcGVkLiBUaGV5IGNhbiBoYXZlIGEgbWluaW11bSBzdGF0cyB2YWx1ZSBuZWVkZWQgdG8gZXF1aXAgdGhlbSwgYW5kIHlvdSBjYW4gYWRkCgkvLy8gRXF1aXBwZWRFZmZlY3Qgd2hpY2ggd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBvYmplY3QgaXMgZXF1aXBwZWQgYW5kIHVuZXF1aXBwZWQsIGFsbG93aW5nIHRvIGNvZGUgc3BlY2lhbAoJLy8vIGJlaGF2aW91ciB3aGVuIHRoZSBwbGF5ZXIgZXF1aXBwZWQgdGhvc2Ugb2JqZWN0LCBsaWtlIHJhaXNpbmcgc3RhdHMuCgkvLy8gPC9zdW1tYXJ5PgoJW0NyZWF0ZUFzc2V0TWVudShmaWxlTmFtZSA9ICJFcXVpcG1lbnRJdGVtIiwgbWVudU5hbWUgPSAiRGF0YS9FcXVpcG1lbnQgSXRlbSIsIG9yZGVyID0gLTk5OSldCglwdWJsaWMgY2xhc3MgRXF1aXBtZW50SXRlbSA6IEl0ZW0KCXsKCQlwdWJsaWMgZW51bSBFcXVpcG1lbnRTbG90CgkJewoJCQlIZWFkLAoJCQlUb3JzbywKCQkJTGVncywKCQkJRmVldCwKCQkJQWNjZXNzb3J5LAoJCX0KCgkJLy9wdWJsaWMgYWJzdHJhY3QgY2xhc3MgRXF1aXBwZWRFZmZlY3QgOiBTY3JpcHRhYmxlT2JqZWN0CgkJLy97CgkJLy8gcHVibGljIHN0cmluZyBEZXNjcmlwdGlvbjsKCQkvLyAvL3JldHVybiB0cnVlIGlmIGNvdWxkIGJlIHVzZWQsIGZhbHNlIG90aGVyd2lzZS4KCQkvLyBwdWJsaWMgYWJzdHJhY3Qgdm9pZCBFcXVpcHBlZChDaGFyYWN0ZXJEYXRhIHVzZXIpOwoJCS8vIHB1YmxpYyBhYnN0cmFjdCB2b2lkIFJlbW92ZWQoQ2hhcmFjdGVyRGF0YSB1c2VyKTsKCgkJLy8gcHVibGljIHZpcnR1YWwgc3RyaW5nIEdldERlc2NyaXB0aW9uKCkKCQkvLyB7CgkJLy8gCXJldHVybiBEZXNjcmlwdGlvbjsKCQkvLyB9CgkJLy99CgoJCXB1YmxpYyBFcXVpcG1lbnRTbG90IFNsb3Q7CgoJCVtIZWFkZXIoIk1pbmltdW0gU3RhdHMiKV0KCQlwdWJsaWMgaW50IE1pbmltdW1TdHJlbmd0aDsKCQlwdWJsaWMgaW50IE1pbmltdW1BZ2lsaXR5OwoJCXB1YmxpYyBpbnQgTWluaW11bURlZmVuc2U7CgoJCXB1YmxpYyBMaXN0PEVmZmVjdERhdGEuRXF1aXBFZmZlY3Q+IEVxdWlwcGVkRWZmZWN0czsKCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzYyA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCgkJCWZvcmVhY2ggKHZhciBlZmZlY3QgaW4gRXF1aXBwZWRFZmZlY3RzKQoJCQkJZGVzYyArPSAiXG4iICsgZWZmZWN0LkdldERlc2NyaXB0aW9uKCk7CgoJCQlib29sIHJlcXVpcmVTdHJlbmd0aCA9IE1pbmltdW1TdHJlbmd0aCA+IDA7CgkJCWJvb2wgcmVxdWlyZURlZmVuc2UgPSBNaW5pbXVtRGVmZW5zZSA+IDA7CgkJCWJvb2wgcmVxdWlyZUFnaWxpdHkgPSBNaW5pbXVtQWdpbGl0eSA+IDA7CgoJCQlpZiAocmVxdWlyZVN0cmVuZ3RoIHx8IHJlcXVpcmVBZ2lsaXR5IHx8IHJlcXVpcmVEZWZlbnNlKQoJCQl7CgkJCQlkZXNjICs9ICJcblJlcXVpcmUgOiBcbiI7CgoJCQkJaWYgKHJlcXVpcmVTdHJlbmd0aCkKCQkJCQlkZXNjICs9ICQiU3RyZW5ndGggOiB7TWluaW11bVN0cmVuZ3RofSI7CgoJCQkJaWYgKHJlcXVpcmVBZ2lsaXR5KQoJCQkJewoJCQkJCWlmIChyZXF1aXJlU3RyZW5ndGgpIGRlc2MgKz0gIiAmICI7CgkJCQkJZGVzYyArPSAkIkRlZmVuc2UgOiB7TWluaW11bURlZmVuc2V9IjsKCQkJCX0KCgkJCQlpZiAocmVxdWlyZURlZmVuc2UpCgkJCQl7CgkJCQkJaWYgKHJlcXVpcmVTdHJlbmd0aCB8fCByZXF1aXJlQWdpbGl0eSkgZGVzYyArPSAiICYgIjsKCQkJCQlkZXNjICs9ICQiQWdpbGl0eSA6IHtNaW5pbXVtQWdpbGl0eX0iOwoJCQkJfQoJCQl9CgoJCQlyZXR1cm4gZGVzYzsKCQl9CgoJCXB1YmxpYyB2b2lkIEVxdWlwcGVkQnkoQ2hhcmFjdGVyRGF0YSB1c2VyKQoJCXsKCQkJZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBFcXVpcHBlZEVmZmVjdHMpCgkJCQl1c2VyLlN0YXRzLkFkZE1vZGlmaWVyKGVmZmVjdC5Nb2RpZmllcik7CgkJfQoKCQlwdWJsaWMgdm9pZCBVbmVxdWlwcGVkQnkoQ2hhcmFjdGVyRGF0YSB1c2VyKQoJCXsKCQkJZm9yZWFjaCAodmFyIGVmZmVjdCBpbiBFcXVpcHBlZEVmZmVjdHMpCgkJCQl1c2VyLlN0YXRzLlJlbW92ZU1vZGlmaWVyKGVmZmVjdC5Nb2RpZmllcik7CgkJfQoJfQp9CgojaWYgVU5JVFlfRURJVE9SCltDdXN0b21FZGl0b3IodHlwZW9mKEVxdWlwbWVudEl0ZW0pKV0KcHVibGljIGNsYXNzIEVxdWlwbWVudEl0ZW1FZGl0b3IgOiBFZGl0b3IKewogICAgRXF1aXBtZW50SXRlbSBtX1RhcmdldDsKICAgIAogICAgSXRlbUVkaXRvciBtX0l0ZW1FZGl0b3I7CgogICAgTGlzdDxzdHJpbmc+IG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlOwogICAgU2VyaWFsaXplZFByb3BlcnR5IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHk7CgogICAgU2VyaWFsaXplZFByb3BlcnR5IG1fU2xvdFByb3BlcnR5OwogICAgCiAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eTsKICAgIFNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1BZ2lsaXR5UHJvcGVydHk7CiAgICBTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5OwoKICAgIHZvaWQgT25FbmFibGUoKQogICAgewogICAgICAgIG1fVGFyZ2V0ID0gdGFyZ2V0IGFzIEVxdWlwbWVudEl0ZW07CiAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLkVxdWlwcGVkRWZmZWN0cykpOwoKICAgICAgICBtX1Nsb3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLlNsb3QpKTsKICAgICAgICAKICAgICAgICBtX01pbmltdW1TdHJlbmd0aFByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bVN0cmVuZ3RoKSk7CiAgICAgICAgbV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bUFnaWxpdHkpKTsKICAgICAgICBtX01pbmltdW1EZWZlbnNlUHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtRGVmZW5zZSkpOwogICAgICAgIAogICAgICAgIG1fSXRlbUVkaXRvciA9IG5ldyBJdGVtRWRpdG9yKCk7CiAgICAgICAgbV9JdGVtRWRpdG9yLkluaXQoc2VyaWFsaXplZE9iamVjdCk7CgogICAgICAgIHZhciBsb29rdXAgPSB0eXBlb2YoRWZmZWN0RGF0YSk7CiAgICAgICAgbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUgPSBTeXN0ZW0uQXBwRG9tYWluLkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpCiAgICAgICAgICAgIC5TZWxlY3RNYW55KGFzc2VtYmx5ID0+IGFzc2VtYmx5LkdldFR5cGVzKCkpCiAgICAgICAgICAgIC5XaGVyZSh4ID0+IHguSXNDbGFzcyAmJiAheC5Jc0Fic3RyYWN0ICYmIHguSXNTdWJjbGFzc09mKGxvb2t1cCkpCiAgICAgICAgICAgIC5TZWxlY3QodHlwZSA9PiB0eXBlLk5hbWUpCiAgICAgICAgICAgIC5Ub0xpc3QoKTsKICAgIH0KCiAgICBwdWJsaWMgb3ZlcnJpZGUgdm9pZCBPbkluc3BlY3RvckdVSSgpCiAgICB7CiAgICAgICAgbV9JdGVtRWRpdG9yLkdVSSgpOwoKICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX1Nsb3RQcm9wZXJ0eSk7CiAgICAgICAgCiAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSk7CiAgICAgICAgRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5KTsKICAgICAgICBFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX01pbmltdW1EZWZlbnNlUHJvcGVydHkpOwogICAgICAgIAogICAgICAgIGludCBjaG9pY2UgPSBFZGl0b3JHVUlMYXlvdXQuUG9wdXAoIkFkZCBuZXcgRWZmZWN0IiwgLTEsIG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlLlRvQXJyYXkoKSk7CgogICAgICAgIGlmIChjaG9pY2UgIT0gLTEpCiAgICAgICAgewogICAgICAgICAgICB2YXIgbmV3SW5zdGFuY2UgPSBTY3JpcHRhYmxlT2JqZWN0LkNyZWF0ZUluc3RhbmNlKG1fQXZhaWxhYmxlRXF1aXBFZmZlY3RUeXBlW2Nob2ljZV0pOwogICAgICAgICAgICAKICAgICAgICAgICAgQXNzZXREYXRhYmFzZS5BZGRPYmplY3RUb0Fzc2V0KG5ld0luc3RhbmNlLCB0YXJnZXQpOwogICAgICAgICAgICAKICAgICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5JbnNlcnRBcnJheUVsZW1lbnRBdEluZGV4KG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplKTsKICAgICAgICAgICAgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplIC0gMSkub2JqZWN0UmVmZXJlbmNlVmFsdWUgPSBuZXdJbnN0YW5jZTsKICAgICAgICB9CgogICAgICAgIEVkaXRvciBlZCA9IG51bGw7CiAgICAgICAgaW50IHRvRGVsZXRlID0gLTE7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZTsgKytpKQogICAgICAgIHsKICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkJlZ2luSG9yaXpvbnRhbCgpOwogICAgICAgICAgICBFZGl0b3JHVUlMYXlvdXQuQmVnaW5WZXJ0aWNhbCgpOwogICAgICAgICAgICB2YXIgaXRlbSA9IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChpKTsgICAgICAgICAgIAogICAgICAgICAgICBTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKICAgICAgICAgICAgRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwogICAgICAgICAgICAKICAgICAgICAgICAgZWQuT25JbnNwZWN0b3JHVUkoKTsKICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgogICAgICAgICAgICBpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0b0RlbGV0ZSA9IGk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKICAgICAgICB9CgogICAgICAgIGlmICh0b0RlbGV0ZSAhPSAtMSkKICAgICAgICB7CiAgICAgICAgICAgIHZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKICAgICAgICAgICAgRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgogICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwogICAgICAgICAgICBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwogICAgICAgIH0KCiAgICAgICAgc2VyaWFsaXplZE9iamVjdC5BcHBseU1vZGlmaWVkUHJvcGVydGllcygpOwogICAgfQp9CiNlbmRpZgAAAAAAAAAAExYAAAAAAAAAAAAAAAAAAAAAAAATFgAAAAAAAAAAAAAAAAAAAAAAABMWAAAAAAAAAAAAAAAAAAAAAAAA8hYAAAAAAAAAAAAAAAAAAAAAAADyFgAAAAAAAAAAAAAAAAAAAAAAAPIWAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAN0EAAAAAAAA3QQAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": false,
						"stamp": "1708655809.5197985"
					},
					"AQAAAAAAAAAAAAAA8hYAAAAAAADyFgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkxpbnE7CgojaWYgVU5JVFlfRURJVE9SCnVzaW5nIFVuaXR5RWRpdG9yOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBJdGVtIHRoYW4gY2FuIGJlIGVxdWlwcGVkLiBUaGV5IGNhbiBoYXZlIGEgbWluaW11bSBzdGF0cyB2YWx1ZSBuZWVkZWQgdG8gZXF1aXAgdGhlbSwgYW5kIHlvdSBjYW4gYWRkCgkvLy8gRXF1aXBwZWRFZmZlY3Qgd2hpY2ggd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBvYmplY3QgaXMgZXF1aXBwZWQgYW5kIHVuZXF1aXBwZWQsIGFsbG93aW5nIHRvIGNvZGUgc3BlY2lhbAoJLy8vIGJlaGF2aW91ciB3aGVuIHRoZSBwbGF5ZXIgZXF1aXBwZWQgdGhvc2Ugb2JqZWN0LCBsaWtlIHJhaXNpbmcgc3RhdHMuCgkvLy8gPC9zdW1tYXJ5PgoJW0NyZWF0ZUFzc2V0TWVudShmaWxlTmFtZSA9ICJFcXVpcG1lbnRJdGVtIiwgbWVudU5hbWUgPSAiRGF0YS9FcXVpcG1lbnQgSXRlbSIsIG9yZGVyID0gLTk5OSldCglwdWJsaWMgY2xhc3MgRXF1aXBtZW50SXRlbSA6IEl0ZW0KCXsKCQlwdWJsaWMgZW51bSBFcXVpcG1lbnRTbG90CgkJewoJCQlIZWFkLAoJCQlUb3JzbywKCQkJTGVncywKCQkJRmVldCwKCQkJQWNjZXNzb3J5LAoJCQlXZWFwb24KCQl9CgoJCXB1YmxpYyBFcXVpcG1lbnRTbG90IFNsb3Q7CgkJcHVibGljIFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyIEVxdWlwcGVkU3RhdDsKCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzYyA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCQkJZGVzYyArPSBTdGF0c0Rlc2NyaXB0aW9uKCk7CgkJCS8vIGZvcmVhY2ggKHZhciBlZmZlY3QgaW4gRXF1aXBwZWRFZmZlY3RzKQoJCQkvLyAJZGVzYyArPSAiXG4iICsgZWZmZWN0LkdldERlc2NyaXB0aW9uKCk7CgoJCQkvLyBib29sIHJlcXVpcmVTdHJlbmd0aCA9IE1pbmltdW1TdHJlbmd0aCA+IDA7CgkJCS8vIGJvb2wgcmVxdWlyZURlZmVuc2UgPSBNaW5pbXVtRGVmZW5zZSA+IDA7CgkJCS8vIGJvb2wgcmVxdWlyZUFnaWxpdHkgPSBNaW5pbXVtQWdpbGl0eSA+IDA7CgoJCQkvLyBpZiAocmVxdWlyZVN0cmVuZ3RoIHx8IHJlcXVpcmVBZ2lsaXR5IHx8IHJlcXVpcmVEZWZlbnNlKQoJCQkvLyB7CgkJCS8vIAlkZXNjICs9ICJcblJlcXVpcmUgOiBcbiI7CgoJCQkvLyAJaWYgKHJlcXVpcmVTdHJlbmd0aCkKCQkJLy8gCQlkZXNjICs9ICQiU3RyZW5ndGggOiB7TWluaW11bVN0cmVuZ3RofSI7CgoJCQkvLyAJaWYgKHJlcXVpcmVBZ2lsaXR5KQoJCQkvLyAJewoJCQkvLyAJCWlmIChyZXF1aXJlU3RyZW5ndGgpIGRlc2MgKz0gIiAmICI7CgkJCS8vIAkJZGVzYyArPSAkIkRlZmVuc2UgOiB7TWluaW11bURlZmVuc2V9IjsKCQkJLy8gCX0KCgkJCS8vIAlpZiAocmVxdWlyZURlZmVuc2UpCgkJCS8vIAl7CgkJCS8vIAkJaWYgKHJlcXVpcmVTdHJlbmd0aCB8fCByZXF1aXJlQWdpbGl0eSkgZGVzYyArPSAiICYgIjsKCQkJLy8gCQlkZXNjICs9ICQiQWdpbGl0eSA6IHtNaW5pbXVtQWdpbGl0eX0iOwoJCQkvLyAJfQoJCQkvLyB9CgkJCXJldHVybiBkZXNjOwoJCX0KCQlwdWJsaWMgdm9pZCBFcXVpcHBlZEJ5KENoYXJhY3RlckRhdGEgdXNlcikKCQl7CgkJCXVzZXIuU3RhdHMuQWRkTW9kaWZpZXIoRXF1aXBwZWRTdGF0KTsKCQl9CgoJCXB1YmxpYyB2b2lkIFVuZXF1aXBwZWRCeShDaGFyYWN0ZXJEYXRhIHVzZXIpCgkJewoJCQl1c2VyLlN0YXRzLlJlbW92ZU1vZGlmaWVyKEVxdWlwcGVkU3RhdCk7CgkJfQoKCQlzdHJpbmcgU3RhdHNEZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzYyA9ICJcbiI7CgkJCXN0cmluZyB1bml0ID0gRXF1aXBwZWRTdGF0Lk1vZGlmaWVyTW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLlBlcmNlbnRhZ2UgPyAiJSIgOiAiIjsKCgkJCWlmIChFcXVpcHBlZFN0YXQuU3RhdHMuc3RyZW5ndGggIT0gMCkKCQkJCWRlc2MgKz0gJCJTdHIgOiB7RXF1aXBwZWRTdGF0LlN0YXRzLnN0cmVuZ3RoOiswOy0jfXt1bml0fVxuIjsgLy9mb3JtYXQgc3BlY2lmaWVyIHRvIGZvcmNlIHRoZSArIHNpZ24gdG8gYXBwZWFyCgkJCWlmIChFcXVpcHBlZFN0YXQuU3RhdHMuYWdpbGl0eSAhPSAwKQoJCQkJZGVzYyArPSAkIkFnaSA6IHtFcXVpcHBlZFN0YXQuU3RhdHMuYWdpbGl0eTorMDstI317dW5pdH1cbiI7CgkJCWlmIChFcXVpcHBlZFN0YXQuU3RhdHMuZGVmZW5zZSAhPSAwKQoJCQkJZGVzYyArPSAkIkRlZiA6IHtFcXVpcHBlZFN0YXQuU3RhdHMuZGVmZW5zZTorMDstI317dW5pdH1cbiI7CgkJCWlmIChFcXVpcHBlZFN0YXQuU3RhdHMuaGVhbHRoICE9IDApCgkJCQlkZXNjICs9ICQiSFAgOiB7RXF1aXBwZWRTdGF0LlN0YXRzLmhlYWx0aDorMDstI317dW5pdH1cbiI7CgoJCQlyZXR1cm4gZGVzYzsKCQl9Cgl9Cn0KCi8vICNpZiBVTklUWV9FRElUT1IKLy8gW0N1c3RvbUVkaXRvcih0eXBlb2YoRXF1aXBtZW50SXRlbSkpXQovLyBwdWJsaWMgY2xhc3MgRXF1aXBtZW50SXRlbUVkaXRvciA6IEVkaXRvcgovLyB7Ci8vIAlFcXVpcG1lbnRJdGVtIG1fVGFyZ2V0OwoKLy8gCUl0ZW1FZGl0b3IgbV9JdGVtRWRpdG9yOwoKLy8gCUxpc3Q8c3RyaW5nPiBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZTsKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5OwoKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1Nsb3RQcm9wZXJ0eTsKCi8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eTsKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1BZ2lsaXR5UHJvcGVydHk7Ci8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5OwoKLy8gCXZvaWQgT25FbmFibGUoKQovLyAJewovLyAJCW1fVGFyZ2V0ID0gdGFyZ2V0IGFzIEVxdWlwbWVudEl0ZW07Ci8vIAkJbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLkVxdWlwcGVkRWZmZWN0cykpOwoKLy8gCQltX1Nsb3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLlNsb3QpKTsKCi8vIAkJbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1TdHJlbmd0aCkpOwovLyAJCW1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1BZ2lsaXR5KSk7Ci8vIAkJbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bURlZmVuc2UpKTsKCi8vIAkJbV9JdGVtRWRpdG9yID0gbmV3IEl0ZW1FZGl0b3IoKTsKLy8gCQltX0l0ZW1FZGl0b3IuSW5pdChzZXJpYWxpemVkT2JqZWN0KTsKCi8vIAkJdmFyIGxvb2t1cCA9IHR5cGVvZihFZmZlY3REYXRhKTsKLy8gCQltX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gCQkJLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gCQkJLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gCQkJLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gCQkJLlRvTGlzdCgpOwovLyAJfQoKLy8gCXB1YmxpYyBvdmVycmlkZSB2b2lkIE9uSW5zcGVjdG9yR1VJKCkKLy8gCXsKLy8gCQltX0l0ZW1FZGl0b3IuR1VJKCk7CgovLyAJCUVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fU2xvdFByb3BlcnR5KTsKCi8vIAkJRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSk7Ci8vIAkJRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5KTsKLy8gCQlFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX01pbmltdW1EZWZlbnNlUHJvcGVydHkpOwoKLy8gCQlpbnQgY2hvaWNlID0gRWRpdG9yR1VJTGF5b3V0LlBvcHVwKCJBZGQgbmV3IEVmZmVjdCIsIC0xLCBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZS5Ub0FycmF5KCkpOwoKLy8gCQlpZiAoY2hvaWNlICE9IC0xKQovLyAJCXsKLy8gCQkJdmFyIG5ld0luc3RhbmNlID0gU2NyaXB0YWJsZU9iamVjdC5DcmVhdGVJbnN0YW5jZShtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZVtjaG9pY2VdKTsKCi8vIAkJCUFzc2V0RGF0YWJhc2UuQWRkT2JqZWN0VG9Bc3NldChuZXdJbnN0YW5jZSwgdGFyZ2V0KTsKCi8vIAkJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuSW5zZXJ0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSk7Ci8vIAkJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSAtIDEpLm9iamVjdFJlZmVyZW5jZVZhbHVlID0gbmV3SW5zdGFuY2U7Ci8vIAkJfQoKLy8gCQlFZGl0b3IgZWQgPSBudWxsOwovLyAJCWludCB0b0RlbGV0ZSA9IC0xOwovLyAJCWZvciAoaW50IGkgPSAwOyBpIDwgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemU7ICsraSkKLy8gCQl7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5CZWdpbkhvcml6b250YWwoKTsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkJlZ2luVmVydGljYWwoKTsKLy8gCQkJdmFyIGl0ZW0gPSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgoaSk7Ci8vIAkJCVNlcmlhbGl6ZWRPYmplY3Qgb2JqID0gbmV3IFNlcmlhbGl6ZWRPYmplY3QoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSk7CgovLyAJCQlFZGl0b3IuQ3JlYXRlQ2FjaGVkRWRpdG9yKGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUsIG51bGwsIHJlZiBlZCk7CgovLyAJCQllZC5Pbkluc3BlY3RvckdVSSgpOwovLyAJCQlFZGl0b3JHVUlMYXlvdXQuRW5kVmVydGljYWwoKTsKCi8vIAkJCWlmIChHVUlMYXlvdXQuQnV0dG9uKCItIiwgR1VJTGF5b3V0LldpZHRoKDMyKSkpCi8vIAkJCXsKLy8gCQkJCXRvRGVsZXRlID0gaTsKLy8gCQkJfQovLyAJCQlFZGl0b3JHVUlMYXlvdXQuRW5kSG9yaXpvbnRhbCgpOwovLyAJCX0KCi8vIAkJaWYgKHRvRGVsZXRlICE9IC0xKQovLyAJCXsKLy8gCQkJdmFyIGl0ZW0gPSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpLm9iamVjdFJlZmVyZW5jZVZhbHVlOwovLyAJCQlEZXN0cm95SW1tZWRpYXRlKGl0ZW0sIHRydWUpOwoKLy8gCQkJLy9uZWVkIHRvIGRvIGl0IHR3aWNlLCBmaXJzdCB0aW1lIGp1c3QgbnVsbGlmeSB0aGUgZW50cnksIHNlY29uZCBhY3R1YWxseSByZW1vdmUgaXQuCi8vIAkJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vIAkJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vIAkJfQoKLy8gCQlzZXJpYWxpemVkT2JqZWN0LkFwcGx5TW9kaWZpZWRQcm9wZXJ0aWVzKCk7Ci8vIAl9Ci8vIH0KLy8gI2VuZGlm",
					"CgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADyFgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkxpbnE7CgojaWYgVU5JVFlfRURJVE9SCnVzaW5nIFVuaXR5RWRpdG9yOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBJdGVtIHRoYW4gY2FuIGJlIGVxdWlwcGVkLiBUaGV5IGNhbiBoYXZlIGEgbWluaW11bSBzdGF0cyB2YWx1ZSBuZWVkZWQgdG8gZXF1aXAgdGhlbSwgYW5kIHlvdSBjYW4gYWRkCgkvLy8gRXF1aXBwZWRFZmZlY3Qgd2hpY2ggd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBvYmplY3QgaXMgZXF1aXBwZWQgYW5kIHVuZXF1aXBwZWQsIGFsbG93aW5nIHRvIGNvZGUgc3BlY2lhbAoJLy8vIGJlaGF2aW91ciB3aGVuIHRoZSBwbGF5ZXIgZXF1aXBwZWQgdGhvc2Ugb2JqZWN0LCBsaWtlIHJhaXNpbmcgc3RhdHMuCgkvLy8gPC9zdW1tYXJ5PgoJW0NyZWF0ZUFzc2V0TWVudShmaWxlTmFtZSA9ICJFcXVpcG1lbnRJdGVtIiwgbWVudU5hbWUgPSAiRGF0YS9FcXVpcG1lbnQgSXRlbSIsIG9yZGVyID0gLTk5OSldCglwdWJsaWMgY2xhc3MgRXF1aXBtZW50SXRlbSA6IEl0ZW0KCXsKCQlwdWJsaWMgZW51bSBFcXVpcG1lbnRTbG90CgkJewoJCQlIZWFkLAoJCQlUb3JzbywKCQkJTGVncywKCQkJRmVldCwKCQkJQWNjZXNzb3J5LAoJCQlXZWFwb24KCQl9CgoJCXB1YmxpYyBFcXVpcG1lbnRTbG90IFNsb3Q7CgkJcHVibGljIFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyIEVxdWlwcGVkU3RhdDsKCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzYyA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCQkJZGVzYyArPSBTdGF0c0Rlc2NyaXB0aW9uKCk7CgkJCS8vIGZvcmVhY2ggKHZhciBlZmZlY3QgaW4gRXF1aXBwZWRFZmZlY3RzKQoJCQkvLyAJZGVzYyArPSAiXG4iICsgZWZmZWN0LkdldERlc2NyaXB0aW9uKCk7CgoJCQkvLyBib29sIHJlcXVpcmVTdHJlbmd0aCA9IE1pbmltdW1TdHJlbmd0aCA+IDA7CgkJCS8vIGJvb2wgcmVxdWlyZURlZmVuc2UgPSBNaW5pbXVtRGVmZW5zZSA+IDA7CgkJCS8vIGJvb2wgcmVxdWlyZUFnaWxpdHkgPSBNaW5pbXVtQWdpbGl0eSA+IDA7CgoJCQkvLyBpZiAocmVxdWlyZVN0cmVuZ3RoIHx8IHJlcXVpcmVBZ2lsaXR5IHx8IHJlcXVpcmVEZWZlbnNlKQoJCQkvLyB7CgkJCS8vIAlkZXNjICs9ICJcblJlcXVpcmUgOiBcbiI7CgoJCQkvLyAJaWYgKHJlcXVpcmVTdHJlbmd0aCkKCQkJLy8gCQlkZXNjICs9ICQiU3RyZW5ndGggOiB7TWluaW11bVN0cmVuZ3RofSI7CgoJCQkvLyAJaWYgKHJlcXVpcmVBZ2lsaXR5KQoJCQkvLyAJewoJCQkvLyAJCWlmIChyZXF1aXJlU3RyZW5ndGgpIGRlc2MgKz0gIiAmICI7CgkJCS8vIAkJZGVzYyArPSAkIkRlZmVuc2UgOiB7TWluaW11bURlZmVuc2V9IjsKCQkJLy8gCX0KCgkJCS8vIAlpZiAocmVxdWlyZURlZmVuc2UpCgkJCS8vIAl7CgkJCS8vIAkJaWYgKHJlcXVpcmVTdHJlbmd0aCB8fCByZXF1aXJlQWdpbGl0eSkgZGVzYyArPSAiICYgIjsKCQkJLy8gCQlkZXNjICs9ICQiQWdpbGl0eSA6IHtNaW5pbXVtQWdpbGl0eX0iOwoJCQkvLyAJfQoJCQkvLyB9CgkJCXJldHVybiBkZXNjOwoJCX0KCQlwdWJsaWMgdm9pZCBFcXVpcHBlZEJ5KENoYXJhY3RlckRhdGEgdXNlcikKCQl7CgkJCXVzZXIuU3RhdHMuQWRkTW9kaWZpZXIoRXF1aXBwZWRTdGF0KTsKCQl9CgoJCXB1YmxpYyB2b2lkIFVuZXF1aXBwZWRCeShDaGFyYWN0ZXJEYXRhIHVzZXIpCgkJewoJCQl1c2VyLlN0YXRzLlJlbW92ZU1vZGlmaWVyKEVxdWlwcGVkU3RhdCk7CgkJfQoKCQlzdHJpbmcgU3RhdHNEZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzYyA9ICJcbiI7CgkJCXN0cmluZyB1bml0ID0gRXF1aXBwZWRTdGF0Lk1vZGlmaWVyTW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLlBlcmNlbnRhZ2UgPyAiJSIgOiAiIjsKCgkJCWlmIChFcXVpcHBlZFN0YXQuU3RhdHMuc3RyZW5ndGggIT0gMCkKCQkJCWRlc2MgKz0gJCJTdHIgOiB7RXF1aXBwZWRTdGF0LlN0YXRzLnN0cmVuZ3RoOiswOy0jfXt1bml0fVxuIjsgLy9mb3JtYXQgc3BlY2lmaWVyIHRvIGZvcmNlIHRoZSArIHNpZ24gdG8gYXBwZWFyCgkJCWlmIChFcXVpcHBlZFN0YXQuU3RhdHMuYWdpbGl0eSAhPSAwKQoJCQkJZGVzYyArPSAkIkFnaSA6IHtFcXVpcHBlZFN0YXQuU3RhdHMuYWdpbGl0eTorMDstI317dW5pdH1cbiI7CgkJCWlmIChFcXVpcHBlZFN0YXQuU3RhdHMuZGVmZW5zZSAhPSAwKQoJCQkJZGVzYyArPSAkIkRlZiA6IHtFcXVpcHBlZFN0YXQuU3RhdHMuZGVmZW5zZTorMDstI317dW5pdH1cbiI7CgkJCWlmIChFcXVpcHBlZFN0YXQuU3RhdHMuaGVhbHRoICE9IDApCgkJCQlkZXNjICs9ICQiSFAgOiB7RXF1aXBwZWRTdGF0LlN0YXRzLmhlYWx0aDorMDstI317dW5pdH1cbiI7CgoJCQlyZXR1cm4gZGVzYzsKCQl9Cgl9Cn0KCi8vICNpZiBVTklUWV9FRElUT1IKLy8gW0N1c3RvbUVkaXRvcih0eXBlb2YoRXF1aXBtZW50SXRlbSkpXQovLyBwdWJsaWMgY2xhc3MgRXF1aXBtZW50SXRlbUVkaXRvciA6IEVkaXRvcgovLyB7Ci8vIAlFcXVpcG1lbnRJdGVtIG1fVGFyZ2V0OwoKLy8gCUl0ZW1FZGl0b3IgbV9JdGVtRWRpdG9yOwoKLy8gCUxpc3Q8c3RyaW5nPiBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZTsKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5OwoKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1Nsb3RQcm9wZXJ0eTsKCi8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eTsKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1BZ2lsaXR5UHJvcGVydHk7Ci8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5OwoKLy8gCXZvaWQgT25FbmFibGUoKQovLyAJewovLyAJCW1fVGFyZ2V0ID0gdGFyZ2V0IGFzIEVxdWlwbWVudEl0ZW07Ci8vIAkJbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLkVxdWlwcGVkRWZmZWN0cykpOwoKLy8gCQltX1Nsb3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLlNsb3QpKTsKCi8vIAkJbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1TdHJlbmd0aCkpOwovLyAJCW1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1BZ2lsaXR5KSk7Ci8vIAkJbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bURlZmVuc2UpKTsKCi8vIAkJbV9JdGVtRWRpdG9yID0gbmV3IEl0ZW1FZGl0b3IoKTsKLy8gCQltX0l0ZW1FZGl0b3IuSW5pdChzZXJpYWxpemVkT2JqZWN0KTsKCi8vIAkJdmFyIGxvb2t1cCA9IHR5cGVvZihFZmZlY3REYXRhKTsKLy8gCQltX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gCQkJLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gCQkJLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gCQkJLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gCQkJLlRvTGlzdCgpOwovLyAJfQoKLy8gCXB1YmxpYyBvdmVycmlkZSB2b2lkIE9uSW5zcGVjdG9yR1VJKCkKLy8gCXsKLy8gCQltX0l0ZW1FZGl0b3IuR1VJKCk7CgovLyAJCUVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fU2xvdFByb3BlcnR5KTsKCi8vIAkJRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSk7Ci8vIAkJRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5KTsKLy8gCQlFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX01pbmltdW1EZWZlbnNlUHJvcGVydHkpOwoKLy8gCQlpbnQgY2hvaWNlID0gRWRpdG9yR1VJTGF5b3V0LlBvcHVwKCJBZGQgbmV3IEVmZmVjdCIsIC0xLCBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZS5Ub0FycmF5KCkpOwoKLy8gCQlpZiAoY2hvaWNlICE9IC0xKQovLyAJCXsKLy8gCQkJdmFyIG5ld0luc3RhbmNlID0gU2NyaXB0YWJsZU9iamVjdC5DcmVhdGVJbnN0YW5jZShtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZVtjaG9pY2VdKTsKCi8vIAkJCUFzc2V0RGF0YWJhc2UuQWRkT2JqZWN0VG9Bc3NldChuZXdJbnN0YW5jZSwgdGFyZ2V0KTsKCi8vIAkJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuSW5zZXJ0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSk7Ci8vIAkJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSAtIDEpLm9iamVjdFJlZmVyZW5jZVZhbHVlID0gbmV3SW5zdGFuY2U7Ci8vIAkJfQoKLy8gCQlFZGl0b3IgZWQgPSBudWxsOwovLyAJCWludCB0b0RlbGV0ZSA9IC0xOwovLyAJCWZvciAoaW50IGkgPSAwOyBpIDwgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemU7ICsraSkKLy8gCQl7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5CZWdpbkhvcml6b250YWwoKTsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkJlZ2luVmVydGljYWwoKTsKLy8gCQkJdmFyIGl0ZW0gPSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgoaSk7Ci8vIAkJCVNlcmlhbGl6ZWRPYmplY3Qgb2JqID0gbmV3IFNlcmlhbGl6ZWRPYmplY3QoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSk7CgovLyAJCQlFZGl0b3IuQ3JlYXRlQ2FjaGVkRWRpdG9yKGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUsIG51bGwsIHJlZiBlZCk7CgovLyAJCQllZC5Pbkluc3BlY3RvckdVSSgpOwovLyAJCQlFZGl0b3JHVUlMYXlvdXQuRW5kVmVydGljYWwoKTsKCi8vIAkJCWlmIChHVUlMYXlvdXQuQnV0dG9uKCItIiwgR1VJTGF5b3V0LldpZHRoKDMyKSkpCi8vIAkJCXsKLy8gCQkJCXRvRGVsZXRlID0gaTsKLy8gCQkJfQovLyAJCQlFZGl0b3JHVUlMYXlvdXQuRW5kSG9yaXpvbnRhbCgpOwovLyAJCX0KCi8vIAkJaWYgKHRvRGVsZXRlICE9IC0xKQovLyAJCXsKLy8gCQkJdmFyIGl0ZW0gPSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpLm9iamVjdFJlZmVyZW5jZVZhbHVlOwovLyAJCQlEZXN0cm95SW1tZWRpYXRlKGl0ZW0sIHRydWUpOwoKLy8gCQkJLy9uZWVkIHRvIGRvIGl0IHR3aWNlLCBmaXJzdCB0aW1lIGp1c3QgbnVsbGlmeSB0aGUgZW50cnksIHNlY29uZCBhY3R1YWxseSByZW1vdmUgaXQuCi8vIAkJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vIAkJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vIAkJfQoKLy8gCQlzZXJpYWxpemVkT2JqZWN0LkFwcGx5TW9kaWZpZWRQcm9wZXJ0aWVzKCk7Ci8vIAl9Ci8vIH0KLy8gI2VuZGlmAAAAAAAAAADqFgAAAAAAAAAAAAA",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1710496596.9074523"
					},
					"AQAAAAAAAAAAAAAA6hYAAAAAAADqFgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkxpbnE7CgojaWYgVU5JVFlfRURJVE9SCnVzaW5nIFVuaXR5RWRpdG9yOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBJdGVtIHRoYW4gY2FuIGJlIGVxdWlwcGVkLiBUaGV5IGNhbiBoYXZlIGEgbWluaW11bSBzdGF0cyB2YWx1ZSBuZWVkZWQgdG8gZXF1aXAgdGhlbSwgYW5kIHlvdSBjYW4gYWRkCgkvLy8gRXF1aXBwZWRFZmZlY3Qgd2hpY2ggd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBvYmplY3QgaXMgZXF1aXBwZWQgYW5kIHVuZXF1aXBwZWQsIGFsbG93aW5nIHRvIGNvZGUgc3BlY2lhbAoJLy8vIGJlaGF2aW91ciB3aGVuIHRoZSBwbGF5ZXIgZXF1aXBwZWQgdGhvc2Ugb2JqZWN0LCBsaWtlIHJhaXNpbmcgc3RhdHMuCgkvLy8gPC9zdW1tYXJ5PgoJW0NyZWF0ZUFzc2V0TWVudShmaWxlTmFtZSA9ICJFcXVpcG1lbnRJdGVtIiwgbWVudU5hbWUgPSAiRGF0YS9FcXVpcG1lbnQgSXRlbSIsIG9yZGVyID0gLTk5OSldCglwdWJsaWMgY2xhc3MgRXF1aXBtZW50SXRlbSA6IEl0ZW0KCXsKCQlwdWJsaWMgZW51bSBFcXVpcG1lbnRTbG90CgkJewoJCQlIZWFkLAoJCQlUb3JzbywKCQkJTGVncywKCQkJRmVldCwKCQkJQWNjZXNzb3J5LAoJCQlXZWFwb24KCQl9CgoJCXB1YmxpYyBFcXVpcG1lbnRTbG90IFNsb3Q7CgkJcHVibGljIFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyIEVxdWlwcGVkU3RhdDsKCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzYyA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCQkJZGVzYyArPSBTdGF0c0Rlc2NyaXB0aW9uKCk7CgkJCS8vIGZvcmVhY2ggKHZhciBlZmZlY3QgaW4gRXF1aXBwZWRFZmZlY3RzKQoJCQkvLyAJZGVzYyArPSAiXG4iICsgZWZmZWN0LkdldERlc2NyaXB0aW9uKCk7CgoJCQkvLyBib29sIHJlcXVpcmVTdHJlbmd0aCA9IE1pbmltdW1TdHJlbmd0aCA+IDA7CgkJCS8vIGJvb2wgcmVxdWlyZURlZmVuc2UgPSBNaW5pbXVtRGVmZW5zZSA+IDA7CgkJCS8vIGJvb2wgcmVxdWlyZUFnaWxpdHkgPSBNaW5pbXVtQWdpbGl0eSA+IDA7CgoJCQkvLyBpZiAocmVxdWlyZVN0cmVuZ3RoIHx8IHJlcXVpcmVBZ2lsaXR5IHx8IHJlcXVpcmVEZWZlbnNlKQoJCQkvLyB7CgkJCS8vIAlkZXNjICs9ICJcblJlcXVpcmUgOiBcbiI7CgoJCQkvLyAJaWYgKHJlcXVpcmVTdHJlbmd0aCkKCQkJLy8gCQlkZXNjICs9ICQiU3RyZW5ndGggOiB7TWluaW11bVN0cmVuZ3RofSI7CgoJCQkvLyAJaWYgKHJlcXVpcmVBZ2lsaXR5KQoJCQkvLyAJewoJCQkvLyAJCWlmIChyZXF1aXJlU3RyZW5ndGgpIGRlc2MgKz0gIiAmICI7CgkJCS8vIAkJZGVzYyArPSAkIkRlZmVuc2UgOiB7TWluaW11bURlZmVuc2V9IjsKCQkJLy8gCX0KCgkJCS8vIAlpZiAocmVxdWlyZURlZmVuc2UpCgkJCS8vIAl7CgkJCS8vIAkJaWYgKHJlcXVpcmVTdHJlbmd0aCB8fCByZXF1aXJlQWdpbGl0eSkgZGVzYyArPSAiICYgIjsKCQkJLy8gCQlkZXNjICs9ICQiQWdpbGl0eSA6IHtNaW5pbXVtQWdpbGl0eX0iOwoJCQkvLyAJfQoJCQkvLyB9CgkJCXJldHVybiBkZXNjOwoJCX0KCQlwdWJsaWMgdm9pZCBFcXVpcHBlZEJ5KENoYXJhY3RlciB1c2VyKQoJCXsKCQkJdXNlci5TdGF0cy5BZGRNb2RpZmllcihFcXVpcHBlZFN0YXQpOwoJCX0KCgkJcHVibGljIHZvaWQgVW5lcXVpcHBlZEJ5KENoYXJhY3RlciB1c2VyKQoJCXsKCQkJdXNlci5TdGF0cy5SZW1vdmVNb2RpZmllcihFcXVpcHBlZFN0YXQpOwoJCX0KCgkJc3RyaW5nIFN0YXRzRGVzY3JpcHRpb24oKQoJCXsKCQkJc3RyaW5nIGRlc2MgPSAiXG4iOwoJCQlzdHJpbmcgdW5pdCA9IEVxdWlwcGVkU3RhdC5Nb2RpZmllck1vZGUgPT0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5QZXJjZW50YWdlID8gIiUiIDogIiI7CgoJCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLnN0cmVuZ3RoICE9IDApCgkJCQlkZXNjICs9ICQiU3RyIDoge0VxdWlwcGVkU3RhdC5TdGF0cy5zdHJlbmd0aDorMDstI317dW5pdH1cbiI7IC8vZm9ybWF0IHNwZWNpZmllciB0byBmb3JjZSB0aGUgKyBzaWduIHRvIGFwcGVhcgoJCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLmFnaWxpdHkgIT0gMCkKCQkJCWRlc2MgKz0gJCJBZ2kgOiB7RXF1aXBwZWRTdGF0LlN0YXRzLmFnaWxpdHk6KzA7LSN9e3VuaXR9XG4iOwoJCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLmRlZmVuc2UgIT0gMCkKCQkJCWRlc2MgKz0gJCJEZWYgOiB7RXF1aXBwZWRTdGF0LlN0YXRzLmRlZmVuc2U6KzA7LSN9e3VuaXR9XG4iOwoJCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLmhlYWx0aCAhPSAwKQoJCQkJZGVzYyArPSAkIkhQIDoge0VxdWlwcGVkU3RhdC5TdGF0cy5oZWFsdGg6KzA7LSN9e3VuaXR9XG4iOwoKCQkJcmV0dXJuIGRlc2M7CgkJfQoJfQp9CgovLyAjaWYgVU5JVFlfRURJVE9SCi8vIFtDdXN0b21FZGl0b3IodHlwZW9mKEVxdWlwbWVudEl0ZW0pKV0KLy8gcHVibGljIGNsYXNzIEVxdWlwbWVudEl0ZW1FZGl0b3IgOiBFZGl0b3IKLy8gewovLyAJRXF1aXBtZW50SXRlbSBtX1RhcmdldDsKCi8vIAlJdGVtRWRpdG9yIG1fSXRlbUVkaXRvcjsKCi8vIAlMaXN0PHN0cmluZz4gbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGU7Ci8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eTsKCi8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9TbG90UHJvcGVydHk7CgovLyAJU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHk7Ci8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5OwovLyAJU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bURlZmVuc2VQcm9wZXJ0eTsKCi8vIAl2b2lkIE9uRW5hYmxlKCkKLy8gCXsKLy8gCQltX1RhcmdldCA9IHRhcmdldCBhcyBFcXVpcG1lbnRJdGVtOwovLyAJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5FcXVpcHBlZEVmZmVjdHMpKTsKCi8vIAkJbV9TbG90UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5TbG90KSk7CgovLyAJCW1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtU3RyZW5ndGgpKTsKLy8gCQltX01pbmltdW1BZ2lsaXR5UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtQWdpbGl0eSkpOwovLyAJCW1fTWluaW11bURlZmVuc2VQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1EZWZlbnNlKSk7CgovLyAJCW1fSXRlbUVkaXRvciA9IG5ldyBJdGVtRWRpdG9yKCk7Ci8vIAkJbV9JdGVtRWRpdG9yLkluaXQoc2VyaWFsaXplZE9iamVjdCk7CgovLyAJCXZhciBsb29rdXAgPSB0eXBlb2YoRWZmZWN0RGF0YSk7Ci8vIAkJbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUgPSBTeXN0ZW0uQXBwRG9tYWluLkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpCi8vIAkJCS5TZWxlY3RNYW55KGFzc2VtYmx5ID0+IGFzc2VtYmx5LkdldFR5cGVzKCkpCi8vIAkJCS5XaGVyZSh4ID0+IHguSXNDbGFzcyAmJiAheC5Jc0Fic3RyYWN0ICYmIHguSXNTdWJjbGFzc09mKGxvb2t1cCkpCi8vIAkJCS5TZWxlY3QodHlwZSA9PiB0eXBlLk5hbWUpCi8vIAkJCS5Ub0xpc3QoKTsKLy8gCX0KCi8vIAlwdWJsaWMgb3ZlcnJpZGUgdm9pZCBPbkluc3BlY3RvckdVSSgpCi8vIAl7Ci8vIAkJbV9JdGVtRWRpdG9yLkdVSSgpOwoKLy8gCQlFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX1Nsb3RQcm9wZXJ0eSk7CgovLyAJCUVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHkpOwovLyAJCUVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eSk7Ci8vIAkJRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5KTsKCi8vIAkJaW50IGNob2ljZSA9IEVkaXRvckdVSUxheW91dC5Qb3B1cCgiQWRkIG5ldyBFZmZlY3QiLCAtMSwgbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUuVG9BcnJheSgpKTsKCi8vIAkJaWYgKGNob2ljZSAhPSAtMSkKLy8gCQl7Ci8vIAkJCXZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGVbY2hvaWNlXSk7CgovLyAJCQlBc3NldERhdGFiYXNlLkFkZE9iamVjdFRvQXNzZXQobmV3SW5zdGFuY2UsIHRhcmdldCk7CgovLyAJCQltX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5Lkluc2VydEFycmF5RWxlbWVudEF0SW5kZXgobV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAJCQltX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgobV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUgLSAxKS5vYmplY3RSZWZlcmVuY2VWYWx1ZSA9IG5ld0luc3RhbmNlOwovLyAJCX0KCi8vIAkJRWRpdG9yIGVkID0gbnVsbDsKLy8gCQlpbnQgdG9EZWxldGUgPSAtMTsKLy8gCQlmb3IgKGludCBpID0gMDsgaSA8IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vIAkJewovLyAJCQlFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vIAkJCXZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KGkpOwovLyAJCQlTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gCQkJRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gCQkJZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAJCQlpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAJCQl7Ci8vIAkJCQl0b0RlbGV0ZSA9IGk7Ci8vIAkJCX0KLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gCQl9CgovLyAJCWlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gCQl7Ci8vIAkJCXZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKLy8gCQkJRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKCi8vIAkJCS8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgovLyAJCQltX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAJCQltX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAJCX0KCi8vIAkJc2VyaWFsaXplZE9iamVjdC5BcHBseU1vZGlmaWVkUHJvcGVydGllcygpOwovLyAJfQovLyB9Ci8vICNlbmRpZg",
					"BgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					1,
					1,
					"revert",
					null,
					"BQAAAAAAAAAAAAAAAAAAAAAAAADqFgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkxpbnE7CgojaWYgVU5JVFlfRURJVE9SCnVzaW5nIFVuaXR5RWRpdG9yOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBJdGVtIHRoYW4gY2FuIGJlIGVxdWlwcGVkLiBUaGV5IGNhbiBoYXZlIGEgbWluaW11bSBzdGF0cyB2YWx1ZSBuZWVkZWQgdG8gZXF1aXAgdGhlbSwgYW5kIHlvdSBjYW4gYWRkCgkvLy8gRXF1aXBwZWRFZmZlY3Qgd2hpY2ggd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBvYmplY3QgaXMgZXF1aXBwZWQgYW5kIHVuZXF1aXBwZWQsIGFsbG93aW5nIHRvIGNvZGUgc3BlY2lhbAoJLy8vIGJlaGF2aW91ciB3aGVuIHRoZSBwbGF5ZXIgZXF1aXBwZWQgdGhvc2Ugb2JqZWN0LCBsaWtlIHJhaXNpbmcgc3RhdHMuCgkvLy8gPC9zdW1tYXJ5PgoJW0NyZWF0ZUFzc2V0TWVudShmaWxlTmFtZSA9ICJFcXVpcG1lbnRJdGVtIiwgbWVudU5hbWUgPSAiRGF0YS9FcXVpcG1lbnQgSXRlbSIsIG9yZGVyID0gLTk5OSldCglwdWJsaWMgY2xhc3MgRXF1aXBtZW50SXRlbSA6IEl0ZW0KCXsKCQlwdWJsaWMgZW51bSBFcXVpcG1lbnRTbG90CgkJewoJCQlIZWFkLAoJCQlUb3JzbywKCQkJTGVncywKCQkJRmVldCwKCQkJQWNjZXNzb3J5LAoJCQlXZWFwb24KCQl9CgoJCXB1YmxpYyBFcXVpcG1lbnRTbG90IFNsb3Q7CgkJcHVibGljIFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyIEVxdWlwcGVkU3RhdDsKCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzYyA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCQkJZGVzYyArPSBTdGF0c0Rlc2NyaXB0aW9uKCk7CgkJCS8vIGZvcmVhY2ggKHZhciBlZmZlY3QgaW4gRXF1aXBwZWRFZmZlY3RzKQoJCQkvLyAJZGVzYyArPSAiXG4iICsgZWZmZWN0LkdldERlc2NyaXB0aW9uKCk7CgoJCQkvLyBib29sIHJlcXVpcmVTdHJlbmd0aCA9IE1pbmltdW1TdHJlbmd0aCA+IDA7CgkJCS8vIGJvb2wgcmVxdWlyZURlZmVuc2UgPSBNaW5pbXVtRGVmZW5zZSA+IDA7CgkJCS8vIGJvb2wgcmVxdWlyZUFnaWxpdHkgPSBNaW5pbXVtQWdpbGl0eSA+IDA7CgoJCQkvLyBpZiAocmVxdWlyZVN0cmVuZ3RoIHx8IHJlcXVpcmVBZ2lsaXR5IHx8IHJlcXVpcmVEZWZlbnNlKQoJCQkvLyB7CgkJCS8vIAlkZXNjICs9ICJcblJlcXVpcmUgOiBcbiI7CgoJCQkvLyAJaWYgKHJlcXVpcmVTdHJlbmd0aCkKCQkJLy8gCQlkZXNjICs9ICQiU3RyZW5ndGggOiB7TWluaW11bVN0cmVuZ3RofSI7CgoJCQkvLyAJaWYgKHJlcXVpcmVBZ2lsaXR5KQoJCQkvLyAJewoJCQkvLyAJCWlmIChyZXF1aXJlU3RyZW5ndGgpIGRlc2MgKz0gIiAmICI7CgkJCS8vIAkJZGVzYyArPSAkIkRlZmVuc2UgOiB7TWluaW11bURlZmVuc2V9IjsKCQkJLy8gCX0KCgkJCS8vIAlpZiAocmVxdWlyZURlZmVuc2UpCgkJCS8vIAl7CgkJCS8vIAkJaWYgKHJlcXVpcmVTdHJlbmd0aCB8fCByZXF1aXJlQWdpbGl0eSkgZGVzYyArPSAiICYgIjsKCQkJLy8gCQlkZXNjICs9ICQiQWdpbGl0eSA6IHtNaW5pbXVtQWdpbGl0eX0iOwoJCQkvLyAJfQoJCQkvLyB9CgkJCXJldHVybiBkZXNjOwoJCX0KCQlwdWJsaWMgdm9pZCBFcXVpcHBlZEJ5KENoYXJhY3RlciB1c2VyKQoJCXsKCQkJdXNlci5TdGF0cy5BZGRNb2RpZmllcihFcXVpcHBlZFN0YXQpOwoJCX0KCgkJcHVibGljIHZvaWQgVW5lcXVpcHBlZEJ5KENoYXJhY3RlciB1c2VyKQoJCXsKCQkJdXNlci5TdGF0cy5SZW1vdmVNb2RpZmllcihFcXVpcHBlZFN0YXQpOwoJCX0KCgkJc3RyaW5nIFN0YXRzRGVzY3JpcHRpb24oKQoJCXsKCQkJc3RyaW5nIGRlc2MgPSAiXG4iOwoJCQlzdHJpbmcgdW5pdCA9IEVxdWlwcGVkU3RhdC5Nb2RpZmllck1vZGUgPT0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5QZXJjZW50YWdlID8gIiUiIDogIiI7CgoJCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLnN0cmVuZ3RoICE9IDApCgkJCQlkZXNjICs9ICQiU3RyIDoge0VxdWlwcGVkU3RhdC5TdGF0cy5zdHJlbmd0aDorMDstI317dW5pdH1cbiI7IC8vZm9ybWF0IHNwZWNpZmllciB0byBmb3JjZSB0aGUgKyBzaWduIHRvIGFwcGVhcgoJCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLmFnaWxpdHkgIT0gMCkKCQkJCWRlc2MgKz0gJCJBZ2kgOiB7RXF1aXBwZWRTdGF0LlN0YXRzLmFnaWxpdHk6KzA7LSN9e3VuaXR9XG4iOwoJCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLmRlZmVuc2UgIT0gMCkKCQkJCWRlc2MgKz0gJCJEZWYgOiB7RXF1aXBwZWRTdGF0LlN0YXRzLmRlZmVuc2U6KzA7LSN9e3VuaXR9XG4iOwoJCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLmhlYWx0aCAhPSAwKQoJCQkJZGVzYyArPSAkIkhQIDoge0VxdWlwcGVkU3RhdC5TdGF0cy5oZWFsdGg6KzA7LSN9e3VuaXR9XG4iOwoKCQkJcmV0dXJuIGRlc2M7CgkJfQoJfQp9CgovLyAjaWYgVU5JVFlfRURJVE9SCi8vIFtDdXN0b21FZGl0b3IodHlwZW9mKEVxdWlwbWVudEl0ZW0pKV0KLy8gcHVibGljIGNsYXNzIEVxdWlwbWVudEl0ZW1FZGl0b3IgOiBFZGl0b3IKLy8gewovLyAJRXF1aXBtZW50SXRlbSBtX1RhcmdldDsKCi8vIAlJdGVtRWRpdG9yIG1fSXRlbUVkaXRvcjsKCi8vIAlMaXN0PHN0cmluZz4gbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGU7Ci8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eTsKCi8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9TbG90UHJvcGVydHk7CgovLyAJU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHk7Ci8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5OwovLyAJU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bURlZmVuc2VQcm9wZXJ0eTsKCi8vIAl2b2lkIE9uRW5hYmxlKCkKLy8gCXsKLy8gCQltX1RhcmdldCA9IHRhcmdldCBhcyBFcXVpcG1lbnRJdGVtOwovLyAJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5FcXVpcHBlZEVmZmVjdHMpKTsKCi8vIAkJbV9TbG90UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5TbG90KSk7CgovLyAJCW1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtU3RyZW5ndGgpKTsKLy8gCQltX01pbmltdW1BZ2lsaXR5UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtQWdpbGl0eSkpOwovLyAJCW1fTWluaW11bURlZmVuc2VQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1EZWZlbnNlKSk7CgovLyAJCW1fSXRlbUVkaXRvciA9IG5ldyBJdGVtRWRpdG9yKCk7Ci8vIAkJbV9JdGVtRWRpdG9yLkluaXQoc2VyaWFsaXplZE9iamVjdCk7CgovLyAJCXZhciBsb29rdXAgPSB0eXBlb2YoRWZmZWN0RGF0YSk7Ci8vIAkJbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUgPSBTeXN0ZW0uQXBwRG9tYWluLkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpCi8vIAkJCS5TZWxlY3RNYW55KGFzc2VtYmx5ID0+IGFzc2VtYmx5LkdldFR5cGVzKCkpCi8vIAkJCS5XaGVyZSh4ID0+IHguSXNDbGFzcyAmJiAheC5Jc0Fic3RyYWN0ICYmIHguSXNTdWJjbGFzc09mKGxvb2t1cCkpCi8vIAkJCS5TZWxlY3QodHlwZSA9PiB0eXBlLk5hbWUpCi8vIAkJCS5Ub0xpc3QoKTsKLy8gCX0KCi8vIAlwdWJsaWMgb3ZlcnJpZGUgdm9pZCBPbkluc3BlY3RvckdVSSgpCi8vIAl7Ci8vIAkJbV9JdGVtRWRpdG9yLkdVSSgpOwoKLy8gCQlFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX1Nsb3RQcm9wZXJ0eSk7CgovLyAJCUVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHkpOwovLyAJCUVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eSk7Ci8vIAkJRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5KTsKCi8vIAkJaW50IGNob2ljZSA9IEVkaXRvckdVSUxheW91dC5Qb3B1cCgiQWRkIG5ldyBFZmZlY3QiLCAtMSwgbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUuVG9BcnJheSgpKTsKCi8vIAkJaWYgKGNob2ljZSAhPSAtMSkKLy8gCQl7Ci8vIAkJCXZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGVbY2hvaWNlXSk7CgovLyAJCQlBc3NldERhdGFiYXNlLkFkZE9iamVjdFRvQXNzZXQobmV3SW5zdGFuY2UsIHRhcmdldCk7CgovLyAJCQltX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5Lkluc2VydEFycmF5RWxlbWVudEF0SW5kZXgobV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAJCQltX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgobV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUgLSAxKS5vYmplY3RSZWZlcmVuY2VWYWx1ZSA9IG5ld0luc3RhbmNlOwovLyAJCX0KCi8vIAkJRWRpdG9yIGVkID0gbnVsbDsKLy8gCQlpbnQgdG9EZWxldGUgPSAtMTsKLy8gCQlmb3IgKGludCBpID0gMDsgaSA8IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vIAkJewovLyAJCQlFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vIAkJCXZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KGkpOwovLyAJCQlTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gCQkJRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gCQkJZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAJCQlpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAJCQl7Ci8vIAkJCQl0b0RlbGV0ZSA9IGk7Ci8vIAkJCX0KLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gCQl9CgovLyAJCWlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gCQl7Ci8vIAkJCXZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKLy8gCQkJRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKCi8vIAkJCS8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgovLyAJCQltX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAJCQltX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAJCX0KCi8vIAkJc2VyaWFsaXplZE9iamVjdC5BcHBseU1vZGlmaWVkUHJvcGVydGllcygpOwovLyAJfQovLyB9Ci8vICNlbmRpZgAAAAAAAAAA+RYAAAAAAAAAAAAAAAAAAAAAAAD5FgAAAAAAAAAAAAAAAAAAAAAAAPkWAAAAAAAAAAAAAAAAAAAAAAAA+RYAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					1,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD5FgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkxpbnE7CgojaWYgVU5JVFlfRURJVE9SCnVzaW5nIFVuaXR5RWRpdG9yOwojZW5kaWYKCm5hbWVzcGFjZSBDcmVhdG9yS2l0Q29kZQp7CgkvLy8gPHN1bW1hcnk+CgkvLy8gU3BlY2lhbCBJdGVtIHRoYW4gY2FuIGJlIGVxdWlwcGVkLiBUaGV5IGNhbiBoYXZlIGEgbWluaW11bSBzdGF0cyB2YWx1ZSBuZWVkZWQgdG8gZXF1aXAgdGhlbSwgYW5kIHlvdSBjYW4gYWRkCgkvLy8gRXF1aXBwZWRFZmZlY3Qgd2hpY2ggd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBvYmplY3QgaXMgZXF1aXBwZWQgYW5kIHVuZXF1aXBwZWQsIGFsbG93aW5nIHRvIGNvZGUgc3BlY2lhbAoJLy8vIGJlaGF2aW91ciB3aGVuIHRoZSBwbGF5ZXIgZXF1aXBwZWQgdGhvc2Ugb2JqZWN0LCBsaWtlIHJhaXNpbmcgc3RhdHMuCgkvLy8gPC9zdW1tYXJ5PgoJW0NyZWF0ZUFzc2V0TWVudShmaWxlTmFtZSA9ICJFcXVpcG1lbnRJdGVtIiwgbWVudU5hbWUgPSAiRGF0YS9FcXVpcG1lbnQgSXRlbSIsIG9yZGVyID0gLTk5OSldCglwdWJsaWMgY2xhc3MgRXF1aXBtZW50SXRlbSA6IEl0ZW0KCXsKCQlwdWJsaWMgZW51bSBFcXVpcG1lbnRTbG90CgkJewoJCQlIZWFkLAoJCQlUb3JzbywKCQkJTGVncywKCQkJRmVldCwKCQkJQWNjZXNzb3J5LAoJCQlXZWFwb24sCgkJCVZpY2VXZWFwb24KCQl9CgoJCXB1YmxpYyBFcXVpcG1lbnRTbG90IFNsb3Q7CgkJcHVibGljIFN0YXRTeXN0ZW0uU3RhdE1vZGlmaWVyIEVxdWlwcGVkU3RhdDsKCgkJcHVibGljIG92ZXJyaWRlIHN0cmluZyBHZXREZXNjcmlwdGlvbigpCgkJewoJCQlzdHJpbmcgZGVzYyA9IGJhc2UuR2V0RGVzY3JpcHRpb24oKTsKCQkJZGVzYyArPSBTdGF0c0Rlc2NyaXB0aW9uKCk7CgkJCS8vIGZvcmVhY2ggKHZhciBlZmZlY3QgaW4gRXF1aXBwZWRFZmZlY3RzKQoJCQkvLyAJZGVzYyArPSAiXG4iICsgZWZmZWN0LkdldERlc2NyaXB0aW9uKCk7CgoJCQkvLyBib29sIHJlcXVpcmVTdHJlbmd0aCA9IE1pbmltdW1TdHJlbmd0aCA+IDA7CgkJCS8vIGJvb2wgcmVxdWlyZURlZmVuc2UgPSBNaW5pbXVtRGVmZW5zZSA+IDA7CgkJCS8vIGJvb2wgcmVxdWlyZUFnaWxpdHkgPSBNaW5pbXVtQWdpbGl0eSA+IDA7CgoJCQkvLyBpZiAocmVxdWlyZVN0cmVuZ3RoIHx8IHJlcXVpcmVBZ2lsaXR5IHx8IHJlcXVpcmVEZWZlbnNlKQoJCQkvLyB7CgkJCS8vIAlkZXNjICs9ICJcblJlcXVpcmUgOiBcbiI7CgoJCQkvLyAJaWYgKHJlcXVpcmVTdHJlbmd0aCkKCQkJLy8gCQlkZXNjICs9ICQiU3RyZW5ndGggOiB7TWluaW11bVN0cmVuZ3RofSI7CgoJCQkvLyAJaWYgKHJlcXVpcmVBZ2lsaXR5KQoJCQkvLyAJewoJCQkvLyAJCWlmIChyZXF1aXJlU3RyZW5ndGgpIGRlc2MgKz0gIiAmICI7CgkJCS8vIAkJZGVzYyArPSAkIkRlZmVuc2UgOiB7TWluaW11bURlZmVuc2V9IjsKCQkJLy8gCX0KCgkJCS8vIAlpZiAocmVxdWlyZURlZmVuc2UpCgkJCS8vIAl7CgkJCS8vIAkJaWYgKHJlcXVpcmVTdHJlbmd0aCB8fCByZXF1aXJlQWdpbGl0eSkgZGVzYyArPSAiICYgIjsKCQkJLy8gCQlkZXNjICs9ICQiQWdpbGl0eSA6IHtNaW5pbXVtQWdpbGl0eX0iOwoJCQkvLyAJfQoJCQkvLyB9CgkJCXJldHVybiBkZXNjOwoJCX0KCQlwdWJsaWMgdm9pZCBFcXVpcHBlZEJ5KENoYXJhY3RlciB1c2VyKQoJCXsKCQkJdXNlci5TdGF0cy5BZGRNb2RpZmllcihFcXVpcHBlZFN0YXQpOwoJCX0KCgkJcHVibGljIHZvaWQgVW5lcXVpcHBlZEJ5KENoYXJhY3RlciB1c2VyKQoJCXsKCQkJdXNlci5TdGF0cy5SZW1vdmVNb2RpZmllcihFcXVpcHBlZFN0YXQpOwoJCX0KCgkJc3RyaW5nIFN0YXRzRGVzY3JpcHRpb24oKQoJCXsKCQkJc3RyaW5nIGRlc2MgPSAiXG4iOwoJCQlzdHJpbmcgdW5pdCA9IEVxdWlwcGVkU3RhdC5Nb2RpZmllck1vZGUgPT0gU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIuTW9kZS5QZXJjZW50YWdlID8gIiUiIDogIiI7CgoJCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLnN0cmVuZ3RoICE9IDApCgkJCQlkZXNjICs9ICQiU3RyIDoge0VxdWlwcGVkU3RhdC5TdGF0cy5zdHJlbmd0aDorMDstI317dW5pdH1cbiI7IC8vZm9ybWF0IHNwZWNpZmllciB0byBmb3JjZSB0aGUgKyBzaWduIHRvIGFwcGVhcgoJCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLmFnaWxpdHkgIT0gMCkKCQkJCWRlc2MgKz0gJCJBZ2kgOiB7RXF1aXBwZWRTdGF0LlN0YXRzLmFnaWxpdHk6KzA7LSN9e3VuaXR9XG4iOwoJCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLmRlZmVuc2UgIT0gMCkKCQkJCWRlc2MgKz0gJCJEZWYgOiB7RXF1aXBwZWRTdGF0LlN0YXRzLmRlZmVuc2U6KzA7LSN9e3VuaXR9XG4iOwoJCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLmhlYWx0aCAhPSAwKQoJCQkJZGVzYyArPSAkIkhQIDoge0VxdWlwcGVkU3RhdC5TdGF0cy5oZWFsdGg6KzA7LSN9e3VuaXR9XG4iOwoKCQkJcmV0dXJuIGRlc2M7CgkJfQoJfQp9CgovLyAjaWYgVU5JVFlfRURJVE9SCi8vIFtDdXN0b21FZGl0b3IodHlwZW9mKEVxdWlwbWVudEl0ZW0pKV0KLy8gcHVibGljIGNsYXNzIEVxdWlwbWVudEl0ZW1FZGl0b3IgOiBFZGl0b3IKLy8gewovLyAJRXF1aXBtZW50SXRlbSBtX1RhcmdldDsKCi8vIAlJdGVtRWRpdG9yIG1fSXRlbUVkaXRvcjsKCi8vIAlMaXN0PHN0cmluZz4gbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGU7Ci8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eTsKCi8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9TbG90UHJvcGVydHk7CgovLyAJU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHk7Ci8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5OwovLyAJU2VyaWFsaXplZFByb3BlcnR5IG1fTWluaW11bURlZmVuc2VQcm9wZXJ0eTsKCi8vIAl2b2lkIE9uRW5hYmxlKCkKLy8gCXsKLy8gCQltX1RhcmdldCA9IHRhcmdldCBhcyBFcXVpcG1lbnRJdGVtOwovLyAJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5FcXVpcHBlZEVmZmVjdHMpKTsKCi8vIAkJbV9TbG90UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5TbG90KSk7CgovLyAJCW1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtU3RyZW5ndGgpKTsKLy8gCQltX01pbmltdW1BZ2lsaXR5UHJvcGVydHkgPSBzZXJpYWxpemVkT2JqZWN0LkZpbmRQcm9wZXJ0eShuYW1lb2YoRXF1aXBtZW50SXRlbS5NaW5pbXVtQWdpbGl0eSkpOwovLyAJCW1fTWluaW11bURlZmVuc2VQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1EZWZlbnNlKSk7CgovLyAJCW1fSXRlbUVkaXRvciA9IG5ldyBJdGVtRWRpdG9yKCk7Ci8vIAkJbV9JdGVtRWRpdG9yLkluaXQoc2VyaWFsaXplZE9iamVjdCk7CgovLyAJCXZhciBsb29rdXAgPSB0eXBlb2YoRWZmZWN0RGF0YSk7Ci8vIAkJbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUgPSBTeXN0ZW0uQXBwRG9tYWluLkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpCi8vIAkJCS5TZWxlY3RNYW55KGFzc2VtYmx5ID0+IGFzc2VtYmx5LkdldFR5cGVzKCkpCi8vIAkJCS5XaGVyZSh4ID0+IHguSXNDbGFzcyAmJiAheC5Jc0Fic3RyYWN0ICYmIHguSXNTdWJjbGFzc09mKGxvb2t1cCkpCi8vIAkJCS5TZWxlY3QodHlwZSA9PiB0eXBlLk5hbWUpCi8vIAkJCS5Ub0xpc3QoKTsKLy8gCX0KCi8vIAlwdWJsaWMgb3ZlcnJpZGUgdm9pZCBPbkluc3BlY3RvckdVSSgpCi8vIAl7Ci8vIAkJbV9JdGVtRWRpdG9yLkdVSSgpOwoKLy8gCQlFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX1Nsb3RQcm9wZXJ0eSk7CgovLyAJCUVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bVN0cmVuZ3RoUHJvcGVydHkpOwovLyAJCUVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eSk7Ci8vIAkJRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5KTsKCi8vIAkJaW50IGNob2ljZSA9IEVkaXRvckdVSUxheW91dC5Qb3B1cCgiQWRkIG5ldyBFZmZlY3QiLCAtMSwgbV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGUuVG9BcnJheSgpKTsKCi8vIAkJaWYgKGNob2ljZSAhPSAtMSkKLy8gCQl7Ci8vIAkJCXZhciBuZXdJbnN0YW5jZSA9IFNjcmlwdGFibGVPYmplY3QuQ3JlYXRlSW5zdGFuY2UobV9BdmFpbGFibGVFcXVpcEVmZmVjdFR5cGVbY2hvaWNlXSk7CgovLyAJCQlBc3NldERhdGFiYXNlLkFkZE9iamVjdFRvQXNzZXQobmV3SW5zdGFuY2UsIHRhcmdldCk7CgovLyAJCQltX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5Lkluc2VydEFycmF5RWxlbWVudEF0SW5kZXgobV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUpOwovLyAJCQltX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgobV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemUgLSAxKS5vYmplY3RSZWZlcmVuY2VWYWx1ZSA9IG5ld0luc3RhbmNlOwovLyAJCX0KCi8vIAkJRWRpdG9yIGVkID0gbnVsbDsKLy8gCQlpbnQgdG9EZWxldGUgPSAtMTsKLy8gCQlmb3IgKGludCBpID0gMDsgaSA8IG1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuYXJyYXlTaXplOyArK2kpCi8vIAkJewovLyAJCQlFZGl0b3JHVUlMYXlvdXQuQmVnaW5Ib3Jpem9udGFsKCk7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5CZWdpblZlcnRpY2FsKCk7Ci8vIAkJCXZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KGkpOwovLyAJCQlTZXJpYWxpemVkT2JqZWN0IG9iaiA9IG5ldyBTZXJpYWxpemVkT2JqZWN0KGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUpOwoKLy8gCQkJRWRpdG9yLkNyZWF0ZUNhY2hlZEVkaXRvcihpdGVtLm9iamVjdFJlZmVyZW5jZVZhbHVlLCBudWxsLCByZWYgZWQpOwoKLy8gCQkJZWQuT25JbnNwZWN0b3JHVUkoKTsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkVuZFZlcnRpY2FsKCk7CgovLyAJCQlpZiAoR1VJTGF5b3V0LkJ1dHRvbigiLSIsIEdVSUxheW91dC5XaWR0aCgzMikpKQovLyAJCQl7Ci8vIAkJCQl0b0RlbGV0ZSA9IGk7Ci8vIAkJCX0KLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkVuZEhvcml6b250YWwoKTsKLy8gCQl9CgovLyAJCWlmICh0b0RlbGV0ZSAhPSAtMSkKLy8gCQl7Ci8vIAkJCXZhciBpdGVtID0gbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5HZXRBcnJheUVsZW1lbnRBdEluZGV4KHRvRGVsZXRlKS5vYmplY3RSZWZlcmVuY2VWYWx1ZTsKLy8gCQkJRGVzdHJveUltbWVkaWF0ZShpdGVtLCB0cnVlKTsKCi8vIAkJCS8vbmVlZCB0byBkbyBpdCB0d2ljZSwgZmlyc3QgdGltZSBqdXN0IG51bGxpZnkgdGhlIGVudHJ5LCBzZWNvbmQgYWN0dWFsbHkgcmVtb3ZlIGl0LgovLyAJCQltX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAJCQltX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkRlbGV0ZUFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpOwovLyAJCX0KCi8vIAkJc2VyaWFsaXplZE9iamVjdC5BcHBseU1vZGlmaWVkUHJvcGVydGllcygpOwovLyAJfQovLyB9Ci8vICNlbmRpZgAAAAAAAAAAmBYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"convert_to_utf8",
					{
						"detect_on_fail": true,
						"stamp": "1711530604.1197462"
					},
					"AQAAAAAAAAAAAAAAmBYAAAAAAACYFgAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBVbml0eUVuZ2luZTsKdXNpbmcgU3lzdGVtLkxpbnE7CgojaWYgVU5JVFlfRURJVE9SCnVzaW5nIFVuaXR5RWRpdG9yOwojZW5kaWYKCgovLy8gPHN1bW1hcnk+Ci8vLyBTcGVjaWFsIEl0ZW0gdGhhbiBjYW4gYmUgZXF1aXBwZWQuIFRoZXkgY2FuIGhhdmUgYSBtaW5pbXVtIHN0YXRzIHZhbHVlIG5lZWRlZCB0byBlcXVpcCB0aGVtLCBhbmQgeW91IGNhbiBhZGQKLy8vIEVxdWlwcGVkRWZmZWN0IHdoaWNoIHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB0aGUgb2JqZWN0IGlzIGVxdWlwcGVkIGFuZCB1bmVxdWlwcGVkLCBhbGxvd2luZyB0byBjb2RlIHNwZWNpYWwKLy8vIGJlaGF2aW91ciB3aGVuIHRoZSBwbGF5ZXIgZXF1aXBwZWQgdGhvc2Ugb2JqZWN0LCBsaWtlIHJhaXNpbmcgc3RhdHMuCi8vLyA8L3N1bW1hcnk+CltDcmVhdGVBc3NldE1lbnUoZmlsZU5hbWUgPSAiRXF1aXBtZW50SXRlbSIsIG1lbnVOYW1lID0gIkRhdGEvRXF1aXBtZW50IEl0ZW0iLCBvcmRlciA9IC05OTkpXQpwdWJsaWMgY2xhc3MgRXF1aXBtZW50SXRlbSA6IEl0ZW0KewoJcHVibGljIGVudW0gRXF1aXBtZW50U2xvdAoJewoJCUhlYWQsCgkJVG9yc28sCgkJTGVncywKCQlGZWV0LAoJCUFjY2Vzc29yeSwKCQlXZWFwb24sCgkJVmljZVdlYXBvbgoJfQoKCXB1YmxpYyBFcXVpcG1lbnRTbG90IFNsb3Q7CglwdWJsaWMgU3RhdFN5c3RlbS5TdGF0TW9kaWZpZXIgRXF1aXBwZWRTdGF0OwoKCXB1YmxpYyBvdmVycmlkZSBzdHJpbmcgR2V0RGVzY3JpcHRpb24oKQoJewoJCXN0cmluZyBkZXNjID0gYmFzZS5HZXREZXNjcmlwdGlvbigpOwoJCWRlc2MgKz0gU3RhdHNEZXNjcmlwdGlvbigpOwoJCS8vIGZvcmVhY2ggKHZhciBlZmZlY3QgaW4gRXF1aXBwZWRFZmZlY3RzKQoJCS8vIAlkZXNjICs9ICJcbiIgKyBlZmZlY3QuR2V0RGVzY3JpcHRpb24oKTsKCgkJLy8gYm9vbCByZXF1aXJlU3RyZW5ndGggPSBNaW5pbXVtU3RyZW5ndGggPiAwOwoJCS8vIGJvb2wgcmVxdWlyZURlZmVuc2UgPSBNaW5pbXVtRGVmZW5zZSA+IDA7CgkJLy8gYm9vbCByZXF1aXJlQWdpbGl0eSA9IE1pbmltdW1BZ2lsaXR5ID4gMDsKCgkJLy8gaWYgKHJlcXVpcmVTdHJlbmd0aCB8fCByZXF1aXJlQWdpbGl0eSB8fCByZXF1aXJlRGVmZW5zZSkKCQkvLyB7CgkJLy8gCWRlc2MgKz0gIlxuUmVxdWlyZSA6IFxuIjsKCgkJLy8gCWlmIChyZXF1aXJlU3RyZW5ndGgpCgkJLy8gCQlkZXNjICs9ICQiU3RyZW5ndGggOiB7TWluaW11bVN0cmVuZ3RofSI7CgoJCS8vIAlpZiAocmVxdWlyZUFnaWxpdHkpCgkJLy8gCXsKCQkvLyAJCWlmIChyZXF1aXJlU3RyZW5ndGgpIGRlc2MgKz0gIiAmICI7CgkJLy8gCQlkZXNjICs9ICQiRGVmZW5zZSA6IHtNaW5pbXVtRGVmZW5zZX0iOwoJCS8vIAl9CgoJCS8vIAlpZiAocmVxdWlyZURlZmVuc2UpCgkJLy8gCXsKCQkvLyAJCWlmIChyZXF1aXJlU3RyZW5ndGggfHwgcmVxdWlyZUFnaWxpdHkpIGRlc2MgKz0gIiAmICI7CgkJLy8gCQlkZXNjICs9ICQiQWdpbGl0eSA6IHtNaW5pbXVtQWdpbGl0eX0iOwoJCS8vIAl9CgkJLy8gfQoJCXJldHVybiBkZXNjOwoJfQoJcHVibGljIHZvaWQgRXF1aXBwZWRCeShDaGFyYWN0ZXIgdXNlcikKCXsKCQl1c2VyLlN0YXRzLkFkZE1vZGlmaWVyKEVxdWlwcGVkU3RhdCk7Cgl9CgoJcHVibGljIHZvaWQgVW5lcXVpcHBlZEJ5KENoYXJhY3RlciB1c2VyKQoJewoJCXVzZXIuU3RhdHMuUmVtb3ZlTW9kaWZpZXIoRXF1aXBwZWRTdGF0KTsKCX0KCglzdHJpbmcgU3RhdHNEZXNjcmlwdGlvbigpCgl7CgkJc3RyaW5nIGRlc2MgPSAiXG4iOwoJCXN0cmluZyB1bml0ID0gRXF1aXBwZWRTdGF0Lk1vZGlmaWVyTW9kZSA9PSBTdGF0U3lzdGVtLlN0YXRNb2RpZmllci5Nb2RlLlBlcmNlbnRhZ2UgPyAiJSIgOiAiIjsKCgkJaWYgKEVxdWlwcGVkU3RhdC5TdGF0cy5zdHJlbmd0aCAhPSAwKQoJCQlkZXNjICs9ICQiU3RyIDoge0VxdWlwcGVkU3RhdC5TdGF0cy5zdHJlbmd0aDorMDstI317dW5pdH1cbiI7IC8vZm9ybWF0IHNwZWNpZmllciB0byBmb3JjZSB0aGUgKyBzaWduIHRvIGFwcGVhcgoJCWlmIChFcXVpcHBlZFN0YXQuU3RhdHMuYWdpbGl0eSAhPSAwKQoJCQlkZXNjICs9ICQiQWdpIDoge0VxdWlwcGVkU3RhdC5TdGF0cy5hZ2lsaXR5OiswOy0jfXt1bml0fVxuIjsKCQlpZiAoRXF1aXBwZWRTdGF0LlN0YXRzLmRlZmVuc2UgIT0gMCkKCQkJZGVzYyArPSAkIkRlZiA6IHtFcXVpcHBlZFN0YXQuU3RhdHMuZGVmZW5zZTorMDstI317dW5pdH1cbiI7CgkJaWYgKEVxdWlwcGVkU3RhdC5TdGF0cy5oZWFsdGggIT0gMCkKCQkJZGVzYyArPSAkIkhQIDoge0VxdWlwcGVkU3RhdC5TdGF0cy5oZWFsdGg6KzA7LSN9e3VuaXR9XG4iOwoKCQlyZXR1cm4gZGVzYzsKCX0KfQoKCi8vICNpZiBVTklUWV9FRElUT1IKLy8gW0N1c3RvbUVkaXRvcih0eXBlb2YoRXF1aXBtZW50SXRlbSkpXQovLyBwdWJsaWMgY2xhc3MgRXF1aXBtZW50SXRlbUVkaXRvciA6IEVkaXRvcgovLyB7Ci8vIAlFcXVpcG1lbnRJdGVtIG1fVGFyZ2V0OwoKLy8gCUl0ZW1FZGl0b3IgbV9JdGVtRWRpdG9yOwoKLy8gCUxpc3Q8c3RyaW5nPiBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZTsKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5OwoKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX1Nsb3RQcm9wZXJ0eTsKCi8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eTsKLy8gCVNlcmlhbGl6ZWRQcm9wZXJ0eSBtX01pbmltdW1BZ2lsaXR5UHJvcGVydHk7Ci8vIAlTZXJpYWxpemVkUHJvcGVydHkgbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5OwoKLy8gCXZvaWQgT25FbmFibGUoKQovLyAJewovLyAJCW1fVGFyZ2V0ID0gdGFyZ2V0IGFzIEVxdWlwbWVudEl0ZW07Ci8vIAkJbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLkVxdWlwcGVkRWZmZWN0cykpOwoKLy8gCQltX1Nsb3RQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLlNsb3QpKTsKCi8vIAkJbV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1TdHJlbmd0aCkpOwovLyAJCW1fTWluaW11bUFnaWxpdHlQcm9wZXJ0eSA9IHNlcmlhbGl6ZWRPYmplY3QuRmluZFByb3BlcnR5KG5hbWVvZihFcXVpcG1lbnRJdGVtLk1pbmltdW1BZ2lsaXR5KSk7Ci8vIAkJbV9NaW5pbXVtRGVmZW5zZVByb3BlcnR5ID0gc2VyaWFsaXplZE9iamVjdC5GaW5kUHJvcGVydHkobmFtZW9mKEVxdWlwbWVudEl0ZW0uTWluaW11bURlZmVuc2UpKTsKCi8vIAkJbV9JdGVtRWRpdG9yID0gbmV3IEl0ZW1FZGl0b3IoKTsKLy8gCQltX0l0ZW1FZGl0b3IuSW5pdChzZXJpYWxpemVkT2JqZWN0KTsKCi8vIAkJdmFyIGxvb2t1cCA9IHR5cGVvZihFZmZlY3REYXRhKTsKLy8gCQltX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZSA9IFN5c3RlbS5BcHBEb21haW4uQ3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkKLy8gCQkJLlNlbGVjdE1hbnkoYXNzZW1ibHkgPT4gYXNzZW1ibHkuR2V0VHlwZXMoKSkKLy8gCQkJLldoZXJlKHggPT4geC5Jc0NsYXNzICYmICF4LklzQWJzdHJhY3QgJiYgeC5Jc1N1YmNsYXNzT2YobG9va3VwKSkKLy8gCQkJLlNlbGVjdCh0eXBlID0+IHR5cGUuTmFtZSkKLy8gCQkJLlRvTGlzdCgpOwovLyAJfQoKLy8gCXB1YmxpYyBvdmVycmlkZSB2b2lkIE9uSW5zcGVjdG9yR1VJKCkKLy8gCXsKLy8gCQltX0l0ZW1FZGl0b3IuR1VJKCk7CgovLyAJCUVkaXRvckdVSUxheW91dC5Qcm9wZXJ0eUZpZWxkKG1fU2xvdFByb3BlcnR5KTsKCi8vIAkJRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtU3RyZW5ndGhQcm9wZXJ0eSk7Ci8vIAkJRWRpdG9yR1VJTGF5b3V0LlByb3BlcnR5RmllbGQobV9NaW5pbXVtQWdpbGl0eVByb3BlcnR5KTsKLy8gCQlFZGl0b3JHVUlMYXlvdXQuUHJvcGVydHlGaWVsZChtX01pbmltdW1EZWZlbnNlUHJvcGVydHkpOwoKLy8gCQlpbnQgY2hvaWNlID0gRWRpdG9yR1VJTGF5b3V0LlBvcHVwKCJBZGQgbmV3IEVmZmVjdCIsIC0xLCBtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZS5Ub0FycmF5KCkpOwoKLy8gCQlpZiAoY2hvaWNlICE9IC0xKQovLyAJCXsKLy8gCQkJdmFyIG5ld0luc3RhbmNlID0gU2NyaXB0YWJsZU9iamVjdC5DcmVhdGVJbnN0YW5jZShtX0F2YWlsYWJsZUVxdWlwRWZmZWN0VHlwZVtjaG9pY2VdKTsKCi8vIAkJCUFzc2V0RGF0YWJhc2UuQWRkT2JqZWN0VG9Bc3NldChuZXdJbnN0YW5jZSwgdGFyZ2V0KTsKCi8vIAkJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuSW5zZXJ0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSk7Ci8vIAkJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuR2V0QXJyYXlFbGVtZW50QXRJbmRleChtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LmFycmF5U2l6ZSAtIDEpLm9iamVjdFJlZmVyZW5jZVZhbHVlID0gbmV3SW5zdGFuY2U7Ci8vIAkJfQoKLy8gCQlFZGl0b3IgZWQgPSBudWxsOwovLyAJCWludCB0b0RlbGV0ZSA9IC0xOwovLyAJCWZvciAoaW50IGkgPSAwOyBpIDwgbV9FcXVpcHBlZEVmZmVjdExpc3RQcm9wZXJ0eS5hcnJheVNpemU7ICsraSkKLy8gCQl7Ci8vIAkJCUVkaXRvckdVSUxheW91dC5CZWdpbkhvcml6b250YWwoKTsKLy8gCQkJRWRpdG9yR1VJTGF5b3V0LkJlZ2luVmVydGljYWwoKTsKLy8gCQkJdmFyIGl0ZW0gPSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgoaSk7Ci8vIAkJCVNlcmlhbGl6ZWRPYmplY3Qgb2JqID0gbmV3IFNlcmlhbGl6ZWRPYmplY3QoaXRlbS5vYmplY3RSZWZlcmVuY2VWYWx1ZSk7CgovLyAJCQlFZGl0b3IuQ3JlYXRlQ2FjaGVkRWRpdG9yKGl0ZW0ub2JqZWN0UmVmZXJlbmNlVmFsdWUsIG51bGwsIHJlZiBlZCk7CgovLyAJCQllZC5Pbkluc3BlY3RvckdVSSgpOwovLyAJCQlFZGl0b3JHVUlMYXlvdXQuRW5kVmVydGljYWwoKTsKCi8vIAkJCWlmIChHVUlMYXlvdXQuQnV0dG9uKCItIiwgR1VJTGF5b3V0LldpZHRoKDMyKSkpCi8vIAkJCXsKLy8gCQkJCXRvRGVsZXRlID0gaTsKLy8gCQkJfQovLyAJCQlFZGl0b3JHVUlMYXlvdXQuRW5kSG9yaXpvbnRhbCgpOwovLyAJCX0KCi8vIAkJaWYgKHRvRGVsZXRlICE9IC0xKQovLyAJCXsKLy8gCQkJdmFyIGl0ZW0gPSBtX0VxdWlwcGVkRWZmZWN0TGlzdFByb3BlcnR5LkdldEFycmF5RWxlbWVudEF0SW5kZXgodG9EZWxldGUpLm9iamVjdFJlZmVyZW5jZVZhbHVlOwovLyAJCQlEZXN0cm95SW1tZWRpYXRlKGl0ZW0sIHRydWUpOwoKLy8gCQkJLy9uZWVkIHRvIGRvIGl0IHR3aWNlLCBmaXJzdCB0aW1lIGp1c3QgbnVsbGlmeSB0aGUgZW50cnksIHNlY29uZCBhY3R1YWxseSByZW1vdmUgaXQuCi8vIAkJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vIAkJCW1fRXF1aXBwZWRFZmZlY3RMaXN0UHJvcGVydHkuRGVsZXRlQXJyYXlFbGVtZW50QXRJbmRleCh0b0RlbGV0ZSk7Ci8vIAkJfQoKLy8gCQlzZXJpYWxpemVkT2JqZWN0LkFwcGx5TW9kaWZpZWRQcm9wZXJ0aWVzKCk7Ci8vIAl9Ci8vIH0KLy8gI2VuZGlm",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"contents": "using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing CreatorKitCode;\nusing CreatorKitCodeInternal;\npublic class Effect\n{\n\tpublic CharacterData Target => m_Target;\n\tpublic CharacterData Source => m_Source;\n\tpublic EffectData Data;\n\tCharacterData m_Target;\n\tCharacterData m_Source;\n\tint[] m_Damages = new int[System.Enum.GetValues(typeof(StatSystem.DamageType)).Length];\n\n\tpublic Effect(CharacterData target, CharacterData sourcer = null)\n\t{\n\t\tm_Target = target;\n\t\tm_Source = sourcer;\n\t}\n\n\tpublic void Take(CharacterData target)\n\t{\n\t\tint totalDamage = GetFullDamage();\n\t\ttarget.Stats.ChangeHealth(-totalDamage);\n\t\tif (target.HitClip.Length != 0)\n\t\t{\n\t\t\tSFXManager.PlaySound(SFXManager.Use.Player, new SFXManager.PlayData()\n\t\t\t{\n\t\t\t\tClip = target.HitClip[Random.Range(0, target.HitClip.Length)],\n\t\t\t\tPitchMax = 1.1f,\n\t\t\t\tPitchMin = 0.8f,\n\t\t\t\tPosition = target.transform.position\n\t\t\t});\n\t\t}\n\t\ttarget.OnEffectTake?.Invoke(this);\n\t\tDamageUI.Instance.NewDamage(totalDamage, target.transform.position);\n\t}\n\tpublic void Take() { Take(m_Target); }\n\n\tpublic int AddDamage(StatSystem.DamageType damageType, int amount)\n\t{\n\t\tint addedAmount = amount;\n\t\t//Physical damage are increase by 1% for each point of strength\n\t\tif (damageType == StatSystem.DamageType.Physical)\n\t\t{\n\t\t\t//source cna be null when it's elemental or effect damage\n\t\t\tif (m_Source != null)\n\t\t\t\taddedAmount += Mathf.FloorToInt(addedAmount * m_Source.Stats.stats.strength * 0.01f);\n\n\t\t\t//each poitn of defense remove 1 damage, with a minimum of 1 damage\n\t\t\tif (m_Target != null)\n\t\t\t\taddedAmount = Mathf.Max(addedAmount - m_Target.Stats.stats.defense, 1);\n\t\t}\n\n\t\t//we then add boost per damage type. Not this is called elementalBoost, but physical can also be boosted\n\t\tif (m_Source != null)\n\t\t\taddedAmount += addedAmount * Mathf.FloorToInt(m_Source.Stats.stats.damBoosts[(int)damageType] / 100.0f);\n\n\t\t//Then the elemental protection that is a percentage\n\t\taddedAmount -= addedAmount * Mathf.FloorToInt(m_Target.Stats.stats.damProtection[(int)damageType] / 100.0f);\n\n\t\tm_Damages[(int)damageType] += addedAmount;\n\n\t\treturn addedAmount;\n\t}\n\t/// <summary>\n\t/// Return the current amount of damage of the given type stored in that AttackData. This is the *effective*\n\t/// amount of damage, boost and defense have already been applied.\n\t/// </summary>\n\t/// <param name=\"damageType\">The type of damage</param>\n\t/// <returns>How much damage of that type is stored in that AttackData</returns>\n\tpublic int GetDamage(StatSystem.DamageType damageType)\n\t{\n\t\treturn m_Damages[(int)damageType];\n\t}\n\t/// <summary>\n\t/// Return the total amount of damage across all type stored in that AttackData. This is *effective* damage,\n\t/// that mean all boost/defense was already applied.\n\t/// </summary>\n\t/// <returns>The total amount of damage across all type in that Attack Data</returns>\n\tpublic int GetFullDamage()\n\t{\n\t\tint totalDamage = 0;\n\t\tfor (int i = 0; i < m_Damages.Length; ++i)\n\t\t{\n\t\t\ttotalDamage += m_Damages[i];\n\t\t}\n\t\treturn totalDamage;\n\t}\n}\n\n",
			"file": "Assets/Standard Assets/Scripts/Effect.cs",
			"file_size": 3111,
			"file_write_time": 133517731238169006,
			"settings":
			{
				"buffer_size": 3020,
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					2,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADwCwAAdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CnVzaW5nIENyZWF0b3JLaXRDb2RlOwp1c2luZyBDcmVhdG9yS2l0Q29kZUludGVybmFsOwpwdWJsaWMgY2xhc3MgRWZmZWN0CnsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIFRhcmdldCA9PiBtX1RhcmdldDsKCXB1YmxpYyBDaGFyYWN0ZXJEYXRhIFNvdXJjZSA9PiBtX1NvdXJjZTsKCXB1YmxpYyBFZmZlY3REYXRhIERhdGE7CglDaGFyYWN0ZXJEYXRhIG1fVGFyZ2V0OwoJQ2hhcmFjdGVyRGF0YSBtX1NvdXJjZTsKCWludFtdIG1fRGFtYWdlcyA9IG5ldyBpbnRbU3lzdGVtLkVudW0uR2V0VmFsdWVzKHR5cGVvZihTdGF0U3lzdGVtLkRhbWFnZVR5cGUpKS5MZW5ndGhdOwoKCXB1YmxpYyBFZmZlY3QoQ2hhcmFjdGVyRGF0YSB0YXJnZXQsIENoYXJhY3RlckRhdGEgc291cmNlciA9IG51bGwpCgl7CgkJbV9UYXJnZXQgPSB0YXJnZXQ7CgkJbV9Tb3VyY2UgPSBzb3VyY2VyOwoJfQoKCXB1YmxpYyB2b2lkIFRha2UoQ2hhcmFjdGVyRGF0YSB0YXJnZXQpCgl7CgkJaW50IHRvdGFsRGFtYWdlID0gR2V0RnVsbERhbWFnZSgpOwoJCXRhcmdldC5TdGF0cy5DaGFuZ2VIZWFsdGgoLXRvdGFsRGFtYWdlKTsKCQlpZiAodGFyZ2V0LkhpdENsaXAuTGVuZ3RoICE9IDApCgkJewoJCQlTRlhNYW5hZ2VyLlBsYXlTb3VuZChTRlhNYW5hZ2VyLlVzZS5QbGF5ZXIsIG5ldyBTRlhNYW5hZ2VyLlBsYXlEYXRhKCkKCQkJewoJCQkJQ2xpcCA9IHRhcmdldC5IaXRDbGlwW1JhbmRvbS5SYW5nZSgwLCB0YXJnZXQuSGl0Q2xpcC5MZW5ndGgpXSwKCQkJCVBpdGNoTWF4ID0gMS4xZiwKCQkJCVBpdGNoTWluID0gMC44ZiwKCQkJCVBvc2l0aW9uID0gdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbgoJCQl9KTsKCQl9CgkJdGFyZ2V0Lk9uRWZmZWN0VGFrZT8uSW52b2tlKHRoaXMpOwoJCURhbWFnZVVJLkluc3RhbmNlLk5ld0RhbWFnZSh0b3RhbERhbWFnZSwgdGFyZ2V0LnRyYW5zZm9ybS5wb3NpdGlvbik7Cgl9CglwdWJsaWMgdm9pZCBUYWtlKCkgeyBUYWtlKG1fVGFyZ2V0KTsgfQoKCXB1YmxpYyBpbnQgQWRkRGFtYWdlKGludCBhbW91bnQpCgl7CgkJaW50IGFkZGVkQW1vdW50ID0gYW1vdW50OwoJCVN0YXRTeXN0ZW0uRGFtYWdlVHlwZSBkYW1hZ2VUeXBlID0gRGF0YS5kYW1hZ2VUeXBlOwoKCQkvL1BoeXNpY2FsIGRhbWFnZSBhcmUgaW5jcmVhc2UgYnkgMSUgZm9yIGVhY2ggcG9pbnQgb2Ygc3RyZW5ndGgKCQlpZiAoZGFtYWdlVHlwZSA9PSBTdGF0U3lzdGVtLkRhbWFnZVR5cGUuUGh5c2ljYWwpCgkJewoJCQkvL3NvdXJjZSBjbmEgYmUgbnVsbCB3aGVuIGl0J3MgZWxlbWVudGFsIG9yIGVmZmVjdCBkYW1hZ2UKCQkJaWYgKG1fU291cmNlICE9IG51bGwpCgkJCQlhZGRlZEFtb3VudCArPSBNYXRoZi5GbG9vclRvSW50KGFkZGVkQW1vdW50ICogbV9Tb3VyY2UuU3RhdHMuc3RhdHMuc3RyZW5ndGggKiAwLjAxZik7CgoJCQkvL2VhY2ggcG9pdG4gb2YgZGVmZW5zZSByZW1vdmUgMSBkYW1hZ2UsIHdpdGggYSBtaW5pbXVtIG9mIDEgZGFtYWdlCgkJCWlmIChtX1RhcmdldCAhPSBudWxsKQoJCQkJYWRkZWRBbW91bnQgPSBNYXRoZi5NYXgoYWRkZWRBbW91bnQgLSBtX1RhcmdldC5TdGF0cy5zdGF0cy5kZWZlbnNlLCAxKTsKCQl9CgoJCS8vd2UgdGhlbiBhZGQgYm9vc3QgcGVyIGRhbWFnZSB0eXBlLiBOb3QgdGhpcyBpcyBjYWxsZWQgZWxlbWVudGFsQm9vc3QsIGJ1dCBwaHlzaWNhbCBjYW4gYWxzbyBiZSBib29zdGVkCgkJaWYgKG1fU291cmNlICE9IG51bGwpCgkJCWFkZGVkQW1vdW50ICs9IGFkZGVkQW1vdW50ICogTWF0aGYuRmxvb3JUb0ludChtX1NvdXJjZS5TdGF0cy5zdGF0cy5kYW1Cb29zdHNbKGludClkYW1hZ2VUeXBlXSAvIDEwMC4wZik7CgoJCS8vVGhlbiB0aGUgZWxlbWVudGFsIHByb3RlY3Rpb24gdGhhdCBpcyBhIHBlcmNlbnRhZ2UKCQlhZGRlZEFtb3VudCAtPSBhZGRlZEFtb3VudCAqIE1hdGhmLkZsb29yVG9JbnQobV9UYXJnZXQuU3RhdHMuc3RhdHMuZGFtUHJvdGVjdGlvblsoaW50KWRhbWFnZVR5cGVdIC8gMTAwLjBmKTsKCgkJbV9EYW1hZ2VzWyhpbnQpZGFtYWdlVHlwZV0gKz0gYWRkZWRBbW91bnQ7CgoJCXJldHVybiBhZGRlZEFtb3VudDsKCX0KCS8vLyA8c3VtbWFyeT4KCS8vLyBSZXR1cm4gdGhlIGN1cnJlbnQgYW1vdW50IG9mIGRhbWFnZSBvZiB0aGUgZ2l2ZW4gdHlwZSBzdG9yZWQgaW4gdGhhdCBBdHRhY2tEYXRhLiBUaGlzIGlzIHRoZSAqZWZmZWN0aXZlKgoJLy8vIGFtb3VudCBvZiBkYW1hZ2UsIGJvb3N0IGFuZCBkZWZlbnNlIGhhdmUgYWxyZWFkeSBiZWVuIGFwcGxpZWQuCgkvLy8gPC9zdW1tYXJ5PgoJLy8vIDxwYXJhbSBuYW1lPSJkYW1hZ2VUeXBlIj5UaGUgdHlwZSBvZiBkYW1hZ2U8L3BhcmFtPgoJLy8vIDxyZXR1cm5zPkhvdyBtdWNoIGRhbWFnZSBvZiB0aGF0IHR5cGUgaXMgc3RvcmVkIGluIHRoYXQgQXR0YWNrRGF0YTwvcmV0dXJucz4KCXB1YmxpYyBpbnQgR2V0RGFtYWdlKFN0YXRTeXN0ZW0uRGFtYWdlVHlwZSBkYW1hZ2VUeXBlKQoJewoJCXJldHVybiBtX0RhbWFnZXNbKGludClkYW1hZ2VUeXBlXTsKCX0KCS8vLyA8c3VtbWFyeT4KCS8vLyBSZXR1cm4gdGhlIHRvdGFsIGFtb3VudCBvZiBkYW1hZ2UgYWNyb3NzIGFsbCB0eXBlIHN0b3JlZCBpbiB0aGF0IEF0dGFja0RhdGEuIFRoaXMgaXMgKmVmZmVjdGl2ZSogZGFtYWdlLAoJLy8vIHRoYXQgbWVhbiBhbGwgYm9vc3QvZGVmZW5zZSB3YXMgYWxyZWFkeSBhcHBsaWVkLgoJLy8vIDwvc3VtbWFyeT4KCS8vLyA8cmV0dXJucz5UaGUgdG90YWwgYW1vdW50IG9mIGRhbWFnZSBhY3Jvc3MgYWxsIHR5cGUgaW4gdGhhdCBBdHRhY2sgRGF0YTwvcmV0dXJucz4KCXB1YmxpYyBpbnQgR2V0RnVsbERhbWFnZSgpCgl7CgkJaW50IHRvdGFsRGFtYWdlID0gRGF0YS5kYW1hZ2VNb3VudDsKCQlmb3IgKGludCBpID0gMDsgaSA8IG1fRGFtYWdlcy5MZW5ndGg7ICsraSkKCQl7CgkJCXRvdGFsRGFtYWdlICs9IG1fRGFtYWdlc1tpXTsKCQl9CgkJcmV0dXJuIHRvdGFsRGFtYWdlOwoJfQp9CgoAAAAAAAAAANsLAAAAAAAAAAAAAA",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAFkLAAAAAAAAWQsAAAAAAAAAAAAAAADwvw"
				],
				[
					17,
					1,
					"insert",
					{
						"characters": "0"
					},
					"AgAAAFgLAAAAAAAAWQsAAAAAAAAAAAAAWQsAAAAAAABZCwAAAAAAABAAAABEYXRhLmRhbWFnZU1vdW50",
					"DwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAGgLAAAAAAAAWAsAAAAAAAAAAAAAAADwvw"
				]
			]
		}
	],
	"build_system": "",
	"build_system_choices":
	[
		[
			[
				[
					"Packages/C++/C Single File.sublime-build",
					""
				],
				[
					"Packages/C++/C Single File.sublime-build",
					"Run"
				]
			],
			[
				"Packages/C++/C Single File.sublime-build",
				"Run"
			]
		],
		[
			[
				[
					"Packages/C++/C++ Single File.sublime-build",
					""
				],
				[
					"Packages/C++/C++ Single File.sublime-build",
					"Run"
				]
			],
			[
				"Packages/C++/C++ Single File.sublime-build",
				"Run"
			]
		],
		[
			[
				[
					"Packages/Java/Ant.sublime-build",
					""
				],
				[
					"Packages/Java/JavaC.sublime-build",
					""
				],
				[
					"Packages/User/Java.sublime-build",
					""
				]
			],
			[
				"Packages/User/Java.sublime-build",
				""
			]
		],
		[
			[
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				]
			],
			[
				"Packages/Python/Python.sublime-build",
				""
			]
		],
		[
			[
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				],
				[
					"Packages/User/myPyhon.sublime-build",
					""
				]
			],
			[
				"Packages/User/myPyhon.sublime-build",
				""
			]
		],
		[
			[
				[
					"Packages/User/Csharp.sublime-build",
					""
				],
				[
					"Packages/User/Csharp.sublime-build",
					"Build & Run"
				],
				[
					"Packages/User/Csharp.sublime-build",
					"Run"
				],
				[
					"Packages/User/Csharp.sublime-build",
					"Build (Form)"
				],
				[
					"Packages/User/Csharp.sublime-build",
					"Build & Run (Form)"
				],
				[
					"Packages/User/Csharp.sublime-build",
					"Run (Form)"
				]
			],
			[
				"Packages/User/Csharp.sublime-build",
				"Build & Run"
			]
		]
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"insta",
				"Package Control: Install Package"
			],
			[
				"remove",
				"Package Control: Remove Package"
			],
			[
				"install",
				"Package Control: Install Package"
			],
			[
				"remov",
				"Package Control: Remove Package"
			],
			[
				"task",
				"Tasks: New"
			],
			[
				"convent",
				"ConvertToUTF8: Reload with Encoding"
			],
			[
				"instal",
				"Package Control: Install Package"
			],
			[
				"list pa",
				"Package Control: List Packages"
			],
			[
				"package",
				"Package Control: Add Channel"
			],
			[
				"wolfram",
				"Wolfram Language: Download Wolfram Engine"
			],
			[
				"w",
				"Wolfram Language: Settings"
			],
			[
				"co",
				"ConvertToUTF8: Reload with Encoding"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 136.0,
		"history":
		[
			"view.run_command('hello')",
			"view.run_command('example')",
			"view.run_command('hello_sublime')"
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/C/Pju3d.desert/Assets",
		"/C/Pju3d.desert/Assets/Standard Assets",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode"
	],
	"file_history":
	[
		"/C/Pju3d.desert/Library/PackageCache/com.domybest.mybox@f3b54077f2/README.md",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/AddHealthEffect.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/RoleControl.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/InteractHandle.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/EffectSkill.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/DamageEffect.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/AddHealthUsageEffect.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/ApplyBurnWeaponEffect.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/IncreaseStrengthEffect.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/StatChangeEquipEffect.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/VampiricWeaponEffect.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Items/EquipmentItem.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/CharacterSystem/StatSystem.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/CharacterSystem/BaseElementalEffect.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Characters/TrainingDummy.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/DemageEffect.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/CharacterSystem/CharacterData.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Items/Weapon.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Items/UsableItem.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/GameManager.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/Effect.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/EffectData.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/UIMainWindow.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/UIRoleHud.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Characters/Player/CharacterControl.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/SkillUser.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/UIDigButton.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/Skill.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/SkillManager.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/AnimationDispatcher.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Characters/NpcControl.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/EventSender.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/Shooter.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/UI/ItemTooltip.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/UIInventoryWindow.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/UIConfirmWindow.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/UIInventorySlot.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/CharacterSystem/InventorySystem.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/IEquipable.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Characters/Player/AttackState.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/CreatorKitCode/Utility/SceneLinkSMB.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/UIEventSender.cs",
		"/C/Pju3d.desert/Library/PackageCache/com.unity.ugui@1.0.0/Runtime/UI/Core/Button.cs",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/Building.cs",
		"/C/Pju3d.desert/Pju3d.desert.sublime-project",
		"/C/Pju3d.desert/desert.sublime-project",
		"/C/Pju3d.desert/todoList.tasks",
		"/C/Pju3d.desert/Assets/Standard Assets/Scripts/RoleAI.cs",
		"/C/Pju3d.desert/Assets/WaterWorks/Shaders/Water_Volume.hlsl",
		"/C/Pju3d.desert/todoList.task",
		"/D/Godot/ddb/obj/role/role.gd",
		"/D/Program Files/sublime/Data/Packages/User/study_sublime_develop.py",
		"/D/MyCode/hello_godot.gd",
		"/D/Godot/ddb/obj/combat/bullet.gd",
		"/C/ssr-config/trunk/config/csv/CityFurnitureTypes.csv",
		"/D/Godot/ddb/default_env.tres",
		"/D/Work/SSR/inktasks.todo",
		"/D/Program Files/sublime/Data/Packages/User/Default (Windows).sublime-keymap",
		"/D/Program Files/sublime/Data/Packages/User/Side Bar.sublime-settings",
		"/D/Program Files/sublime/Data/Packages/User/GDScript.sublime-build",
		"/D/Program Files/sublime/Data/Packages/ConvertToUTF8/ConvertToUTF8.py",
		"/D/WinRun/godot.cmd",
		"/C/ssr-config/trunk/config/csv/SeNpc.csv",
		"/D/MyCode/Hello.cs",
		"/C/ssr-config/trunk/config/csv/ArtResource.csv",
		"/C/ssr-config/trunk/config/csv/ExpTemplate.csv",
		"/C/ssr-config/trunk/config/csv/AttrTemplate.csv",
		"/C/ssr-config/trunk/config/csv/HeroClientRes.csv",
		"/C/ssr-config/trunk/config/csv/HeroStrengthen.csv",
		"/D/Work/SSR/basePlan/_data/payPerDay.txt",
		"/C/ssr-config/trunk/config/enum/all_enums.csv",
		"/C/ssr-config/trunk/config/csv/Heroes.csv",
		"/C/ssr-config/trunk/config/csv/HeroNpc.csv",
		"/C/ssr-config/trunk/config/csv/CityElementNpc.csv",
		"/C/ssr-config/trunk/config/csv/Task.csv",
		"/C/ssr-config/trunk/config/csv/UserDefault.csv",
		"/C/ssr-config/trunk/config/csv/NpcService.csv",
		"/C/ssr-config/trunk/config/csv/Item.csv",
		"/C/ssr-config/trunk/config/csv/BuildingTypes.csv",
		"/C/ssr-config/trunk/config/csv/CityConfig.csv",
		"/C/ssr-config/trunk/config/csv/AttrGroup-hero.csv",
		"/C/ssr-config/trunk/config/csv/HeroBreakThrough.csv",
		"/C/ssr-client/README.md",
		"/D/Godot/Godot_v3.5.1-stable_win64_console.cmd",
		"/C/Users/Administrator/Desktop/SeNpc.csv",
		"/C/ssr-config/trunk/config/csv/LevelTemplateEvent.csv",
		"/C/ssr-config/trunk/config/csv/KmonsterType.csv",
		"/C/ssr-config/trunk/config/csv/KmonsterData.csv",
		"/C/ssr-config/trunk/config/csv/IncidentRandLib.csv",
		"/C/ssr-config/trunk/config/csv/IncidentCreature.csv",
		"/C/ssr-config/trunk/config/csv/DamageTypeCounter.csv",
		"/C/ssr-config/trunk/config/csv/ArtResourceUI.csv",
		"/C/ssr-config/trunk/config/csv/AttrType.csv",
		"/C/ssr-config/trunk/config/csv/ItemGroup-hero.csv",
		"/C/Users/Administrator/Desktop/伤害公式补充说明.md",
		"/E/BaiduNetdiskDownload/MMA12.1解压密码.txt",
		"/C/ssr-config/trunk/config/csv/DamageFactorTemplate.csv",
		"/C/ssr-config/trunk/config/csv/HeroTypo.csv",
		"/C/ssr-config/trunk/config/csv/AudioConfig.csv",
		"/C/ssr-config/trunk/config/csv/MapDistrictRoute.csv",
		"/C/ssr-config/trunk/config/csv/KingdomMapVersion.csv",
		"/C/ssr-config/trunk/config/csv/AttrDisplay.csv",
		"/C/ssr-config/trunk/config/csv/AiTemplateEnum.csv",
		"/C/ssr-config/trunk/config/csv/RuralSlot.csv",
		"/C/ssr-config/trunk/config/csv/TroopFormation.csv",
		"/C/ssr-config/trunk/config/csv/Item-ItemHero.csv",
		"/C/Users/Administrator/.ssh/ink_id_rsa",
		"/C/Users/Administrator/.ssh/ink_id_rsa.pub",
		"/C/ssr-config/trunk/config/csv/HeroEquip.csv",
		"/C/ssr-config/trunk/config/csv/RandomAttr.csv",
		"/C/ssr-config/trunk/config/csv/MapInstance.csv",
		"/C/ssr-config/trunk/config/csv/Incident.csv",
		"/C/ssr-config/trunk/config/csv/RandomBox.csv",
		"/C/ssr-config/trunk/config/csv/ItemGroup.csv",
		"/C/ssr-config/trunk/config/csv/HeroEquipStrengthen.csv",
		"/C/Users/Administrator/Desktop/LoadableList.lua",
		"/C/Users/Administrator/Desktop/LoadableSpriteList.lua",
		"/C/ssr-config/trunk/config/csv/ConstMain.csv",
		"/D/MyGame/reaper/client/Assets/ExportAssets/Excel/excel_bufftable.json",
		"/C/ssr-config/trunk/config/csv/Suit.csv",
		"/C/ssr-config/trunk/config/csv/SoldierClient.csv",
		"/D/SSR/_data/lvTimeInfo.txt",
		"/D/Program Files/Disciples Sacred Lands/Exe/Disciple.exe.crash.txt",
		"/D/MyGame/reaper/client/Assets/ExportAssets/Excel/excel_itemtable.json",
		"/C/Users/Administrator/.ssh/id_rsa.pub",
		"/D/MyGame/reaper/templateconfig/DesignerConfigsTemplate/Defines/__root__.xml",
		"/D/MyGame/reaper/templateconfig/Tools/FontPrune/3500.txt",
		"/C/Users/Administrator/.ssh/id_rsa"
	],
	"find":
	{
		"height": 28.0
	},
	"find_in_files":
	{
		"height": 113.0,
		"where_history":
		[
			""
		]
	},
	"find_state":
	{
		"case_sensitive": false,
		"find_history":
		[
			"OnTargetStay",
			"m_AvailableEquipEffectType",
			"OnDamage",
			"m_WeaponAttackEffectListProperty",
			"m_effectData",
			"HitClip",
			"AudioClip",
			"m_Owner",
			"UseSkill",
			"m_CurEntry",
			"m_role",
			"SkillManager",
			"m_Owner",
			"ChangeHealth",
			"ItemCount",
			"btUse",
			"WeaponAttackEffect",
			"EquippedEffect",
			"WeaponAttackEffect",
			"Modifier",
			"Modifier.",
			"Modifier",
			"DamageUI",
			"Array",
			"elementalBoosts",
			"elementalProtection",
			"tgDigTool",
			"AttackState"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": true,
		"replace_history":
		[
			"m_UseEntry",
			"SkillUser",
			"damBoosts",
			"damProtection"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1225,
						"regions":
						{
						},
						"selection":
						[
							[
								1225,
								1225
							]
						],
						"settings":
						{
							"auto_complete": false,
							"auto_indent": false,
							"default_dir": "C:\\Pju3d.desert",
							"gutter": false,
							"is_init_dirty_state": false,
							"lsp_uri": "buffer:96",
							"rainbow_checked": true,
							"syntax": "Packages/Text/Plain text.tmLanguage",
							"tab_size": 2,
							"tab_width": 2,
							"translate_tabs_to_spaces": true,
							"word_wrap": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "todoList.tasks",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3930,
						"regions":
						{
						},
						"selection":
						[
							[
								3199,
								3199
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": "<",
									"selector": "text.html, text.xml"
								},
								{
									"rhs_empty": true,
									"selector": "punctuation.accessor"
								}
							],
							"is_init_dirty_state": true,
							"lsp_uri": "file:///C:/Pju3d.desert/todoList.tasks",
							"origin_encoding": "UTF-8",
							"plain_tasks_remain_time_phantoms":
							[
							],
							"rainbow_checked": true,
							"syntax": "Packages/PlainTasks/PlainTasks.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1140.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "Assets/Standard Assets/Scripts/BuildingAI.cs",
					"semi_transient": true,
					"settings":
					{
						"buffer_size": 311,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/BuildingAI.cs",
							"origin_encoding": "ASCII",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/ApplyBurnWeaponEffect.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 103,
						"regions":
						{
						},
						"selection":
						[
							[
								102,
								102
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": true,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/CreatorKitCode/Items/Effects/ApplyBurnWeaponEffect.cs",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 20,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "Assets/Standard Assets/Scripts/EffectData.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 8282,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/EffectData.cs",
							"origin_encoding": "ASCII",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "Assets/Standard Assets/Scripts/ItemDemander.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4813,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/ItemDemander.cs",
							"origin_encoding": "ASCII",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "Assets/Standard Assets/Scripts/InteractOnTrigger.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3619,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"in_converting": true,
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/InteractOnTrigger.cs",
							"origin_content": "using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.Events;\n\n[RequireComponent(typeof(Collider))]\npublic class InteractOnTrigger : MonoBehaviour\n{\n\tpublic LayerMask layers;\n\tpublic float Radius\n\t{\n\t\tget\n\t\t{\n\t\t\tif (m_capCollider) return m_capCollider.radius;\n\t\t\telse return m_boxCollier.size.y;\n\t\t}\n\t\tset\n\t\t{\n\t\t\tif (m_capCollider) m_capCollider.radius = value;\n\t\t\telse m_boxCollier.size = new Vector3(value, value, value);\n\t\t}\n\t}\n\tpublic UnityEvent<GameObject> OnEnter, OnExit;\n\tpublic UnityEvent<GameObject, float> OnStay;\n\tpublic UnityEvent<GameObject, string> OnEvent;\n\n\tpublic List<GameObject> Inners { get { return interObjects; } }\n\tpublic GameObject lastInner { get; private set; }\n\tpublic GameObject lastExiter { get; private set; }\n\tpublic GameObject curStayer { get; private set; }\n\tpublic bool once;\n\n\tList<GameObject> interObjects;\n\tCapsuleCollider m_capCollider;\n\tBoxCollider m_boxCollier;\n\tfloat m_stayDuring;\n\n\tvoid Start()\n\t{\n\t\tm_capCollider = GetComponent<CapsuleCollider>();\n\t\tm_boxCollier = GetComponent<BoxCollider>();\n\t\tif (m_capCollider) m_capCollider.isTrigger = true;\n\t\tif (m_boxCollier) m_boxCollier.isTrigger = true;\n\t\tinterObjects = new List<GameObject>();\n\t}\n\n\tvoid OnTriggerEnter(Collider other)\n\t{\n\t\tif (other.gameObject == gameObject) return;\n\n\t\tif (0 != (layers.value & 1 << other.gameObject.layer))\n\t\t{\n\t\t\tExecuteOnEnter(other.gameObject);\n\t\t}\n\t}\n\n\tprotected virtual void ExecuteOnEnter(GameObject enter)\n\t{\n\t\tOnEnter?.Invoke(enter);\n\t\tlastInner = enter;\n\t\tif (!interObjects.Contains(lastInner))\n\t\t{\n\t\t\tinterObjects.Add(lastInner);\n\t\t\tvar character = enter.GetComponent<Character>();\n\t\t\tif (character) character.DeathEvent.AddListener((c) => { RemoveTarget(c.gameObject); });\n\t\t\tlastInner.GetComponent<EventSender>()?.events.AddListener(OnInterEvent);\n\t\t}\n\t\tif (once) GetComponent<Collider>().enabled = false;\n\t}\n\n\tvoid OnTriggerExit(Collider other)\n\t{\n\t\tif (interObjects.Contains(other.gameObject))\n\t\t{\n\t\t\tlastExiter = other.gameObject;\n\t\t\tExecuteOnExit(lastExiter);\n\t\t}\n\t}\n\n\tprotected virtual void ExecuteOnExit(GameObject exiter)\n\t{\n\t\tOnExit?.Invoke(exiter);\n\t\tinterObjects.Remove(exiter);\n\t\tif (exiter == lastInner)\n\t\t{\n\t\t\tlastInner = interObjects.Count > 0 ? interObjects[interObjects.Count - 1] : null;\n\t\t}\n\t\tif (exiter == curStayer)\n\t\t{\n\t\t\tcurStayer = null;\n\t\t\tm_stayDuring = 0;\n\t\t}\n\t\texiter.GetComponent<EventSender>()?.events.RemoveListener(OnInterEvent);\n\t}\n\n\tvoid OnTriggerStay(Collider other)\n\t{\n\t\tif (other.gameObject == gameObject || 0 == (layers.value & 1 << other.gameObject.layer)) return;\n\n\t\tif (!interObjects.Contains(other.gameObject))\n\t\t{\n\t\t\tOnTriggerEnter(other);\n\t\t\treturn;\n\t\t}\n\t\tif (other.gameObject == curStayer)\n\t\t{\n\t\t\tm_stayDuring += Time.deltaTime;\n\t\t\tOnStay?.Invoke(curStayer, m_stayDuring);\n\t\t}\n\t\telse if (curStayer == null) curStayer = other.gameObject;\n\t}\n\n\tpublic GameObject GetNearest()\n\t{\n\t\tif (interObjects.Count == 0) return null;\n\n\t\tGameObject nearest = interObjects[0];\n\t\tif (nearest == null) return null;\n\t\tfloat nearestDistance = Vector3.Distance(transform.position, nearest.transform.position);\n\n\t\tfor (int i = 1; i < interObjects.Count; i++)\n\t\t{\n\t\t\tfloat distance = Vector3.Distance(transform.position, interObjects[i].transform.position);\n\n\t\t\tif (distance < nearestDistance)\n\t\t\t{\n\t\t\t\tnearest = interObjects[i];\n\t\t\t\tnearestDistance = distance;\n\t\t\t}\n\t\t}\n\t\treturn nearest;\n\t}\n\n\tvoid OnInterEvent(GameObject sender, string eventMessage)\n\t{\n\t\tOnEvent?.Invoke(sender, eventMessage);\n\t}\n\n\tpublic void RemoveTarget(GameObject obj)\n\t{\n\t\tif (interObjects.Contains(obj))\n\t\t{\n\t\t\tExecuteOnExit(obj);\n\t\t}\n\n\t}\n}\n\n",
							"origin_encoding": "UTF-8-SIG",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 7,
					"file": "Assets/Standard Assets/Scripts/CreatorKitCode/CharacterSystem/CharacterData.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7202,
						"regions":
						{
						},
						"selection":
						[
							[
								972,
								972
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"in_converting": true,
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/CreatorKitCode/CharacterSystem/CharacterData.cs",
							"origin_content": "using System;\nusing System.Collections;\nusing System.Collections.Generic;\nusing System.Linq;\nusing CreatorKitCode;\nusing UnityEngine;\nusing UnityEngine.Events;\nusing Random = UnityEngine.Random;\n\n/// <summary>\n/// This defines a character in the game. The name Character is used in a loose sense, it just means something that\n/// can be attacked and have some stats including health. It could also be an inanimate object like a breakable box.\n/// </summary>\npublic class CharacterData : HighlightableObject, IInteractable\n{\n\tpublic enum Camp\n\t{\n\t\tPLAYER,\n\t\tALLY,\n\t\tENEMY,\n\t\tNEUTRAL,\n\t\tBUILDING,\n\t\tENEMYBUILDING\n\t}\n\tpublic Camp camp;\n\tpublic string CharacterName;\n\tpublic Weapon DefaultWeapon;\n\tpublic Transform WeaponLocator;\n\tpublic float MoveSpeed = 3.0f;\n\tpublic int CorpseChance;\n\t[SerializeField] float m_CorpseRetention;\n\tpublic StatSystem Stats;\n\tpublic InventorySystem Inventory = new InventorySystem();\n\tpublic EquipmentSystem Equipment = new EquipmentSystem();\n\tpublic UnityEvent<Damage> DamageEvent;\n\tpublic UnityEvent<CharacterData> DeathEvent;\n\tpublic UnityEvent<CharacterData> AttackEvent;\n\tpublic Action<CharacterData> KillEnemyAction { get; set; }\n\tpublic Action<Skill, string> SkillAction { get; set; }\n\tpublic Action<AIBase.State> StateUpdateAction { get; set; }\n\tpublic Action<AIBase.State> StateStartAction { get; set; }\n\tpublic Action<EffectData> EffectAction { get; set; }\n\tVector3 m_BirthPos;\n\tpublic Vector3 BirthPos => m_BirthPos;\n\tCharacterData m_Enemy;\n\tpublic CharacterData CurrentEnemy { get { return m_Enemy; } }\n\tpublic SkillUser SkillUser => GetComponent<SkillUser>();\n\tpublic AIBase BaseAI => GetComponent<AIBase>();\n\tpublic IInteractable CurrentInteractor { get { return m_interactor; } set { m_interactor = value; } }\n\tprotected IInteractable m_interactor;\n\tpublic InteractData Data { get { return null; } }\n\tfloat m_AttackCoolDown;\n\n\tvoid Awake()\n\t{\n\t\tInitHighlight();\n\t\tStats.Init(this);\n\t\tInventory.Init(this);\n\t\tEquipment.Init(this);\n\t\tm_BirthPos = transform.position;\n\n\t\tswitch (camp)\n\t\t{\n\t\t\tcase CharacterData.Camp.PLAYER:\n\t\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Player\");\n\t\t\t\tbreak;\n\t\t\tcase CharacterData.Camp.ENEMY:\n\t\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Enemy\");\n\t\t\t\tbreak;\n\t\t\tcase CharacterData.Camp.ALLY:\n\t\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Ally\");\n\t\t\t\tbreak;\n\t\t\tcase CharacterData.Camp.NEUTRAL:\n\t\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Neutral\");\n\t\t\t\tbreak;\n\t\t\tcase CharacterData.Camp.BUILDING:\n\t\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Building\");\n\t\t\t\tbreak;\n\t\t\tcase CharacterData.Camp.ENEMYBUILDING:\n\t\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Enemy\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tEquipment.OnEquiped += item =>\n\t\t{\n\t\t\tif (item.Slot == EquipmentItem.EquipmentSlot.Weapon)\n\t\t\t{\n\t\t\t\tWeapon wp = item as Weapon;\n\t\t\t\tBaseAI.EnemyDetector.Radius = System.Math.Max(wp.Stats.MaxRange, BaseAI.EnemyDetector.Radius);\n\t\t\t\twp.bulletTrans = WeaponLocator;\n\t\t\t\tif (WeaponLocator && item.WorldObjectPrefab)\n\t\t\t\t\tInstantiate(item.WorldObjectPrefab, WeaponLocator, false);\n\t\t\t\t//Helpers.RecursiveLayerChange(obj.transform, LayerMask.NameToLayer(\"PlayerEquipment\"));\n\t\t\t}\n\t\t};\n\n\t\tEquipment.OnUnequip += item =>\n\t\t{\n\t\t\tif (item.Slot == EquipmentItem.EquipmentSlot.Weapon)\n\t\t\t{\n\t\t\t\tforeach (Transform t in WeaponLocator)\n\t\t\t\t\tDestroy(t.gameObject);\n\t\t\t}\n\t\t};\n\t}\n\n\tvoid Start()\n\t{\n\t\tif (DefaultWeapon == null)\n\t\t\tDefaultWeapon = KeyValueData.GetValue<Item>(GameManager.Config.Item, \"wp_unarmed\") as Weapon;\n\t\tEquipment.InitWeapon(DefaultWeapon);\n\t}\n\tvoid Update()\n\t{\n\t\tStats.Tick();\n\n\t\tif (m_AttackCoolDown > 0.0f)\n\t\t\tm_AttackCoolDown -= Time.deltaTime;\n\n\t\tif (m_interactor != null && !m_interactor.CanInteract(this)) m_interactor = null;\n\t}\n\n\tpublic void SetEnemy(CharacterData enemy)\n\t{\n\t\tif (enemy != m_Enemy) m_Enemy = enemy;\n\t}\n\n\tpublic bool CanAttackReach(CharacterData target)\n\t{\n\t\tif (target == null) return false;\n\t\treturn Equipment.Weapon.CanHit(this, target);\n\t}\n\tpublic bool CanAttackReach() { return CanAttackReach(m_Enemy); }\n\tpublic bool CanAttackTarget(CharacterData target)\n\t{\n\t\tif (target == null) return false;\n\t\tif (target.Stats.CurrentHealth == 0)\n\t\t\treturn false;\n\n\t\tif (!CanAttackReach(target))\n\t\t\treturn false;\n\n\t\tif (m_AttackCoolDown > 0.0f)\n\t\t\treturn false;\n\n\t\treturn true;\n\t}\n\tpublic bool CanAttackTarget() { return CanAttackTarget(m_Enemy); }\n\tpublic void CheckAttack()\n\t{\n\t\tif (CanAttackTarget())\n\t\t{\n\t\t\tBaseAI.Stop();\n\t\t\tBaseAI.LookAt(CurrentEnemy.transform);\n\t\t\tAttackTriggered();\n\t\t\tAttackEvent?.Invoke(this);\n\t\t}\n\t}\n\tpublic void AttackFrame()\n\t{\n\t\t//if we can't reach the target anymore when it's time to damage, then that attack miss.\n\t\tif (CurrentEnemy && CanAttackReach(CurrentEnemy))\n\t\t{\n\t\t\tAttack(CurrentEnemy);\n\t\t}\n\t\telse if (CurrentEnemy) Helpers.Log(this, \"AttackMiss: \", $\"{CharacterName}->{CurrentEnemy.CharacterName}\");\n\t\telse Helpers.Log(this, \"AttackMiss: \", $\"{CharacterName}->(Enemy Missed)\");\n\t}\n\tpublic void Attack(CharacterData target)\n\t{\n\t\tif (Equipment.Weapon)\n\t\t{\n\t\t\tEquipment.Weapon.Attack(this, target);\n\t\t\tif (Equipment.Weapon.Stats.AdditionalTargets > 0)\n\t\t\t{\n\t\t\t\tList<GameObject> targets = BaseAI.EnemyDetector.Inners;\n\t\t\t\tint addNum = 0;\n\t\t\t\tforeach (GameObject t in targets)\n\t\t\t\t{\n\t\t\t\t\tif (t != target.gameObject && addNum < Equipment.Weapon.Stats.AdditionalTargets)\n\t\t\t\t\t{\n\t\t\t\t\t\tEquipment.Weapon.Attack(this, t.GetComponent<CharacterData>());\n\t\t\t\t\t\taddNum++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse Debug.LogError(\"Character missing weapon : \" + gameObject);\n\t}\n\tpublic void AttackTriggered()\n\t{\n\t\t//Agility reduce by 0.5% the cooldown to attack (e.g. if agility = 50, 25% faster to attack)\n\t\tm_AttackCoolDown = Math.Max(0.1f, Equipment.Weapon.Stats.Speed - (Stats.stats.agility * 0.5f * 0.001f * Equipment.Weapon.Stats.Speed));\n\t}\n\n\tpublic void Dead()\n\t{\n\t\tDeathEvent?.Invoke(this);\n\t\tbool corpse = (Random.Range(1, 101) <= CorpseChance);\n\t\tif (corpse)\n\t\t{\n\t\t\tgameObject.layer = LayerMask.NameToLayer(\"Interactable\");\n\t\t\tStartCoroutine(DestroyCorpse(m_CorpseRetention));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgameObject.layer = (camp == Camp.PLAYER) ? LayerMask.NameToLayer(\"PlayerCorpse\") : LayerMask.NameToLayer(\"Corpse\");\n\t\t\tStartCoroutine(DestroyCorpse(1.0f));\n\t\t}\n\t}\n\tIEnumerator DestroyCorpse(float time)\n\t{\n\t\tyield return new WaitForSeconds(time);\n\t\tVFXManager.PlayVFX(VFXType.Death, transform.position);\n\t\tDestroy(gameObject);\n\t}\n\n\tpublic bool HoldTools(ResItem item)\n\t{\n\t\tif (item.toolType == Weapon.WeaponType.None) return true;\n\t\tif (Equipment.Weapon && item.toolType == Equipment.Weapon.weaponType) return true;\n\t\tif (Equipment.ViceWeapon && item.toolType == Equipment.ViceWeapon.weaponType) { Equipment.SwitchWeapon(); return true; }\n\t\tforeach (var entry in Inventory.Entries)\n\t\t{\n\t\t\tWeapon wp = entry?.Item as Weapon;\n\t\t\tif (wp && wp.weaponType == item.toolType) { Inventory.EquipItem(wp); return true; }\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic bool CanInteract(IInteractable target) { return BaseAI && BaseAI.isIdle; }\n\tpublic void InteractWith(IInteractable target)\n\t{\n\t\tif (m_interactor == null)\n\t\t{\n\t\t\tm_interactor = target;\n\t\t\tif (m_interactor != null && BaseAI) BaseAI.SetState(AIBase.State.INTERACTING);\n\t\t}\n\t}\n\tpublic string InteractAnim(IInteractable target) { return \"Hit\"; }\n}\n",
							"origin_encoding": "UTF-8-SIG",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 70.0,
						"zoom_level": 1.0
					},
					"stack_index": 13,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "Assets/Standard Assets/Scripts/Damage.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2797,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/Damage.cs",
							"origin_encoding": "ASCII",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 855.0,
						"zoom_level": 1.0
					},
					"stack_index": 14,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "Assets/Standard Assets/Scripts/CreatorKitCode/UI/DamageUI.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2654,
						"regions":
						{
						},
						"selection":
						[
							[
								112,
								134
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"in_converting": true,
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/CreatorKitCode/UI/DamageUI.cs",
							"origin_content": "using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\n\n\n/// <summary>\n/// Handle all the UI related to damage number appearing above object/character when they get damaged.\n/// Manage the pool of UI text and activating, placing and fading them out across time.\n/// </summary>\npublic class DamageUI : MonoBehaviour\n{\n\tpublic static DamageUI Instance { get; private set; }\n\n\tpublic class ActiveText\n\t{\n\t\tpublic Text UIText;\n\t\tpublic float MaxTime;\n\t\tpublic float Timer;\n\t\tpublic Vector3 WorldPositionStart;\n\n\t\tpublic void PlaceText(Camera cam, Canvas canvas)\n\t\t{\n\t\t\tfloat ratio = 1.0f - (Timer / MaxTime);\n\t\t\tVector3 pos = WorldPositionStart + new Vector3(ratio, Mathf.Sin(ratio * Mathf.PI), 0);\n\t\t\tpos = cam.WorldToScreenPoint(pos);\n\t\t\t//pos *= canvas.scaleFactor;\n\t\t\tpos.z = 0.0f;\n\n\t\t\tUIText.transform.position = pos;\n\t\t}\n\t}\n\n\tpublic Text DamageTextPrefab;\n\n\tCanvas m_Canvas;\n\tQueue<Text> m_TextPool = new Queue<Text>();\n\tList<ActiveText> m_ActiveTexts = new List<ActiveText>();\n\n\tCamera m_MainCamera;\n\n\tvoid Awake()\n\t{\n\t\tInstance = this;\n\t}\n\n\tvoid Start()\n\t{\n\t\tm_Canvas = GetComponent<Canvas>();\n\n\t\tconst int POOL_SIZE = 64;\n\t\tfor (int i = 0; i < POOL_SIZE; ++i)\n\t\t{\n\t\t\tvar t = Instantiate(DamageTextPrefab, m_Canvas.transform);\n\t\t\tt.gameObject.SetActive(false);\n\t\t\tm_TextPool.Enqueue(t);\n\t\t}\n\n\t\tm_MainCamera = Camera.main;\n\t}\n\n\tvoid Update()\n\t{\n\t\tfor (int i = 0; i < m_ActiveTexts.Count; ++i)\n\t\t{\n\t\t\tvar at = m_ActiveTexts[i];\n\t\t\tat.Timer -= Time.deltaTime;\n\n\t\t\tif (at.Timer <= 0.0f)\n\t\t\t{\n\t\t\t\tat.UIText.gameObject.SetActive(false);\n\t\t\t\tm_TextPool.Enqueue(at.UIText);\n\t\t\t\tm_ActiveTexts.RemoveAt(i);\n\t\t\t\ti--;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar color = at.UIText.color;\n\t\t\t\tcolor.a = at.Timer / at.MaxTime;\n\t\t\t\tat.UIText.color = color;\n\t\t\t\tat.PlaceText(m_MainCamera, m_Canvas);\n\t\t\t}\n\t\t}\n\t}\n\n\t/// <summary>\n\t/// Called by the Character system when a new damage is made. This will take care of grabbing a text from\n\t/// the pool and place it properly, then register it as an active text so its position and opacity is updated by\n\t/// the system.\n\t/// </summary>\n\t/// <param name=\"amount\">The amount of damage to display</param>\n\t/// <param name=\"worldPos\">The position is the world where the damage text should appear (e.g. character head)</param>\n\tpublic void NewDamage(int amount, Vector3 worldPos)\n\t{\n\t\tvar t = m_TextPool.Dequeue();\n\n\t\tt.text = amount.ToString();\n\t\tt.gameObject.SetActive(true);\n\n\t\tActiveText at = new ActiveText();\n\t\tat.MaxTime = 1.0f;\n\t\tat.Timer = at.MaxTime;\n\t\tat.UIText = t;\n\t\tat.WorldPositionStart = worldPos + Vector3.up;\n\t\tat.PlaceText(m_MainCamera, m_Canvas);\n\n\t\tm_ActiveTexts.Add(at);\n\t}\n}\n",
							"origin_encoding": "UTF-8-SIG",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 12,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/UsableItem.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3934,
						"regions":
						{
						},
						"selection":
						[
							[
								993,
								1006
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"in_converting": true,
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/CreatorKitCode/Items/UsableItem.cs",
							"origin_content": "using System.Collections;\nusing System.Collections.Generic;\nusing CreatorKitCode;\nusing UnityEngine;\nusing System.Linq;\n\n#if UNITY_EDITOR\nusing UnityEditor;\n#endif\n\n\n/// <summary>\n/// Describe an usable item. A usable item is an item that can be used in the inventory by double clicking on it.\n/// When it is used, all the stored UsageEffects will be run, allowing to specify what that item does.\n/// (e.g. a AddHealth effect will give health point back to the user)\n/// </summary>\n[CreateAssetMenu(fileName = \"UsableItem\", menuName = \"Data/Usable Item\", order = -999)]\npublic class UsableItem : Item\n{\n\tpublic List<KeyValueData.KeyValue<EffectData, string[]>> UsageEffects;\n\tpublic bool autoUse;\n\n\tpublic override bool UsedBy(Character user, int count = 1)\n\t{\n\t\tbool wasUsed = false;\n\t\tfor (int n = 0; n < count; n++)\n\t\t{\n\t\t\tfor (int i = 0; i < UsageEffects.Count; i++)\n\t\t\t{\n\t\t\t\twasUsed |= UsageEffects[i].Key.TakeEffect(user.gameObject, user.gameObject, UsageEffects[i].Value);\n\t\t\t}\n\t\t}\n\t\treturn wasUsed;\n\t}\n\n\tpublic override string GetDescription()\n\t{\n\t\tstring description = base.GetDescription();\n\n\t\tif (!string.IsNullOrWhiteSpace(description))\n\t\t\tdescription += \"\\n\";\n\t\telse\n\t\t\tdescription = \"\";\n\n\t\tfor (int i = 0; i < UsageEffects.Count; i++)\n\t\t{\n\t\t\tdescription += UsageEffects[i].Key.Description + \"\\n\";\n\t\t}\n\t\t// foreach (var effect in UsageEffects)\n\t\t// {\n\t\t// \tdescription += effect.Description + \"\\n\";\n\t\t// }\n\n\t\treturn description;\n\t}\n}\n\n\n// #if UNITY_EDITOR\n// [CustomEditor(typeof(UsableItem))]\n// public class UsableItemEditor : Editor\n// {\n// \tUsableItem m_Target;\n\n// \tItemEditor m_ItemEditor;\n\n// \tList<string> m_AvailableUsageType;\n// \tSerializedProperty m_UsageEffectListProperty;\n\n// \tvoid OnEnable()\n// \t{\n// \t\tm_Target = target as UsableItem;\n// \t\tm_UsageEffectListProperty = serializedObject.FindProperty(nameof(UsableItem.UsageEffects));\n\n// \t\tm_ItemEditor = new ItemEditor();\n// \t\tm_ItemEditor.Init(serializedObject);\n\n// \t\tvar lookup = typeof(UsableItem.UsageEffect);\n// \t\tm_AvailableUsageType = System.AppDomain.CurrentDomain.GetAssemblies()\n// \t\t\t.SelectMany(assembly => assembly.GetTypes())\n// \t\t\t.Where(x => x.IsClass && !x.IsAbstract && x.IsSubclassOf(lookup))\n// \t\t\t.Select(type => type.Name)\n// \t\t\t.ToList();\n// \t}\n\n// \tpublic override void OnInspectorGUI()\n// \t{\n// \t\tm_ItemEditor.GUI();\n\n// \t\tint choice = EditorGUILayout.Popup(\"Add new Effect\", -1, m_AvailableUsageType.ToArray());\n\n// \t\tif (choice != -1)\n// \t\t{\n// \t\t\tvar newInstance = ScriptableObject.CreateInstance(m_AvailableUsageType[choice]);\n\n// \t\t\tAssetDatabase.AddObjectToAsset(newInstance, target);\n\n// \t\t\tm_UsageEffectListProperty.InsertArrayElementAtIndex(m_UsageEffectListProperty.arraySize);\n// \t\t\tm_UsageEffectListProperty.GetArrayElementAtIndex(m_UsageEffectListProperty.arraySize - 1).objectReferenceValue = newInstance;\n// \t\t}\n\n// \t\tEditor ed = null;\n// \t\tint toDelete = -1;\n// \t\tfor (int i = 0; i < m_UsageEffectListProperty.arraySize; ++i)\n// \t\t{\n// \t\t\tEditorGUILayout.BeginHorizontal();\n// \t\t\tEditorGUILayout.BeginVertical();\n// \t\t\tvar item = m_UsageEffectListProperty.GetArrayElementAtIndex(i);\n// \t\t\tSerializedObject obj = new SerializedObject(item.objectReferenceValue);\n\n// \t\t\tEditor.CreateCachedEditor(item.objectReferenceValue, null, ref ed);\n\n// \t\t\ted.OnInspectorGUI();\n// \t\t\tEditorGUILayout.EndVertical();\n\n// \t\t\tif (GUILayout.Button(\"-\", GUILayout.Width(32)))\n// \t\t\t{\n// \t\t\t\ttoDelete = i;\n// \t\t\t}\n// \t\t\tEditorGUILayout.EndHorizontal();\n// \t\t}\n\n// \t\tif (toDelete != -1)\n// \t\t{\n// \t\t\tvar item = m_UsageEffectListProperty.GetArrayElementAtIndex(toDelete).objectReferenceValue;\n// \t\t\tDestroyImmediate(item, true);\n\n// \t\t\t//need to do it twice, first time just nullify the entry, second actually remove it.\n// \t\t\tm_UsageEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n// \t\t\tm_UsageEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n// \t\t}\n\n// \t\tserializedObject.ApplyModifiedProperties();\n// \t}\n// }\n// #endif\n",
							"origin_encoding": "UTF-8-SIG",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 19,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 11,
					"file": "Assets/Standard Assets/Scripts/CreatorKitCode/AddHealthUsageEffect.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 685,
						"regions":
						{
						},
						"selection":
						[
							[
								299,
								299
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": true,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/CreatorKitCode/AddHealthUsageEffect.cs",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 23,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 12,
					"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/IncreaseStrengthEffect.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 103,
						"regions":
						{
						},
						"selection":
						[
							[
								102,
								102
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": true,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/CreatorKitCode/Items/Effects/IncreaseStrengthEffect.cs",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 13,
					"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/StatChangeEquipEffect.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1271,
						"regions":
						{
						},
						"selection":
						[
							[
								230,
								230
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": true,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/CreatorKitCode/Items/Effects/StatChangeEquipEffect.cs",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 22,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 14,
					"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/Effects/VampiricWeaponEffect.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 103,
						"regions":
						{
						},
						"selection":
						[
							[
								102,
								102
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": true,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/CreatorKitCode/Items/Effects/VampiricWeaponEffect.cs",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 21,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 15,
					"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/Weapon.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 10452,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"in_converting": true,
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/CreatorKitCode/Items/Weapon.cs",
							"origin_content": "using System.Collections.Generic;\nusing CreatorKitCode;\nusing UnityEngine;\nusing Vector3 = UnityEngine.Vector3;\n#if UNITY_EDITOR\nusing UnityEditor;\nusing System.Linq;\n#endif\n\n\n/// <summary>\n/// Special case of EquipmentItem for weapon, as they have a whole attack system in addition. Like Equipment they\n/// can have minimum stats and equipped effect, but also have a list of WeaponAttackEffect that will have their\n/// OnAttack function called during a hit, and their OnPostAttack function called after all OnAttack of all effects\n/// are called.\n/// </summary>\npublic class Weapon : EquipmentItem\n{\n\t[System.Serializable]\n\tpublic struct Stat\n\t{\n\t\tpublic float Speed;\n\t\tpublic int MinimumDamage;\n\t\tpublic int MaximumDamage;\n\t\tpublic float MaxRange;\n\t\tpublic int AdditionalTargets;\n\t}\n\tpublic enum WeaponType\n\t{\n\t\tNone,\n\t\tSword,\n\t\tAxe,\n\t\tRake,\n\t\tMace,\n\t\tDagger,\n\t\tBow,\n\t\tMagicWeapon,\n\t\tThrownWeapon\n\t}\n\t[Header(\"WeaponStats\")]\n\tpublic Stat Stats = new Stat() { Speed = 1.0f, MaximumDamage = 1, MinimumDamage = 1, MaxRange = 1, AdditionalTargets = 0 };\n\tpublic StatSystem.DamageType damageType;\n\tpublic WeaponType weaponType;\n\tpublic List<EffectData> AttackEffects;\n\tpublic Skill WeaponSkill;\n\tpublic Bullet bulletPb;\n\n\t[Header(\"Sounds\")]\n\tpublic AudioClip[] HitSounds;\n\tpublic AudioClip[] SwingSounds;\n\n\tpublic void Attack(Character attacker, Character target)\n\t{\n\t\tDamage damage = new Damage(target, attacker);\n\t\tint damageNum = Random.Range(Stats.MinimumDamage, Stats.MaximumDamage + 1);\n\t\tdamage.AddDamage(damageType, damageNum);\n\t\tif (bulletPb != null)\n\t\t{\n\t\t\tVector3 bulletPos = attacker.WeaponRoot.bulletPos;\n\t\t\tBullet bullet = Instantiate(bulletPb, bulletPos, Quaternion.Euler(0, 180, 0));\n\t\t\tbullet.damage = damage;\n\t\t\tbullet.target = target;\n\t\t}\n\t\telse damage.TakeDamage();\n\t\t//foreach (var wae in AttackEffects)\n\t\t//wae.OnAttack(target, attacker, ref attackEffect);\n\n\t\t//target.TakeEffect(attackEffect);\n\n\t\t//foreach (var wae in AttackEffects)\n\t\t//wae.OnPostAttack(target, attacker, attackEffect);\n\t}\n\n\tpublic bool CanHit(Character attacker, Character target)\n\t{\n\t\tif (Vector3.SqrMagnitude(attacker.transform.position - target.transform.position) < Stats.MaxRange * Stats.MaxRange)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpublic override string GetDescription()\n\t{\n\t\tstring desc = base.GetDescription();\n\n\t\tint minimumDPS = Mathf.RoundToInt(Stats.MinimumDamage / Stats.Speed);\n\t\tint maximumDPS = Mathf.RoundToInt(Stats.MaximumDamage / Stats.Speed);\n\n\t\tdesc += \"\\n\";\n\t\tdesc += $\"Damage: {Stats.MinimumDamage} - {Stats.MaximumDamage}\\n\";\n\t\tdesc += $\"DPS: {minimumDPS} - {maximumDPS}\\n\";\n\t\tdesc += $\"Attack Speed : {Stats.Speed}s\\n\";\n\t\tdesc += $\"Range : {Stats.MaxRange}m\\n\";\n\n\t\treturn desc;\n\t}\n\n\tpublic AudioClip GetHitSound()\n\t{\n\t\tif (HitSounds == null || HitSounds.Length == 0)\n\t\t\treturn SFXManager.GetDefaultHit();\n\n\t\treturn HitSounds[Random.Range(0, HitSounds.Length)];\n\t}\n\n\tpublic AudioClip GetSwingSound()\n\t{\n\t\tif (SwingSounds == null || SwingSounds.Length == 0)\n\t\t\treturn SFXManager.GetDefaultSwingSound();\n\n\t\treturn SwingSounds[Random.Range(0, SwingSounds.Length)];\n\t}\n}\n\n\n// #if UNITY_EDITOR\n// [CustomEditor(typeof(Weapon))]\n// public class WeaponEditor : Editor\n// {\n//     Weapon m_Target;\n\n//     ItemEditor m_ItemEditor;\n\n//     List<string> m_AvailableEquipEffectType;\n//     SerializedProperty m_EquippedEffectListProperty;\n\n//     List<string> m_AvailableWeaponAttackEffectType;\n//     SerializedProperty m_WeaponAttackEffectListProperty;\n\n//     SerializedProperty m_HitSoundProps;\n//     SerializedProperty m_SwingSoundProps;\n\n//     SerializedProperty m_MinimumStrengthProperty;\n//     SerializedProperty m_MinimumAgilityProperty;\n//     SerializedProperty m_MinimumDefenseProperty;\n\n//     SerializedProperty m_WeaponStatProperty;\n\n//     [MenuItem(\"Assets/Create/Data/Weapon\", priority = -999)]\n//     static public void CreateWeapon()\n//     {\n//         var newWeapon = CreateInstance<Weapon>();\n//         newWeapon.Slot = (EquipmentItem.EquipmentSlot)666;\n\n//         ProjectWindowUtil.CreateAsset(newWeapon, \"weapon.asset\");\n//     }\n\n//     void OnEnable()\n//     {\n//         m_Target = target as Weapon;\n//         m_EquippedEffectListProperty = serializedObject.FindProperty(nameof(Weapon.EquippedEffects));\n//         m_WeaponAttackEffectListProperty = serializedObject.FindProperty(nameof(Weapon.AttackEffects));\n\n//         m_MinimumStrengthProperty = serializedObject.FindProperty(nameof(EquipmentItem.MinimumStrength));\n//         m_MinimumAgilityProperty = serializedObject.FindProperty(nameof(EquipmentItem.MinimumAgility));\n//         m_MinimumDefenseProperty = serializedObject.FindProperty(nameof(EquipmentItem.MinimumDefense));\n\n//         m_WeaponStatProperty = serializedObject.FindProperty(nameof(Weapon.Stats));\n\n//         m_HitSoundProps = serializedObject.FindProperty(nameof(Weapon.HitSounds));\n//         m_SwingSoundProps = serializedObject.FindProperty(nameof(Weapon.SwingSounds));\n\n//         m_ItemEditor = new ItemEditor();\n//         m_ItemEditor.Init(serializedObject);\n\n//         var lookup = typeof(EffectData);\n//         m_AvailableEquipEffectType = System.AppDomain.CurrentDomain.GetAssemblies()\n//             .SelectMany(assembly => assembly.GetTypes())\n//             .Where(x => x.IsClass && !x.IsAbstract && x.IsSubclassOf(lookup))\n//             .Select(type => type.Name)\n//             .ToList();\n\n//         lookup = typeof(EffectData);\n//         m_AvailableWeaponAttackEffectType = System.AppDomain.CurrentDomain.GetAssemblies()\n//             .SelectMany(assembly => assembly.GetTypes())\n//             .Where(x => x.IsClass && !x.IsAbstract && x.IsSubclassOf(lookup))\n//             .Select(type => type.Name)\n//             .ToList();\n//     }\n\n//     public override void OnInspectorGUI()\n//     {\n//         m_ItemEditor.GUI();\n\n//         EditorGUILayout.PropertyField(m_MinimumStrengthProperty);\n//         EditorGUILayout.PropertyField(m_MinimumAgilityProperty);\n//         EditorGUILayout.PropertyField(m_MinimumDefenseProperty);\n\n//         //EditorGUILayout.PropertyField(m_WeaponStatProperty, true);\n//         var child = m_WeaponStatProperty.Copy();\n//         var depth = child.depth;\n//         child.NextVisible(true);\n\n//         EditorGUILayout.LabelField(\"Weapon Stats\", EditorStyles.boldLabel);\n//         while (child.depth > depth)\n//         {\n//             EditorGUILayout.PropertyField(child, true);\n//             child.NextVisible(false);\n//         }\n\n//         EditorGUILayout.PropertyField(m_HitSoundProps, true);\n//         EditorGUILayout.PropertyField(m_SwingSoundProps, true);\n\n//         int choice = EditorGUILayout.Popup(\"Add new Equipment Effect\", -1, m_AvailableEquipEffectType.ToArray());\n\n//         if (choice != -1)\n//         {\n//             var newInstance = ScriptableObject.CreateInstance(m_AvailableEquipEffectType[choice]);\n\n//             AssetDatabase.AddObjectToAsset(newInstance, target);\n\n//             m_EquippedEffectListProperty.InsertArrayElementAtIndex(m_EquippedEffectListProperty.arraySize);\n//             m_EquippedEffectListProperty.GetArrayElementAtIndex(m_EquippedEffectListProperty.arraySize - 1).objectReferenceValue = newInstance;\n//         }\n\n\n//         Editor ed = null;\n//         int toDelete = -1;\n//         for (int i = 0; i < m_EquippedEffectListProperty.arraySize; ++i)\n//         {\n//             EditorGUILayout.BeginHorizontal();\n//             EditorGUILayout.BeginVertical();\n//             var item = m_EquippedEffectListProperty.GetArrayElementAtIndex(i);           \n//             SerializedObject obj = new SerializedObject(item.objectReferenceValue);\n\n//             Editor.CreateCachedEditor(item.objectReferenceValue, null, ref ed);\n\n//             ed.OnInspectorGUI();\n//             EditorGUILayout.EndVertical();\n\n//             if (GUILayout.Button(\"-\", GUILayout.Width(32)))\n//             {\n//                 toDelete = i;\n//             }\n//             EditorGUILayout.EndHorizontal();\n//         }\n\n//         if (toDelete != -1)\n//         {\n//             var item = m_EquippedEffectListProperty.GetArrayElementAtIndex(toDelete).objectReferenceValue;\n//             DestroyImmediate(item, true);\n\n//             //need to do it twice, first time just nullify the entry, second actually remove it.\n//             m_EquippedEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n//             m_EquippedEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n//         }\n\n//         //attack\n//         choice = EditorGUILayout.Popup(\"Add new Weapon Attack Effect\", -1, m_AvailableWeaponAttackEffectType.ToArray());\n\n//         if (choice != -1)\n//         {\n//             var newInstance = ScriptableObject.CreateInstance(m_AvailableWeaponAttackEffectType[choice]);\n\n//             AssetDatabase.AddObjectToAsset(newInstance, target);\n\n//             m_WeaponAttackEffectListProperty.InsertArrayElementAtIndex(m_WeaponAttackEffectListProperty.arraySize);\n//             m_WeaponAttackEffectListProperty.GetArrayElementAtIndex(m_WeaponAttackEffectListProperty.arraySize - 1).objectReferenceValue = newInstance;\n//         }\n\n//         toDelete = -1;\n//         for (int i = 0; i < m_WeaponAttackEffectListProperty.arraySize; ++i)\n//         {\n//             EditorGUILayout.BeginHorizontal();\n//             EditorGUILayout.BeginVertical();\n//             var item = m_WeaponAttackEffectListProperty.GetArrayElementAtIndex(i);           \n//             SerializedObject obj = new SerializedObject(item.objectReferenceValue);\n\n//             Editor.CreateCachedEditor(item.objectReferenceValue, null, ref ed);\n\n//             ed.OnInspectorGUI();\n//             EditorGUILayout.EndVertical();\n\n//             if (GUILayout.Button(\"-\", GUILayout.Width(32)))\n//             {\n//                 toDelete = i;\n//             }\n//             EditorGUILayout.EndHorizontal();\n//         }\n\n//         if (toDelete != -1)\n//         {\n//             var item = m_WeaponAttackEffectListProperty.GetArrayElementAtIndex(toDelete).objectReferenceValue;\n//             DestroyImmediate(item, true);\n\n//             //need to do it twice, first time just nullify the entry, second actually remove it.\n//             m_WeaponAttackEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n//             m_WeaponAttackEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n//         }\n\n//         serializedObject.ApplyModifiedProperties();\n//     }\n// }\n// #endif",
							"origin_encoding": "UTF-8-SIG",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2434.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 16,
					"file": "Assets/Standard Assets/Scripts/RoleAI.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1865,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/RoleAI.cs",
							"origin_encoding": "UTF-8",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1312.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 17,
					"file": "Assets/Standard Assets/Scripts/UIDigButton.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 730,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/UIDigButton.cs",
							"origin_encoding": "ASCII",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 114.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 18,
					"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Characters/TrainingDummy.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 657,
						"regions":
						{
						},
						"selection":
						[
							[
								482,
								482
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"in_converting": true,
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/CreatorKitCode/Characters/TrainingDummy.cs",
							"origin_content": "using System.Collections;\nusing System.Collections.Generic;\nusing CreatorKitCode;\nusing UnityEngine;\n\nnamespace CreatorKitCodeInternal\n{\n\tpublic class TrainingDummy : MonoBehaviour\n\t{\n\t\tCharacter m_CharData;\n\n\t\tfloat m_HealTimer = 0.0f;\n\n\t\t// Start is called before the first frame update\n\t\tvoid Start()\n\t\t{\n\t\t\tm_CharData = GetComponent<Character>();\n\n\t\t\tm_CharData.DamageEvent.AddListener((damage) =>\n\t\t\t{\n\t\t\t\tm_HealTimer = 3.0f;\n\t\t\t});\n\t\t}\n\n\t\t// Update is called once per frame\n\t\tvoid Update()\n\t\t{\n\t\t\tif (m_HealTimer > 0.0f)\n\t\t\t\tm_HealTimer -= Time.deltaTime;\n\t\t\telse if (m_CharData.Stats.CurrentHealth != m_CharData.Stats.stats.health)\n\t\t\t{\n\t\t\t}\n\t\t}\n\t}\n}",
							"origin_encoding": "UTF-8-SIG",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 11,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 19,
					"file": "Assets/Standard Assets/Scripts/KeyValueData.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2162,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/KeyValueData.cs",
							"origin_encoding": "ASCII",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 15,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 20,
					"file": "Assets/Standard Assets/Scripts/GameManager.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5227,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/GameManager.cs",
							"origin_encoding": "UTF-8",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1096.0,
						"zoom_level": 1.0
					},
					"stack_index": 17,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 21,
					"file": "Assets/Standard Assets/Scripts/CreatorKitCode/CharacterSystem/BaseElementalEffect.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3130,
						"regions":
						{
						},
						"selection":
						[
							[
								2573,
								2573
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"in_converting": true,
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/CreatorKitCode/CharacterSystem/BaseElementalEffect.cs",
							"origin_content": "using System;\nusing System.Collections;\nusing System.Collections.Generic;\nusing CreatorKitCode;\nusing TMPro;\nusing UnityEngine;\n\nnamespace CreatorKitCode\n{\n\t/// <summary>\n\t/// The base class to derive from to write you own custom Elemental effect that can be added to a StatsSystem. There\n\t/// is a default implementation called ElementalEffect that can be used to make Physical/Fire/Electrical/Cold damage\n\t/// across time.\n\t///\n\t/// A derived class *must* implement the Equals function so we can check if 2 effects are the same (e.g. the default\n\t/// implementation ElementalEffect will consider 2 effect equal if they do the same DamageType).\n\t/// </summary>\n\tpublic abstract class BaseElementalEffect : IEquatable<BaseElementalEffect>\n\t{\n\t\tpublic bool Done => m_Timer <= 0.0f;\n\t\tpublic float CurrentTime => m_Timer;\n\t\tpublic float Duration => m_Duration;\n\n\t\tprotected float m_Duration;\n\t\tprotected float m_Timer;\n\t\tprotected Character m_Target;\n\n\t\tpublic BaseElementalEffect(float duration)\n\t\t{\n\t\t\tm_Duration = duration;\n\t\t}\n\n\t\tpublic virtual void Applied(Character target)\n\t\t{\n\t\t\tm_Timer = m_Duration;\n\t\t\tm_Target = target;\n\t\t}\n\n\t\tpublic virtual void Removed()\n\t\t{\n\n\t\t}\n\n\t\tpublic virtual void Update(StatSystem statSystem)\n\t\t{\n\t\t\tm_Timer -= Time.deltaTime;\n\t\t}\n\n\t\tpublic abstract bool Equals(BaseElementalEffect other);\n\t}\n\n\t/// <summary>\n\t/// Default implementation of the BaseElementalEffect. The constructor allows the caller to specify what type of\n\t/// damage is done, how much is done and the speed (time) between each instance of damage (default 1 = every second).\n\t/// </summary>\n\tpublic class ElementalEffect : BaseElementalEffect\n\t{\n\t\tEffectData m_EffectData;\n\t\tfloat m_DamageSpeed;\n\t\tfloat m_SinceLastDamage = 0.0f;\n\n\t\tVFXManager.VFXInstance m_FireInstance;\n\n\t\tpublic ElementalEffect(float duration, EffectData data, float speed = 1.0f) :\n\t\t\tbase(duration)\n\t\t{\n\t\t\tm_EffectData = data;\n\t\t\tm_DamageSpeed = speed;\n\t\t}\n\n\t\tpublic override void Update(StatSystem statSystem)\n\t\t{\n\t\t\tbase.Update(statSystem);\n\n\t\t\tm_SinceLastDamage += Time.deltaTime;\n\n\t\t\tif (m_SinceLastDamage > m_DamageSpeed)\n\t\t\t{\n\t\t\t\tm_SinceLastDamage = 0;\n\n\t\t\t\tDamage damage = new Damage(m_Target);\n\t\t\t\tdamage.TakeDamage();\n\t\t\t}\n\n\t\t\t//we do not parent as if the original object is destroy it would destroy the instance\n\t\t\tm_FireInstance.Effect.transform.position = m_Target.transform.position + Vector3.up;\n\t\t}\n\n\t\tpublic override bool Equals(BaseElementalEffect other)\n\t\t{\n\t\t\tElementalEffect eff = other as ElementalEffect;\n\n\t\t\tif (other == null)\n\t\t\t\treturn false;\n\n\t\t\treturn eff.m_EffectData == m_EffectData;\n\t\t}\n\n\t\tpublic override void Applied(Character target)\n\t\t{\n\t\t\tbase.Applied(target);\n\n\t\t\t//We use the fire effect as it's the only one existing in the project.\n\t\t\t//You can add new VFX and use an if or switch statement to use the right VFXType\n\t\t\t//depending on this effect m_DamageType\n\t\t\tm_FireInstance = VFXManager.GetVFX(VFXType.FireEffect);\n\t\t\tm_FireInstance.Effect.transform.position = target.transform.position + Vector3.up;\n\t\t}\n\n\t\tpublic override void Removed()\n\t\t{\n\t\t\tbase.Removed();\n\n\t\t\tm_FireInstance.Effect.SetActive(false);\n\t\t}\n\t}\n}",
							"origin_encoding": "UTF-8-SIG",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1058.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 22,
					"file": "Assets/Standard Assets/Scripts/CreatorKitCode/Items/EquipmentItem.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5784,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"in_converting": true,
							"is_init_dirty_state": false,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/CreatorKitCode/Items/EquipmentItem.cs",
							"origin_content": "using System.Collections.Generic;\nusing CreatorKitCode;\nusing UnityEngine;\nusing System.Linq;\n\n#if UNITY_EDITOR\nusing UnityEditor;\n#endif\n\n\n/// <summary>\n/// Special Item than can be equipped. They can have a minimum stats value needed to equip them, and you can add\n/// EquippedEffect which will be executed when the object is equipped and unequipped, allowing to code special\n/// behaviour when the player equipped those object, like raising stats.\n/// </summary>\n[CreateAssetMenu(fileName = \"EquipmentItem\", menuName = \"Data/Equipment Item\", order = -999)]\npublic class EquipmentItem : Item\n{\n\tpublic enum EquipmentSlot\n\t{\n\t\tHead,\n\t\tTorso,\n\t\tLegs,\n\t\tFeet,\n\t\tAccessory,\n\t\tWeapon,\n\t\tViceWeapon\n\t}\n\n\tpublic EquipmentSlot Slot;\n\tpublic StatSystem.StatModifier EquippedStat;\n\n\tpublic override string GetDescription()\n\t{\n\t\tstring desc = base.GetDescription();\n\t\tdesc += StatsDescription();\n\t\t// foreach (var effect in EquippedEffects)\n\t\t// \tdesc += \"\\n\" + effect.GetDescription();\n\n\t\t// bool requireStrength = MinimumStrength > 0;\n\t\t// bool requireDefense = MinimumDefense > 0;\n\t\t// bool requireAgility = MinimumAgility > 0;\n\n\t\t// if (requireStrength || requireAgility || requireDefense)\n\t\t// {\n\t\t// \tdesc += \"\\nRequire : \\n\";\n\n\t\t// \tif (requireStrength)\n\t\t// \t\tdesc += $\"Strength : {MinimumStrength}\";\n\n\t\t// \tif (requireAgility)\n\t\t// \t{\n\t\t// \t\tif (requireStrength) desc += \" & \";\n\t\t// \t\tdesc += $\"Defense : {MinimumDefense}\";\n\t\t// \t}\n\n\t\t// \tif (requireDefense)\n\t\t// \t{\n\t\t// \t\tif (requireStrength || requireAgility) desc += \" & \";\n\t\t// \t\tdesc += $\"Agility : {MinimumAgility}\";\n\t\t// \t}\n\t\t// }\n\t\treturn desc;\n\t}\n\tpublic void EquippedBy(Character user)\n\t{\n\t\tuser.Stats.AddModifier(EquippedStat);\n\t}\n\n\tpublic void UnequippedBy(Character user)\n\t{\n\t\tuser.Stats.RemoveModifier(EquippedStat);\n\t}\n\n\tstring StatsDescription()\n\t{\n\t\tstring desc = \"\\n\";\n\t\tstring unit = EquippedStat.ModifierMode == StatSystem.StatModifier.Mode.Percentage ? \"%\" : \"\";\n\n\t\tif (EquippedStat.Stats.strength != 0)\n\t\t\tdesc += $\"Str : {EquippedStat.Stats.strength:+0;-#}{unit}\\n\"; //format specifier to force the + sign to appear\n\t\tif (EquippedStat.Stats.agility != 0)\n\t\t\tdesc += $\"Agi : {EquippedStat.Stats.agility:+0;-#}{unit}\\n\";\n\t\tif (EquippedStat.Stats.defense != 0)\n\t\t\tdesc += $\"Def : {EquippedStat.Stats.defense:+0;-#}{unit}\\n\";\n\t\tif (EquippedStat.Stats.health != 0)\n\t\t\tdesc += $\"HP : {EquippedStat.Stats.health:+0;-#}{unit}\\n\";\n\n\t\treturn desc;\n\t}\n}\n\n\n// #if UNITY_EDITOR\n// [CustomEditor(typeof(EquipmentItem))]\n// public class EquipmentItemEditor : Editor\n// {\n// \tEquipmentItem m_Target;\n\n// \tItemEditor m_ItemEditor;\n\n// \tList<string> m_AvailableEquipEffectType;\n// \tSerializedProperty m_EquippedEffectListProperty;\n\n// \tSerializedProperty m_SlotProperty;\n\n// \tSerializedProperty m_MinimumStrengthProperty;\n// \tSerializedProperty m_MinimumAgilityProperty;\n// \tSerializedProperty m_MinimumDefenseProperty;\n\n// \tvoid OnEnable()\n// \t{\n// \t\tm_Target = target as EquipmentItem;\n// \t\tm_EquippedEffectListProperty = serializedObject.FindProperty(nameof(EquipmentItem.EquippedEffects));\n\n// \t\tm_SlotProperty = serializedObject.FindProperty(nameof(EquipmentItem.Slot));\n\n// \t\tm_MinimumStrengthProperty = serializedObject.FindProperty(nameof(EquipmentItem.MinimumStrength));\n// \t\tm_MinimumAgilityProperty = serializedObject.FindProperty(nameof(EquipmentItem.MinimumAgility));\n// \t\tm_MinimumDefenseProperty = serializedObject.FindProperty(nameof(EquipmentItem.MinimumDefense));\n\n// \t\tm_ItemEditor = new ItemEditor();\n// \t\tm_ItemEditor.Init(serializedObject);\n\n// \t\tvar lookup = typeof(EffectData);\n// \t\tm_AvailableEquipEffectType = System.AppDomain.CurrentDomain.GetAssemblies()\n// \t\t\t.SelectMany(assembly => assembly.GetTypes())\n// \t\t\t.Where(x => x.IsClass && !x.IsAbstract && x.IsSubclassOf(lookup))\n// \t\t\t.Select(type => type.Name)\n// \t\t\t.ToList();\n// \t}\n\n// \tpublic override void OnInspectorGUI()\n// \t{\n// \t\tm_ItemEditor.GUI();\n\n// \t\tEditorGUILayout.PropertyField(m_SlotProperty);\n\n// \t\tEditorGUILayout.PropertyField(m_MinimumStrengthProperty);\n// \t\tEditorGUILayout.PropertyField(m_MinimumAgilityProperty);\n// \t\tEditorGUILayout.PropertyField(m_MinimumDefenseProperty);\n\n// \t\tint choice = EditorGUILayout.Popup(\"Add new Effect\", -1, m_AvailableEquipEffectType.ToArray());\n\n// \t\tif (choice != -1)\n// \t\t{\n// \t\t\tvar newInstance = ScriptableObject.CreateInstance(m_AvailableEquipEffectType[choice]);\n\n// \t\t\tAssetDatabase.AddObjectToAsset(newInstance, target);\n\n// \t\t\tm_EquippedEffectListProperty.InsertArrayElementAtIndex(m_EquippedEffectListProperty.arraySize);\n// \t\t\tm_EquippedEffectListProperty.GetArrayElementAtIndex(m_EquippedEffectListProperty.arraySize - 1).objectReferenceValue = newInstance;\n// \t\t}\n\n// \t\tEditor ed = null;\n// \t\tint toDelete = -1;\n// \t\tfor (int i = 0; i < m_EquippedEffectListProperty.arraySize; ++i)\n// \t\t{\n// \t\t\tEditorGUILayout.BeginHorizontal();\n// \t\t\tEditorGUILayout.BeginVertical();\n// \t\t\tvar item = m_EquippedEffectListProperty.GetArrayElementAtIndex(i);\n// \t\t\tSerializedObject obj = new SerializedObject(item.objectReferenceValue);\n\n// \t\t\tEditor.CreateCachedEditor(item.objectReferenceValue, null, ref ed);\n\n// \t\t\ted.OnInspectorGUI();\n// \t\t\tEditorGUILayout.EndVertical();\n\n// \t\t\tif (GUILayout.Button(\"-\", GUILayout.Width(32)))\n// \t\t\t{\n// \t\t\t\ttoDelete = i;\n// \t\t\t}\n// \t\t\tEditorGUILayout.EndHorizontal();\n// \t\t}\n\n// \t\tif (toDelete != -1)\n// \t\t{\n// \t\t\tvar item = m_EquippedEffectListProperty.GetArrayElementAtIndex(toDelete).objectReferenceValue;\n// \t\t\tDestroyImmediate(item, true);\n\n// \t\t\t//need to do it twice, first time just nullify the entry, second actually remove it.\n// \t\t\tm_EquippedEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n// \t\t\tm_EquippedEffectListProperty.DeleteArrayElementAtIndex(toDelete);\n// \t\t}\n\n// \t\tserializedObject.ApplyModifiedProperties();\n// \t}\n// }\n// #endif",
							"origin_encoding": "UTF-8-SIG",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 431.0,
						"zoom_level": 1.0
					},
					"stack_index": 16,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 23,
					"file": "Assets/Standard Assets/Scripts/Effect.cs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3020,
						"regions":
						{
						},
						"selection":
						[
							[
								2906,
								2906
							]
						],
						"settings":
						{
							"auto_complete_triggers":
							[
								{
									"characters": ".<",
									"selector": "source.cs"
								}
							],
							"is_init_dirty_state": true,
							"lsp_uri": "file:///C:/Pju3d.desert/Assets/Standard%20Assets/Scripts/Effect.cs",
							"origin_encoding": "ASCII",
							"rainbow_checked": true,
							"syntax": "Packages/C#/C#.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 57.0,
						"zoom_level": 1.0
					},
					"stack_index": 18,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 28.0
	},
	"input":
	{
		"height": 43.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.LSP Log Panel":
	{
		"height": 0.0
	},
	"output.Terminus":
	{
		"height": 355.0
	},
	"output.diagnostics":
	{
		"height": 0.0
	},
	"output.exec":
	{
		"height": 170.0
	},
	"output.find_results":
	{
		"height": 0.0
	},
	"output.variable_get":
	{
		"height": 0.0
	},
	"pinned_build_system": "Packages/User/GDScript.sublime-build",
	"project": "Pju3d.desert.sublime-project",
	"replace":
	{
		"height": 52.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"inter",
				"Standard Assets\\Scripts\\InteractOnTrigger.cs"
			],
			[
				"DamageUI",
				"Standard Assets\\Scripts\\CreatorKitCode\\UI\\DamageUI.cs"
			],
			[
				"effe",
				"Standard Assets\\Scripts\\EffectData.cs"
			],
			[
				"cha",
				"Standard Assets\\Scripts\\CreatorKitCode\\CharacterSystem\\CharacterData.cs"
			],
			[
				"stat",
				"Standard Assets\\Scripts\\CreatorKitCode\\CharacterSystem\\StatSystem.cs"
			],
			[
				"effectD",
				"Standard Assets\\Scripts\\EffectData.cs"
			],
			[
				"eff",
				"Standard Assets\\Scripts\\EffectData.cs"
			],
			[
				"weapon",
				"Standard Assets\\Scripts\\CreatorKitCode\\Items\\Weapon.cs"
			],
			[
				"sta",
				"Standard Assets\\Scripts\\CreatorKitCode\\CharacterSystem\\StatSystem.cs"
			],
			[
				"skilluser",
				"Standard Assets\\Scripts\\SkillUser.cs"
			],
			[
				"skil",
				"Standard Assets\\Scripts\\Skill.cs"
			],
			[
				"events",
				"Standard Assets\\Scripts\\EventSender.cs"
			],
			[
				"role",
				"Standard Assets\\Scripts\\RoleControl.cs"
			],
			[
				"event",
				"Standard Assets\\Scripts\\EventSender.cs"
			],
			[
				"skill",
				"Standard Assets\\Scripts\\Skill.cs"
			],
			[
				"uimainwi",
				"Standard Assets\\Scripts\\UIMainWindow.cs"
			],
			[
				"rolecon",
				"Standard Assets\\Scripts\\RoleControl.cs"
			],
			[
				"inventory",
				"Standard Assets\\Scripts\\CreatorKitCode\\CharacterSystem\\InventorySystem.cs"
			],
			[
				"inve",
				"Standard Assets\\Scripts\\UIInventorySlot.cs"
			],
			[
				"inv",
				"Standard Assets\\Scripts\\UIInventoryWindow.cs"
			],
			[
				"itemus",
				"Standard Assets\\Scripts\\CreatorKitCode\\Items\\UsableItem.cs"
			],
			[
				"equip",
				"Standard Assets\\Scripts\\CreatorKitCode\\Items\\EquipmentItem.cs"
			],
			[
				"bull",
				"ddb\\obj\\combat\\bullet.gd"
			],
			[
				"role.gd",
				"ddb\\obj\\role\\role.gd"
			],
			[
				"HeroStrengthen",
				"csv\\HeroStrengthen.csv"
			],
			[
				"artre",
				"csv\\ArtResource.csv"
			],
			[
				"buil",
				"csv\\BuildingTypes.csv"
			],
			[
				"item",
				"csv\\Item.csv"
			],
			[
				"npc",
				"csv\\NpcService.csv"
			],
			[
				"user",
				"csv\\UserDefault.csv"
			],
			[
				"task",
				"csv\\Task.csv"
			],
			[
				"cityelementnpc",
				"csv\\CityElementNpc.csv"
			],
			[
				"heonpc",
				"csv\\HeroNpc.csv"
			],
			[
				"senp",
				"csv\\SeNpc.csv"
			],
			[
				"client",
				"csv\\HeroClientRes.csv"
			],
			[
				"attrg",
				"csv\\AttrGroup-hero.csv"
			],
			[
				"attrtem",
				"csv\\AttrTemplate.csv"
			],
			[
				"attrgroup",
				"csv\\AttrGroup-hero.csv"
			],
			[
				"herost",
				"csv\\HeroStrengthen.csv"
			],
			[
				"heroSt",
				"csv\\HeroStrengthen.csv"
			],
			[
				"herobre",
				"csv\\HeroBreakThrough.csv"
			],
			[
				"exp",
				"csv\\ExpTemplate.csv"
			],
			[
				"hero",
				"csv\\Heroes.csv"
			],
			[
				"itemgro",
				"csv\\ItemGroup-hero.csv"
			],
			[
				"attrgrou",
				"csv\\AttrGroup-hero.csv"
			],
			[
				"heros",
				"csv\\HeroStrengthen.csv"
			],
			[
				"troop",
				"csv\\TroopFormation.csv"
			],
			[
				"attrtype",
				"csv\\AttrType.csv"
			],
			[
				"const",
				"csv\\ConstMain.csv"
			],
			[
				"randoma",
				"csv\\RandomAttr.csv"
			],
			[
				"heroequp",
				"csv\\HeroEquip.csv"
			],
			[
				"heroeup",
				"csv\\HeroEquip.csv"
			],
			[
				"str",
				"csv\\HeroStrengthen.csv"
			],
			[
				"itemgrou",
				"csv\\ItemGroup.csv"
			],
			[
				"item-item",
				"csv\\Item-ItemHero.csv"
			],
			[
				"randomatt",
				"csv\\RandomAttr.csv"
			],
			[
				"mapins",
				"csv\\MapInstance.csv"
			],
			[
				"incident",
				"csv\\Incident.csv"
			],
			[
				"rando",
				"csv\\RandomBox.csv"
			],
			[
				"item-her",
				"csv\\Item-ItemHero.csv"
			],
			[
				"itemgroup",
				"csv\\ItemGroup.csv"
			],
			[
				"randomb",
				"csv\\RandomBox.csv"
			],
			[
				"mapin",
				"csv\\MapInstance.csv"
			],
			[
				"itemhero",
				"csv\\Item-ItemHero.csv"
			],
			[
				"card",
				"csv\\Card.csv"
			],
			[
				"constmain",
				"csv\\ConstMain.csv"
			],
			[
				"ConstMain",
				"csv\\ConstMain.csv"
			],
			[
				"da",
				"csv\\DamageFactorTemplate.csv"
			],
			[
				"suit",
				"csv\\Suit.csv"
			],
			[
				"arte",
				"csv\\ArtResource.csv"
			],
			[
				"towerintel",
				"csv\\TowerIntel.csv"
			],
			[
				"zoneeven",
				"csv\\ZoneEvent.csv"
			],
			[
				"worldi",
				"csv\\WorldIncident.csv"
			],
			[
				"timelinesceneinfo",
				"csv\\TimelineSceneInfo.csv"
			],
			[
				"timelinenpcinfo",
				"csv\\TimelineNpcInfo.csv"
			],
			[
				"timelineinfo",
				"csv\\TimelineInfo.csv"
			],
			[
				"timeline",
				"csv\\Timeline.csv"
			],
			[
				"storytaskstep",
				"csv\\StoryTaskStep.csv"
			],
			[
				"storytask",
				"csv\\StoryTask.csv"
			],
			[
				"storydialoggroup",
				"csv\\StoryDialogGroup.csv"
			],
			[
				"storydialog",
				"csv\\StoryDialog.csv"
			],
			[
				"storychoice",
				"csv\\StoryChoice.csv"
			],
			[
				"soldiertype",
				"csv\\SoldierType.csv"
			],
			[
				"soldierclient",
				"csv\\SoldierClient.csv"
			],
			[
				"maps",
				"csv\\MapScene.csv"
			],
			[
				"soldier.csv",
				"csv\\Soldier.csv"
			],
			[
				"slgskillinfo",
				"csv\\SlgSkillInfo.csv"
			],
			[
				"skilllogicalmodify",
				"csv\\SkillLogicalModify.csv"
			],
			[
				"skilleditormain",
				"csv\\SkillEditorMain.csv"
			],
			[
				"skilleditorbehav",
				"csv\\SkillEditorBehaviour.csv"
			],
			[
				"skillbehaviourmodify",
				"csv\\SkillBehaviourModify.csv"
			],
			[
				"shopcommodity",
				"csv\\ShopCommodity.csv"
			],
			[
				"shop",
				"csv\\Shop.csv"
			],
			[
				"serverresult2client",
				"csv\\ServerResult2ClientResult.csv"
			],
			[
				"seshowitem",
				"csv\\SeShowItem.csv"
			],
			[
				"seplayer",
				"csv\\SePlayer.csv"
			],
			[
				"senpc",
				"csv\\SeNpc.csv"
			],
			[
				"ruralslot",
				"csv\\RuralSlotGroup.csv"
			],
			[
				"robselevel",
				"csv\\RobSeLevel.csv"
			],
			[
				"rescue",
				"csv\\RescueWorker.csv"
			],
			[
				"refresh",
				"csv\\Refresh.csv"
			],
			[
				"randomattr",
				"csv\\RandomAttr.csv"
			],
			[
				"puppetslg",
				"csv\\PuppetSlg.csv"
			],
			[
				"pupet",
				"csv\\Puppet.csv"
			],
			[
				"popup",
				"csv\\PopUp.csv"
			],
			[
				"NpcSer",
				"csv\\NpcService.csv"
			],
			[
				"npcgense",
				"csv\\NpcGenSe.csv"
			],
			[
				"movie",
				"csv\\Movie.csv"
			],
			[
				"mine",
				"csv\\Mine.csv"
			],
			[
				"mapscene",
				"csv\\MapScene.csv"
			],
			[
				"mapmini",
				"csv\\MapMini.csv"
			],
			[
				"manufacture",
				"csv\\Manufacture.csv"
			],
			[
				"mailconst",
				"csv\\MailConst.csv"
			],
			[
				"mail",
				"csv\\Mail.csv"
			],
			[
				"logiccolumn",
				"csv\\LogicColumn.csv"
			],
			[
				"loadingconf",
				"csv\\LoadingConfig.csv"
			],
			[
				"Limit",
				"csv\\Limit.csv"
			],
			[
				"LevelTemplateEvent",
				"csv\\LevelTemplateEvent.csv"
			],
			[
				"LevelTemplateEnum",
				"csv\\LevelTemplateEnum.csv"
			],
			[
				"LevelTemplateCondi",
				"csv\\LevelTemplateCondition.csv"
			],
			[
				"LevelTemplatecONDI",
				"csv\\LevelTemplateCondition.csv"
			],
			[
				"LevelTemplateAction",
				"csv\\LevelTemplateAction.csv"
			],
			[
				"LevelGuide",
				"csv\\LevelGuideKey.csv"
			],
			[
				"LevelGuideDisplay",
				"csv\\LevelGuideDisplay.csv"
			],
			[
				"LevelActionGroup",
				"csv\\LevelActionGroup.csv"
			],
			[
				"language",
				"csv\\Language.csv"
			],
			[
				"kmonsterarea",
				"csv\\KmonsterArea.csv"
			],
			[
				"kingdommapversion",
				"csv\\KingdomMapVersion.csv"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 500.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"C:\\Pju3d.desert\\OCEScripts.sublime-workspace"
			]
		],
		"width": 380.0
	},
	"select_symbol":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 332.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
